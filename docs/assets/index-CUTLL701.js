(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const st of document.querySelectorAll('link[rel="modulepreload"]'))ct(st);new MutationObserver(st=>{for(const e of st)if(e.type==="childList")for(const It of e.addedNodes)It.tagName==="LINK"&&It.rel==="modulepreload"&&ct(It)}).observe(document,{childList:!0,subtree:!0});function ot(st){const e={};return st.integrity&&(e.integrity=st.integrity),st.referrerPolicy&&(e.referrerPolicy=st.referrerPolicy),st.crossOrigin==="use-credentials"?e.credentials="include":st.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function ct(st){if(st.ep)return;st.ep=!0;const e=ot(st);fetch(st.href,e)}})();function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}function getAugmentedNamespace($){if($.__esModule)return $;var et=$.default;if(typeof et=="function"){var ot=function ct(){return this instanceof ct?Reflect.construct(et,arguments,this.constructor):et.apply(this,arguments)};ot.prototype=et.prototype}else ot={};return Object.defineProperty(ot,"__esModule",{value:!0}),Object.keys($).forEach(function(ct){var st=Object.getOwnPropertyDescriptor($,ct);Object.defineProperty(ot,ct,st.get?st:{enumerable:!0,get:function(){return $[ct]}})}),ot}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1($){return $===null||typeof $!="object"?null:($=z$1&&$[z$1]||$["@@iterator"],typeof $=="function"?$:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1($,et,ot){this.props=$,this.context=et,this.refs=D$1,this.updater=ot||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function($,et){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,et,"setState")};E$1.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1($,et,ot){this.props=$,this.context=et,this.refs=D$1,this.updater=ot||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1($,et,ot){var ct,st={},e=null,It=null;if(et!=null)for(ct in et.ref!==void 0&&(It=et.ref),et.key!==void 0&&(e=""+et.key),et)J.call(et,ct)&&!L$1.hasOwnProperty(ct)&&(st[ct]=et[ct]);var St=arguments.length-2;if(St===1)st.children=ot;else if(1<St){for(var Gt=Array(St),vt=0;vt<St;vt++)Gt[vt]=arguments[vt+2];st.children=Gt}if($&&$.defaultProps)for(ct in St=$.defaultProps,St)st[ct]===void 0&&(st[ct]=St[ct]);return{$$typeof:l$1,type:$,key:e,ref:It,props:st,_owner:K$1.current}}function N$1($,et){return{$$typeof:l$1,type:$.type,key:et,ref:$.ref,props:$.props,_owner:$._owner}}function O$1($){return typeof $=="object"&&$!==null&&$.$$typeof===l$1}function escape$1($){var et={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ot){return et[ot]})}var P$1=/\/+/g;function Q$1($,et){return typeof $=="object"&&$!==null&&$.key!=null?escape$1(""+$.key):et.toString(36)}function R$1($,et,ot,ct,st){var e=typeof $;(e==="undefined"||e==="boolean")&&($=null);var It=!1;if($===null)It=!0;else switch(e){case"string":case"number":It=!0;break;case"object":switch($.$$typeof){case l$1:case n$1:It=!0}}if(It)return It=$,st=st(It),$=ct===""?"."+Q$1(It,0):ct,I$1(st)?(ot="",$!=null&&(ot=$.replace(P$1,"$&/")+"/"),R$1(st,et,ot,"",function(vt){return vt})):st!=null&&(O$1(st)&&(st=N$1(st,ot+(!st.key||It&&It.key===st.key?"":(""+st.key).replace(P$1,"$&/")+"/")+$)),et.push(st)),1;if(It=0,ct=ct===""?".":ct+":",I$1($))for(var St=0;St<$.length;St++){e=$[St];var Gt=ct+Q$1(e,St);It+=R$1(e,et,ot,Gt,st)}else if(Gt=A$1($),typeof Gt=="function")for($=Gt.call($),St=0;!(e=$.next()).done;)e=e.value,Gt=ct+Q$1(e,St++),It+=R$1(e,et,ot,Gt,st);else if(e==="object")throw et=String($),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return It}function S$1($,et,ot){if($==null)return $;var ct=[],st=0;return R$1($,ct,"","",function(e){return et.call(ot,e,st++)}),ct}function T$1($){if($._status===-1){var et=$._result;et=et(),et.then(function(ot){($._status===0||$._status===-1)&&($._status=1,$._result=ot)},function(ot){($._status===0||$._status===-1)&&($._status=2,$._result=ot)}),$._status===-1&&($._status=0,$._result=et)}if($._status===1)return $._result.default;throw $._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function($,et,ot){S$1($,function(){et.apply(this,arguments)},ot)},count:function($){var et=0;return S$1($,function(){et++}),et},toArray:function($){return S$1($,function(et){return et})||[]},only:function($){if(!O$1($))throw Error("React.Children.only expected to receive a single React element child.");return $}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function($,et,ot){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ct=C$1({},$.props),st=$.key,e=$.ref,It=$._owner;if(et!=null){if(et.ref!==void 0&&(e=et.ref,It=K$1.current),et.key!==void 0&&(st=""+et.key),$.type&&$.type.defaultProps)var St=$.type.defaultProps;for(Gt in et)J.call(et,Gt)&&!L$1.hasOwnProperty(Gt)&&(ct[Gt]=et[Gt]===void 0&&St!==void 0?St[Gt]:et[Gt])}var Gt=arguments.length-2;if(Gt===1)ct.children=ot;else if(1<Gt){St=Array(Gt);for(var vt=0;vt<Gt;vt++)St[vt]=arguments[vt+2];ct.children=St}return{$$typeof:l$1,type:$.type,key:st,ref:e,props:ct,_owner:It}};react_production_min.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:t,_context:$},$.Consumer=$};react_production_min.createElement=M$1;react_production_min.createFactory=function($){var et=M$1.bind(null,$);return et.type=$,et};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function($){return{$$typeof:v$1,render:$}};react_production_min.isValidElement=O$1;react_production_min.lazy=function($){return{$$typeof:y,_payload:{_status:-1,_result:$},_init:T$1}};react_production_min.memo=function($,et){return{$$typeof:x,type:$,compare:et===void 0?null:et}};react_production_min.startTransition=function($){var et=V$1.transition;V$1.transition={};try{$()}finally{V$1.transition=et}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function($,et){return U$1.current.useCallback($,et)};react_production_min.useContext=function($){return U$1.current.useContext($)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function($){return U$1.current.useDeferredValue($)};react_production_min.useEffect=function($,et){return U$1.current.useEffect($,et)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function($,et,ot){return U$1.current.useImperativeHandle($,et,ot)};react_production_min.useInsertionEffect=function($,et){return U$1.current.useInsertionEffect($,et)};react_production_min.useLayoutEffect=function($,et){return U$1.current.useLayoutEffect($,et)};react_production_min.useMemo=function($,et){return U$1.current.useMemo($,et)};react_production_min.useReducer=function($,et,ot){return U$1.current.useReducer($,et,ot)};react_production_min.useRef=function($){return U$1.current.useRef($)};react_production_min.useState=function($){return U$1.current.useState($)};react_production_min.useSyncExternalStore=function($,et,ot){return U$1.current.useSyncExternalStore($,et,ot)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q($,et,ot){var ct,st={},e=null,It=null;ot!==void 0&&(e=""+ot),et.key!==void 0&&(e=""+et.key),et.ref!==void 0&&(It=et.ref);for(ct in et)m$1.call(et,ct)&&!p$1.hasOwnProperty(ct)&&(st[ct]=et[ct]);if($&&$.defaultProps)for(ct in et=$.defaultProps,et)st[ct]===void 0&&(st[ct]=et[ct]);return{$$typeof:k,type:$,key:e,ref:It,props:st,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function($){function et(nn,Zt){var mn=nn.length;nn.push(Zt);e:for(;0<mn;){var gn=mn-1>>>1,In=nn[gn];if(0<st(In,Zt))nn[gn]=Zt,nn[mn]=In,mn=gn;else break e}}function ot(nn){return nn.length===0?null:nn[0]}function ct(nn){if(nn.length===0)return null;var Zt=nn[0],mn=nn.pop();if(mn!==Zt){nn[0]=mn;e:for(var gn=0,In=nn.length,Vn=In>>>1;gn<Vn;){var Zn=2*(gn+1)-1,lr=nn[Zn],hr=Zn+1,Lr=nn[hr];if(0>st(lr,mn))hr<In&&0>st(Lr,lr)?(nn[gn]=Lr,nn[hr]=mn,gn=hr):(nn[gn]=lr,nn[Zn]=mn,gn=Zn);else if(hr<In&&0>st(Lr,mn))nn[gn]=Lr,nn[hr]=mn,gn=hr;else break e}}return Zt}function st(nn,Zt){var mn=nn.sortIndex-Zt.sortIndex;return mn!==0?mn:nn.id-Zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var e=performance;$.unstable_now=function(){return e.now()}}else{var It=Date,St=It.now();$.unstable_now=function(){return It.now()-St}}var Gt=[],vt=[],it=1,dt=null,bt=3,Tt=!1,Et=!1,Mt=!1,Rt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function gt(nn){for(var Zt=ot(vt);Zt!==null;){if(Zt.callback===null)ct(vt);else if(Zt.startTime<=nn)ct(vt),Zt.sortIndex=Zt.expirationTime,et(Gt,Zt);else break;Zt=ot(vt)}}function Ct(nn){if(Mt=!1,gt(nn),!Et)if(ot(Gt)!==null)Et=!0,dn(xt);else{var Zt=ot(vt);Zt!==null&&An(Ct,Zt.startTime-nn)}}function xt(nn,Zt){Et=!1,Mt&&(Mt=!1,pt(Ut),Ut=-1),Tt=!0;var mn=bt;try{for(gt(Zt),dt=ot(Gt);dt!==null&&(!(dt.expirationTime>Zt)||nn&&!tn());){var gn=dt.callback;if(typeof gn=="function"){dt.callback=null,bt=dt.priorityLevel;var In=gn(dt.expirationTime<=Zt);Zt=$.unstable_now(),typeof In=="function"?dt.callback=In:dt===ot(Gt)&&ct(Gt),gt(Zt)}else ct(Gt);dt=ot(Gt)}if(dt!==null)var Vn=!0;else{var Zn=ot(vt);Zn!==null&&An(Ct,Zn.startTime-Zt),Vn=!1}return Vn}finally{dt=null,bt=mn,Tt=!1}}var Dt=!1,Ht=null,Ut=-1,Xt=5,Qt=-1;function tn(){return!($.unstable_now()-Qt<Xt)}function on(){if(Ht!==null){var nn=$.unstable_now();Qt=nn;var Zt=!0;try{Zt=Ht(!0,nn)}finally{Zt?vn():(Dt=!1,Ht=null)}}else Dt=!1}var vn;if(typeof mt=="function")vn=function(){mt(on)};else if(typeof MessageChannel<"u"){var fn=new MessageChannel,Cn=fn.port2;fn.port1.onmessage=on,vn=function(){Cn.postMessage(null)}}else vn=function(){Rt(on,0)};function dn(nn){Ht=nn,Dt||(Dt=!0,vn())}function An(nn,Zt){Ut=Rt(function(){nn($.unstable_now())},Zt)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(nn){nn.callback=null},$.unstable_continueExecution=function(){Et||Tt||(Et=!0,dn(xt))},$.unstable_forceFrameRate=function(nn){0>nn||125<nn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Xt=0<nn?Math.floor(1e3/nn):5},$.unstable_getCurrentPriorityLevel=function(){return bt},$.unstable_getFirstCallbackNode=function(){return ot(Gt)},$.unstable_next=function(nn){switch(bt){case 1:case 2:case 3:var Zt=3;break;default:Zt=bt}var mn=bt;bt=Zt;try{return nn()}finally{bt=mn}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(nn,Zt){switch(nn){case 1:case 2:case 3:case 4:case 5:break;default:nn=3}var mn=bt;bt=nn;try{return Zt()}finally{bt=mn}},$.unstable_scheduleCallback=function(nn,Zt,mn){var gn=$.unstable_now();switch(typeof mn=="object"&&mn!==null?(mn=mn.delay,mn=typeof mn=="number"&&0<mn?gn+mn:gn):mn=gn,nn){case 1:var In=-1;break;case 2:In=250;break;case 5:In=1073741823;break;case 4:In=1e4;break;default:In=5e3}return In=mn+In,nn={id:it++,callback:Zt,priorityLevel:nn,startTime:mn,expirationTime:In,sortIndex:-1},mn>gn?(nn.sortIndex=mn,et(vt,nn),ot(Gt)===null&&nn===ot(vt)&&(Mt?(pt(Ut),Ut=-1):Mt=!0,An(Ct,mn-gn))):(nn.sortIndex=In,et(Gt,nn),Et||Tt||(Et=!0,dn(xt))),nn},$.unstable_shouldYield=tn,$.unstable_wrapCallback=function(nn){var Zt=bt;return function(){var mn=bt;bt=Zt;try{return nn.apply(this,arguments)}finally{bt=mn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p($){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+$,ot=1;ot<arguments.length;ot++)et+="&args[]="+encodeURIComponent(arguments[ot]);return"Minified React error #"+$+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa($,et){ha($,et),ha($+"Capture",et)}function ha($,et){for(ea[$]=et,$=0;$<et.length;$++)da.add(et[$])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa($){return ja.call(ma,$)?!0:ja.call(la,$)?!1:ka.test($)?ma[$]=!0:(la[$]=!0,!1)}function pa($,et,ot,ct){if(ot!==null&&ot.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return ct?!1:ot!==null?!ot.acceptsBooleans:($=$.toLowerCase().slice(0,5),$!=="data-"&&$!=="aria-");default:return!1}}function qa($,et,ot,ct){if(et===null||typeof et>"u"||pa($,et,ot,ct))return!0;if(ct)return!1;if(ot!==null)switch(ot.type){case 3:return!et;case 4:return et===!1;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}function v($,et,ot,ct,st,e,It){this.acceptsBooleans=et===2||et===3||et===4,this.attributeName=ct,this.attributeNamespace=st,this.mustUseProperty=ot,this.propertyName=$,this.type=et,this.sanitizeURL=e,this.removeEmptyString=It}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){z[$]=new v($,0,!1,$,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var et=$[0];z[et]=new v(et,1,!1,$[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function($){z[$]=new v($,2,!1,$.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){z[$]=new v($,2,!1,$,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){z[$]=new v($,3,!1,$.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function($){z[$]=new v($,3,!0,$,null,!1,!1)});["capture","download"].forEach(function($){z[$]=new v($,4,!1,$,null,!1,!1)});["cols","rows","size","span"].forEach(function($){z[$]=new v($,6,!1,$,null,!1,!1)});["rowSpan","start"].forEach(function($){z[$]=new v($,5,!1,$.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var et=$.replace(ra,sa);z[et]=new v(et,1,!1,$,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var et=$.replace(ra,sa);z[et]=new v(et,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function($){var et=$.replace(ra,sa);z[et]=new v(et,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function($){z[$]=new v($,1,!1,$.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function($){z[$]=new v($,1,!1,$.toLowerCase(),null,!0,!0)});function ta($,et,ot,ct){var st=z.hasOwnProperty(et)?z[et]:null;(st!==null?st.type!==0:ct||!(2<et.length)||et[0]!=="o"&&et[0]!=="O"||et[1]!=="n"&&et[1]!=="N")&&(qa(et,ot,st,ct)&&(ot=null),ct||st===null?oa(et)&&(ot===null?$.removeAttribute(et):$.setAttribute(et,""+ot)):st.mustUseProperty?$[st.propertyName]=ot===null?st.type===3?!1:"":ot:(et=st.attributeName,ct=st.attributeNamespace,ot===null?$.removeAttribute(et):(st=st.type,ot=st===3||st===4&&ot===!0?"":""+ot,ct?$.setAttributeNS(ct,et,ot):$.setAttribute(et,ot))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka($){return $===null||typeof $!="object"?null:($=Ja&&$[Ja]||$["@@iterator"],typeof $=="function"?$:null)}var A=Object.assign,La;function Ma($){if(La===void 0)try{throw Error()}catch(ot){var et=ot.stack.trim().match(/\n( *(at )?)/);La=et&&et[1]||""}return`
`+La+$}var Na=!1;function Oa($,et){if(!$||Na)return"";Na=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(et)if(et=function(){throw Error()},Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(vt){var ct=vt}Reflect.construct($,[],et)}else{try{et.call()}catch(vt){ct=vt}$.call(et.prototype)}else{try{throw Error()}catch(vt){ct=vt}$()}}catch(vt){if(vt&&ct&&typeof vt.stack=="string"){for(var st=vt.stack.split(`
`),e=ct.stack.split(`
`),It=st.length-1,St=e.length-1;1<=It&&0<=St&&st[It]!==e[St];)St--;for(;1<=It&&0<=St;It--,St--)if(st[It]!==e[St]){if(It!==1||St!==1)do if(It--,St--,0>St||st[It]!==e[St]){var Gt=`
`+st[It].replace(" at new "," at ");return $.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",$.displayName)),Gt}while(1<=It&&0<=St);break}}}finally{Na=!1,Error.prepareStackTrace=ot}return($=$?$.displayName||$.name:"")?Ma($):""}function Pa($){switch($.tag){case 5:return Ma($.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return $=Oa($.type,!1),$;case 11:return $=Oa($.type.render,!1),$;case 1:return $=Oa($.type,!0),$;default:return""}}function Qa($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Ca:return($.displayName||"Context")+".Consumer";case Ba:return($._context.displayName||"Context")+".Provider";case Da:var et=$.render;return $=$.displayName,$||($=et.displayName||et.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case Ga:return et=$.displayName||null,et!==null?et:Qa($.type)||"Memo";case Ha:et=$._payload,$=$._init;try{return Qa($(et))}catch{}}return null}function Ra($){var et=$.type;switch($.tag){case 24:return"Cache";case 9:return(et.displayName||"Context")+".Consumer";case 10:return(et._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=et.render,$=$.displayName||$.name||"",et.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return et;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(et);case 8:return et===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et}return null}function Sa($){switch(typeof $){case"boolean":case"number":case"string":case"undefined":return $;case"object":return $;default:return""}}function Ta($){var et=$.type;return($=$.nodeName)&&$.toLowerCase()==="input"&&(et==="checkbox"||et==="radio")}function Ua($){var et=Ta($)?"checked":"value",ot=Object.getOwnPropertyDescriptor($.constructor.prototype,et),ct=""+$[et];if(!$.hasOwnProperty(et)&&typeof ot<"u"&&typeof ot.get=="function"&&typeof ot.set=="function"){var st=ot.get,e=ot.set;return Object.defineProperty($,et,{configurable:!0,get:function(){return st.call(this)},set:function(It){ct=""+It,e.call(this,It)}}),Object.defineProperty($,et,{enumerable:ot.enumerable}),{getValue:function(){return ct},setValue:function(It){ct=""+It},stopTracking:function(){$._valueTracker=null,delete $[et]}}}}function Va($){$._valueTracker||($._valueTracker=Ua($))}function Wa($){if(!$)return!1;var et=$._valueTracker;if(!et)return!0;var ot=et.getValue(),ct="";return $&&(ct=Ta($)?$.checked?"true":"false":$.value),$=ct,$!==ot?(et.setValue($),!0):!1}function Xa($){if($=$||(typeof document<"u"?document:void 0),typeof $>"u")return null;try{return $.activeElement||$.body}catch{return $.body}}function Ya($,et){var ot=et.checked;return A({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ot??$._wrapperState.initialChecked})}function Za($,et){var ot=et.defaultValue==null?"":et.defaultValue,ct=et.checked!=null?et.checked:et.defaultChecked;ot=Sa(et.value!=null?et.value:ot),$._wrapperState={initialChecked:ct,initialValue:ot,controlled:et.type==="checkbox"||et.type==="radio"?et.checked!=null:et.value!=null}}function ab($,et){et=et.checked,et!=null&&ta($,"checked",et,!1)}function bb($,et){ab($,et);var ot=Sa(et.value),ct=et.type;if(ot!=null)ct==="number"?(ot===0&&$.value===""||$.value!=ot)&&($.value=""+ot):$.value!==""+ot&&($.value=""+ot);else if(ct==="submit"||ct==="reset"){$.removeAttribute("value");return}et.hasOwnProperty("value")?cb($,et.type,ot):et.hasOwnProperty("defaultValue")&&cb($,et.type,Sa(et.defaultValue)),et.checked==null&&et.defaultChecked!=null&&($.defaultChecked=!!et.defaultChecked)}function db($,et,ot){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var ct=et.type;if(!(ct!=="submit"&&ct!=="reset"||et.value!==void 0&&et.value!==null))return;et=""+$._wrapperState.initialValue,ot||et===$.value||($.value=et),$.defaultValue=et}ot=$.name,ot!==""&&($.name=""),$.defaultChecked=!!$._wrapperState.initialChecked,ot!==""&&($.name=ot)}function cb($,et,ot){(et!=="number"||Xa($.ownerDocument)!==$)&&(ot==null?$.defaultValue=""+$._wrapperState.initialValue:$.defaultValue!==""+ot&&($.defaultValue=""+ot))}var eb=Array.isArray;function fb($,et,ot,ct){if($=$.options,et){et={};for(var st=0;st<ot.length;st++)et["$"+ot[st]]=!0;for(ot=0;ot<$.length;ot++)st=et.hasOwnProperty("$"+$[ot].value),$[ot].selected!==st&&($[ot].selected=st),st&&ct&&($[ot].defaultSelected=!0)}else{for(ot=""+Sa(ot),et=null,st=0;st<$.length;st++){if($[st].value===ot){$[st].selected=!0,ct&&($[st].defaultSelected=!0);return}et!==null||$[st].disabled||(et=$[st])}et!==null&&(et.selected=!0)}}function gb($,et){if(et.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},et,{value:void 0,defaultValue:void 0,children:""+$._wrapperState.initialValue})}function hb($,et){var ot=et.value;if(ot==null){if(ot=et.children,et=et.defaultValue,ot!=null){if(et!=null)throw Error(p(92));if(eb(ot)){if(1<ot.length)throw Error(p(93));ot=ot[0]}et=ot}et==null&&(et=""),ot=et}$._wrapperState={initialValue:Sa(ot)}}function ib($,et){var ot=Sa(et.value),ct=Sa(et.defaultValue);ot!=null&&(ot=""+ot,ot!==$.value&&($.value=ot),et.defaultValue==null&&$.defaultValue!==ot&&($.defaultValue=ot)),ct!=null&&($.defaultValue=""+ct)}function jb($){var et=$.textContent;et===$._wrapperState.initialValue&&et!==""&&et!==null&&($.value=et)}function kb($){switch($){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb($,et){return $==null||$==="http://www.w3.org/1999/xhtml"?kb(et):$==="http://www.w3.org/2000/svg"&&et==="foreignObject"?"http://www.w3.org/1999/xhtml":$}var mb,nb=function($){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(et,ot,ct,st){MSApp.execUnsafeLocalFunction(function(){return $(et,ot,ct,st)})}:$}(function($,et){if($.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in $)$.innerHTML=et;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=mb.firstChild;$.firstChild;)$.removeChild($.firstChild);for(;et.firstChild;)$.appendChild(et.firstChild)}});function ob($,et){if(et){var ot=$.firstChild;if(ot&&ot===$.lastChild&&ot.nodeType===3){ot.nodeValue=et;return}}$.textContent=et}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function($){qb.forEach(function(et){et=et+$.charAt(0).toUpperCase()+$.substring(1),pb[et]=pb[$]})});function rb($,et,ot){return et==null||typeof et=="boolean"||et===""?"":ot||typeof et!="number"||et===0||pb.hasOwnProperty($)&&pb[$]?(""+et).trim():et+"px"}function sb($,et){$=$.style;for(var ot in et)if(et.hasOwnProperty(ot)){var ct=ot.indexOf("--")===0,st=rb(ot,et[ot],ct);ot==="float"&&(ot="cssFloat"),ct?$.setProperty(ot,st):$[ot]=st}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub($,et){if(et){if(tb[$]&&(et.children!=null||et.dangerouslySetInnerHTML!=null))throw Error(p(137,$));if(et.dangerouslySetInnerHTML!=null){if(et.children!=null)throw Error(p(60));if(typeof et.dangerouslySetInnerHTML!="object"||!("__html"in et.dangerouslySetInnerHTML))throw Error(p(61))}if(et.style!=null&&typeof et.style!="object")throw Error(p(62))}}function vb($,et){if($.indexOf("-")===-1)return typeof et.is=="string";switch($){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb($){return $=$.target||$.srcElement||window,$.correspondingUseElement&&($=$.correspondingUseElement),$.nodeType===3?$.parentNode:$}var yb=null,zb=null,Ab=null;function Bb($){if($=Cb($)){if(typeof yb!="function")throw Error(p(280));var et=$.stateNode;et&&(et=Db(et),yb($.stateNode,$.type,et))}}function Eb($){zb?Ab?Ab.push($):Ab=[$]:zb=$}function Fb(){if(zb){var $=zb,et=Ab;if(Ab=zb=null,Bb($),et)for($=0;$<et.length;$++)Bb(et[$])}}function Gb($,et){return $(et)}function Hb(){}var Ib=!1;function Jb($,et,ot){if(Ib)return $(et,ot);Ib=!0;try{return Gb($,et,ot)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb($,et){var ot=$.stateNode;if(ot===null)return null;var ct=Db(ot);if(ct===null)return null;ot=ct[et];e:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ct=!ct.disabled)||($=$.type,ct=!($==="button"||$==="input"||$==="select"||$==="textarea")),$=!ct;break e;default:$=!1}if($)return null;if(ot&&typeof ot!="function")throw Error(p(231,et,typeof ot));return ot}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb($,et,ot,ct,st,e,It,St,Gt){var vt=Array.prototype.slice.call(arguments,3);try{et.apply(ot,vt)}catch(it){this.onError(it)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function($){Ob=!0,Pb=$}};function Tb($,et,ot,ct,st,e,It,St,Gt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub($,et,ot,ct,st,e,It,St,Gt){if(Tb.apply(this,arguments),Ob){if(Ob){var vt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=vt)}}function Vb($){var et=$,ot=$;if($.alternate)for(;et.return;)et=et.return;else{$=et;do et=$,et.flags&4098&&(ot=et.return),$=et.return;while($)}return et.tag===3?ot:null}function Wb($){if($.tag===13){var et=$.memoizedState;if(et===null&&($=$.alternate,$!==null&&(et=$.memoizedState)),et!==null)return et.dehydrated}return null}function Xb($){if(Vb($)!==$)throw Error(p(188))}function Yb($){var et=$.alternate;if(!et){if(et=Vb($),et===null)throw Error(p(188));return et!==$?null:$}for(var ot=$,ct=et;;){var st=ot.return;if(st===null)break;var e=st.alternate;if(e===null){if(ct=st.return,ct!==null){ot=ct;continue}break}if(st.child===e.child){for(e=st.child;e;){if(e===ot)return Xb(st),$;if(e===ct)return Xb(st),et;e=e.sibling}throw Error(p(188))}if(ot.return!==ct.return)ot=st,ct=e;else{for(var It=!1,St=st.child;St;){if(St===ot){It=!0,ot=st,ct=e;break}if(St===ct){It=!0,ct=st,ot=e;break}St=St.sibling}if(!It){for(St=e.child;St;){if(St===ot){It=!0,ot=e,ct=st;break}if(St===ct){It=!0,ct=e,ot=st;break}St=St.sibling}if(!It)throw Error(p(189))}}if(ot.alternate!==ct)throw Error(p(190))}if(ot.tag!==3)throw Error(p(188));return ot.stateNode.current===ot?$:et}function Zb($){return $=Yb($),$!==null?$b($):null}function $b($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var et=$b($);if(et!==null)return et;$=$.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc($){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,$,void 0,($.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc($){return $>>>=0,$===0?32:31-(pc($)/qc|0)|0}var rc=64,sc=4194304;function tc($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function uc($,et){var ot=$.pendingLanes;if(ot===0)return 0;var ct=0,st=$.suspendedLanes,e=$.pingedLanes,It=ot&268435455;if(It!==0){var St=It&~st;St!==0?ct=tc(St):(e&=It,e!==0&&(ct=tc(e)))}else It=ot&~st,It!==0?ct=tc(It):e!==0&&(ct=tc(e));if(ct===0)return 0;if(et!==0&&et!==ct&&!(et&st)&&(st=ct&-ct,e=et&-et,st>=e||st===16&&(e&4194240)!==0))return et;if(ct&4&&(ct|=ot&16),et=$.entangledLanes,et!==0)for($=$.entanglements,et&=ct;0<et;)ot=31-oc(et),st=1<<ot,ct|=$[ot],et&=~st;return ct}function vc($,et){switch($){case 1:case 2:case 4:return et+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc($,et){for(var ot=$.suspendedLanes,ct=$.pingedLanes,st=$.expirationTimes,e=$.pendingLanes;0<e;){var It=31-oc(e),St=1<<It,Gt=st[It];Gt===-1?(!(St&ot)||St&ct)&&(st[It]=vc(St,et)):Gt<=et&&($.expiredLanes|=St),e&=~St}}function xc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function yc(){var $=rc;return rc<<=1,!(rc&4194240)&&(rc=64),$}function zc($){for(var et=[],ot=0;31>ot;ot++)et.push($);return et}function Ac($,et,ot){$.pendingLanes|=et,et!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,et=31-oc(et),$[et]=ot}function Bc($,et){var ot=$.pendingLanes&~et;$.pendingLanes=et,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=et,$.mutableReadLanes&=et,$.entangledLanes&=et,et=$.entanglements;var ct=$.eventTimes;for($=$.expirationTimes;0<ot;){var st=31-oc(ot),e=1<<st;et[st]=0,ct[st]=-1,$[st]=-1,ot&=~e}}function Cc($,et){var ot=$.entangledLanes|=et;for($=$.entanglements;ot;){var ct=31-oc(ot),st=1<<ct;st&et|$[ct]&et&&($[ct]|=et),ot&=~st}}var C=0;function Dc($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc($,et){switch($){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(et.pointerId)}}function Tc($,et,ot,ct,st,e){return $===null||$.nativeEvent!==e?($={blockedOn:et,domEventName:ot,eventSystemFlags:ct,nativeEvent:e,targetContainers:[st]},et!==null&&(et=Cb(et),et!==null&&Fc(et)),$):($.eventSystemFlags|=ct,et=$.targetContainers,st!==null&&et.indexOf(st)===-1&&et.push(st),$)}function Uc($,et,ot,ct,st){switch(et){case"focusin":return Lc=Tc(Lc,$,et,ot,ct,st),!0;case"dragenter":return Mc=Tc(Mc,$,et,ot,ct,st),!0;case"mouseover":return Nc=Tc(Nc,$,et,ot,ct,st),!0;case"pointerover":var e=st.pointerId;return Oc.set(e,Tc(Oc.get(e)||null,$,et,ot,ct,st)),!0;case"gotpointercapture":return e=st.pointerId,Pc.set(e,Tc(Pc.get(e)||null,$,et,ot,ct,st)),!0}return!1}function Vc($){var et=Wc($.target);if(et!==null){var ot=Vb(et);if(ot!==null){if(et=ot.tag,et===13){if(et=Wb(ot),et!==null){$.blockedOn=et,Ic($.priority,function(){Gc(ot)});return}}else if(et===3&&ot.stateNode.current.memoizedState.isDehydrated){$.blockedOn=ot.tag===3?ot.stateNode.containerInfo:null;return}}}$.blockedOn=null}function Xc($){if($.blockedOn!==null)return!1;for(var et=$.targetContainers;0<et.length;){var ot=Yc($.domEventName,$.eventSystemFlags,et[0],$.nativeEvent);if(ot===null){ot=$.nativeEvent;var ct=new ot.constructor(ot.type,ot);wb=ct,ot.target.dispatchEvent(ct),wb=null}else return et=Cb(ot),et!==null&&Fc(et),$.blockedOn=ot,!1;et.shift()}return!0}function Zc($,et,ot){Xc($)&&ot.delete(et)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad($,et){$.blockedOn===et&&($.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd($){function et(st){return ad(st,$)}if(0<Kc.length){ad(Kc[0],$);for(var ot=1;ot<Kc.length;ot++){var ct=Kc[ot];ct.blockedOn===$&&(ct.blockedOn=null)}}for(Lc!==null&&ad(Lc,$),Mc!==null&&ad(Mc,$),Nc!==null&&ad(Nc,$),Oc.forEach(et),Pc.forEach(et),ot=0;ot<Qc.length;ot++)ct=Qc[ot],ct.blockedOn===$&&(ct.blockedOn=null);for(;0<Qc.length&&(ot=Qc[0],ot.blockedOn===null);)Vc(ot),ot.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed($,et,ot,ct){var st=C,e=cd.transition;cd.transition=null;try{C=1,fd($,et,ot,ct)}finally{C=st,cd.transition=e}}function gd($,et,ot,ct){var st=C,e=cd.transition;cd.transition=null;try{C=4,fd($,et,ot,ct)}finally{C=st,cd.transition=e}}function fd($,et,ot,ct){if(dd){var st=Yc($,et,ot,ct);if(st===null)hd($,et,ct,id,ot),Sc($,ct);else if(Uc(st,$,et,ot,ct))ct.stopPropagation();else if(Sc($,ct),et&4&&-1<Rc.indexOf($)){for(;st!==null;){var e=Cb(st);if(e!==null&&Ec(e),e=Yc($,et,ot,ct),e===null&&hd($,et,ct,id,ot),e===st)break;st=e}st!==null&&ct.stopPropagation()}else hd($,et,ct,null,ot)}}var id=null;function Yc($,et,ot,ct){if(id=null,$=xb(ct),$=Wc($),$!==null)if(et=Vb($),et===null)$=null;else if(ot=et.tag,ot===13){if($=Wb(et),$!==null)return $;$=null}else if(ot===3){if(et.stateNode.current.memoizedState.isDehydrated)return et.tag===3?et.stateNode.containerInfo:null;$=null}else et!==$&&($=null);return id=$,null}function jd($){switch($){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var $,et=ld,ot=et.length,ct,st="value"in kd?kd.value:kd.textContent,e=st.length;for($=0;$<ot&&et[$]===st[$];$++);var It=ot-$;for(ct=1;ct<=It&&et[ot-ct]===st[e-ct];ct++);return md=st.slice($,1<ct?1-ct:void 0)}function od($){var et=$.keyCode;return"charCode"in $?($=$.charCode,$===0&&et===13&&($=13)):$=et,$===10&&($=13),32<=$||$===13?$:0}function pd(){return!0}function qd(){return!1}function rd($){function et(ot,ct,st,e,It){this._reactName=ot,this._targetInst=st,this.type=ct,this.nativeEvent=e,this.target=It,this.currentTarget=null;for(var St in $)$.hasOwnProperty(St)&&(ot=$[St],this[St]=ot?ot(e):e[St]);return this.isDefaultPrevented=(e.defaultPrevented!=null?e.defaultPrevented:e.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(et.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ot=this.nativeEvent;ot&&(ot.preventDefault?ot.preventDefault():typeof ot.returnValue!="unknown"&&(ot.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var ot=this.nativeEvent;ot&&(ot.stopPropagation?ot.stopPropagation():typeof ot.cancelBubble!="unknown"&&(ot.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),et}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function($){return $.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function($){return $.relatedTarget===void 0?$.fromElement===$.srcElement?$.toElement:$.fromElement:$.relatedTarget},movementX:function($){return"movementX"in $?$.movementX:($!==yd&&(yd&&$.type==="mousemove"?(wd=$.screenX-yd.screenX,xd=$.screenY-yd.screenY):xd=wd=0,yd=$),wd)},movementY:function($){return"movementY"in $?$.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function($){return"clipboardData"in $?$.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd($){var et=this.nativeEvent;return et.getModifierState?et.getModifierState($):($=Od[$])?!!et[$]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function($){if($.key){var et=Md[$.key]||$.key;if(et!=="Unidentified")return et}return $.type==="keypress"?($=od($),$===13?"Enter":String.fromCharCode($)):$.type==="keydown"||$.type==="keyup"?Nd[$.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function($){return $.type==="keypress"?od($):0},keyCode:function($){return $.type==="keydown"||$.type==="keyup"?$.keyCode:0},which:function($){return $.type==="keypress"?od($):$.type==="keydown"||$.type==="keyup"?$.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function($){return"deltaX"in $?$.deltaX:"wheelDeltaX"in $?-$.wheelDeltaX:0},deltaY:function($){return"deltaY"in $?$.deltaY:"wheelDeltaY"in $?-$.wheelDeltaY:"wheelDelta"in $?-$.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge($,et){switch($){case"keyup":return $d.indexOf(et.keyCode)!==-1;case"keydown":return et.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he($){return $=$.detail,typeof $=="object"&&"data"in $?$.data:null}var ie=!1;function je($,et){switch($){case"compositionend":return he(et);case"keypress":return et.which!==32?null:(fe=!0,ee);case"textInput":return $=et.data,$===ee&&fe?null:$;default:return null}}function ke($,et){if(ie)return $==="compositionend"||!ae&&ge($,et)?($=nd(),md=ld=kd=null,ie=!1,$):null;switch($){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return de&&et.locale!=="ko"?null:et.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me($){var et=$&&$.nodeName&&$.nodeName.toLowerCase();return et==="input"?!!le[$.type]:et==="textarea"}function ne($,et,ot,ct){Eb(ct),et=oe(et,"onChange"),0<et.length&&(ot=new td("onChange","change",null,ot,ct),$.push({event:ot,listeners:et}))}var pe=null,qe=null;function re($){se($,0)}function te($){var et=ue($);if(Wa(et))return $}function ve($,et){if($==="change")return et}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be($){if($.propertyName==="value"&&te(qe)){var et=[];ne(et,qe,$,xb($)),Jb(re,et)}}function Ce($,et,ot){$==="focusin"?(Ae(),pe=et,qe=ot,pe.attachEvent("onpropertychange",Be)):$==="focusout"&&Ae()}function De($){if($==="selectionchange"||$==="keyup"||$==="keydown")return te(qe)}function Ee($,et){if($==="click")return te(et)}function Fe($,et){if($==="input"||$==="change")return te(et)}function Ge($,et){return $===et&&($!==0||1/$===1/et)||$!==$&&et!==et}var He=typeof Object.is=="function"?Object.is:Ge;function Ie($,et){if(He($,et))return!0;if(typeof $!="object"||$===null||typeof et!="object"||et===null)return!1;var ot=Object.keys($),ct=Object.keys(et);if(ot.length!==ct.length)return!1;for(ct=0;ct<ot.length;ct++){var st=ot[ct];if(!ja.call(et,st)||!He($[st],et[st]))return!1}return!0}function Je($){for(;$&&$.firstChild;)$=$.firstChild;return $}function Ke($,et){var ot=Je($);$=0;for(var ct;ot;){if(ot.nodeType===3){if(ct=$+ot.textContent.length,$<=et&&ct>=et)return{node:ot,offset:et-$};$=ct}e:{for(;ot;){if(ot.nextSibling){ot=ot.nextSibling;break e}ot=ot.parentNode}ot=void 0}ot=Je(ot)}}function Le($,et){return $&&et?$===et?!0:$&&$.nodeType===3?!1:et&&et.nodeType===3?Le($,et.parentNode):"contains"in $?$.contains(et):$.compareDocumentPosition?!!($.compareDocumentPosition(et)&16):!1:!1}function Me(){for(var $=window,et=Xa();et instanceof $.HTMLIFrameElement;){try{var ot=typeof et.contentWindow.location.href=="string"}catch{ot=!1}if(ot)$=et.contentWindow;else break;et=Xa($.document)}return et}function Ne($){var et=$&&$.nodeName&&$.nodeName.toLowerCase();return et&&(et==="input"&&($.type==="text"||$.type==="search"||$.type==="tel"||$.type==="url"||$.type==="password")||et==="textarea"||$.contentEditable==="true")}function Oe($){var et=Me(),ot=$.focusedElem,ct=$.selectionRange;if(et!==ot&&ot&&ot.ownerDocument&&Le(ot.ownerDocument.documentElement,ot)){if(ct!==null&&Ne(ot)){if(et=ct.start,$=ct.end,$===void 0&&($=et),"selectionStart"in ot)ot.selectionStart=et,ot.selectionEnd=Math.min($,ot.value.length);else if($=(et=ot.ownerDocument||document)&&et.defaultView||window,$.getSelection){$=$.getSelection();var st=ot.textContent.length,e=Math.min(ct.start,st);ct=ct.end===void 0?e:Math.min(ct.end,st),!$.extend&&e>ct&&(st=ct,ct=e,e=st),st=Ke(ot,e);var It=Ke(ot,ct);st&&It&&($.rangeCount!==1||$.anchorNode!==st.node||$.anchorOffset!==st.offset||$.focusNode!==It.node||$.focusOffset!==It.offset)&&(et=et.createRange(),et.setStart(st.node,st.offset),$.removeAllRanges(),e>ct?($.addRange(et),$.extend(It.node,It.offset)):(et.setEnd(It.node,It.offset),$.addRange(et)))}}for(et=[],$=ot;$=$.parentNode;)$.nodeType===1&&et.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof ot.focus=="function"&&ot.focus(),ot=0;ot<et.length;ot++)$=et[ot],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue($,et,ot){var ct=ot.window===ot?ot.document:ot.nodeType===9?ot:ot.ownerDocument;Te||Qe==null||Qe!==Xa(ct)||(ct=Qe,"selectionStart"in ct&&Ne(ct)?ct={start:ct.selectionStart,end:ct.selectionEnd}:(ct=(ct.ownerDocument&&ct.ownerDocument.defaultView||window).getSelection(),ct={anchorNode:ct.anchorNode,anchorOffset:ct.anchorOffset,focusNode:ct.focusNode,focusOffset:ct.focusOffset}),Se&&Ie(Se,ct)||(Se=ct,ct=oe(Re,"onSelect"),0<ct.length&&(et=new td("onSelect","select",null,et,ot),$.push({event:et,listeners:ct}),et.target=Qe)))}function Ve($,et){var ot={};return ot[$.toLowerCase()]=et.toLowerCase(),ot["Webkit"+$]="webkit"+et,ot["Moz"+$]="moz"+et,ot}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze($){if(Xe[$])return Xe[$];if(!We[$])return $;var et=We[$],ot;for(ot in et)if(et.hasOwnProperty(ot)&&ot in Ye)return Xe[$]=et[ot];return $}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff($,et){df.set($,et),fa(et,[$])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf($,et,ot){var ct=$.type||"unknown-event";$.currentTarget=ot,Ub(ct,et,void 0,$),$.currentTarget=null}function se($,et){et=(et&4)!==0;for(var ot=0;ot<$.length;ot++){var ct=$[ot],st=ct.event;ct=ct.listeners;e:{var e=void 0;if(et)for(var It=ct.length-1;0<=It;It--){var St=ct[It],Gt=St.instance,vt=St.currentTarget;if(St=St.listener,Gt!==e&&st.isPropagationStopped())break e;nf(st,St,vt),e=Gt}else for(It=0;It<ct.length;It++){if(St=ct[It],Gt=St.instance,vt=St.currentTarget,St=St.listener,Gt!==e&&st.isPropagationStopped())break e;nf(st,St,vt),e=Gt}}}if(Qb)throw $=Rb,Qb=!1,Rb=null,$}function D($,et){var ot=et[of];ot===void 0&&(ot=et[of]=new Set);var ct=$+"__bubble";ot.has(ct)||(pf(et,$,2,!1),ot.add(ct))}function qf($,et,ot){var ct=0;et&&(ct|=4),pf(ot,$,ct,et)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf($){if(!$[rf]){$[rf]=!0,da.forEach(function(ot){ot!=="selectionchange"&&(mf.has(ot)||qf(ot,!1,$),qf(ot,!0,$))});var et=$.nodeType===9?$:$.ownerDocument;et===null||et[rf]||(et[rf]=!0,qf("selectionchange",!1,et))}}function pf($,et,ot,ct){switch(jd(et)){case 1:var st=ed;break;case 4:st=gd;break;default:st=fd}ot=st.bind(null,et,ot,$),st=void 0,!Lb||et!=="touchstart"&&et!=="touchmove"&&et!=="wheel"||(st=!0),ct?st!==void 0?$.addEventListener(et,ot,{capture:!0,passive:st}):$.addEventListener(et,ot,!0):st!==void 0?$.addEventListener(et,ot,{passive:st}):$.addEventListener(et,ot,!1)}function hd($,et,ot,ct,st){var e=ct;if(!(et&1)&&!(et&2)&&ct!==null)e:for(;;){if(ct===null)return;var It=ct.tag;if(It===3||It===4){var St=ct.stateNode.containerInfo;if(St===st||St.nodeType===8&&St.parentNode===st)break;if(It===4)for(It=ct.return;It!==null;){var Gt=It.tag;if((Gt===3||Gt===4)&&(Gt=It.stateNode.containerInfo,Gt===st||Gt.nodeType===8&&Gt.parentNode===st))return;It=It.return}for(;St!==null;){if(It=Wc(St),It===null)return;if(Gt=It.tag,Gt===5||Gt===6){ct=e=It;continue e}St=St.parentNode}}ct=ct.return}Jb(function(){var vt=e,it=xb(ot),dt=[];e:{var bt=df.get($);if(bt!==void 0){var Tt=td,Et=$;switch($){case"keypress":if(od(ot)===0)break e;case"keydown":case"keyup":Tt=Rd;break;case"focusin":Et="focus",Tt=Fd;break;case"focusout":Et="blur",Tt=Fd;break;case"beforeblur":case"afterblur":Tt=Fd;break;case"click":if(ot.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Vd;break;case $e:case af:case bf:Tt=Hd;break;case cf:Tt=Xd;break;case"scroll":Tt=vd;break;case"wheel":Tt=Zd;break;case"copy":case"cut":case"paste":Tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Td}var Mt=(et&4)!==0,Rt=!Mt&&$==="scroll",pt=Mt?bt!==null?bt+"Capture":null:bt;Mt=[];for(var mt=vt,gt;mt!==null;){gt=mt;var Ct=gt.stateNode;if(gt.tag===5&&Ct!==null&&(gt=Ct,pt!==null&&(Ct=Kb(mt,pt),Ct!=null&&Mt.push(tf(mt,Ct,gt)))),Rt)break;mt=mt.return}0<Mt.length&&(bt=new Tt(bt,Et,null,ot,it),dt.push({event:bt,listeners:Mt}))}}if(!(et&7)){e:{if(bt=$==="mouseover"||$==="pointerover",Tt=$==="mouseout"||$==="pointerout",bt&&ot!==wb&&(Et=ot.relatedTarget||ot.fromElement)&&(Wc(Et)||Et[uf]))break e;if((Tt||bt)&&(bt=it.window===it?it:(bt=it.ownerDocument)?bt.defaultView||bt.parentWindow:window,Tt?(Et=ot.relatedTarget||ot.toElement,Tt=vt,Et=Et?Wc(Et):null,Et!==null&&(Rt=Vb(Et),Et!==Rt||Et.tag!==5&&Et.tag!==6)&&(Et=null)):(Tt=null,Et=vt),Tt!==Et)){if(Mt=Bd,Ct="onMouseLeave",pt="onMouseEnter",mt="mouse",($==="pointerout"||$==="pointerover")&&(Mt=Td,Ct="onPointerLeave",pt="onPointerEnter",mt="pointer"),Rt=Tt==null?bt:ue(Tt),gt=Et==null?bt:ue(Et),bt=new Mt(Ct,mt+"leave",Tt,ot,it),bt.target=Rt,bt.relatedTarget=gt,Ct=null,Wc(it)===vt&&(Mt=new Mt(pt,mt+"enter",Et,ot,it),Mt.target=gt,Mt.relatedTarget=Rt,Ct=Mt),Rt=Ct,Tt&&Et)t:{for(Mt=Tt,pt=Et,mt=0,gt=Mt;gt;gt=vf(gt))mt++;for(gt=0,Ct=pt;Ct;Ct=vf(Ct))gt++;for(;0<mt-gt;)Mt=vf(Mt),mt--;for(;0<gt-mt;)pt=vf(pt),gt--;for(;mt--;){if(Mt===pt||pt!==null&&Mt===pt.alternate)break t;Mt=vf(Mt),pt=vf(pt)}Mt=null}else Mt=null;Tt!==null&&wf(dt,bt,Tt,Mt,!1),Et!==null&&Rt!==null&&wf(dt,Rt,Et,Mt,!0)}}e:{if(bt=vt?ue(vt):window,Tt=bt.nodeName&&bt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&bt.type==="file")var xt=ve;else if(me(bt))if(we)xt=Fe;else{xt=De;var Dt=Ce}else(Tt=bt.nodeName)&&Tt.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(xt=Ee);if(xt&&(xt=xt($,vt))){ne(dt,xt,ot,it);break e}Dt&&Dt($,bt,vt),$==="focusout"&&(Dt=bt._wrapperState)&&Dt.controlled&&bt.type==="number"&&cb(bt,"number",bt.value)}switch(Dt=vt?ue(vt):window,$){case"focusin":(me(Dt)||Dt.contentEditable==="true")&&(Qe=Dt,Re=vt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(dt,ot,it);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(dt,ot,it)}var Ht;if(ae)e:{switch($){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else ie?ge($,ot)&&(Ut="onCompositionEnd"):$==="keydown"&&ot.keyCode===229&&(Ut="onCompositionStart");Ut&&(de&&ot.locale!=="ko"&&(ie||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ie&&(Ht=nd()):(kd=it,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Dt=oe(vt,Ut),0<Dt.length&&(Ut=new Ld(Ut,$,null,ot,it),dt.push({event:Ut,listeners:Dt}),Ht?Ut.data=Ht:(Ht=he(ot),Ht!==null&&(Ut.data=Ht)))),(Ht=ce?je($,ot):ke($,ot))&&(vt=oe(vt,"onBeforeInput"),0<vt.length&&(it=new Ld("onBeforeInput","beforeinput",null,ot,it),dt.push({event:it,listeners:vt}),it.data=Ht))}se(dt,et)})}function tf($,et,ot){return{instance:$,listener:et,currentTarget:ot}}function oe($,et){for(var ot=et+"Capture",ct=[];$!==null;){var st=$,e=st.stateNode;st.tag===5&&e!==null&&(st=e,e=Kb($,ot),e!=null&&ct.unshift(tf($,e,st)),e=Kb($,et),e!=null&&ct.push(tf($,e,st))),$=$.return}return ct}function vf($){if($===null)return null;do $=$.return;while($&&$.tag!==5);return $||null}function wf($,et,ot,ct,st){for(var e=et._reactName,It=[];ot!==null&&ot!==ct;){var St=ot,Gt=St.alternate,vt=St.stateNode;if(Gt!==null&&Gt===ct)break;St.tag===5&&vt!==null&&(St=vt,st?(Gt=Kb(ot,e),Gt!=null&&It.unshift(tf(ot,Gt,St))):st||(Gt=Kb(ot,e),Gt!=null&&It.push(tf(ot,Gt,St)))),ot=ot.return}It.length!==0&&$.push({event:et,listeners:It})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf($){return(typeof $=="string"?$:""+$).replace(xf,`
`).replace(yf,"")}function Af($,et,ot){if(et=zf(et),zf($)!==et&&ot)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef($,et){return $==="textarea"||$==="noscript"||typeof et.children=="string"||typeof et.children=="number"||typeof et.dangerouslySetInnerHTML=="object"&&et.dangerouslySetInnerHTML!==null&&et.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function($){return Hf.resolve(null).then($).catch(If)}:Ff;function If($){setTimeout(function(){throw $})}function Kf($,et){var ot=et,ct=0;do{var st=ot.nextSibling;if($.removeChild(ot),st&&st.nodeType===8)if(ot=st.data,ot==="/$"){if(ct===0){$.removeChild(st),bd(et);return}ct--}else ot!=="$"&&ot!=="$?"&&ot!=="$!"||ct++;ot=st}while(ot);bd(et)}function Lf($){for(;$!=null;$=$.nextSibling){var et=$.nodeType;if(et===1||et===3)break;if(et===8){if(et=$.data,et==="$"||et==="$!"||et==="$?")break;if(et==="/$")return null}}return $}function Mf($){$=$.previousSibling;for(var et=0;$;){if($.nodeType===8){var ot=$.data;if(ot==="$"||ot==="$!"||ot==="$?"){if(et===0)return $;et--}else ot==="/$"&&et++}$=$.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc($){var et=$[Of];if(et)return et;for(var ot=$.parentNode;ot;){if(et=ot[uf]||ot[Of]){if(ot=et.alternate,et.child!==null||ot!==null&&ot.child!==null)for($=Mf($);$!==null;){if(ot=$[Of])return ot;$=Mf($)}return et}$=ot,ot=$.parentNode}return null}function Cb($){return $=$[Of]||$[uf],!$||$.tag!==5&&$.tag!==6&&$.tag!==13&&$.tag!==3?null:$}function ue($){if($.tag===5||$.tag===6)return $.stateNode;throw Error(p(33))}function Db($){return $[Pf]||null}var Sf=[],Tf=-1;function Uf($){return{current:$}}function E($){0>Tf||($.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G($,et){Tf++,Sf[Tf]=$.current,$.current=et}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf($,et){var ot=$.type.contextTypes;if(!ot)return Vf;var ct=$.stateNode;if(ct&&ct.__reactInternalMemoizedUnmaskedChildContext===et)return ct.__reactInternalMemoizedMaskedChildContext;var st={},e;for(e in ot)st[e]=et[e];return ct&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=et,$.__reactInternalMemoizedMaskedChildContext=st),st}function Zf($){return $=$.childContextTypes,$!=null}function $f(){E(Wf),E(H)}function ag($,et,ot){if(H.current!==Vf)throw Error(p(168));G(H,et),G(Wf,ot)}function bg($,et,ot){var ct=$.stateNode;if(et=et.childContextTypes,typeof ct.getChildContext!="function")return ot;ct=ct.getChildContext();for(var st in ct)if(!(st in et))throw Error(p(108,Ra($)||"Unknown",st));return A({},ot,ct)}function cg($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,$),G(Wf,Wf.current),!0}function dg($,et,ot){var ct=$.stateNode;if(!ct)throw Error(p(169));ot?($=bg($,et,Xf),ct.__reactInternalMemoizedMergedChildContext=$,E(Wf),E(H),G(H,$)):E(Wf),G(Wf,ot)}var eg=null,fg=!1,gg=!1;function hg($){eg===null?eg=[$]:eg.push($)}function ig($){fg=!0,hg($)}function jg(){if(!gg&&eg!==null){gg=!0;var $=0,et=C;try{var ot=eg;for(C=1;$<ot.length;$++){var ct=ot[$];do ct=ct(!0);while(ct!==null)}eg=null,fg=!1}catch(st){throw eg!==null&&(eg=eg.slice($+1)),ac(fc,jg),st}finally{C=et,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg($,et){kg[lg++]=ng,kg[lg++]=mg,mg=$,ng=et}function ug($,et,ot){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=$;var ct=rg;$=sg;var st=32-oc(ct)-1;ct&=~(1<<st),ot+=1;var e=32-oc(et)+st;if(30<e){var It=st-st%5;e=(ct&(1<<It)-1).toString(32),ct>>=It,st-=It,rg=1<<32-oc(et)+st|ot<<st|ct,sg=e+$}else rg=1<<e|ot<<st|ct,sg=$}function vg($){$.return!==null&&(tg($,1),ug($,1,0))}function wg($){for(;$===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;$===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag($,et){var ot=Bg(5,null,null,0);ot.elementType="DELETED",ot.stateNode=et,ot.return=$,et=$.deletions,et===null?($.deletions=[ot],$.flags|=16):et.push(ot)}function Cg($,et){switch($.tag){case 5:var ot=$.type;return et=et.nodeType!==1||ot.toLowerCase()!==et.nodeName.toLowerCase()?null:et,et!==null?($.stateNode=et,xg=$,yg=Lf(et.firstChild),!0):!1;case 6:return et=$.pendingProps===""||et.nodeType!==3?null:et,et!==null?($.stateNode=et,xg=$,yg=null,!0):!1;case 13:return et=et.nodeType!==8?null:et,et!==null?(ot=qg!==null?{id:rg,overflow:sg}:null,$.memoizedState={dehydrated:et,treeContext:ot,retryLane:1073741824},ot=Bg(18,null,null,0),ot.stateNode=et,ot.return=$,$.child=ot,xg=$,yg=null,!0):!1;default:return!1}}function Dg($){return($.mode&1)!==0&&($.flags&128)===0}function Eg($){if(I){var et=yg;if(et){var ot=et;if(!Cg($,et)){if(Dg($))throw Error(p(418));et=Lf(ot.nextSibling);var ct=xg;et&&Cg($,et)?Ag(ct,ot):($.flags=$.flags&-4097|2,I=!1,xg=$)}}else{if(Dg($))throw Error(p(418));$.flags=$.flags&-4097|2,I=!1,xg=$}}}function Fg($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;xg=$}function Gg($){if($!==xg)return!1;if(!I)return Fg($),I=!0,!1;var et;if((et=$.tag!==3)&&!(et=$.tag!==5)&&(et=$.type,et=et!=="head"&&et!=="body"&&!Ef($.type,$.memoizedProps)),et&&(et=yg)){if(Dg($))throw Hg(),Error(p(418));for(;et;)Ag($,et),et=Lf(et.nextSibling)}if(Fg($),$.tag===13){if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p(317));e:{for($=$.nextSibling,et=0;$;){if($.nodeType===8){var ot=$.data;if(ot==="/$"){if(et===0){yg=Lf($.nextSibling);break e}et--}else ot!=="$"&&ot!=="$!"&&ot!=="$?"||et++}$=$.nextSibling}yg=null}}else yg=xg?Lf($.stateNode.nextSibling):null;return!0}function Hg(){for(var $=yg;$;)$=Lf($.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg($){zg===null?zg=[$]:zg.push($)}var Kg=ua.ReactCurrentBatchConfig;function Lg($,et,ot){if($=ot.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(ot._owner){if(ot=ot._owner,ot){if(ot.tag!==1)throw Error(p(309));var ct=ot.stateNode}if(!ct)throw Error(p(147,$));var st=ct,e=""+$;return et!==null&&et.ref!==null&&typeof et.ref=="function"&&et.ref._stringRef===e?et.ref:(et=function(It){var St=st.refs;It===null?delete St[e]:St[e]=It},et._stringRef=e,et)}if(typeof $!="string")throw Error(p(284));if(!ot._owner)throw Error(p(290,$))}return $}function Mg($,et){throw $=Object.prototype.toString.call(et),Error(p(31,$==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":$))}function Ng($){var et=$._init;return et($._payload)}function Og($){function et(pt,mt){if($){var gt=pt.deletions;gt===null?(pt.deletions=[mt],pt.flags|=16):gt.push(mt)}}function ot(pt,mt){if(!$)return null;for(;mt!==null;)et(pt,mt),mt=mt.sibling;return null}function ct(pt,mt){for(pt=new Map;mt!==null;)mt.key!==null?pt.set(mt.key,mt):pt.set(mt.index,mt),mt=mt.sibling;return pt}function st(pt,mt){return pt=Pg(pt,mt),pt.index=0,pt.sibling=null,pt}function e(pt,mt,gt){return pt.index=gt,$?(gt=pt.alternate,gt!==null?(gt=gt.index,gt<mt?(pt.flags|=2,mt):gt):(pt.flags|=2,mt)):(pt.flags|=1048576,mt)}function It(pt){return $&&pt.alternate===null&&(pt.flags|=2),pt}function St(pt,mt,gt,Ct){return mt===null||mt.tag!==6?(mt=Qg(gt,pt.mode,Ct),mt.return=pt,mt):(mt=st(mt,gt),mt.return=pt,mt)}function Gt(pt,mt,gt,Ct){var xt=gt.type;return xt===ya?it(pt,mt,gt.props.children,Ct,gt.key):mt!==null&&(mt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===mt.type)?(Ct=st(mt,gt.props),Ct.ref=Lg(pt,mt,gt),Ct.return=pt,Ct):(Ct=Rg(gt.type,gt.key,gt.props,null,pt.mode,Ct),Ct.ref=Lg(pt,mt,gt),Ct.return=pt,Ct)}function vt(pt,mt,gt,Ct){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==gt.containerInfo||mt.stateNode.implementation!==gt.implementation?(mt=Sg(gt,pt.mode,Ct),mt.return=pt,mt):(mt=st(mt,gt.children||[]),mt.return=pt,mt)}function it(pt,mt,gt,Ct,xt){return mt===null||mt.tag!==7?(mt=Tg(gt,pt.mode,Ct,xt),mt.return=pt,mt):(mt=st(mt,gt),mt.return=pt,mt)}function dt(pt,mt,gt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=Qg(""+mt,pt.mode,gt),mt.return=pt,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return gt=Rg(mt.type,mt.key,mt.props,null,pt.mode,gt),gt.ref=Lg(pt,null,mt),gt.return=pt,gt;case wa:return mt=Sg(mt,pt.mode,gt),mt.return=pt,mt;case Ha:var Ct=mt._init;return dt(pt,Ct(mt._payload),gt)}if(eb(mt)||Ka(mt))return mt=Tg(mt,pt.mode,gt,null),mt.return=pt,mt;Mg(pt,mt)}return null}function bt(pt,mt,gt,Ct){var xt=mt!==null?mt.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number")return xt!==null?null:St(pt,mt,""+gt,Ct);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:return gt.key===xt?Gt(pt,mt,gt,Ct):null;case wa:return gt.key===xt?vt(pt,mt,gt,Ct):null;case Ha:return xt=gt._init,bt(pt,mt,xt(gt._payload),Ct)}if(eb(gt)||Ka(gt))return xt!==null?null:it(pt,mt,gt,Ct,null);Mg(pt,gt)}return null}function Tt(pt,mt,gt,Ct,xt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return pt=pt.get(gt)||null,St(mt,pt,""+Ct,xt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va:return pt=pt.get(Ct.key===null?gt:Ct.key)||null,Gt(mt,pt,Ct,xt);case wa:return pt=pt.get(Ct.key===null?gt:Ct.key)||null,vt(mt,pt,Ct,xt);case Ha:var Dt=Ct._init;return Tt(pt,mt,gt,Dt(Ct._payload),xt)}if(eb(Ct)||Ka(Ct))return pt=pt.get(gt)||null,it(mt,pt,Ct,xt,null);Mg(mt,Ct)}return null}function Et(pt,mt,gt,Ct){for(var xt=null,Dt=null,Ht=mt,Ut=mt=0,Xt=null;Ht!==null&&Ut<gt.length;Ut++){Ht.index>Ut?(Xt=Ht,Ht=null):Xt=Ht.sibling;var Qt=bt(pt,Ht,gt[Ut],Ct);if(Qt===null){Ht===null&&(Ht=Xt);break}$&&Ht&&Qt.alternate===null&&et(pt,Ht),mt=e(Qt,mt,Ut),Dt===null?xt=Qt:Dt.sibling=Qt,Dt=Qt,Ht=Xt}if(Ut===gt.length)return ot(pt,Ht),I&&tg(pt,Ut),xt;if(Ht===null){for(;Ut<gt.length;Ut++)Ht=dt(pt,gt[Ut],Ct),Ht!==null&&(mt=e(Ht,mt,Ut),Dt===null?xt=Ht:Dt.sibling=Ht,Dt=Ht);return I&&tg(pt,Ut),xt}for(Ht=ct(pt,Ht);Ut<gt.length;Ut++)Xt=Tt(Ht,pt,Ut,gt[Ut],Ct),Xt!==null&&($&&Xt.alternate!==null&&Ht.delete(Xt.key===null?Ut:Xt.key),mt=e(Xt,mt,Ut),Dt===null?xt=Xt:Dt.sibling=Xt,Dt=Xt);return $&&Ht.forEach(function(tn){return et(pt,tn)}),I&&tg(pt,Ut),xt}function Mt(pt,mt,gt,Ct){var xt=Ka(gt);if(typeof xt!="function")throw Error(p(150));if(gt=xt.call(gt),gt==null)throw Error(p(151));for(var Dt=xt=null,Ht=mt,Ut=mt=0,Xt=null,Qt=gt.next();Ht!==null&&!Qt.done;Ut++,Qt=gt.next()){Ht.index>Ut?(Xt=Ht,Ht=null):Xt=Ht.sibling;var tn=bt(pt,Ht,Qt.value,Ct);if(tn===null){Ht===null&&(Ht=Xt);break}$&&Ht&&tn.alternate===null&&et(pt,Ht),mt=e(tn,mt,Ut),Dt===null?xt=tn:Dt.sibling=tn,Dt=tn,Ht=Xt}if(Qt.done)return ot(pt,Ht),I&&tg(pt,Ut),xt;if(Ht===null){for(;!Qt.done;Ut++,Qt=gt.next())Qt=dt(pt,Qt.value,Ct),Qt!==null&&(mt=e(Qt,mt,Ut),Dt===null?xt=Qt:Dt.sibling=Qt,Dt=Qt);return I&&tg(pt,Ut),xt}for(Ht=ct(pt,Ht);!Qt.done;Ut++,Qt=gt.next())Qt=Tt(Ht,pt,Ut,Qt.value,Ct),Qt!==null&&($&&Qt.alternate!==null&&Ht.delete(Qt.key===null?Ut:Qt.key),mt=e(Qt,mt,Ut),Dt===null?xt=Qt:Dt.sibling=Qt,Dt=Qt);return $&&Ht.forEach(function(on){return et(pt,on)}),I&&tg(pt,Ut),xt}function Rt(pt,mt,gt,Ct){if(typeof gt=="object"&&gt!==null&&gt.type===ya&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case va:e:{for(var xt=gt.key,Dt=mt;Dt!==null;){if(Dt.key===xt){if(xt=gt.type,xt===ya){if(Dt.tag===7){ot(pt,Dt.sibling),mt=st(Dt,gt.props.children),mt.return=pt,pt=mt;break e}}else if(Dt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===Dt.type){ot(pt,Dt.sibling),mt=st(Dt,gt.props),mt.ref=Lg(pt,Dt,gt),mt.return=pt,pt=mt;break e}ot(pt,Dt);break}else et(pt,Dt);Dt=Dt.sibling}gt.type===ya?(mt=Tg(gt.props.children,pt.mode,Ct,gt.key),mt.return=pt,pt=mt):(Ct=Rg(gt.type,gt.key,gt.props,null,pt.mode,Ct),Ct.ref=Lg(pt,mt,gt),Ct.return=pt,pt=Ct)}return It(pt);case wa:e:{for(Dt=gt.key;mt!==null;){if(mt.key===Dt)if(mt.tag===4&&mt.stateNode.containerInfo===gt.containerInfo&&mt.stateNode.implementation===gt.implementation){ot(pt,mt.sibling),mt=st(mt,gt.children||[]),mt.return=pt,pt=mt;break e}else{ot(pt,mt);break}else et(pt,mt);mt=mt.sibling}mt=Sg(gt,pt.mode,Ct),mt.return=pt,pt=mt}return It(pt);case Ha:return Dt=gt._init,Rt(pt,mt,Dt(gt._payload),Ct)}if(eb(gt))return Et(pt,mt,gt,Ct);if(Ka(gt))return Mt(pt,mt,gt,Ct);Mg(pt,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"?(gt=""+gt,mt!==null&&mt.tag===6?(ot(pt,mt.sibling),mt=st(mt,gt),mt.return=pt,pt=mt):(ot(pt,mt),mt=Qg(gt,pt.mode,Ct),mt.return=pt,pt=mt),It(pt)):ot(pt,mt)}return Rt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah($){var et=Wg.current;E(Wg),$._currentValue=et}function bh($,et,ot){for(;$!==null;){var ct=$.alternate;if(($.childLanes&et)!==et?($.childLanes|=et,ct!==null&&(ct.childLanes|=et)):ct!==null&&(ct.childLanes&et)!==et&&(ct.childLanes|=et),$===ot)break;$=$.return}}function ch($,et){Xg=$,Zg=Yg=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&et&&(dh=!0),$.firstContext=null)}function eh($){var et=$._currentValue;if(Zg!==$)if($={context:$,memoizedValue:et,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=$,Xg.dependencies={lanes:0,firstContext:$}}else Yg=Yg.next=$;return et}var fh=null;function gh($){fh===null?fh=[$]:fh.push($)}function hh($,et,ot,ct){var st=et.interleaved;return st===null?(ot.next=ot,gh(et)):(ot.next=st.next,st.next=ot),et.interleaved=ot,ih($,ct)}function ih($,et){$.lanes|=et;var ot=$.alternate;for(ot!==null&&(ot.lanes|=et),ot=$,$=$.return;$!==null;)$.childLanes|=et,ot=$.alternate,ot!==null&&(ot.childLanes|=et),ot=$,$=$.return;return ot.tag===3?ot.stateNode:null}var jh=!1;function kh($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh($,et){$=$.updateQueue,et.updateQueue===$&&(et.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function mh($,et){return{eventTime:$,lane:et,tag:0,payload:null,callback:null,next:null}}function nh($,et,ot){var ct=$.updateQueue;if(ct===null)return null;if(ct=ct.shared,K&2){var st=ct.pending;return st===null?et.next=et:(et.next=st.next,st.next=et),ct.pending=et,ih($,ot)}return st=ct.interleaved,st===null?(et.next=et,gh(ct)):(et.next=st.next,st.next=et),ct.interleaved=et,ih($,ot)}function oh($,et,ot){if(et=et.updateQueue,et!==null&&(et=et.shared,(ot&4194240)!==0)){var ct=et.lanes;ct&=$.pendingLanes,ot|=ct,et.lanes=ot,Cc($,ot)}}function ph($,et){var ot=$.updateQueue,ct=$.alternate;if(ct!==null&&(ct=ct.updateQueue,ot===ct)){var st=null,e=null;if(ot=ot.firstBaseUpdate,ot!==null){do{var It={eventTime:ot.eventTime,lane:ot.lane,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null};e===null?st=e=It:e=e.next=It,ot=ot.next}while(ot!==null);e===null?st=e=et:e=e.next=et}else st=e=et;ot={baseState:ct.baseState,firstBaseUpdate:st,lastBaseUpdate:e,shared:ct.shared,effects:ct.effects},$.updateQueue=ot;return}$=ot.lastBaseUpdate,$===null?ot.firstBaseUpdate=et:$.next=et,ot.lastBaseUpdate=et}function qh($,et,ot,ct){var st=$.updateQueue;jh=!1;var e=st.firstBaseUpdate,It=st.lastBaseUpdate,St=st.shared.pending;if(St!==null){st.shared.pending=null;var Gt=St,vt=Gt.next;Gt.next=null,It===null?e=vt:It.next=vt,It=Gt;var it=$.alternate;it!==null&&(it=it.updateQueue,St=it.lastBaseUpdate,St!==It&&(St===null?it.firstBaseUpdate=vt:St.next=vt,it.lastBaseUpdate=Gt))}if(e!==null){var dt=st.baseState;It=0,it=vt=Gt=null,St=e;do{var bt=St.lane,Tt=St.eventTime;if((ct&bt)===bt){it!==null&&(it=it.next={eventTime:Tt,lane:0,tag:St.tag,payload:St.payload,callback:St.callback,next:null});e:{var Et=$,Mt=St;switch(bt=et,Tt=ot,Mt.tag){case 1:if(Et=Mt.payload,typeof Et=="function"){dt=Et.call(Tt,dt,bt);break e}dt=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Mt.payload,bt=typeof Et=="function"?Et.call(Tt,dt,bt):Et,bt==null)break e;dt=A({},dt,bt);break e;case 2:jh=!0}}St.callback!==null&&St.lane!==0&&($.flags|=64,bt=st.effects,bt===null?st.effects=[St]:bt.push(St))}else Tt={eventTime:Tt,lane:bt,tag:St.tag,payload:St.payload,callback:St.callback,next:null},it===null?(vt=it=Tt,Gt=dt):it=it.next=Tt,It|=bt;if(St=St.next,St===null){if(St=st.shared.pending,St===null)break;bt=St,St=bt.next,bt.next=null,st.lastBaseUpdate=bt,st.shared.pending=null}}while(!0);if(it===null&&(Gt=dt),st.baseState=Gt,st.firstBaseUpdate=vt,st.lastBaseUpdate=it,et=st.shared.interleaved,et!==null){st=et;do It|=st.lane,st=st.next;while(st!==et)}else e===null&&(st.shared.lanes=0);rh|=It,$.lanes=It,$.memoizedState=dt}}function sh($,et,ot){if($=et.effects,et.effects=null,$!==null)for(et=0;et<$.length;et++){var ct=$[et],st=ct.callback;if(st!==null){if(ct.callback=null,ct=ot,typeof st!="function")throw Error(p(191,st));st.call(ct)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh($){if($===th)throw Error(p(174));return $}function yh($,et){switch(G(wh,et),G(vh,$),G(uh,th),$=et.nodeType,$){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:lb(null,"");break;default:$=$===8?et.parentNode:et,et=$.namespaceURI||null,$=$.tagName,et=lb(et,$)}E(uh),G(uh,et)}function zh(){E(uh),E(vh),E(wh)}function Ah($){xh(wh.current);var et=xh(uh.current),ot=lb(et,$.type);et!==ot&&(G(vh,$),G(uh,ot))}function Bh($){vh.current===$&&(E(uh),E(vh))}var L=Uf(0);function Ch($){for(var et=$;et!==null;){if(et.tag===13){var ot=et.memoizedState;if(ot!==null&&(ot=ot.dehydrated,ot===null||ot.data==="$?"||ot.data==="$!"))return et}else if(et.tag===19&&et.memoizedProps.revealOrder!==void 0){if(et.flags&128)return et}else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===$)break;for(;et.sibling===null;){if(et.return===null||et.return===$)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}var Dh=[];function Eh(){for(var $=0;$<Dh.length;$++)Dh[$]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh($,et){if(et===null)return!1;for(var ot=0;ot<et.length&&ot<$.length;ot++)if(!He($[ot],et[ot]))return!1;return!0}function Nh($,et,ot,ct,st,e){if(Hh=e,M=et,et.memoizedState=null,et.updateQueue=null,et.lanes=0,Fh.current=$===null||$.memoizedState===null?Oh:Ph,$=ot(ct,st),Jh){e=0;do{if(Jh=!1,Kh=0,25<=e)throw Error(p(301));e+=1,O=N=null,et.updateQueue=null,Fh.current=Qh,$=ot(ct,st)}while(Jh)}if(Fh.current=Rh,et=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,et)throw Error(p(300));return $}function Sh(){var $=Kh!==0;return Kh=0,$}function Th(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=$:O=O.next=$,O}function Uh(){if(N===null){var $=M.alternate;$=$!==null?$.memoizedState:null}else $=N.next;var et=O===null?M.memoizedState:O.next;if(et!==null)O=et,N=$;else{if($===null)throw Error(p(310));N=$,$={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=$:O=O.next=$}return O}function Vh($,et){return typeof et=="function"?et($):et}function Wh($){var et=Uh(),ot=et.queue;if(ot===null)throw Error(p(311));ot.lastRenderedReducer=$;var ct=N,st=ct.baseQueue,e=ot.pending;if(e!==null){if(st!==null){var It=st.next;st.next=e.next,e.next=It}ct.baseQueue=st=e,ot.pending=null}if(st!==null){e=st.next,ct=ct.baseState;var St=It=null,Gt=null,vt=e;do{var it=vt.lane;if((Hh&it)===it)Gt!==null&&(Gt=Gt.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),ct=vt.hasEagerState?vt.eagerState:$(ct,vt.action);else{var dt={lane:it,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};Gt===null?(St=Gt=dt,It=ct):Gt=Gt.next=dt,M.lanes|=it,rh|=it}vt=vt.next}while(vt!==null&&vt!==e);Gt===null?It=ct:Gt.next=St,He(ct,et.memoizedState)||(dh=!0),et.memoizedState=ct,et.baseState=It,et.baseQueue=Gt,ot.lastRenderedState=ct}if($=ot.interleaved,$!==null){st=$;do e=st.lane,M.lanes|=e,rh|=e,st=st.next;while(st!==$)}else st===null&&(ot.lanes=0);return[et.memoizedState,ot.dispatch]}function Xh($){var et=Uh(),ot=et.queue;if(ot===null)throw Error(p(311));ot.lastRenderedReducer=$;var ct=ot.dispatch,st=ot.pending,e=et.memoizedState;if(st!==null){ot.pending=null;var It=st=st.next;do e=$(e,It.action),It=It.next;while(It!==st);He(e,et.memoizedState)||(dh=!0),et.memoizedState=e,et.baseQueue===null&&(et.baseState=e),ot.lastRenderedState=e}return[e,ct]}function Yh(){}function Zh($,et){var ot=M,ct=Uh(),st=et(),e=!He(ct.memoizedState,st);if(e&&(ct.memoizedState=st,dh=!0),ct=ct.queue,$h(ai.bind(null,ot,ct,$),[$]),ct.getSnapshot!==et||e||O!==null&&O.memoizedState.tag&1){if(ot.flags|=2048,bi(9,ci.bind(null,ot,ct,st,et),void 0,null),Q===null)throw Error(p(349));Hh&30||di(ot,et,st)}return st}function di($,et,ot){$.flags|=16384,$={getSnapshot:et,value:ot},et=M.updateQueue,et===null?(et={lastEffect:null,stores:null},M.updateQueue=et,et.stores=[$]):(ot=et.stores,ot===null?et.stores=[$]:ot.push($))}function ci($,et,ot,ct){et.value=ot,et.getSnapshot=ct,ei(et)&&fi($)}function ai($,et,ot){return ot(function(){ei(et)&&fi($)})}function ei($){var et=$.getSnapshot;$=$.value;try{var ot=et();return!He($,ot)}catch{return!0}}function fi($){var et=ih($,1);et!==null&&gi(et,$,1,-1)}function hi($){var et=Th();return typeof $=="function"&&($=$()),et.memoizedState=et.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:$},et.queue=$,$=$.dispatch=ii.bind(null,M,$),[et.memoizedState,$]}function bi($,et,ot,ct){return $={tag:$,create:et,destroy:ot,deps:ct,next:null},et=M.updateQueue,et===null?(et={lastEffect:null,stores:null},M.updateQueue=et,et.lastEffect=$.next=$):(ot=et.lastEffect,ot===null?et.lastEffect=$.next=$:(ct=ot.next,ot.next=$,$.next=ct,et.lastEffect=$)),$}function ji(){return Uh().memoizedState}function ki($,et,ot,ct){var st=Th();M.flags|=$,st.memoizedState=bi(1|et,ot,void 0,ct===void 0?null:ct)}function li($,et,ot,ct){var st=Uh();ct=ct===void 0?null:ct;var e=void 0;if(N!==null){var It=N.memoizedState;if(e=It.destroy,ct!==null&&Mh(ct,It.deps)){st.memoizedState=bi(et,ot,e,ct);return}}M.flags|=$,st.memoizedState=bi(1|et,ot,e,ct)}function mi($,et){return ki(8390656,8,$,et)}function $h($,et){return li(2048,8,$,et)}function ni($,et){return li(4,2,$,et)}function oi($,et){return li(4,4,$,et)}function pi($,et){if(typeof et=="function")return $=$(),et($),function(){et(null)};if(et!=null)return $=$(),et.current=$,function(){et.current=null}}function qi($,et,ot){return ot=ot!=null?ot.concat([$]):null,li(4,4,pi.bind(null,et,$),ot)}function ri(){}function si($,et){var ot=Uh();et=et===void 0?null:et;var ct=ot.memoizedState;return ct!==null&&et!==null&&Mh(et,ct[1])?ct[0]:(ot.memoizedState=[$,et],$)}function ti($,et){var ot=Uh();et=et===void 0?null:et;var ct=ot.memoizedState;return ct!==null&&et!==null&&Mh(et,ct[1])?ct[0]:($=$(),ot.memoizedState=[$,et],$)}function ui($,et,ot){return Hh&21?(He(ot,et)||(ot=yc(),M.lanes|=ot,rh|=ot,$.baseState=!0),et):($.baseState&&($.baseState=!1,dh=!0),$.memoizedState=ot)}function vi($,et){var ot=C;C=ot!==0&&4>ot?ot:4,$(!0);var ct=Gh.transition;Gh.transition={};try{$(!1),et()}finally{C=ot,Gh.transition=ct}}function wi(){return Uh().memoizedState}function xi($,et,ot){var ct=yi($);if(ot={lane:ct,action:ot,hasEagerState:!1,eagerState:null,next:null},zi($))Ai(et,ot);else if(ot=hh($,et,ot,ct),ot!==null){var st=R();gi(ot,$,ct,st),Bi(ot,et,ct)}}function ii($,et,ot){var ct=yi($),st={lane:ct,action:ot,hasEagerState:!1,eagerState:null,next:null};if(zi($))Ai(et,st);else{var e=$.alternate;if($.lanes===0&&(e===null||e.lanes===0)&&(e=et.lastRenderedReducer,e!==null))try{var It=et.lastRenderedState,St=e(It,ot);if(st.hasEagerState=!0,st.eagerState=St,He(St,It)){var Gt=et.interleaved;Gt===null?(st.next=st,gh(et)):(st.next=Gt.next,Gt.next=st),et.interleaved=st;return}}catch{}finally{}ot=hh($,et,st,ct),ot!==null&&(st=R(),gi(ot,$,ct,st),Bi(ot,et,ct))}}function zi($){var et=$.alternate;return $===M||et!==null&&et===M}function Ai($,et){Jh=Ih=!0;var ot=$.pending;ot===null?et.next=et:(et.next=ot.next,ot.next=et),$.pending=et}function Bi($,et,ot){if(ot&4194240){var ct=et.lanes;ct&=$.pendingLanes,ot|=ct,et.lanes=ot,Cc($,ot)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function($,et){return Th().memoizedState=[$,et===void 0?null:et],$},useContext:eh,useEffect:mi,useImperativeHandle:function($,et,ot){return ot=ot!=null?ot.concat([$]):null,ki(4194308,4,pi.bind(null,et,$),ot)},useLayoutEffect:function($,et){return ki(4194308,4,$,et)},useInsertionEffect:function($,et){return ki(4,2,$,et)},useMemo:function($,et){var ot=Th();return et=et===void 0?null:et,$=$(),ot.memoizedState=[$,et],$},useReducer:function($,et,ot){var ct=Th();return et=ot!==void 0?ot(et):et,ct.memoizedState=ct.baseState=et,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:et},ct.queue=$,$=$.dispatch=xi.bind(null,M,$),[ct.memoizedState,$]},useRef:function($){var et=Th();return $={current:$},et.memoizedState=$},useState:hi,useDebugValue:ri,useDeferredValue:function($){return Th().memoizedState=$},useTransition:function(){var $=hi(!1),et=$[0];return $=vi.bind(null,$[1]),Th().memoizedState=$,[et,$]},useMutableSource:function(){},useSyncExternalStore:function($,et,ot){var ct=M,st=Th();if(I){if(ot===void 0)throw Error(p(407));ot=ot()}else{if(ot=et(),Q===null)throw Error(p(349));Hh&30||di(ct,et,ot)}st.memoizedState=ot;var e={value:ot,getSnapshot:et};return st.queue=e,mi(ai.bind(null,ct,e,$),[$]),ct.flags|=2048,bi(9,ci.bind(null,ct,e,ot,et),void 0,null),ot},useId:function(){var $=Th(),et=Q.identifierPrefix;if(I){var ot=sg,ct=rg;ot=(ct&~(1<<32-oc(ct)-1)).toString(32)+ot,et=":"+et+"R"+ot,ot=Kh++,0<ot&&(et+="H"+ot.toString(32)),et+=":"}else ot=Lh++,et=":"+et+"r"+ot.toString(32)+":";return $.memoizedState=et},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function($){var et=Uh();return ui(et,N.memoizedState,$)},useTransition:function(){var $=Wh(Vh)[0],et=Uh().memoizedState;return[$,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function($){var et=Uh();return N===null?et.memoizedState=$:ui(et,N.memoizedState,$)},useTransition:function(){var $=Xh(Vh)[0],et=Uh().memoizedState;return[$,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci($,et){if($&&$.defaultProps){et=A({},et),$=$.defaultProps;for(var ot in $)et[ot]===void 0&&(et[ot]=$[ot]);return et}return et}function Di($,et,ot,ct){et=$.memoizedState,ot=ot(ct,et),ot=ot==null?et:A({},et,ot),$.memoizedState=ot,$.lanes===0&&($.updateQueue.baseState=ot)}var Ei={isMounted:function($){return($=$._reactInternals)?Vb($)===$:!1},enqueueSetState:function($,et,ot){$=$._reactInternals;var ct=R(),st=yi($),e=mh(ct,st);e.payload=et,ot!=null&&(e.callback=ot),et=nh($,e,st),et!==null&&(gi(et,$,st,ct),oh(et,$,st))},enqueueReplaceState:function($,et,ot){$=$._reactInternals;var ct=R(),st=yi($),e=mh(ct,st);e.tag=1,e.payload=et,ot!=null&&(e.callback=ot),et=nh($,e,st),et!==null&&(gi(et,$,st,ct),oh(et,$,st))},enqueueForceUpdate:function($,et){$=$._reactInternals;var ot=R(),ct=yi($),st=mh(ot,ct);st.tag=2,et!=null&&(st.callback=et),et=nh($,st,ct),et!==null&&(gi(et,$,ct,ot),oh(et,$,ct))}};function Fi($,et,ot,ct,st,e,It){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(ct,e,It):et.prototype&&et.prototype.isPureReactComponent?!Ie(ot,ct)||!Ie(st,e):!0}function Gi($,et,ot){var ct=!1,st=Vf,e=et.contextType;return typeof e=="object"&&e!==null?e=eh(e):(st=Zf(et)?Xf:H.current,ct=et.contextTypes,e=(ct=ct!=null)?Yf($,st):Vf),et=new et(ot,e),$.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,et.updater=Ei,$.stateNode=et,et._reactInternals=$,ct&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=st,$.__reactInternalMemoizedMaskedChildContext=e),et}function Hi($,et,ot,ct){$=et.state,typeof et.componentWillReceiveProps=="function"&&et.componentWillReceiveProps(ot,ct),typeof et.UNSAFE_componentWillReceiveProps=="function"&&et.UNSAFE_componentWillReceiveProps(ot,ct),et.state!==$&&Ei.enqueueReplaceState(et,et.state,null)}function Ii($,et,ot,ct){var st=$.stateNode;st.props=ot,st.state=$.memoizedState,st.refs={},kh($);var e=et.contextType;typeof e=="object"&&e!==null?st.context=eh(e):(e=Zf(et)?Xf:H.current,st.context=Yf($,e)),st.state=$.memoizedState,e=et.getDerivedStateFromProps,typeof e=="function"&&(Di($,et,e,ot),st.state=$.memoizedState),typeof et.getDerivedStateFromProps=="function"||typeof st.getSnapshotBeforeUpdate=="function"||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(et=st.state,typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount(),et!==st.state&&Ei.enqueueReplaceState(st,st.state,null),qh($,ot,st,ct),st.state=$.memoizedState),typeof st.componentDidMount=="function"&&($.flags|=4194308)}function Ji($,et){try{var ot="",ct=et;do ot+=Pa(ct),ct=ct.return;while(ct);var st=ot}catch(e){st=`
Error generating stack: `+e.message+`
`+e.stack}return{value:$,source:et,stack:st,digest:null}}function Ki($,et,ot){return{value:$,source:null,stack:ot??null,digest:et??null}}function Li($,et){try{console.error(et.value)}catch(ot){setTimeout(function(){throw ot})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni($,et,ot){ot=mh(-1,ot),ot.tag=3,ot.payload={element:null};var ct=et.value;return ot.callback=function(){Oi||(Oi=!0,Pi=ct),Li($,et)},ot}function Qi($,et,ot){ot=mh(-1,ot),ot.tag=3;var ct=$.type.getDerivedStateFromError;if(typeof ct=="function"){var st=et.value;ot.payload=function(){return ct(st)},ot.callback=function(){Li($,et)}}var e=$.stateNode;return e!==null&&typeof e.componentDidCatch=="function"&&(ot.callback=function(){Li($,et),typeof ct!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var It=et.stack;this.componentDidCatch(et.value,{componentStack:It!==null?It:""})}),ot}function Si($,et,ot){var ct=$.pingCache;if(ct===null){ct=$.pingCache=new Mi;var st=new Set;ct.set(et,st)}else st=ct.get(et),st===void 0&&(st=new Set,ct.set(et,st));st.has(ot)||(st.add(ot),$=Ti.bind(null,$,et,ot),et.then($,$))}function Ui($){do{var et;if((et=$.tag===13)&&(et=$.memoizedState,et=et!==null?et.dehydrated!==null:!0),et)return $;$=$.return}while($!==null);return null}function Vi($,et,ot,ct,st){return $.mode&1?($.flags|=65536,$.lanes=st,$):($===et?$.flags|=65536:($.flags|=128,ot.flags|=131072,ot.flags&=-52805,ot.tag===1&&(ot.alternate===null?ot.tag=17:(et=mh(-1,1),et.tag=2,nh(ot,et,1))),ot.lanes|=1),$)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi($,et,ot,ct){et.child=$===null?Vg(et,null,ot,ct):Ug(et,$.child,ot,ct)}function Yi($,et,ot,ct,st){ot=ot.render;var e=et.ref;return ch(et,st),ct=Nh($,et,ot,ct,e,st),ot=Sh(),$!==null&&!dh?(et.updateQueue=$.updateQueue,et.flags&=-2053,$.lanes&=~st,Zi($,et,st)):(I&&ot&&vg(et),et.flags|=1,Xi($,et,ct,st),et.child)}function $i($,et,ot,ct,st){if($===null){var e=ot.type;return typeof e=="function"&&!aj(e)&&e.defaultProps===void 0&&ot.compare===null&&ot.defaultProps===void 0?(et.tag=15,et.type=e,bj($,et,e,ct,st)):($=Rg(ot.type,null,ct,et,et.mode,st),$.ref=et.ref,$.return=et,et.child=$)}if(e=$.child,!($.lanes&st)){var It=e.memoizedProps;if(ot=ot.compare,ot=ot!==null?ot:Ie,ot(It,ct)&&$.ref===et.ref)return Zi($,et,st)}return et.flags|=1,$=Pg(e,ct),$.ref=et.ref,$.return=et,et.child=$}function bj($,et,ot,ct,st){if($!==null){var e=$.memoizedProps;if(Ie(e,ct)&&$.ref===et.ref)if(dh=!1,et.pendingProps=ct=e,($.lanes&st)!==0)$.flags&131072&&(dh=!0);else return et.lanes=$.lanes,Zi($,et,st)}return cj($,et,ot,ct,st)}function dj($,et,ot){var ct=et.pendingProps,st=ct.children,e=$!==null?$.memoizedState:null;if(ct.mode==="hidden")if(!(et.mode&1))et.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=ot;else{if(!(ot&1073741824))return $=e!==null?e.baseLanes|ot:ot,et.lanes=et.childLanes=1073741824,et.memoizedState={baseLanes:$,cachePool:null,transitions:null},et.updateQueue=null,G(ej,fj),fj|=$,null;et.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct=e!==null?e.baseLanes:ot,G(ej,fj),fj|=ct}else e!==null?(ct=e.baseLanes|ot,et.memoizedState=null):ct=ot,G(ej,fj),fj|=ct;return Xi($,et,st,ot),et.child}function gj($,et){var ot=et.ref;($===null&&ot!==null||$!==null&&$.ref!==ot)&&(et.flags|=512,et.flags|=2097152)}function cj($,et,ot,ct,st){var e=Zf(ot)?Xf:H.current;return e=Yf(et,e),ch(et,st),ot=Nh($,et,ot,ct,e,st),ct=Sh(),$!==null&&!dh?(et.updateQueue=$.updateQueue,et.flags&=-2053,$.lanes&=~st,Zi($,et,st)):(I&&ct&&vg(et),et.flags|=1,Xi($,et,ot,st),et.child)}function hj($,et,ot,ct,st){if(Zf(ot)){var e=!0;cg(et)}else e=!1;if(ch(et,st),et.stateNode===null)ij($,et),Gi(et,ot,ct),Ii(et,ot,ct,st),ct=!0;else if($===null){var It=et.stateNode,St=et.memoizedProps;It.props=St;var Gt=It.context,vt=ot.contextType;typeof vt=="object"&&vt!==null?vt=eh(vt):(vt=Zf(ot)?Xf:H.current,vt=Yf(et,vt));var it=ot.getDerivedStateFromProps,dt=typeof it=="function"||typeof It.getSnapshotBeforeUpdate=="function";dt||typeof It.UNSAFE_componentWillReceiveProps!="function"&&typeof It.componentWillReceiveProps!="function"||(St!==ct||Gt!==vt)&&Hi(et,It,ct,vt),jh=!1;var bt=et.memoizedState;It.state=bt,qh(et,ct,It,st),Gt=et.memoizedState,St!==ct||bt!==Gt||Wf.current||jh?(typeof it=="function"&&(Di(et,ot,it,ct),Gt=et.memoizedState),(St=jh||Fi(et,ot,St,ct,bt,Gt,vt))?(dt||typeof It.UNSAFE_componentWillMount!="function"&&typeof It.componentWillMount!="function"||(typeof It.componentWillMount=="function"&&It.componentWillMount(),typeof It.UNSAFE_componentWillMount=="function"&&It.UNSAFE_componentWillMount()),typeof It.componentDidMount=="function"&&(et.flags|=4194308)):(typeof It.componentDidMount=="function"&&(et.flags|=4194308),et.memoizedProps=ct,et.memoizedState=Gt),It.props=ct,It.state=Gt,It.context=vt,ct=St):(typeof It.componentDidMount=="function"&&(et.flags|=4194308),ct=!1)}else{It=et.stateNode,lh($,et),St=et.memoizedProps,vt=et.type===et.elementType?St:Ci(et.type,St),It.props=vt,dt=et.pendingProps,bt=It.context,Gt=ot.contextType,typeof Gt=="object"&&Gt!==null?Gt=eh(Gt):(Gt=Zf(ot)?Xf:H.current,Gt=Yf(et,Gt));var Tt=ot.getDerivedStateFromProps;(it=typeof Tt=="function"||typeof It.getSnapshotBeforeUpdate=="function")||typeof It.UNSAFE_componentWillReceiveProps!="function"&&typeof It.componentWillReceiveProps!="function"||(St!==dt||bt!==Gt)&&Hi(et,It,ct,Gt),jh=!1,bt=et.memoizedState,It.state=bt,qh(et,ct,It,st);var Et=et.memoizedState;St!==dt||bt!==Et||Wf.current||jh?(typeof Tt=="function"&&(Di(et,ot,Tt,ct),Et=et.memoizedState),(vt=jh||Fi(et,ot,vt,ct,bt,Et,Gt)||!1)?(it||typeof It.UNSAFE_componentWillUpdate!="function"&&typeof It.componentWillUpdate!="function"||(typeof It.componentWillUpdate=="function"&&It.componentWillUpdate(ct,Et,Gt),typeof It.UNSAFE_componentWillUpdate=="function"&&It.UNSAFE_componentWillUpdate(ct,Et,Gt)),typeof It.componentDidUpdate=="function"&&(et.flags|=4),typeof It.getSnapshotBeforeUpdate=="function"&&(et.flags|=1024)):(typeof It.componentDidUpdate!="function"||St===$.memoizedProps&&bt===$.memoizedState||(et.flags|=4),typeof It.getSnapshotBeforeUpdate!="function"||St===$.memoizedProps&&bt===$.memoizedState||(et.flags|=1024),et.memoizedProps=ct,et.memoizedState=Et),It.props=ct,It.state=Et,It.context=Gt,ct=vt):(typeof It.componentDidUpdate!="function"||St===$.memoizedProps&&bt===$.memoizedState||(et.flags|=4),typeof It.getSnapshotBeforeUpdate!="function"||St===$.memoizedProps&&bt===$.memoizedState||(et.flags|=1024),ct=!1)}return jj($,et,ot,ct,e,st)}function jj($,et,ot,ct,st,e){gj($,et);var It=(et.flags&128)!==0;if(!ct&&!It)return st&&dg(et,ot,!1),Zi($,et,e);ct=et.stateNode,Wi.current=et;var St=It&&typeof ot.getDerivedStateFromError!="function"?null:ct.render();return et.flags|=1,$!==null&&It?(et.child=Ug(et,$.child,null,e),et.child=Ug(et,null,St,e)):Xi($,et,St,e),et.memoizedState=ct.state,st&&dg(et,ot,!0),et.child}function kj($){var et=$.stateNode;et.pendingContext?ag($,et.pendingContext,et.pendingContext!==et.context):et.context&&ag($,et.context,!1),yh($,et.containerInfo)}function lj($,et,ot,ct,st){return Ig(),Jg(st),et.flags|=256,Xi($,et,ot,ct),et.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj($){return{baseLanes:$,cachePool:null,transitions:null}}function oj($,et,ot){var ct=et.pendingProps,st=L.current,e=!1,It=(et.flags&128)!==0,St;if((St=It)||(St=$!==null&&$.memoizedState===null?!1:(st&2)!==0),St?(e=!0,et.flags&=-129):($===null||$.memoizedState!==null)&&(st|=1),G(L,st&1),$===null)return Eg(et),$=et.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(et.mode&1?$.data==="$!"?et.lanes=8:et.lanes=1073741824:et.lanes=1,null):(It=ct.children,$=ct.fallback,e?(ct=et.mode,e=et.child,It={mode:"hidden",children:It},!(ct&1)&&e!==null?(e.childLanes=0,e.pendingProps=It):e=pj(It,ct,0,null),$=Tg($,ct,ot,null),e.return=et,$.return=et,e.sibling=$,et.child=e,et.child.memoizedState=nj(ot),et.memoizedState=mj,$):qj(et,It));if(st=$.memoizedState,st!==null&&(St=st.dehydrated,St!==null))return rj($,et,It,ct,St,st,ot);if(e){e=ct.fallback,It=et.mode,st=$.child,St=st.sibling;var Gt={mode:"hidden",children:ct.children};return!(It&1)&&et.child!==st?(ct=et.child,ct.childLanes=0,ct.pendingProps=Gt,et.deletions=null):(ct=Pg(st,Gt),ct.subtreeFlags=st.subtreeFlags&14680064),St!==null?e=Pg(St,e):(e=Tg(e,It,ot,null),e.flags|=2),e.return=et,ct.return=et,ct.sibling=e,et.child=ct,ct=e,e=et.child,It=$.child.memoizedState,It=It===null?nj(ot):{baseLanes:It.baseLanes|ot,cachePool:null,transitions:It.transitions},e.memoizedState=It,e.childLanes=$.childLanes&~ot,et.memoizedState=mj,ct}return e=$.child,$=e.sibling,ct=Pg(e,{mode:"visible",children:ct.children}),!(et.mode&1)&&(ct.lanes=ot),ct.return=et,ct.sibling=null,$!==null&&(ot=et.deletions,ot===null?(et.deletions=[$],et.flags|=16):ot.push($)),et.child=ct,et.memoizedState=null,ct}function qj($,et){return et=pj({mode:"visible",children:et},$.mode,0,null),et.return=$,$.child=et}function sj($,et,ot,ct){return ct!==null&&Jg(ct),Ug(et,$.child,null,ot),$=qj(et,et.pendingProps.children),$.flags|=2,et.memoizedState=null,$}function rj($,et,ot,ct,st,e,It){if(ot)return et.flags&256?(et.flags&=-257,ct=Ki(Error(p(422))),sj($,et,It,ct)):et.memoizedState!==null?(et.child=$.child,et.flags|=128,null):(e=ct.fallback,st=et.mode,ct=pj({mode:"visible",children:ct.children},st,0,null),e=Tg(e,st,It,null),e.flags|=2,ct.return=et,e.return=et,ct.sibling=e,et.child=ct,et.mode&1&&Ug(et,$.child,null,It),et.child.memoizedState=nj(It),et.memoizedState=mj,e);if(!(et.mode&1))return sj($,et,It,null);if(st.data==="$!"){if(ct=st.nextSibling&&st.nextSibling.dataset,ct)var St=ct.dgst;return ct=St,e=Error(p(419)),ct=Ki(e,ct,void 0),sj($,et,It,ct)}if(St=(It&$.childLanes)!==0,dh||St){if(ct=Q,ct!==null){switch(It&-It){case 4:st=2;break;case 16:st=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:st=32;break;case 536870912:st=268435456;break;default:st=0}st=st&(ct.suspendedLanes|It)?0:st,st!==0&&st!==e.retryLane&&(e.retryLane=st,ih($,st),gi(ct,$,st,-1))}return tj(),ct=Ki(Error(p(421))),sj($,et,It,ct)}return st.data==="$?"?(et.flags|=128,et.child=$.child,et=uj.bind(null,$),st._reactRetry=et,null):($=e.treeContext,yg=Lf(st.nextSibling),xg=et,I=!0,zg=null,$!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=$.id,sg=$.overflow,qg=et),et=qj(et,ct.children),et.flags|=4096,et)}function vj($,et,ot){$.lanes|=et;var ct=$.alternate;ct!==null&&(ct.lanes|=et),bh($.return,et,ot)}function wj($,et,ot,ct,st){var e=$.memoizedState;e===null?$.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:ct,tail:ot,tailMode:st}:(e.isBackwards=et,e.rendering=null,e.renderingStartTime=0,e.last=ct,e.tail=ot,e.tailMode=st)}function xj($,et,ot){var ct=et.pendingProps,st=ct.revealOrder,e=ct.tail;if(Xi($,et,ct.children,ot),ct=L.current,ct&2)ct=ct&1|2,et.flags|=128;else{if($!==null&&$.flags&128)e:for($=et.child;$!==null;){if($.tag===13)$.memoizedState!==null&&vj($,ot,et);else if($.tag===19)vj($,ot,et);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===et)break e;for(;$.sibling===null;){if($.return===null||$.return===et)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}ct&=1}if(G(L,ct),!(et.mode&1))et.memoizedState=null;else switch(st){case"forwards":for(ot=et.child,st=null;ot!==null;)$=ot.alternate,$!==null&&Ch($)===null&&(st=ot),ot=ot.sibling;ot=st,ot===null?(st=et.child,et.child=null):(st=ot.sibling,ot.sibling=null),wj(et,!1,st,ot,e);break;case"backwards":for(ot=null,st=et.child,et.child=null;st!==null;){if($=st.alternate,$!==null&&Ch($)===null){et.child=st;break}$=st.sibling,st.sibling=ot,ot=st,st=$}wj(et,!0,ot,null,e);break;case"together":wj(et,!1,null,null,void 0);break;default:et.memoizedState=null}return et.child}function ij($,et){!(et.mode&1)&&$!==null&&($.alternate=null,et.alternate=null,et.flags|=2)}function Zi($,et,ot){if($!==null&&(et.dependencies=$.dependencies),rh|=et.lanes,!(ot&et.childLanes))return null;if($!==null&&et.child!==$.child)throw Error(p(153));if(et.child!==null){for($=et.child,ot=Pg($,$.pendingProps),et.child=ot,ot.return=et;$.sibling!==null;)$=$.sibling,ot=ot.sibling=Pg($,$.pendingProps),ot.return=et;ot.sibling=null}return et.child}function yj($,et,ot){switch(et.tag){case 3:kj(et),Ig();break;case 5:Ah(et);break;case 1:Zf(et.type)&&cg(et);break;case 4:yh(et,et.stateNode.containerInfo);break;case 10:var ct=et.type._context,st=et.memoizedProps.value;G(Wg,ct._currentValue),ct._currentValue=st;break;case 13:if(ct=et.memoizedState,ct!==null)return ct.dehydrated!==null?(G(L,L.current&1),et.flags|=128,null):ot&et.child.childLanes?oj($,et,ot):(G(L,L.current&1),$=Zi($,et,ot),$!==null?$.sibling:null);G(L,L.current&1);break;case 19:if(ct=(ot&et.childLanes)!==0,$.flags&128){if(ct)return xj($,et,ot);et.flags|=128}if(st=et.memoizedState,st!==null&&(st.rendering=null,st.tail=null,st.lastEffect=null),G(L,L.current),ct)break;return null;case 22:case 23:return et.lanes=0,dj($,et,ot)}return Zi($,et,ot)}var zj,Aj,Bj,Cj;zj=function($,et){for(var ot=et.child;ot!==null;){if(ot.tag===5||ot.tag===6)$.appendChild(ot.stateNode);else if(ot.tag!==4&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===et)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===et)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}};Aj=function(){};Bj=function($,et,ot,ct){var st=$.memoizedProps;if(st!==ct){$=et.stateNode,xh(uh.current);var e=null;switch(ot){case"input":st=Ya($,st),ct=Ya($,ct),e=[];break;case"select":st=A({},st,{value:void 0}),ct=A({},ct,{value:void 0}),e=[];break;case"textarea":st=gb($,st),ct=gb($,ct),e=[];break;default:typeof st.onClick!="function"&&typeof ct.onClick=="function"&&($.onclick=Bf)}ub(ot,ct);var It;ot=null;for(vt in st)if(!ct.hasOwnProperty(vt)&&st.hasOwnProperty(vt)&&st[vt]!=null)if(vt==="style"){var St=st[vt];for(It in St)St.hasOwnProperty(It)&&(ot||(ot={}),ot[It]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(ea.hasOwnProperty(vt)?e||(e=[]):(e=e||[]).push(vt,null));for(vt in ct){var Gt=ct[vt];if(St=st!=null?st[vt]:void 0,ct.hasOwnProperty(vt)&&Gt!==St&&(Gt!=null||St!=null))if(vt==="style")if(St){for(It in St)!St.hasOwnProperty(It)||Gt&&Gt.hasOwnProperty(It)||(ot||(ot={}),ot[It]="");for(It in Gt)Gt.hasOwnProperty(It)&&St[It]!==Gt[It]&&(ot||(ot={}),ot[It]=Gt[It])}else ot||(e||(e=[]),e.push(vt,ot)),ot=Gt;else vt==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,St=St?St.__html:void 0,Gt!=null&&St!==Gt&&(e=e||[]).push(vt,Gt)):vt==="children"?typeof Gt!="string"&&typeof Gt!="number"||(e=e||[]).push(vt,""+Gt):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(vt)?(Gt!=null&&vt==="onScroll"&&D("scroll",$),e||St===Gt||(e=[])):(e=e||[]).push(vt,Gt))}ot&&(e=e||[]).push("style",ot);var vt=e;(et.updateQueue=vt)&&(et.flags|=4)}};Cj=function($,et,ot,ct){ot!==ct&&(et.flags|=4)};function Dj($,et){if(!I)switch($.tailMode){case"hidden":et=$.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?$.tail=null:ot.sibling=null;break;case"collapsed":ot=$.tail;for(var ct=null;ot!==null;)ot.alternate!==null&&(ct=ot),ot=ot.sibling;ct===null?et||$.tail===null?$.tail=null:$.tail.sibling=null:ct.sibling=null}}function S($){var et=$.alternate!==null&&$.alternate.child===$.child,ot=0,ct=0;if(et)for(var st=$.child;st!==null;)ot|=st.lanes|st.childLanes,ct|=st.subtreeFlags&14680064,ct|=st.flags&14680064,st.return=$,st=st.sibling;else for(st=$.child;st!==null;)ot|=st.lanes|st.childLanes,ct|=st.subtreeFlags,ct|=st.flags,st.return=$,st=st.sibling;return $.subtreeFlags|=ct,$.childLanes=ot,et}function Ej($,et,ot){var ct=et.pendingProps;switch(wg(et),et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(et),null;case 1:return Zf(et.type)&&$f(),S(et),null;case 3:return ct=et.stateNode,zh(),E(Wf),E(H),Eh(),ct.pendingContext&&(ct.context=ct.pendingContext,ct.pendingContext=null),($===null||$.child===null)&&(Gg(et)?et.flags|=4:$===null||$.memoizedState.isDehydrated&&!(et.flags&256)||(et.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj($,et),S(et),null;case 5:Bh(et);var st=xh(wh.current);if(ot=et.type,$!==null&&et.stateNode!=null)Bj($,et,ot,ct,st),$.ref!==et.ref&&(et.flags|=512,et.flags|=2097152);else{if(!ct){if(et.stateNode===null)throw Error(p(166));return S(et),null}if($=xh(uh.current),Gg(et)){ct=et.stateNode,ot=et.type;var e=et.memoizedProps;switch(ct[Of]=et,ct[Pf]=e,$=(et.mode&1)!==0,ot){case"dialog":D("cancel",ct),D("close",ct);break;case"iframe":case"object":case"embed":D("load",ct);break;case"video":case"audio":for(st=0;st<lf.length;st++)D(lf[st],ct);break;case"source":D("error",ct);break;case"img":case"image":case"link":D("error",ct),D("load",ct);break;case"details":D("toggle",ct);break;case"input":Za(ct,e),D("invalid",ct);break;case"select":ct._wrapperState={wasMultiple:!!e.multiple},D("invalid",ct);break;case"textarea":hb(ct,e),D("invalid",ct)}ub(ot,e),st=null;for(var It in e)if(e.hasOwnProperty(It)){var St=e[It];It==="children"?typeof St=="string"?ct.textContent!==St&&(e.suppressHydrationWarning!==!0&&Af(ct.textContent,St,$),st=["children",St]):typeof St=="number"&&ct.textContent!==""+St&&(e.suppressHydrationWarning!==!0&&Af(ct.textContent,St,$),st=["children",""+St]):ea.hasOwnProperty(It)&&St!=null&&It==="onScroll"&&D("scroll",ct)}switch(ot){case"input":Va(ct),db(ct,e,!0);break;case"textarea":Va(ct),jb(ct);break;case"select":case"option":break;default:typeof e.onClick=="function"&&(ct.onclick=Bf)}ct=st,et.updateQueue=ct,ct!==null&&(et.flags|=4)}else{It=st.nodeType===9?st:st.ownerDocument,$==="http://www.w3.org/1999/xhtml"&&($=kb(ot)),$==="http://www.w3.org/1999/xhtml"?ot==="script"?($=It.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild)):typeof ct.is=="string"?$=It.createElement(ot,{is:ct.is}):($=It.createElement(ot),ot==="select"&&(It=$,ct.multiple?It.multiple=!0:ct.size&&(It.size=ct.size))):$=It.createElementNS($,ot),$[Of]=et,$[Pf]=ct,zj($,et,!1,!1),et.stateNode=$;e:{switch(It=vb(ot,ct),ot){case"dialog":D("cancel",$),D("close",$),st=ct;break;case"iframe":case"object":case"embed":D("load",$),st=ct;break;case"video":case"audio":for(st=0;st<lf.length;st++)D(lf[st],$);st=ct;break;case"source":D("error",$),st=ct;break;case"img":case"image":case"link":D("error",$),D("load",$),st=ct;break;case"details":D("toggle",$),st=ct;break;case"input":Za($,ct),st=Ya($,ct),D("invalid",$);break;case"option":st=ct;break;case"select":$._wrapperState={wasMultiple:!!ct.multiple},st=A({},ct,{value:void 0}),D("invalid",$);break;case"textarea":hb($,ct),st=gb($,ct),D("invalid",$);break;default:st=ct}ub(ot,st),St=st;for(e in St)if(St.hasOwnProperty(e)){var Gt=St[e];e==="style"?sb($,Gt):e==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,Gt!=null&&nb($,Gt)):e==="children"?typeof Gt=="string"?(ot!=="textarea"||Gt!=="")&&ob($,Gt):typeof Gt=="number"&&ob($,""+Gt):e!=="suppressContentEditableWarning"&&e!=="suppressHydrationWarning"&&e!=="autoFocus"&&(ea.hasOwnProperty(e)?Gt!=null&&e==="onScroll"&&D("scroll",$):Gt!=null&&ta($,e,Gt,It))}switch(ot){case"input":Va($),db($,ct,!1);break;case"textarea":Va($),jb($);break;case"option":ct.value!=null&&$.setAttribute("value",""+Sa(ct.value));break;case"select":$.multiple=!!ct.multiple,e=ct.value,e!=null?fb($,!!ct.multiple,e,!1):ct.defaultValue!=null&&fb($,!!ct.multiple,ct.defaultValue,!0);break;default:typeof st.onClick=="function"&&($.onclick=Bf)}switch(ot){case"button":case"input":case"select":case"textarea":ct=!!ct.autoFocus;break e;case"img":ct=!0;break e;default:ct=!1}}ct&&(et.flags|=4)}et.ref!==null&&(et.flags|=512,et.flags|=2097152)}return S(et),null;case 6:if($&&et.stateNode!=null)Cj($,et,$.memoizedProps,ct);else{if(typeof ct!="string"&&et.stateNode===null)throw Error(p(166));if(ot=xh(wh.current),xh(uh.current),Gg(et)){if(ct=et.stateNode,ot=et.memoizedProps,ct[Of]=et,(e=ct.nodeValue!==ot)&&($=xg,$!==null))switch($.tag){case 3:Af(ct.nodeValue,ot,($.mode&1)!==0);break;case 5:$.memoizedProps.suppressHydrationWarning!==!0&&Af(ct.nodeValue,ot,($.mode&1)!==0)}e&&(et.flags|=4)}else ct=(ot.nodeType===9?ot:ot.ownerDocument).createTextNode(ct),ct[Of]=et,et.stateNode=ct}return S(et),null;case 13:if(E(L),ct=et.memoizedState,$===null||$.memoizedState!==null&&$.memoizedState.dehydrated!==null){if(I&&yg!==null&&et.mode&1&&!(et.flags&128))Hg(),Ig(),et.flags|=98560,e=!1;else if(e=Gg(et),ct!==null&&ct.dehydrated!==null){if($===null){if(!e)throw Error(p(318));if(e=et.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e[Of]=et}else Ig(),!(et.flags&128)&&(et.memoizedState=null),et.flags|=4;S(et),e=!1}else zg!==null&&(Fj(zg),zg=null),e=!0;if(!e)return et.flags&65536?et:null}return et.flags&128?(et.lanes=ot,et):(ct=ct!==null,ct!==($!==null&&$.memoizedState!==null)&&ct&&(et.child.flags|=8192,et.mode&1&&($===null||L.current&1?T===0&&(T=3):tj())),et.updateQueue!==null&&(et.flags|=4),S(et),null);case 4:return zh(),Aj($,et),$===null&&sf(et.stateNode.containerInfo),S(et),null;case 10:return ah(et.type._context),S(et),null;case 17:return Zf(et.type)&&$f(),S(et),null;case 19:if(E(L),e=et.memoizedState,e===null)return S(et),null;if(ct=(et.flags&128)!==0,It=e.rendering,It===null)if(ct)Dj(e,!1);else{if(T!==0||$!==null&&$.flags&128)for($=et.child;$!==null;){if(It=Ch($),It!==null){for(et.flags|=128,Dj(e,!1),ct=It.updateQueue,ct!==null&&(et.updateQueue=ct,et.flags|=4),et.subtreeFlags=0,ct=ot,ot=et.child;ot!==null;)e=ot,$=ct,e.flags&=14680066,It=e.alternate,It===null?(e.childLanes=0,e.lanes=$,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=It.childLanes,e.lanes=It.lanes,e.child=It.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=It.memoizedProps,e.memoizedState=It.memoizedState,e.updateQueue=It.updateQueue,e.type=It.type,$=It.dependencies,e.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),ot=ot.sibling;return G(L,L.current&1|2),et.child}$=$.sibling}e.tail!==null&&B()>Gj&&(et.flags|=128,ct=!0,Dj(e,!1),et.lanes=4194304)}else{if(!ct)if($=Ch(It),$!==null){if(et.flags|=128,ct=!0,ot=$.updateQueue,ot!==null&&(et.updateQueue=ot,et.flags|=4),Dj(e,!0),e.tail===null&&e.tailMode==="hidden"&&!It.alternate&&!I)return S(et),null}else 2*B()-e.renderingStartTime>Gj&&ot!==1073741824&&(et.flags|=128,ct=!0,Dj(e,!1),et.lanes=4194304);e.isBackwards?(It.sibling=et.child,et.child=It):(ot=e.last,ot!==null?ot.sibling=It:et.child=It,e.last=It)}return e.tail!==null?(et=e.tail,e.rendering=et,e.tail=et.sibling,e.renderingStartTime=B(),et.sibling=null,ot=L.current,G(L,ct?ot&1|2:ot&1),et):(S(et),null);case 22:case 23:return Hj(),ct=et.memoizedState!==null,$!==null&&$.memoizedState!==null!==ct&&(et.flags|=8192),ct&&et.mode&1?fj&1073741824&&(S(et),et.subtreeFlags&6&&(et.flags|=8192)):S(et),null;case 24:return null;case 25:return null}throw Error(p(156,et.tag))}function Ij($,et){switch(wg(et),et.tag){case 1:return Zf(et.type)&&$f(),$=et.flags,$&65536?(et.flags=$&-65537|128,et):null;case 3:return zh(),E(Wf),E(H),Eh(),$=et.flags,$&65536&&!($&128)?(et.flags=$&-65537|128,et):null;case 5:return Bh(et),null;case 13:if(E(L),$=et.memoizedState,$!==null&&$.dehydrated!==null){if(et.alternate===null)throw Error(p(340));Ig()}return $=et.flags,$&65536?(et.flags=$&-65537|128,et):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(et.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj($,et){var ot=$.ref;if(ot!==null)if(typeof ot=="function")try{ot(null)}catch(ct){W($,et,ct)}else ot.current=null}function Mj($,et,ot){try{ot()}catch(ct){W($,et,ct)}}var Nj=!1;function Oj($,et){if(Cf=dd,$=Me(),Ne($)){if("selectionStart"in $)var ot={start:$.selectionStart,end:$.selectionEnd};else e:{ot=(ot=$.ownerDocument)&&ot.defaultView||window;var ct=ot.getSelection&&ot.getSelection();if(ct&&ct.rangeCount!==0){ot=ct.anchorNode;var st=ct.anchorOffset,e=ct.focusNode;ct=ct.focusOffset;try{ot.nodeType,e.nodeType}catch{ot=null;break e}var It=0,St=-1,Gt=-1,vt=0,it=0,dt=$,bt=null;t:for(;;){for(var Tt;dt!==ot||st!==0&&dt.nodeType!==3||(St=It+st),dt!==e||ct!==0&&dt.nodeType!==3||(Gt=It+ct),dt.nodeType===3&&(It+=dt.nodeValue.length),(Tt=dt.firstChild)!==null;)bt=dt,dt=Tt;for(;;){if(dt===$)break t;if(bt===ot&&++vt===st&&(St=It),bt===e&&++it===ct&&(Gt=It),(Tt=dt.nextSibling)!==null)break;dt=bt,bt=dt.parentNode}dt=Tt}ot=St===-1||Gt===-1?null:{start:St,end:Gt}}else ot=null}ot=ot||{start:0,end:0}}else ot=null;for(Df={focusedElem:$,selectionRange:ot},dd=!1,V=et;V!==null;)if(et=V,$=et.child,(et.subtreeFlags&1028)!==0&&$!==null)$.return=et,V=$;else for(;V!==null;){et=V;try{var Et=et.alternate;if(et.flags&1024)switch(et.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var Mt=Et.memoizedProps,Rt=Et.memoizedState,pt=et.stateNode,mt=pt.getSnapshotBeforeUpdate(et.elementType===et.type?Mt:Ci(et.type,Mt),Rt);pt.__reactInternalSnapshotBeforeUpdate=mt}break;case 3:var gt=et.stateNode.containerInfo;gt.nodeType===1?gt.textContent="":gt.nodeType===9&&gt.documentElement&&gt.removeChild(gt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Ct){W(et,et.return,Ct)}if($=et.sibling,$!==null){$.return=et.return,V=$;break}V=et.return}return Et=Nj,Nj=!1,Et}function Pj($,et,ot){var ct=et.updateQueue;if(ct=ct!==null?ct.lastEffect:null,ct!==null){var st=ct=ct.next;do{if((st.tag&$)===$){var e=st.destroy;st.destroy=void 0,e!==void 0&&Mj(et,ot,e)}st=st.next}while(st!==ct)}}function Qj($,et){if(et=et.updateQueue,et=et!==null?et.lastEffect:null,et!==null){var ot=et=et.next;do{if((ot.tag&$)===$){var ct=ot.create;ot.destroy=ct()}ot=ot.next}while(ot!==et)}}function Rj($){var et=$.ref;if(et!==null){var ot=$.stateNode;switch($.tag){case 5:$=ot;break;default:$=ot}typeof et=="function"?et($):et.current=$}}function Sj($){var et=$.alternate;et!==null&&($.alternate=null,Sj(et)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(et=$.stateNode,et!==null&&(delete et[Of],delete et[Pf],delete et[of],delete et[Qf],delete et[Rf])),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Tj($){return $.tag===5||$.tag===3||$.tag===4}function Uj($){e:for(;;){for(;$.sibling===null;){if($.return===null||Tj($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Vj($,et,ot){var ct=$.tag;if(ct===5||ct===6)$=$.stateNode,et?ot.nodeType===8?ot.parentNode.insertBefore($,et):ot.insertBefore($,et):(ot.nodeType===8?(et=ot.parentNode,et.insertBefore($,ot)):(et=ot,et.appendChild($)),ot=ot._reactRootContainer,ot!=null||et.onclick!==null||(et.onclick=Bf));else if(ct!==4&&($=$.child,$!==null))for(Vj($,et,ot),$=$.sibling;$!==null;)Vj($,et,ot),$=$.sibling}function Wj($,et,ot){var ct=$.tag;if(ct===5||ct===6)$=$.stateNode,et?ot.insertBefore($,et):ot.appendChild($);else if(ct!==4&&($=$.child,$!==null))for(Wj($,et,ot),$=$.sibling;$!==null;)Wj($,et,ot),$=$.sibling}var X=null,Xj=!1;function Yj($,et,ot){for(ot=ot.child;ot!==null;)Zj($,et,ot),ot=ot.sibling}function Zj($,et,ot){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,ot)}catch{}switch(ot.tag){case 5:U||Lj(ot,et);case 6:var ct=X,st=Xj;X=null,Yj($,et,ot),X=ct,Xj=st,X!==null&&(Xj?($=X,ot=ot.stateNode,$.nodeType===8?$.parentNode.removeChild(ot):$.removeChild(ot)):X.removeChild(ot.stateNode));break;case 18:X!==null&&(Xj?($=X,ot=ot.stateNode,$.nodeType===8?Kf($.parentNode,ot):$.nodeType===1&&Kf($,ot),bd($)):Kf(X,ot.stateNode));break;case 4:ct=X,st=Xj,X=ot.stateNode.containerInfo,Xj=!0,Yj($,et,ot),X=ct,Xj=st;break;case 0:case 11:case 14:case 15:if(!U&&(ct=ot.updateQueue,ct!==null&&(ct=ct.lastEffect,ct!==null))){st=ct=ct.next;do{var e=st,It=e.destroy;e=e.tag,It!==void 0&&(e&2||e&4)&&Mj(ot,et,It),st=st.next}while(st!==ct)}Yj($,et,ot);break;case 1:if(!U&&(Lj(ot,et),ct=ot.stateNode,typeof ct.componentWillUnmount=="function"))try{ct.props=ot.memoizedProps,ct.state=ot.memoizedState,ct.componentWillUnmount()}catch(St){W(ot,et,St)}Yj($,et,ot);break;case 21:Yj($,et,ot);break;case 22:ot.mode&1?(U=(ct=U)||ot.memoizedState!==null,Yj($,et,ot),U=ct):Yj($,et,ot);break;default:Yj($,et,ot)}}function ak($){var et=$.updateQueue;if(et!==null){$.updateQueue=null;var ot=$.stateNode;ot===null&&(ot=$.stateNode=new Kj),et.forEach(function(ct){var st=bk.bind(null,$,ct);ot.has(ct)||(ot.add(ct),ct.then(st,st))})}}function ck($,et){var ot=et.deletions;if(ot!==null)for(var ct=0;ct<ot.length;ct++){var st=ot[ct];try{var e=$,It=et,St=It;e:for(;St!==null;){switch(St.tag){case 5:X=St.stateNode,Xj=!1;break e;case 3:X=St.stateNode.containerInfo,Xj=!0;break e;case 4:X=St.stateNode.containerInfo,Xj=!0;break e}St=St.return}if(X===null)throw Error(p(160));Zj(e,It,st),X=null,Xj=!1;var Gt=st.alternate;Gt!==null&&(Gt.return=null),st.return=null}catch(vt){W(st,et,vt)}}if(et.subtreeFlags&12854)for(et=et.child;et!==null;)dk(et,$),et=et.sibling}function dk($,et){var ot=$.alternate,ct=$.flags;switch($.tag){case 0:case 11:case 14:case 15:if(ck(et,$),ek($),ct&4){try{Pj(3,$,$.return),Qj(3,$)}catch(Mt){W($,$.return,Mt)}try{Pj(5,$,$.return)}catch(Mt){W($,$.return,Mt)}}break;case 1:ck(et,$),ek($),ct&512&&ot!==null&&Lj(ot,ot.return);break;case 5:if(ck(et,$),ek($),ct&512&&ot!==null&&Lj(ot,ot.return),$.flags&32){var st=$.stateNode;try{ob(st,"")}catch(Mt){W($,$.return,Mt)}}if(ct&4&&(st=$.stateNode,st!=null)){var e=$.memoizedProps,It=ot!==null?ot.memoizedProps:e,St=$.type,Gt=$.updateQueue;if($.updateQueue=null,Gt!==null)try{St==="input"&&e.type==="radio"&&e.name!=null&&ab(st,e),vb(St,It);var vt=vb(St,e);for(It=0;It<Gt.length;It+=2){var it=Gt[It],dt=Gt[It+1];it==="style"?sb(st,dt):it==="dangerouslySetInnerHTML"?nb(st,dt):it==="children"?ob(st,dt):ta(st,it,dt,vt)}switch(St){case"input":bb(st,e);break;case"textarea":ib(st,e);break;case"select":var bt=st._wrapperState.wasMultiple;st._wrapperState.wasMultiple=!!e.multiple;var Tt=e.value;Tt!=null?fb(st,!!e.multiple,Tt,!1):bt!==!!e.multiple&&(e.defaultValue!=null?fb(st,!!e.multiple,e.defaultValue,!0):fb(st,!!e.multiple,e.multiple?[]:"",!1))}st[Pf]=e}catch(Mt){W($,$.return,Mt)}}break;case 6:if(ck(et,$),ek($),ct&4){if($.stateNode===null)throw Error(p(162));st=$.stateNode,e=$.memoizedProps;try{st.nodeValue=e}catch(Mt){W($,$.return,Mt)}}break;case 3:if(ck(et,$),ek($),ct&4&&ot!==null&&ot.memoizedState.isDehydrated)try{bd(et.containerInfo)}catch(Mt){W($,$.return,Mt)}break;case 4:ck(et,$),ek($);break;case 13:ck(et,$),ek($),st=$.child,st.flags&8192&&(e=st.memoizedState!==null,st.stateNode.isHidden=e,!e||st.alternate!==null&&st.alternate.memoizedState!==null||(fk=B())),ct&4&&ak($);break;case 22:if(it=ot!==null&&ot.memoizedState!==null,$.mode&1?(U=(vt=U)||it,ck(et,$),U=vt):ck(et,$),ek($),ct&8192){if(vt=$.memoizedState!==null,($.stateNode.isHidden=vt)&&!it&&$.mode&1)for(V=$,it=$.child;it!==null;){for(dt=V=it;V!==null;){switch(bt=V,Tt=bt.child,bt.tag){case 0:case 11:case 14:case 15:Pj(4,bt,bt.return);break;case 1:Lj(bt,bt.return);var Et=bt.stateNode;if(typeof Et.componentWillUnmount=="function"){ct=bt,ot=bt.return;try{et=ct,Et.props=et.memoizedProps,Et.state=et.memoizedState,Et.componentWillUnmount()}catch(Mt){W(ct,ot,Mt)}}break;case 5:Lj(bt,bt.return);break;case 22:if(bt.memoizedState!==null){gk(dt);continue}}Tt!==null?(Tt.return=bt,V=Tt):gk(dt)}it=it.sibling}e:for(it=null,dt=$;;){if(dt.tag===5){if(it===null){it=dt;try{st=dt.stateNode,vt?(e=st.style,typeof e.setProperty=="function"?e.setProperty("display","none","important"):e.display="none"):(St=dt.stateNode,Gt=dt.memoizedProps.style,It=Gt!=null&&Gt.hasOwnProperty("display")?Gt.display:null,St.style.display=rb("display",It))}catch(Mt){W($,$.return,Mt)}}}else if(dt.tag===6){if(it===null)try{dt.stateNode.nodeValue=vt?"":dt.memoizedProps}catch(Mt){W($,$.return,Mt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===$)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===$)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===$)break e;it===dt&&(it=null),dt=dt.return}it===dt&&(it=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ck(et,$),ek($),ct&4&&ak($);break;case 21:break;default:ck(et,$),ek($)}}function ek($){var et=$.flags;if(et&2){try{e:{for(var ot=$.return;ot!==null;){if(Tj(ot)){var ct=ot;break e}ot=ot.return}throw Error(p(160))}switch(ct.tag){case 5:var st=ct.stateNode;ct.flags&32&&(ob(st,""),ct.flags&=-33);var e=Uj($);Wj($,e,st);break;case 3:case 4:var It=ct.stateNode.containerInfo,St=Uj($);Vj($,St,It);break;default:throw Error(p(161))}}catch(Gt){W($,$.return,Gt)}$.flags&=-3}et&4096&&($.flags&=-4097)}function hk($,et,ot){V=$,ik($)}function ik($,et,ot){for(var ct=($.mode&1)!==0;V!==null;){var st=V,e=st.child;if(st.tag===22&&ct){var It=st.memoizedState!==null||Jj;if(!It){var St=st.alternate,Gt=St!==null&&St.memoizedState!==null||U;St=Jj;var vt=U;if(Jj=It,(U=Gt)&&!vt)for(V=st;V!==null;)It=V,Gt=It.child,It.tag===22&&It.memoizedState!==null?jk(st):Gt!==null?(Gt.return=It,V=Gt):jk(st);for(;e!==null;)V=e,ik(e),e=e.sibling;V=st,Jj=St,U=vt}kk($)}else st.subtreeFlags&8772&&e!==null?(e.return=st,V=e):kk($)}}function kk($){for(;V!==null;){var et=V;if(et.flags&8772){var ot=et.alternate;try{if(et.flags&8772)switch(et.tag){case 0:case 11:case 15:U||Qj(5,et);break;case 1:var ct=et.stateNode;if(et.flags&4&&!U)if(ot===null)ct.componentDidMount();else{var st=et.elementType===et.type?ot.memoizedProps:Ci(et.type,ot.memoizedProps);ct.componentDidUpdate(st,ot.memoizedState,ct.__reactInternalSnapshotBeforeUpdate)}var e=et.updateQueue;e!==null&&sh(et,e,ct);break;case 3:var It=et.updateQueue;if(It!==null){if(ot=null,et.child!==null)switch(et.child.tag){case 5:ot=et.child.stateNode;break;case 1:ot=et.child.stateNode}sh(et,It,ot)}break;case 5:var St=et.stateNode;if(ot===null&&et.flags&4){ot=St;var Gt=et.memoizedProps;switch(et.type){case"button":case"input":case"select":case"textarea":Gt.autoFocus&&ot.focus();break;case"img":Gt.src&&(ot.src=Gt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(et.memoizedState===null){var vt=et.alternate;if(vt!==null){var it=vt.memoizedState;if(it!==null){var dt=it.dehydrated;dt!==null&&bd(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||et.flags&512&&Rj(et)}catch(bt){W(et,et.return,bt)}}if(et===$){V=null;break}if(ot=et.sibling,ot!==null){ot.return=et.return,V=ot;break}V=et.return}}function gk($){for(;V!==null;){var et=V;if(et===$){V=null;break}var ot=et.sibling;if(ot!==null){ot.return=et.return,V=ot;break}V=et.return}}function jk($){for(;V!==null;){var et=V;try{switch(et.tag){case 0:case 11:case 15:var ot=et.return;try{Qj(4,et)}catch(Gt){W(et,ot,Gt)}break;case 1:var ct=et.stateNode;if(typeof ct.componentDidMount=="function"){var st=et.return;try{ct.componentDidMount()}catch(Gt){W(et,st,Gt)}}var e=et.return;try{Rj(et)}catch(Gt){W(et,e,Gt)}break;case 5:var It=et.return;try{Rj(et)}catch(Gt){W(et,It,Gt)}}}catch(Gt){W(et,et.return,Gt)}if(et===$){V=null;break}var St=et.sibling;if(St!==null){St.return=et.return,V=St;break}V=et.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi($){return $.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):($=C,$!==0||($=window.event,$=$===void 0?16:jd($.type)),$):1}function gi($,et,ot,ct){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac($,ot,ct),(!(K&2)||$!==Q)&&($===Q&&(!(K&2)&&(qk|=ot),T===4&&Ck($,Z)),Dk($,ct),ot===1&&K===0&&!(et.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk($,et){var ot=$.callbackNode;wc($,et);var ct=uc($,$===Q?Z:0);if(ct===0)ot!==null&&bc(ot),$.callbackNode=null,$.callbackPriority=0;else if(et=ct&-ct,$.callbackPriority!==et){if(ot!=null&&bc(ot),et===1)$.tag===0?ig(Ek.bind(null,$)):hg(Ek.bind(null,$)),Jf(function(){!(K&6)&&jg()}),ot=null;else{switch(Dc(ct)){case 1:ot=fc;break;case 4:ot=gc;break;case 16:ot=hc;break;case 536870912:ot=jc;break;default:ot=hc}ot=Fk(ot,Gk.bind(null,$))}$.callbackPriority=et,$.callbackNode=ot}}function Gk($,et){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var ot=$.callbackNode;if(Hk()&&$.callbackNode!==ot)return null;var ct=uc($,$===Q?Z:0);if(ct===0)return null;if(ct&30||ct&$.expiredLanes||et)et=Ik($,ct);else{et=ct;var st=K;K|=2;var e=Jk();(Q!==$||Z!==et)&&(uk=null,Gj=B()+500,Kk($,et));do try{Lk();break}catch(St){Mk($,St)}while(!0);$g(),mk.current=e,K=st,Y!==null?et=0:(Q=null,Z=0,et=T)}if(et!==0){if(et===2&&(st=xc($),st!==0&&(ct=st,et=Nk($,st))),et===1)throw ot=pk,Kk($,0),Ck($,ct),Dk($,B()),ot;if(et===6)Ck($,ct);else{if(st=$.current.alternate,!(ct&30)&&!Ok(st)&&(et=Ik($,ct),et===2&&(e=xc($),e!==0&&(ct=e,et=Nk($,e))),et===1))throw ot=pk,Kk($,0),Ck($,ct),Dk($,B()),ot;switch($.finishedWork=st,$.finishedLanes=ct,et){case 0:case 1:throw Error(p(345));case 2:Pk($,tk,uk);break;case 3:if(Ck($,ct),(ct&130023424)===ct&&(et=fk+500-B(),10<et)){if(uc($,0)!==0)break;if(st=$.suspendedLanes,(st&ct)!==ct){R(),$.pingedLanes|=$.suspendedLanes&st;break}$.timeoutHandle=Ff(Pk.bind(null,$,tk,uk),et);break}Pk($,tk,uk);break;case 4:if(Ck($,ct),(ct&4194240)===ct)break;for(et=$.eventTimes,st=-1;0<ct;){var It=31-oc(ct);e=1<<It,It=et[It],It>st&&(st=It),ct&=~e}if(ct=st,ct=B()-ct,ct=(120>ct?120:480>ct?480:1080>ct?1080:1920>ct?1920:3e3>ct?3e3:4320>ct?4320:1960*lk(ct/1960))-ct,10<ct){$.timeoutHandle=Ff(Pk.bind(null,$,tk,uk),ct);break}Pk($,tk,uk);break;case 5:Pk($,tk,uk);break;default:throw Error(p(329))}}}return Dk($,B()),$.callbackNode===ot?Gk.bind(null,$):null}function Nk($,et){var ot=sk;return $.current.memoizedState.isDehydrated&&(Kk($,et).flags|=256),$=Ik($,et),$!==2&&(et=tk,tk=ot,et!==null&&Fj(et)),$}function Fj($){tk===null?tk=$:tk.push.apply(tk,$)}function Ok($){for(var et=$;;){if(et.flags&16384){var ot=et.updateQueue;if(ot!==null&&(ot=ot.stores,ot!==null))for(var ct=0;ct<ot.length;ct++){var st=ot[ct],e=st.getSnapshot;st=st.value;try{if(!He(e(),st))return!1}catch{return!1}}}if(ot=et.child,et.subtreeFlags&16384&&ot!==null)ot.return=et,et=ot;else{if(et===$)break;for(;et.sibling===null;){if(et.return===null||et.return===$)return!0;et=et.return}et.sibling.return=et.return,et=et.sibling}}return!0}function Ck($,et){for(et&=~rk,et&=~qk,$.suspendedLanes|=et,$.pingedLanes&=~et,$=$.expirationTimes;0<et;){var ot=31-oc(et),ct=1<<ot;$[ot]=-1,et&=~ct}}function Ek($){if(K&6)throw Error(p(327));Hk();var et=uc($,0);if(!(et&1))return Dk($,B()),null;var ot=Ik($,et);if($.tag!==0&&ot===2){var ct=xc($);ct!==0&&(et=ct,ot=Nk($,ct))}if(ot===1)throw ot=pk,Kk($,0),Ck($,et),Dk($,B()),ot;if(ot===6)throw Error(p(345));return $.finishedWork=$.current.alternate,$.finishedLanes=et,Pk($,tk,uk),Dk($,B()),null}function Qk($,et){var ot=K;K|=1;try{return $(et)}finally{K=ot,K===0&&(Gj=B()+500,fg&&jg())}}function Rk($){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var et=K;K|=1;var ot=ok.transition,ct=C;try{if(ok.transition=null,C=1,$)return $()}finally{C=ct,ok.transition=ot,K=et,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk($,et){$.finishedWork=null,$.finishedLanes=0;var ot=$.timeoutHandle;if(ot!==-1&&($.timeoutHandle=-1,Gf(ot)),Y!==null)for(ot=Y.return;ot!==null;){var ct=ot;switch(wg(ct),ct.tag){case 1:ct=ct.type.childContextTypes,ct!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(ct);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(ct.type._context);break;case 22:case 23:Hj()}ot=ot.return}if(Q=$,Y=$=Pg($.current,null),Z=fj=et,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(et=0;et<fh.length;et++)if(ot=fh[et],ct=ot.interleaved,ct!==null){ot.interleaved=null;var st=ct.next,e=ot.pending;if(e!==null){var It=e.next;e.next=st,ct.next=It}ot.pending=ct}fh=null}return $}function Mk($,et){do{var ot=Y;try{if($g(),Fh.current=Rh,Ih){for(var ct=M.memoizedState;ct!==null;){var st=ct.queue;st!==null&&(st.pending=null),ct=ct.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,ot===null||ot.return===null){T=1,pk=et,Y=null;break}e:{var e=$,It=ot.return,St=ot,Gt=et;if(et=Z,St.flags|=32768,Gt!==null&&typeof Gt=="object"&&typeof Gt.then=="function"){var vt=Gt,it=St,dt=it.tag;if(!(it.mode&1)&&(dt===0||dt===11||dt===15)){var bt=it.alternate;bt?(it.updateQueue=bt.updateQueue,it.memoizedState=bt.memoizedState,it.lanes=bt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Tt=Ui(It);if(Tt!==null){Tt.flags&=-257,Vi(Tt,It,St,e,et),Tt.mode&1&&Si(e,vt,et),et=Tt,Gt=vt;var Et=et.updateQueue;if(Et===null){var Mt=new Set;Mt.add(Gt),et.updateQueue=Mt}else Et.add(Gt);break e}else{if(!(et&1)){Si(e,vt,et),tj();break e}Gt=Error(p(426))}}else if(I&&St.mode&1){var Rt=Ui(It);if(Rt!==null){!(Rt.flags&65536)&&(Rt.flags|=256),Vi(Rt,It,St,e,et),Jg(Ji(Gt,St));break e}}e=Gt=Ji(Gt,St),T!==4&&(T=2),sk===null?sk=[e]:sk.push(e),e=It;do{switch(e.tag){case 3:e.flags|=65536,et&=-et,e.lanes|=et;var pt=Ni(e,Gt,et);ph(e,pt);break e;case 1:St=Gt;var mt=e.type,gt=e.stateNode;if(!(e.flags&128)&&(typeof mt.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(Ri===null||!Ri.has(gt)))){e.flags|=65536,et&=-et,e.lanes|=et;var Ct=Qi(e,St,et);ph(e,Ct);break e}}e=e.return}while(e!==null)}Sk(ot)}catch(xt){et=xt,Y===ot&&ot!==null&&(Y=ot=ot.return);continue}break}while(!0)}function Jk(){var $=mk.current;return mk.current=Rh,$===null?Rh:$}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik($,et){var ot=K;K|=2;var ct=Jk();(Q!==$||Z!==et)&&(uk=null,Kk($,et));do try{Tk();break}catch(st){Mk($,st)}while(!0);if($g(),K=ot,mk.current=ct,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk($){var et=Vk($.alternate,$,fj);$.memoizedProps=$.pendingProps,et===null?Sk($):Y=et,nk.current=null}function Sk($){var et=$;do{var ot=et.alternate;if($=et.return,et.flags&32768){if(ot=Ij(ot,et),ot!==null){ot.flags&=32767,Y=ot;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{T=6,Y=null;return}}else if(ot=Ej(ot,et,fj),ot!==null){Y=ot;return}if(et=et.sibling,et!==null){Y=et;return}Y=et=$}while(et!==null);T===0&&(T=5)}function Pk($,et,ot){var ct=C,st=ok.transition;try{ok.transition=null,C=1,Wk($,et,ot,ct)}finally{ok.transition=st,C=ct}return null}function Wk($,et,ot,ct){do Hk();while(wk!==null);if(K&6)throw Error(p(327));ot=$.finishedWork;var st=$.finishedLanes;if(ot===null)return null;if($.finishedWork=null,$.finishedLanes=0,ot===$.current)throw Error(p(177));$.callbackNode=null,$.callbackPriority=0;var e=ot.lanes|ot.childLanes;if(Bc($,e),$===Q&&(Y=Q=null,Z=0),!(ot.subtreeFlags&2064)&&!(ot.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),e=(ot.flags&15990)!==0,ot.subtreeFlags&15990||e){e=ok.transition,ok.transition=null;var It=C;C=1;var St=K;K|=4,nk.current=null,Oj($,ot),dk(ot,$),Oe(Df),dd=!!Cf,Df=Cf=null,$.current=ot,hk(ot),dc(),K=St,C=It,ok.transition=e}else $.current=ot;if(vk&&(vk=!1,wk=$,xk=st),e=$.pendingLanes,e===0&&(Ri=null),mc(ot.stateNode),Dk($,B()),et!==null)for(ct=$.onRecoverableError,ot=0;ot<et.length;ot++)st=et[ot],ct(st.value,{componentStack:st.stack,digest:st.digest});if(Oi)throw Oi=!1,$=Pi,Pi=null,$;return xk&1&&$.tag!==0&&Hk(),e=$.pendingLanes,e&1?$===zk?yk++:(yk=0,zk=$):yk=0,jg(),null}function Hk(){if(wk!==null){var $=Dc(xk),et=ok.transition,ot=C;try{if(ok.transition=null,C=16>$?16:$,wk===null)var ct=!1;else{if($=wk,wk=null,xk=0,K&6)throw Error(p(331));var st=K;for(K|=4,V=$.current;V!==null;){var e=V,It=e.child;if(V.flags&16){var St=e.deletions;if(St!==null){for(var Gt=0;Gt<St.length;Gt++){var vt=St[Gt];for(V=vt;V!==null;){var it=V;switch(it.tag){case 0:case 11:case 15:Pj(8,it,e)}var dt=it.child;if(dt!==null)dt.return=it,V=dt;else for(;V!==null;){it=V;var bt=it.sibling,Tt=it.return;if(Sj(it),it===vt){V=null;break}if(bt!==null){bt.return=Tt,V=bt;break}V=Tt}}}var Et=e.alternate;if(Et!==null){var Mt=Et.child;if(Mt!==null){Et.child=null;do{var Rt=Mt.sibling;Mt.sibling=null,Mt=Rt}while(Mt!==null)}}V=e}}if(e.subtreeFlags&2064&&It!==null)It.return=e,V=It;else e:for(;V!==null;){if(e=V,e.flags&2048)switch(e.tag){case 0:case 11:case 15:Pj(9,e,e.return)}var pt=e.sibling;if(pt!==null){pt.return=e.return,V=pt;break e}V=e.return}}var mt=$.current;for(V=mt;V!==null;){It=V;var gt=It.child;if(It.subtreeFlags&2064&&gt!==null)gt.return=It,V=gt;else e:for(It=mt;V!==null;){if(St=V,St.flags&2048)try{switch(St.tag){case 0:case 11:case 15:Qj(9,St)}}catch(xt){W(St,St.return,xt)}if(St===It){V=null;break e}var Ct=St.sibling;if(Ct!==null){Ct.return=St.return,V=Ct;break e}V=St.return}}if(K=st,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,$)}catch{}ct=!0}return ct}finally{C=ot,ok.transition=et}}return!1}function Xk($,et,ot){et=Ji(ot,et),et=Ni($,et,1),$=nh($,et,1),et=R(),$!==null&&(Ac($,1,et),Dk($,et))}function W($,et,ot){if($.tag===3)Xk($,$,ot);else for(;et!==null;){if(et.tag===3){Xk(et,$,ot);break}else if(et.tag===1){var ct=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof ct.componentDidCatch=="function"&&(Ri===null||!Ri.has(ct))){$=Ji(ot,$),$=Qi(et,$,1),et=nh(et,$,1),$=R(),et!==null&&(Ac(et,1,$),Dk(et,$));break}}et=et.return}}function Ti($,et,ot){var ct=$.pingCache;ct!==null&&ct.delete(et),et=R(),$.pingedLanes|=$.suspendedLanes&ot,Q===$&&(Z&ot)===ot&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk($,0):rk|=ot),Dk($,et)}function Yk($,et){et===0&&($.mode&1?(et=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):et=1);var ot=R();$=ih($,et),$!==null&&(Ac($,et,ot),Dk($,ot))}function uj($){var et=$.memoizedState,ot=0;et!==null&&(ot=et.retryLane),Yk($,ot)}function bk($,et){var ot=0;switch($.tag){case 13:var ct=$.stateNode,st=$.memoizedState;st!==null&&(ot=st.retryLane);break;case 19:ct=$.stateNode;break;default:throw Error(p(314))}ct!==null&&ct.delete(et),Yk($,ot)}var Vk;Vk=function($,et,ot){if($!==null)if($.memoizedProps!==et.pendingProps||Wf.current)dh=!0;else{if(!($.lanes&ot)&&!(et.flags&128))return dh=!1,yj($,et,ot);dh=!!($.flags&131072)}else dh=!1,I&&et.flags&1048576&&ug(et,ng,et.index);switch(et.lanes=0,et.tag){case 2:var ct=et.type;ij($,et),$=et.pendingProps;var st=Yf(et,H.current);ch(et,ot),st=Nh(null,et,ct,$,st,ot);var e=Sh();return et.flags|=1,typeof st=="object"&&st!==null&&typeof st.render=="function"&&st.$$typeof===void 0?(et.tag=1,et.memoizedState=null,et.updateQueue=null,Zf(ct)?(e=!0,cg(et)):e=!1,et.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,kh(et),st.updater=Ei,et.stateNode=st,st._reactInternals=et,Ii(et,ct,$,ot),et=jj(null,et,ct,!0,e,ot)):(et.tag=0,I&&e&&vg(et),Xi(null,et,st,ot),et=et.child),et;case 16:ct=et.elementType;e:{switch(ij($,et),$=et.pendingProps,st=ct._init,ct=st(ct._payload),et.type=ct,st=et.tag=Zk(ct),$=Ci(ct,$),st){case 0:et=cj(null,et,ct,$,ot);break e;case 1:et=hj(null,et,ct,$,ot);break e;case 11:et=Yi(null,et,ct,$,ot);break e;case 14:et=$i(null,et,ct,Ci(ct.type,$),ot);break e}throw Error(p(306,ct,""))}return et;case 0:return ct=et.type,st=et.pendingProps,st=et.elementType===ct?st:Ci(ct,st),cj($,et,ct,st,ot);case 1:return ct=et.type,st=et.pendingProps,st=et.elementType===ct?st:Ci(ct,st),hj($,et,ct,st,ot);case 3:e:{if(kj(et),$===null)throw Error(p(387));ct=et.pendingProps,e=et.memoizedState,st=e.element,lh($,et),qh(et,ct,null,ot);var It=et.memoizedState;if(ct=It.element,e.isDehydrated)if(e={element:ct,isDehydrated:!1,cache:It.cache,pendingSuspenseBoundaries:It.pendingSuspenseBoundaries,transitions:It.transitions},et.updateQueue.baseState=e,et.memoizedState=e,et.flags&256){st=Ji(Error(p(423)),et),et=lj($,et,ct,ot,st);break e}else if(ct!==st){st=Ji(Error(p(424)),et),et=lj($,et,ct,ot,st);break e}else for(yg=Lf(et.stateNode.containerInfo.firstChild),xg=et,I=!0,zg=null,ot=Vg(et,null,ct,ot),et.child=ot;ot;)ot.flags=ot.flags&-3|4096,ot=ot.sibling;else{if(Ig(),ct===st){et=Zi($,et,ot);break e}Xi($,et,ct,ot)}et=et.child}return et;case 5:return Ah(et),$===null&&Eg(et),ct=et.type,st=et.pendingProps,e=$!==null?$.memoizedProps:null,It=st.children,Ef(ct,st)?It=null:e!==null&&Ef(ct,e)&&(et.flags|=32),gj($,et),Xi($,et,It,ot),et.child;case 6:return $===null&&Eg(et),null;case 13:return oj($,et,ot);case 4:return yh(et,et.stateNode.containerInfo),ct=et.pendingProps,$===null?et.child=Ug(et,null,ct,ot):Xi($,et,ct,ot),et.child;case 11:return ct=et.type,st=et.pendingProps,st=et.elementType===ct?st:Ci(ct,st),Yi($,et,ct,st,ot);case 7:return Xi($,et,et.pendingProps,ot),et.child;case 8:return Xi($,et,et.pendingProps.children,ot),et.child;case 12:return Xi($,et,et.pendingProps.children,ot),et.child;case 10:e:{if(ct=et.type._context,st=et.pendingProps,e=et.memoizedProps,It=st.value,G(Wg,ct._currentValue),ct._currentValue=It,e!==null)if(He(e.value,It)){if(e.children===st.children&&!Wf.current){et=Zi($,et,ot);break e}}else for(e=et.child,e!==null&&(e.return=et);e!==null;){var St=e.dependencies;if(St!==null){It=e.child;for(var Gt=St.firstContext;Gt!==null;){if(Gt.context===ct){if(e.tag===1){Gt=mh(-1,ot&-ot),Gt.tag=2;var vt=e.updateQueue;if(vt!==null){vt=vt.shared;var it=vt.pending;it===null?Gt.next=Gt:(Gt.next=it.next,it.next=Gt),vt.pending=Gt}}e.lanes|=ot,Gt=e.alternate,Gt!==null&&(Gt.lanes|=ot),bh(e.return,ot,et),St.lanes|=ot;break}Gt=Gt.next}}else if(e.tag===10)It=e.type===et.type?null:e.child;else if(e.tag===18){if(It=e.return,It===null)throw Error(p(341));It.lanes|=ot,St=It.alternate,St!==null&&(St.lanes|=ot),bh(It,ot,et),It=e.sibling}else It=e.child;if(It!==null)It.return=e;else for(It=e;It!==null;){if(It===et){It=null;break}if(e=It.sibling,e!==null){e.return=It.return,It=e;break}It=It.return}e=It}Xi($,et,st.children,ot),et=et.child}return et;case 9:return st=et.type,ct=et.pendingProps.children,ch(et,ot),st=eh(st),ct=ct(st),et.flags|=1,Xi($,et,ct,ot),et.child;case 14:return ct=et.type,st=Ci(ct,et.pendingProps),st=Ci(ct.type,st),$i($,et,ct,st,ot);case 15:return bj($,et,et.type,et.pendingProps,ot);case 17:return ct=et.type,st=et.pendingProps,st=et.elementType===ct?st:Ci(ct,st),ij($,et),et.tag=1,Zf(ct)?($=!0,cg(et)):$=!1,ch(et,ot),Gi(et,ct,st),Ii(et,ct,st,ot),jj(null,et,ct,!0,$,ot);case 19:return xj($,et,ot);case 22:return dj($,et,ot)}throw Error(p(156,et.tag))};function Fk($,et){return ac($,et)}function $k($,et,ot,ct){this.tag=$,this.key=ot,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ct,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg($,et,ot,ct){return new $k($,et,ot,ct)}function aj($){return $=$.prototype,!(!$||!$.isReactComponent)}function Zk($){if(typeof $=="function")return aj($)?1:0;if($!=null){if($=$.$$typeof,$===Da)return 11;if($===Ga)return 14}return 2}function Pg($,et){var ot=$.alternate;return ot===null?(ot=Bg($.tag,et,$.key,$.mode),ot.elementType=$.elementType,ot.type=$.type,ot.stateNode=$.stateNode,ot.alternate=$,$.alternate=ot):(ot.pendingProps=et,ot.type=$.type,ot.flags=0,ot.subtreeFlags=0,ot.deletions=null),ot.flags=$.flags&14680064,ot.childLanes=$.childLanes,ot.lanes=$.lanes,ot.child=$.child,ot.memoizedProps=$.memoizedProps,ot.memoizedState=$.memoizedState,ot.updateQueue=$.updateQueue,et=$.dependencies,ot.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext},ot.sibling=$.sibling,ot.index=$.index,ot.ref=$.ref,ot}function Rg($,et,ot,ct,st,e){var It=2;if(ct=$,typeof $=="function")aj($)&&(It=1);else if(typeof $=="string")It=5;else e:switch($){case ya:return Tg(ot.children,st,e,et);case za:It=8,st|=8;break;case Aa:return $=Bg(12,ot,et,st|2),$.elementType=Aa,$.lanes=e,$;case Ea:return $=Bg(13,ot,et,st),$.elementType=Ea,$.lanes=e,$;case Fa:return $=Bg(19,ot,et,st),$.elementType=Fa,$.lanes=e,$;case Ia:return pj(ot,st,e,et);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case Ba:It=10;break e;case Ca:It=9;break e;case Da:It=11;break e;case Ga:It=14;break e;case Ha:It=16,ct=null;break e}throw Error(p(130,$==null?$:typeof $,""))}return et=Bg(It,ot,et,st),et.elementType=$,et.type=ct,et.lanes=e,et}function Tg($,et,ot,ct){return $=Bg(7,$,ct,et),$.lanes=ot,$}function pj($,et,ot,ct){return $=Bg(22,$,ct,et),$.elementType=Ia,$.lanes=ot,$.stateNode={isHidden:!1},$}function Qg($,et,ot){return $=Bg(6,$,null,et),$.lanes=ot,$}function Sg($,et,ot){return et=Bg(4,$.children!==null?$.children:[],$.key,et),et.lanes=ot,et.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},et}function al($,et,ot,ct,st){this.tag=et,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ct,this.onRecoverableError=st,this.mutableSourceEagerHydrationData=null}function bl($,et,ot,ct,st,e,It,St,Gt){return $=new al($,et,ot,St,Gt),et===1?(et=1,e===!0&&(et|=8)):et=0,e=Bg(3,null,null,et),$.current=e,e.stateNode=$,e.memoizedState={element:ct,isDehydrated:ot,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(e),$}function cl($,et,ot){var ct=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ct==null?null:""+ct,children:$,containerInfo:et,implementation:ot}}function dl($){if(!$)return Vf;$=$._reactInternals;e:{if(Vb($)!==$||$.tag!==1)throw Error(p(170));var et=$;do{switch(et.tag){case 3:et=et.stateNode.context;break e;case 1:if(Zf(et.type)){et=et.stateNode.__reactInternalMemoizedMergedChildContext;break e}}et=et.return}while(et!==null);throw Error(p(171))}if($.tag===1){var ot=$.type;if(Zf(ot))return bg($,ot,et)}return et}function el($,et,ot,ct,st,e,It,St,Gt){return $=bl(ot,ct,!0,$,st,e,It,St,Gt),$.context=dl(null),ot=$.current,ct=R(),st=yi(ot),e=mh(ct,st),e.callback=et??null,nh(ot,e,st),$.current.lanes=st,Ac($,st,ct),Dk($,ct),$}function fl($,et,ot,ct){var st=et.current,e=R(),It=yi(st);return ot=dl(ot),et.context===null?et.context=ot:et.pendingContext=ot,et=mh(e,It),et.payload={element:$},ct=ct===void 0?null:ct,ct!==null&&(et.callback=ct),$=nh(st,et,It),$!==null&&(gi($,st,It,e),oh($,st,It)),It}function gl($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return $.child.stateNode;default:return $.child.stateNode}}function hl($,et){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var ot=$.retryLane;$.retryLane=ot!==0&&ot<et?ot:et}}function il($,et){hl($,et),($=$.alternate)&&hl($,et)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function($){console.error($)};function ll($){this._internalRoot=$}ml.prototype.render=ll.prototype.render=function($){var et=this._internalRoot;if(et===null)throw Error(p(409));fl($,et,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var $=this._internalRoot;if($!==null){this._internalRoot=null;var et=$.containerInfo;Rk(function(){fl(null,$,null,null)}),et[uf]=null}};function ml($){this._internalRoot=$}ml.prototype.unstable_scheduleHydration=function($){if($){var et=Hc();$={blockedOn:null,target:$,priority:et};for(var ot=0;ot<Qc.length&&et!==0&&et<Qc[ot].priority;ot++);Qc.splice(ot,0,$),ot===0&&Vc($)}};function nl($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)}function ol($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11&&($.nodeType!==8||$.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql($,et,ot,ct,st){if(st){if(typeof ct=="function"){var e=ct;ct=function(){var vt=gl(It);e.call(vt)}}var It=el(et,ct,$,0,null,!1,!1,"",pl);return $._reactRootContainer=It,$[uf]=It.current,sf($.nodeType===8?$.parentNode:$),Rk(),It}for(;st=$.lastChild;)$.removeChild(st);if(typeof ct=="function"){var St=ct;ct=function(){var vt=gl(Gt);St.call(vt)}}var Gt=bl($,0,!1,null,null,!1,!1,"",pl);return $._reactRootContainer=Gt,$[uf]=Gt.current,sf($.nodeType===8?$.parentNode:$),Rk(function(){fl(et,Gt,ot,ct)}),Gt}function rl($,et,ot,ct,st){var e=ot._reactRootContainer;if(e){var It=e;if(typeof st=="function"){var St=st;st=function(){var Gt=gl(It);St.call(Gt)}}fl(et,It,$,st)}else It=ql(ot,et,$,st,ct);return gl(It)}Ec=function($){switch($.tag){case 3:var et=$.stateNode;if(et.current.memoizedState.isDehydrated){var ot=tc(et.pendingLanes);ot!==0&&(Cc(et,ot|1),Dk(et,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var ct=ih($,1);if(ct!==null){var st=R();gi(ct,$,1,st)}}),il($,1)}};Fc=function($){if($.tag===13){var et=ih($,134217728);if(et!==null){var ot=R();gi(et,$,134217728,ot)}il($,134217728)}};Gc=function($){if($.tag===13){var et=yi($),ot=ih($,et);if(ot!==null){var ct=R();gi(ot,$,et,ct)}il($,et)}};Hc=function(){return C};Ic=function($,et){var ot=C;try{return C=$,et()}finally{C=ot}};yb=function($,et,ot){switch(et){case"input":if(bb($,ot),et=ot.name,ot.type==="radio"&&et!=null){for(ot=$;ot.parentNode;)ot=ot.parentNode;for(ot=ot.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<ot.length;et++){var ct=ot[et];if(ct!==$&&ct.form===$.form){var st=Db(ct);if(!st)throw Error(p(90));Wa(ct),bb(ct,st)}}}break;case"textarea":ib($,ot);break;case"select":et=ot.value,et!=null&&fb($,!!ot.multiple,et,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function($){return $=Zb($),$===null?null:$.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function($,et){var ot=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(et))throw Error(p(200));return cl($,et,null,ot)};reactDom_production_min.createRoot=function($,et){if(!nl($))throw Error(p(299));var ot=!1,ct="",st=kl;return et!=null&&(et.unstable_strictMode===!0&&(ot=!0),et.identifierPrefix!==void 0&&(ct=et.identifierPrefix),et.onRecoverableError!==void 0&&(st=et.onRecoverableError)),et=bl($,1,!1,null,null,ot,!1,ct,st),$[uf]=et.current,sf($.nodeType===8?$.parentNode:$),new ll(et)};reactDom_production_min.findDOMNode=function($){if($==null)return null;if($.nodeType===1)return $;var et=$._reactInternals;if(et===void 0)throw typeof $.render=="function"?Error(p(188)):($=Object.keys($).join(","),Error(p(268,$)));return $=Zb(et),$=$===null?null:$.stateNode,$};reactDom_production_min.flushSync=function($){return Rk($)};reactDom_production_min.hydrate=function($,et,ot){if(!ol(et))throw Error(p(200));return rl(null,$,et,!0,ot)};reactDom_production_min.hydrateRoot=function($,et,ot){if(!nl($))throw Error(p(405));var ct=ot!=null&&ot.hydratedSources||null,st=!1,e="",It=kl;if(ot!=null&&(ot.unstable_strictMode===!0&&(st=!0),ot.identifierPrefix!==void 0&&(e=ot.identifierPrefix),ot.onRecoverableError!==void 0&&(It=ot.onRecoverableError)),et=el(et,null,$,1,ot??null,st,!1,e,It),$[uf]=et.current,sf($),ct)for($=0;$<ct.length;$++)ot=ct[$],st=ot._getVersion,st=st(ot._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[ot,st]:et.mutableSourceEagerHydrationData.push(ot,st);return new ml(et)};reactDom_production_min.render=function($,et,ot){if(!ol(et))throw Error(p(200));return rl(null,$,et,!1,ot)};reactDom_production_min.unmountComponentAtNode=function($){if(!ol($))throw Error(p(40));return $._reactRootContainer?(Rk(function(){rl(null,null,$,!1,function(){$._reactRootContainer=null,$[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function($,et,ot,ct){if(!ol(ot))throw Error(p(200));if($==null||$._reactInternals===void 0)throw Error(p(38));return rl($,et,ot,!1,ct)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch($){console.error($)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;var aframeMaster={exports:{}};(function($,et){var ot={};(function(st,e){$.exports=e()})(self,()=>(()=>{var ct={"./node_modules/an-array/index.js":St=>{var Gt=Object.prototype.toString;St.exports=vt;function vt(it){return it.BYTES_PER_ELEMENT&&Gt.call(it.buffer)==="[object ArrayBuffer]"||Array.isArray(it)}},"./node_modules/as-number/index.js":St=>{St.exports=function(vt,it){return typeof vt=="number"?vt:typeof it=="number"?it:0}},"./node_modules/base64-js/index.js":(St,Gt)=>{Gt.byteLength=Rt,Gt.toByteArray=mt,Gt.fromByteArray=xt;for(var vt=[],it=[],dt=typeof Uint8Array<"u"?Uint8Array:Array,bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tt=0,Et=bt.length;Tt<Et;++Tt)vt[Tt]=bt[Tt],it[bt.charCodeAt(Tt)]=Tt;it[45]=62,it[95]=63;function Mt(Dt){var Ht=Dt.length;if(Ht%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Ut=Dt.indexOf("=");Ut===-1&&(Ut=Ht);var Xt=Ut===Ht?0:4-Ut%4;return[Ut,Xt]}function Rt(Dt){var Ht=Mt(Dt),Ut=Ht[0],Xt=Ht[1];return(Ut+Xt)*3/4-Xt}function pt(Dt,Ht,Ut){return(Ht+Ut)*3/4-Ut}function mt(Dt){var Ht,Ut=Mt(Dt),Xt=Ut[0],Qt=Ut[1],tn=new dt(pt(Dt,Xt,Qt)),on=0,vn=Qt>0?Xt-4:Xt,fn;for(fn=0;fn<vn;fn+=4)Ht=it[Dt.charCodeAt(fn)]<<18|it[Dt.charCodeAt(fn+1)]<<12|it[Dt.charCodeAt(fn+2)]<<6|it[Dt.charCodeAt(fn+3)],tn[on++]=Ht>>16&255,tn[on++]=Ht>>8&255,tn[on++]=Ht&255;return Qt===2&&(Ht=it[Dt.charCodeAt(fn)]<<2|it[Dt.charCodeAt(fn+1)]>>4,tn[on++]=Ht&255),Qt===1&&(Ht=it[Dt.charCodeAt(fn)]<<10|it[Dt.charCodeAt(fn+1)]<<4|it[Dt.charCodeAt(fn+2)]>>2,tn[on++]=Ht>>8&255,tn[on++]=Ht&255),tn}function gt(Dt){return vt[Dt>>18&63]+vt[Dt>>12&63]+vt[Dt>>6&63]+vt[Dt&63]}function Ct(Dt,Ht,Ut){for(var Xt,Qt=[],tn=Ht;tn<Ut;tn+=3)Xt=(Dt[tn]<<16&16711680)+(Dt[tn+1]<<8&65280)+(Dt[tn+2]&255),Qt.push(gt(Xt));return Qt.join("")}function xt(Dt){for(var Ht,Ut=Dt.length,Xt=Ut%3,Qt=[],tn=16383,on=0,vn=Ut-Xt;on<vn;on+=tn)Qt.push(Ct(Dt,on,on+tn>vn?vn:on+tn));return Xt===1?(Ht=Dt[Ut-1],Qt.push(vt[Ht>>2]+vt[Ht<<4&63]+"==")):Xt===2&&(Ht=(Dt[Ut-2]<<8)+Dt[Ut-1],Qt.push(vt[Ht>>10]+vt[Ht>>4&63]+vt[Ht<<2&63]+"=")),Qt.join("")}},"./node_modules/buffer-equal/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/buffer/index.js").Buffer;St.exports=function(dt,bt){if(it.isBuffer(dt)&&it.isBuffer(bt)){if(typeof dt.equals=="function")return dt.equals(bt);if(dt.length!==bt.length)return!1;for(var Tt=0;Tt<dt.length;Tt++)if(dt[Tt]!==bt[Tt])return!1;return!0}}},"./node_modules/buffer/index.js":(St,Gt,vt)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const it=vt("./node_modules/base64-js/index.js"),dt=vt("./node_modules/ieee754/index.js"),bt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Gt.Buffer=Rt,Gt.SlowBuffer=tn,Gt.INSPECT_MAX_BYTES=50;const Tt=2147483647;Gt.kMaxLength=Tt,Rt.TYPED_ARRAY_SUPPORT=Et(),!Rt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Et(){try{const un=new Uint8Array(1),Wt={foo:function(){return 42}};return Object.setPrototypeOf(Wt,Uint8Array.prototype),Object.setPrototypeOf(un,Wt),un.foo()===42}catch{return!1}}Object.defineProperty(Rt.prototype,"parent",{enumerable:!0,get:function(){if(Rt.isBuffer(this))return this.buffer}}),Object.defineProperty(Rt.prototype,"offset",{enumerable:!0,get:function(){if(Rt.isBuffer(this))return this.byteOffset}});function Mt(un){if(un>Tt)throw new RangeError('The value "'+un+'" is invalid for option "size"');const Wt=new Uint8Array(un);return Object.setPrototypeOf(Wt,Rt.prototype),Wt}function Rt(un,Wt,jt){if(typeof un=="number"){if(typeof Wt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ct(un)}return pt(un,Wt,jt)}Rt.poolSize=8192;function pt(un,Wt,jt){if(typeof un=="string")return xt(un,Wt);if(ArrayBuffer.isView(un))return Ht(un);if(un==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof un);if(bn(un,ArrayBuffer)||un&&bn(un.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(bn(un,SharedArrayBuffer)||un&&bn(un.buffer,SharedArrayBuffer)))return Ut(un,Wt,jt);if(typeof un=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const yn=un.valueOf&&un.valueOf();if(yn!=null&&yn!==un)return Rt.from(yn,Wt,jt);const Rn=Xt(un);if(Rn)return Rn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof un[Symbol.toPrimitive]=="function")return Rt.from(un[Symbol.toPrimitive]("string"),Wt,jt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof un)}Rt.from=function(un,Wt,jt){return pt(un,Wt,jt)},Object.setPrototypeOf(Rt.prototype,Uint8Array.prototype),Object.setPrototypeOf(Rt,Uint8Array);function mt(un){if(typeof un!="number")throw new TypeError('"size" argument must be of type number');if(un<0)throw new RangeError('The value "'+un+'" is invalid for option "size"')}function gt(un,Wt,jt){return mt(un),un<=0?Mt(un):Wt!==void 0?typeof jt=="string"?Mt(un).fill(Wt,jt):Mt(un).fill(Wt):Mt(un)}Rt.alloc=function(un,Wt,jt){return gt(un,Wt,jt)};function Ct(un){return mt(un),Mt(un<0?0:Qt(un)|0)}Rt.allocUnsafe=function(un){return Ct(un)},Rt.allocUnsafeSlow=function(un){return Ct(un)};function xt(un,Wt){if((typeof Wt!="string"||Wt==="")&&(Wt="utf8"),!Rt.isEncoding(Wt))throw new TypeError("Unknown encoding: "+Wt);const jt=on(un,Wt)|0;let yn=Mt(jt);const Rn=yn.write(un,Wt);return Rn!==jt&&(yn=yn.slice(0,Rn)),yn}function Dt(un){const Wt=un.length<0?0:Qt(un.length)|0,jt=Mt(Wt);for(let yn=0;yn<Wt;yn+=1)jt[yn]=un[yn]&255;return jt}function Ht(un){if(bn(un,Uint8Array)){const Wt=new Uint8Array(un);return Ut(Wt.buffer,Wt.byteOffset,Wt.byteLength)}return Dt(un)}function Ut(un,Wt,jt){if(Wt<0||un.byteLength<Wt)throw new RangeError('"offset" is outside of buffer bounds');if(un.byteLength<Wt+(jt||0))throw new RangeError('"length" is outside of buffer bounds');let yn;return Wt===void 0&&jt===void 0?yn=new Uint8Array(un):jt===void 0?yn=new Uint8Array(un,Wt):yn=new Uint8Array(un,Wt,jt),Object.setPrototypeOf(yn,Rt.prototype),yn}function Xt(un){if(Rt.isBuffer(un)){const Wt=Qt(un.length)|0,jt=Mt(Wt);return jt.length===0||un.copy(jt,0,0,Wt),jt}if(un.length!==void 0)return typeof un.length!="number"||Hn(un.length)?Mt(0):Dt(un);if(un.type==="Buffer"&&Array.isArray(un.data))return Dt(un.data)}function Qt(un){if(un>=Tt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Tt.toString(16)+" bytes");return un|0}function tn(un){return+un!=un&&(un=0),Rt.alloc(+un)}Rt.isBuffer=function(Wt){return Wt!=null&&Wt._isBuffer===!0&&Wt!==Rt.prototype},Rt.compare=function(Wt,jt){if(bn(Wt,Uint8Array)&&(Wt=Rt.from(Wt,Wt.offset,Wt.byteLength)),bn(jt,Uint8Array)&&(jt=Rt.from(jt,jt.offset,jt.byteLength)),!Rt.isBuffer(Wt)||!Rt.isBuffer(jt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Wt===jt)return 0;let yn=Wt.length,Rn=jt.length;for(let Wn=0,rr=Math.min(yn,Rn);Wn<rr;++Wn)if(Wt[Wn]!==jt[Wn]){yn=Wt[Wn],Rn=jt[Wn];break}return yn<Rn?-1:Rn<yn?1:0},Rt.isEncoding=function(Wt){switch(String(Wt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Rt.concat=function(Wt,jt){if(!Array.isArray(Wt))throw new TypeError('"list" argument must be an Array of Buffers');if(Wt.length===0)return Rt.alloc(0);let yn;if(jt===void 0)for(jt=0,yn=0;yn<Wt.length;++yn)jt+=Wt[yn].length;const Rn=Rt.allocUnsafe(jt);let Wn=0;for(yn=0;yn<Wt.length;++yn){let rr=Wt[yn];if(bn(rr,Uint8Array))Wn+rr.length>Rn.length?(Rt.isBuffer(rr)||(rr=Rt.from(rr)),rr.copy(Rn,Wn)):Uint8Array.prototype.set.call(Rn,rr,Wn);else if(Rt.isBuffer(rr))rr.copy(Rn,Wn);else throw new TypeError('"list" argument must be an Array of Buffers');Wn+=rr.length}return Rn};function on(un,Wt){if(Rt.isBuffer(un))return un.length;if(ArrayBuffer.isView(un)||bn(un,ArrayBuffer))return un.byteLength;if(typeof un!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof un);const jt=un.length,yn=arguments.length>2&&arguments[2]===!0;if(!yn&&jt===0)return 0;let Rn=!1;for(;;)switch(Wt){case"ascii":case"latin1":case"binary":return jt;case"utf8":case"utf-8":return Pl(un).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jt*2;case"hex":return jt>>>1;case"base64":return es(un).length;default:if(Rn)return yn?-1:Pl(un).length;Wt=(""+Wt).toLowerCase(),Rn=!0}}Rt.byteLength=on;function vn(un,Wt,jt){let yn=!1;if((Wt===void 0||Wt<0)&&(Wt=0),Wt>this.length||((jt===void 0||jt>this.length)&&(jt=this.length),jt<=0)||(jt>>>=0,Wt>>>=0,jt<=Wt))return"";for(un||(un="utf8");;)switch(un){case"hex":return Tr(this,Wt,jt);case"utf8":case"utf-8":return Vn(this,Wt,jt);case"ascii":return hr(this,Wt,jt);case"latin1":case"binary":return Lr(this,Wt,jt);case"base64":return In(this,Wt,jt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return As(this,Wt,jt);default:if(yn)throw new TypeError("Unknown encoding: "+un);un=(un+"").toLowerCase(),yn=!0}}Rt.prototype._isBuffer=!0;function fn(un,Wt,jt){const yn=un[Wt];un[Wt]=un[jt],un[jt]=yn}Rt.prototype.swap16=function(){const Wt=this.length;if(Wt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let jt=0;jt<Wt;jt+=2)fn(this,jt,jt+1);return this},Rt.prototype.swap32=function(){const Wt=this.length;if(Wt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let jt=0;jt<Wt;jt+=4)fn(this,jt,jt+3),fn(this,jt+1,jt+2);return this},Rt.prototype.swap64=function(){const Wt=this.length;if(Wt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let jt=0;jt<Wt;jt+=8)fn(this,jt,jt+7),fn(this,jt+1,jt+6),fn(this,jt+2,jt+5),fn(this,jt+3,jt+4);return this},Rt.prototype.toString=function(){const Wt=this.length;return Wt===0?"":arguments.length===0?Vn(this,0,Wt):vn.apply(this,arguments)},Rt.prototype.toLocaleString=Rt.prototype.toString,Rt.prototype.equals=function(Wt){if(!Rt.isBuffer(Wt))throw new TypeError("Argument must be a Buffer");return this===Wt?!0:Rt.compare(this,Wt)===0},Rt.prototype.inspect=function(){let Wt="";const jt=Gt.INSPECT_MAX_BYTES;return Wt=this.toString("hex",0,jt).replace(/(.{2})/g,"$1 ").trim(),this.length>jt&&(Wt+=" ... "),"<Buffer "+Wt+">"},bt&&(Rt.prototype[bt]=Rt.prototype.inspect),Rt.prototype.compare=function(Wt,jt,yn,Rn,Wn){if(bn(Wt,Uint8Array)&&(Wt=Rt.from(Wt,Wt.offset,Wt.byteLength)),!Rt.isBuffer(Wt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Wt);if(jt===void 0&&(jt=0),yn===void 0&&(yn=Wt?Wt.length:0),Rn===void 0&&(Rn=0),Wn===void 0&&(Wn=this.length),jt<0||yn>Wt.length||Rn<0||Wn>this.length)throw new RangeError("out of range index");if(Rn>=Wn&&jt>=yn)return 0;if(Rn>=Wn)return-1;if(jt>=yn)return 1;if(jt>>>=0,yn>>>=0,Rn>>>=0,Wn>>>=0,this===Wt)return 0;let rr=Wn-Rn,ns=yn-jt;const ps=Math.min(rr,ns),os=this.slice(Rn,Wn),as=Wt.slice(jt,yn);for(let Cs=0;Cs<ps;++Cs)if(os[Cs]!==as[Cs]){rr=os[Cs],ns=as[Cs];break}return rr<ns?-1:ns<rr?1:0};function Cn(un,Wt,jt,yn,Rn){if(un.length===0)return-1;if(typeof jt=="string"?(yn=jt,jt=0):jt>2147483647?jt=2147483647:jt<-2147483648&&(jt=-2147483648),jt=+jt,Hn(jt)&&(jt=Rn?0:un.length-1),jt<0&&(jt=un.length+jt),jt>=un.length){if(Rn)return-1;jt=un.length-1}else if(jt<0)if(Rn)jt=0;else return-1;if(typeof Wt=="string"&&(Wt=Rt.from(Wt,yn)),Rt.isBuffer(Wt))return Wt.length===0?-1:dn(un,Wt,jt,yn,Rn);if(typeof Wt=="number")return Wt=Wt&255,typeof Uint8Array.prototype.indexOf=="function"?Rn?Uint8Array.prototype.indexOf.call(un,Wt,jt):Uint8Array.prototype.lastIndexOf.call(un,Wt,jt):dn(un,[Wt],jt,yn,Rn);throw new TypeError("val must be string, number or Buffer")}function dn(un,Wt,jt,yn,Rn){let Wn=1,rr=un.length,ns=Wt.length;if(yn!==void 0&&(yn=String(yn).toLowerCase(),yn==="ucs2"||yn==="ucs-2"||yn==="utf16le"||yn==="utf-16le")){if(un.length<2||Wt.length<2)return-1;Wn=2,rr/=2,ns/=2,jt/=2}function ps(as,Cs){return Wn===1?as[Cs]:as.readUInt16BE(Cs*Wn)}let os;if(Rn){let as=-1;for(os=jt;os<rr;os++)if(ps(un,os)===ps(Wt,as===-1?0:os-as)){if(as===-1&&(as=os),os-as+1===ns)return as*Wn}else as!==-1&&(os-=os-as),as=-1}else for(jt+ns>rr&&(jt=rr-ns),os=jt;os>=0;os--){let as=!0;for(let Cs=0;Cs<ns;Cs++)if(ps(un,os+Cs)!==ps(Wt,Cs)){as=!1;break}if(as)return os}return-1}Rt.prototype.includes=function(Wt,jt,yn){return this.indexOf(Wt,jt,yn)!==-1},Rt.prototype.indexOf=function(Wt,jt,yn){return Cn(this,Wt,jt,yn,!0)},Rt.prototype.lastIndexOf=function(Wt,jt,yn){return Cn(this,Wt,jt,yn,!1)};function An(un,Wt,jt,yn){jt=Number(jt)||0;const Rn=un.length-jt;yn?(yn=Number(yn),yn>Rn&&(yn=Rn)):yn=Rn;const Wn=Wt.length;yn>Wn/2&&(yn=Wn/2);let rr;for(rr=0;rr<yn;++rr){const ns=parseInt(Wt.substr(rr*2,2),16);if(Hn(ns))return rr;un[jt+rr]=ns}return rr}function nn(un,Wt,jt,yn){return Mn(Pl(Wt,un.length-jt),un,jt,yn)}function Zt(un,Wt,jt,yn){return Mn(na(Wt),un,jt,yn)}function mn(un,Wt,jt,yn){return Mn(es(Wt),un,jt,yn)}function gn(un,Wt,jt,yn){return Mn(p0(Wt,un.length-jt),un,jt,yn)}Rt.prototype.write=function(Wt,jt,yn,Rn){if(jt===void 0)Rn="utf8",yn=this.length,jt=0;else if(yn===void 0&&typeof jt=="string")Rn=jt,yn=this.length,jt=0;else if(isFinite(jt))jt=jt>>>0,isFinite(yn)?(yn=yn>>>0,Rn===void 0&&(Rn="utf8")):(Rn=yn,yn=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Wn=this.length-jt;if((yn===void 0||yn>Wn)&&(yn=Wn),Wt.length>0&&(yn<0||jt<0)||jt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Rn||(Rn="utf8");let rr=!1;for(;;)switch(Rn){case"hex":return An(this,Wt,jt,yn);case"utf8":case"utf-8":return nn(this,Wt,jt,yn);case"ascii":case"latin1":case"binary":return Zt(this,Wt,jt,yn);case"base64":return mn(this,Wt,jt,yn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,Wt,jt,yn);default:if(rr)throw new TypeError("Unknown encoding: "+Rn);Rn=(""+Rn).toLowerCase(),rr=!0}},Rt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function In(un,Wt,jt){return Wt===0&&jt===un.length?it.fromByteArray(un):it.fromByteArray(un.slice(Wt,jt))}function Vn(un,Wt,jt){jt=Math.min(un.length,jt);const yn=[];let Rn=Wt;for(;Rn<jt;){const Wn=un[Rn];let rr=null,ns=Wn>239?4:Wn>223?3:Wn>191?2:1;if(Rn+ns<=jt){let ps,os,as,Cs;switch(ns){case 1:Wn<128&&(rr=Wn);break;case 2:ps=un[Rn+1],(ps&192)===128&&(Cs=(Wn&31)<<6|ps&63,Cs>127&&(rr=Cs));break;case 3:ps=un[Rn+1],os=un[Rn+2],(ps&192)===128&&(os&192)===128&&(Cs=(Wn&15)<<12|(ps&63)<<6|os&63,Cs>2047&&(Cs<55296||Cs>57343)&&(rr=Cs));break;case 4:ps=un[Rn+1],os=un[Rn+2],as=un[Rn+3],(ps&192)===128&&(os&192)===128&&(as&192)===128&&(Cs=(Wn&15)<<18|(ps&63)<<12|(os&63)<<6|as&63,Cs>65535&&Cs<1114112&&(rr=Cs))}}rr===null?(rr=65533,ns=1):rr>65535&&(rr-=65536,yn.push(rr>>>10&1023|55296),rr=56320|rr&1023),yn.push(rr),Rn+=ns}return lr(yn)}const Zn=4096;function lr(un){const Wt=un.length;if(Wt<=Zn)return String.fromCharCode.apply(String,un);let jt="",yn=0;for(;yn<Wt;)jt+=String.fromCharCode.apply(String,un.slice(yn,yn+=Zn));return jt}function hr(un,Wt,jt){let yn="";jt=Math.min(un.length,jt);for(let Rn=Wt;Rn<jt;++Rn)yn+=String.fromCharCode(un[Rn]&127);return yn}function Lr(un,Wt,jt){let yn="";jt=Math.min(un.length,jt);for(let Rn=Wt;Rn<jt;++Rn)yn+=String.fromCharCode(un[Rn]);return yn}function Tr(un,Wt,jt){const yn=un.length;(!Wt||Wt<0)&&(Wt=0),(!jt||jt<0||jt>yn)&&(jt=yn);let Rn="";for(let Wn=Wt;Wn<jt;++Wn)Rn+=Dn[un[Wn]];return Rn}function As(un,Wt,jt){const yn=un.slice(Wt,jt);let Rn="";for(let Wn=0;Wn<yn.length-1;Wn+=2)Rn+=String.fromCharCode(yn[Wn]+yn[Wn+1]*256);return Rn}Rt.prototype.slice=function(Wt,jt){const yn=this.length;Wt=~~Wt,jt=jt===void 0?yn:~~jt,Wt<0?(Wt+=yn,Wt<0&&(Wt=0)):Wt>yn&&(Wt=yn),jt<0?(jt+=yn,jt<0&&(jt=0)):jt>yn&&(jt=yn),jt<Wt&&(jt=Wt);const Rn=this.subarray(Wt,jt);return Object.setPrototypeOf(Rn,Rt.prototype),Rn};function Yr(un,Wt,jt){if(un%1!==0||un<0)throw new RangeError("offset is not uint");if(un+Wt>jt)throw new RangeError("Trying to access beyond buffer length")}Rt.prototype.readUintLE=Rt.prototype.readUIntLE=function(Wt,jt,yn){Wt=Wt>>>0,jt=jt>>>0,yn||Yr(Wt,jt,this.length);let Rn=this[Wt],Wn=1,rr=0;for(;++rr<jt&&(Wn*=256);)Rn+=this[Wt+rr]*Wn;return Rn},Rt.prototype.readUintBE=Rt.prototype.readUIntBE=function(Wt,jt,yn){Wt=Wt>>>0,jt=jt>>>0,yn||Yr(Wt,jt,this.length);let Rn=this[Wt+--jt],Wn=1;for(;jt>0&&(Wn*=256);)Rn+=this[Wt+--jt]*Wn;return Rn},Rt.prototype.readUint8=Rt.prototype.readUInt8=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,1,this.length),this[Wt]},Rt.prototype.readUint16LE=Rt.prototype.readUInt16LE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,2,this.length),this[Wt]|this[Wt+1]<<8},Rt.prototype.readUint16BE=Rt.prototype.readUInt16BE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,2,this.length),this[Wt]<<8|this[Wt+1]},Rt.prototype.readUint32LE=Rt.prototype.readUInt32LE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),(this[Wt]|this[Wt+1]<<8|this[Wt+2]<<16)+this[Wt+3]*16777216},Rt.prototype.readUint32BE=Rt.prototype.readUInt32BE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),this[Wt]*16777216+(this[Wt+1]<<16|this[Wt+2]<<8|this[Wt+3])},Rt.prototype.readBigUInt64LE=Un(function(Wt){Wt=Wt>>>0,Ho(Wt,"offset");const jt=this[Wt],yn=this[Wt+7];(jt===void 0||yn===void 0)&&oo(Wt,this.length-8);const Rn=jt+this[++Wt]*2**8+this[++Wt]*2**16+this[++Wt]*2**24,Wn=this[++Wt]+this[++Wt]*2**8+this[++Wt]*2**16+yn*2**24;return BigInt(Rn)+(BigInt(Wn)<<BigInt(32))}),Rt.prototype.readBigUInt64BE=Un(function(Wt){Wt=Wt>>>0,Ho(Wt,"offset");const jt=this[Wt],yn=this[Wt+7];(jt===void 0||yn===void 0)&&oo(Wt,this.length-8);const Rn=jt*2**24+this[++Wt]*2**16+this[++Wt]*2**8+this[++Wt],Wn=this[++Wt]*2**24+this[++Wt]*2**16+this[++Wt]*2**8+yn;return(BigInt(Rn)<<BigInt(32))+BigInt(Wn)}),Rt.prototype.readIntLE=function(Wt,jt,yn){Wt=Wt>>>0,jt=jt>>>0,yn||Yr(Wt,jt,this.length);let Rn=this[Wt],Wn=1,rr=0;for(;++rr<jt&&(Wn*=256);)Rn+=this[Wt+rr]*Wn;return Wn*=128,Rn>=Wn&&(Rn-=Math.pow(2,8*jt)),Rn},Rt.prototype.readIntBE=function(Wt,jt,yn){Wt=Wt>>>0,jt=jt>>>0,yn||Yr(Wt,jt,this.length);let Rn=jt,Wn=1,rr=this[Wt+--Rn];for(;Rn>0&&(Wn*=256);)rr+=this[Wt+--Rn]*Wn;return Wn*=128,rr>=Wn&&(rr-=Math.pow(2,8*jt)),rr},Rt.prototype.readInt8=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,1,this.length),this[Wt]&128?(255-this[Wt]+1)*-1:this[Wt]},Rt.prototype.readInt16LE=function(Wt,jt){Wt=Wt>>>0,jt||Yr(Wt,2,this.length);const yn=this[Wt]|this[Wt+1]<<8;return yn&32768?yn|4294901760:yn},Rt.prototype.readInt16BE=function(Wt,jt){Wt=Wt>>>0,jt||Yr(Wt,2,this.length);const yn=this[Wt+1]|this[Wt]<<8;return yn&32768?yn|4294901760:yn},Rt.prototype.readInt32LE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),this[Wt]|this[Wt+1]<<8|this[Wt+2]<<16|this[Wt+3]<<24},Rt.prototype.readInt32BE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),this[Wt]<<24|this[Wt+1]<<16|this[Wt+2]<<8|this[Wt+3]},Rt.prototype.readBigInt64LE=Un(function(Wt){Wt=Wt>>>0,Ho(Wt,"offset");const jt=this[Wt],yn=this[Wt+7];(jt===void 0||yn===void 0)&&oo(Wt,this.length-8);const Rn=this[Wt+4]+this[Wt+5]*2**8+this[Wt+6]*2**16+(yn<<24);return(BigInt(Rn)<<BigInt(32))+BigInt(jt+this[++Wt]*256+this[++Wt]*65536+this[++Wt]*16777216)}),Rt.prototype.readBigInt64BE=Un(function(Wt){Wt=Wt>>>0,Ho(Wt,"offset");const jt=this[Wt],yn=this[Wt+7];(jt===void 0||yn===void 0)&&oo(Wt,this.length-8);const Rn=(jt<<24)+this[++Wt]*2**16+this[++Wt]*2**8+this[++Wt];return(BigInt(Rn)<<BigInt(32))+BigInt(this[++Wt]*16777216+this[++Wt]*65536+this[++Wt]*256+yn)}),Rt.prototype.readFloatLE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),dt.read(this,Wt,!0,23,4)},Rt.prototype.readFloatBE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,4,this.length),dt.read(this,Wt,!1,23,4)},Rt.prototype.readDoubleLE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,8,this.length),dt.read(this,Wt,!0,52,8)},Rt.prototype.readDoubleBE=function(Wt,jt){return Wt=Wt>>>0,jt||Yr(Wt,8,this.length),dt.read(this,Wt,!1,52,8)};function ms(un,Wt,jt,yn,Rn,Wn){if(!Rt.isBuffer(un))throw new TypeError('"buffer" argument must be a Buffer instance');if(Wt>Rn||Wt<Wn)throw new RangeError('"value" argument is out of bounds');if(jt+yn>un.length)throw new RangeError("Index out of range")}Rt.prototype.writeUintLE=Rt.prototype.writeUIntLE=function(Wt,jt,yn,Rn){if(Wt=+Wt,jt=jt>>>0,yn=yn>>>0,!Rn){const ns=Math.pow(2,8*yn)-1;ms(this,Wt,jt,yn,ns,0)}let Wn=1,rr=0;for(this[jt]=Wt&255;++rr<yn&&(Wn*=256);)this[jt+rr]=Wt/Wn&255;return jt+yn},Rt.prototype.writeUintBE=Rt.prototype.writeUIntBE=function(Wt,jt,yn,Rn){if(Wt=+Wt,jt=jt>>>0,yn=yn>>>0,!Rn){const ns=Math.pow(2,8*yn)-1;ms(this,Wt,jt,yn,ns,0)}let Wn=yn-1,rr=1;for(this[jt+Wn]=Wt&255;--Wn>=0&&(rr*=256);)this[jt+Wn]=Wt/rr&255;return jt+yn},Rt.prototype.writeUint8=Rt.prototype.writeUInt8=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,1,255,0),this[jt]=Wt&255,jt+1},Rt.prototype.writeUint16LE=Rt.prototype.writeUInt16LE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,2,65535,0),this[jt]=Wt&255,this[jt+1]=Wt>>>8,jt+2},Rt.prototype.writeUint16BE=Rt.prototype.writeUInt16BE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,2,65535,0),this[jt]=Wt>>>8,this[jt+1]=Wt&255,jt+2},Rt.prototype.writeUint32LE=Rt.prototype.writeUInt32LE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,4,4294967295,0),this[jt+3]=Wt>>>24,this[jt+2]=Wt>>>16,this[jt+1]=Wt>>>8,this[jt]=Wt&255,jt+4},Rt.prototype.writeUint32BE=Rt.prototype.writeUInt32BE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,4,4294967295,0),this[jt]=Wt>>>24,this[jt+1]=Wt>>>16,this[jt+2]=Wt>>>8,this[jt+3]=Wt&255,jt+4};function Rs(un,Wt,jt,yn,Rn){j0(Wt,yn,Rn,un,jt,7);let Wn=Number(Wt&BigInt(4294967295));un[jt++]=Wn,Wn=Wn>>8,un[jt++]=Wn,Wn=Wn>>8,un[jt++]=Wn,Wn=Wn>>8,un[jt++]=Wn;let rr=Number(Wt>>BigInt(32)&BigInt(4294967295));return un[jt++]=rr,rr=rr>>8,un[jt++]=rr,rr=rr>>8,un[jt++]=rr,rr=rr>>8,un[jt++]=rr,jt}function Zs(un,Wt,jt,yn,Rn){j0(Wt,yn,Rn,un,jt,7);let Wn=Number(Wt&BigInt(4294967295));un[jt+7]=Wn,Wn=Wn>>8,un[jt+6]=Wn,Wn=Wn>>8,un[jt+5]=Wn,Wn=Wn>>8,un[jt+4]=Wn;let rr=Number(Wt>>BigInt(32)&BigInt(4294967295));return un[jt+3]=rr,rr=rr>>8,un[jt+2]=rr,rr=rr>>8,un[jt+1]=rr,rr=rr>>8,un[jt]=rr,jt+8}Rt.prototype.writeBigUInt64LE=Un(function(Wt,jt=0){return Rs(this,Wt,jt,BigInt(0),BigInt("0xffffffffffffffff"))}),Rt.prototype.writeBigUInt64BE=Un(function(Wt,jt=0){return Zs(this,Wt,jt,BigInt(0),BigInt("0xffffffffffffffff"))}),Rt.prototype.writeIntLE=function(Wt,jt,yn,Rn){if(Wt=+Wt,jt=jt>>>0,!Rn){const ps=Math.pow(2,8*yn-1);ms(this,Wt,jt,yn,ps-1,-ps)}let Wn=0,rr=1,ns=0;for(this[jt]=Wt&255;++Wn<yn&&(rr*=256);)Wt<0&&ns===0&&this[jt+Wn-1]!==0&&(ns=1),this[jt+Wn]=(Wt/rr>>0)-ns&255;return jt+yn},Rt.prototype.writeIntBE=function(Wt,jt,yn,Rn){if(Wt=+Wt,jt=jt>>>0,!Rn){const ps=Math.pow(2,8*yn-1);ms(this,Wt,jt,yn,ps-1,-ps)}let Wn=yn-1,rr=1,ns=0;for(this[jt+Wn]=Wt&255;--Wn>=0&&(rr*=256);)Wt<0&&ns===0&&this[jt+Wn+1]!==0&&(ns=1),this[jt+Wn]=(Wt/rr>>0)-ns&255;return jt+yn},Rt.prototype.writeInt8=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,1,127,-128),Wt<0&&(Wt=255+Wt+1),this[jt]=Wt&255,jt+1},Rt.prototype.writeInt16LE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,2,32767,-32768),this[jt]=Wt&255,this[jt+1]=Wt>>>8,jt+2},Rt.prototype.writeInt16BE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,2,32767,-32768),this[jt]=Wt>>>8,this[jt+1]=Wt&255,jt+2},Rt.prototype.writeInt32LE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,4,2147483647,-2147483648),this[jt]=Wt&255,this[jt+1]=Wt>>>8,this[jt+2]=Wt>>>16,this[jt+3]=Wt>>>24,jt+4},Rt.prototype.writeInt32BE=function(Wt,jt,yn){return Wt=+Wt,jt=jt>>>0,yn||ms(this,Wt,jt,4,2147483647,-2147483648),Wt<0&&(Wt=4294967295+Wt+1),this[jt]=Wt>>>24,this[jt+1]=Wt>>>16,this[jt+2]=Wt>>>8,this[jt+3]=Wt&255,jt+4},Rt.prototype.writeBigInt64LE=Un(function(Wt,jt=0){return Rs(this,Wt,jt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Rt.prototype.writeBigInt64BE=Un(function(Wt,jt=0){return Zs(this,Wt,jt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ao(un,Wt,jt,yn,Rn,Wn){if(jt+yn>un.length)throw new RangeError("Index out of range");if(jt<0)throw new RangeError("Index out of range")}function go(un,Wt,jt,yn,Rn){return Wt=+Wt,jt=jt>>>0,Rn||ao(un,Wt,jt,4),dt.write(un,Wt,jt,yn,23,4),jt+4}Rt.prototype.writeFloatLE=function(Wt,jt,yn){return go(this,Wt,jt,!0,yn)},Rt.prototype.writeFloatBE=function(Wt,jt,yn){return go(this,Wt,jt,!1,yn)};function ho(un,Wt,jt,yn,Rn){return Wt=+Wt,jt=jt>>>0,Rn||ao(un,Wt,jt,8),dt.write(un,Wt,jt,yn,52,8),jt+8}Rt.prototype.writeDoubleLE=function(Wt,jt,yn){return ho(this,Wt,jt,!0,yn)},Rt.prototype.writeDoubleBE=function(Wt,jt,yn){return ho(this,Wt,jt,!1,yn)},Rt.prototype.copy=function(Wt,jt,yn,Rn){if(!Rt.isBuffer(Wt))throw new TypeError("argument should be a Buffer");if(yn||(yn=0),!Rn&&Rn!==0&&(Rn=this.length),jt>=Wt.length&&(jt=Wt.length),jt||(jt=0),Rn>0&&Rn<yn&&(Rn=yn),Rn===yn||Wt.length===0||this.length===0)return 0;if(jt<0)throw new RangeError("targetStart out of bounds");if(yn<0||yn>=this.length)throw new RangeError("Index out of range");if(Rn<0)throw new RangeError("sourceEnd out of bounds");Rn>this.length&&(Rn=this.length),Wt.length-jt<Rn-yn&&(Rn=Wt.length-jt+yn);const Wn=Rn-yn;return this===Wt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(jt,yn,Rn):Uint8Array.prototype.set.call(Wt,this.subarray(yn,Rn),jt),Wn},Rt.prototype.fill=function(Wt,jt,yn,Rn){if(typeof Wt=="string"){if(typeof jt=="string"?(Rn=jt,jt=0,yn=this.length):typeof yn=="string"&&(Rn=yn,yn=this.length),Rn!==void 0&&typeof Rn!="string")throw new TypeError("encoding must be a string");if(typeof Rn=="string"&&!Rt.isEncoding(Rn))throw new TypeError("Unknown encoding: "+Rn);if(Wt.length===1){const rr=Wt.charCodeAt(0);(Rn==="utf8"&&rr<128||Rn==="latin1")&&(Wt=rr)}}else typeof Wt=="number"?Wt=Wt&255:typeof Wt=="boolean"&&(Wt=Number(Wt));if(jt<0||this.length<jt||this.length<yn)throw new RangeError("Out of range index");if(yn<=jt)return this;jt=jt>>>0,yn=yn===void 0?this.length:yn>>>0,Wt||(Wt=0);let Wn;if(typeof Wt=="number")for(Wn=jt;Wn<yn;++Wn)this[Wn]=Wt;else{const rr=Rt.isBuffer(Wt)?Wt:Rt.from(Wt,Rn),ns=rr.length;if(ns===0)throw new TypeError('The value "'+Wt+'" is invalid for argument "value"');for(Wn=0;Wn<yn-jt;++Wn)this[Wn+jt]=rr[Wn%ns]}return this};const Ys={};function xo(un,Wt,jt){Ys[un]=class extends jt{constructor(){super(),Object.defineProperty(this,"message",{value:Wt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${un}]`,this.stack,delete this.name}get code(){return un}set code(Rn){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Rn,writable:!0})}toString(){return`${this.name} [${un}]: ${this.message}`}}}xo("ERR_BUFFER_OUT_OF_BOUNDS",function(un){return un?`${un} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xo("ERR_INVALID_ARG_TYPE",function(un,Wt){return`The "${un}" argument must be of type number. Received type ${typeof Wt}`},TypeError),xo("ERR_OUT_OF_RANGE",function(un,Wt,jt){let yn=`The value of "${un}" is out of range.`,Rn=jt;return Number.isInteger(jt)&&Math.abs(jt)>4294967296?Rn=$o(String(jt)):typeof jt=="bigint"&&(Rn=String(jt),(jt>BigInt(2)**BigInt(32)||jt<-(BigInt(2)**BigInt(32)))&&(Rn=$o(Rn)),Rn+="n"),yn+=` It must be ${Wt}. Received ${Rn}`,yn},RangeError);function $o(un){let Wt="",jt=un.length;const yn=un[0]==="-"?1:0;for(;jt>=yn+4;jt-=3)Wt=`_${un.slice(jt-3,jt)}${Wt}`;return`${un.slice(0,jt)}${Wt}`}function Pn(un,Wt,jt){Ho(Wt,"offset"),(un[Wt]===void 0||un[Wt+jt]===void 0)&&oo(Wt,un.length-(jt+1))}function j0(un,Wt,jt,yn,Rn,Wn){if(un>jt||un<Wt){const rr=typeof Wt=="bigint"?"n":"";let ns;throw Wt===0||Wt===BigInt(0)?ns=`>= 0${rr} and < 2${rr} ** ${(Wn+1)*8}${rr}`:ns=`>= -(2${rr} ** ${(Wn+1)*8-1}${rr}) and < 2 ** ${(Wn+1)*8-1}${rr}`,new Ys.ERR_OUT_OF_RANGE("value",ns,un)}Pn(yn,Rn,Wn)}function Ho(un,Wt){if(typeof un!="number")throw new Ys.ERR_INVALID_ARG_TYPE(Wt,"number",un)}function oo(un,Wt,jt){throw Math.floor(un)!==un?(Ho(un,jt),new Ys.ERR_OUT_OF_RANGE("offset","an integer",un)):Wt<0?new Ys.ERR_BUFFER_OUT_OF_BOUNDS:new Ys.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Wt}`,un)}const L0=/[^+/0-9A-Za-z-_]/g;function f0(un){if(un=un.split("=")[0],un=un.trim().replace(L0,""),un.length<2)return"";for(;un.length%4!==0;)un=un+"=";return un}function Pl(un,Wt){Wt=Wt||1/0;let jt;const yn=un.length;let Rn=null;const Wn=[];for(let rr=0;rr<yn;++rr){if(jt=un.charCodeAt(rr),jt>55295&&jt<57344){if(!Rn){if(jt>56319){(Wt-=3)>-1&&Wn.push(239,191,189);continue}else if(rr+1===yn){(Wt-=3)>-1&&Wn.push(239,191,189);continue}Rn=jt;continue}if(jt<56320){(Wt-=3)>-1&&Wn.push(239,191,189),Rn=jt;continue}jt=(Rn-55296<<10|jt-56320)+65536}else Rn&&(Wt-=3)>-1&&Wn.push(239,191,189);if(Rn=null,jt<128){if((Wt-=1)<0)break;Wn.push(jt)}else if(jt<2048){if((Wt-=2)<0)break;Wn.push(jt>>6|192,jt&63|128)}else if(jt<65536){if((Wt-=3)<0)break;Wn.push(jt>>12|224,jt>>6&63|128,jt&63|128)}else if(jt<1114112){if((Wt-=4)<0)break;Wn.push(jt>>18|240,jt>>12&63|128,jt>>6&63|128,jt&63|128)}else throw new Error("Invalid code point")}return Wn}function na(un){const Wt=[];for(let jt=0;jt<un.length;++jt)Wt.push(un.charCodeAt(jt)&255);return Wt}function p0(un,Wt){let jt,yn,Rn;const Wn=[];for(let rr=0;rr<un.length&&!((Wt-=2)<0);++rr)jt=un.charCodeAt(rr),yn=jt>>8,Rn=jt%256,Wn.push(Rn),Wn.push(yn);return Wn}function es(un){return it.toByteArray(f0(un))}function Mn(un,Wt,jt,yn){let Rn;for(Rn=0;Rn<yn&&!(Rn+jt>=Wt.length||Rn>=un.length);++Rn)Wt[Rn+jt]=un[Rn];return Rn}function bn(un,Wt){return un instanceof Wt||un!=null&&un.constructor!=null&&un.constructor.name!=null&&un.constructor.name===Wt.name}function Hn(un){return un!==un}const Dn=function(){const un="0123456789abcdef",Wt=new Array(256);for(let jt=0;jt<16;++jt){const yn=jt*16;for(let Rn=0;Rn<16;++Rn)Wt[yn+Rn]=un[jt]+un[Rn]}return Wt}();function Un(un){return typeof BigInt>"u"?Gn:un}function Gn(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":St=>{St.exports=function(Gt){var vt=[];return vt.toString=function(){return this.map(function(dt){var bt="",Tt=typeof dt[5]<"u";return dt[4]&&(bt+="@supports (".concat(dt[4],") {")),dt[2]&&(bt+="@media ".concat(dt[2]," {")),Tt&&(bt+="@layer".concat(dt[5].length>0?" ".concat(dt[5]):""," {")),bt+=Gt(dt),Tt&&(bt+="}"),dt[2]&&(bt+="}"),dt[4]&&(bt+="}"),bt}).join("")},vt.i=function(dt,bt,Tt,Et,Mt){typeof dt=="string"&&(dt=[[null,dt,void 0]]);var Rt={};if(Tt)for(var pt=0;pt<this.length;pt++){var mt=this[pt][0];mt!=null&&(Rt[mt]=!0)}for(var gt=0;gt<dt.length;gt++){var Ct=[].concat(dt[gt]);Tt&&Rt[Ct[0]]||(typeof Mt<"u"&&(typeof Ct[5]>"u"||(Ct[1]="@layer".concat(Ct[5].length>0?" ".concat(Ct[5]):""," {").concat(Ct[1],"}")),Ct[5]=Mt),bt&&(Ct[2]&&(Ct[1]="@media ".concat(Ct[2]," {").concat(Ct[1],"}")),Ct[2]=bt),Et&&(Ct[4]?(Ct[1]="@supports (".concat(Ct[4],") {").concat(Ct[1],"}"),Ct[4]=Et):Ct[4]="".concat(Et)),vt.push(Ct))}},vt}},"./node_modules/css-loader/dist/runtime/getUrl.js":St=>{St.exports=function(Gt,vt){return vt||(vt={}),Gt&&(Gt=String(Gt.__esModule?Gt.default:Gt),/^['"].*['"]$/.test(Gt)&&(Gt=Gt.slice(1,-1)),vt.hash&&(Gt+=vt.hash),/["'() \t\n]|(%20)/.test(Gt)||vt.needQuotes?'"'.concat(Gt.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):Gt)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":St=>{St.exports=function(Gt){var vt=Gt[1],it=Gt[3];if(!it)return vt;if(typeof btoa=="function"){var dt=btoa(unescape(encodeURIComponent(JSON.stringify(it)))),bt="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(dt),Tt="/*# ".concat(bt," */");return[vt].concat([Tt]).join(`
`)}return[vt].join(`
`)}},"./node_modules/debug/src/browser.js":(St,Gt,vt)=>{Gt.formatArgs=dt,Gt.save=bt,Gt.load=Tt,Gt.useColors=it,Gt.storage=Et(),Gt.destroy=(()=>{let Rt=!1;return()=>{Rt||(Rt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),Gt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function it(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function dt(Rt){if(Rt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Rt[0]+(this.useColors?"%c ":" ")+"+"+St.exports.humanize(this.diff),!this.useColors)return;const pt="color: "+this.color;Rt.splice(1,0,pt,"color: inherit");let mt=0,gt=0;Rt[0].replace(/%[a-zA-Z%]/g,Ct=>{Ct!=="%%"&&(mt++,Ct==="%c"&&(gt=mt))}),Rt.splice(gt,0,pt)}Gt.log=console.debug||console.log||(()=>{});function bt(Rt){try{Rt?Gt.storage.setItem("debug",Rt):Gt.storage.removeItem("debug")}catch{}}function Tt(){let Rt;try{Rt=Gt.storage.getItem("debug")}catch{}return!Rt&&typeof process<"u"&&"env"in process&&(Rt=ot.DEBUG),Rt}function Et(){try{return localStorage}catch{}}St.exports=vt("./node_modules/debug/src/common.js")(Gt);const{formatters:Mt}=St.exports;Mt.j=function(Rt){try{return JSON.stringify(Rt)}catch(pt){return"[UnexpectedJSONParseError]: "+pt.message}}},"./node_modules/debug/src/common.js":(St,Gt,vt)=>{function it(dt){Tt.debug=Tt,Tt.default=Tt,Tt.coerce=gt,Tt.disable=Rt,Tt.enable=Mt,Tt.enabled=pt,Tt.humanize=vt("./node_modules/ms/index.js"),Tt.destroy=Ct,Object.keys(dt).forEach(xt=>{Tt[xt]=dt[xt]}),Tt.names=[],Tt.skips=[],Tt.formatters={};function bt(xt){let Dt=0;for(let Ht=0;Ht<xt.length;Ht++)Dt=(Dt<<5)-Dt+xt.charCodeAt(Ht),Dt|=0;return Tt.colors[Math.abs(Dt)%Tt.colors.length]}Tt.selectColor=bt;function Tt(xt){let Dt,Ht=null,Ut,Xt;function Qt(...tn){if(!Qt.enabled)return;const on=Qt,vn=Number(new Date),fn=vn-(Dt||vn);on.diff=fn,on.prev=Dt,on.curr=vn,Dt=vn,tn[0]=Tt.coerce(tn[0]),typeof tn[0]!="string"&&tn.unshift("%O");let Cn=0;tn[0]=tn[0].replace(/%([a-zA-Z%])/g,(An,nn)=>{if(An==="%%")return"%";Cn++;const Zt=Tt.formatters[nn];if(typeof Zt=="function"){const mn=tn[Cn];An=Zt.call(on,mn),tn.splice(Cn,1),Cn--}return An}),Tt.formatArgs.call(on,tn),(on.log||Tt.log).apply(on,tn)}return Qt.namespace=xt,Qt.useColors=Tt.useColors(),Qt.color=Tt.selectColor(xt),Qt.extend=Et,Qt.destroy=Tt.destroy,Object.defineProperty(Qt,"enabled",{enumerable:!0,configurable:!1,get:()=>Ht!==null?Ht:(Ut!==Tt.namespaces&&(Ut=Tt.namespaces,Xt=Tt.enabled(xt)),Xt),set:tn=>{Ht=tn}}),typeof Tt.init=="function"&&Tt.init(Qt),Qt}function Et(xt,Dt){const Ht=Tt(this.namespace+(typeof Dt>"u"?":":Dt)+xt);return Ht.log=this.log,Ht}function Mt(xt){Tt.save(xt),Tt.namespaces=xt,Tt.names=[],Tt.skips=[];let Dt;const Ht=(typeof xt=="string"?xt:"").split(/[\s,]+/),Ut=Ht.length;for(Dt=0;Dt<Ut;Dt++)Ht[Dt]&&(xt=Ht[Dt].replace(/\*/g,".*?"),xt[0]==="-"?Tt.skips.push(new RegExp("^"+xt.slice(1)+"$")):Tt.names.push(new RegExp("^"+xt+"$")))}function Rt(){const xt=[...Tt.names.map(mt),...Tt.skips.map(mt).map(Dt=>"-"+Dt)].join(",");return Tt.enable(""),xt}function pt(xt){if(xt[xt.length-1]==="*")return!0;let Dt,Ht;for(Dt=0,Ht=Tt.skips.length;Dt<Ht;Dt++)if(Tt.skips[Dt].test(xt))return!1;for(Dt=0,Ht=Tt.names.length;Dt<Ht;Dt++)if(Tt.names[Dt].test(xt))return!0;return!1}function mt(xt){return xt.toString().substring(2,xt.toString().length-2).replace(/\.\*\?$/,"*")}function gt(xt){return xt instanceof Error?xt.stack||xt.message:xt}function Ct(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Tt.enable(Tt.load()),Tt}St.exports=it},"./node_modules/deep-assign/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/is-obj/index.js"),dt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;function Tt(Rt){if(Rt==null)throw new TypeError("Sources cannot be null or undefined");return Object(Rt)}function Et(Rt,pt,mt){var gt=pt[mt];if(gt!=null){if(dt.call(Rt,mt)&&(Rt[mt]===void 0||Rt[mt]===null))throw new TypeError("Cannot convert undefined or null to object ("+mt+")");!dt.call(Rt,mt)||!it(gt)?Rt[mt]=gt:Rt[mt]=Mt(Object(Rt[mt]),pt[mt])}}function Mt(Rt,pt){if(Rt===pt)return Rt;pt=Object(pt);for(var mt in pt)dt.call(pt,mt)&&Et(Rt,pt,mt);if(Object.getOwnPropertySymbols)for(var gt=Object.getOwnPropertySymbols(pt),Ct=0;Ct<gt.length;Ct++)bt.call(pt,gt[Ct])&&Et(Rt,pt,gt[Ct]);return Rt}St.exports=function(pt){pt=Tt(pt);for(var mt=1;mt<arguments.length;mt++)Mt(pt,arguments[mt]);return pt}},"./node_modules/dtype/index.js":St=>{St.exports=function(Gt){switch(Gt){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/global/window.js":(St,Gt,vt)=>{var it;typeof window<"u"?it=window:typeof vt.g<"u"?it=vt.g:typeof self<"u"?it=self:it={},St.exports=it},"./node_modules/ieee754/index.js":(St,Gt)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Gt.read=function(vt,it,dt,bt,Tt){var Et,Mt,Rt=Tt*8-bt-1,pt=(1<<Rt)-1,mt=pt>>1,gt=-7,Ct=dt?Tt-1:0,xt=dt?-1:1,Dt=vt[it+Ct];for(Ct+=xt,Et=Dt&(1<<-gt)-1,Dt>>=-gt,gt+=Rt;gt>0;Et=Et*256+vt[it+Ct],Ct+=xt,gt-=8);for(Mt=Et&(1<<-gt)-1,Et>>=-gt,gt+=bt;gt>0;Mt=Mt*256+vt[it+Ct],Ct+=xt,gt-=8);if(Et===0)Et=1-mt;else{if(Et===pt)return Mt?NaN:(Dt?-1:1)*(1/0);Mt=Mt+Math.pow(2,bt),Et=Et-mt}return(Dt?-1:1)*Mt*Math.pow(2,Et-bt)},Gt.write=function(vt,it,dt,bt,Tt,Et){var Mt,Rt,pt,mt=Et*8-Tt-1,gt=(1<<mt)-1,Ct=gt>>1,xt=Tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,Dt=bt?0:Et-1,Ht=bt?1:-1,Ut=it<0||it===0&&1/it<0?1:0;for(it=Math.abs(it),isNaN(it)||it===1/0?(Rt=isNaN(it)?1:0,Mt=gt):(Mt=Math.floor(Math.log(it)/Math.LN2),it*(pt=Math.pow(2,-Mt))<1&&(Mt--,pt*=2),Mt+Ct>=1?it+=xt/pt:it+=xt*Math.pow(2,1-Ct),it*pt>=2&&(Mt++,pt/=2),Mt+Ct>=gt?(Rt=0,Mt=gt):Mt+Ct>=1?(Rt=(it*pt-1)*Math.pow(2,Tt),Mt=Mt+Ct):(Rt=it*Math.pow(2,Ct-1)*Math.pow(2,Tt),Mt=0));Tt>=8;vt[dt+Dt]=Rt&255,Dt+=Ht,Rt/=256,Tt-=8);for(Mt=Mt<<Tt|Rt,mt+=Tt;mt>0;vt[dt+Dt]=Mt&255,Dt+=Ht,Mt/=256,mt-=8);vt[dt+Dt-Ht]|=Ut*128}},"./node_modules/is-buffer/index.js":St=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */St.exports=function(it){return it!=null&&(Gt(it)||vt(it)||!!it._isBuffer)};function Gt(it){return!!it.constructor&&typeof it.constructor.isBuffer=="function"&&it.constructor.isBuffer(it)}function vt(it){return typeof it.readFloatLE=="function"&&typeof it.slice=="function"&&Gt(it.slice(0,0))}},"./node_modules/is-function/index.js":St=>{St.exports=vt;var Gt=Object.prototype.toString;function vt(it){if(!it)return!1;var dt=Gt.call(it);return dt==="[object Function]"||typeof it=="function"&&dt!=="[object RegExp]"||typeof window<"u"&&(it===window.setTimeout||it===window.alert||it===window.confirm||it===window.prompt)}},"./node_modules/is-obj/index.js":St=>{St.exports=function(Gt){var vt=typeof Gt;return Gt!==null&&(vt==="object"||vt==="function")}},"./node_modules/layout-bmfont-text/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/word-wrapper/index.js"),dt=vt("./node_modules/xtend/immutable.js"),bt=vt("./node_modules/as-number/index.js"),Tt=["x","e","a","o","n","s","r","c","u","m","v","w","z"],Et=["m","w"],Mt=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],Rt=9,pt=32,mt=0,gt=1,Ct=2;St.exports=function(dn){return new xt(dn)};function xt(Cn){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(Cn)}xt.prototype.update=function(Cn){if(Cn=dt({measure:this._measure},Cn),this._opt=Cn,this._opt.tabSize=bt(this._opt.tabSize,4),!Cn.font)throw new Error("must provide a valid bitmap font");var dn=this.glyphs,An=Cn.text||"",nn=Cn.font;this._setupSpaceGlyphs(nn);var Zt=it.lines(An,Cn),mn=Cn.width||0;dn.length=0;var gn=Zt.reduce(function(ms,Rs){return Math.max(ms,Rs.width,mn)},0),In=0,Vn=0,Zn=bt(Cn.lineHeight,nn.common.lineHeight),lr=nn.common.base,hr=Zn-lr,Lr=Cn.letterSpacing||0,Tr=Zn*Zt.length-hr,As=vn(this._opt.align);Vn-=Tr,this._width=gn,this._height=Tr,this._descender=Zn-lr,this._baseline=lr,this._xHeight=Xt(nn),this._capHeight=tn(nn),this._lineHeight=Zn,this._ascender=Zn-hr-this._xHeight;var Yr=this;Zt.forEach(function(ms,Rs){for(var Zs=ms.start,ao=ms.end,go=ms.width,ho,Ys=Zs;Ys<ao;Ys++){var xo=An.charCodeAt(Ys),$o=Yr.getGlyph(nn,xo);if($o){ho&&(In+=on(nn,ho.id,$o.id));var Pn=In;As===gt?Pn+=(gn-go)/2:As===Ct&&(Pn+=gn-go),dn.push({position:[Pn,Vn],data:$o,index:Ys,line:Rs}),In+=$o.xadvance+Lr,ho=$o}}Vn+=Zn,In=0}),this._linesTotal=Zt.length},xt.prototype._setupSpaceGlyphs=function(Cn){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!Cn.chars||Cn.chars.length===0)){var dn=Ut(Cn,pt)||Qt(Cn)||Cn.chars[0],An=this._opt.tabSize*dn.xadvance;this._fallbackSpaceGlyph=dn,this._fallbackTabGlyph=dt(dn,{x:0,y:0,xadvance:An,id:Rt,xoffset:0,yoffset:0,width:0,height:0})}},xt.prototype.getGlyph=function(Cn,dn){var An=Ut(Cn,dn);return An||(dn===Rt?this._fallbackTabGlyph:dn===pt?this._fallbackSpaceGlyph:null)},xt.prototype.computeMetrics=function(Cn,dn,An,nn){var Zt=this._opt.letterSpacing||0,mn=this._opt.font,gn=0,In=0,Vn=0,Zn,lr;if(!mn.chars||mn.chars.length===0)return{start:dn,end:dn,width:0};An=Math.min(Cn.length,An);for(var hr=dn;hr<An;hr++){var Lr=Cn.charCodeAt(hr),Zn=this.getGlyph(mn,Lr);if(Zn){Zn.xoffset;var Tr=lr?on(mn,lr.id,Zn.id):0;gn+=Tr;var As=gn+Zn.xadvance+Zt,Yr=gn+Zn.width;if(Yr>=nn||As>=nn)break;gn=As,In=Yr,lr=Zn}Vn++}return lr&&(In+=lr.xoffset),{start:dn,end:dn+Vn,width:In}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(Dt);function Dt(Cn){Object.defineProperty(xt.prototype,Cn,{get:Ht(Cn),configurable:!0})}function Ht(Cn){return new Function(["return function "+Cn+"() {","  return this._"+Cn,"}"].join(`
`))()}function Ut(Cn,dn){if(!Cn.chars||Cn.chars.length===0)return null;var An=fn(Cn.chars,dn);return An>=0?Cn.chars[An]:null}function Xt(Cn){for(var dn=0;dn<Tt.length;dn++){var An=Tt[dn].charCodeAt(0),nn=fn(Cn.chars,An);if(nn>=0)return Cn.chars[nn].height}return 0}function Qt(Cn){for(var dn=0;dn<Et.length;dn++){var An=Et[dn].charCodeAt(0),nn=fn(Cn.chars,An);if(nn>=0)return Cn.chars[nn]}return 0}function tn(Cn){for(var dn=0;dn<Mt.length;dn++){var An=Mt[dn].charCodeAt(0),nn=fn(Cn.chars,An);if(nn>=0)return Cn.chars[nn].height}return 0}function on(Cn,dn,An){if(!Cn.kernings||Cn.kernings.length===0)return 0;for(var nn=Cn.kernings,Zt=0;Zt<nn.length;Zt++){var mn=nn[Zt];if(mn.first===dn&&mn.second===An)return mn.amount}return 0}function vn(Cn){return Cn==="center"?gt:Cn==="right"?Ct:mt}function fn(Cn,dn,An){An=An||0;for(var nn=An;nn<Cn.length;nn++)if(Cn[nn].id===dn)return nn;return-1}},"./node_modules/load-bmfont/browser.js":(St,Gt,vt)=>{var it=vt("./node_modules/buffer/index.js").Buffer,dt=vt("./node_modules/xhr/index.js"),bt=function(){},Tt=vt("./node_modules/parse-bmfont-ascii/index.js"),Et=vt("./node_modules/parse-bmfont-xml/lib/browser.js"),Mt=vt("./node_modules/parse-bmfont-binary/index.js"),Rt=vt("./node_modules/load-bmfont/lib/is-binary.js"),pt=vt("./node_modules/xtend/immutable.js"),mt=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();St.exports=function(xt,Dt){Dt=typeof Dt=="function"?Dt:bt,typeof xt=="string"?xt={uri:xt}:xt||(xt={});var Ht=xt.binary;Ht&&(xt=Ct(xt)),dt(xt,function(Ut,Xt,Qt){if(Ut)return Dt(Ut);if(!/^2/.test(Xt.statusCode))return Dt(new Error("http status code: "+Xt.statusCode));if(!Qt)return Dt(new Error("no body result"));var tn=!1;if(gt(Qt)){var on=new Uint8Array(Qt);Qt=it.from(on,"binary")}Rt(Qt)&&(tn=!0,typeof Qt=="string"&&(Qt=it.from(Qt,"binary"))),tn||(it.isBuffer(Qt)&&(Qt=Qt.toString(xt.encoding)),Qt=Qt.trim());var vn;try{var fn=Xt.headers["content-type"];tn?vn=Mt(Qt):/json/.test(fn)||Qt.charAt(0)==="{"?vn=JSON.parse(Qt):/xml/.test(fn)||Qt.charAt(0)==="<"?vn=Et(Qt):vn=Tt(Qt)}catch(Cn){Dt(new Error("error parsing font "+Cn.message)),Dt=bt}Dt(null,vn)})};function gt(xt){var Dt=Object.prototype.toString;return Dt.call(xt)==="[object ArrayBuffer]"}function Ct(xt){if(mt)return pt(xt,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var Dt=new self.XMLHttpRequest;return Dt.overrideMimeType("text/plain; charset=x-user-defined"),pt({xhr:Dt},xt)}},"./node_modules/load-bmfont/lib/is-binary.js":(St,Gt,vt)=>{var it=vt("./node_modules/buffer/index.js").Buffer,dt=vt("./node_modules/buffer-equal/index.js"),bt=it.from([66,77,70,3]);St.exports=function(Tt){return typeof Tt=="string"?Tt.substring(0,3)==="BMF":Tt.length>4&&dt(Tt.slice(0,4),bt)}},"./node_modules/ms/index.js":St=>{var Gt=1e3,vt=Gt*60,it=vt*60,dt=it*24,bt=dt*7,Tt=dt*365.25;St.exports=function(mt,gt){gt=gt||{};var Ct=typeof mt;if(Ct==="string"&&mt.length>0)return Et(mt);if(Ct==="number"&&isFinite(mt))return gt.long?Rt(mt):Mt(mt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(mt))};function Et(mt){if(mt=String(mt),!(mt.length>100)){var gt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(mt);if(gt){var Ct=parseFloat(gt[1]),xt=(gt[2]||"ms").toLowerCase();switch(xt){case"years":case"year":case"yrs":case"yr":case"y":return Ct*Tt;case"weeks":case"week":case"w":return Ct*bt;case"days":case"day":case"d":return Ct*dt;case"hours":case"hour":case"hrs":case"hr":case"h":return Ct*it;case"minutes":case"minute":case"mins":case"min":case"m":return Ct*vt;case"seconds":case"second":case"secs":case"sec":case"s":return Ct*Gt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Ct;default:return}}}}function Mt(mt){var gt=Math.abs(mt);return gt>=dt?Math.round(mt/dt)+"d":gt>=it?Math.round(mt/it)+"h":gt>=vt?Math.round(mt/vt)+"m":gt>=Gt?Math.round(mt/Gt)+"s":mt+"ms"}function Rt(mt){var gt=Math.abs(mt);return gt>=dt?pt(mt,gt,dt,"day"):gt>=it?pt(mt,gt,it,"hour"):gt>=vt?pt(mt,gt,vt,"minute"):gt>=Gt?pt(mt,gt,Gt,"second"):mt+" ms"}function pt(mt,gt,Ct,xt){var Dt=gt>=Ct*1.5;return Math.round(mt/Ct)+" "+xt+(Dt?"s":"")}},"./node_modules/parse-bmfont-ascii/index.js":St=>{St.exports=function(bt){if(!bt)throw new Error("no data provided");bt=bt.toString().trim();var Tt={pages:[],chars:[],kernings:[]},Et=bt.split(/\r\n?|\n/g);if(Et.length===0)throw new Error("no data in BMFont file");for(var Mt=0;Mt<Et.length;Mt++){var Rt=Gt(Et[Mt],Mt);if(Rt)if(Rt.key==="page"){if(typeof Rt.data.id!="number")throw new Error("malformed file at line "+Mt+" -- needs page id=N");if(typeof Rt.data.file!="string")throw new Error("malformed file at line "+Mt+' -- needs page file="path"');Tt.pages[Rt.data.id]=Rt.data.file}else Rt.key==="chars"||Rt.key==="kernings"||(Rt.key==="char"?Tt.chars.push(Rt.data):Rt.key==="kerning"?Tt.kernings.push(Rt.data):Tt[Rt.key]=Rt.data)}return Tt};function Gt(dt,bt){if(dt=dt.replace(/\t+/g," ").trim(),!dt)return null;var Tt=dt.indexOf(" ");if(Tt===-1)throw new Error("no named row at line "+bt);var Et=dt.substring(0,Tt);dt=dt.substring(Tt+1),dt=dt.replace(/letter=[\'\"]\S+[\'\"]/gi,""),dt=dt.split("="),dt=dt.map(function(gt){return gt.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var Mt=[],Rt=0;Rt<dt.length;Rt++){var pt=dt[Rt];Rt===0?Mt.push({key:pt[0],data:""}):Rt===dt.length-1?Mt[Mt.length-1].data=vt(pt[0]):(Mt[Mt.length-1].data=vt(pt[0]),Mt.push({key:pt[1],data:""}))}var mt={key:Et,data:{}};return Mt.forEach(function(gt){mt.data[gt.key]=gt.data}),mt}function vt(dt){return!dt||dt.length===0?"":dt.indexOf('"')===0||dt.indexOf("'")===0?dt.substring(1,dt.length-1):dt.indexOf(",")!==-1?it(dt):parseInt(dt,10)}function it(dt){return dt.split(",").map(function(bt){return parseInt(bt,10)})}},"./node_modules/parse-bmfont-binary/index.js":St=>{var Gt=[66,77,70];St.exports=function(mt){if(mt.length<6)throw new Error("invalid buffer length for BMFont");var gt=Gt.every(function(Ut,Xt){return mt.readUInt8(Xt)===Ut});if(!gt)throw new Error("BMFont missing BMF byte header");var Ct=3,xt=mt.readUInt8(Ct++);if(xt>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var Dt={kernings:[],chars:[]},Ht=0;Ht<5;Ht++)Ct+=vt(Dt,mt,Ct);return Dt};function vt(pt,mt,gt){if(gt>mt.length-1)return 0;var Ct=mt.readUInt8(gt++),xt=mt.readInt32LE(gt);switch(gt+=4,Ct){case 1:pt.info=it(mt,gt);break;case 2:pt.common=dt(mt,gt);break;case 3:pt.pages=bt(mt,gt,xt);break;case 4:pt.chars=Tt(mt,gt,xt);break;case 5:pt.kernings=Et(mt,gt,xt);break}return 5+xt}function it(pt,mt){var gt={};gt.size=pt.readInt16LE(mt);var Ct=pt.readUInt8(mt+2);return gt.smooth=Ct>>7&1,gt.unicode=Ct>>6&1,gt.italic=Ct>>5&1,gt.bold=Ct>>4&1,Ct>>3&1&&(gt.fixedHeight=1),gt.charset=pt.readUInt8(mt+3)||"",gt.stretchH=pt.readUInt16LE(mt+4),gt.aa=pt.readUInt8(mt+6),gt.padding=[pt.readInt8(mt+7),pt.readInt8(mt+8),pt.readInt8(mt+9),pt.readInt8(mt+10)],gt.spacing=[pt.readInt8(mt+11),pt.readInt8(mt+12)],gt.outline=pt.readUInt8(mt+13),gt.face=Rt(pt,mt+14),gt}function dt(pt,mt){var gt={};return gt.lineHeight=pt.readUInt16LE(mt),gt.base=pt.readUInt16LE(mt+2),gt.scaleW=pt.readUInt16LE(mt+4),gt.scaleH=pt.readUInt16LE(mt+6),gt.pages=pt.readUInt16LE(mt+8),pt.readUInt8(mt+10),gt.packed=0,gt.alphaChnl=pt.readUInt8(mt+11),gt.redChnl=pt.readUInt8(mt+12),gt.greenChnl=pt.readUInt8(mt+13),gt.blueChnl=pt.readUInt8(mt+14),gt}function bt(pt,mt,gt){for(var Ct=[],xt=Mt(pt,mt),Dt=xt.length+1,Ht=gt/Dt,Ut=0;Ut<Ht;Ut++)Ct[Ut]=pt.slice(mt,mt+xt.length).toString("utf8"),mt+=Dt;return Ct}function Tt(pt,mt,gt){for(var Ct=[],xt=gt/20,Dt=0;Dt<xt;Dt++){var Ht={},Ut=Dt*20;Ht.id=pt.readUInt32LE(mt+0+Ut),Ht.x=pt.readUInt16LE(mt+4+Ut),Ht.y=pt.readUInt16LE(mt+6+Ut),Ht.width=pt.readUInt16LE(mt+8+Ut),Ht.height=pt.readUInt16LE(mt+10+Ut),Ht.xoffset=pt.readInt16LE(mt+12+Ut),Ht.yoffset=pt.readInt16LE(mt+14+Ut),Ht.xadvance=pt.readInt16LE(mt+16+Ut),Ht.page=pt.readUInt8(mt+18+Ut),Ht.chnl=pt.readUInt8(mt+19+Ut),Ct[Dt]=Ht}return Ct}function Et(pt,mt,gt){for(var Ct=[],xt=gt/10,Dt=0;Dt<xt;Dt++){var Ht={},Ut=Dt*10;Ht.first=pt.readUInt32LE(mt+0+Ut),Ht.second=pt.readUInt32LE(mt+4+Ut),Ht.amount=pt.readInt16LE(mt+8+Ut),Ct[Dt]=Ht}return Ct}function Mt(pt,mt){for(var gt=mt;gt<pt.length&&pt[gt]!==0;gt++);return pt.slice(mt,gt)}function Rt(pt,mt){return Mt(pt,mt).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(St,Gt,vt)=>{var it=vt("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),dt=vt("./node_modules/xml-parse-from-string/index.js"),bt={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};St.exports=function(pt){pt=pt.toString();var mt=dt(pt),gt={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(Qt){var tn=mt.getElementsByTagName(Qt)[0];tn&&(gt[Qt]=it(Tt(tn)))});var Ct=mt.getElementsByTagName("pages")[0];if(!Ct)throw new Error("malformed file -- no <pages> element");for(var xt=Ct.getElementsByTagName("page"),Dt=0;Dt<xt.length;Dt++){var Ht=xt[Dt],Ut=parseInt(Ht.getAttribute("id"),10),Xt=Ht.getAttribute("file");if(isNaN(Ut))throw new Error('malformed file -- page "id" attribute is NaN');if(!Xt)throw new Error('malformed file -- needs page "file" attribute');gt.pages[parseInt(Ut,10)]=Xt}return["chars","kernings"].forEach(function(Qt){var tn=mt.getElementsByTagName(Qt)[0];if(tn)for(var on=Qt.substring(0,Qt.length-1),vn=tn.getElementsByTagName(on),fn=0;fn<vn.length;fn++){var Cn=vn[fn];gt[Qt].push(it(Tt(Cn)))}}),gt};function Tt(Rt){var pt=Et(Rt);return pt.reduce(function(mt,gt){var Ct=Mt(gt.nodeName);return mt[Ct]=gt.nodeValue,mt},{})}function Et(Rt){for(var pt=[],mt=0;mt<Rt.attributes.length;mt++)pt.push(Rt.attributes[mt]);return pt}function Mt(Rt){return bt[Rt.toLowerCase()]||Rt}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":St=>{var Gt="chasrset";St.exports=function(dt){Gt in dt&&(dt.charset=dt[Gt],delete dt[Gt]);for(var bt in dt)bt==="face"||bt==="charset"||(bt==="padding"||bt==="spacing"?dt[bt]=vt(dt[bt]):dt[bt]=parseInt(dt[bt],10));return dt};function vt(it){return it.split(",").map(function(dt){return parseInt(dt,10)})}},"./node_modules/parse-headers/parse-headers.js":St=>{var Gt=function(it){return it.replace(/^\s+|\s+$/g,"")},vt=function(it){return Object.prototype.toString.call(it)==="[object Array]"};St.exports=function(it){if(!it)return{};for(var dt={},bt=Gt(it).split(`
`),Tt=0;Tt<bt.length;Tt++){var Et=bt[Tt],Mt=Et.indexOf(":"),Rt=Gt(Et.slice(0,Mt)).toLowerCase(),pt=Gt(Et.slice(Mt+1));typeof dt[Rt]>"u"?dt[Rt]=pt:vt(dt[Rt])?dt[Rt].push(pt):dt[Rt]=[dt[Rt],pt]}return dt}},"./node_modules/quad-indices/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/dtype/index.js"),dt=vt("./node_modules/an-array/index.js"),bt=vt("./node_modules/is-buffer/index.js"),Tt=[0,2,3],Et=[2,1,3];St.exports=function(Rt,pt){(!Rt||!(dt(Rt)||bt(Rt)))&&(pt=Rt||{},Rt=null),typeof pt=="number"?pt={count:pt}:pt=pt||{};for(var mt=typeof pt.type=="string"?pt.type:"uint16",gt=typeof pt.count=="number"?pt.count:1,Ct=pt.start||0,xt=pt.clockwise!==!1?Tt:Et,Dt=xt[0],Ht=xt[1],Ut=xt[2],Xt=gt*6,Qt=Rt||new(it(mt))(Xt),tn=0,on=0;tn<Xt;tn+=6,on+=4){var vn=tn+Ct;Qt[vn+0]=on+0,Qt[vn+1]=on+1,Qt[vn+2]=on+2,Qt[vn+3]=on+Dt,Qt[vn+4]=on+Ht,Qt[vn+5]=on+Ut}return Qt}},"./node_modules/super-animejs/lib/anime.es.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>Y1});var it={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},dt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},bt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Tt={CSS:{},springs:{}};function Et(Bn,Xn,cr){return Math.min(Math.max(Bn,Xn),cr)}function Mt(Bn,Xn){return Bn.indexOf(Xn)>-1}function Rt(Bn,Xn){return Bn.apply(null,Xn)}var pt=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,mt=/^rgb/,gt=/^hsl/,Ct={arr:function(Bn){return Array.isArray(Bn)},obj:function(Bn){return Mt(Object.prototype.toString.call(Bn),"Object")},pth:function(Bn){return Ct.obj(Bn)&&Bn.hasOwnProperty("totalLength")},svg:function(Bn){return Bn instanceof SVGElement},inp:function(Bn){return Bn instanceof HTMLInputElement},dom:function(Bn){return Bn.nodeType||Ct.svg(Bn)},str:function(Bn){return typeof Bn=="string"},fnc:function(Bn){return typeof Bn=="function"},und:function(Bn){return typeof Bn>"u"},hex:function(Bn){return pt.test(Bn)},rgb:function(Bn){return mt.test(Bn)},hsl:function(Bn){return gt.test(Bn)},col:function(Bn){return Ct.hex(Bn)||Ct.rgb(Bn)||Ct.hsl(Bn)},key:function(Bn){return!it.hasOwnProperty(Bn)&&!dt.hasOwnProperty(Bn)&&Bn!=="targets"&&Bn!=="keyframes"}},xt=/\(([^)]+)\)/;function Dt(Bn){var Xn=xt.exec(Bn);return Xn?Xn[1].split(",").map(function(cr){return parseFloat(cr)}):[]}function Ht(Bn,Xn){var cr=Dt(Bn),Rr=Et(Ct.und(cr[0])?1:cr[0],.1,100),yr=Et(Ct.und(cr[1])?100:cr[1],.1,100),Nr=Et(Ct.und(cr[2])?10:cr[2],.1,100),is=Et(Ct.und(cr[3])?0:cr[3],.1,100),Ns=Math.sqrt(yr/Rr),Ss=Nr/(2*Math.sqrt(yr*Rr)),kr=Ss<1?Ns*Math.sqrt(1-Ss*Ss):0,Ks=1,$s=Ss<1?(Ss*Ns+-is)/kr:-is+Ns;function lo(bo){var Eo=Xn?Xn*bo/1e3:bo;return Ss<1?Eo=Math.exp(-Eo*Ss*Ns)*(Ks*Math.cos(kr*Eo)+$s*Math.sin(kr*Eo)):Eo=(Ks+$s*Eo)*Math.exp(-Eo*Ns),bo===0||bo===1?bo:1-Eo}function A0(){var bo=Tt.springs[Bn];if(bo)return bo;for(var Eo=1/6,zo=0,_0=0;;)if(zo+=Eo,lo(zo)===1){if(_0++,_0>=16)break}else _0=0;var V0=zo*Eo*1e3;return Tt.springs[Bn]=V0,V0}return Xn?lo:A0}function Ut(Bn,Xn){Bn===void 0&&(Bn=1),Xn===void 0&&(Xn=.5);var cr=Et(Bn,1,10),Rr=Et(Xn,.1,2);return function(yr){return yr===0||yr===1?yr:-cr*Math.pow(2,10*(yr-1))*Math.sin((yr-1-Rr/(Math.PI*2)*Math.asin(1/cr))*(Math.PI*2)/Rr)}}function Xt(Bn){return Bn===void 0&&(Bn=10),function(Xn){return Math.round(Xn*Bn)*(1/Bn)}}var Qt=function(){var Bn=11,Xn=1/(Bn-1);function cr(Ks,$s){return 1-3*$s+3*Ks}function Rr(Ks,$s){return 3*$s-6*Ks}function yr(Ks){return 3*Ks}function Nr(Ks,$s,lo){return((cr($s,lo)*Ks+Rr($s,lo))*Ks+yr($s))*Ks}function is(Ks,$s,lo){return 3*cr($s,lo)*Ks*Ks+2*Rr($s,lo)*Ks+yr($s)}function Ns(Ks,$s,lo,A0,bo){var Eo,zo,_0=0;do zo=$s+(lo-$s)/2,Eo=Nr(zo,A0,bo)-Ks,Eo>0?lo=zo:$s=zo;while(Math.abs(Eo)>1e-7&&++_0<10);return zo}function Ss(Ks,$s,lo,A0){for(var bo=0;bo<4;++bo){var Eo=is($s,lo,A0);if(Eo===0)return $s;var zo=Nr($s,lo,A0)-Ks;$s-=zo/Eo}return $s}function kr(Ks,$s,lo,A0){if(!(0<=Ks&&Ks<=1&&0<=lo&&lo<=1))return;var bo=new Float32Array(Bn);if(Ks!==$s||lo!==A0)for(var Eo=0;Eo<Bn;++Eo)bo[Eo]=Nr(Eo*Xn,Ks,lo);function zo(_0){for(var V0=0,Ts=1,Mo=Bn-1;Ts!==Mo&&bo[Ts]<=_0;++Ts)V0+=Xn;--Ts;var T0=(_0-bo[Ts])/(bo[Ts+1]-bo[Ts]),Jo=V0+T0*Xn,rn=is(Jo,Ks,lo);return rn>=.001?Ss(_0,Jo,Ks,lo):rn===0?Jo:Ns(_0,V0,V0+Xn,Ks,lo)}return function(_0){return Ks===$s&&lo===A0||_0===0||_0===1?_0:Nr(zo(_0),$s,A0)}}return kr}(),tn=function(){var Bn=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],Xn={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],Ut],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(is,Ns){return function(Ss){return 1-Ut(is,Ns)(1-Ss)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(is,Ns){return function(Ss){return Ss<.5?Ut(is,Ns)(Ss*2)/2:1-Ut(is,Ns)(Ss*-2+2)/2}}]},cr={linear:[.25,.25,.75,.75]};for(var Rr in Xn)for(var yr=0,Nr=Xn[Rr].length;yr<Nr;yr++)cr["ease"+Rr+Bn[yr]]=Xn[Rr][yr];return cr}();function on(Bn,Xn){if(Ct.fnc(Bn))return Bn;var cr=Bn.split("(")[0],Rr=tn[cr],yr=Dt(Bn);switch(cr){case"spring":return Ht(Bn,Xn);case"cubicBezier":return Rt(Qt,yr);case"steps":return Rt(Xt,yr);default:return Ct.fnc(Rr)?Rt(Rr,yr):Rt(Qt,Rr)}}function vn(Bn){try{var Xn=document.querySelectorAll(Bn);return Xn}catch{return}}var fn=[];function Cn(Bn,Xn){for(var cr=fn,Rr=Bn.length,yr=arguments.length>=2?arguments[1]:void 0,Nr=0;Nr<Rr;Nr++)if(Nr in Bn){var is=Bn[Nr];Xn.call(yr,is,Nr,Bn)&&cr.push(is)}return fn=Bn,fn.length=0,cr}function dn(Bn,Xn){Xn||(Xn=[]);for(var cr=0,Rr=Bn.length;cr<Rr;cr++){var yr=Bn[cr];Array.isArray(yr)?dn(yr,Xn):Xn.push(yr)}return Xn}function An(Bn){return Ct.arr(Bn)?Bn:(Ct.str(Bn)&&(Bn=vn(Bn)||Bn),Bn instanceof NodeList||Bn instanceof HTMLCollection?[].slice.call(Bn):[Bn])}function nn(Bn,Xn){return Bn.some(function(cr){return cr===Xn})}function Zt(Bn){var Xn={};for(var cr in Bn)Xn[cr]=Bn[cr];return Xn}function mn(Bn,Xn){var cr=Zt(Bn);for(var Rr in Bn)cr[Rr]=Xn.hasOwnProperty(Rr)?Xn[Rr]:Bn[Rr];return cr}function gn(Bn,Xn){var cr=Zt(Bn);for(var Rr in Xn)cr[Rr]=Ct.und(Bn[Rr])?Xn[Rr]:Bn[Rr];return cr}var In=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function Vn(Bn){var Xn=In.exec(Bn);return Xn?"rgba("+Xn[1]+",1)":Bn}var Zn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function hr(Bn){var Xn=Bn.replace(Zn,function(is,Ns,Ss,kr){return Ns+Ns+Ss+Ss+kr+kr}),cr=lr.exec(Xn),Rr=parseInt(cr[1],16),yr=parseInt(cr[2],16),Nr=parseInt(cr[3],16);return"rgba("+Rr+","+yr+","+Nr+",1)"}var Lr=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Tr=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function As(Bn){var Xn=Lr.exec(Bn)||Tr.exec(Bn),cr=parseInt(Xn[1],10)/360,Rr=parseInt(Xn[2],10)/100,yr=parseInt(Xn[3],10)/100,Nr=Xn[4]||1;function is(lo,A0,bo){return bo<0&&(bo+=1),bo>1&&(bo-=1),bo<.16666666666666666?lo+(A0-lo)*6*bo:bo<.5?A0:bo<.6666666666666666?lo+(A0-lo)*(.6666666666666666-bo)*6:lo}var Ns,Ss,kr;if(Rr==0)Ns=Ss=kr=yr;else{var Ks=yr<.5?yr*(1+Rr):yr+Rr-yr*Rr,$s=2*yr-Ks;Ns=is($s,Ks,cr+.3333333333333333),Ss=is($s,Ks,cr),kr=is($s,Ks,cr-.3333333333333333)}return"rgba("+Ns*255+","+Ss*255+","+kr*255+","+Nr+")"}function Yr(Bn){if(Ct.rgb(Bn))return Vn(Bn);if(Ct.hex(Bn))return hr(Bn);if(Ct.hsl(Bn))return As(Bn)}var ms=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Rs(Bn){var Xn=ms.exec(Bn);if(Xn)return Xn[2]}function Zs(Bn){if(Mt(Bn,"translate")||Bn==="perspective")return"px";if(Mt(Bn,"rotate")||Mt(Bn,"skew"))return"deg"}function ao(Bn,Xn){return Ct.fnc(Bn)?Bn(Xn.target,Xn.id,Xn.total):Bn}function go(Bn,Xn){return Bn.getAttribute(Xn)}function ho(Bn,Xn,cr){var Rr=Rs(Xn);if(nn([cr,"deg","rad","turn"],Rr))return Xn;var yr=Tt.CSS[Xn+cr];if(!Ct.und(yr))return yr;var Nr=100,is=document.createElement(Bn.tagName),Ns=Bn.parentNode&&Bn.parentNode!==document?Bn.parentNode:document.body;Ns.appendChild(is),is.style.position="absolute",is.style.width=Nr+cr;var Ss=Nr/is.offsetWidth;Ns.removeChild(is);var kr=Ss*parseFloat(Xn);return Tt.CSS[Xn+cr]=kr,kr}function Ys(Bn,Xn,cr){if(Xn in Bn.style){var Rr=Xn.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),yr=Bn.style[Xn]||getComputedStyle(Bn).getPropertyValue(Rr)||"0";return cr?ho(Bn,yr,cr):yr}}function xo(Bn,Xn){if(Ct.dom(Bn)&&!Ct.inp(Bn)&&(go(Bn,Xn)||Ct.svg(Bn)&&Bn[Xn]))return"attribute";if(Ct.dom(Bn)&&nn(bt,Xn))return"transform";if(Ct.dom(Bn)&&Xn!=="transform"&&Ys(Bn,Xn))return"css";if(Bn[Xn]!=null)return"object"}var $o=/(\w+)\(([^)]*)\)/g;function Pn(Bn){if(Ct.dom(Bn)){for(var Xn=Bn.style.transform||"",cr=new Map,Rr;Rr=$o.exec(Xn);)cr.set(Rr[1],Rr[2]);return cr}}function j0(Bn,Xn,cr,Rr){var yr=Mt(Xn,"scale")?1:0+Zs(Xn),Nr=Pn(Bn).get(Xn)||yr;return cr&&(cr.transforms.list.set(Xn,Nr),cr.transforms.last=Xn),Rr?ho(Bn,Nr,Rr):Nr}function Ho(Bn,Xn,cr,Rr){switch(xo(Bn,Xn)){case"transform":return j0(Bn,Xn,Rr,cr);case"css":return Ys(Bn,Xn,cr);case"attribute":return go(Bn,Xn);default:return Bn[Xn]||0}}var oo=/^(\*=|\+=|-=)/;function L0(Bn,Xn){var cr=oo.exec(Bn);if(!cr)return Bn;var Rr=Rs(Bn)||0,yr=parseFloat(Xn),Nr=parseFloat(Bn.replace(cr[0],""));switch(cr[0][0]){case"+":return yr+Nr+Rr;case"-":return yr-Nr+Rr;case"*":return yr*Nr+Rr}}var f0=/\s/g;function Pl(Bn,Xn){if(Ct.col(Bn))return Yr(Bn);var cr=Rs(Bn),Rr=cr?Bn.substr(0,Bn.length-cr.length):Bn;return Xn&&!f0.test(Bn)?Rr+Xn:Rr}function na(Bn,Xn){return Math.sqrt(Math.pow(Xn.x-Bn.x,2)+Math.pow(Xn.y-Bn.y,2))}function p0(Bn){return Math.PI*2*go(Bn,"r")}function es(Bn){return go(Bn,"width")*2+go(Bn,"height")*2}function Mn(Bn){return na({x:go(Bn,"x1"),y:go(Bn,"y1")},{x:go(Bn,"x2"),y:go(Bn,"y2")})}function bn(Bn){for(var Xn=Bn.points,cr=0,Rr,yr=0;yr<Xn.numberOfItems;yr++){var Nr=Xn.getItem(yr);yr>0&&(cr+=na(Rr,Nr)),Rr=Nr}return cr}function Hn(Bn){var Xn=Bn.points;return bn(Bn)+na(Xn.getItem(Xn.numberOfItems-1),Xn.getItem(0))}function Dn(Bn){if(Bn.getTotalLength)return Bn.getTotalLength();switch(Bn.tagName.toLowerCase()){case"circle":return p0(Bn);case"rect":return es(Bn);case"line":return Mn(Bn);case"polyline":return bn(Bn);case"polygon":return Hn(Bn)}}function Un(Bn){var Xn=Dn(Bn);return Bn.setAttribute("stroke-dasharray",Xn),Xn}function Gn(Bn){for(var Xn=Bn.parentNode;Ct.svg(Xn)&&(Xn=Xn.parentNode,!!Ct.svg(Xn.parentNode)););return Xn}function un(Bn,Xn){var cr=Xn||{},Rr=cr.el||Gn(Bn),yr=Rr.getBoundingClientRect(),Nr=go(Rr,"viewBox"),is=yr.width,Ns=yr.height,Ss=cr.viewBox||(Nr?Nr.split(" "):[0,0,is,Ns]);return{el:Rr,viewBox:Ss,x:Ss[0]/1,y:Ss[1]/1,w:is/Ss[2],h:Ns/Ss[3]}}function Wt(Bn,Xn){var cr=Ct.str(Bn)?vn(Bn)[0]:Bn,Rr=Xn||100;return function(yr){return{property:yr,el:cr,svg:un(cr),totalLength:Dn(cr)*(Rr/100)}}}function jt(Bn,Xn){function cr(Ns){Ns===void 0&&(Ns=0);var Ss=Xn+Ns>=1?Xn+Ns:0;return Bn.el.getPointAtLength(Ss)}var Rr=un(Bn.el,Bn.svg),yr=cr(),Nr=cr(-1),is=cr(1);switch(Bn.property){case"x":return(yr.x-Rr.x)*Rr.w;case"y":return(yr.y-Rr.y)*Rr.h;case"angle":return Math.atan2(is.y-Nr.y,is.x-Nr.x)*180/Math.PI}}var yn=/-?\d*\.?\d+/g;function Rn(Bn,Xn){var cr=Pl(Ct.pth(Bn)?Bn.totalLength:Bn,Xn)+"";return{original:cr,numbers:cr.match(yn)?cr.match(yn).map(Number):[0],strings:Ct.str(Bn)||Xn?cr.split(yn):[]}}function Wn(Bn){var Xn=Bn?dn(Ct.arr(Bn)?Bn.map(An):An(Bn)):[];return Cn(Xn,function(cr,Rr,yr){return yr.indexOf(cr)===Rr})}function rr(Bn){var Xn=Wn(Bn);return Xn.map(function(cr,Rr){return{target:cr,id:Rr,total:Xn.length,transforms:{list:Pn(cr)}}})}var ns=/^spring/;function ps(Bn,Xn){var cr=Zt(Xn);if(ns.test(cr.easing)&&(cr.duration=Ht(cr.easing)),Ct.arr(Bn)){var Rr=Bn.length,yr=Rr===2&&!Ct.obj(Bn[0]);yr?Bn={value:Bn}:Ct.fnc(Xn.duration)||(cr.duration=Xn.duration/Rr)}var Nr=Ct.arr(Bn)?Bn:[Bn];return Nr.map(function(is,Ns){var Ss=Ct.obj(is)&&!Ct.pth(is)?is:{value:is};return Ct.und(Ss.delay)&&(Ss.delay=Ns?0:Xn.delay),Ct.und(Ss.endDelay)&&(Ss.endDelay=Ns===Nr.length-1?Xn.endDelay:0),Ss}).map(function(is){return gn(is,cr)})}function os(Bn){for(var Xn=Cn(dn(Bn.map(function(Nr){return Object.keys(Nr)})),function(Nr){return Ct.key(Nr)}).reduce(function(Nr,is){return Nr.indexOf(is)<0&&Nr.push(is),Nr},[]),cr={},Rr=function(Nr){var is=Xn[Nr];cr[is]=Bn.map(function(Ns){var Ss={};for(var kr in Ns)Ct.key(kr)?kr==is&&(Ss.value=Ns[kr]):Ss[kr]=Ns[kr];return Ss})},yr=0;yr<Xn.length;yr++)Rr(yr);return cr}function as(Bn,Xn){var cr=[],Rr=Xn.keyframes;Rr&&(Xn=gn(os(Rr),Xn));for(var yr in Xn)Ct.key(yr)&&cr.push({name:yr,tweens:ps(Xn[yr],Bn)});return cr}function Cs(Bn,Xn){var cr={};for(var Rr in Bn){var yr=ao(Bn[Rr],Xn);Ct.arr(yr)&&(yr=yr.map(function(Nr){return ao(Nr,Xn)}),yr.length===1&&(yr=yr[0])),cr[Rr]=yr}return cr.duration=parseFloat(cr.duration),cr.delay=parseFloat(cr.delay),cr}function U0(Bn,Xn){var cr;return Bn.tweens.map(function(Rr){var yr=Cs(Rr,Xn),Nr=yr.value,is=Ct.arr(Nr)?Nr[1]:Nr,Ns=Rs(is),Ss=Ho(Xn.target,Bn.name,Ns,Xn),kr=cr?cr.to.original:Ss,Ks=Ct.arr(Nr)?Nr[0]:kr,$s=Rs(Ks)||Rs(Ss),lo=Ns||$s;return Ct.und(is)&&(is=kr),yr.from=Rn(Ks,lo),yr.to=Rn(L0(is,Ks),lo),yr.start=cr?cr.end:0,yr.end=yr.start+yr.delay+yr.duration+yr.endDelay,yr.easing=on(yr.easing,yr.duration),yr.isPath=Ct.pth(Nr),yr.isColor=Ct.col(yr.from.original),yr.isColor&&(yr.round=1),cr=yr,yr})}var to={css:function(Bn,Xn,cr){return Bn.style[Xn]=cr},attribute:function(Bn,Xn,cr){return Bn.setAttribute(Xn,cr)},object:function(Bn,Xn,cr){return Bn[Xn]=cr},transform:function(Bn,Xn,cr,Rr,yr){if(Rr.list.set(Xn,cr),Xn===Rr.last||yr){var Nr="";Rr.list.forEach(function(is,Ns){Nr+=Ns+"("+is+") "}),Bn.style.transform=Nr}}};function Cr(Bn,Xn){for(var cr=rr(Bn),Rr=0,yr=cr.length;Rr<yr;Rr++){var Nr=cr[Rr];for(var is in Xn){var Ns=ao(Xn[is],Nr),Ss=Nr.target,kr=Rs(Ns),Ks=Ho(Ss,is,kr,Nr),$s=kr||Rs(Ks),lo=L0(Pl(Ns,$s),Ks),A0=xo(Ss,is);to[A0](Ss,is,lo,Nr.transforms,!0)}}}function i0(Bn,Xn){var cr=xo(Bn.target,Xn.name);if(cr){var Rr=U0(Xn,Bn),yr=Rr[Rr.length-1];return{type:cr,property:Xn.name,animatable:Bn,tweens:Rr,duration:yr.end,delay:Rr[0].delay,endDelay:yr.endDelay}}}function o0(Bn,Xn){return Cn(dn(Bn.map(function(cr){return Xn.map(function(Rr){return i0(cr,Rr)})})),function(cr){return!Ct.und(cr)})}function Q0(Bn,Xn){var cr=Bn.length,Rr=function(Nr){return Nr.timelineOffset?Nr.timelineOffset:0},yr={};return yr.duration=cr?Math.max.apply(Math,Bn.map(function(Nr){return Rr(Nr)+Nr.duration})):Xn.duration,yr.delay=cr?Math.min.apply(Math,Bn.map(function(Nr){return Rr(Nr)+Nr.delay})):Xn.delay,yr.endDelay=cr?yr.duration-Math.max.apply(Math,Bn.map(function(Nr){return Rr(Nr)+Nr.duration-Nr.endDelay})):Xn.endDelay,yr}var D0=0;function u1(Bn){var Xn=mn(it,Bn),cr=mn(dt,Bn),Rr=as(cr,Bn),yr=rr(Bn.targets),Nr=o0(yr,Rr),is=Q0(Nr,cr),Ns=D0;return D0++,gn(Xn,{id:Ns,children:[],animatables:yr,animations:Nr,duration:is.duration,delay:is.delay,endDelay:is.endDelay})}var ga=[],Yl=[],R1,Ql=function(){function Bn(){R1=requestAnimationFrame(Xn)}function Xn(cr){var Rr=ga.length;if(Rr){for(var yr=0;yr<Rr;){var Nr=ga[yr];if(!Nr.paused)Nr.tick(cr);else{var is=ga.indexOf(Nr);is>-1&&(ga.splice(is,1),Rr=ga.length)}yr++}Bn()}else R1=cancelAnimationFrame(R1)}return Bn}();function P0(){if(document.hidden){for(var Bn=0,Xn=ga.length;Bn<Xn;Bn++)activeInstance[Bn].pause();Yl=ga.slice(0),ga=[]}else for(var cr=0,Rr=Yl.length;cr<Rr;cr++)Yl[cr].play()}document.addEventListener("visibilitychange",P0);function Lo(Bn){Bn===void 0&&(Bn={});var Xn=0,cr=0,Rr=0,yr,Nr=0,is=null;function Ns(){return window.Promise&&new Promise(function(Ts){return is=Ts})}var Ss=Ns(),kr=u1(Bn);function Ks(){kr.reversed=!kr.reversed;for(var Ts=0,Mo=yr.length;Ts<Mo;Ts++)yr[Ts].reversed=kr.reversed}function $s(Ts){return kr.reversed?kr.duration-Ts:Ts}function lo(){Xn=0,cr=$s(kr.currentTime)*(1/Lo.speed)}function A0(Ts,Mo){Mo&&Mo.seek(Ts-Mo.timelineOffset)}function bo(Ts){if(kr.reversePlayback)for(var T0=Nr;T0--;)A0(Ts,yr[T0]);else for(var Mo=0;Mo<Nr;Mo++)A0(Ts,yr[Mo])}function Eo(Ts){for(var Mo=0,T0=kr.animations,Jo=T0.length;Mo<Jo;){var rn=T0[Mo],ln=rn.animatable,pn=rn.tweens,_n=pn.length-1,On=pn[_n];_n&&(On=Cn(pn,function(O0){return Ts<O0.end})[0]||On);for(var tr=Et(Ts-On.start-On.delay,0,On.duration)/On.duration,ar=isNaN(tr)?1:On.easing(tr),Gr=On.to.strings,Ur=On.round,pr=[],Ir=On.to.numbers.length,ts=void 0,Ls=0;Ls<Ir;Ls++){var zr=void 0,io=On.to.numbers[Ls],So=On.from.numbers[Ls]||0;On.isPath?zr=jt(On.value,ar*io):zr=So+ar*(io-So),Ur&&(On.isColor&&Ls>2||(zr=Math.round(zr*Ur)/Ur)),pr.push(zr)}var co=Gr.length;if(!co)ts=pr[0];else{ts=Gr[0];for(var so=0;so<co;so++){Gr[so];var n0=Gr[so+1],c0=pr[so];isNaN(c0)||(n0?ts+=c0+n0:ts+=c0+" ")}}to[rn.type](ln.target,rn.property,ts,ln.transforms),rn.currentValue=ts,Mo++}}function zo(Ts){kr[Ts]&&!kr.passThrough&&kr[Ts](kr)}function _0(){kr.remaining&&kr.remaining!==!0&&kr.remaining--}function V0(Ts){var Mo=kr.duration,T0=kr.delay,Jo=Mo-kr.endDelay,rn=$s(Ts);kr.progress=Et(rn/Mo*100,0,100),kr.reversePlayback=rn<kr.currentTime,yr&&bo(rn),!kr.began&&kr.currentTime>0&&(kr.began=!0,zo("begin"),zo("loopBegin")),rn<=T0&&kr.currentTime!==0&&Eo(0),(rn>=Jo&&kr.currentTime!==Mo||!Mo)&&Eo(Mo),rn>T0&&rn<Jo?(kr.changeBegan||(kr.changeBegan=!0,kr.changeCompleted=!1,zo("changeBegin")),zo("change"),Eo(rn)):kr.changeBegan&&(kr.changeCompleted=!0,kr.changeBegan=!1,zo("changeComplete")),kr.currentTime=Et(rn,0,Mo),kr.began&&zo("update"),Ts>=Mo&&(cr=0,_0(),kr.remaining?(Xn=Rr,zo("loopComplete"),zo("loopBegin"),kr.direction==="alternate"&&Ks()):(kr.paused=!0,kr.completed||(kr.completed=!0,zo("loopComplete"),zo("complete"),"Promise"in window&&(is(),Ss=Ns()))))}return kr.reset=function(){var Ts=kr.direction;kr.passThrough=!1,kr.currentTime=0,kr.progress=0,kr.paused=!0,kr.began=!1,kr.changeBegan=!1,kr.completed=!1,kr.changeCompleted=!1,kr.reversePlayback=!1,kr.reversed=Ts==="reverse",kr.remaining=kr.loop,yr=kr.children,Nr=yr.length;for(var Mo=Nr;Mo--;)kr.children[Mo].reset();(kr.reversed&&kr.loop!==!0||Ts==="alternate"&&kr.loop===1)&&kr.remaining++,Eo(0)},kr.set=function(Ts,Mo){return Cr(Ts,Mo),kr},kr.tick=function(Ts){Rr=Ts,Xn||(Xn=Rr),V0((Rr+(cr-Xn))*Lo.speed)},kr.seek=function(Ts){V0($s(Ts))},kr.pause=function(){kr.paused=!0,lo()},kr.play=function(){kr.paused&&(kr.paused=!1,ga.push(kr),lo(),R1||Ql())},kr.reverse=function(){Ks(),lo()},kr.restart=function(){kr.reset(),kr.play()},kr.finished=Ss,kr.reset(),kr.autoplay&&kr.play(),kr}function _a(Bn,Xn){for(var cr=Xn.length;cr--;)nn(Bn,Xn[cr].animatable.target)&&Xn.splice(cr,1)}function X1(Bn){for(var Xn=Wn(Bn),cr=ga.length;cr--;){var Rr=ga[cr],yr=Rr.animations,Nr=Rr.children;_a(Xn,yr);for(var is=Nr.length;is--;){var Ns=Nr[is],Ss=Ns.animations;_a(Xn,Ss),!Ss.length&&!Ns.children.length&&Nr.splice(is,1)}!yr.length&&!Nr.length&&Rr.pause()}}function y1(Bn,Xn){Xn===void 0&&(Xn={});var cr=Xn.direction||"normal",Rr=Xn.easing?on(Xn.easing):null,yr=Xn.grid,Nr=Xn.axis,is=Xn.from||0,Ns=is==="first",Ss=is==="center",kr=is==="last",Ks=Ct.arr(Bn),$s=parseFloat(Ks?Bn[0]:Bn),lo=Ks?parseFloat(Bn[1]):0,A0=Rs(Ks?Bn[1]:Bn)||0,bo=Xn.start||0+(Ks?$s:0),Eo=[],zo=0;return function(_0,V0,Ts){if(Ns&&(is=0),Ss&&(is=(Ts-1)/2),kr&&(is=Ts-1),!Eo.length){for(var Mo=0;Mo<Ts;Mo++){if(!yr)Eo.push(Math.abs(is-Mo));else{var T0=Ss?(yr[0]-1)/2:is%yr[0],Jo=Ss?(yr[1]-1)/2:Math.floor(is/yr[0]),rn=Mo%yr[0],ln=Math.floor(Mo/yr[0]),pn=T0-rn,_n=Jo-ln,On=Math.sqrt(pn*pn+_n*_n);Nr==="x"&&(On=-pn),Nr==="y"&&(On=-_n),Eo.push(On)}zo=Math.max.apply(Math,Eo)}Rr&&(Eo=Eo.map(function(ar){return Rr(ar/zo)*zo})),cr==="reverse"&&(Eo=Eo.map(function(ar){return Nr?ar<0?ar*-1:-ar:Math.abs(zo-ar)}))}var tr=Ks?(lo-$s)/zo:$s;return bo+tr*(Math.round(Eo[V0]*100)/100)+A0}}function Tu(Bn){Bn===void 0&&(Bn={});var Xn=Lo(Bn);return Xn.duration=0,Xn.add=function(cr,Rr){var yr=ga.indexOf(Xn),Nr=Xn.children;yr>-1&&ga.splice(yr,1);function is(lo){lo.passThrough=!0}for(var Ns=0;Ns<Nr.length;Ns++)is(Nr[Ns]);var Ss=gn(cr,mn(dt,Bn));Ss.targets=Ss.targets||Bn.targets;var kr=Xn.duration;Ss.autoplay=!1,Ss.direction=Xn.direction,Ss.timelineOffset=Ct.und(Rr)?kr:L0(Rr,kr),is(Xn),Xn.seek(Ss.timelineOffset);var Ks=Lo(Ss);is(Ks),Nr.push(Ks);var $s=Q0(Nr,Bn);return Xn.delay=$s.delay,Xn.endDelay=$s.endDelay,Xn.duration=$s.duration,Xn.seek(0),Xn.reset(),Xn.autoplay&&Xn.play(),Xn},Xn}Lo.version="3.0.0",Lo.speed=1,Lo.running=ga,Lo.remove=X1,Lo.get=Ho,Lo.set=Cr,Lo.convertPx=ho,Lo.path=Wt,Lo.setDashoffset=Un,Lo.stagger=y1,Lo.timeline=Tu,Lo.easing=on,Lo.penner=tn,Lo.random=function(Bn,Xn){return Math.floor(Math.random()*(Xn-Bn+1))+Bn};const Y1=Lo},"./node_modules/three-bmfont-text/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/layout-bmfont-text/index.js"),dt=vt("./node_modules/quad-indices/index.js"),bt=vt("./node_modules/three-bmfont-text/lib/vertices.js"),Tt=vt("./node_modules/three-bmfont-text/lib/utils.js");St.exports=function(Rt){return new Et(Rt)};class Et extends THREE.BufferGeometry{constructor(Rt){super(),typeof Rt=="string"&&(Rt={text:Rt}),this._opt=Object.assign({},Rt),Rt&&this.update(Rt)}update(Rt){if(typeof Rt=="string"&&(Rt={text:Rt}),Rt=Object.assign({},this._opt,Rt),!Rt.font)throw new TypeError("must specify a { font } in options");this.layout=it(Rt);var pt=Rt.flipY!==!1,mt=Rt.font,gt=mt.common.scaleW,Ct=mt.common.scaleH,xt=this.layout.glyphs.filter(function(Qt){var tn=Qt.data;return tn.width*tn.height>0});this.visibleGlyphs=xt;var Dt=bt.positions(xt),Ht=bt.uvs(xt,gt,Ct,pt),Ut=dt([],{clockwise:!0,type:"uint16",count:xt.length});if(this.setIndex(Ut),this.setAttribute("position",new THREE.BufferAttribute(Dt,2)),this.setAttribute("uv",new THREE.BufferAttribute(Ht,2)),!Rt.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(Rt.multipage){var Xt=bt.pages(xt);this.setAttribute("page",new THREE.BufferAttribute(Xt,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var Rt=this.attributes.position.array,pt=this.attributes.position.itemSize;if(!Rt||!pt||Rt.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}Tt.computeSphere(Rt,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var Rt=this.boundingBox,pt=this.attributes.position.array,mt=this.attributes.position.itemSize;if(!pt||!mt||pt.length<2){Rt.makeEmpty();return}Tt.computeBox(pt,Rt)}}},"./node_modules/three-bmfont-text/lib/utils.js":St=>{var Gt=2,vt={min:[0,0],max:[0,0]};function it(dt){var bt=dt.length/Gt;vt.min[0]=dt[0],vt.min[1]=dt[1],vt.max[0]=dt[0],vt.max[1]=dt[1];for(var Tt=0;Tt<bt;Tt++){var Et=dt[Tt*Gt+0],Mt=dt[Tt*Gt+1];vt.min[0]=Math.min(Et,vt.min[0]),vt.min[1]=Math.min(Mt,vt.min[1]),vt.max[0]=Math.max(Et,vt.max[0]),vt.max[1]=Math.max(Mt,vt.max[1])}}St.exports.computeBox=function(dt,bt){it(dt),bt.min.set(vt.min[0],vt.min[1],0),bt.max.set(vt.max[0],vt.max[1],0)},St.exports.computeSphere=function(dt,bt){it(dt);var Tt=vt.min[0],Et=vt.min[1],Mt=vt.max[0],Rt=vt.max[1],pt=Mt-Tt,mt=Rt-Et,gt=Math.sqrt(pt*pt+mt*mt);bt.center.set(Tt+pt/2,Et+mt/2,0),bt.radius=gt/2}},"./node_modules/three-bmfont-text/lib/vertices.js":St=>{St.exports.pages=function(vt){var it=new Float32Array(vt.length*4*1),dt=0;return vt.forEach(function(bt){var Tt=bt.data.page||0;it[dt++]=Tt,it[dt++]=Tt,it[dt++]=Tt,it[dt++]=Tt}),it},St.exports.uvs=function(vt,it,dt,bt){var Tt=new Float32Array(vt.length*4*2),Et=0;return vt.forEach(function(Mt){var Rt=Mt.data,pt=Rt.x+Rt.width,mt=Rt.y+Rt.height,gt=Rt.x/it,Ct=Rt.y/dt,xt=pt/it,Dt=mt/dt;bt&&(Ct=(dt-Rt.y)/dt,Dt=(dt-mt)/dt),Tt[Et++]=gt,Tt[Et++]=Ct,Tt[Et++]=gt,Tt[Et++]=Dt,Tt[Et++]=xt,Tt[Et++]=Dt,Tt[Et++]=xt,Tt[Et++]=Ct}),Tt},St.exports.positions=function(vt){var it=new Float32Array(vt.length*4*2),dt=0;return vt.forEach(function(bt){var Tt=bt.data,Et=bt.position[0]+Tt.xoffset,Mt=bt.position[1]+Tt.yoffset,Rt=Tt.width,pt=Tt.height;it[dt++]=Et,it[dt++]=Mt,it[dt++]=Et,it[dt++]=Mt+pt,it[dt++]=Et+Rt,it[dt++]=Mt+pt,it[dt++]=Et+Rt,it[dt++]=Mt}),it}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(St,Gt,vt){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(it,dt){St.exports=dt()})(this,function(){var it=typeof window<"u"?window:typeof vt.g<"u"?vt.g:typeof self<"u"?self:{};function dt(Ut){return Ut&&Ut.__esModule&&Object.prototype.hasOwnProperty.call(Ut,"default")?Ut.default:Ut}function bt(Ut,Xt){return Xt={exports:{}},Ut(Xt,Xt.exports),Xt.exports}var Tt=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},Et=function(Xt,Qt){for(var tn=0,on=Xt.length;tn<on;tn++)Qt[tn]=Xt[tn]},Mt=function(Xt,Qt){for(var tn in Qt)Qt.hasOwnProperty(tn)&&(Xt[tn]=Qt[tn]);return Xt},Rt=bt(function(Ut,Xt){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(Qt,tn){Ut.exports=tn()})(it,function(){var Qt=function(rn,ln){if(!(rn instanceof ln))throw new TypeError("Cannot call a class as a function")},tn=function(){function rn(ln,pn){for(var _n=0;_n<pn.length;_n++){var On=pn[_n];On.enumerable=On.enumerable||!1,On.configurable=!0,"value"in On&&(On.writable=!0),Object.defineProperty(ln,On.key,On)}}return function(ln,pn,_n){return pn&&rn(ln.prototype,pn),_n&&rn(ln,_n),ln}}(),on=function(){function rn(ln,pn){var _n=[],On=!0,tr=!1,ar=void 0;try{for(var Gr=ln[Symbol.iterator](),Ur;!(On=(Ur=Gr.next()).done)&&(_n.push(Ur.value),!(pn&&_n.length===pn));On=!0);}catch(pr){tr=!0,ar=pr}finally{try{!On&&Gr.return&&Gr.return()}finally{if(tr)throw ar}}return _n}return function(ln,pn){if(Array.isArray(ln))return ln;if(Symbol.iterator in Object(ln))return rn(ln,pn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),vn=.001,fn=1,Cn=function(ln,pn){return"data:"+ln+","+encodeURIComponent(pn)},dn=function(ln,pn,_n){return ln+(pn-ln)*_n},An=function(){var rn=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return rn}}(),nn=function(){var rn=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return rn}}(),Zt=function(){var rn=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return rn}}(),mn=function(){var rn=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return rn}}(),gn=function(){var rn=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),ln=rn?parseInt(rn[1],10):null;return function(){return ln}}(),In=function(){var rn=!1;return rn=An()&&Zt()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return rn}}(),Vn=function(){var rn=!1;if(gn()===65){var ln=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(ln){var pn=ln[1].split("."),_n=on(pn,4);_n[0],_n[1];var On=_n[2],tr=_n[3];rn=parseInt(On,10)===3325&&parseInt(tr,10)<148}}return function(){return rn}}(),Zn=function(){var rn=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return rn}}(),lr=function(){var ln=window.orientation==90||window.orientation==-90;return Zn()?!ln:ln},hr=function(ln){return!(isNaN(ln)||ln<=vn||ln>fn)},Lr=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},Tr=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},As=function(ln){if(nn())return!1;if(ln.requestFullscreen)ln.requestFullscreen();else if(ln.webkitRequestFullscreen)ln.webkitRequestFullscreen();else if(ln.mozRequestFullScreen)ln.mozRequestFullScreen();else if(ln.msRequestFullscreen)ln.msRequestFullscreen();else return!1;return!0},Yr=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},ms=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Rs=function(ln,pn,_n,On){var tr=ln.createShader(ln.VERTEX_SHADER);ln.shaderSource(tr,pn),ln.compileShader(tr);var ar=ln.createShader(ln.FRAGMENT_SHADER);ln.shaderSource(ar,_n),ln.compileShader(ar);var Gr=ln.createProgram();ln.attachShader(Gr,tr),ln.attachShader(Gr,ar);for(var Ur in On)ln.bindAttribLocation(Gr,On[Ur],Ur);return ln.linkProgram(Gr),ln.deleteShader(tr),ln.deleteShader(ar),Gr},Zs=function(ln,pn){for(var _n={},On=ln.getProgramParameter(pn,ln.ACTIVE_UNIFORMS),tr="",ar=0;ar<On;ar++){var Gr=ln.getActiveUniform(pn,ar);tr=Gr.name.replace("[0]",""),_n[tr]=ln.getUniformLocation(pn,tr)}return _n},ao=function(ln,pn,_n,On,tr,ar,Gr){var Ur=1/(pn-_n),pr=1/(On-tr),Ir=1/(ar-Gr);return ln[0]=-2*Ur,ln[1]=0,ln[2]=0,ln[3]=0,ln[4]=0,ln[5]=-2*pr,ln[6]=0,ln[7]=0,ln[8]=0,ln[9]=0,ln[10]=2*Ir,ln[11]=0,ln[12]=(pn+_n)*Ur,ln[13]=(tr+On)*pr,ln[14]=(Gr+ar)*Ir,ln[15]=1,ln},go=function(){var ln=!1;return function(pn){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(pn)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(pn.substr(0,4)))&&(ln=!0)}(navigator.userAgent||navigator.vendor||window.opera),ln},ho=function(ln,pn){for(var _n in pn)pn.hasOwnProperty(_n)&&(ln[_n]=pn[_n]);return ln},Ys=function(ln){if(An()){var pn=ln.style.width,_n=ln.style.height;ln.style.width=parseInt(pn)+1+"px",ln.style.height=parseInt(_n)+"px",setTimeout(function(){ln.style.width=pn,ln.style.height=_n},100)}window.canvas=ln},xo=function(){var rn=Math.PI/180,ln=Math.PI*.25;function pn(pr,Ir,ts,Ls){var zr=Math.tan(Ir?Ir.upDegrees*rn:ln),io=Math.tan(Ir?Ir.downDegrees*rn:ln),So=Math.tan(Ir?Ir.leftDegrees*rn:ln),co=Math.tan(Ir?Ir.rightDegrees*rn:ln),so=2/(So+co),n0=2/(zr+io);return pr[0]=so,pr[1]=0,pr[2]=0,pr[3]=0,pr[4]=0,pr[5]=n0,pr[6]=0,pr[7]=0,pr[8]=-((So-co)*so*.5),pr[9]=(zr-io)*n0*.5,pr[10]=Ls/(ts-Ls),pr[11]=-1,pr[12]=0,pr[13]=0,pr[14]=Ls*ts/(ts-Ls),pr[15]=0,pr}function _n(pr,Ir,ts){var Ls=Ir[0],zr=Ir[1],io=Ir[2],So=Ir[3],co=Ls+Ls,so=zr+zr,n0=io+io,c0=Ls*co,O0=Ls*so,w0=Ls*n0,Y0=zr*so,xa=zr*n0,z0=io*n0,q0=So*co,W0=So*so,Ml=So*n0;return pr[0]=1-(Y0+z0),pr[1]=O0+Ml,pr[2]=w0-W0,pr[3]=0,pr[4]=O0-Ml,pr[5]=1-(c0+z0),pr[6]=xa+q0,pr[7]=0,pr[8]=w0+W0,pr[9]=xa-q0,pr[10]=1-(c0+Y0),pr[11]=0,pr[12]=ts[0],pr[13]=ts[1],pr[14]=ts[2],pr[15]=1,pr}function On(pr,Ir,ts){var Ls=ts[0],zr=ts[1],io=ts[2],So,co,so,n0,c0,O0,w0,Y0,xa,z0,q0,W0;return Ir===pr?(pr[12]=Ir[0]*Ls+Ir[4]*zr+Ir[8]*io+Ir[12],pr[13]=Ir[1]*Ls+Ir[5]*zr+Ir[9]*io+Ir[13],pr[14]=Ir[2]*Ls+Ir[6]*zr+Ir[10]*io+Ir[14],pr[15]=Ir[3]*Ls+Ir[7]*zr+Ir[11]*io+Ir[15]):(So=Ir[0],co=Ir[1],so=Ir[2],n0=Ir[3],c0=Ir[4],O0=Ir[5],w0=Ir[6],Y0=Ir[7],xa=Ir[8],z0=Ir[9],q0=Ir[10],W0=Ir[11],pr[0]=So,pr[1]=co,pr[2]=so,pr[3]=n0,pr[4]=c0,pr[5]=O0,pr[6]=w0,pr[7]=Y0,pr[8]=xa,pr[9]=z0,pr[10]=q0,pr[11]=W0,pr[12]=So*Ls+c0*zr+xa*io+Ir[12],pr[13]=co*Ls+O0*zr+z0*io+Ir[13],pr[14]=so*Ls+w0*zr+q0*io+Ir[14],pr[15]=n0*Ls+Y0*zr+W0*io+Ir[15]),pr}function tr(pr,Ir){var ts=Ir[0],Ls=Ir[1],zr=Ir[2],io=Ir[3],So=Ir[4],co=Ir[5],so=Ir[6],n0=Ir[7],c0=Ir[8],O0=Ir[9],w0=Ir[10],Y0=Ir[11],xa=Ir[12],z0=Ir[13],q0=Ir[14],W0=Ir[15],Ml=ts*co-Ls*So,h1=ts*so-zr*So,w1=ts*n0-io*So,I1=Ls*so-zr*co,q1=Ls*n0-io*co,J1=zr*n0-io*so,Z1=c0*z0-O0*xa,F1=c0*q0-w0*xa,k1=c0*W0-Y0*xa,Vl=O0*q0-w0*z0,N1=O0*W0-Y0*z0,Ol=w0*W0-Y0*q0,jo=Ml*Ol-h1*N1+w1*Vl+I1*k1-q1*F1+J1*Z1;return jo?(jo=1/jo,pr[0]=(co*Ol-so*N1+n0*Vl)*jo,pr[1]=(zr*N1-Ls*Ol-io*Vl)*jo,pr[2]=(z0*J1-q0*q1+W0*I1)*jo,pr[3]=(w0*q1-O0*J1-Y0*I1)*jo,pr[4]=(so*k1-So*Ol-n0*F1)*jo,pr[5]=(ts*Ol-zr*k1+io*F1)*jo,pr[6]=(q0*w1-xa*J1-W0*h1)*jo,pr[7]=(c0*J1-w0*w1+Y0*h1)*jo,pr[8]=(So*N1-co*k1+n0*Z1)*jo,pr[9]=(Ls*k1-ts*N1-io*Z1)*jo,pr[10]=(xa*q1-z0*w1+W0*Ml)*jo,pr[11]=(O0*w1-c0*q1-Y0*Ml)*jo,pr[12]=(co*F1-So*Vl-so*Z1)*jo,pr[13]=(ts*Vl-Ls*F1+zr*Z1)*jo,pr[14]=(z0*h1-xa*I1-q0*Ml)*jo,pr[15]=(c0*I1-O0*h1+w0*Ml)*jo,pr):null}var ar=new Float32Array([0,0,0,1]),Gr=new Float32Array([0,0,0]);function Ur(pr,Ir,ts,Ls,zr,io){pn(pr,Ls||null,io.depthNear,io.depthFar);var So=ts.orientation||ar,co=ts.position||Gr;_n(Ir,So,co),zr&&On(Ir,Ir,zr),tr(Ir,Ir)}return function(pr,Ir,ts){return!pr||!Ir?!1:(pr.pose=Ir,pr.timestamp=Ir.timestamp,Ur(pr.leftProjectionMatrix,pr.leftViewMatrix,Ir,ts._getFieldOfView("left"),ts._getEyeOffset("left"),ts),Ur(pr.rightProjectionMatrix,pr.rightViewMatrix,Ir,ts._getFieldOfView("right"),ts._getEyeOffset("right"),ts),!0)}}(),$o=function(){var ln=window.self!==window.top,pn=Pn(document.referrer),_n=Pn(window.location.href);return ln&&pn!==_n},Pn=function(ln){var pn,_n=ln.indexOf("://");_n!==-1?pn=_n+3:pn=0;var On=ln.indexOf("/",pn);return On===-1&&(On=ln.length),ln.substring(0,On)},j0=function(ln){if(ln.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var pn=2*Math.acos(ln.w);return pn},Ho=function(){var rn={};return function(ln,pn){rn[ln]===void 0&&(console.warn("webvr-polyfill: "+pn),rn[ln]=!0)}}(),oo=function(ln,pn){var _n=pn?"Please use "+pn+" instead.":"";Ho(ln,ln+" has been deprecated. This may not work on native WebVR displays. "+_n)};function L0(rn,ln,pn){if(!ln){pn(rn);return}for(var _n=[],On=null,tr=0;tr<ln.length;++tr){var ar=ln[tr];switch(ar){case rn.TEXTURE_BINDING_2D:case rn.TEXTURE_BINDING_CUBE_MAP:var Gr=ln[++tr];if(Gr<rn.TEXTURE0||Gr>rn.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),_n.push(null,null);break}On||(On=rn.getParameter(rn.ACTIVE_TEXTURE)),rn.activeTexture(Gr),_n.push(rn.getParameter(ar),null);break;case rn.ACTIVE_TEXTURE:On=rn.getParameter(rn.ACTIVE_TEXTURE),_n.push(null);break;default:_n.push(rn.getParameter(ar));break}}pn(rn);for(var tr=0;tr<ln.length;++tr){var ar=ln[tr],Ur=_n[tr];switch(ar){case rn.ACTIVE_TEXTURE:break;case rn.ARRAY_BUFFER_BINDING:rn.bindBuffer(rn.ARRAY_BUFFER,Ur);break;case rn.COLOR_CLEAR_VALUE:rn.clearColor(Ur[0],Ur[1],Ur[2],Ur[3]);break;case rn.COLOR_WRITEMASK:rn.colorMask(Ur[0],Ur[1],Ur[2],Ur[3]);break;case rn.CURRENT_PROGRAM:rn.useProgram(Ur);break;case rn.ELEMENT_ARRAY_BUFFER_BINDING:rn.bindBuffer(rn.ELEMENT_ARRAY_BUFFER,Ur);break;case rn.FRAMEBUFFER_BINDING:rn.bindFramebuffer(rn.FRAMEBUFFER,Ur);break;case rn.RENDERBUFFER_BINDING:rn.bindRenderbuffer(rn.RENDERBUFFER,Ur);break;case rn.TEXTURE_BINDING_2D:var Gr=ln[++tr];if(Gr<rn.TEXTURE0||Gr>rn.TEXTURE31)break;rn.activeTexture(Gr),rn.bindTexture(rn.TEXTURE_2D,Ur);break;case rn.TEXTURE_BINDING_CUBE_MAP:var Gr=ln[++tr];if(Gr<rn.TEXTURE0||Gr>rn.TEXTURE31)break;rn.activeTexture(Gr),rn.bindTexture(rn.TEXTURE_CUBE_MAP,Ur);break;case rn.VIEWPORT:rn.viewport(Ur[0],Ur[1],Ur[2],Ur[3]);break;case rn.BLEND:case rn.CULL_FACE:case rn.DEPTH_TEST:case rn.SCISSOR_TEST:case rn.STENCIL_TEST:Ur?rn.enable(ar):rn.disable(ar);break;default:console.log("No GL restore behavior for 0x"+ar.toString(16));break}On&&rn.activeTexture(On)}}var f0=L0,Pl=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),na=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function p0(rn,ln,pn,_n){this.gl=rn,this.cardboardUI=ln,this.bufferScale=pn,this.dirtySubmitFrameBindings=_n,this.ctxAttribs=rn.getContextAttributes(),this.instanceExt=rn.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=rn.drawingBufferWidth,this.bufferHeight=rn.drawingBufferHeight,this.realBindFramebuffer=rn.bindFramebuffer,this.realEnable=rn.enable,this.realDisable=rn.disable,this.realColorMask=rn.colorMask,this.realClearColor=rn.clearColor,this.realViewport=rn.viewport,An()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(rn.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(rn.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Rs(rn,Pl,na,this.attribs),this.uniforms=Zs(rn,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=rn.createBuffer(),this.indexBuffer=rn.createBuffer(),this.indexCount=0,this.renderTarget=rn.createTexture(),this.framebuffer=rn.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=rn.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=rn.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=rn.createRenderbuffer()),this.patch(),this.onResize()}p0.prototype.destroy=function(){var rn=this.gl;this.unpatch(),rn.deleteProgram(this.program),rn.deleteBuffer(this.vertexBuffer),rn.deleteBuffer(this.indexBuffer),rn.deleteTexture(this.renderTarget),rn.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&rn.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&rn.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&rn.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},p0.prototype.onResize=function(){var rn=this.gl,ln=this,pn=[rn.RENDERBUFFER_BINDING,rn.TEXTURE_BINDING_2D,rn.TEXTURE0];f0(rn,pn,function(_n){ln.realBindFramebuffer.call(_n,_n.FRAMEBUFFER,null),ln.scissorTest&&ln.realDisable.call(_n,_n.SCISSOR_TEST),ln.realColorMask.call(_n,!0,!0,!0,!0),ln.realViewport.call(_n,0,0,_n.drawingBufferWidth,_n.drawingBufferHeight),ln.realClearColor.call(_n,0,0,0,1),_n.clear(_n.COLOR_BUFFER_BIT),ln.realBindFramebuffer.call(_n,_n.FRAMEBUFFER,ln.framebuffer),_n.bindTexture(_n.TEXTURE_2D,ln.renderTarget),_n.texImage2D(_n.TEXTURE_2D,0,ln.ctxAttribs.alpha?_n.RGBA:_n.RGB,ln.bufferWidth,ln.bufferHeight,0,ln.ctxAttribs.alpha?_n.RGBA:_n.RGB,_n.UNSIGNED_BYTE,null),_n.texParameteri(_n.TEXTURE_2D,_n.TEXTURE_MAG_FILTER,_n.LINEAR),_n.texParameteri(_n.TEXTURE_2D,_n.TEXTURE_MIN_FILTER,_n.LINEAR),_n.texParameteri(_n.TEXTURE_2D,_n.TEXTURE_WRAP_S,_n.CLAMP_TO_EDGE),_n.texParameteri(_n.TEXTURE_2D,_n.TEXTURE_WRAP_T,_n.CLAMP_TO_EDGE),_n.framebufferTexture2D(_n.FRAMEBUFFER,_n.COLOR_ATTACHMENT0,_n.TEXTURE_2D,ln.renderTarget,0),ln.ctxAttribs.depth&&ln.ctxAttribs.stencil?(_n.bindRenderbuffer(_n.RENDERBUFFER,ln.depthStencilBuffer),_n.renderbufferStorage(_n.RENDERBUFFER,_n.DEPTH_STENCIL,ln.bufferWidth,ln.bufferHeight),_n.framebufferRenderbuffer(_n.FRAMEBUFFER,_n.DEPTH_STENCIL_ATTACHMENT,_n.RENDERBUFFER,ln.depthStencilBuffer)):ln.ctxAttribs.depth?(_n.bindRenderbuffer(_n.RENDERBUFFER,ln.depthBuffer),_n.renderbufferStorage(_n.RENDERBUFFER,_n.DEPTH_COMPONENT16,ln.bufferWidth,ln.bufferHeight),_n.framebufferRenderbuffer(_n.FRAMEBUFFER,_n.DEPTH_ATTACHMENT,_n.RENDERBUFFER,ln.depthBuffer)):ln.ctxAttribs.stencil&&(_n.bindRenderbuffer(_n.RENDERBUFFER,ln.stencilBuffer),_n.renderbufferStorage(_n.RENDERBUFFER,_n.STENCIL_INDEX8,ln.bufferWidth,ln.bufferHeight),_n.framebufferRenderbuffer(_n.FRAMEBUFFER,_n.STENCIL_ATTACHMENT,_n.RENDERBUFFER,ln.stencilBuffer)),!_n.checkFramebufferStatus(_n.FRAMEBUFFER)===_n.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),ln.realBindFramebuffer.call(_n,_n.FRAMEBUFFER,ln.lastBoundFramebuffer),ln.scissorTest&&ln.realEnable.call(_n,_n.SCISSOR_TEST),ln.realColorMask.apply(_n,ln.colorMask),ln.realViewport.apply(_n,ln.viewport),ln.realClearColor.apply(_n,ln.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},p0.prototype.patch=function(){if(!this.isPatched){var rn=this,ln=this.gl.canvas,pn=this.gl;An()||(ln.width=Lr()*this.bufferScale,ln.height=Tr()*this.bufferScale,Object.defineProperty(ln,"width",{configurable:!0,enumerable:!0,get:function(){return rn.bufferWidth},set:function(On){rn.bufferWidth=On,rn.realCanvasWidth.set.call(ln,On),rn.onResize()}}),Object.defineProperty(ln,"height",{configurable:!0,enumerable:!0,get:function(){return rn.bufferHeight},set:function(On){rn.bufferHeight=On,rn.realCanvasHeight.set.call(ln,On),rn.onResize()}})),this.lastBoundFramebuffer=pn.getParameter(pn.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(pn.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(_n,On){rn.lastBoundFramebuffer=On||rn.framebuffer,rn.realBindFramebuffer.call(pn,_n,rn.lastBoundFramebuffer)},this.cullFace=pn.getParameter(pn.CULL_FACE),this.depthTest=pn.getParameter(pn.DEPTH_TEST),this.blend=pn.getParameter(pn.BLEND),this.scissorTest=pn.getParameter(pn.SCISSOR_TEST),this.stencilTest=pn.getParameter(pn.STENCIL_TEST),pn.enable=function(_n){switch(_n){case pn.CULL_FACE:rn.cullFace=!0;break;case pn.DEPTH_TEST:rn.depthTest=!0;break;case pn.BLEND:rn.blend=!0;break;case pn.SCISSOR_TEST:rn.scissorTest=!0;break;case pn.STENCIL_TEST:rn.stencilTest=!0;break}rn.realEnable.call(pn,_n)},pn.disable=function(_n){switch(_n){case pn.CULL_FACE:rn.cullFace=!1;break;case pn.DEPTH_TEST:rn.depthTest=!1;break;case pn.BLEND:rn.blend=!1;break;case pn.SCISSOR_TEST:rn.scissorTest=!1;break;case pn.STENCIL_TEST:rn.stencilTest=!1;break}rn.realDisable.call(pn,_n)},this.colorMask=pn.getParameter(pn.COLOR_WRITEMASK),pn.colorMask=function(_n,On,tr,ar){rn.colorMask[0]=_n,rn.colorMask[1]=On,rn.colorMask[2]=tr,rn.colorMask[3]=ar,rn.realColorMask.call(pn,_n,On,tr,ar)},this.clearColor=pn.getParameter(pn.COLOR_CLEAR_VALUE),pn.clearColor=function(_n,On,tr,ar){rn.clearColor[0]=_n,rn.clearColor[1]=On,rn.clearColor[2]=tr,rn.clearColor[3]=ar,rn.realClearColor.call(pn,_n,On,tr,ar)},this.viewport=pn.getParameter(pn.VIEWPORT),pn.viewport=function(_n,On,tr,ar){rn.viewport[0]=_n,rn.viewport[1]=On,rn.viewport[2]=tr,rn.viewport[3]=ar,rn.realViewport.call(pn,_n,On,tr,ar)},this.isPatched=!0,Ys(ln)}},p0.prototype.unpatch=function(){if(this.isPatched){var rn=this.gl,ln=this.gl.canvas;An()||(Object.defineProperty(ln,"width",this.realCanvasWidth),Object.defineProperty(ln,"height",this.realCanvasHeight)),ln.width=this.bufferWidth,ln.height=this.bufferHeight,rn.bindFramebuffer=this.realBindFramebuffer,rn.enable=this.realEnable,rn.disable=this.realDisable,rn.colorMask=this.realColorMask,rn.clearColor=this.realClearColor,rn.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&rn.bindFramebuffer(rn.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Ys(ln)},1)}},p0.prototype.setTextureBounds=function(rn,ln){rn||(rn=[0,0,.5,1]),ln||(ln=[.5,0,.5,1]),this.viewportOffsetScale[0]=rn[0],this.viewportOffsetScale[1]=rn[1],this.viewportOffsetScale[2]=rn[2],this.viewportOffsetScale[3]=rn[3],this.viewportOffsetScale[4]=ln[0],this.viewportOffsetScale[5]=ln[1],this.viewportOffsetScale[6]=ln[2],this.viewportOffsetScale[7]=ln[3]},p0.prototype.submitFrame=function(){var rn=this.gl,ln=this,pn=[];if(this.dirtySubmitFrameBindings||pn.push(rn.CURRENT_PROGRAM,rn.ARRAY_BUFFER_BINDING,rn.ELEMENT_ARRAY_BUFFER_BINDING,rn.TEXTURE_BINDING_2D,rn.TEXTURE0),f0(rn,pn,function(On){ln.realBindFramebuffer.call(On,On.FRAMEBUFFER,null);var tr=0,ar=0;ln.instanceExt&&(tr=On.getVertexAttrib(ln.attribs.position,ln.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),ar=On.getVertexAttrib(ln.attribs.texCoord,ln.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),ln.cullFace&&ln.realDisable.call(On,On.CULL_FACE),ln.depthTest&&ln.realDisable.call(On,On.DEPTH_TEST),ln.blend&&ln.realDisable.call(On,On.BLEND),ln.scissorTest&&ln.realDisable.call(On,On.SCISSOR_TEST),ln.stencilTest&&ln.realDisable.call(On,On.STENCIL_TEST),ln.realColorMask.call(On,!0,!0,!0,!0),ln.realViewport.call(On,0,0,On.drawingBufferWidth,On.drawingBufferHeight),(ln.ctxAttribs.alpha||An())&&(ln.realClearColor.call(On,0,0,0,1),On.clear(On.COLOR_BUFFER_BIT)),On.useProgram(ln.program),On.bindBuffer(On.ELEMENT_ARRAY_BUFFER,ln.indexBuffer),On.bindBuffer(On.ARRAY_BUFFER,ln.vertexBuffer),On.enableVertexAttribArray(ln.attribs.position),On.enableVertexAttribArray(ln.attribs.texCoord),On.vertexAttribPointer(ln.attribs.position,2,On.FLOAT,!1,20,0),On.vertexAttribPointer(ln.attribs.texCoord,3,On.FLOAT,!1,20,8),ln.instanceExt&&(tr!=0&&ln.instanceExt.vertexAttribDivisorANGLE(ln.attribs.position,0),ar!=0&&ln.instanceExt.vertexAttribDivisorANGLE(ln.attribs.texCoord,0)),On.activeTexture(On.TEXTURE0),On.uniform1i(ln.uniforms.diffuse,0),On.bindTexture(On.TEXTURE_2D,ln.renderTarget),On.uniform4fv(ln.uniforms.viewportOffsetScale,ln.viewportOffsetScale),On.drawElements(On.TRIANGLES,ln.indexCount,On.UNSIGNED_SHORT,0),ln.cardboardUI&&ln.cardboardUI.renderNoState(),ln.realBindFramebuffer.call(ln.gl,On.FRAMEBUFFER,ln.framebuffer),ln.ctxAttribs.preserveDrawingBuffer||(ln.realClearColor.call(On,0,0,0,0),On.clear(On.COLOR_BUFFER_BIT)),ln.dirtySubmitFrameBindings||ln.realBindFramebuffer.call(On,On.FRAMEBUFFER,ln.lastBoundFramebuffer),ln.cullFace&&ln.realEnable.call(On,On.CULL_FACE),ln.depthTest&&ln.realEnable.call(On,On.DEPTH_TEST),ln.blend&&ln.realEnable.call(On,On.BLEND),ln.scissorTest&&ln.realEnable.call(On,On.SCISSOR_TEST),ln.stencilTest&&ln.realEnable.call(On,On.STENCIL_TEST),ln.realColorMask.apply(On,ln.colorMask),ln.realViewport.apply(On,ln.viewport),(ln.ctxAttribs.alpha||!ln.ctxAttribs.preserveDrawingBuffer)&&ln.realClearColor.apply(On,ln.clearColor),ln.instanceExt&&(tr!=0&&ln.instanceExt.vertexAttribDivisorANGLE(ln.attribs.position,tr),ar!=0&&ln.instanceExt.vertexAttribDivisorANGLE(ln.attribs.texCoord,ar))}),An()){var _n=rn.canvas;(_n.width!=ln.bufferWidth||_n.height!=ln.bufferHeight)&&(ln.bufferWidth=_n.width,ln.bufferHeight=_n.height,ln.onResize())}},p0.prototype.updateDeviceInfo=function(rn){var ln=this.gl,pn=this,_n=[ln.ARRAY_BUFFER_BINDING,ln.ELEMENT_ARRAY_BUFFER_BINDING];f0(ln,_n,function(On){var tr=pn.computeMeshVertices_(pn.meshWidth,pn.meshHeight,rn);if(On.bindBuffer(On.ARRAY_BUFFER,pn.vertexBuffer),On.bufferData(On.ARRAY_BUFFER,tr,On.STATIC_DRAW),!pn.indexCount){var ar=pn.computeMeshIndices_(pn.meshWidth,pn.meshHeight);On.bindBuffer(On.ELEMENT_ARRAY_BUFFER,pn.indexBuffer),On.bufferData(On.ELEMENT_ARRAY_BUFFER,ar,On.STATIC_DRAW),pn.indexCount=ar.length}})},p0.prototype.computeMeshVertices_=function(rn,ln,pn){for(var _n=new Float32Array(2*rn*ln*5),On=pn.getLeftEyeVisibleTanAngles(),tr=pn.getLeftEyeNoLensTanAngles(),ar=pn.getLeftEyeVisibleScreenRect(tr),Gr=0,Ur=0;Ur<2;Ur++){for(var pr=0;pr<ln;pr++)for(var Ir=0;Ir<rn;Ir++,Gr++){var ts=Ir/(rn-1),Ls=pr/(ln-1),zr=ts,io=Ls,So=dn(On[0],On[2],ts),co=dn(On[3],On[1],Ls),so=Math.sqrt(So*So+co*co),n0=pn.distortion.distortInverse(so),c0=So*n0/so,O0=co*n0/so;ts=(c0-tr[0])/(tr[2]-tr[0]),Ls=(O0-tr[3])/(tr[1]-tr[3]),ts=(ar.x+ts*ar.width-.5)*2,Ls=(ar.y+Ls*ar.height-.5)*2,_n[Gr*5+0]=ts,_n[Gr*5+1]=Ls,_n[Gr*5+2]=zr,_n[Gr*5+3]=io,_n[Gr*5+4]=Ur}var w0=On[2]-On[0];On[0]=-(w0+On[0]),On[2]=w0-On[2],w0=tr[2]-tr[0],tr[0]=-(w0+tr[0]),tr[2]=w0-tr[2],ar.x=1-(ar.x+ar.width)}return _n},p0.prototype.computeMeshIndices_=function(rn,ln){for(var pn=new Uint16Array(2*(rn-1)*(ln-1)*6),_n=rn/2,On=ln/2,tr=0,ar=0,Gr=0;Gr<2;Gr++)for(var Ur=0;Ur<ln;Ur++)for(var pr=0;pr<rn;pr++,tr++)pr==0||Ur==0||(pr<=_n==Ur<=On?(pn[ar++]=tr,pn[ar++]=tr-rn-1,pn[ar++]=tr-rn,pn[ar++]=tr-rn-1,pn[ar++]=tr,pn[ar++]=tr-1):(pn[ar++]=tr-1,pn[ar++]=tr-rn,pn[ar++]=tr,pn[ar++]=tr-rn,pn[ar++]=tr-1,pn[ar++]=tr-rn-1));return pn},p0.prototype.getOwnPropertyDescriptor_=function(rn,ln){var pn=Object.getOwnPropertyDescriptor(rn,ln);return(pn.get===void 0||pn.set===void 0)&&(pn.configurable=!0,pn.enumerable=!0,pn.get=function(){return this.getAttribute(ln)},pn.set=function(_n){this.setAttribute(ln,_n)}),pn};var es=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Mn=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),bn=Math.PI/180,Hn=60,Dn=12,Un=20,Gn=1,un=.75,Wt=.3125,jt=4,yn=28,Rn=1.5;function Wn(rn){this.gl=rn,this.attribs={position:0},this.program=Rs(rn,es,Mn,this.attribs),this.uniforms=Zs(rn,this.program),this.vertexBuffer=rn.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}Wn.prototype.destroy=function(){var rn=this.gl;this.listener&&rn.canvas.removeEventListener("click",this.listener,!1),rn.deleteProgram(this.program),rn.deleteBuffer(this.vertexBuffer)},Wn.prototype.listen=function(rn,ln){var pn=this.gl.canvas;this.listener=function(_n){var On=pn.clientWidth/2,tr=yn*Rn;_n.clientX>On-tr&&_n.clientX<On+tr&&_n.clientY>pn.clientHeight-tr?rn(_n):_n.clientX<tr&&_n.clientY<tr&&ln(_n)},pn.addEventListener("click",this.listener,!1)},Wn.prototype.onResize=function(){var rn=this.gl,ln=this,pn=[rn.ARRAY_BUFFER_BINDING];f0(rn,pn,function(_n){var On=[],tr=_n.drawingBufferWidth/2,ar=Math.max(screen.width,screen.height)*window.devicePixelRatio,Gr=_n.drawingBufferWidth/ar,Ur=Gr*window.devicePixelRatio,pr=jt*Ur/2,Ir=yn*Rn*Ur,ts=yn*Ur/2,Ls=(yn*Rn-yn)*Ur;On.push(tr-pr,Ir),On.push(tr-pr,_n.drawingBufferHeight),On.push(tr+pr,Ir),On.push(tr+pr,_n.drawingBufferHeight),ln.gearOffset=On.length/2;function zr(n0,c0){var O0=(90-n0)*bn,w0=Math.cos(O0),Y0=Math.sin(O0);On.push(Wt*w0*ts+tr,Wt*Y0*ts+ts),On.push(c0*w0*ts+tr,c0*Y0*ts+ts)}for(var io=0;io<=6;io++){var So=io*Hn;zr(So,Gn),zr(So+Dn,Gn),zr(So+Un,un),zr(So+(Hn-Un),un),zr(So+(Hn-Dn),Gn)}ln.gearVertexCount=On.length/2-ln.gearOffset,ln.arrowOffset=On.length/2;function co(n0,c0){On.push(Ls+n0,_n.drawingBufferHeight-Ls-c0)}var so=pr/Math.sin(45*bn);co(0,ts),co(ts,0),co(ts+so,so),co(so,ts+so),co(so,ts-so),co(0,ts),co(ts,ts*2),co(ts+so,ts*2-so),co(so,ts-so),co(0,ts),co(so,ts-pr),co(yn*Ur,ts-pr),co(so,ts+pr),co(yn*Ur,ts+pr),ln.arrowVertexCount=On.length/2-ln.arrowOffset,_n.bindBuffer(_n.ARRAY_BUFFER,ln.vertexBuffer),_n.bufferData(_n.ARRAY_BUFFER,new Float32Array(On),_n.STATIC_DRAW)})},Wn.prototype.render=function(){var rn=this.gl,ln=this,pn=[rn.CULL_FACE,rn.DEPTH_TEST,rn.BLEND,rn.SCISSOR_TEST,rn.STENCIL_TEST,rn.COLOR_WRITEMASK,rn.VIEWPORT,rn.CURRENT_PROGRAM,rn.ARRAY_BUFFER_BINDING];f0(rn,pn,function(_n){_n.disable(_n.CULL_FACE),_n.disable(_n.DEPTH_TEST),_n.disable(_n.BLEND),_n.disable(_n.SCISSOR_TEST),_n.disable(_n.STENCIL_TEST),_n.colorMask(!0,!0,!0,!0),_n.viewport(0,0,_n.drawingBufferWidth,_n.drawingBufferHeight),ln.renderNoState()})},Wn.prototype.renderNoState=function(){var rn=this.gl;rn.useProgram(this.program),rn.bindBuffer(rn.ARRAY_BUFFER,this.vertexBuffer),rn.enableVertexAttribArray(this.attribs.position),rn.vertexAttribPointer(this.attribs.position,2,rn.FLOAT,!1,8,0),rn.uniform4f(this.uniforms.color,1,1,1,1),ao(this.projMat,0,rn.drawingBufferWidth,0,rn.drawingBufferHeight,.1,1024),rn.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),rn.drawArrays(rn.TRIANGLE_STRIP,0,4),rn.drawArrays(rn.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),rn.drawArrays(rn.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function rr(rn){this.coefficients=rn}rr.prototype.distortInverse=function(rn){for(var ln=0,pn=1,_n=rn-this.distort(ln);Math.abs(pn-ln)>1e-4;){var On=rn-this.distort(pn),tr=pn-On*((pn-ln)/(On-_n));ln=pn,pn=tr,_n=On}return pn},rr.prototype.distort=function(rn){for(var ln=rn*rn,pn=0,_n=0;_n<this.coefficients.length;_n++)pn=ln*(pn+this.coefficients[_n]);return(pn+1)*rn};var ns=Math.PI/180,ps=180/Math.PI,os=function(ln,pn,_n){this.x=ln||0,this.y=pn||0,this.z=_n||0};os.prototype={constructor:os,set:function(ln,pn,_n){return this.x=ln,this.y=pn,this.z=_n,this},copy:function(ln){return this.x=ln.x,this.y=ln.y,this.z=ln.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var ln=this.length();if(ln!==0){var pn=1/ln;this.multiplyScalar(pn)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(ln){this.x*=ln,this.y*=ln,this.z*=ln},applyQuaternion:function(ln){var pn=this.x,_n=this.y,On=this.z,tr=ln.x,ar=ln.y,Gr=ln.z,Ur=ln.w,pr=Ur*pn+ar*On-Gr*_n,Ir=Ur*_n+Gr*pn-tr*On,ts=Ur*On+tr*_n-ar*pn,Ls=-tr*pn-ar*_n-Gr*On;return this.x=pr*Ur+Ls*-tr+Ir*-Gr-ts*-ar,this.y=Ir*Ur+Ls*-ar+ts*-tr-pr*-Gr,this.z=ts*Ur+Ls*-Gr+pr*-ar-Ir*-tr,this},dot:function(ln){return this.x*ln.x+this.y*ln.y+this.z*ln.z},crossVectors:function(ln,pn){var _n=ln.x,On=ln.y,tr=ln.z,ar=pn.x,Gr=pn.y,Ur=pn.z;return this.x=On*Ur-tr*Gr,this.y=tr*ar-_n*Ur,this.z=_n*Gr-On*ar,this}};var as=function(ln,pn,_n,On){this.x=ln||0,this.y=pn||0,this.z=_n||0,this.w=On!==void 0?On:1};as.prototype={constructor:as,set:function(ln,pn,_n,On){return this.x=ln,this.y=pn,this.z=_n,this.w=On,this},copy:function(ln){return this.x=ln.x,this.y=ln.y,this.z=ln.z,this.w=ln.w,this},setFromEulerXYZ:function(ln,pn,_n){var On=Math.cos(ln/2),tr=Math.cos(pn/2),ar=Math.cos(_n/2),Gr=Math.sin(ln/2),Ur=Math.sin(pn/2),pr=Math.sin(_n/2);return this.x=Gr*tr*ar+On*Ur*pr,this.y=On*Ur*ar-Gr*tr*pr,this.z=On*tr*pr+Gr*Ur*ar,this.w=On*tr*ar-Gr*Ur*pr,this},setFromEulerYXZ:function(ln,pn,_n){var On=Math.cos(ln/2),tr=Math.cos(pn/2),ar=Math.cos(_n/2),Gr=Math.sin(ln/2),Ur=Math.sin(pn/2),pr=Math.sin(_n/2);return this.x=Gr*tr*ar+On*Ur*pr,this.y=On*Ur*ar-Gr*tr*pr,this.z=On*tr*pr-Gr*Ur*ar,this.w=On*tr*ar+Gr*Ur*pr,this},setFromAxisAngle:function(ln,pn){var _n=pn/2,On=Math.sin(_n);return this.x=ln.x*On,this.y=ln.y*On,this.z=ln.z*On,this.w=Math.cos(_n),this},multiply:function(ln){return this.multiplyQuaternions(this,ln)},multiplyQuaternions:function(ln,pn){var _n=ln.x,On=ln.y,tr=ln.z,ar=ln.w,Gr=pn.x,Ur=pn.y,pr=pn.z,Ir=pn.w;return this.x=_n*Ir+ar*Gr+On*pr-tr*Ur,this.y=On*Ir+ar*Ur+tr*Gr-_n*pr,this.z=tr*Ir+ar*pr+_n*Ur-On*Gr,this.w=ar*Ir-_n*Gr-On*Ur-tr*pr,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var ln=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return ln===0?(this.x=0,this.y=0,this.z=0,this.w=1):(ln=1/ln,this.x=this.x*ln,this.y=this.y*ln,this.z=this.z*ln,this.w=this.w*ln),this},slerp:function(ln,pn){if(pn===0)return this;if(pn===1)return this.copy(ln);var _n=this.x,On=this.y,tr=this.z,ar=this.w,Gr=ar*ln.w+_n*ln.x+On*ln.y+tr*ln.z;if(Gr<0?(this.w=-ln.w,this.x=-ln.x,this.y=-ln.y,this.z=-ln.z,Gr=-Gr):this.copy(ln),Gr>=1)return this.w=ar,this.x=_n,this.y=On,this.z=tr,this;var Ur=Math.acos(Gr),pr=Math.sqrt(1-Gr*Gr);if(Math.abs(pr)<.001)return this.w=.5*(ar+this.w),this.x=.5*(_n+this.x),this.y=.5*(On+this.y),this.z=.5*(tr+this.z),this;var Ir=Math.sin((1-pn)*Ur)/pr,ts=Math.sin(pn*Ur)/pr;return this.w=ar*Ir+this.w*ts,this.x=_n*Ir+this.x*ts,this.y=On*Ir+this.y*ts,this.z=tr*Ir+this.z*ts,this},setFromUnitVectors:function(){var rn,ln,pn=1e-6;return function(_n,On){return rn===void 0&&(rn=new os),ln=_n.dot(On)+1,ln<pn?(ln=0,Math.abs(_n.x)>Math.abs(_n.z)?rn.set(-_n.y,_n.x,0):rn.set(0,-_n.z,_n.y)):rn.crossVectors(_n,On),this.x=rn.x,this.y=rn.y,this.z=rn.z,this.w=ln,this.normalize(),this}}()};function Cs(rn){this.width=rn.width||Lr(),this.height=rn.height||Tr(),this.widthMeters=rn.widthMeters,this.heightMeters=rn.heightMeters,this.bevelMeters=rn.bevelMeters}var U0=new Cs({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),to=new Cs({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Cr={CardboardV1:new o0({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new o0({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function i0(rn,ln){this.viewer=Cr.CardboardV2,this.updateDeviceParams(rn),this.distortion=new rr(this.viewer.distortionCoefficients);for(var pn=0;pn<ln.length;pn++){var _n=ln[pn];Cr[_n.id]=new o0(_n)}}i0.prototype.updateDeviceParams=function(rn){this.device=this.determineDevice_(rn)||this.device},i0.prototype.getDevice=function(){return this.device},i0.prototype.setViewer=function(rn){this.viewer=rn,this.distortion=new rr(this.viewer.distortionCoefficients)},i0.prototype.determineDevice_=function(rn){if(!rn)return An()?(console.warn("Using fallback iOS device measurements."),to):(console.warn("Using fallback Android device measurements."),U0);var ln=.0254,pn=ln/rn.xdpi,_n=ln/rn.ydpi,On=Lr(),tr=Tr();return new Cs({widthMeters:pn*On,heightMeters:_n*tr,bevelMeters:rn.bevelMm*.001})},i0.prototype.getDistortedFieldOfViewLeftEye=function(){var rn=this.viewer,ln=this.device,pn=this.distortion,_n=rn.screenLensDistance,On=(ln.widthMeters-rn.interLensDistance)/2,tr=rn.interLensDistance/2,ar=rn.baselineLensDistance-ln.bevelMeters,Gr=ln.heightMeters-ar,Ur=ps*Math.atan(pn.distort(On/_n)),pr=ps*Math.atan(pn.distort(tr/_n)),Ir=ps*Math.atan(pn.distort(ar/_n)),ts=ps*Math.atan(pn.distort(Gr/_n));return{leftDegrees:Math.min(Ur,rn.fov),rightDegrees:Math.min(pr,rn.fov),downDegrees:Math.min(Ir,rn.fov),upDegrees:Math.min(ts,rn.fov)}},i0.prototype.getLeftEyeVisibleTanAngles=function(){var rn=this.viewer,ln=this.device,pn=this.distortion,_n=Math.tan(-ns*rn.fov),On=Math.tan(ns*rn.fov),tr=Math.tan(ns*rn.fov),ar=Math.tan(-ns*rn.fov),Gr=ln.widthMeters/4,Ur=ln.heightMeters/2,pr=rn.baselineLensDistance-ln.bevelMeters-Ur,Ir=rn.interLensDistance/2-Gr,ts=-pr,Ls=rn.screenLensDistance,zr=pn.distort((Ir-Gr)/Ls),io=pn.distort((ts+Ur)/Ls),So=pn.distort((Ir+Gr)/Ls),co=pn.distort((ts-Ur)/Ls),so=new Float32Array(4);return so[0]=Math.max(_n,zr),so[1]=Math.min(On,io),so[2]=Math.min(tr,So),so[3]=Math.max(ar,co),so},i0.prototype.getLeftEyeNoLensTanAngles=function(){var rn=this.viewer,ln=this.device,pn=this.distortion,_n=new Float32Array(4),On=pn.distortInverse(Math.tan(-ns*rn.fov)),tr=pn.distortInverse(Math.tan(ns*rn.fov)),ar=pn.distortInverse(Math.tan(ns*rn.fov)),Gr=pn.distortInverse(Math.tan(-ns*rn.fov)),Ur=ln.widthMeters/4,pr=ln.heightMeters/2,Ir=rn.baselineLensDistance-ln.bevelMeters-pr,ts=rn.interLensDistance/2-Ur,Ls=-Ir,zr=rn.screenLensDistance,io=(ts-Ur)/zr,So=(Ls+pr)/zr,co=(ts+Ur)/zr,so=(Ls-pr)/zr;return _n[0]=Math.max(On,io),_n[1]=Math.min(tr,So),_n[2]=Math.min(ar,co),_n[3]=Math.max(Gr,so),_n},i0.prototype.getLeftEyeVisibleScreenRect=function(rn){var ln=this.viewer,pn=this.device,_n=ln.screenLensDistance,On=(pn.widthMeters-ln.interLensDistance)/2,tr=ln.baselineLensDistance-pn.bevelMeters,ar=(rn[0]*_n+On)/pn.widthMeters,Gr=(rn[1]*_n+tr)/pn.heightMeters,Ur=(rn[2]*_n+On)/pn.widthMeters,pr=(rn[3]*_n+tr)/pn.heightMeters;return{x:ar,y:pr,width:Ur-ar,height:Gr-pr}},i0.prototype.getFieldOfViewLeftEye=function(rn){return rn?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i0.prototype.getFieldOfViewRightEye=function(rn){var ln=this.getFieldOfViewLeftEye(rn);return{leftDegrees:ln.rightDegrees,rightDegrees:ln.leftDegrees,upDegrees:ln.upDegrees,downDegrees:ln.downDegrees}},i0.prototype.getUndistortedFieldOfViewLeftEye=function(){var rn=this.getUndistortedParams_();return{leftDegrees:ps*Math.atan(rn.outerDist),rightDegrees:ps*Math.atan(rn.innerDist),downDegrees:ps*Math.atan(rn.bottomDist),upDegrees:ps*Math.atan(rn.topDist)}},i0.prototype.getUndistortedViewportLeftEye=function(){var rn=this.getUndistortedParams_(),ln=this.viewer,pn=this.device,_n=ln.screenLensDistance,On=pn.widthMeters/_n,tr=pn.heightMeters/_n,ar=pn.width/On,Gr=pn.height/tr,Ur=Math.round((rn.eyePosX-rn.outerDist)*ar),pr=Math.round((rn.eyePosY-rn.bottomDist)*Gr);return{x:Ur,y:pr,width:Math.round((rn.eyePosX+rn.innerDist)*ar)-Ur,height:Math.round((rn.eyePosY+rn.topDist)*Gr)-pr}},i0.prototype.getUndistortedParams_=function(){var rn=this.viewer,ln=this.device,pn=this.distortion,_n=rn.screenLensDistance,On=rn.interLensDistance/2/_n,tr=ln.widthMeters/_n,ar=ln.heightMeters/_n,Gr=tr/2-On,Ur=(rn.baselineLensDistance-ln.bevelMeters)/_n,pr=rn.fov,Ir=pn.distortInverse(Math.tan(ns*pr)),ts=Math.min(Gr,Ir),Ls=Math.min(On,Ir),zr=Math.min(Ur,Ir),io=Math.min(ar-Ur,Ir);return{outerDist:ts,innerDist:Ls,topDist:io,bottomDist:zr,eyePosX:Gr,eyePosY:Ur}};function o0(rn){this.id=rn.id,this.label=rn.label,this.fov=rn.fov,this.interLensDistance=rn.interLensDistance,this.baselineLensDistance=rn.baselineLensDistance,this.screenLensDistance=rn.screenLensDistance,this.distortionCoefficients=rn.distortionCoefficients,this.inverseCoefficients=rn.inverseCoefficients}i0.Viewers=Cr;var Q0=1,D0="2019-11-09T17:36:14Z",u1=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],ga={format:Q0,last_updated:D0,devices:u1};function Yl(rn,ln){if(this.dpdb=ga,this.recalculateDeviceParams_(),rn){this.onDeviceParamsUpdated=ln;var pn=new XMLHttpRequest,_n=this;pn.open("GET",rn,!0),pn.addEventListener("load",function(){_n.loading=!1,pn.status>=200&&pn.status<=299?(_n.dpdb=JSON.parse(pn.response),_n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),pn.send()}}Yl.prototype.getDeviceParams=function(){return this.deviceParams},Yl.prototype.recalculateDeviceParams_=function(){var rn=this.calcDeviceParams_();rn?(this.deviceParams=rn,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Yl.prototype.calcDeviceParams_=function(){var rn=this.dpdb;if(!rn)return console.error("DPDB not available."),null;if(rn.format!=1)return console.error("DPDB has unexpected format version."),null;if(!rn.devices||!rn.devices.length)return console.error("DPDB does not have a devices section."),null;var ln=navigator.userAgent||navigator.vendor||window.opera,pn=Lr(),_n=Tr();if(!rn.devices)return console.error("DPDB has no devices section."),null;for(var On=0;On<rn.devices.length;On++){var tr=rn.devices[On];if(!tr.rules){console.warn("Device["+On+"] has no rules section.");continue}if(tr.type!="ios"&&tr.type!="android"){console.warn("Device["+On+"] has invalid type.");continue}if(An()==(tr.type=="ios")){for(var ar=!1,Gr=0;Gr<tr.rules.length;Gr++){var Ur=tr.rules[Gr];if(this.ruleMatches_(Ur,ln,pn,_n)){ar=!0;break}}if(ar){var pr=tr.dpi[0]||tr.dpi,Ir=tr.dpi[1]||tr.dpi;return new R1({xdpi:pr,ydpi:Ir,bevelMm:tr.bw})}}}return console.warn("No DPDB device match."),null},Yl.prototype.ruleMatches_=function(rn,ln,pn,_n){if(!rn.ua&&!rn.res||(rn.ua&&rn.ua.substring(0,2)==="SM"&&(rn.ua=rn.ua.substring(0,7)),rn.ua&&ln.indexOf(rn.ua)<0))return!1;if(rn.res){if(!rn.res[0]||!rn.res[1])return!1;var On=rn.res[0],tr=rn.res[1];if(Math.min(pn,_n)!=Math.min(On,tr)||Math.max(pn,_n)!=Math.max(On,tr))return!1}return!0};function R1(rn){this.xdpi=rn.xdpi,this.ydpi=rn.ydpi,this.bevelMm=rn.bevelMm}function Ql(rn,ln){this.set(rn,ln)}Ql.prototype.set=function(rn,ln){this.sample=rn,this.timestampS=ln},Ql.prototype.copy=function(rn){this.set(rn.sample,rn.timestampS)};function P0(rn,ln){this.kFilter=rn,this.isDebug=ln,this.currentAccelMeasurement=new Ql,this.currentGyroMeasurement=new Ql,this.previousGyroMeasurement=new Ql,An()?this.filterQ=new as(-1,0,0,1):this.filterQ=new as(1,0,0,1),this.previousFilterQ=new as,this.previousFilterQ.copy(this.filterQ),this.accelQ=new as,this.isOrientationInitialized=!1,this.estimatedGravity=new os,this.measuredGravity=new os,this.gyroIntegralQ=new as}P0.prototype.addAccelMeasurement=function(rn,ln){this.currentAccelMeasurement.set(rn,ln)},P0.prototype.addGyroMeasurement=function(rn,ln){this.currentGyroMeasurement.set(rn,ln);var pn=ln-this.previousGyroMeasurement.timestampS;hr(pn)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},P0.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var rn=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ln=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,rn);this.gyroIntegralQ.multiply(ln),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ln);var pn=new as;pn.copy(this.filterQ),pn.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(pn),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var _n=new as;_n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),_n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",ps*j0(_n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var On=new as;On.copy(this.filterQ),On.multiply(_n),this.filterQ.slerp(On,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},P0.prototype.getOrientation=function(){return this.filterQ},P0.prototype.accelToQuaternion_=function(rn){var ln=new os;ln.copy(rn),ln.normalize();var pn=new as;return pn.setFromUnitVectors(new os(0,0,-1),ln),pn.inverse(),pn},P0.prototype.gyroToQuaternionDelta_=function(rn,ln){var pn=new as,_n=new os;return _n.copy(rn),_n.normalize(),pn.setFromAxisAngle(_n,rn.length()*ln),pn};function Lo(rn,ln){this.predictionTimeS=rn,this.isDebug=ln,this.previousQ=new as,this.previousTimestampS=null,this.deltaQ=new as,this.outQ=new as}Lo.prototype.getPrediction=function(rn,ln,pn){if(!this.previousTimestampS)return this.previousQ.copy(rn),this.previousTimestampS=pn,rn;var _n=new os;_n.copy(ln),_n.normalize();var On=ln.length();if(On<ns*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(ps*On).toFixed(1)),this.outQ.copy(rn),this.previousQ.copy(rn),this.outQ;var tr=On*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(_n,tr),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(rn),this.previousTimestampS=pn,this.outQ};function _a(rn,ln,pn,_n){this.yawOnly=pn,this.accelerometer=new os,this.gyroscope=new os,this.filter=new P0(rn,_n),this.posePredictor=new Lo(ln,_n),this.isFirefoxAndroid=mn(),this.isIOS=An();var On=gn();this.isDeviceMotionInRadians=!this.isIOS&&On&&On<66,this.isWithoutDeviceMotion=Vn()||In(),this.filterToWorldQ=new as,An()?this.filterToWorldQ.setFromAxisAngle(new os(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new os(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new as,this.worldToScreenQ=new as,this.originalPoseAdjustQ=new as,this.originalPoseAdjustQ.setFromAxisAngle(new os(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),lr()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new as,this.orientationOut_=new Float32Array(4),this.start()}_a.prototype.getPosition=function(){return null},_a.prototype.getOrientation=function(){var rn=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var On=new as().setFromAxisAngle(new os(0,0,-1),0),tr=new as;return window.orientation===-90?tr.setFromAxisAngle(new os(0,1,0),Math.PI/-2):tr.setFromAxisAngle(new os(0,1,0),Math.PI/2),On.multiply(tr)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var On=new as;return On.setFromAxisAngle(new os(1,0,0),-Math.PI/2),On}(),rn=this._deviceOrientationQ;var pn=new as;return pn.copy(rn),pn.multiply(this.deviceOrientationFilterToWorldQ),pn.multiply(this.resetQ),pn.multiply(this.worldToScreenQ),pn.multiplyQuaternions(this.deviceOrientationFixQ,pn),this.yawOnly&&(pn.x=0,pn.z=0,pn.normalize()),this.orientationOut_[0]=pn.x,this.orientationOut_[1]=pn.y,this.orientationOut_[2]=pn.z,this.orientationOut_[3]=pn.w,this.orientationOut_}else{var ln=this.filter.getOrientation();rn=this.posePredictor.getPrediction(ln,this.gyroscope,this.previousTimestampS)}var pn=new as;return pn.copy(this.filterToWorldQ),pn.multiply(this.resetQ),pn.multiply(rn),pn.multiply(this.worldToScreenQ),this.yawOnly&&(pn.x=0,pn.z=0,pn.normalize()),this.orientationOut_[0]=pn.x,this.orientationOut_[1]=pn.y,this.orientationOut_[2]=pn.z,this.orientationOut_[3]=pn.w,this.orientationOut_},_a.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),lr()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},_a.prototype.onDeviceOrientation_=function(rn){this._deviceOrientationQ=this._deviceOrientationQ||new as;var ln=rn.alpha,pn=rn.beta,_n=rn.gamma;ln=(ln||0)*Math.PI/180,pn=(pn||0)*Math.PI/180,_n=(_n||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(pn,ln,-_n)},_a.prototype.onDeviceMotion_=function(rn){this.updateDeviceMotion_(rn)},_a.prototype.updateDeviceMotion_=function(rn){var ln=rn.accelerationIncludingGravity,pn=rn.rotationRate,_n=rn.timeStamp/1e3,On=_n-this.previousTimestampS;if(On<0){Ho("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=_n;return}else if(On<=vn||On>fn){Ho("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=_n;return}this.accelerometer.set(-ln.x,-ln.y,-ln.z),pn&&(Zn()?this.gyroscope.set(-pn.beta,pn.alpha,pn.gamma):this.gyroscope.set(pn.alpha,pn.beta,pn.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,_n)),this.filter.addAccelMeasurement(this.accelerometer,_n),this.previousTimestampS=_n},_a.prototype.onOrientationChange_=function(rn){this.setScreenTransform_()},_a.prototype.onMessage_=function(rn){var ln=rn.data;if(!(!ln||!ln.type)){var pn=ln.type.toLowerCase();pn==="devicemotion"&&this.updateDeviceMotion_(ln.deviceMotionEvent)}},_a.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new os(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new os(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},_a.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),An()&&$o()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},_a.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var X1=60,y1=new os(1,0,0),Tu=new os(0,0,1),Y1=new as;Y1.setFromAxisAngle(y1,-Math.PI/2),Y1.multiply(new as().setFromAxisAngle(Tu,Math.PI/2));var Bn=function(){function rn(ln){Qt(this,rn),this.config=ln,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new as,this._outQ=new as,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return tn(rn,[{key:"init",value:function(){var pn=null;try{pn=new RelativeOrientationSensor({frequency:X1,referenceFrame:"screen"}),pn.addEventListener("error",this._onSensorError)}catch(_n){this.errors.push(_n),_n.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):_n.name==="ReferenceError"?this.useDeviceMotion():console.error(_n)}pn&&(this.api="sensor",this.sensor=pn,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new _a(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var pn=this.sensor.quaternion;this._sensorQ.set(pn[0],pn[1],pn[2],pn[3]);var _n=this._outQ;return _n.copy(Y1),_n.multiply(this._sensorQ),this.config.YAW_ONLY&&(_n.x=_n.z=0,_n.normalize()),this._out[0]=_n.x,this._out[1]=_n.y,this._out[2]=_n.z,this._out[3]=_n.w,this._out}},{key:"_onSensorError",value:function(pn){this.errors.push(pn.error),pn.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):pn.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(pn.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),rn}(),Xn="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function cr(){this.loadIcon_();var rn=document.createElement("div"),ar=rn.style;ar.position="fixed",ar.top=0,ar.right=0,ar.bottom=0,ar.left=0,ar.backgroundColor="gray",ar.fontFamily="sans-serif",ar.zIndex=1e6;var ln=document.createElement("img");ln.src=this.icon;var ar=ln.style;ar.marginLeft="25%",ar.marginTop="25%",ar.width="50%",rn.appendChild(ln);var pn=document.createElement("div"),ar=pn.style;ar.textAlign="center",ar.fontSize="16px",ar.lineHeight="24px",ar.margin="24px 25%",ar.width="50%",pn.innerHTML="Place your phone into your Cardboard viewer.",rn.appendChild(pn);var _n=document.createElement("div"),ar=_n.style;ar.backgroundColor="#CFD8DC",ar.position="fixed",ar.bottom=0,ar.width="100%",ar.height="48px",ar.padding="14px 24px",ar.boxSizing="border-box",ar.color="#656A6B",rn.appendChild(_n);var On=document.createElement("div");On.style.float="left",On.innerHTML="No Cardboard viewer?";var tr=document.createElement("a");tr.href="https://www.google.com/get/cardboard/get-cardboard/",tr.innerHTML="get one",tr.target="_blank";var ar=tr.style;ar.float="right",ar.fontWeight=600,ar.textTransform="uppercase",ar.borderLeft="1px solid gray",ar.paddingLeft="24px",ar.textDecoration="none",ar.color="#656A6B",_n.appendChild(On),_n.appendChild(tr),this.overlay=rn,this.text=pn,this.hide()}cr.prototype.show=function(rn){!rn&&!this.overlay.parentElement?document.body.appendChild(this.overlay):rn&&(this.overlay.parentElement&&this.overlay.parentElement!=rn&&this.overlay.parentElement.removeChild(this.overlay),rn.appendChild(this.overlay)),this.overlay.style.display="block";var ln=this.overlay.querySelector("img"),pn=ln.style;lr()?(pn.width="20%",pn.marginLeft="40%",pn.marginTop="3%"):(pn.width="50%",pn.marginLeft="25%",pn.marginTop="25%")},cr.prototype.hide=function(){this.overlay.style.display="none"},cr.prototype.showTemporarily=function(rn,ln){this.show(ln),this.timer=setTimeout(this.hide.bind(this),rn)},cr.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},cr.prototype.update=function(){this.disableShowTemporarily(),!lr()&&go()?this.show():this.hide()},cr.prototype.loadIcon_=function(){this.icon=Cn("image/svg+xml",Xn)};var Rr="CardboardV1",yr="WEBVR_CARDBOARD_VIEWER",Nr="webvr-polyfill-viewer-selector";function is(rn){try{this.selectedKey=localStorage.getItem(yr)}catch(ln){console.error("Failed to load viewer profile: %s",ln)}this.selectedKey||(this.selectedKey=rn||Rr),this.dialog=this.createDialog_(i0.Viewers),this.root=null,this.onChangeCallbacks_=[]}is.prototype.show=function(rn){this.root=rn,rn.appendChild(this.dialog);var ln=this.dialog.querySelector("#"+this.selectedKey);ln.checked=!0,this.dialog.style.display="block"},is.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},is.prototype.getCurrentViewer=function(){return i0.Viewers[this.selectedKey]},is.prototype.getSelectedKey_=function(){var rn=this.dialog.querySelector("input[name=field]:checked");return rn?rn.id:null},is.prototype.onChange=function(rn){this.onChangeCallbacks_.push(rn)},is.prototype.fireOnChange_=function(rn){for(var ln=0;ln<this.onChangeCallbacks_.length;ln++)this.onChangeCallbacks_[ln](rn)},is.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i0.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(i0.Viewers[this.selectedKey]);try{localStorage.setItem(yr,this.selectedKey)}catch(rn){console.error("Failed to save viewer profile: %s",rn)}this.hide()},is.prototype.createDialog_=function(rn){var ln=document.createElement("div");ln.classList.add(Nr),ln.style.display="none";var pn=document.createElement("div"),tr=pn.style;tr.position="fixed",tr.left=0,tr.top=0,tr.width="100%",tr.height="100%",tr.background="rgba(0, 0, 0, 0.3)",pn.addEventListener("click",this.hide.bind(this));var _n=280,On=document.createElement("div"),tr=On.style;tr.boxSizing="border-box",tr.position="fixed",tr.top="24px",tr.left="50%",tr.marginLeft=-_n/2+"px",tr.width=_n+"px",tr.padding="24px",tr.overflow="hidden",tr.background="#fafafa",tr.fontFamily="'Roboto', sans-serif",tr.boxShadow="0px 5px 20px #666",On.appendChild(this.createH1_("Select your viewer"));for(var ar in rn)On.appendChild(this.createChoice_(ar,rn[ar].label));return On.appendChild(this.createButton_("Save",this.onSave_.bind(this))),ln.appendChild(pn),ln.appendChild(On),ln},is.prototype.createH1_=function(rn){var ln=document.createElement("h1"),pn=ln.style;return pn.color="black",pn.fontSize="20px",pn.fontWeight="bold",pn.marginTop=0,pn.marginBottom="24px",ln.innerHTML=rn,ln},is.prototype.createChoice_=function(rn,ln){var pn=document.createElement("div");pn.style.marginTop="8px",pn.style.color="black";var _n=document.createElement("input");_n.style.fontSize="30px",_n.setAttribute("id",rn),_n.setAttribute("type","radio"),_n.setAttribute("value",rn),_n.setAttribute("name","field");var On=document.createElement("label");return On.style.marginLeft="4px",On.setAttribute("for",rn),On.innerHTML=ln,pn.appendChild(_n),pn.appendChild(On),pn},is.prototype.createButton_=function(rn,ln){var pn=document.createElement("button");pn.innerHTML=rn;var _n=pn.style;return _n.float="right",_n.textTransform="uppercase",_n.color="#1094f7",_n.fontSize="14px",_n.letterSpacing=0,_n.border=0,_n.background="none",_n.marginTop="16px",pn.addEventListener("click",ln),pn};var Ns=typeof window<"u"?window:typeof it<"u"?it:typeof self<"u"?self:{};function Ss(rn){return rn&&rn.__esModule&&Object.prototype.hasOwnProperty.call(rn,"default")?rn.default:rn}function kr(rn,ln){return ln={exports:{}},rn(ln,ln.exports),ln.exports}var Ks=kr(function(rn,ln){(function(_n,On){rn.exports=On()})(Ns,function(){return function(pn){var _n={};function On(tr){if(_n[tr])return _n[tr].exports;var ar=_n[tr]={i:tr,l:!1,exports:{}};return pn[tr].call(ar.exports,ar,ar.exports,On),ar.l=!0,ar.exports}return On.m=pn,On.c=_n,On.d=function(tr,ar,Gr){On.o(tr,ar)||Object.defineProperty(tr,ar,{configurable:!1,enumerable:!0,get:Gr})},On.n=function(tr){var ar=tr&&tr.__esModule?function(){return tr.default}:function(){return tr};return On.d(ar,"a",ar),ar},On.o=function(tr,ar){return Object.prototype.hasOwnProperty.call(tr,ar)},On.p="",On(On.s=0)}([function(pn,_n,On){var tr=function(){function Ir(ts,Ls){for(var zr=0;zr<Ls.length;zr++){var io=Ls[zr];io.enumerable=io.enumerable||!1,io.configurable=!0,"value"in io&&(io.writable=!0),Object.defineProperty(ts,io.key,io)}}return function(ts,Ls,zr){return Ls&&Ir(ts.prototype,Ls),zr&&Ir(ts,zr),ts}}();function ar(Ir,ts){if(!(Ir instanceof ts))throw new TypeError("Cannot call a class as a function")}var Gr=On(1),Ur=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,pr=function(){function Ir(){ar(this,Ir),Ur?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",Gr),this.noSleepVideo.addEventListener("timeupdate",(function(ts){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return tr(Ir,[{key:"enable",value:function(){Ur?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){Ur?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),Ir}();pn.exports=pr},function(pn,_n,On){pn.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),$s=Ss(Ks),lo=1e3,A0=[0,0,.5,1],bo=[.5,0,.5,1],Eo=window.requestAnimationFrame,zo=window.cancelAnimationFrame;function _0(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function V0(rn){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:rn.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:rn.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:rn.canPresent},maxLayers:{writable:!1,enumerable:!0,value:rn.maxLayers},hasOrientation:{enumerable:!0,get:function(){return oo("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),rn.hasOrientation}}})}function Ts(rn){rn=rn||{};var ln="wakelock"in rn?rn.wakelock:!0;this.isPolyfilled=!0,this.displayId=lo++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return oo("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new V0({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,ln&&go()&&(this.wakelock_=new $s)}Ts.prototype.getFrameData=function(rn){return xo(rn,this._getPose(),this)},Ts.prototype.getPose=function(){return oo("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Ts.prototype.resetPose=function(){return oo("VRDisplay.prototype.resetPose"),this._resetPose()},Ts.prototype.getImmediatePose=function(){return oo("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Ts.prototype.requestAnimationFrame=function(rn){return Eo(rn)},Ts.prototype.cancelAnimationFrame=function(rn){return zo(rn)},Ts.prototype.wrapForFullscreen=function(rn){if(An())return rn;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var ln=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",ln.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==rn)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=rn,this.originalParent_=rn.parentElement,this.originalParent_||document.body.appendChild(rn),!this.fullscreenWrapper_.parentElement){var pn=this.fullscreenElement_.parentElement;pn.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),pn.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var _n=this;function On(){if(_n.fullscreenElement_){var tr=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];_n.fullscreenElement_.setAttribute("style",tr.join("; ")+";")}}return On(),this.fullscreenWrapper_},Ts.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var rn=this.fullscreenElement_;this.fullscreenElementCachedStyle_?rn.setAttribute("style",this.fullscreenElementCachedStyle_):rn.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var ln=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(rn),this.originalParent_===ln?ln.insertBefore(rn,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(rn),ln.removeChild(this.fullscreenWrapper_),rn}},Ts.prototype.requestPresent=function(rn){var ln=this.isPresenting,pn=this;return rn instanceof Array||(oo("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),rn=[rn]),new Promise(function(_n,On){if(!pn.capabilities.canPresent){On(new Error("VRDisplay is not capable of presenting."));return}if(rn.length==0||rn.length>pn.capabilities.maxLayers){On(new Error("Invalid number of layers."));return}var tr=rn[0];if(!tr.source){_n();return}var ar=tr.leftBounds||A0,Gr=tr.rightBounds||bo;if(ln){var Ur=pn.layer_;Ur.source!==tr.source&&(Ur.source=tr.source);for(var pr=0;pr<4;pr++)Ur.leftBounds[pr]=ar[pr],Ur.rightBounds[pr]=Gr[pr];pn.wrapForFullscreen(pn.layer_.source),pn.updatePresent_(),_n();return}if(pn.layer_={predistorted:tr.predistorted,source:tr.source,leftBounds:ar.slice(0),rightBounds:Gr.slice(0)},pn.waitingForPresent_=!1,pn.layer_&&pn.layer_.source){var Ir=pn.wrapForFullscreen(pn.layer_.source),ts=function(){var io=ms();pn.isPresenting=Ir===io,pn.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(So){console.error("screen.orientation.lock() failed due to",So.message)}),pn.waitingForPresent_=!1,pn.beginPresent_(),_n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),pn.removeFullscreenWrapper(),pn.disableWakeLock(),pn.endPresent_(),pn.removeFullscreenListeners_()),pn.fireVRDisplayPresentChange_()},Ls=function(){pn.waitingForPresent_&&(pn.removeFullscreenWrapper(),pn.removeFullscreenListeners_(),pn.disableWakeLock(),pn.waitingForPresent_=!1,pn.isPresenting=!1,On(new Error("Unable to present.")))};pn.addFullscreenListeners_(Ir,ts,Ls),As(Ir)?(pn.enableWakeLock(),pn.waitingForPresent_=!0):(An()||nn())&&(pn.enableWakeLock(),pn.isPresenting=!0,pn.beginPresent_(),pn.fireVRDisplayPresentChange_(),_n())}!pn.waitingForPresent_&&!An()&&(Yr(),On(new Error("Unable to present.")))})},Ts.prototype.exitPresent=function(){var rn=this.isPresenting,ln=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(pn,_n){rn?(!Yr()&&An()&&(ln.endPresent_(),ln.fireVRDisplayPresentChange_()),nn()&&(ln.removeFullscreenWrapper(),ln.removeFullscreenListeners_(),ln.endPresent_(),ln.fireVRDisplayPresentChange_()),pn()):_n(new Error("Was not presenting to VRDisplay."))})},Ts.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Ts.prototype.fireVRDisplayPresentChange_=function(){var rn=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(rn)},Ts.prototype.fireVRDisplayConnect_=function(){var rn=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(rn)},Ts.prototype.addFullscreenListeners_=function(rn,ln,pn){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=rn,this.fullscreenChangeHandler_=ln,this.fullscreenErrorHandler_=pn,ln&&(document.fullscreenEnabled?rn.addEventListener("fullscreenchange",ln,!1):document.webkitFullscreenEnabled?rn.addEventListener("webkitfullscreenchange",ln,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",ln,!1):document.msFullscreenEnabled&&rn.addEventListener("msfullscreenchange",ln,!1)),pn&&(document.fullscreenEnabled?rn.addEventListener("fullscreenerror",pn,!1):document.webkitFullscreenEnabled?rn.addEventListener("webkitfullscreenerror",pn,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",pn,!1):document.msFullscreenEnabled&&rn.addEventListener("msfullscreenerror",pn,!1))},Ts.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var rn=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var ln=this.fullscreenChangeHandler_;rn.removeEventListener("fullscreenchange",ln,!1),rn.removeEventListener("webkitfullscreenchange",ln,!1),document.removeEventListener("mozfullscreenchange",ln,!1),rn.removeEventListener("msfullscreenchange",ln,!1)}if(this.fullscreenErrorHandler_){var pn=this.fullscreenErrorHandler_;rn.removeEventListener("fullscreenerror",pn,!1),rn.removeEventListener("webkitfullscreenerror",pn,!1),document.removeEventListener("mozfullscreenerror",pn,!1),rn.removeEventListener("msfullscreenerror",pn,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Ts.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Ts.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Ts.prototype.beginPresent_=function(){},Ts.prototype.endPresent_=function(){},Ts.prototype.submitFrame=function(rn){},Ts.prototype.getEyeParameters=function(rn){return null};var Mo={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},T0={LEFT:"left",RIGHT:"right"};function Jo(rn){var ln=ho({},Mo);rn=ho(ln,rn||{}),Ts.call(this,{wakelock:rn.MOBILE_WAKE_LOCK}),this.config=rn,this.displayName="Cardboard VRDisplay",this.capabilities=new V0({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Bn(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Yl(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new i0(this.dpdb_.getDeviceParams(),rn.ADDITIONAL_VIEWERS),this.viewerSelector_=new is(rn.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new cr),An()&&window.addEventListener("resize",this.onResize_.bind(this))}return Jo.prototype=Object.create(Ts.prototype),Jo.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Jo.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Jo.prototype._getFieldOfView=function(rn){var ln;if(rn==T0.LEFT)ln=this.deviceInfo_.getFieldOfViewLeftEye();else if(rn==T0.RIGHT)ln=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",rn),null;return ln},Jo.prototype._getEyeOffset=function(rn){var ln;if(rn==T0.LEFT)ln=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(rn==T0.RIGHT)ln=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",rn),null;return ln},Jo.prototype.getEyeParameters=function(rn){var ln=this._getEyeOffset(rn),pn=this._getFieldOfView(rn),_n={offset:ln,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(_n,"fieldOfView",{enumerable:!0,get:function(){return oo("VRFieldOfView","VRFrameData's projection matrices"),pn}}),_n},Jo.prototype.onDeviceParamsUpdated_=function(rn){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(rn),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Jo.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Jo.prototype.beginPresent_=function(){var rn=this.layer_.source.getContext("webgl");rn||(rn=this.layer_.source.getContext("experimental-webgl")),rn||(rn=this.layer_.source.getContext("webgl2")),rn&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(rn.canvas.width=Lr()*this.bufferScale_,rn.canvas.height=Tr()*this.bufferScale_,this.cardboardUI_=new Wn(rn)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Wn(rn)),this.distorter_=new p0(rn,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(ln){this.viewerSelector_.show(this.layer_.source.parentElement),ln.stopPropagation(),ln.preventDefault()}).bind(this),(function(ln){this.exitPresent(),ln.stopPropagation(),ln.preventDefault()}).bind(this)),this.rotateInstructions_&&(lr()&&go()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Jo.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Jo.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Jo.prototype.submitFrame=function(rn){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var ln=this.layer_.source.getContext("webgl");ln||(ln=this.layer_.source.getContext("experimental-webgl")),ln||(ln=this.layer_.source.getContext("webgl2"));var pn=ln.canvas;(pn.width!=this.lastWidth||pn.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=pn.width,this.lastHeight=pn.height,this.cardboardUI_.render()}},Jo.prototype.onOrientationChange_=function(rn){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Jo.prototype.onResize_=function(rn){if(this.layer_){var ln=this.layer_.source.getContext("webgl");ln||(ln=this.layer_.source.getContext("experimental-webgl")),ln||(ln=this.layer_.source.getContext("webgl2"));var pn=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];ln.canvas.setAttribute("style",pn.join("; ")+";"),Ys(ln.canvas)}},Jo.prototype.onViewerChanged_=function(rn){this.deviceInfo_.setViewer(rn),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Jo.prototype.fireVRDisplayDeviceParamsChange_=function(){var rn=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(rn)},Jo.VRFrameData=_0,Jo.VRDisplay=Ts,Jo})}),pt=dt(Rt),mt="0.10.12",gt={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Ct(Ut){this.config=Mt(Mt({},gt),Ut),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&Tt())&&(this.enable(),this.getVRDisplays().then(function(Xt){Xt&&Xt[0]&&Xt[0].fireVRDisplayConnect_&&Xt[0].fireVRDisplayConnect_()}))}Ct.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(Tt()){var Ut=new pt({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(Ut)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},Ct.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var Ut=this.native.VRFrameData,Xt=new this.native.VRFrameData,Qt=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(tn){if(tn instanceof Ut){Qt.call(this,tn);return}Qt.call(this,Xt),tn.pose=Xt.pose,Et(Xt.leftProjectionMatrix,tn.leftProjectionMatrix),Et(Xt.rightProjectionMatrix,tn.rightProjectionMatrix),Et(Xt.leftViewMatrix,tn.leftViewMatrix),Et(Xt.rightViewMatrix,tn.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=pt.VRDisplay,window.VRFrameData=pt.VRFrameData},Ct.prototype.getVRDisplays=function(){var Ut=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(Xt){return Xt.length>0?Xt:Ut.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},Ct.version=mt,Ct.VRFrameData=pt.VRFrameData,Ct.VRDisplay=pt.VRDisplay;var xt=Object.freeze({default:Ct}),Dt=xt&&Ct||xt;typeof it<"u"&&it.window&&(it.document||(it.document=it.window.document),it.navigator||(it.navigator=it.window.navigator));var Ht=Dt;return Ht})},"./node_modules/word-wrapper/index.js":St=>{var Gt=/\n/,vt=`
`,it=/\s/;St.exports=function(Rt,pt){var mt=St.exports.lines(Rt,pt);return mt.map(function(gt){return Rt.substring(gt.start,gt.end)}).join(`
`)},St.exports.lines=function(pt,mt){if(mt=mt||{},mt.width===0&&mt.mode!=="nowrap")return[];pt=pt||"";var gt=typeof mt.width=="number"?mt.width:Number.MAX_VALUE,Ct=Math.max(0,mt.start||0),xt=typeof mt.end=="number"?mt.end:pt.length,Dt=mt.mode,Ht=mt.measure||Mt;return Dt==="pre"?Tt(Ht,pt,Ct,xt,gt):Et(Ht,pt,Ct,xt,gt,Dt)};function dt(Rt,pt,mt,gt){var Ct=Rt.indexOf(pt,mt);return Ct===-1||Ct>gt?gt:Ct}function bt(Rt){return it.test(Rt)}function Tt(Rt,pt,mt,gt,Ct){for(var xt=[],Dt=mt,Ht=mt;Ht<gt&&Ht<pt.length;Ht++){var Ut=pt.charAt(Ht),Xt=Gt.test(Ut);if(Xt||Ht===gt-1){var Qt=Xt?Ht:Ht+1,tn=Rt(pt,Dt,Qt,Ct);xt.push(tn),Dt=Ht+1}}return xt}function Et(Rt,pt,mt,gt,Ct,xt){var Dt=[],Ht=Ct;for(xt==="nowrap"&&(Ht=Number.MAX_VALUE);mt<gt&&mt<pt.length;){for(var Ut=dt(pt,vt,mt,gt);mt<Ut&&bt(pt.charAt(mt));)mt++;var Xt=Rt(pt,mt,Ut,Ht),Qt=mt+(Xt.end-Xt.start),tn=Qt+vt.length;if(Qt<Ut){for(;Qt>mt&&!bt(pt.charAt(Qt));)Qt--;if(Qt===mt)tn>mt+vt.length&&tn--,Qt=tn;else for(tn=Qt;Qt>mt&&bt(pt.charAt(Qt-vt.length));)Qt--}if(Qt>=mt){var on=Rt(pt,mt,Qt,Ht);Dt.push(on)}mt=tn}return Dt}function Mt(Rt,pt,mt,gt){var Ct=Math.min(gt,mt-pt);return{start:pt,end:pt+Ct}}},"./node_modules/xhr/index.js":(St,Gt,vt)=>{var it=vt("./node_modules/global/window.js"),dt=vt("./node_modules/is-function/index.js"),bt=vt("./node_modules/parse-headers/parse-headers.js"),Tt=vt("./node_modules/xtend/immutable.js");St.exports=pt,St.exports.default=pt,pt.XMLHttpRequest=it.XMLHttpRequest||Ct,pt.XDomainRequest="withCredentials"in new pt.XMLHttpRequest?pt.XMLHttpRequest:it.XDomainRequest,Et(["get","put","post","patch","head","delete"],function(xt){pt[xt==="delete"?"del":xt]=function(Dt,Ht,Ut){return Ht=Rt(Dt,Ht,Ut),Ht.method=xt.toUpperCase(),mt(Ht)}});function Et(xt,Dt){for(var Ht=0;Ht<xt.length;Ht++)Dt(xt[Ht])}function Mt(xt){for(var Dt in xt)if(xt.hasOwnProperty(Dt))return!1;return!0}function Rt(xt,Dt,Ht){var Ut=xt;return dt(Dt)?(Ht=Dt,typeof xt=="string"&&(Ut={uri:xt})):Ut=Tt(Dt,{uri:xt}),Ut.callback=Ht,Ut}function pt(xt,Dt,Ht){return Dt=Rt(xt,Dt,Ht),mt(Dt)}function mt(xt){if(typeof xt.callback>"u")throw new Error("callback argument missing");var Dt=!1,Ht=function(Zn,lr,hr){Dt||(Dt=!0,xt.callback(Zn,lr,hr))};function Ut(){on.readyState===4&&setTimeout(tn,0)}function Xt(){var Vn=void 0;if(on.response?Vn=on.response:Vn=on.responseText||gt(on),mn)try{Vn=JSON.parse(Vn)}catch{}return Vn}function Qt(Vn){return clearTimeout(gn),Vn instanceof Error||(Vn=new Error(""+(Vn||"Unknown XMLHttpRequest Error"))),Vn.statusCode=0,Ht(Vn,In)}function tn(){if(!fn){var Vn;clearTimeout(gn),xt.useXDR&&on.status===void 0?Vn=200:Vn=on.status===1223?204:on.status;var Zn=In,lr=null;return Vn!==0?(Zn={body:Xt(),statusCode:Vn,method:dn,headers:{},url:Cn,rawRequest:on},on.getAllResponseHeaders&&(Zn.headers=bt(on.getAllResponseHeaders()))):lr=new Error("Internal XMLHttpRequest Error"),Ht(lr,Zn,Zn.body)}}var on=xt.xhr||null;on||(xt.cors||xt.useXDR?on=new pt.XDomainRequest:on=new pt.XMLHttpRequest);var vn,fn,Cn=on.url=xt.uri||xt.url,dn=on.method=xt.method||"GET",An=xt.body||xt.data,nn=on.headers=xt.headers||{},Zt=!!xt.sync,mn=!1,gn,In={body:void 0,headers:{},statusCode:0,method:dn,url:Cn,rawRequest:on};if("json"in xt&&xt.json!==!1&&(mn=!0,nn.accept||nn.Accept||(nn.Accept="application/json"),dn!=="GET"&&dn!=="HEAD"&&(nn["content-type"]||nn["Content-Type"]||(nn["Content-Type"]="application/json"),An=JSON.stringify(xt.json===!0?An:xt.json))),on.onreadystatechange=Ut,on.onload=tn,on.onerror=Qt,on.onprogress=function(){},on.onabort=function(){fn=!0},on.ontimeout=Qt,on.open(dn,Cn,!Zt,xt.username,xt.password),Zt||(on.withCredentials=!!xt.withCredentials),!Zt&&xt.timeout>0&&(gn=setTimeout(function(){if(!fn){fn=!0,on.abort("timeout");var Vn=new Error("XMLHttpRequest timeout");Vn.code="ETIMEDOUT",Qt(Vn)}},xt.timeout)),on.setRequestHeader)for(vn in nn)nn.hasOwnProperty(vn)&&on.setRequestHeader(vn,nn[vn]);else if(xt.headers&&!Mt(xt.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in xt&&(on.responseType=xt.responseType),"beforeSend"in xt&&typeof xt.beforeSend=="function"&&xt.beforeSend(on),on.send(An||null),on}function gt(xt){try{if(xt.responseType==="document")return xt.responseXML;var Dt=xt.responseXML&&xt.responseXML.documentElement.nodeName==="parsererror";if(xt.responseType===""&&!Dt)return xt.responseXML}catch{}return null}function Ct(){}},"./node_modules/xml-parse-from-string/index.js":St=>{St.exports=function(){return typeof self.DOMParser<"u"?function(vt){var it=new self.DOMParser;return it.parseFromString(vt,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(vt){var it=new self.ActiveXObject("Microsoft.XMLDOM");return it.async="false",it.loadXML(vt),it}:function(vt){var it=document.createElement("div");return it.innerHTML=vt,it}}()},"./node_modules/xtend/immutable.js":St=>{St.exports=vt;var Gt=Object.prototype.hasOwnProperty;function vt(){for(var it={},dt=0;dt<arguments.length;dt++){var bt=arguments[dt];for(var Tt in bt)Gt.call(bt,Tt)&&(it[Tt]=bt[Tt])}return it}},"./src/components/anchored.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/index.js"),bt=dt.debug("components:anchored:warn");St.exports.Component=it("anchored",{schema:{persistent:{default:!1}},init:function(){var Et=this.el.sceneEl,Mt=Et.getAttribute("webxr"),Rt=Mt.optionalFeatures;Rt.indexOf("anchors")===-1&&(Rt.push("anchors"),this.el.sceneEl.setAttribute("webxr",Mt)),this.auxQuaternion=new THREE.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var Et=this.el.sceneEl,Mt=Et.renderer.xr,Rt,pt,mt,gt=this.el.object3D;!Et.is("ar-mode")&&!Et.is("vr-mode")||(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(Rt=Et.frame,pt=Mt.getReferenceSpace(),mt=Rt.getPose(this.anchor.anchorSpace,pt),gt.matrix.elements=mt.transform.matrix,gt.matrix.decompose(gt.position,gt.rotation,gt.scale)))},createAnchor:async function(Mt,Rt){var pt=this.el.sceneEl,mt=pt.renderer.xr,gt,Ct,xt,Dt,Ht=this.el.object3D;if(Mt=Mt||Ht.position,Rt=Rt||this.auxQuaternion.setFromEuler(Ht.rotation),!Tt(pt)){bt("This browser doesn't support the WebXR anchors module");return}this.anchor&&this.deleteAnchor(),gt=pt.frame,Ct=mt.getReferenceSpace(),xt=new XRRigidTransform({x:Mt.x,y:Mt.y,z:Mt.z},{x:Rt.x,y:Rt.y,z:Rt.z,w:Rt.w}),this.requestAnchorPending=!1,Dt=await gt.createAnchor(xt,Ct),this.data.persistent&&(this.el.id?(this.persistentHandle=await Dt.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):bt("The anchor won't be persisted because the entity has no assigned id.")),pt.object3D.attach(this.el.object3D),this.anchor=Dt},restorePersistentAnchor:async function(){var Mt=this.el.sceneEl.renderer.xr,Rt=Mt.getSession(),pt=Rt.persistentAnchors,mt;if(this.requestPersistentAnchorPending=!1,!this.el.id){bt("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),this.requestAnchorPending=!0;return}if(pt){mt=localStorage.getItem(this.el.id);for(var gt=0;gt<pt.length;++gt)if(mt===pt[gt]){this.anchor=await Rt.restorePersistentAnchor(pt[gt]),this.anchor&&(this.persistentHandle=pt[gt]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var Et,Mt,Rt=this.anchor;Rt&&(Et=this.el.sceneEl.renderer.xr,Mt=Et.getSession(),Rt.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&Mt.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}});function Tt(Et){var Mt=Et.renderer.xr,Rt=Mt.getSession();return Rt&&Rt.restorePersistentAnchor}},"./src/components/animation.js":(St,Gt,vt)=>{var it=vt("./node_modules/super-animejs/lib/anime.es.js").default,dt=vt("./src/core/component.js").components,bt=vt("./src/core/component.js").registerComponent,Tt=vt("./src/lib/three.js"),Et=vt("./src/utils/index.js"),Mt=new Tt.Color,Rt=new Tt.Color,pt=Et.entity.getComponentProperty,mt=Et.entity.setComponentProperty,gt={},Ct="color",xt="position",Dt="rotation",Ht="scale",Ut="components",Xt="object3D";St.exports.Component=bt("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(nn){return nn===!0||nn==="true"?!0:nn===!1||nn==="false"?!1:parseInt(nn,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var nn=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){nn.animationIsPlaying=!1,nn.el.emit("animationcomplete",nn.eventDetail,!1),nn.id&&nn.el.emit("animationcomplete__"+nn.id,nn.eventDetail,!1)}}},update:function(nn){var Zt=this.config,mn=this.data;this.animationIsPlaying=!1,this.data.enabled&&mn.property&&(Zt.autoplay=!1,Zt.direction=mn.dir,Zt.duration=mn.dur,Zt.easing=mn.easing,Zt.elasticity=mn.elasticity,Zt.loop=mn.loop,Zt.round=mn.round,this.createAndStartAnimation())},tick:function(nn,Zt){this.animationIsPlaying&&(this.time+=Zt,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var nn=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=it(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!nn.autoplay||nn.startEvents&&nn.startEvents.length)){if(nn.delay){setTimeout(this.beginAnimation,nn.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=it(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var nn=this.config,Zt=this.data,mn=this.el,gn,In,Vn;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){gn=Zt.from===""?fn(mn,Zt.property):Zt.from,Vn=Zt.to,this.setColorConfig(gn,Vn),gn=this.fromColor,Vn=this.toColor,this.targetsArray.length=0,this.targetsArray.push(gn),nn.targets=this.targetsArray;for(In in Vn)nn[In]=Vn[In];nn.update=function(){var Zn={};return function(lr){var hr;hr=lr.animatables[0].target,!(hr.r===Zn.r&&hr.g===Zn.g&&hr.b===Zn.b)&&Cn(mn,Zt.property,hr,Zt.type)}}()}},updateConfigForDefault:function(){var nn=this.config,Zt=this.data,mn=this.el,gn,In,Vn,Zn;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(Zt.from===""?gn=An(Zt)?fn(mn,Zt.property):pt(mn,Zt.property):gn=Zt.from,Zn=Zt.to,Vn=!isNaN(gn||Zn),Vn?(gn=parseFloat(gn),Zn=parseFloat(Zn)):(gn=gn&&gn.toString(),Zn=Zn&&Zn.toString()),In=Zt.to==="true"||Zt.to==="false"||Zt.to===!0||Zt.to===!1,In&&(gn=Zt.from==="true"||Zt.from===!0?1:0,Zn=Zt.to==="true"||Zt.to===!0?1:0),this.targets.aframeProperty=gn,nn.targets=this.targets,nn.aframeProperty=Zn,nn.update=function(){var lr;return function(hr){var Lr;Lr=hr.animatables[0].target.aframeProperty,Lr!==lr&&(lr=Lr,In&&(Lr=Lr>=1),An(Zt)?Cn(mn,Zt.property,Lr,Zt.type):mt(mn,Zt.property,Lr))}}())},updateConfigForVector:function(){var nn=this.config,Zt=this.data,mn=this.el,gn,In,Vn;In=Zt.from!==""?Et.coordinates.parse(Zt.from):pt(mn,Zt.property),Vn=Et.coordinates.parse(Zt.to),Zt.property===Dt&&(tn(In),tn(Vn)),this.targetsArray.length=0,this.targetsArray.push(In),nn.targets=this.targetsArray;for(gn in Vn)nn[gn]=Vn[gn];if(Zt.property===xt||Zt.property===Dt||Zt.property===Ht){nn.update=function(){var Zn={};return function(lr){var hr=lr.animatables[0].target;hr.x===Zn.x&&hr.y===Zn.y&&hr.z===Zn.z||(Zn.x=hr.x,Zn.y=hr.y,Zn.z=hr.z,mn.object3D[Zt.property].set(hr.x,hr.y,hr.z))}}();return}nn.update=function(){var Zn={};return function(lr){var hr=lr.animatables[0].target;hr.x===Zn.x&&hr.y===Zn.y&&hr.z===Zn.z||(Zn.x=hr.x,Zn.y=hr.y,Zn.z=hr.z,mt(mn,Zt.property,hr))}}()},updateConfig:function(){var nn;nn=Qt(this.el,this.data.property),An(this.data)&&this.data.type===Ct?this.updateConfigForRawColor():nn==="vec2"||nn==="vec3"||nn==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(nn){var Zt,mn=this.data,gn=this.el,In=this;return mn.from!==""||!mn.property.startsWith(Ut)||(Zt=dn(mn.property)[1],gn.components[Zt])?!1:(gn.addEventListener("componentinitialized",function Vn(Zn){Zn.detail.name===Zt&&(nn(),In.animation=it(In.config),gn.removeEventListener("componentinitialized",Vn))}),!0)},stopRelatedAnimations:function(){var nn,Zt;for(Zt in this.el.components)nn=this.el.components[Zt],Zt!==this.attrName&&nn.name==="animation"&&nn.animationIsPlaying&&nn.data.property===this.data.property&&(nn.animationIsPlaying=!1)},addEventListeners:function(){var nn=this.data,Zt=this.el;on(Zt,nn.startEvents,this.onStartEvent),on(Zt,nn.pauseEvents,this.pauseAnimation),on(Zt,nn.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var nn=this.data,Zt=this.el;vn(Zt,nn.startEvents,this.onStartEvent),vn(Zt,nn.pauseEvents,this.pauseAnimation),vn(Zt,nn.resumeEvents,this.resumeAnimation)},setColorConfig:function(nn,Zt){Mt.set(nn),Rt.set(Zt),nn=this.fromColor,Zt=this.toColor,nn.r=Mt.r,nn.g=Mt.g,nn.b=Mt.b,Zt.r=Rt.r,Zt.g=Rt.g,Zt.b=Rt.b}});function Qt(nn,Zt){var mn,gn,In,Vn;return In=Zt.split("."),gn=In[0],Vn=In[1],mn=nn.components[gn]||dt[gn],!mn||Vn&&!mn.schema[Vn]?null:Vn?mn.schema[Vn].type:mn.schema.type}function tn(nn){nn.x=Tt.MathUtils.degToRad(nn.x),nn.y=Tt.MathUtils.degToRad(nn.y),nn.z=Tt.MathUtils.degToRad(nn.z)}function on(nn,Zt,mn){var gn;for(gn=0;gn<Zt.length;gn++)nn.addEventListener(Zt[gn],mn)}function vn(nn,Zt,mn){var gn;for(gn=0;gn<Zt.length;gn++)nn.removeEventListener(Zt[gn],mn)}function fn(nn,Zt){var mn,gn,In;for(gn=dn(Zt),In=nn,mn=0;mn<gn.length;mn++)In=In[gn[mn]];if(In===void 0)throw console.log(nn),new Error("[animation] property ("+Zt+") could not be found");return In}function Cn(nn,Zt,mn,gn){var In,Vn,Zn,lr;for(Zt.startsWith("object3D.rotation")&&(mn=Tt.MathUtils.degToRad(mn)),Vn=dn(Zt),lr=nn,In=0;In<Vn.length-1;In++)lr=lr[Vn[In]];if(Zn=Vn[Vn.length-1],gn===Ct){"r"in lr[Zn]?(lr[Zn].r=mn.r,lr[Zn].g=mn.g,lr[Zn].b=mn.b):(lr[Zn].x=mn.r,lr[Zn].y=mn.g,lr[Zn].z=mn.b);return}lr[Zn]=mn}function dn(nn){return nn in gt||(gt[nn]=nn.split(".")),gt[nn]}function An(nn){return nn.isRawProperty||nn.property.startsWith(Ut)||nn.property.startsWith(Xt)}},"./src/components/camera.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js");St.exports.Component=it("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var bt,Tt=this.el;bt=this.camera=new dt.PerspectiveCamera,Tt.setObject3D("camera",bt)},update:function(bt){var Tt=this.data,Et=this.camera;Et.aspect=Tt.aspect||window.innerWidth/window.innerHeight,Et.far=Tt.far,Et.fov=Tt.fov,Et.near=Tt.near,Et.zoom=Tt.zoom,Et.updateProjectionMatrix(),this.updateActiveCamera(bt),this.updateSpectatorCamera(bt)},updateActiveCamera:function(bt){var Tt=this.data,Et=this.el,Mt=this.system;bt&&bt.active===Tt.active||Tt.spectator||(Tt.active&&Mt.activeCameraEl!==Et?Mt.setActiveCamera(Et):!Tt.active&&Mt.activeCameraEl===Et&&Mt.disableActiveCamera())},updateSpectatorCamera:function(bt){var Tt=this.data,Et=this.el,Mt=this.system;bt&&bt.spectator===Tt.spectator||(Tt.spectator&&Mt.spectatorCameraEl!==Et?Mt.setSpectatorCamera(Et):!Tt.spectator&&Mt.spectatorCameraEl===Et&&Mt.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/index.js"),bt={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},Tt={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},Et={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},Mt={DOWN:["selectstart"],UP:["selectend"]},Rt="a-mouse-cursor-hover";St.exports.Component=it("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:dt.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var pt=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=dt.debounce(function(){pt.canvasBounds=pt.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(pt){this.data.rayOrigin!==pt.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var pt=this.el.sceneEl.frame,mt=this.activeXRInput;this.data.rayOrigin==="xrselect"&&pt&&mt&&this.onMouseMove({frame:pt,inputSource:mt,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var pt=this.el;pt.removeState(Tt.HOVERING),pt.removeState(Tt.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(Tt.HOVERED),this.removeEventListeners()},addEventListeners:function(){var pt,mt=this.data,gt=this.el,Ct=this;function xt(){pt=gt.sceneEl.canvas,!(mt.downEvents.length||mt.upEvents.length)&&(Et.DOWN.forEach(function(Dt){pt.addEventListener(Dt,Ct.onCursorDown,{passive:!1})}),Et.UP.forEach(function(Dt){pt.addEventListener(Dt,Ct.onCursorUp,{passive:!1})}))}pt=gt.sceneEl.canvas,pt?xt():gt.sceneEl.addEventListener("render-target-loaded",xt),mt.downEvents.forEach(function(Dt){gt.addEventListener(Dt,Ct.onCursorDown)}),mt.upEvents.forEach(function(Dt){gt.addEventListener(Dt,Ct.onCursorUp)}),gt.addEventListener("raycaster-intersection",this.onIntersection),gt.addEventListener("raycaster-closest-entity-changed",this.onIntersection),gt.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),gt.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),gt.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var pt,mt=this.data,gt=this.el,Ct=this;pt=gt.sceneEl.canvas,pt&&!mt.downEvents.length&&!mt.upEvents.length&&(Et.DOWN.forEach(function(xt){pt.removeEventListener(xt,Ct.onCursorDown)}),Et.UP.forEach(function(xt){pt.removeEventListener(xt,Ct.onCursorUp)})),mt.downEvents.forEach(function(xt){gt.removeEventListener(xt,Ct.onCursorDown)}),mt.upEvents.forEach(function(xt){gt.removeEventListener(xt,Ct.onCursorUp)}),gt.removeEventListener("raycaster-intersection",this.onIntersection),gt.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),pt.removeEventListener("mousemove",this.onMouseMove),pt.removeEventListener("touchstart",this.onMouseMove),pt.removeEventListener("touchmove",this.onMouseMove),gt.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),gt.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var pt,mt=this.el;pt=mt.sceneEl.canvas,pt.removeEventListener("mousemove",this.onMouseMove),pt.removeEventListener("touchmove",this.onMouseMove),mt.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(pt.addEventListener("mousemove",this.onMouseMove),pt.addEventListener("touchmove",this.onMouseMove,{passive:!1}),mt.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var pt=new THREE.Vector3,mt=new THREE.Vector2,gt=new THREE.Vector3,Ct={origin:gt,direction:pt};return function(xt){var Dt=this.canvasBounds,Ht=this.el.sceneEl.camera,Ut,Xt,Qt,tn,on,vn,fn,Cn;Ht.parent.updateMatrixWorld(),xt.type==="touchmove"||xt.type==="touchstart"?Xt=xt.touches.item(0):Xt=xt,Ut=Xt.clientX-Dt.left,Qt=Xt.clientY-Dt.top,mt.x=Ut/Dt.width*2-1,mt.y=-(Qt/Dt.height)*2+1,this.data.rayOrigin==="xrselect"&&(xt.type==="selectstart"||xt.type==="fakeselectevent")?(tn=xt.frame,on=xt.inputSource,vn=this.el.renderer.xr.getReferenceSpace(),fn=tn.getPose(on.targetRaySpace,vn),Cn=fn.transform,pt.set(0,0,-1),pt.applyQuaternion(Cn.orientation),gt.copy(Cn.position)):xt.type==="fakeselectout"?(pt.set(0,1,0),gt.set(0,9999,0)):Ht&&Ht.isPerspectiveCamera?(gt.setFromMatrixPosition(Ht.matrixWorld),pt.set(mt.x,mt.y,.5).unproject(Ht).sub(gt).normalize()):Ht&&Ht.isOrthographicCamera?(gt.set(mt.x,mt.y,(Ht.near+Ht.far)/(Ht.near-Ht.far)).unproject(Ht),pt.set(0,0,-1).transformDirection(Ht.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+Ht.type),this.el.setAttribute("raycaster",Ct),xt.type==="touchmove"&&xt.preventDefault()}}(),onCursorDown:function(pt){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&pt.type==="touchstart"&&(this.onMouseMove(pt),this.el.components.raycaster.checkIntersections(),pt.preventDefault()),this.data.rayOrigin==="xrselect"&&pt.type==="selectstart"&&(this.activeXRInput=pt.inputSource,this.onMouseMove(pt),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(bt.MOUSEDOWN,pt),this.cursorDownEl=this.intersectedEl},onCursorUp:function(pt){if(this.isCursorDown){this.isCursorDown=!1;var mt=this.data;this.twoWayEmit(bt.MOUSEUP,pt),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(bt.MOUSEUP,this.intersectedEventDetail)),(!mt.fuse||mt.rayOrigin==="mouse"||mt.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(bt.CLICK,pt),mt.rayOrigin==="xrselect"&&this.activeXRInput===pt.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,pt.type==="touchend"&&pt.preventDefault()}},onIntersection:function(pt){var mt,gt=this.el,Ct,xt,Dt;Ct=pt.detail.els[0]===gt?1:0,Dt=pt.detail.intersections[Ct],xt=pt.detail.els[Ct],xt&&this.intersectedEl!==xt&&(this.intersectedEl&&(mt=this.el.components.raycaster.getIntersection(this.intersectedEl),mt&&mt.distance<=Dt.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(xt,Dt)))},onIntersectionCleared:function(pt){var mt=pt.detail.clearedEls;mt.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var pt=this.el.sceneEl.xrSession,mt=this;pt&&this.data.rayOrigin!=="mouse"&&(Mt.DOWN.forEach(function(gt){pt.addEventListener(gt,mt.onCursorDown)}),Mt.UP.forEach(function(gt){pt.addEventListener(gt,mt.onCursorUp)}))},setIntersection:function(pt,mt){var gt=this.el,Ct=this.data,xt=this;this.intersectedEl!==pt&&(this.intersectedEl=pt,gt.addState(Tt.HOVERING),pt.addState(Tt.HOVERED),this.twoWayEmit(bt.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(Rt),!(Ct.fuseTimeout===0||!Ct.fuse||Ct.rayOrigin==="xrselect"||Ct.rayOrigin==="mouse")&&(gt.addState(Tt.FUSING),this.twoWayEmit(bt.FUSING),this.fuseTimeout=setTimeout(function(){gt.removeState(Tt.FUSING),xt.twoWayEmit(bt.CLICK)},Ct.fuseTimeout)))},clearCurrentIntersection:function(pt){var mt,gt,Ct,xt=this.el;this.intersectedEl&&(this.intersectedEl.removeState(Tt.HOVERED),xt.removeState(Tt.HOVERING),xt.removeState(Tt.FUSING),this.twoWayEmit(bt.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(Rt),this.intersectedEl=null,clearTimeout(this.fuseTimeout),pt!==!0&&(Ct=this.el.components.raycaster.intersections,Ct.length!==0&&(mt=Ct[0].object.el===xt?1:0,gt=Ct[mt],gt&&this.setIntersection(gt.object.el,gt))))},twoWayEmit:function(pt,mt){var gt=this.el,Ct=this.intersectedEl,xt;function Dt(Ht,Ut){mt instanceof MouseEvent?Ht.mouseEvent=mt:typeof TouchEvent<"u"&&mt instanceof TouchEvent&&(Ht.touchEvent=mt)}xt=this.el.components.raycaster.getIntersection(Ct),this.eventDetail.intersectedEl=Ct,this.eventDetail.intersection=xt,Dt(this.eventDetail),gt.emit(pt,this.eventDetail),Ct&&(this.intersectedEventDetail.intersection=xt,Dt(this.intersectedEventDetail),Ct.emit(pt,this.intersectedEventDetail))}})},"./src/components/generic-tracked-controller-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt="generic",Rt={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};St.exports.Component=it("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},after:["tracked-controls"],mapping:Rt,bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var pt=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(mt){Et(mt.detail.id,"down",pt)},this.onButtonUp=function(mt){Et(mt.detail.id,"up",pt)},this.onButtonTouchStart=function(mt){Et(mt.detail.id,"touchstart",pt)},this.onButtonTouchEnd=function(mt){Et(mt.detail.id,"touchend",pt)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.bindMethods(),this.el.addEventListener("controllerconnected",function(mt){mt.detail.name!==pt.name&&(pt.wasControllerConnected=!0,pt.removeEventListeners(),pt.removeControllersUpdateListener())})},addEventListeners:function(){var pt=this.el;pt.addEventListener("buttonchanged",this.onButtonChanged),pt.addEventListener("buttondown",this.onButtonDown),pt.addEventListener("buttonup",this.onButtonUp),pt.addEventListener("touchstart",this.onButtonTouchStart),pt.addEventListener("touchend",this.onButtonTouchEnd),pt.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var pt=this.el;pt.removeEventListener("buttonchanged",this.onButtonChanged),pt.removeEventListener("buttondown",this.onButtonDown),pt.removeEventListener("buttonup",this.onButtonUp),pt.removeEventListener("touchstart",this.onButtonTouchStart),pt.removeEventListener("touchend",this.onButtonTouchEnd),pt.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var pt=this.data,mt=pt.hand?pt.hand:void 0;bt(this,Mt,{hand:mt,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var pt=this.el,mt=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}pt.setAttribute("tracked-controls",{hand:mt.hand,idPrefix:Mt,orientationOffset:mt.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(pt){var mt=this.mapping.buttons[pt.detail.id];mt&&this.el.emit(mt+"changed",pt.detail.state)},onAxisMoved:function(pt){Tt(this,this.mapping.axes,pt)},initDefaultModel:function(){var pt=this.modelEl=document.createElement("a-entity");pt.setAttribute("geometry",{primitive:"sphere",radius:.03}),pt.setAttribute("material",{color:this.data.color}),this.el.appendChild(pt),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}})},"./src/components/geometry.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").geometries,dt=vt("./src/core/geometry.js").geometryNames,bt=vt("./src/core/component.js").registerComponent,Tt=vt("./src/lib/three.js"),Et=new Tt.BufferGeometry;St.exports.Component=bt("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:dt,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(Mt){var Rt=this.data,pt=this.el,mt,gt=this.system;this.geometry&&(gt.unuseGeometry(Mt),this.geometry=null),this.geometry=gt.getOrCreateGeometry(Rt),mt=pt.getObject3D("mesh"),mt?mt.geometry=this.geometry:(mt=new Tt.Mesh,mt.geometry=this.geometry,this.el.getAttribute("material")||(mt.material=new Tt.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),pt.setObject3D("mesh",mt))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=Et,this.geometry=null},updateSchema:function(Mt){var Rt=this.oldData&&this.oldData.primitive,pt=Mt.primitive,mt=it[pt]&&it[pt].schema;if(!mt)throw new Error("Unknown geometry schema `"+pt+"`");Rt&&Rt===pt||this.extendSchema(mt)}})},"./src/components/gltf-model.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js"),Tt=bt.debug("components:gltf-model:warn");St.exports.Component=it("gltf-model",{schema:{type:"model"},init:function(){var Et=this,Mt=this.system.getDRACOLoader(),Rt=this.system.getMeshoptDecoder(),pt=this.system.getKTX2Loader();this.model=null,this.loader=new dt.GLTFLoader,Mt&&this.loader.setDRACOLoader(Mt),Rt?this.ready=Rt.then(function(mt){Et.loader.setMeshoptDecoder(mt)}):this.ready=Promise.resolve(),pt&&this.loader.setKTX2Loader(pt)},update:function(){var Et=this,Mt=this.el,Rt=this.data;Rt&&(this.remove(),this.ready.then(function(){Et.loader.load(Rt,function(mt){Et.model=mt.scene||mt.scenes[0],Et.model.animations=mt.animations,Mt.setObject3D("mesh",Et.model),Mt.emit("model-loaded",{format:"gltf",model:Et.model})},void 0,function(mt){var gt=mt&&mt.message?mt.message:"Failed to load glTF model";Tt(gt),Mt.emit("model-error",{format:"gltf",src:Rt})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"./src/components/grabbable.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;it("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}})},"./src/components/hand-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,bt={toonLeft:dt+"controllers/hands/leftHand.glb",toonRight:dt+"controllers/hands/rightHand.glb",lowPolyLeft:dt+"controllers/hands/leftHandLow.glb",lowPolyRight:dt+"controllers/hands/rightHandLow.glb",highPolyLeft:dt+"controllers/hands/leftHandHigh.glb",highPolyRight:dt+"controllers/hands/rightHandHigh.glb"},Tt={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},Et={};Et[Tt.fist]="grip",Et[Tt.thumbUp]="pistol",Et[Tt.point]="pointing",St.exports.Component=it("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var pt=this,mt=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){pt.handleButton("grip","down")},this.onGripUp=function(){pt.handleButton("grip","up")},this.onTrackpadDown=function(){pt.handleButton("trackpad","down")},this.onTrackpadUp=function(){pt.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){pt.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){pt.handleButton("trackpad","touchend")},this.onTriggerDown=function(){pt.handleButton("trigger","down")},this.onTriggerUp=function(){pt.handleButton("trigger","up")},this.onTriggerTouchStart=function(){pt.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){pt.handleButton("trigger","touchend")},this.onGripTouchStart=function(){pt.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){pt.handleButton("grip","touchend")},this.onThumbstickDown=function(){pt.handleButton("thumbstick","down")},this.onThumbstickUp=function(){pt.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){pt.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){pt.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){pt.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){pt.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){pt.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){pt.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),mt.addEventListener("controllerconnected",this.onControllerConnected),mt.addEventListener("controllerdisconnected",this.onControllerDisconnected),mt.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(pt,mt){var gt=this.el.getObject3D("mesh");!gt||!gt.mixer||gt.mixer.update(mt/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var pt=this.el;pt.addEventListener("gripdown",this.onGripDown),pt.addEventListener("gripup",this.onGripUp),pt.addEventListener("trackpaddown",this.onTrackpadDown),pt.addEventListener("trackpadup",this.onTrackpadUp),pt.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),pt.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),pt.addEventListener("triggerdown",this.onTriggerDown),pt.addEventListener("triggerup",this.onTriggerUp),pt.addEventListener("triggertouchstart",this.onTriggerTouchStart),pt.addEventListener("triggertouchend",this.onTriggerTouchEnd),pt.addEventListener("griptouchstart",this.onGripTouchStart),pt.addEventListener("griptouchend",this.onGripTouchEnd),pt.addEventListener("thumbstickdown",this.onThumbstickDown),pt.addEventListener("thumbstickup",this.onThumbstickUp),pt.addEventListener("abuttontouchstart",this.onAorXTouchStart),pt.addEventListener("abuttontouchend",this.onAorXTouchEnd),pt.addEventListener("bbuttontouchstart",this.onBorYTouchStart),pt.addEventListener("bbuttontouchend",this.onBorYTouchEnd),pt.addEventListener("xbuttontouchstart",this.onAorXTouchStart),pt.addEventListener("xbuttontouchend",this.onAorXTouchEnd),pt.addEventListener("ybuttontouchstart",this.onBorYTouchStart),pt.addEventListener("ybuttontouchend",this.onBorYTouchEnd),pt.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),pt.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var pt=this.el;pt.removeEventListener("gripdown",this.onGripDown),pt.removeEventListener("gripup",this.onGripUp),pt.removeEventListener("trackpaddown",this.onTrackpadDown),pt.removeEventListener("trackpadup",this.onTrackpadUp),pt.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),pt.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),pt.removeEventListener("triggerdown",this.onTriggerDown),pt.removeEventListener("triggerup",this.onTriggerUp),pt.removeEventListener("triggertouchstart",this.onTriggerTouchStart),pt.removeEventListener("triggertouchend",this.onTriggerTouchEnd),pt.removeEventListener("griptouchstart",this.onGripTouchStart),pt.removeEventListener("griptouchend",this.onGripTouchEnd),pt.removeEventListener("thumbstickdown",this.onThumbstickDown),pt.removeEventListener("thumbstickup",this.onThumbstickUp),pt.removeEventListener("abuttontouchstart",this.onAorXTouchStart),pt.removeEventListener("abuttontouchend",this.onAorXTouchEnd),pt.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),pt.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),pt.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),pt.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),pt.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),pt.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),pt.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),pt.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(pt){var mt,gt=this.el,Ct=this.data.hand,xt=this.data.handModelStyle,Dt=this.data.color,Ht=this;if(mt={hand:Ct,model:!1},Ct!==pt){var Ut=bt[xt+Ct.charAt(0).toUpperCase()+Ct.slice(1)];this.loader.load(Ut,function(Xt){var Qt=Xt.scene.children[0],tn=Ct==="left"?Math.PI/2:-Math.PI/2,on=gt.sceneEl.hasWebXR?-Math.PI/2:0;Qt.mixer=new THREE.AnimationMixer(Qt),Ht.clips=Xt.animations,gt.setObject3D("mesh",Qt),Qt.traverse(function(vn){vn.isMesh&&(vn.material.color=new THREE.Color(Dt))}),Qt.position.set(0,0,0),Qt.rotation.set(on,0,tn),gt.setAttribute("magicleap-controls",mt),gt.setAttribute("vive-controls",mt),gt.setAttribute("oculus-touch-controls",mt),gt.setAttribute("pico-controls",mt),gt.setAttribute("windows-motion-controls",mt),gt.setAttribute("hp-mixed-reality-controls",mt)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(pt,mt){var gt,Ct=mt==="down",xt=mt==="touchstart";if(mt.indexOf("touch")===0){if(xt===this.touchedButtons[pt])return;this.touchedButtons[pt]=xt}else{if(Ct===this.pressedButtons[pt])return;this.pressedButtons[pt]=Ct}gt=this.gesture,this.gesture=this.determineGesture(),this.gesture!==gt&&(this.animateGesture(this.gesture,gt),this.emitGestureEvents(this.gesture,gt))},determineGesture:function(){var pt,mt=this.pressedButtons.grip,gt=this.pressedButtons.surface||this.touchedButtons.surface,Ct=this.pressedButtons.trackpad||this.touchedButtons.trackpad,xt=this.pressedButtons.trigger||this.touchedButtons.trigger,Dt=this.touchedButtons.AorX||this.touchedButtons.BorY,Ht=Rt(this.el.components["tracked-controls"]);return Ht?mt||xt?pt=Tt.fist:Ct&&(pt=Tt.point):mt?gt||Dt||Ct?pt=xt?Tt.fist:Tt.point:pt=xt?Tt.thumbUp:Tt.pointThumb:xt&&(pt=Tt.hold),pt},getClip:function(pt){var mt,gt;for(gt=0;gt<this.clips.length;gt++)if(mt=this.clips[gt],mt.name===pt)return mt},animateGesture:function(pt,mt){if(pt){this.playAnimation(pt||Tt.open,mt,!1);return}this.playAnimation(mt,mt,!0)},emitGestureEvents:function(pt,mt){var gt=this.el,Ct;mt!==pt&&(Ct=Mt(mt,!1),Ct&&gt.emit(Ct),Ct=Mt(pt,!0),Ct&&gt.emit(Ct))},playAnimation:function(pt,mt,gt){var Ct,xt,Dt=this.el.getObject3D("mesh"),Ht;if(Dt){if(Ct=this.getClip(pt),Ht=Dt.mixer.clipAction(Ct),gt){Ht.paused=!1,Ht.timeScale=-1;return}if(Ht.clampWhenFinished=!0,Ht.loop=THREE.LoopOnce,Ht.repetitions=0,Ht.timeScale=1,Ht.time=0,Ht.weight=1,!mt){Dt.mixer.stopAllAction(),Ht.play();return}Ct=this.getClip(mt),Ht.reset(),Ht.play(),xt=Dt.mixer.clipAction(Ct),xt.crossFadeTo(Ht,.15,!0)}}});function Mt(pt,mt){var gt;if(pt){if(gt=Et[pt],gt==="grip")return gt+(mt?"close":"open");if(gt==="point")return gt+(mt?"up":"down");if(gt==="pointing"||gt==="pistol")return gt+(mt?"start":"end")}}function Rt(pt){var mt=pt&&pt.controller,gt=mt&&(mt.id&&mt.id.indexOf("OpenVR ")===0||mt.profiles&&mt.profiles[0]&&mt.profiles[0]==="htc-vive");return gt}},"./src/components/hand-tracking-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/core/a-entity.js").AEntity,bt=vt("./src/utils/tracked-controls.js"),Tt=bt.checkControllerPresentAndSetup,Et=vt("./src/constants/index.js").AFRAME_CDN_ROOT,Mt=Et+"controllers/oculus-hands/v4/left.glb",Rt=Et+"controllers/oculus-hands/v4/right.glb",pt=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],mt=0,gt=4,Ct=9,xt=.015,Dt=.1;St.exports.Component=it("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var Ht=0;Ht<this.jointEls.length;++Ht)this.jointEls[Ht].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var Ht=0;Ht<this.jointEls.length;++Ht)this.jointEls[Ht].object3D.visible=!1},init:function(){var Ht=this.el.sceneEl,Ut=Ht.getAttribute("webxr"),Xt=Ut.optionalFeatures;Xt.indexOf("hand-tracking")===-1&&(Xt.push("hand-tracking"),Ht.setAttribute("webxr",Ut)),this.wristObject3D=new THREE.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3,wristRotation:new THREE.Quaternion},this.indexTipPosition=new THREE.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*pt.length),this.jointRadii=new Float32Array(pt.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.el.object3D.visible=!1,this.wristObject3D.visible=!1},onChildAttached:function(Ht){this.addChildEntity(Ht.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var Ht=this.jointEls,Ut=this.skinnedMesh,Xt=this.data.modelOpacity!==1;Ut&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=Xt,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var Qt=0;Qt<Ht.length;Qt++)Ht[Qt].setAttribute("material",{color:this.data.modelColor,transparent:Xt,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var Ht=this,Ut=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!Ut){var Xt=Ht.el.sceneEl.systems.webxr.sessionReferenceSpaceType;Ut.requestReferenceSpace(Xt).then(function(Qt){Ht.referenceSpace=Qt}).catch(function(Qt){throw Ht.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(Xt,"tracked-controls-webxr uses reference space "+Xt),Qt})}},checkIfControllerPresent:function(){var Ht=this.data,Ut=Ht.hand?Ht.hand:void 0;Tt(this,"",{hand:Ut,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var Ht=this.el.sceneEl,Ut=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,Xt=Ht.frame,Qt=this.el.components["tracked-controls-webxr"],tn=this.referenceSpace;!Ut||!Xt||!tn||!Qt||(this.hasPoses=!1,Ut.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=Xt.fillPoses(Ut.hand.values(),tn,this.jointPoses)&&Xt.fillJointRadii(Ut.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:function(){var Ht=new THREE.Matrix4;return function(){var Ut=this.wristObject3D;!Ut||!this.hasPoses||(Ht.fromArray(this.jointPoses,mt*16),Ut.position.setFromMatrixPosition(Ht),Ut.quaternion.setFromRotationMatrix(Ht))}}(),updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(Ht){for(var Ut=this.bones,Xt=0;Xt<Ut.length;Xt++)if(Ut[Xt].name===Ht)return Ut[Xt];return null},updateHandMeshModel:function(){var Ht=new THREE.Matrix4;return function(){var Ut=0,Xt=this.jointPoses,Qt=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(!(!Qt||!this.mesh)&&(this.mesh.visible=!1,!!this.hasPoses))for(var tn of Qt.hand.values()){var on=this.getBone(tn.jointName);on!=null&&(this.mesh.visible=!0,Ht.fromArray(Xt,Ut*16),on.position.setFromMatrixPosition(Ht),on.quaternion.setFromRotationMatrix(Ht)),Ut++}}}(),updateHandDotsModel:function(){for(var Ht=this.jointPoses,Ut=this.jointRadii,Xt=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,Qt,tn,on=0;on<Xt.hand.size;on++)Qt=this.jointEls[on],tn=Qt.object3D,Qt.object3D.visible=this.hasPoses,this.hasPoses&&(tn.matrix.fromArray(Ht,on*16),tn.matrix.decompose(tn.position,tn.rotation,tn.scale),Qt.setAttribute("scale",{x:Ut[on],y:Ut[on],z:Ut[on]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var Ht=new THREE.Vector3,Ut=new THREE.Matrix4;return function(){var Xt=this.indexTipPosition,Qt=this.pinchEventDetail;if(this.hasPoses){Ht.setFromMatrixPosition(Ut.fromArray(this.jointPoses,gt*16)),Xt.setFromMatrixPosition(Ut.fromArray(this.jointPoses,Ct*16)),Qt.wristRotation.setFromRotationMatrix(Ut.fromArray(this.jointPoses,mt*16));var tn=Xt.distanceTo(Ht);tn<xt&&this.isPinched===!1&&(this.isPinched=!0,this.pinchDistance=tn,Qt.position.copy(Xt).add(Ht).multiplyScalar(.5),this.el.emit("pinchstarted",Qt)),tn>this.pinchDistance+this.pinchDistance*Dt&&this.isPinched===!0&&(this.isPinched=!1,Qt.position.copy(Xt).add(Ht).multiplyScalar(.5),this.el.emit("pinchended",Qt)),this.isPinched&&(Qt.position.copy(Xt).add(Ht).multiplyScalar(.5),this.el.emit("pinchmoved",Qt))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var Ht=this.el,Ut=this.data;if(Ht.setAttribute("tracked-controls",{id:"",hand:Ut.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh){this.mesh!==Ht.getObject3D("mesh")&&Ht.setObject3D("mesh",this.mesh);return}this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var Ht=this.el,Ut;this.checkIfControllerPresent(),Ut=Ht.components["tracked-controls"]&&Ht.components["tracked-controls"].controller,this.mesh&&Ut&&Ut.hand&&Ut.hand instanceof XRHand&&Ht.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var Ht=this.data;Ht.modelStyle==="dots"&&this.initDotsModel(),Ht.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var Ht=0;Ht<pt.length;++Ht){var Ut=this.jointEl=document.createElement("a-entity");Ut.setAttribute("geometry",{primitive:"sphere",radius:1}),Ut.object3D.visible=!1,this.el.appendChild(Ut),this.jointEls.push(Ut)}this.updateModelMaterial()}},initMeshHandModel:function(){var Ht=this.data.hand==="left"?Mt:Rt;this.el.setAttribute("gltf-model",Ht)},onModelLoaded:function(){var Ht=this.mesh=this.el.getObject3D("mesh").children[0],Ut=this.skinnedMesh=Ht.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=Ut.skeleton.bones,this.el.removeObject3D("mesh"),Ht.position.set(0,0,0),Ht.rotation.set(0,0,0),Ut.frustumCulled=!1,Ut.material=new THREE.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",Ht))},setupChildrenEntities:function(){for(var Ht=this.el.children,Ut=0;Ut<Ht.length;++Ut)Ht[Ut]instanceof dt&&this.addChildEntity(Ht[Ut])},addChildEntity:function(Ht){Ht instanceof dt&&this.wristObject3D.add(Ht.object3D)}})},"./src/components/hand-tracking-grab-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js");it("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var bt=this.el,Tt=this.data,Et;Tt.hand==="right"?Et="components.hand-tracking-controls.bones.3":Et="components.hand-tracking-controls.bones.21",bt.setAttribute("hand-tracking-controls",{hand:Tt.hand}),bt.setAttribute("obb-collider",{trackedObject3D:Et,size:.04}),this.auxMatrix=new dt.Matrix4,this.auxQuaternion=new dt.Quaternion,this.auxQuaternion2=new dt.Quaternion,this.auxVector=new dt.Vector3,this.auxVector2=new dt.Vector3,this.grabbingObjectPosition=new dt.Vector3,this.grabbedObjectPosition=new dt.Vector3,this.grabbedObjectPositionDelta=new dt.Vector3,this.grabDeltaPosition=new dt.Vector3,this.grabInitialRotation=new dt.Quaternion,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded),this.onPinchMoved=this.onPinchMoved.bind(this),this.el.addEventListener("pinchmoved",this.onPinchMoved)},transferEntityOwnership:function(){for(var bt,Tt=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),Et=0;Et<Tt.length;++Et)bt=Tt[Et].components["hand-tracking-grab-controls"],bt!==this&&this.grabbedEl&&this.grabbedEl===bt.grabbedEl&&bt.releaseGrabbedEntity();return!1},onCollisionStarted:function(bt){var Tt=bt.detail.withEl;this.collidedEl||Tt.getAttribute("grabbable")&&(this.collidedEl=Tt,this.grabbingObject3D=bt.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,!this.grabbedEl&&(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(bt){this.collidedEl&&(this.pinchPosition=bt.detail.position,this.wristRotation=bt.detail.wristRotation,this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},onPinchMoved:function(bt){this.wristRotation=bt.detail.wristRotation},releaseGrabbedEntity:function(){var bt=this.grabbedEl;bt&&(bt.object3D.updateMatrixWorld=this.originalUpdateMatrixWorld,bt.object3D.matrixAutoUpdate=!0,bt.object3D.matrixWorldAutoUpdate=!0,bt.object3D.matrixWorld.decompose(this.auxVector,this.auxQuaternion,this.auxVector2),bt.object3D.position.copy(this.auxVector),bt.object3D.quaternion.copy(this.auxQuaternion),this.el.emit("grabended",{grabbedEl:bt}),this.grabbedEl=void 0)},grab:function(){var bt=this.grabbedEl,Tt;Tt=bt.object3D.getWorldPosition(this.grabbedObjectPosition),this.grabDeltaPosition.copy(Tt).sub(this.pinchPosition),this.grabInitialRotation.copy(this.auxQuaternion.copy(this.wristRotation).invert()),this.originalUpdateMatrixWorld=bt.object3D.updateMatrixWorld,bt.object3D.updateMatrixWorld=function(){},bt.object3D.updateMatrixWorldChildren=function(Et){for(var Mt=this.children,Rt=0,pt=Mt.length;Rt<pt;Rt++){var mt=Mt[Rt];(mt.matrixWorldAutoUpdate===!0||Et===!0)&&mt.updateMatrixWorld(!0)}},bt.object3D.matrixAutoUpdate=!1,bt.object3D.matrixWorldAutoUpdate=!1,this.el.emit("grabstarted",{grabbedEl:bt})},tock:function(){var bt=this.auxMatrix,Tt=this.auxQuaternion,Et=this.auxQuaternion2,Mt,Rt=this.grabbedEl;Rt&&(Mt=Rt.object3D,Mt.getWorldQuaternion(Et),Mt.matrixWorld.identity(),bt.identity(),bt.makeTranslation(this.pinchPosition),Mt.matrixWorld.multiply(bt),bt.identity(),bt.makeRotationFromQuaternion(Tt.copy(this.wristRotation).multiply(this.grabInitialRotation)),Mt.matrixWorld.multiply(bt),bt.identity(),bt.makeTranslation(this.grabDeltaPosition),Mt.matrixWorld.multiply(bt),bt.identity(),bt.makeRotationFromQuaternion(Et),Mt.matrixWorld.multiply(bt),bt.makeScale(Rt.object3D.scale.x,Rt.object3D.scale.y,Rt.object3D.scale.z),Mt.matrixWorld.multiply(bt),Mt.updateMatrixWorldChildren())}})},"./src/components/hide-on-enter-ar.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("hide-on-enter-ar",{init:function(){var dt=this;this.el.sceneEl.addEventListener("enter-vr",function(){dt.el.sceneEl.is("ar-mode")&&(dt.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){dt.el.object3D.visible=!0})}})},"./src/components/hide-on-enter-vr.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("hide-on-enter-vr",{init:function(){var dt=this;this.el.sceneEl.addEventListener("enter-vr",function(){dt.el.sceneEl.is("vr-mode")&&(dt.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){dt.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/tracked-controls.js"),Tt=bt.checkControllerPresentAndSetup,Et=bt.emitIfAxesChanged,Mt=bt.onButtonEvent,Rt="hp-mixed-reality",pt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,mt=pt+"controllers/hp/mixed-reality/",gt={x:0,y:0,z:.06},Ct={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},xt={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};St.exports.Component=it("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:xt,init:function(){var Dt=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Ht){Mt(Ht.detail.id,"down",Dt,Dt.data.hand)},this.onButtonUp=function(Ht){Mt(Ht.detail.id,"up",Dt,Dt.data.hand)},this.onButtonTouchEnd=function(Ht){Mt(Ht.detail.id,"touchend",Dt,Dt.data.hand)},this.onButtonTouchStart=function(Ht){Mt(Ht.detail.id,"touchstart",Dt,Dt.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var Dt=this.data;this.controllerIndex=Dt.hand==="right"?0:Dt.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var Dt=this.el;Dt.addEventListener("buttonchanged",this.onButtonChanged),Dt.addEventListener("buttondown",this.onButtonDown),Dt.addEventListener("buttonup",this.onButtonUp),Dt.addEventListener("touchstart",this.onButtonTouchStart),Dt.addEventListener("touchend",this.onButtonTouchEnd),Dt.addEventListener("axismove",this.onAxisMoved),Dt.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Dt=this.el;Dt.removeEventListener("buttonchanged",this.onButtonChanged),Dt.removeEventListener("buttondown",this.onButtonDown),Dt.removeEventListener("buttonup",this.onButtonUp),Dt.removeEventListener("touchstart",this.onButtonTouchStart),Dt.removeEventListener("touchend",this.onButtonTouchEnd),Dt.removeEventListener("axismove",this.onAxisMoved),Dt.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var Dt=this.data;Tt(this,Rt,{index:this.controllerIndex,hand:Dt.hand})},injectTrackedControls:function(){var Dt=this.el,Ht=this.data;Dt.setAttribute("tracked-controls",{idPrefix:Rt,hand:Ht.hand,controller:this.controllerIndex,orientationOffset:Ht.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",mt+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(Dt){var Ht=this.mapping[this.data.hand].buttons[Dt.detail.id],Ut;Ht&&(Ht==="trigger"&&(Ut=Dt.detail.state.value,console.log("analog value of trigger press: "+Ut)),this.el.emit(Ht+"changed",Dt.detail.state))},onModelLoaded:function(Dt){var Ht=Dt.detail.model;this.data.model&&(Ht.position.copy(gt),Ht.rotation.copy(Ct),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new dt.Vector3(0,0,0)}))},onAxisMoved:function(Dt){Et(this,this.mapping.axes,Dt)}})},"./src/components/index.js":(St,Gt,vt)=>{vt("./src/components/animation.js"),vt("./src/components/anchored.js"),vt("./src/components/camera.js"),vt("./src/components/cursor.js"),vt("./src/components/geometry.js"),vt("./src/components/generic-tracked-controller-controls.js"),vt("./src/components/gltf-model.js"),vt("./src/components/grabbable.js"),vt("./src/components/hand-tracking-controls.js"),vt("./src/components/hand-tracking-grab-controls.js"),vt("./src/components/hand-controls.js"),vt("./src/components/hide-on-enter-ar.js"),vt("./src/components/hide-on-enter-vr.js"),vt("./src/components/hp-mixed-reality-controls.js"),vt("./src/components/layer.js"),vt("./src/components/laser-controls.js"),vt("./src/components/light.js"),vt("./src/components/line.js"),vt("./src/components/link.js"),vt("./src/components/look-controls.js"),vt("./src/components/magicleap-controls.js"),vt("./src/components/material.js"),vt("./src/components/obb-collider.js"),vt("./src/components/obj-model.js"),vt("./src/components/oculus-go-controls.js"),vt("./src/components/oculus-touch-controls.js"),vt("./src/components/pico-controls.js"),vt("./src/components/position.js"),vt("./src/components/raycaster.js"),vt("./src/components/rotation.js"),vt("./src/components/scale.js"),vt("./src/components/shadow.js"),vt("./src/components/sound.js"),vt("./src/components/text.js"),vt("./src/components/tracked-controls.js"),vt("./src/components/tracked-controls-webvr.js"),vt("./src/components/tracked-controls-webxr.js"),vt("./src/components/visible.js"),vt("./src/components/valve-index-controls.js"),vt("./src/components/vive-controls.js"),vt("./src/components/vive-focus-controls.js"),vt("./src/components/wasd-controls.js"),vt("./src/components/windows-motion-controls.js"),vt("./src/components/scene/ar-hit-test.js"),vt("./src/components/scene/background.js"),vt("./src/components/scene/debug.js"),vt("./src/components/scene/device-orientation-permission-ui.js"),vt("./src/components/scene/embedded.js"),vt("./src/components/scene/inspector.js"),vt("./src/components/scene/fog.js"),vt("./src/components/scene/keyboard-shortcuts.js"),vt("./src/components/scene/pool.js"),vt("./src/components/scene/real-world-meshing.js"),vt("./src/components/scene/reflection.js"),vt("./src/components/scene/screenshot.js"),vt("./src/components/scene/stats.js"),vt("./src/components/scene/xr-mode-ui.js")},"./src/components/laser-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/index.js");it("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var bt=this.config,Tt=this.data,Et=this.el,Mt=this,Rt={hand:Tt.hand,model:Tt.model};Et.setAttribute("hp-mixed-reality-controls",Rt),Et.setAttribute("magicleap-controls",Rt),Et.setAttribute("oculus-go-controls",Rt),Et.setAttribute("oculus-touch-controls",Rt),Et.setAttribute("pico-controls",Rt),Et.setAttribute("valve-index-controls",Rt),Et.setAttribute("vive-controls",Rt),Et.setAttribute("vive-focus-controls",Rt),Et.setAttribute("windows-motion-controls",Rt),Et.setAttribute("generic-tracked-controller-controls",{hand:Rt.hand}),Et.addEventListener("controllerconnected",pt),Et.addEventListener("controllerdisconnected",mt),Et.addEventListener("controllermodelready",function(gt){pt(gt),Mt.modelReady=!0});function pt(gt){var Ct=bt[gt.detail.name];if(Ct){var xt=dt.extend({showLine:!0},Ct.raycaster||{});gt.detail.rayOrigin&&(xt.origin=gt.detail.rayOrigin.origin,xt.direction=gt.detail.rayOrigin.direction,xt.showLine=!0),gt.detail.rayOrigin||!Mt.modelReady?Et.setAttribute("raycaster",xt):Et.setAttribute("raycaster","showLine",!0),Et.setAttribute("cursor",dt.extend({fuse:!1},Ct.cursor))}}function mt(gt){var Ct=bt[gt.detail.name];Ct&&Et.setAttribute("raycaster","showLine",!1)}},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/index.js"),bt=dt.debug("components:layer:warn");St.exports.Component=it("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var Et=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=Et.createFramebuffer();var Mt=this.el.sceneEl.getAttribute("webxr"),Rt=Mt.requiredFeatures;Rt.indexOf("layers")===-1&&(Rt.push("layers"),this.el.sceneEl.setAttribute("webxr",Mt)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(Et){this.data.src!==Et.src&&this.updateSrc()},updateSrc:function(){var Et=this.data.type;if(this.texture=void 0,Et==="quad"){this.loadQuadImage();return}if(Et==="monocubemap"||Et==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var Et,Mt=this.xrGLFactory,Rt=this.el.sceneEl.frame,pt=this.data.src,mt=this.data.type;this.visibilityChanged=!1,this.layer&&(mt!=="monocubemap"&&mt!=="stereocubemap"||(pt.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,mt==="monocubemap"?(Et=Mt.getSubImage(this.layer,Rt),this.loadCubeMapImage(Et.colorTexture,pt,0)):(Et=Mt.getSubImage(this.layer,Rt,"left"),this.loadCubeMapImage(Et.colorTexture,pt,0),Et=Mt.getSubImage(this.layer,Rt,"right"),this.loadCubeMapImage(Et.colorTexture,pt,6))))},loadQuadImage:function(){var Et=this.data.src,Mt=this;this.el.sceneEl.systems.material.loadTexture(Et,{src:Et},function(pt){Mt.el.sceneEl.renderer.initTexture(pt),Mt.texture=pt,Et.tagName==="VIDEO"&&setTimeout(function(){Mt.textureIsVideo=!0},1e3),Mt.layer&&(Mt.layer.height=Mt.data.height/2||Mt.texture.image.height/1e3,Mt.layer.width=Mt.data.width/2||Mt.texture.image.width/1e3,Mt.needsRedraw=!0),Mt.updateQuadPanel()})},preGenerateCubeMapTextures:function(Et,Mt){this.data.type==="monocubemap"?this.generateCubeMapTextures(Et,0,Mt):(this.generateCubeMapTextures(Et,0,Mt),this.generateCubeMapTextures(Et,6,Mt))},generateCubeMapTextures:function(Et,Mt,Rt){for(var pt=this.data,mt=this.cubeFaceSize,gt=Math.min(Et.width,Et.height),Ct=[],xt,Dt,Ht=0;Ht<6;Ht++){var Ut=document.createElement("CANVAS");Ut.width=Ut.height=mt;var Xt=Ut.getContext("2d");pt.rotateCubemap&&(Ht===2||Ht===3)&&(Xt.save(),Xt.translate(mt,mt),Xt.rotate(Math.PI)),Xt.drawImage(Et,(Ht+Mt)*gt,0,gt,gt,0,0,mt,mt),Xt.restore(),Rt&&Rt(),Ct.push(Ut)}return pt.rotateCubemap&&(xt=Ct[0],Dt=Ct[1],Ct[0]=Dt,Ct[1]=xt,xt=Ct[4],Dt=Ct[5],Ct[4]=Dt,Ct[5]=xt),Rt&&Rt(),Ct},loadCubeMapImage:function(Et,Mt,Rt){var pt=this.el.sceneEl.renderer.getContext(),mt;pt.pixelStorei(pt.UNPACK_FLIP_Y_WEBGL,!1),pt.bindTexture(pt.TEXTURE_CUBE_MAP,Et),!Mt.complete||this.loadingScreen?mt=this.loadingScreenImages:mt=this.generateCubeMapTextures(Mt,Rt);var gt=0;mt.forEach(function(Ct,xt){pt.texSubImage2D(pt.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,0,0,pt.RGBA,pt.UNSIGNED_BYTE,Ct),gt=pt.getError()}),gt!==0&&console.log("renderingError, WebGL Error Code: "+gt),pt.bindTexture(pt.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var Et=this,Mt=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(Rt){Et.visibilityChanged=Rt.session.visibilityState!=="hidden"},Mt==="quad"){this.initQuadLayer();return}if(Mt==="monocubemap"||Mt==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var Et=this.el.sceneEl,Mt=Et.renderer.getContext(),Rt=this.xrGLFactory=new XRWebGLBinding(Et.xrSession,Mt);this.texture&&(this.layer=Rt.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),Et.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var Et=this.data.src,Mt=this.el.sceneEl,Rt=Mt.renderer.getContext(),pt=Rt.getParameter(Rt.MAX_CUBE_MAP_TEXTURE_SIZE),mt=this.cubeFaceSize=Math.min(pt,Math.min(Et.width,Et.height)),gt=this.xrGLFactory=new XRWebGLBinding(Mt.xrSession,Rt);this.layer=gt.createCubeLayer({space:this.referenceSpace,viewPixelWidth:mt,viewPixelHeight:mt,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),Mt.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var Et=this.cubeFaceSize,Mt=this.loadingScreenImages=[],Rt=0;Rt<6;Rt++){var pt=document.createElement("CANVAS");pt.width=pt.height=Et;var mt=pt.getContext("2d");pt.width=pt.height=Et,mt.fillStyle="black",mt.fillRect(0,0,Et,Et),Rt!==2&&Rt!==3&&(mt.translate(Et,0),mt.scale(-1,1),mt.fillStyle="white",mt.font="30px Arial",mt.fillText("Loading",Et/2,Et/2)),Mt.push(pt)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(Et){this.layerEnabled=Et,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var Et=this.quadPanelEl;this.quadPanelEl||(Et=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(Et)),Et.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),Et.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var Et=this.el.sceneEl,Mt=this.el.sceneEl.renderer.getContext(),Rt=this.xrGLFactory.getSubImage(this.layer,Et.frame),pt=Et.renderer.properties.get(this.texture).__webglTexture,mt=Mt.getParameter(Mt.FRAMEBUFFER_BINDING);Mt.viewport(Rt.viewport.x,Rt.viewport.y,Rt.viewport.width,Rt.viewport.height),Mt.bindFramebuffer(Mt.FRAMEBUFFER,this.frameBuffer),Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_2D,Rt.colorTexture,0),Tt(Mt,pt,Rt,this.data.src),Mt.bindFramebuffer(Mt.FRAMEBUFFER,mt)},updateTransform:function(){var Et=this.el,Mt=this.position,Rt=this.quaternion;Et.object3D.updateMatrixWorld(),Mt.setFromMatrixPosition(Et.object3D.matrixWorld),Rt.setFromRotationMatrix(Et.object3D.matrixWorld),this.layerEnabled||Mt.set(0,0,1e8),this.layer.transform=new XRRigidTransform(Mt,Rt)},onEnterVR:function(){var Et=this.el.sceneEl,Mt=Et.xrSession;if(!Et.hasWebXR||!XRWebGLBinding||!Mt){bt("The layer component requires WebXR and the layers API enabled");return}Mt.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(Et){this.referenceSpace=Et}});function Tt(Et,Mt,Rt,pt){var mt=Et.createFramebuffer(),gt=Rt.viewport.x,Ct=Rt.viewport.y,xt=Rt.viewport.x+Rt.viewport.width,Dt=Rt.viewport.y+Rt.viewport.height;pt.tagName==="VIDEO"&&(Et.bindTexture(Et.TEXTURE_2D,Mt),Et.texSubImage2D(Et.TEXTURE_2D,0,0,0,pt.width,pt.height,Et.RGB,Et.UNSIGNED_BYTE,pt)),Et.bindFramebuffer(Et.READ_FRAMEBUFFER,mt),Et.framebufferTexture2D(Et.READ_FRAMEBUFFER,Et.COLOR_ATTACHMENT0,Et.TEXTURE_2D,Mt,0),Et.readBuffer(Et.COLOR_ATTACHMENT0),Et.blitFramebuffer(0,0,pt.width,pt.height,gt,Ct,xt,Dt,Et.COLOR_BUFFER_BIT,Et.NEAREST),Et.bindFramebuffer(Et.READ_FRAMEBUFFER,null),Et.deleteFramebuffer(mt)}},"./src/components/light.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js"),dt=it.diff,bt=vt("./src/utils/debug.js"),Tt=vt("./src/core/component.js").registerComponent,Et=vt("./src/lib/three.js"),Mt=vt("./src/utils/math.js"),Rt=Et.MathUtils.degToRad,pt=bt("components:light:warn"),mt=new Et.CubeTextureLoader,gt={};St.exports.Component=Tt("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var Ct=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(Ct)},update:function(Ct){var xt=this.data,Dt=dt(xt,Ct),Ht=this.light,Ut=this;if(Ht&&!("type"in Dt)){var Xt=!1;Object.keys(Dt).forEach(function(Qt){var tn=xt[Qt];switch(Qt){case"color":{Ht.color.set(tn);break}case"groundColor":{Ht.groundColor.set(tn);break}case"angle":{Ht.angle=Rt(tn);break}case"target":{tn===null?(xt.type==="spot"||xt.type==="directional")&&(Ht.target=Ut.defaultTarget):tn.hasLoaded?Ut.onSetTarget(tn,Ht):tn.addEventListener("loaded",Ut.onSetTarget.bind(Ut,tn,Ht));break}case"envMap":Ut.updateProbeMap(xt,Ht);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":Xt||(Ut.updateShadow(),Xt=!0);break;case"shadowCameraAutomatic":xt.shadowCameraAutomatic?Ut.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(xt.shadowCameraAutomatic)):Ut.shadowCameraAutomaticEls=[];break;default:Ht[Qt]=tn}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var Ct=new Et.Box3,xt=new Et.Vector3,Dt=new Et.Vector3,Ht=new Et.Matrix4,Ut=new Et.Sphere,Xt=new Et.Vector3;return function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof Et.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var Qt=this.light.shadow.camera;Qt.getWorldDirection(xt),Qt.getWorldPosition(Dt),Ht.copy(Qt.matrixWorld),Ht.invert(),Qt.near=1,Qt.left=1e5,Qt.right=-1e5,Qt.top=-1e5,Qt.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(tn){Ct.setFromObject(tn.object3D),Ct.getBoundingSphere(Ut);var on=Mt.distanceOfPointFromPlane(Dt,xt,Ut.center),vn=Mt.nearestPointInPlane(Dt,xt,Ut.center,Xt),fn=vn.applyMatrix4(Ht);Qt.near=Math.min(-on-Ut.radius-1,Qt.near),Qt.left=Math.min(-Ut.radius+fn.x,Qt.left),Qt.right=Math.max(Ut.radius+fn.x,Qt.right),Qt.top=Math.max(Ut.radius+fn.y,Qt.top),Qt.bottom=Math.min(-Ut.radius+fn.y,Qt.bottom)}),Qt.updateProjectionMatrix()}}}(),setLight:function(Ct){var xt=this.el,Dt=this.getLight(Ct);Dt&&(this.light&&xt.removeObject3D("light"),this.light=Dt,this.light.el=xt,xt.setObject3D("light",this.light),(Ct.type==="spot"||Ct.type==="directional"||Ct.type==="hemisphere")&&xt.getObject3D("light").translateY(-1),Ct.type==="spot"&&(xt.setObject3D("light-target",this.defaultTarget),xt.getObject3D("light-target").position.set(0,0,-1)),Ct.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(Ct.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var Ct=this.el,xt=this.data,Dt=this.light;Dt.castShadow=xt.castShadow;var Ht=Ct.getObject3D("cameraHelper");if(xt.shadowCameraVisible&&!Ht?Ct.setObject3D("cameraHelper",new Et.CameraHelper(Dt.shadow.camera)):!xt.shadowCameraVisible&&Ht&&Ct.removeObject3D("cameraHelper"),!xt.castShadow)return Dt;Dt.shadow.bias=xt.shadowBias,Dt.shadow.radius=xt.shadowRadius,Dt.shadow.mapSize.height=xt.shadowMapHeight,Dt.shadow.mapSize.width=xt.shadowMapWidth,Dt.shadow.camera.near=xt.shadowCameraNear,Dt.shadow.camera.far=xt.shadowCameraFar,Dt.shadow.camera instanceof Et.OrthographicCamera?(Dt.shadow.camera.top=xt.shadowCameraTop,Dt.shadow.camera.right=xt.shadowCameraRight,Dt.shadow.camera.bottom=xt.shadowCameraBottom,Dt.shadow.camera.left=xt.shadowCameraLeft):Dt.shadow.camera.fov=xt.shadowCameraFov,Dt.shadow.camera.updateProjectionMatrix(),Ht&&Ht.update()},getLight:function(Ct){var xt=Ct.angle,Dt=new Et.Color(Ct.color);Dt=Dt.getHex();var Ht=Ct.decay,Ut=Ct.distance,Xt=new Et.Color(Ct.groundColor);Xt=Xt.getHex();var Qt=Ct.intensity,tn=Ct.type,on=Ct.target,vn=null;switch(tn.toLowerCase()){case"ambient":return new Et.AmbientLight(Dt,Qt);case"directional":return vn=new Et.DirectionalLight(Dt,Qt),this.defaultTarget=vn.target,on&&(on.hasLoaded?this.onSetTarget(on,vn):on.addEventListener("loaded",this.onSetTarget.bind(this,on,vn))),vn;case"hemisphere":return new Et.HemisphereLight(Dt,Xt,Qt);case"point":return new Et.PointLight(Dt,Qt,Ut,Ht);case"spot":return vn=new Et.SpotLight(Dt,Qt,Ut,Rt(xt),Ct.penumbra,Ht),this.defaultTarget=vn.target,on&&(on.hasLoaded?this.onSetTarget(on,vn):on.addEventListener("loaded",this.onSetTarget.bind(this,on,vn))),vn;case"probe":return vn=new Et.LightProbe,this.updateProbeMap(Ct,vn),vn;default:pt("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",tn)}},updateProbeMap:function(Ct,xt){Ct.envMap||xt.copy(new Et.LightProbe),gt[Ct.envMap]instanceof window.Promise&&gt[Ct.envMap].then(function(Dt){xt.copy(Dt)}),gt[Ct.envMap]instanceof Et.LightProbe&&xt.copy(gt[Ct.envMap]),gt[Ct.envMap]=new window.Promise(function(Dt){it.srcLoader.validateCubemapSrc(Ct.envMap,function(Ut){mt.load(Ut,function(Xt){var Qt=Et.LightProbeGenerator.fromCubeTexture(Xt);gt[Ct.envMap]=Qt,xt.copy(Qt)})})})},onSetTarget:function(Ct,xt){xt.target=Ct.object3D},remove:function(){var Ct=this.el;Ct.removeObject3D("light"),Ct.getObject3D("cameraHelper")&&Ct.removeObject3D("cameraHelper")}})},"./src/components/line.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var bt=this.data,Tt,Et;Et=this.material=new THREE.LineBasicMaterial({color:bt.color,opacity:bt.opacity,transparent:bt.opacity<1,visible:bt.visible}),Tt=this.geometry=new THREE.BufferGeometry,Tt.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(Tt,Et),this.el.setObject3D(this.attrName,this.line)},update:function(bt){var Tt=this.data,Et=this.geometry,Mt=!1,Rt=this.material,pt=Et.attributes.position.array;dt(Tt.start,bt.start)||(pt[0]=Tt.start.x,pt[1]=Tt.start.y,pt[2]=Tt.start.z,Mt=!0),dt(Tt.end,bt.end)||(pt[3]=Tt.end.x,pt[4]=Tt.end.y,pt[5]=Tt.end.z,Mt=!0),Mt&&(Et.attributes.position.needsUpdate=!0,Et.computeBoundingSphere()),Rt.color.setStyle(Tt.color),Rt.opacity=Tt.opacity,Rt.transparent=Tt.opacity<1,Rt.visible=Tt.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function dt(bt,Tt){return!bt||!Tt?!1:bt.x===Tt.x&&bt.y===Tt.y&&bt.z===Tt.z}},"./src/components/link.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/core/shader.js").registerShader,bt=vt("./src/lib/three.js");St.exports.Component=it("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new bt.Quaternion,this.hiddenEls=[]},update:function(Tt){var Et=this.data,Mt=this.el,Rt,pt;Et.visualAspectEnabled&&(this.initVisualAspect(),Rt=Et.highlighted?Et.highlightedColor:Et.backgroundColor,pt=Et.highlighted?Et.highlightedColor:Et.borderColor,Mt.setAttribute("material","backgroundColor",Rt),Mt.setAttribute("material","strokeColor",pt),Et.on!==Tt.on&&this.updateEventListener(),Tt.peekMode!==void 0&&Et.peekMode!==Tt.peekMode&&this.updatePeekMode(),!(!Et.image||Tt.image===Et.image)&&Mt.setAttribute("material","pano",typeof Et.image=="string"?Et.image:Et.image.src))},updatePeekMode:function(){var Tt=this.el,Et=this.sphereEl;this.data.peekMode?(this.hideAll(),Tt.getObject3D("mesh").visible=!1,Et.setAttribute("visible",!0)):(this.showAll(),Tt.getObject3D("mesh").visible=!0,Et.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var Tt=this.el;Tt.isPlaying&&(this.removeEventListener(),Tt.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var Tt=this.data.on;Tt&&this.el.removeEventListener(Tt,this.navigate)},initVisualAspect:function(){var Tt=this.el,Et,Mt,Rt;!this.data.visualAspectEnabled||this.visualAspectInitialized||(Rt=this.textEl=this.textEl||document.createElement("a-entity"),Mt=this.sphereEl=this.sphereEl||document.createElement("a-entity"),Et=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),Tt.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),Tt.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),Rt.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),Rt.setAttribute("position","0 1.5 0"),Tt.appendChild(Rt),Et.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),Et.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),Et.setAttribute("rotation","0 180 0"),Et.setAttribute("position","0 0 0"),Et.setAttribute("visible",!1),Tt.appendChild(Et),Mt.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),Mt.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),Mt.setAttribute("visible",!1),Tt.appendChild(Mt),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var Tt=new bt.Vector3,Et=new bt.Vector3,Mt=new bt.Quaternion,Rt=new bt.Vector3;return function(){var pt=this.el,mt=pt.object3D,gt=pt.sceneEl.camera,Ct,xt,Dt=this.textEl;if(this.data.visualAspectEnabled)if(mt.updateMatrixWorld(),gt.parent.updateMatrixWorld(),gt.updateMatrixWorld(),mt.matrix.decompose(Et,Mt,Rt),Et.setFromMatrixPosition(mt.matrixWorld),Tt.setFromMatrixPosition(gt.matrixWorld),xt=Et.distanceTo(Tt),xt>20)this.previousQuaternion||(this.quaternionClone.copy(Mt),this.previousQuaternion=this.quaternionClone),mt.lookAt(Tt);else{if(Ct=this.calculateCameraPortalOrientation(),xt<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;Dt.setAttribute("text","width",1.5),Ct<=0?(Dt.setAttribute("position","0 0 0.75"),Dt.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(Dt.setAttribute("position","0 0 -0.75"),Dt.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),pt.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=Ct}else Ct<=0?Dt.setAttribute("rotation","0 180 0"):Dt.setAttribute("rotation","0 0 0"),Dt.setAttribute("text","width",5),Dt.setAttribute("position","0 1.5 0"),pt.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(mt.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var Tt=this.el,Et=this.hiddenEls,Mt=this;Et.length>0||Tt.sceneEl.object3D.traverse(function(Rt){Rt&&Rt.el&&Rt.el.hasAttribute("link-controls")||!Rt.el||Rt===Tt.sceneEl.object3D||Rt.el===Tt||Rt.el===Mt.sphereEl||Rt.el===Tt.sceneEl.cameraEl||Rt.el.getAttribute("visible")===!1||Rt.el===Mt.textEl||Rt.el===Mt.semiSphereEl||(Rt.el.setAttribute("visible",!1),Et.push(Rt.el))})},showAll:function(){this.hiddenEls.forEach(function(Tt){Tt.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var Tt=new bt.Matrix4,Et=new bt.Vector3,Mt=new bt.Vector3(0,0,1),Rt=new bt.Vector3(0,0,0);return function(){var pt=this.el,mt=pt.sceneEl.camera;return Et.set(0,0,0),Mt.set(0,0,1),Rt.set(0,0,0),pt.object3D.matrixWorld.extractRotation(Tt),Mt.applyMatrix4(Tt),pt.object3D.updateMatrixWorld(),pt.object3D.localToWorld(Rt),mt.parent.parent.updateMatrixWorld(),mt.parent.updateMatrixWorld(),mt.updateMatrixWorld(),mt.localToWorld(Et),Et.sub(Rt).normalize(),Mt.normalize(),Math.sign(Mt.dot(Et))}}(),remove:function(){this.removeEventListener()}}),dt("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js"),Tt=Math.PI/2;St.exports.Component=it("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new dt.Vector3,this.hmdQuaternion=new dt.Quaternion,this.magicWindowAbsoluteEuler=new dt.Euler,this.magicWindowDeltaEuler=new dt.Euler,this.position=new dt.Vector3,this.magicWindowObject=new dt.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new dt.Vector3,rotation:new dt.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var Et,Mt=this.data;(bt.device.isMobile()||bt.device.isMobileDeviceRequestingDesktopSite())&&(Et=this.magicWindowControls=new dt.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(Et.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?Et.enabled=Mt.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){Et.enabled=Mt.magicWindowTrackingEnabled})))},update:function(Et){var Mt=this.data;Mt.enabled!==Et.enabled&&this.updateGrabCursor(Mt.enabled),Et&&!Mt.magicWindowTrackingEnabled&&Et.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=Mt.magicWindowTrackingEnabled),Et&&!Mt.pointerLockEnabled!==Et.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(Et){var Mt=this.data;Mt.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new dt.Object3D,this.yawObject=new dt.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var Et=this.el.sceneEl,Mt=Et.canvas;if(!Mt){Et.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}Mt.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),Mt.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),Et.addEventListener("enter-vr",this.onEnterVR),Et.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var Et=this.el.sceneEl,Mt=Et&&Et.canvas;Mt&&(Mt.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),Mt.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),Et.removeEventListener("enter-vr",this.onEnterVR),Et.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var Et=this.el.object3D,Mt=this.pitchObject,Rt=this.yawObject,pt=this.el.sceneEl;(pt.is("vr-mode")||pt.is("ar-mode"))&&pt.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),Et.rotation.x=this.magicWindowDeltaEuler.x+Mt.rotation.x,Et.rotation.y=this.magicWindowDeltaEuler.y+Rt.rotation.y,Et.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var Et=this.magicWindowAbsoluteEuler,Mt=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),Et.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&Et.y!==0&&(this.previousMagicWindowYaw=Et.y),this.previousMagicWindowYaw&&(Mt.x=Et.x,Mt.y+=Et.y-this.previousMagicWindowYaw,Mt.z=Et.z,this.previousMagicWindowYaw=Et.y))},onMouseMove:function(Et){var Mt,Rt,pt,mt=this.pitchObject,gt=this.previousMouseEvent,Ct=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(Rt=Et.movementX||Et.mozMovementX||0,pt=Et.movementY||Et.mozMovementY||0):(Rt=Et.screenX-gt.screenX,pt=Et.screenY-gt.screenY),this.previousMouseEvent.screenX=Et.screenX,this.previousMouseEvent.screenY=Et.screenY,Mt=this.data.reverseMouseDrag?1:-1,Ct.rotation.y+=Rt*.002*Mt,mt.rotation.x+=pt*.002*Mt,mt.rotation.x=Math.max(-Tt,Math.min(Tt,mt.rotation.x)))},onMouseDown:function(Et){var Mt=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(Mt.is("vr-mode")||Mt.is("ar-mode"))&&Mt.checkHeadsetConnected())&&Et.button===0){var Rt=Mt&&Mt.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=Et.screenX,this.previousMouseEvent.screenY=Et.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(Rt.requestPointerLock?Rt.requestPointerLock():Rt.mozRequestPointerLock&&Rt.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(Et){Et.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:Et.touches[0].pageX,y:Et.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(Et){var Mt,Rt=this.el.sceneEl.canvas,pt,mt=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(pt=2*Math.PI*(Et.touches[0].pageX-this.touchStart.x)/Rt.clientWidth,Mt=this.data.reverseTouchDrag?1:-1,mt.rotation.y-=pt*.5*Mt,this.touchStart={x:Et.touches[0].pageX,y:Et.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var Et=this.el.sceneEl;Et.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),Et.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(Et){var Mt=this.el.sceneEl;function Rt(){Mt.canvas.classList.add("a-grab-cursor")}function pt(){Mt.canvas.classList.remove("a-grab-cursor")}if(!Mt.canvas){Et?Mt.addEventListener("render-target-loaded",Rt):Mt.addEventListener("render-target-loaded",pt);return}if(Et){Rt();return}pt()},saveCameraPose:function(){var Et=this.el;this.savedPose.position.copy(Et.object3D.position),this.savedPose.rotation.copy(Et.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var Et=this.el,Mt=this.savedPose;this.hasSavedPose&&(Et.object3D.position.copy(Mt.position),Et.object3D.rotation.copy(Mt.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt="magicleap",Rt="-one",pt=Mt+Rt,mt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,gt=mt+"controllers/magicleap/magicleap-one-controller.glb",Ct={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};St.exports.Component=it("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:Ct,init:function(){var xt=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Dt){Et(Dt.detail.id,"down",xt)},this.onButtonUp=function(Dt){Et(Dt.detail.id,"up",xt)},this.onButtonTouchEnd=function(Dt){Et(Dt.detail.id,"touchend",xt)},this.onButtonTouchStart=function(Dt){Et(Dt.detail.id,"touchstart",xt)},this.previousButtonValues={},this.bindMethods()},update:function(){var xt=this.data;this.controllerIndex=xt.hand==="right"?0:xt.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var xt=this.el;xt.addEventListener("buttonchanged",this.onButtonChanged),xt.addEventListener("buttondown",this.onButtonDown),xt.addEventListener("buttonup",this.onButtonUp),xt.addEventListener("touchstart",this.onButtonTouchStart),xt.addEventListener("touchend",this.onButtonTouchEnd),xt.addEventListener("axismove",this.onAxisMoved),xt.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var xt=this.el;xt.removeEventListener("buttonchanged",this.onButtonChanged),xt.removeEventListener("buttondown",this.onButtonDown),xt.removeEventListener("buttonup",this.onButtonUp),xt.removeEventListener("touchstart",this.onButtonTouchStart),xt.removeEventListener("touchend",this.onButtonTouchEnd),xt.removeEventListener("axismove",this.onAxisMoved),xt.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var xt=this.data;bt(this,pt,{index:this.controllerIndex,hand:xt.hand})},injectTrackedControls:function(){var xt=this.el,Dt=this.data;xt.setAttribute("tracked-controls",{idPrefix:pt,hand:Dt.hand,controller:this.controllerIndex,orientationOffset:Dt.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",gt)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(xt){var Dt=this.mapping.buttons[xt.detail.id],Ht;Dt&&(Dt==="trigger"&&(Ht=xt.detail.state.value,console.log("analog value of trigger press: "+Ht)),this.el.emit(Dt+"changed",xt.detail.state))},onModelLoaded:function(xt){var Dt=xt.detail.model;Dt.scale.set(.01,.01,.01)},onAxisMoved:function(xt){Tt(this,this.mapping.axes,xt)},updateModel:function(xt,Dt){},setButtonColor:function(xt,Dt){}})},"./src/components/material.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js"),dt=vt("./src/core/component.js"),bt=vt("./src/lib/three.js"),Tt=vt("./src/core/shader.js"),Et=it.debug("components:material:error"),Mt=dt.registerComponent,Rt=Tt.shaders,pt=Tt.shaderNames;St.exports.Component=Mt("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:pt,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(xt){var Dt=this.data;(!this.shader||Dt.shader!==xt.shader)&&this.updateShader(Dt.shader),this.shader.update(this.data),this.updateMaterial(xt)},updateSchema:function(xt){var Dt,Ht,Ut,Xt;Ht=xt&&xt.shader,Dt=this.oldData&&this.oldData.shader,Xt=Ht||Dt,Ut=Rt[Xt]&&Rt[Xt].schema,Ut||Et("Unknown shader schema "+Xt),!(Dt&&Ht===Dt)&&(this.extendSchema(Ut),this.updateBehavior())},updateBehavior:function(){var xt,Dt=this.el.sceneEl,Ht=this.schema,Ut=this,Xt;function Qt(tn,on){var vn;for(vn in Xt)Xt[vn]=tn;Ut.shader.update(Xt)}this.tick=void 0,Xt={};for(xt in Ht)Ht[xt].type==="time"&&(this.tick=Qt,Xt[xt]=!0);Dt&&(this.tick?Dt.addBehavior(this):Dt.removeBehavior(this))},updateShader:function(xt){var Dt=this.data,Ht=Rt[xt]&&Rt[xt].Shader,Ut;if(!Ht)throw new Error("Unknown shader "+xt);Ut=this.shader=new Ht,Ut.el=this.el,Ut.init(Dt),this.setMaterial(Ut.material),this.updateSchema(Dt)},updateMaterial:function(xt){var Dt=this.data,Ht=this.material,Ut;Ht.alphaTest=Dt.alphaTest,Ht.depthTest=Dt.depthTest!==!1,Ht.depthWrite=Dt.depthWrite!==!1,Ht.opacity=Dt.opacity,Ht.flatShading=Dt.flatShading,Ht.side=mt(Dt.side),Ht.transparent=Dt.transparent!==!1||Dt.opacity<1,Ht.vertexColors=Dt.vertexColorsEnabled,Ht.visible=Dt.visible,Ht.blending=gt(Dt.blending),Ht.dithering=Dt.dithering;for(Ut in xt)break;Ut&&(xt.alphaTest!==Dt.alphaTest||xt.side!==Dt.side||xt.vertexColorsEnabled!==Dt.vertexColorsEnabled)&&(Ht.needsUpdate=!0)},remove:function(){var xt=new bt.MeshBasicMaterial,Dt=this.material,Ht=this.el.getObject3D("mesh");Ht&&(Ht.material=xt),Ct(Dt,this.system)},setMaterial:function(xt){var Dt=this.el,Ht,Ut=this.system;this.material&&Ct(this.material,Ut),this.material=xt,Ut.registerMaterial(xt),Ht=Dt.getObject3D("mesh"),Ht?Ht.material=xt:Dt.addEventListener("object3dset",function Xt(Qt){Qt.detail.type!=="mesh"||Qt.target!==Dt||(Dt.getObject3D("mesh").material=xt,Dt.removeEventListener("object3dset",Xt))})}});function mt(xt){switch(xt){case"back":return bt.BackSide;case"double":return bt.DoubleSide;default:return bt.FrontSide}}function gt(xt){switch(xt){case"none":return bt.NoBlending;case"additive":return bt.AdditiveBlending;case"subtractive":return bt.SubtractiveBlending;case"multiply":return bt.MultiplyBlending;default:return bt.NormalBlending}}function Ct(xt,Dt){xt.dispose(),Dt.unregisterMaterial(xt),Object.keys(xt).filter(function(Ht){return xt[Ht]&&xt[Ht].isTexture}).forEach(function(Ht){xt[Ht].dispose()})}},"./src/components/obb-collider.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js");it("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new dt.Vector3().copy(this.el.object3D.scale),this.auxEuler=new dt.Euler,this.boundingBox=new dt.Box3,this.boundingBoxSize=new dt.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var bt=this.el,Tt=bt.components["gltf-model"]&&bt.components["gltf-model"].model,Et,Mt;Tt&&(this.el.removeObject3D("mesh"),Et=new dt.Box3().setFromObject(Tt),Mt=Et.getCenter(new dt.Vector3),Tt.position.x+=Tt.position.x-Mt.x,Tt.position.y+=Tt.position.y-Mt.y,Tt.position.z+=Tt.position.z-Mt.z,this.el.setObject3D("mesh",Tt))},updateCollider:function(){var bt=this.el,Tt=this.boundingBoxSize,Et=this.aabb=this.aabb||new dt.OBB;if(this.obb=this.obb||new dt.OBB,!bt.hasLoaded){bt.addEventListener("loaded",this.updateCollider);return}this.updateBoundingBox(),Et.halfSize.copy(Tt).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var bt=this.renderColliderMesh,Tt=this.boundingBoxSize;if(!bt){this.initColliderMesh();return}bt.geometry.dispose(),bt.geometry=new dt.BoxGeometry(Tt.x,Tt.y,Tt.z)},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var bt,Tt,Et;bt=this.boundingBoxSize,Tt=this.renderColliderGeometry=new dt.BoxGeometry(bt.x,bt.y,bt.z),Et=this.renderColliderMesh=new dt.Mesh(Tt,new dt.MeshLambertMaterial({color:65280,side:dt.DoubleSide})),Et.matrixAutoUpdate=!1,Et.matrixWorldAutoUpdate=!1,Et.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(Et)},updateBoundingBox:function(){var bt=new dt.Vector3,Tt=new dt.Vector3,Et=new dt.Quaternion,Mt=new dt.Quaternion,Rt=new dt.Matrix4;return function(){var pt=this.auxEuler,mt=this.boundingBox,gt=this.data.size,Ct=this.trackedObject3D||this.el.object3D,xt=this.boundingBoxSize,Dt=this.data.minimumColliderDimension;if(gt){this.boundingBoxSize.x=gt,this.boundingBoxSize.y=gt,this.boundingBoxSize.z=gt;return}pt.copy(Ct.rotation),Ct.rotation.set(0,0,0),Ct.parent.matrixWorld.decompose(bt,Et,Tt),Rt.compose(bt,Mt,Tt),Ct.parent.matrixWorld.copy(Rt),mt.setFromObject(Ct,!0),mt.getSize(xt),xt.x=xt.x<Dt?Dt:xt.x,xt.y=xt.y<Dt?Dt:xt.y,xt.z=xt.z<Dt?Dt:xt.z,Ct.parent.matrixWorld.compose(bt,Et,Tt),this.el.object3D.rotation.copy(pt)}}(),checkTrackedObject:function(){var bt=this.trackedObject3DPath,Tt;if(bt&&bt.length&&!this.trackedObject3D){Tt=this.el;for(var Et=0;Et<bt.length&&(Tt=Tt[bt[Et]],!!Tt);Et++);Tt&&(this.trackedObject3D=Tt,this.updateCollider())}return this.trackedObject3D},tick:function(){var bt=new dt.Vector3,Tt=new dt.Vector3,Et=new dt.Quaternion,Mt=new dt.Matrix4;return function(){var Rt=this.obb,pt=this.renderColliderMesh,mt=this.checkTrackedObject()||this.el.object3D;mt&&(mt.updateMatrix(),mt.updateMatrixWorld(!0),mt.matrixWorld.decompose(bt,Et,Tt),(Math.abs(Tt.x-this.previousScale.x)>1e-4||Math.abs(Tt.y-this.previousScale.y)>1e-4||Math.abs(Tt.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(Tt),Tt.set(1,1,1),Mt.compose(bt,Et,Tt),pt&&pt.matrixWorld.copy(Mt),Rt.copy(this.aabb),Rt.applyMatrix4(Mt))}}()})},"./src/components/obj-model.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=vt("./src/core/component.js").registerComponent,bt=vt("./src/lib/three.js"),Tt=it("components:obj-model:warn");St.exports.Component=dt("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var Et=this;this.model=null,this.objLoader=new bt.OBJLoader,this.mtlLoader=new bt.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(Mt){Et.model&&Mt.detail.name==="material"&&Et.applyMaterial()})},update:function(){var Et=this.data;Et.obj&&(this.resetMesh(),this.loadObj(Et.obj,Et.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(Et,Mt){var Rt=this,pt=this.el,mt=this.mtlLoader,gt=this.objLoader,Ct=this.el.sceneEl.systems.renderer,xt=Mt.substr(0,Mt.lastIndexOf("/")+1);if(Mt){pt.hasAttribute("material")&&Tt("Material component properties are ignored when a .MTL is provided"),mt.setResourcePath(xt),mt.load(Mt,function(Dt){Dt.preload(),gt.setMaterials(Dt),gt.load(Et,function(Ht){Rt.model=Ht,Rt.model.traverse(function(Ut){if(Ut.isMesh){var Xt=Ut.material;Xt.map&&Ct.applyColorCorrection(Xt.map),Xt.emissiveMap&&Ct.applyColorCorrection(Xt.emissiveMap)}}),pt.setObject3D("mesh",Ht),pt.emit("model-loaded",{format:"obj",model:Ht})})});return}gt.load(Et,function(Ht){Rt.model=Ht,Rt.applyMaterial(),pt.setObject3D("mesh",Ht),pt.emit("model-loaded",{format:"obj",model:Ht})})},applyMaterial:function(){var Et=this.el.components.material;Et&&this.model.traverse(function(Mt){Mt instanceof bt.Mesh&&(Mt.material=Et.material)})}})},"./src/components/oculus-go-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt=vt("./src/utils/index.js").device.isWebXRAvailable,Rt="oculus-go",pt="Oculus Go",mt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,gt=mt+"controllers/oculus/go/oculus-go-controller.gltf",Ct=Mt?Rt:pt,xt={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},Dt={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},Ht=Mt?Dt:xt;St.exports.Component=it("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:Ht,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var Ut=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Xt){Et(Xt.detail.id,"down",Ut)},this.onButtonUp=function(Xt){Et(Xt.detail.id,"up",Ut)},this.onButtonTouchStart=function(Xt){Et(Xt.detail.id,"touchstart",Ut)},this.onButtonTouchEnd=function(Xt){Et(Xt.detail.id,"touchend",Ut)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var Ut=this.el;Ut.addEventListener("buttonchanged",this.onButtonChanged),Ut.addEventListener("buttondown",this.onButtonDown),Ut.addEventListener("buttonup",this.onButtonUp),Ut.addEventListener("touchstart",this.onButtonTouchStart),Ut.addEventListener("touchend",this.onButtonTouchEnd),Ut.addEventListener("model-loaded",this.onModelLoaded),Ut.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var Ut=this.el;Ut.removeEventListener("buttonchanged",this.onButtonChanged),Ut.removeEventListener("buttondown",this.onButtonDown),Ut.removeEventListener("buttonup",this.onButtonUp),Ut.removeEventListener("touchstart",this.onButtonTouchStart),Ut.removeEventListener("touchend",this.onButtonTouchEnd),Ut.removeEventListener("model-loaded",this.onModelLoaded),Ut.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){bt(this,Ct,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var Ut=this.el,Xt=this.data;Ut.setAttribute("tracked-controls",{armModel:Xt.armModel,hand:Xt.hand,idPrefix:Ct,orientationOffset:Xt.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",gt)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(Ut){var Xt=Ut.detail.model,Qt;Ut.target!==this.el||!this.data.model||(Qt=this.buttonMeshes={},Qt.trigger=Xt.getObjectByName("oculus_go_button_trigger"),Qt.trackpad=Xt.getObjectByName("oculus_go_touchpad"),Qt.touchpad=Xt.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(Ut){var Xt=this.mapping.buttons[Ut.detail.id];Xt&&this.el.emit(Xt+"changed",Ut.detail.state)},onAxisMoved:function(Ut){Tt(this,this.mapping.axes,Ut)},updateModel:function(Ut,Xt){this.data.model&&this.updateButtonModel(Ut,Xt)},updateButtonModel:function(Ut,Xt){var Qt=this.buttonMeshes;if(!(!Qt||!Qt[Ut])){var tn,on;switch(Xt){case"down":tn=this.data.buttonHighlightColor;break;case"touchstart":tn=this.data.buttonTouchedColor;break;default:tn=this.data.buttonColor}on=Qt[Ut],on.material.color.set(tn)}}})},"./src/components/oculus-touch-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/tracked-controls.js"),Tt=bt.checkControllerPresentAndSetup,Et=bt.emitIfAxesChanged,Mt=bt.onButtonEvent,Rt=vt("./src/utils/index.js").device.isWebXRAvailable,pt="oculus-touch",mt="Oculus Touch",gt=Rt?pt:mt,Ct=vt("./src/constants/index.js").AFRAME_CDN_ROOT,xt=Ct+"controllers/oculus/oculus-touch-controller-",Dt=Ct+"controllers/meta/",Ht={left:{modelUrl:xt+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new dt.Vector3(-.005,.003,-.055),modelPivotRotation:new dt.Euler(0,0,0)},right:{modelUrl:xt+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new dt.Vector3(.005,.003,-.055),modelPivotRotation:new dt.Euler(0,0,0)}},Ut={left:{modelUrl:xt+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new dt.Vector3(-.005,.036,-.037),modelPivotRotation:new dt.Euler(Math.PI/4.5,0,0)},right:{modelUrl:xt+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new dt.Vector3(.005,.036,-.037),modelPivotRotation:new dt.Euler(Math.PI/4.5,0,0)}},Xt=Rt?Ut:Ht,Qt="oculus-touch",tn={"oculus-touch":Xt,"oculus-touch-v2":{left:{modelUrl:xt+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new dt.Vector3(0,-.007,-.021),modelPivotRotation:new dt.Euler(-Math.PI/4,0,0)},right:{modelUrl:xt+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new dt.Vector3(0,-.007,-.021),modelPivotRotation:new dt.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:xt+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)},right:{modelUrl:xt+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:Dt+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)},right:{modelUrl:Dt+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:Dt+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)},right:{modelUrl:Dt+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new dt.Vector3(0,0,0),modelPivotRotation:new dt.Euler(0,0,0)}}},on={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},vn={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},fn=Rt?vn:on;St.exports.Component=it("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},after:["tracked-controls"],mapping:fn,bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var dn=this;this.onButtonDown=function(An){Mt(An.detail.id,"down",dn,dn.data.hand)},this.onButtonUp=function(An){Mt(An.detail.id,"up",dn,dn.data.hand)},this.onButtonTouchStart=function(An){Mt(An.detail.id,"touchstart",dn,dn.data.hand)},this.onButtonTouchEnd=function(An){Mt(An.detail.id,"touchend",dn,dn.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new dt.Euler},addEventListeners:function(){var dn=this.el;dn.addEventListener("buttonchanged",this.onButtonChanged),dn.addEventListener("buttondown",this.onButtonDown),dn.addEventListener("buttonup",this.onButtonUp),dn.addEventListener("touchstart",this.onButtonTouchStart),dn.addEventListener("touchend",this.onButtonTouchEnd),dn.addEventListener("axismove",this.onAxisMoved),dn.addEventListener("model-loaded",this.onModelLoaded),dn.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var dn=this.el;dn.removeEventListener("buttonchanged",this.onButtonChanged),dn.removeEventListener("buttondown",this.onButtonDown),dn.removeEventListener("buttonup",this.onButtonUp),dn.removeEventListener("touchstart",this.onButtonTouchStart),dn.removeEventListener("touchend",this.onButtonTouchEnd),dn.removeEventListener("axismove",this.onAxisMoved),dn.removeEventListener("model-loaded",this.onModelLoaded),dn.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Tt(this,gt,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(dn){var An=this.data,nn;if(An.model){if(this.controllerObject3D){this.el.setObject3D("mesh",this.controllerObject3D);return}if(this.displayModel=tn[An.controllerType]||tn[Qt],An.controllerType==="auto"){var Zt=this.el.sceneEl.systems["tracked-controls-webvr"];if(Zt&&Zt.vrDisplay){var mn=Zt.vrDisplay.displayName;/^Oculus Quest$/.test(mn)&&(this.displayModel=tn["oculus-touch-v2"])}else{nn=Qt;for(var gn=Object.keys(tn),In=0;In<dn.profiles.length;In++)if(gn.indexOf(dn.profiles[In])!==-1){nn=dn.profiles[In];break}this.displayModel=tn[nn]}}var Vn=this.displayModel[An.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===tn["oculus-touch-v3"]||this.displayModel===tn["meta-quest-touch-pro"]||this.displayModel===tn["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",Vn)}},injectTrackedControls:function(dn){var An=this.data,nn=pt,Zt=An.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",mn=Rt?nn:Zt;this.el.setAttribute("tracked-controls",{id:mn,hand:An.hand,orientationOffset:An.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(dn)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(dn){var An=this.mapping[this.data.hand].buttons[dn.detail.id];if(An){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(dn);else{var nn=this.buttonMeshes,Zt;(An==="trigger"||An==="grip")&&(Zt=dn.detail.state.value),nn&&(An==="trigger"&&nn.trigger&&(nn.trigger.rotation.x=this.originalXRotationTrigger-Zt*(Math.PI/26)),An==="grip"&&nn.grip&&(Zt*=this.data.hand==="left"?-1:1,nn.grip.position.x=this.originalXPositionGrip+Zt*.004))}this.el.emit(An+"changed",dn.detail.state)}},onButtonChangedV3orPROorPlus:function(dn){var An=this.mapping[this.data.hand].buttons[dn.detail.id],nn=this.buttonObjects,Zt;!nn||!nn[An]||(Zt=dn.detail.state.value,nn[An].quaternion.slerpQuaternions(this.buttonRanges[An].min.quaternion,this.buttonRanges[An].max.quaternion,Zt),nn[An].position.lerpVectors(this.buttonRanges[An].min.position,this.buttonRanges[An].max.position,Zt))},onModelLoaded:function(dn){if(!(dn.target!==this.el||!this.data.model)){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(dn);else{var An=this.controllerObject3D=dn.detail.model,nn;nn=this.buttonMeshes={},nn.grip=An.getObjectByName("buttonHand"),this.originalXPositionGrip=nn.grip&&nn.grip.position.x,nn.trigger=An.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=nn.trigger&&nn.trigger.rotation.x,nn.thumbstick=An.getObjectByName("stick"),nn.xbutton=An.getObjectByName("buttonX"),nn.abutton=An.getObjectByName("buttonA"),nn.ybutton=An.getObjectByName("buttonY"),nn.bbutton=An.getObjectByName("buttonB")}for(var Zt in this.buttonMeshes)this.buttonMeshes[Zt]&&Cn(this.buttonMeshes[Zt]);this.applyOffset(dn.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(dn){dn.position.copy(this.displayModel[this.data.hand].modelPivotOffset),dn.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(dn){var An=this.controllerObject3D=dn.detail.model,nn=this.buttonObjects={},Zt=this.buttonMeshes={},mn=this.buttonRanges={};Zt.grip=An.getObjectByName("squeeze"),nn.grip=An.getObjectByName("xr_standard_squeeze_pressed_value"),mn.grip={min:An.getObjectByName("xr_standard_squeeze_pressed_min"),max:An.getObjectByName("xr_standard_squeeze_pressed_max")},nn.grip.minX=nn.grip.position.x,Zt.thumbstick=An.getObjectByName("thumbstick"),nn.thumbstick=An.getObjectByName("xr_standard_thumbstick_pressed_value"),mn.thumbstick={min:An.getObjectByName("xr_standard_thumbstick_pressed_min"),max:An.getObjectByName("xr_standard_thumbstick_pressed_max")},nn.thumbstickXAxis=An.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),mn.thumbstickXAxis={min:An.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:An.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},nn.thumbstickYAxis=An.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),mn.thumbstickYAxis={min:An.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:An.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},Zt.trigger=An.getObjectByName("trigger"),nn.trigger=An.getObjectByName("xr_standard_trigger_pressed_value"),mn.trigger={min:An.getObjectByName("xr_standard_trigger_pressed_min"),max:An.getObjectByName("xr_standard_trigger_pressed_max")},mn.trigger.diff={x:Math.abs(mn.trigger.max.rotation.x)-Math.abs(mn.trigger.min.rotation.x),y:Math.abs(mn.trigger.max.rotation.y)-Math.abs(mn.trigger.min.rotation.y),z:Math.abs(mn.trigger.max.rotation.z)-Math.abs(mn.trigger.min.rotation.z)};var gn=this.data.hand==="left"?"x":"a",In=this.data.hand==="left"?"y":"b",Vn=gn+"button",Zn=In+"button";Zt[Vn]=An.getObjectByName(gn+"_button"),nn[Vn]=An.getObjectByName(gn+"_button_pressed_value"),mn[Vn]={min:An.getObjectByName(gn+"_button_pressed_min"),max:An.getObjectByName(gn+"_button_pressed_max")},Zt[Zn]=An.getObjectByName(In+"_button"),nn[Zn]=An.getObjectByName(In+"_button_pressed_value"),mn[Zn]={min:An.getObjectByName(In+"_button_pressed_min"),max:An.getObjectByName(In+"_button_pressed_max")}},onAxisMoved:function(dn){Et(this,this.mapping[this.data.hand].axes,dn)},onThumbstickMoved:function(dn){if(!(!this.buttonMeshes||!this.buttonMeshes.thumbstick)){if(this.isTouchV3orPROorPlus){this.updateThumbstickTouchV3orPROorPlus(dn);return}for(var An in dn.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[An]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[An]]-Math.PI/8*dn.detail[An]*(An==="y"||this.data.hand==="right"?-1:1)}},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(dn){var An=(dn.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,An);var nn=(dn.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,nn)},updateModel:function(dn,An){this.data.model&&this.updateButtonModel(dn,An)},updateButtonModel:function(dn,An){var nn=this.buttonMeshes,Zt,mn;nn&&nn[dn]&&(mn=An==="up"||An==="touchend"?nn[dn].originalColor||this.data.buttonColor:An==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,Zt=nn[dn],Zt.material.color.set(mn))}});function Cn(dn){dn.traverse(function(An){var nn;An.type==="Mesh"&&(nn=An.material.clone(),dn.originalColor=An.material.color,An.material.dispose(),An.material=nn)})}},"./src/components/pico-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/tracked-controls.js"),Tt=bt.checkControllerPresentAndSetup,Et=bt.emitIfAxesChanged,Mt=bt.onButtonEvent,Rt="pico-4",pt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,mt=pt+"controllers/pico/pico4/",gt={left:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","abutton","bbutton"]}};St.exports.Component=it("pico-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:gt,init:function(){var Ct=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(xt){Mt(xt.detail.id,"down",Ct,Ct.data.hand)},this.onButtonUp=function(xt){Mt(xt.detail.id,"up",Ct,Ct.data.hand)},this.onButtonTouchEnd=function(xt){Mt(xt.detail.id,"touchend",Ct,Ct.data.hand)},this.onButtonTouchStart=function(xt){Mt(xt.detail.id,"touchstart",Ct,Ct.data.hand)},this.bindMethods()},update:function(){var Ct=this.data;this.controllerIndex=Ct.hand==="right"?0:Ct.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var Ct=this.el;Ct.addEventListener("buttonchanged",this.onButtonChanged),Ct.addEventListener("buttondown",this.onButtonDown),Ct.addEventListener("buttonup",this.onButtonUp),Ct.addEventListener("touchstart",this.onButtonTouchStart),Ct.addEventListener("touchend",this.onButtonTouchEnd),Ct.addEventListener("axismove",this.onAxisMoved),Ct.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Ct=this.el;Ct.removeEventListener("buttonchanged",this.onButtonChanged),Ct.removeEventListener("buttondown",this.onButtonDown),Ct.removeEventListener("buttonup",this.onButtonUp),Ct.removeEventListener("touchstart",this.onButtonTouchStart),Ct.removeEventListener("touchend",this.onButtonTouchEnd),Ct.removeEventListener("axismove",this.onAxisMoved),Ct.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var Ct=this.data;Tt(this,Rt,{index:this.controllerIndex,hand:Ct.hand})},injectTrackedControls:function(){var Ct=this.el,xt=this.data;Ct.setAttribute("tracked-controls",{idPrefix:Rt,hand:xt.hand,controller:this.controllerIndex,orientationOffset:xt.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",mt+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(Ct){var xt=this.mapping[this.data.hand].buttons[Ct.detail.id],Dt;xt&&(xt==="trigger"&&(Dt=Ct.detail.state.value,console.log("analog value of trigger press: "+Dt)),this.el.emit(xt+"changed",Ct.detail.state))},onModelLoaded:function(Ct){Ct.target!==this.el||!this.data.model||this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new dt.Vector3(0,0,0)})},onAxisMoved:function(Ct){Et(this,this.mapping.axes,Ct)}})},"./src/components/position.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("position",{schema:{type:"vec3"},update:function(){var dt=this.el.object3D,bt=this.data;dt.position.set(bt.x,bt.y,bt.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js"),Tt=bt.debug("components:raycaster:warn"),Et=/^[\w\s-.,[\]#]*$/,Mt={childList:!0,attributes:!0,subtree:!0},Rt={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};St.exports.Component=it("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new dt.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new dt.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new dt.Vector3,this.otherLineEndVec3=new dt.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(mt){var gt=this.data,Ct=this.el,xt=this.raycaster;xt.far=gt.far,xt.near=gt.near,gt.showLine&&(gt.far!==mt.far||gt.origin!==mt.origin||gt.direction!==mt.direction||!mt.showLine)&&(this.unitLineEndVec3.copy(gt.direction).normalize(),this.drawLine()),!gt.showLine&&mt.showLine&&Ct.removeAttribute("line"),gt.objects!==mt.objects&&!Et.test(gt.objects)&&Tt('[raycaster] Selector "'+gt.objects+'" may not update automatically with DOM changes.'),gt.objects||Tt('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),gt.autoRefresh!==mt.autoRefresh&&Ct.isPlaying&&(gt.autoRefresh?this.addEventListeners():this.removeEventListeners()),mt.enabled&&!gt.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,Mt),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var mt=this.data,gt;gt=mt.objects?this.el.sceneEl.querySelectorAll(mt.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(gt),this.dirty=!1},tock:function(mt){var gt=this.data,Ct=this.prevCheckTime;gt.enabled&&(Ct&&mt-Ct<gt.interval||(this.prevCheckTime=mt,this.checkIntersections()))},checkIntersections:function(){var mt=this.clearedIntersectedEls,gt=this.el,Ct=this.data,xt,Dt=this.intersectedEls,Ht,Ut=this.intersections,Xt=this.newIntersectedEls,Qt=this.newIntersections,tn=this.prevIntersectedEls,on=this.rawIntersections;for(this.dirty&&this.refreshObjects(),pt(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),on.length=0,this.raycaster.intersectObjects(this.objects,!0,on),Ut.length=0,Dt.length=0,xt=0;xt<on.length;xt++)Ht=on[xt],!(Ct.showLine&&Ht.object===gt.getObject3D("line"))&&Ht.object.el&&(Ut.push(Ht),Dt.push(Ht.object.el));for(Qt.length=0,Xt.length=0,xt=0;xt<Ut.length;xt++)tn.indexOf(Ut[xt].object.el)===-1&&(Qt.push(Ut[xt]),Xt.push(Ut[xt].object.el));for(mt.length=0,xt=0;xt<tn.length;xt++)Dt.indexOf(tn[xt])===-1&&(tn[xt].emit(Rt.INTERSECT_CLEAR,this.intersectedClearedDetail),mt.push(tn[xt]));for(mt.length&&gt.emit(Rt.INTERSECTION_CLEAR,this.intersectionClearedDetail),xt=0;xt<Xt.length;xt++)Xt[xt].emit(Rt.INTERSECT,this.intersectedDetail);Qt.length&&(this.intersectionDetail.els=Xt,this.intersectionDetail.intersections=Qt,gt.emit(Rt.INTERSECTION,this.intersectionDetail)),(tn.length===0&&Ut.length>0||tn.length>0&&Ut.length===0||tn.length&&Ut.length&&tn[0]!==Ut[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=Ut,gt.emit(Rt.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),Ct.showLine&&setTimeout(this.updateLine)},updateLine:function(){var mt=this.el,gt=this.intersections,Ct;gt.length&&(gt[0].object.el===mt&&gt[1]?Ct=gt[1].distance:Ct=gt[0].distance),this.drawLine(Ct)},getIntersection:function(mt){var gt,Ct;for(gt=0;gt<this.intersections.length;gt++)if(Ct=this.intersections[gt],Ct.object.el===mt)return Ct;return null},updateOriginDirection:function(){var mt=new dt.Vector3,gt=new dt.Vector3;return function(){var xt=this.el,Dt=this.data;if(Dt.useWorldCoordinates){this.raycaster.set(Dt.origin,Dt.direction);return}xt.object3D.updateMatrixWorld(),gt.setFromMatrixPosition(xt.object3D.matrixWorld),(Dt.origin.x!==0||Dt.origin.y!==0||Dt.origin.z!==0)&&(gt=xt.object3D.localToWorld(gt.copy(Dt.origin))),mt.copy(Dt.direction).transformDirection(xt.object3D.matrixWorld).normalize(),this.raycaster.set(gt,mt)}}(),drawLine:function(mt){var gt=this.data,Ct=this.el,xt;xt=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,mt===void 0&&(mt=gt.far===1/0?1e3:gt.far),this.lineData.start=gt.origin,this.lineData.end=xt.copy(this.unitLineEndVec3).multiplyScalar(mt).add(gt.origin),this.lineData.color=gt.lineColor,this.lineData.opacity=gt.lineOpacity,Ct.setAttribute("line",this.lineData)},flattenObject3DMaps:function(mt){var gt,Ct,xt=this.objects,Dt=this.el.sceneEl.object3D;function Ht(Xt){return Xt.parent?Ht(Xt.parent):Xt===Dt}for(xt.length=0,Ct=0;Ct<mt.length;Ct++){var Ut=mt[Ct];if(Ut.isEntity&&Ut.object3D&&Ht(Ut.object3D))for(gt in Ut.object3DMap)xt.push(Ut.getObject3D(gt))}return xt},clearAllIntersections:function(){var mt;for(mt=0;mt<this.intersectedEls.length;mt++)this.intersectedEls[mt].emit(Rt.INTERSECT_CLEAR,this.intersectedClearedDetail);pt(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(Rt.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function pt(mt,gt){var Ct;for(mt.length=gt.length,Ct=0;Ct<gt.length;Ct++)mt[Ct]=gt[Ct]}},"./src/components/rotation.js":(St,Gt,vt)=>{var it=vt("./src/lib/three.js").MathUtils.degToRad,dt=vt("./src/core/component.js").registerComponent;St.exports.Component=dt("rotation",{schema:{type:"vec3"},update:function(){var bt=this.data,Tt=this.el.object3D;Tt.rotation.set(it(bt.x),it(bt.y),it(bt.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var dt=this.data,bt=this.el.object3D;bt.scale.set(dt.x,dt.y,dt.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(St,Gt,vt)=>{var it="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",dt=vt("./src/core/component.js").registerComponent,bt=vt("./src/lib/three.js"),Tt=21,Et=function(){var mt=new bt.Quaternion,gt=new bt.Vector3;function Ct(xt,Dt,Ht){Dt.position.copy(xt.transform.position),Dt.quaternion.copy(xt.transform.orientation),gt.copy(Ht),mt.copy(xt.transform.orientation),gt.applyQuaternion(mt),Dt.position.sub(gt)}return Ct}();Et.tempFakePose={transform:{orientation:new bt.Quaternion,position:new bt.Vector3}};function Mt(mt,gt){this.renderer=mt,this.xrHitTestSource=null,mt.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),mt.xr.addEventListener("sessionstart",(function(){this.sessionStart(gt)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(gt)}Mt.prototype.previousFrameAnchors=new Set,Mt.prototype.anchorToObject3D=new Map;function Rt(mt){console.warn(mt.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}Mt.prototype.sessionStart=function(gt){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){Rt({message:"No requestHitTestSource on the session."});return}gt.space?this.session.requestHitTestSource(gt).then((function(Ct){this.xrHitTestSource=Ct}).bind(this)).catch(Rt):gt.profile&&this.session.requestHitTestSourceForTransientInput(gt).then((function(Ct){this.xrHitTestSource=Ct,this.transient=!0}).bind(this)).catch(Rt)},Mt.prototype.anchorFromLastHitTestResult=function(mt,gt){var Ct=this.lastHitTest;if(Ct){var xt={object3D:mt,offset:gt};Array.from(this.anchorToObject3D.entries()).forEach((function(Dt){var Ht=Dt[1].object3D,Ut=Dt[0];Ht===mt&&(this.anchorToObject3D.delete(Ut),Ut.delete())}).bind(this)),Ct.createAnchor&&Ct.createAnchor().then((function(Dt){this.anchorToObject3D.set(Dt,xt)}).bind(this)).catch(function(Dt){console.warn(Dt.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},Mt.prototype.doHit=function(gt){if(this.renderer.xr.isPresenting){var Ct=this.renderer.xr.getReferenceSpace(),xt=gt.getViewerPose(Ct),Dt,Ht;if(this.xrHitTestSource&&xt)return this.transient?(Dt=gt.getHitTestResultsForTransientInput(this.xrHitTestSource),Dt.length>0?(Ht=Dt[0].results,Ht.length>0?(this.lastHitTest=Ht[0],Ht[0].getPose(Ct)):!1):!1):(Dt=gt.getHitTestResults(this.xrHitTestSource),Dt.length>0?(this.lastHitTest=Dt[0],Dt[0].getPose(Ct)):!1)}},Mt.updateAnchorPoses=function(mt,gt){var Ct=mt.trackedAnchors||Mt.prototype.previousFrameAnchors;Mt.prototype.previousFrameAnchors.forEach(function(xt){Ct.has(xt)||Mt.prototype.anchorToObject3D.delete(xt)}),Ct.forEach(function(xt){var Dt,Ht,Ut,Xt;try{Dt=mt.getPose(xt.anchorSpace,gt)}catch{}if(Dt){if(Ht=Mt.prototype.anchorToObject3D.get(xt),!Ht)return;Ut=Ht.offset,Xt=Ht.object3D,Et(Dt,Xt,Ut)}})};var pt;St.exports.Component=dt("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:it,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new bt.OrthographicCamera,this.orthoCam.layers.set(Tt),this.textureTarget=new bt.WebGLRenderTarget(512,512,{}),this.basicMaterial=new bt.MeshBasicMaterial({color:0,side:bt.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new bt.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var mt=this.el.getAttribute("webxr"),gt=mt.optionalFeatures;(!gt.includes("hit-test")||!gt.includes("anchors"))&&(gt.push("hit-test"),gt.push("anchors"),this.el.setAttribute("webxr",mt)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",(function(){if(this.el.is("ar-mode")){var Ct=this.el.sceneEl.renderer,xt=this.session=Ct.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,pt||(pt=new Map),xt.requestReferenceSpace("viewer").then((function(Ut){this.hitTest=new Mt(Ct,{space:Ut}),pt.set(Ut,this.hitTest),this.el.emit("ar-hit-test-start")}).bind(this));var Dt="generic-touchscreen",Ht=new Mt(Ct,{profile:Dt});xt.addEventListener("selectstart",(function(Ut){if(this.data.enabled===!0){var Xt=Ut.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:Xt,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),Xt.profiles[0]===Dt?this.hitTest=Ht:(this.hitTest=pt.get(Xt)||new Mt(Ct,{space:Xt.targetRaySpace}),pt.set(Xt,this.hitTest)))}}).bind(this)),xt.addEventListener("selectend",(function(Ut){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var Xt=Ut.inputSource,Qt;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(Qt=this.data.target.object3D,Qt&&(Et.tempFakePose.transform.position.copy(this.bboxMesh.position),Et.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),Et(Et.tempFakePose,Qt,this.bboxOffset),Qt.visible=!0,this.hitTest.anchorFromLastHitTestResult(Qt,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:Xt,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new bt.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(Tt),this.data.target.object3D.traverse(function(mt){mt.layers.enable(Tt)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var mt=new bt.PlaneGeometry(1,1),gt=new bt.MeshBasicMaterial({transparent:!0,color:16777215});mt.rotateX(-Math.PI/2),mt.rotateY(-Math.PI/2),this.bbox=new bt.Box3,this.bboxMesh=new bt.Mesh(mt,gt),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var mt,gt=this.el.sceneEl.renderer,Ct,xt,Dt=gt.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),Ct=gt.getRenderTarget(),gt.setRenderTarget(this.textureTarget),gt.xr.enabled=!1,xt=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,gt.render(this.el.object3D,this.orthoCam),this.el.object3D.background=xt,this.el.object3D.overrideMaterial=null,gt.xr.enabled=Dt,gt.setRenderTarget(Ct),gt.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),mt=this.context.getImageData(0,0,512,512);for(var Ht=0;Ht<262144;Ht++)mt.data[Ht*4+3]!==0&&mt.data[Ht*4+3]!==255&&(mt.data[Ht*4+3]=128);this.context.putImageData(mt,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var mt,gt=this.el.sceneEl.frame,Ct=this.el.sceneEl.renderer;if(gt&&Mt.updateAnchorPoses(gt,Ct.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var xt;this.textureCache.has(this.data.src)?xt=this.textureCache.get(this.data.src):(xt=new bt.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,xt)),this.bboxMesh.material.map=xt,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(mt=this.hitTest.doHit(gt),mt&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(mt.transform.position),this.bboxMesh.quaternion.copy(mt.transform.orientation)))}})},"./src/components/scene/background.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var dt=this.data,bt=this.el.object3D;dt.transparent?bt.background=null:bt.background=new THREE.Color(dt.color)},remove:function(){var dt=this.el.object3D;dt.background=null}})},"./src/components/scene/debug.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("debug",{schema:{default:!0},sceneOnly:!0})},"./src/components/scene/device-orientation-permission-ui.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/constants/index.js"),bt="a-modal",Tt="a-dialog",Et="a-dialog-text",Mt="a-dialog-text-container",Rt="a-dialog-buttons-container",pt="a-dialog-button",mt="a-dialog-allow-button",gt="a-dialog-deny-button",Ct="a-dialog-ok-button";St.exports.Component=it("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var Ut=this;if(this.data.enabled){if(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){Ut.el.emit("deviceorientationpermissiongranted"),Ut.permissionGranted=!0}).catch(function(){Ut.devicePermissionDialogEl=xt(Ut.data.denyButtonText,Ut.data.allowButtonText,Ut.data.deviceMotionMessage,Ut.onDeviceMotionDialogAllowClicked,Ut.onDeviceMotionDialogDenyClicked),Ut.el.appendChild(Ut.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var Ut=this,Xt=Dt(Ut.data.cancelButtonText,Ut.data.httpsMessage,function(){Ut.el.removeChild(Xt)});this.el.appendChild(Xt)},onDeviceMotionDialogAllowClicked:function(){var Ut=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(Xt){Xt==="granted"?(Ut.el.emit("deviceorientationpermissiongranted"),Ut.permissionGranted=!0):Ut.el.emit("deviceorientationpermissionrejected"),Ut.remove()}).catch(console.error)}});function xt(Ut,Xt,Qt,tn,on){var vn,fn,Cn;return vn=document.createElement("div"),vn.classList.add(Rt),fn=document.createElement("button"),fn.classList.add(pt,gt),fn.setAttribute(dt.AFRAME_INJECTED,""),fn.innerHTML=Ut,vn.appendChild(fn),Cn=document.createElement("button"),Cn.classList.add(pt,mt),Cn.setAttribute(dt.AFRAME_INJECTED,""),Cn.innerHTML=Xt,vn.appendChild(Cn),Cn.addEventListener("click",function(dn){dn.stopPropagation(),tn()}),fn.addEventListener("click",function(dn){dn.stopPropagation(),on()}),Ht(Qt,vn)}function Dt(Ut,Xt,Qt){var tn,on;return tn=document.createElement("div"),tn.classList.add(Rt),on=document.createElement("button"),on.classList.add(pt,Ct),on.setAttribute(dt.AFRAME_INJECTED,""),on.innerHTML=Ut,tn.appendChild(on),on.addEventListener("click",function(vn){vn.stopPropagation(),Qt()}),Ht(Xt,tn)}function Ht(Ut,Xt){var Qt,tn,on,vn;return Qt=document.createElement("div"),Qt.classList.add(bt),Qt.setAttribute(dt.AFRAME_INJECTED,""),tn=document.createElement("div"),tn.className=Tt,tn.setAttribute(dt.AFRAME_INJECTED,""),Qt.appendChild(tn),on=document.createElement("div"),on.classList.add(Mt),tn.appendChild(on),vn=document.createElement("div"),vn.classList.add(Et),vn.innerHTML=Ut,on.appendChild(vn),tn.appendChild(Xt),Qt}},"./src/components/scene/embedded.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var dt=this.el,bt=dt.querySelector(".a-enter-vr");this.data===!0?(bt&&bt.classList.add("embedded"),dt.removeFullScreenStyles()):(bt&&bt.classList.remove("embedded"),dt.addFullScreenStyles())}})},"./src/components/scene/fog.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/debug.js");bt("components:fog:warn"),St.exports.Component=it("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var Et=this.data,Mt=this.el,Rt=this.el.object3D.fog;if(!Rt||Et.type!==Rt.name){Mt.object3D.fog=Tt(Et);return}Object.keys(this.schema).forEach(function(pt){var mt=Et[pt];pt==="color"&&(mt=new dt.Color(mt)),Rt[pt]=mt})},remove:function(){var Et=this.el,Mt=this.el.object3D.fog;Mt&&(Et.object3D.fog=null)}});function Tt(Et){var Mt;return Et.type==="exponential"?Mt=new dt.FogExp2(Et.color,Et.density):Mt=new dt.Fog(Et.color,Et.near,Et.far),Mt.name=Et.type,Mt}},"./src/components/scene/inspector.js":(St,Gt,vt)=>{var it=vt("./src/constants/index.js").AFRAME_INJECTED,dt=vt("./package.json"),bt=vt("./src/core/component.js").registerComponent,Tt=vt("./src/utils/index.js");function Et(gt){var Ct=gt.split(".");return Ct[2]="x",Ct.join(".")}var Mt="https://unpkg.com/aframe-inspector@"+Et(dt.version)+"/dist/aframe-inspector.min.js",Rt=Mt,pt="Loading Inspector",mt="Error loading Inspector";St.exports.Component=bt("inspector",{schema:{url:{default:Rt}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var gt;this.firstPlay&&(gt=Tt.getUrlParameter("inspector"),gt!=="false"&&gt&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var gt='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=pt+gt},remove:function(){this.removeEventListeners()},onKeydown:function(gt){var Ct=gt.keyCode===73&&(gt.ctrlKey&&gt.altKey||gt.getModifierState("AltGraph"));Ct&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(gt){gt.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(gt){var Ct=this,xt;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(gt);return}this.showLoader(),xt=document.createElement("script"),xt.src=this.data.url,xt.setAttribute("data-name","aframe-inspector"),xt.setAttribute(it,""),xt.onload=function(){AFRAME.INSPECTOR.open(gt),Ct.hideLoader(),Ct.removeEventListeners()},xt.onerror=function(){Ct.loadingMessageEl.innerHTML=mt},document.head.appendChild(xt),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/index.js").shouldCaptureKeyEvent;St.exports.Component=it("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(bt){var Tt=this.data;this.enterVREnabled=Tt.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(bt){var Tt=this.el;dt(bt)&&(this.enterVREnabled&&bt.keyCode===70&&Tt.enterVR(),this.enterVREnabled&&bt.keyCode===27&&Tt.exitVR())}})},"./src/components/scene/pool.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=vt("./src/core/component.js").registerComponent,bt=it("components:pool:warn");St.exports.Component=dt("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var Tt;for(this.availableEls=[],this.usedEls=[],this.data.mixin||bt("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||bt("Container "+this.data.container+" not found.")),this.container=this.container||this.el,Tt=0;Tt<this.data.size;++Tt)this.createEntity()},update:function(Tt){var Et=this.data;(Tt.mixin!==Et.mixin||Tt.size!==Et.size)&&this.initPool()},createEntity:function(){var Tt;Tt=document.createElement("a-entity"),Tt.play=this.wrapPlay(Tt.play),Tt.setAttribute("mixin",this.data.mixin),Tt.object3D.visible=!1,Tt.pause(),this.container.appendChild(Tt),this.availableEls.push(Tt);var Et=this.usedEls;Tt.addEventListener("loaded",function(){Et.indexOf(Tt)===-1&&(Tt.object3DParent=Tt.object3D.parent,Tt.object3D.parent.remove(Tt.object3D))})},wrapPlay:function(Tt){var Et=this.usedEls;return function(){Et.indexOf(this)!==-1&&Tt.call(this)}},requestEntity:function(){var Tt;if(this.availableEls.length===0){if(this.data.dynamic===!1){bt("Requested entity from empty pool: "+this.attrName);return}else bt("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return Tt=this.availableEls.shift(),this.usedEls.push(Tt),Tt.object3DParent&&(Tt.object3DParent.add(Tt.object3D),this.updateRaycasters()),Tt.object3D.visible=!0,Tt},returnEntity:function(Tt){var Et=this.usedEls.indexOf(Tt);if(Et===-1){bt("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(Et,1),this.availableEls.push(Tt),Tt.object3DParent=Tt.object3D.parent,Tt.object3D.parent.remove(Tt.object3D),this.updateRaycasters(),Tt.object3D.visible=!1,Tt.pause(),Tt},updateRaycasters:function(){var Tt=document.querySelectorAll("[raycaster]");Tt.forEach(function(Et){Et.components.raycaster.setDirty()})}})},"./src/components/scene/real-world-meshing.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js");St.exports.Component=it("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var bt=this.el.getAttribute("webxr"),Tt=bt.requiredFeatures;Tt.indexOf("mesh-detection")===-1&&(Tt.push("mesh-detection"),this.el.setAttribute("webxr",bt)),Tt.indexOf("plane-detection")===-1&&(Tt.push("plane-detection"),this.el.setAttribute("webxr",bt)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var bt=this.data,Tt,Et,Mt=this.el;Mt.renderer.xr;var Rt,pt=this.meshEntities,mt=!1,gt=[],Ct=this.data.filterLabels;Rt=Mt.frame,Tt=Rt.detectedMeshes,Et=Rt.detectedPlanes;for(var xt=0;xt<pt.length;xt++)pt[xt].present=!1;if(bt.meshesEnabled){for(var Dt of Tt.values())if(!(Ct.length&&Ct.indexOf(Dt.semanticLabel)===-1)){for(xt=0;xt<pt.length;xt++)if(Dt===pt[xt].mesh){mt=!0,pt[xt].present=!0,pt[xt].lastChangedTime<Dt.lastChangedTime&&this.updateMeshGeometry(pt[xt].el,Dt),pt[xt].lastChangedTime=Dt.lastChangedTime;break}mt||gt.push(Dt),mt=!1}}if(bt.planesEnabled){for(Dt of Et.values())if(!(Ct.length&&Ct.indexOf(Dt.semanticLabel)===-1)){for(xt=0;xt<pt.length;xt++)if(Dt===pt[xt].mesh){mt=!0,pt[xt].present=!0,pt[xt].lastChangedTime<Dt.lastChangedTime&&this.updateMeshGeometry(pt[xt].el,Dt),pt[xt].lastChangedTime=Dt.lastChangedTime;break}mt||gt.push(Dt),mt=!1}}this.deleteMeshes(),this.createNewMeshes(gt)},updateMeshes:function(){var bt=new dt.Matrix4;return function(){for(var Tt,Et=this.el,Mt,Rt=Et.frame,pt=this.meshEntities,mt=Et.renderer.xr.getReferenceSpace(),gt,Ct=0;Ct<pt.length;Ct++)gt=pt[Ct].mesh.meshSpace||pt[Ct].mesh.planeSpace,Tt=Rt.getPose(gt,mt),Mt=pt[Ct].el,Mt.hasLoaded&&(bt.fromArray(Tt.transform.matrix),bt.decompose(Mt.object3D.position,Mt.object3D.quaternion,Mt.object3D.scale))}}(),deleteMeshes:function(){for(var bt=this.meshEntities,Tt=[],Et=0;Et<bt.length;Et++)bt[Et].present?Tt.push(bt[Et]):this.el.removeChild(bt[Et]);this.meshEntities=Tt},createNewMeshes:function(bt){for(var Tt,Et=0;Et<bt.length;Et++)Tt=document.createElement("a-entity"),this.meshEntities.push({mesh:bt[Et],el:Tt}),Tt.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(Tt)},initMeshGeometry:function(bt){var Tt,Et,Mt;if(bt instanceof XRPlane){Et=new dt.Shape,Mt=bt.polygon;for(var Rt=0;Rt<Mt.length;++Rt)Rt===0?Et.moveTo(Mt[Rt].x,Mt[Rt].z):Et.lineTo(Mt[Rt].x,Mt[Rt].z);return Tt=new dt.ShapeGeometry(Et),Tt.rotateX(Math.PI/2),Tt}return Tt=new dt.BufferGeometry,Tt.setAttribute("position",new dt.BufferAttribute(bt.vertices,3)),Tt.setIndex(new dt.BufferAttribute(bt.indices,1)),Tt},initWorldMeshEntity:function(bt){for(var Tt=bt.target,Et,Mt,Rt,pt=this.meshEntities,mt=0;mt<pt.length;mt++)if(pt[mt].el===Tt){Rt=pt[mt];break}Et=this.initMeshGeometry(Rt.mesh),Mt=new dt.Mesh(Et,new dt.MeshBasicMaterial({color:Math.random()*16777215,side:dt.DoubleSide})),Tt.setObject3D("mesh",Mt),Rt.mesh instanceof XRPlane&&this.data.planeMixin?Tt.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&Tt.setAttribute("mixin",this.data.meshMixin),Tt.setAttribute("data-world-mesh",Rt.mesh.semanticLabel)},updateMeshGeometry:function(bt,Tt){var Et=bt.getObject3D("mesh");Et.geometry.dispose(),Et.geometry=this.initMeshGeometry(Tt)}})},"./src/components/scene/reflection.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;function dt(bt,Tt,Et,Mt){var Rt=Math.max(bt.primaryLightIntensity.x,Math.max(bt.primaryLightIntensity.y,bt.primaryLightIntensity.z));Tt.sh.fromArray(bt.sphericalHarmonicsCoefficients),Tt.intensity=1,Et&&(Et.color.setRGB(bt.primaryLightIntensity.x/Rt,bt.primaryLightIntensity.y/Rt,bt.primaryLightIntensity.z/Rt),Et.intensity=Rt,Mt.copy(bt.primaryLightDirection))}St.exports.Component=it("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var bt=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var Tt=this.el.getAttribute("webxr"),Et=Tt.optionalFeatures;Et.includes("light-estimation")||(Et.push("light-estimation"),this.el.setAttribute("webxr",Tt)),this.el.addEventListener("enter-vr",function(){if(bt.el.is("ar-mode")){var Mt=bt.el.renderer,Rt=Mt.xr.getSession();Rt.requestLightProbe&&bt.startLightProbe()}}),this.el.addEventListener("exit-vr",function(){bt.xrLightProbe&&bt.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var bt=this.el.renderer,Tt=bt.xr.getSession(),Et=this,Mt=bt.getContext();if(!this.probeLight){var Rt=document.createElement("a-light");Rt.setAttribute("type","probe"),Rt.setAttribute("intensity",0),this.el.appendChild(Rt),this.probeLight=Rt}switch(Tt.preferredReflectionFormat){case"srgba8":Mt.getExtension("EXT_sRGB");break;case"rgba16f":Mt.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(Tt,Mt),Mt.getExtension("EXT_sRGB"),Mt.getExtension("OES_texture_half_float"),Tt.requestLightProbe().then(function(pt){Et.xrLightProbe=pt,pt.addEventListener("reflectionchange",Et.updateXRCubeMap.bind(Et))}).catch(function(pt){console.warn("Lighting estimation not supported: "+pt.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var bt=this.el.renderer,Tt=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(Tt){var Et=bt.properties.get(this.lightingEstimationTexture);Et.__webglTexture=Tt,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var bt=this.el.object3D,Tt=this.el.renderer,Et=this.el.frame;if(Et&&this.xrLightProbe){var Mt=Et.getLightEstimate(this.xrLightProbe);Mt&&dt(Mt,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(bt.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(Tt,bt),bt.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&Et&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),Tt=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);St.exports.Component=it("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var Et=this.el;if(!this.canvas){var Mt=Et.renderer.getContext();Mt&&(this.cubeMapSize=Mt.getParameter(Mt.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new dt.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:bt,fragmentShader:Tt,side:dt.DoubleSide}),this.quad=new dt.Mesh(new dt.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new dt.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),Et.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(Et,Mt){return new dt.WebGLRenderTarget(Et,Mt,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:dt.LinearFilter,magFilter:dt.LinearFilter,wrapS:dt.ClampToEdgeWrapping,wrapT:dt.ClampToEdgeWrapping,format:dt.RGBAFormat,type:dt.UnsignedByteType})},resize:function(Et,Mt){this.quad.scale.set(Et,Mt,1),this.camera.left=-1*Et/2,this.camera.right=Et/2,this.camera.top=Mt/2,this.camera.bottom=-1*Mt/2,this.camera.updateProjectionMatrix(),this.canvas.width=Et,this.canvas.height=Mt},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(Et){var Mt=Et.keyCode===83&&Et.ctrlKey&&Et.altKey;if(!(!this.data||!Mt)){var Rt=Et.shiftKey?"equirectangular":"perspective";this.capture(Rt)}},setCapture:function(Et){var Mt=this.el,Rt,pt,mt,gt;return Et==="perspective"?(this.quad.visible=!1,pt=this.data.camera&&this.data.camera.components.camera.camera||Mt.camera,Rt={width:this.data.width,height:this.data.height}):(pt=this.camera,gt=new dt.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:dt.RGBFormat,generateMipmaps:!0,minFilter:dt.LinearMipmapLinearFilter,colorSpace:dt.SRGBColorSpace}),mt=new dt.CubeCamera(Mt.camera.near,Mt.camera.far,gt),Mt.camera.getWorldPosition(mt.position),Mt.camera.getWorldQuaternion(mt.quaternion),mt.update(Mt.renderer,Mt.object3D),this.quad.material.uniforms.map.value=mt.renderTarget.texture,Rt={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:pt,size:Rt,projection:Et}},capture:function(Et){var Mt=this.el.renderer.xr.enabled,Rt=this.el.renderer,pt;this.setup(),Rt.xr.enabled=!1,pt=this.setCapture(Et),this.renderCapture(pt.camera,pt.size,pt.projection),this.saveCapture(),Rt.xr.enabled=Mt},getCanvas:function(Et){var Mt=this.el.renderer.xr.enabled,Rt=this.el.renderer;this.setup();var pt=this.setCapture(Et);return Rt.xr.enabled=!1,this.renderCapture(pt.camera,pt.size,pt.projection),Rt.xr.enabled=Mt,this.canvas},renderCapture:function(Et,Mt,Rt){var pt=this.el.renderer.autoClear,mt=this.el,gt,Ct,xt,Dt=mt.renderer;Ct=this.getRenderTarget(Mt.width,Mt.height),xt=new Uint8Array(4*Mt.width*Mt.height),this.resize(Mt.width,Mt.height),Dt.autoClear=!0,Dt.clear(),Dt.setRenderTarget(Ct),Dt.render(mt.object3D,Et),Dt.autoClear=pt,Dt.readRenderTargetPixels(Ct,0,0,Mt.width,Mt.height,xt),Dt.setRenderTarget(null),Rt==="perspective"&&(xt=this.flipPixelsVertically(xt,Mt.width,Mt.height)),gt=new ImageData(new Uint8ClampedArray(xt),Mt.width,Mt.height),this.quad.visible=!1,this.ctx.putImageData(gt,0,0)},flipPixelsVertically:function(Et,Mt,Rt){for(var pt=Et.slice(0),mt=0;mt<Mt;++mt)for(var gt=0;gt<Rt;++gt)pt[mt*4+gt*Mt*4]=Et[mt*4+(Rt-gt)*Mt*4],pt[mt*4+1+gt*Mt*4]=Et[mt*4+1+(Rt-gt)*Mt*4],pt[mt*4+2+gt*Mt*4]=Et[mt*4+2+(Rt-gt)*Mt*4],pt[mt*4+3+gt*Mt*4]=Et[mt*4+3+(Rt-gt)*Mt*4];return pt},saveCapture:function(){this.canvas.toBlob(function(Et){var Mt="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",Rt=document.createElement("a"),pt=URL.createObjectURL(Et);Rt.href=pt,Rt.setAttribute("download",Mt),Rt.innerHTML="downloading...",Rt.style.display="none",document.body.appendChild(Rt),setTimeout(function(){Rt.click(),document.body.removeChild(Rt)},1)},"image/png")}})},"./src/components/scene/stats.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./vendor/rStats.js"),bt=vt("./src/utils/index.js");vt("./vendor/rStats.extras.js"),vt("./src/lib/rStatsAframe.js");var Tt=window.aframeStats,Et="a-hidden",Mt=window.threeStats;St.exports.Component=it("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var pt=this.el;bt.getUrlParameter("stats")!=="false"&&(this.stats=Rt(pt),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),pt.addEventListener("enter-vr",this.hideBound),pt.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var pt=this.stats;pt&&(pt("rAF").tick(),pt("FPS").frame(),pt().update())},hide:function(){this.statsEl.classList.add(Et)},show:function(){this.statsEl.classList.remove(Et)}});function Rt(pt){var mt=new Mt(pt.renderer),gt=new Tt(pt),Ct=pt.isMobile?[]:[mt,gt];return new dt({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:Ct})}},"./src/components/scene/xr-mode-ui.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/constants/index.js"),bt=vt("./src/utils/index.js"),Tt="a-enter-vr",Et="a-enter-ar",Mt="a-enter-vr-button",Rt="a-enter-ar-button",pt="a-hidden",mt="a-orientation-modal";St.exports.Component=it("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var Ht=this,Ut=this.el;bt.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),Ut.addEventListener("enter-vr",this.updateEnterInterfaces),Ut.addEventListener("exit-vr",this.updateEnterInterfaces),Ut.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(Xt){Xt.data.type==="loaderReady"&&(Ht.insideLoader=!0,Ht.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var Ht=this.data,Ut=this.el;if(!Ht.enabled||this.insideLoader||bt.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(!this.enterVREl&&Ht.enterVREnabled&&(Ht.XRMode==="xr"||Ht.XRMode==="vr")&&(Ht.enterVRButton?(this.enterVREl=document.querySelector(Ht.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=gt(this.onEnterVRButtonClick),Ut.appendChild(this.enterVREl))),!this.enterAREl&&Ht.enterAREnabled&&(Ht.XRMode==="xr"||Ht.XRMode==="ar")&&(Ht.enterARButton?(this.enterAREl=document.querySelector(Ht.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=Ct(this.onEnterARButtonClick,Ht.XRMode==="xr"),Ut.appendChild(this.enterAREl))),this.orientationModalEl=xt(this.onModalClick),Ut.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(Ht){Ht&&Ht.parentNode&&Ht.parentNode.removeChild(Ht)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var Ht=this.el;this.enterVREl&&(Ht.is("vr-mode")||(Ht.isMobile||bt.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!bt.device.checkVRSupport()?this.enterVREl.classList.add(pt):(bt.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(pt),Ht.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var Ht=this.el;this.enterAREl&&(Ht.is("vr-mode")||!bt.device.checkARSupport()?this.enterAREl.classList.add(pt):(this.enterAREl.classList.remove(pt),Ht.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var Ht=this.el,Ut=this.orientationModalEl;!Ut||!Ht.isMobile||(!bt.device.isLandscape()&&Ht.is("vr-mode")?Ut.classList.remove(pt):Ut.classList.add(pt))}});function gt(Ht){var Ut,Xt;return Xt=document.createElement("div"),Xt.classList.add(Tt),Xt.setAttribute(dt.AFRAME_INJECTED,""),Ut=document.createElement("button"),Ut.className=Mt,Ut.setAttribute("title","Enter VR mode with a headset or fullscreen without"),Ut.setAttribute(dt.AFRAME_INJECTED,""),bt.device.isMobile()&&Dt(Ut),Xt.appendChild(Ut),Ut.addEventListener("click",function(Qt){Ht(),Qt.stopPropagation()}),Xt}function Ct(Ht,Ut){var Xt,Qt;return Qt=document.createElement("div"),Qt.classList.add(Et),Ut&&Qt.classList.add("xr"),Qt.setAttribute(dt.AFRAME_INJECTED,""),Xt=document.createElement("button"),Xt.className=Rt,Xt.setAttribute("title","Enter AR mode with a headset or handheld device."),Xt.setAttribute(dt.AFRAME_INJECTED,""),bt.device.isMobile()&&Dt(Xt),Qt.appendChild(Xt),Xt.addEventListener("click",function(tn){Ht(),tn.stopPropagation()}),Qt}function xt(Ht){var Ut=document.createElement("div");Ut.className=mt,Ut.classList.add(pt),Ut.setAttribute(dt.AFRAME_INJECTED,"");var Xt=document.createElement("button");return Xt.setAttribute(dt.AFRAME_INJECTED,""),Xt.innerHTML="Exit VR",Xt.addEventListener("click",Ht),Ut.appendChild(Xt),Ut}function Dt(Ht){Ht.addEventListener("touchstart",function(){Ht.classList.remove("resethover")},{passive:!0}),Ht.addEventListener("touchend",function(){Ht.classList.add("resethover")},{passive:!0})}},"./src/components/shadow.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js"),dt=vt("./src/lib/three.js"),bt=it.registerComponent;St.exports.Component=bt("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var Tt=this.data;this.updateDescendants(Tt.cast,Tt.receive)},remove:function(){var Tt=this.el;Tt.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(Tt,Et){var Mt=this.el.sceneEl;this.el.object3D.traverse(function(Rt){if(Rt instanceof dt.Mesh&&(Rt.castShadow=Tt,Rt.receiveShadow=Et,Mt.hasLoaded&&Rt.material))for(var pt=Array.isArray(Rt.material)?Rt.material:[Rt.material],mt=0;mt<pt.length;mt++)pt[mt].needsUpdate=!0})}})},"./src/components/sound.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/debug.js"),bt=vt("./src/lib/three.js"),Tt=dt("components:sound:warn");St.exports.Component=it("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var Et=this;this.listener=null,this.audioLoader=new bt.AudioLoader,this.pool=new bt.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){Et.playSound()}},update:function(Et){var Mt=this.data,Rt,pt,mt=Mt.src!==Et.src;if(mt){if(!Mt.src)return;this.setupSound()}for(Rt=0;Rt<this.pool.children.length;Rt++)pt=this.pool.children[Rt],Mt.positional&&(pt.setDistanceModel(Mt.distanceModel),pt.setMaxDistance(Mt.maxDistance),pt.setRefDistance(Mt.refDistance),pt.setRolloffFactor(Mt.rolloffFactor)),pt.setLoop(Mt.loop),pt.setLoopStart(Mt.loopStart),Mt.loopStart!==0&&Mt.loopEnd===0?pt.setLoopEnd(pt.buffer.duration):pt.setLoopEnd(Mt.loopEnd),pt.setVolume(Mt.volume),pt.isPaused=!1;if(Mt.on!==Et.on&&this.updateEventListener(Et.on),mt){var gt=this;this.loaded=!1,this.audioLoader.load(Mt.src,function(Ct){for(Rt=0;Rt<gt.pool.children.length;Rt++)pt=gt.pool.children[Rt],pt.setBuffer(Ct);gt.loaded=!0,bt.Cache.remove(Mt.src),(gt.data.autoplay||gt.mustPlay)&&gt.playSound(gt.processSound),gt.el.emit("sound-loaded",gt.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var Et,Mt;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(Et=0;Et<this.pool.children.length;Et++)Mt=this.pool.children[Et],Mt.disconnect()}catch{Tt("Audio source not properly disconnected")}},updateEventListener:function(Et){var Mt=this.el;Et&&Mt.removeEventListener(Et,this.playSoundBound),Mt.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var Et=this.el,Mt,Rt=Et.sceneEl,pt=this,mt;this.pool.children.length>0&&(this.stopSound(),Et.removeObject3D("sound"));var gt=this.listener=Rt.audioListener||new bt.AudioListener;for(Rt.audioListener=gt,Rt.camera&&Rt.camera.add(gt),Rt.addEventListener("camera-set-active",function(Ct){Ct.detail.cameraEl.getObject3D("camera").add(gt)}),this.pool=new bt.Group,Mt=0;Mt<this.data.poolSize;Mt++)mt=this.data.positional?new bt.PositionalAudio(gt):new bt.Audio(gt),this.pool.add(mt);for(Et.setObject3D(this.attrName,this.pool),Mt=0;Mt<this.pool.children.length;Mt++)mt=this.pool.children[Mt],mt.onEnded=function(){this.isPlaying=!1,pt.el.emit("sound-ended",pt.evtDetail,!1)}},pauseSound:function(){var Et,Mt;for(this.isPlaying=!1,Et=0;Et<this.pool.children.length;Et++)Mt=this.pool.children[Et],!(!Mt.source||!Mt.source.buffer||!Mt.isPlaying||Mt.isPaused)&&(Mt.isPaused=!0,Mt.pause())},playSound:function(Et){var Mt,Rt,pt;if(!this.loaded){Tt("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,this.processSound=Et;return}for(Mt=!1,this.isPlaying=!0,Rt=0;Rt<this.pool.children.length;Rt++)if(pt=this.pool.children[Rt],!pt.isPlaying&&pt.buffer&&!Mt){Et&&Et(pt),pt.play(),pt.isPaused=!1,Mt=!0;continue}if(!Mt){Tt("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1,this.processSound=void 0},stopSound:function(){var Et,Mt;for(this.isPlaying=!1,Et=0;Et<this.pool.children.length;Et++){if(Mt=this.pool.children[Et],!Mt.source||!Mt.source.buffer)return;Mt.stop()}}})},"./src/components/text.js":(St,Gt,vt)=>{var it=vt("./node_modules/three-bmfont-text/index.js"),dt=vt("./node_modules/load-bmfont/browser.js"),bt=vt("./src/core/component.js").registerComponent,Tt=vt("./src/core/shader.js"),Et=vt("./src/lib/three.js"),Mt=vt("./src/utils/index.js"),Rt=Mt.debug("components:text:error"),pt=Tt.shaders,mt=Mt.debug("components:text:warn"),gt=1,Ct=16,xt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,Dt=xt+"fonts/",Ht={aileronsemibold:Dt+"Aileron-Semibold.fnt",dejavu:Dt+"DejaVu-sdf.fnt",exo2bold:Dt+"Exo2Bold.fnt",exo2semibold:Dt+"Exo2SemiBold.fnt",kelsonsans:Dt+"KelsonSans.fnt",monoid:Dt+"Monoid.fnt",mozillavr:Dt+"mozillavr.fnt",roboto:Dt+"Roboto-msdf.json",sourcecodepro:Dt+"SourceCodePro.fnt"},Ut=["roboto"],Xt="roboto";St.exports.FONTS=Ht;var Qt=new mn,tn={},on={},vn=/^\w+:/;St.exports.Component=bt("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:Xt},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:pt},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=it(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(gn){var In=this.data,Vn=this.currentFont;if(on[In.font]?this.texture=on[In.font]:(this.texture=on[In.font]=new Et.Texture,this.texture.anisotropy=Ct),this.createOrUpdateMaterial(),gn.font!==In.font){this.updateFont();return}Vn&&(this.updateGeometry(this.geometry,Vn),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var gn=this.data,In,Vn=this.material,Zn,lr=this.shaderData,hr;if(hr=gn.shader,Ut.indexOf(gn.font)!==-1||gn.font.indexOf("-msdf.")>=0?hr="msdf":gn.font in Ht&&Ut.indexOf(gn.font)===-1&&(hr="sdf"),In=(this.shaderObject&&this.shaderObject.name)!==hr,lr.alphaTest=gn.alphaTest,lr.color=gn.color,lr.map=this.texture,lr.opacity=gn.opacity,lr.side=fn(gn.side),lr.transparent=gn.transparent,lr.negate=gn.negate,!In){this.shaderObject.update(lr),Vn.transparent=lr.transparent,Vn.side=lr.side;return}Zn=An(this.el,hr,lr),this.material=Zn.material,this.shaderObject=Zn.shader,this.material.side=lr.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var gn=this.data,In=this.el,Vn,Zn=this.geometry,lr=this;gn.font||mt("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),Vn=this.lookupFont(gn.font||Xt)||gn.font,Qt.get(Vn,function(){return Cn(Vn,gn.yOffset)}).then(function(Lr){var Tr;if(Lr.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");tn[Vn]||(Lr.widthFactor=tn[Lr]=Zt(Lr)),lr.currentFont=Lr,Tr=lr.getFontImageSrc(),Qt.get(Tr,function(){return dn(Tr)}).then(function(As){var Yr=lr.texture;Yr&&(Yr.image=As,Yr.needsUpdate=!0,on[gn.font]=Yr,lr.texture=Yr,lr.initMesh(),lr.currentFont=Lr,lr.updateGeometry(Zn,Lr),lr.updateLayout(),lr.mesh.visible=!0,In.emit("textfontset",{font:gn.font,fontObj:Lr}))}).catch(function(As){Rt(As.message),Rt(As.stack)})}).catch(function(hr){Rt(hr.message),Rt(hr.stack)})},initMesh:function(){this.mesh||(this.mesh=new Et.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var gn=this.lookupFont(this.data.font||Xt)||this.data.font,In=this.currentFont.pages[0];return In.match(vn)&&In.indexOf("http")!==0?gn.replace(/(\.fnt)|(\.json)/,".png"):Et.LoaderUtils.extractUrlBase(gn)+In},updateLayout:function(){var gn,In,Vn=this.el,Zn=this.data,lr=this.geometry,hr,Lr,Tr,As=this.mesh,Yr,ms,Rs,Zs,ao;if(!(!As||!lr.layout)){if(hr=Vn.getAttribute("geometry"),Rs=Zn.width||hr&&hr.width||gt,Yr=nn(Zn.wrapPixels,Zn.wrapCount,this.currentFont.widthFactor),ms=Rs/Yr,Tr=lr.layout,Lr=ms*(Tr.height+Tr.descender),hr&&hr.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!hr.width,this.hasExplicitGeoHeight=!!hr.height),this.hasExplicitGeoWidth||Vn.setAttribute("geometry","width",Rs),this.hasExplicitGeoHeight||Vn.setAttribute("geometry","height",Lr)),gn=Zn.anchor==="align"?Zn.align:Zn.anchor,gn==="left")Zs=0;else if(gn==="right")Zs=-1*Tr.width;else if(gn==="center")Zs=-1*Tr.width/2;else throw new TypeError("Invalid text.anchor property value",gn);if(In=Zn.baseline,In==="bottom")ao=0;else if(In==="top")ao=-1*Tr.height+Tr.ascender;else if(In==="center")ao=-1*Tr.height/2;else throw new TypeError("Invalid text.baseline property value",In);As.position.x=Zs*ms+Zn.xOffset,As.position.y=ao*ms,As.position.z=Zn.zOffset,As.scale.set(ms,-1*ms,ms)}},lookupFont:function(gn){return Ht[gn]},updateGeometry:function(){var gn={},In={},Vn=/\\n/g,Zn=/\\t/g;return function(lr,hr){var Lr=this.data;In.font=hr,In.lineHeight=Lr.lineHeight&&isFinite(Lr.lineHeight)?Lr.lineHeight:hr.common.lineHeight,In.text=Lr.value.toString().replace(Vn,`
`).replace(Zn,"	"),In.width=nn(Lr.wrapPixels,Lr.wrapCount,hr.widthFactor),lr.update(Mt.extend(gn,Lr,In))}}()});function fn(gn){switch(gn){case"back":return Et.FrontSide;case"double":return Et.DoubleSide;default:return Et.BackSide}}function Cn(gn,In){return new Promise(function(Vn,Zn){dt(gn,function(lr,hr){if(lr){Rt("Error loading font",gn),Zn(lr);return}gn.indexOf("/Roboto-msdf.json")>=0&&(In=30),In&&hr.chars.map(function(Tr){Tr.yoffset+=In}),Vn(hr)})})}function dn(gn){return new Promise(function(In,Vn){new Et.ImageLoader().load(gn,function(Zn){In(Zn)},void 0,function(){Rt("Error loading font image",gn),Vn(null)})})}function An(gn,In,Vn){var Zn,lr;return lr=new pt[In].Shader,lr.el=gn,lr.init(Vn),lr.update(Vn),Zn=lr.material,Zn.transparent=Vn.transparent,{material:Zn,shader:lr}}function nn(gn,In,Vn){return gn||(.5+In)*Vn}function Zt(gn){var In=0,Vn=0,Zn=0;return gn.chars.map(function(lr){In+=lr.xadvance,lr.id>=48&&lr.id<=57&&(Zn++,Vn+=lr.xadvance)}),Zn?Vn/Zn:In/gn.chars.length}function mn(){var gn=this.cache={};this.get=function(In,Vn){return In in gn||(gn[In]=Vn()),gn[In]}}},"./src/components/tracked-controls-webvr.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=vt("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,Tt=vt("./src/lib/three.js"),Et=vt("./src/constants/index.js").DEFAULT_HANDEDNESS,Mt={x:.175,y:-.3,z:-.03},Rt={x:0,y:0,z:-.175},pt={touches:[]},mt={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};St.exports.Component=it("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new Tt.Vector3,this.controllerQuaternion=new Tt.Quaternion,this.controllerEuler=new Tt.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(gt,Ct){var xt=this.el.getObject3D("mesh");xt&&xt.update&&xt.update(Ct/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return bt},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var gt=this.data,Ct=dt.findMatchingControllerWebVR(this.system.controllers,gt.id,gt.idPrefix,gt.hand,gt.controller);this.controller=Ct,this.el.components["tracked-controls"].controller=Ct,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(gt){var Ct=this.controller,xt=this.controllerEuler,Dt=this.controllerQuaternion,Ht=this.deltaControllerPosition,Ut,Xt,Qt,tn,on;Xt=this.getHeadElement(),Qt=Xt.object3D,on=this.defaultUserHeight(),tn=Ct.pose,Ut=(Ct?Ct.hand:void 0)||Et,gt.copy(Qt.position),Ht.set(Mt.x*(Ut==="left"?-1:Ut==="right"?1:0),Mt.y,Mt.z),Ht.multiplyScalar(on),Ht.applyAxisAngle(Qt.up,Qt.rotation.y),gt.add(Ht),Ht.set(Rt.x,Rt.y,Rt.z),Ht.multiplyScalar(on),tn.orientation?Dt.fromArray(tn.orientation):Dt.copy(Qt.quaternion),xt.setFromQuaternion(Dt),xt.set(xt.x,xt.y,0),Ht.applyEuler(xt),gt.add(Ht)},updatePose:function(){var gt=this.controller,Ct=this.data,xt=this.el.object3D,Dt,Ht=this.system.vrDisplay,Ut;gt&&(Dt=gt.pose,Dt.position?xt.position.fromArray(Dt.position):Ct.armModel&&this.applyArmModel(xt.position),Dt.orientation&&xt.quaternion.fromArray(Dt.orientation),Ht&&Dt.position&&(Ut=this.el.sceneEl.renderer.xr.getStandingMatrix(),xt.matrix.compose(xt.position,xt.quaternion,xt.scale),xt.matrix.multiplyMatrices(Ut,xt.matrix),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale)),xt.rotateX(this.data.orientationOffset.x*Tt.MathUtils.DEG2RAD),xt.rotateY(this.data.orientationOffset.y*Tt.MathUtils.DEG2RAD),xt.rotateZ(this.data.orientationOffset.z*Tt.MathUtils.DEG2RAD))},updateButtons:function(){var gt,Ct=this.controller,xt;if(Ct){for(xt=0;xt<Ct.buttons.length;++xt)this.buttonStates[xt]||(this.buttonStates[xt]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[xt]||(this.buttonEventDetails[xt]={id:xt,state:this.buttonStates[xt]}),gt=Ct.buttons[xt],this.handleButton(xt,gt);this.handleAxes()}},handleButton:function(gt,Ct){var xt;return xt=this.handlePress(gt,Ct)|this.handleTouch(gt,Ct)|this.handleValue(gt,Ct),xt?(this.el.emit(mt.BUTTONCHANGED,this.buttonEventDetails[gt],!1),!0):!1},handleAxes:function(){var gt=!1,Ct=this.controller.axes,xt,Dt=this.axis,Ht=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),xt=0;xt<Ct.length;++xt)Ht.push(Dt[xt]!==Ct[xt]),Ht[xt]&&(gt=!0);if(!gt)return!1;for(this.axis.splice(0,this.axis.length),xt=0;xt<Ct.length;xt++)this.axis.push(Ct[xt]);return this.el.emit(mt.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(gt,Ct){var xt,Dt=this.buttonStates[gt];return Ct.pressed===Dt.pressed?!1:(xt=Ct.pressed?mt.BUTTONDOWN:mt.BUTTONUP,this.el.emit(xt,this.buttonEventDetails[gt],!1),Dt.pressed=Ct.pressed,!0)},handleTouch:function(gt,Ct){var xt,Dt=this.buttonStates[gt];return Ct.touched===Dt.touched?!1:(xt=Ct.touched?mt.TOUCHSTART:mt.TOUCHEND,this.el.emit(xt,this.buttonEventDetails[gt],!1,pt),Dt.touched=Ct.touched,!0)},handleValue:function(gt,Ct){var xt=this.buttonStates[gt];return Ct.value===xt.value?!1:(xt.value=Ct.value,!0)}})},"./src/components/tracked-controls-webxr.js":(St,Gt,vt)=>{var it=vt("./src/utils/tracked-controls.js"),dt=vt("./src/core/component.js").registerComponent,bt={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};St.exports.Component=dt("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var Tt=this.el.sceneEl;this.updateController(),Tt.addEventListener("controllersupdated",this.updateController)},pause:function(){var Tt=this.el.sceneEl;Tt.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(Tt){return!(!this.controller||this.controller.gamepad||Tt.inputSource.handedness!=="none"&&Tt.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=it.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var Tt=this.el.sceneEl,Et=this.controller,Mt=Tt.frame;!Et||!Tt.frame||!this.system.referenceSpace||Et.hand||(this.pose=Mt.getPose(Et[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var Tt=this.el.object3D,Et=this.pose;Et&&(Tt.matrix.elements=Et.transform.matrix,Tt.matrix.decompose(Tt.position,Tt.rotation,Tt.scale))},updateButtons:function(){var Tt,Et,Mt=this.controller,Rt;if(!(!Mt||!Mt.gamepad)){for(Rt=Mt.gamepad,Et=0;Et<Rt.buttons.length;++Et)this.buttonStates[Et]||(this.buttonStates[Et]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[Et]||(this.buttonEventDetails[Et]={id:Et,state:this.buttonStates[Et]}),Tt=Rt.buttons[Et],this.handleButton(Et,Tt);this.handleAxes()}},handleButton:function(Tt,Et){var Mt;return Mt=this.handlePress(Tt,Et)|this.handleTouch(Tt,Et)|this.handleValue(Tt,Et),Mt?(this.el.emit(bt.BUTTONCHANGED,this.buttonEventDetails[Tt],!1),!0):!1},handleAxes:function(){var Tt=!1,Et=this.controller.gamepad.axes,Mt,Rt=this.axis,pt=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),Mt=0;Mt<Et.length;++Mt)pt.push(Rt[Mt]!==Et[Mt]),pt[Mt]&&(Tt=!0);if(!Tt)return!1;for(this.axis.splice(0,this.axis.length),Mt=0;Mt<Et.length;Mt++)this.axis.push(Et[Mt]);return this.el.emit(bt.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(Tt,Et){var Mt,Rt=this.buttonStates[Tt];return Et.pressed===Rt.pressed?!1:(Mt=Et.pressed?bt.BUTTONDOWN:bt.BUTTONUP,this.el.emit(Mt,this.buttonEventDetails[Tt],!1),Rt.pressed=Et.pressed,!0)},handleTouch:function(Tt,Et){var Mt,Rt=this.buttonStates[Tt];return Et.touched===Rt.touched?!1:(Mt=Et.touched?bt.TOUCHSTART:bt.TOUCHEND,this.el.emit(Mt,this.buttonEventDetails[Tt],!1),Rt.touched=Et.touched,!0)},handleValue:function(Tt,Et){var Mt=this.buttonStates[Tt];return Et.value===Mt.value?!1:(Mt.value=Et.value,!0)}})},"./src/components/tracked-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},after:["tracked-controls-webvr","tracked-controls-webxr"],update:function(){var dt=this.data,bt=this.el;bt.sceneEl.hasWebXR?bt.setAttribute("tracked-controls-webxr",{id:dt.id,hand:dt.hand,index:dt.controller,iterateControllerProfiles:dt.iterateControllerProfiles,handTrackingEnabled:dt.handTrackingEnabled,space:dt.space}):bt.setAttribute("tracked-controls-webvr",dt)}})},"./src/components/valve-index-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/tracked-controls.js"),Tt=bt.checkControllerPresentAndSetup,Et=bt.emitIfAxesChanged,Mt=bt.onButtonEvent,Rt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,pt=Rt+"controllers/valve/index/valve-index-",mt={left:pt+"left.glb",right:pt+"right.glb"},gt="valve",Ct=vt("./src/utils/index.js").device.isWebXRAvailable,xt={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},Dt={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},Ht={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},Ut={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},Xt=Ct?Ut:Ht,Qt=Ct?Dt:xt;St.exports.Component=it("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var tn=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(on){Mt(on.detail.id,"down",tn)},this.onButtonUp=function(on){Mt(on.detail.id,"up",tn)},this.onButtonTouchEnd=function(on){Mt(on.detail.id,"touchend",tn)},this.onButtonTouchStart=function(on){Mt(on.detail.id,"touchstart",tn)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var tn=this.el;tn.addEventListener("buttonchanged",this.onButtonChanged),tn.addEventListener("buttondown",this.onButtonDown),tn.addEventListener("buttonup",this.onButtonUp),tn.addEventListener("touchend",this.onButtonTouchEnd),tn.addEventListener("touchstart",this.onButtonTouchStart),tn.addEventListener("model-loaded",this.onModelLoaded),tn.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var tn=this.el;tn.removeEventListener("buttonchanged",this.onButtonChanged),tn.removeEventListener("buttondown",this.onButtonDown),tn.removeEventListener("buttonup",this.onButtonUp),tn.removeEventListener("touchend",this.onButtonTouchEnd),tn.removeEventListener("touchstart",this.onButtonTouchStart),tn.removeEventListener("model-loaded",this.onModelLoaded),tn.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var tn=this.data,on=tn.hand==="right"?0:tn.hand==="left"?1:2;Tt(this,gt,{index:on,iterateControllerProfiles:!0,hand:tn.hand})},injectTrackedControls:function(){var tn=this.el,on=this.data;tn.setAttribute("tracked-controls",{idPrefix:gt,controller:on.hand==="right"?1:on.hand==="left"?0:2,hand:on.hand,orientationOffset:on.orientationOffset}),this.loadModel()},loadModel:function(){var tn=this.data;tn.model&&this.el.setAttribute("gltf-model",""+mt[tn.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(tn){var on=this.mapping.buttons[tn.detail.id],vn=this.buttonMeshes,fn;on&&(on==="trigger"&&(fn=tn.detail.state.value,vn&&vn.trigger&&(vn.trigger.rotation.x=this.triggerOriginalRotationX-fn*(Math.PI/40))),this.el.emit(on+"changed",tn.detail.state))},onModelLoaded:function(tn){var on,vn=tn.detail.model,fn=this;tn.target!==this.el||!this.data.model||(on=this.buttonMeshes={},on.grip={left:vn.getObjectByName("leftgrip"),right:vn.getObjectByName("rightgrip")},on.menu=vn.getObjectByName("menubutton"),on.system=vn.getObjectByName("systembutton"),on.trackpad=vn.getObjectByName("touchpad"),on.trigger=vn.getObjectByName("trigger"),this.triggerOriginalRotationX=on.trigger.rotation.x,Object.keys(on).forEach(function(Cn){fn.setButtonColor(Cn,fn.data.buttonColor)}),vn.position.copy(Qt[this.data.hand]),vn.rotation.copy(Xt[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new dt.Vector3(0,0,0)}))},onAxisMoved:function(tn){Et(this,this.mapping.axes,tn)},updateModel:function(tn,on){var vn,fn;this.data.model&&(fn=on.indexOf("touch")!==-1,!fn&&(vn=on==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(tn,vn)))},setButtonColor:function(tn,on){}})},"./src/components/visible.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent;St.exports.Component=it("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,Rt=Mt+"controllers/vive/vr_controller_vive.obj",pt=Mt+"controllers/vive/vr_controller_vive.mtl",mt=vt("./src/utils/index.js").device.isWebXRAvailable,gt="htc-vive",Ct="OpenVR ",xt=mt?gt:Ct,Dt={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},Ht={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},Ut=mt?Ht:Dt;St.exports.Component=it("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:Ut,init:function(){var Xt=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Qt){Et(Qt.detail.id,"down",Xt)},this.onButtonUp=function(Qt){Et(Qt.detail.id,"up",Xt)},this.onButtonTouchEnd=function(Qt){Et(Qt.detail.id,"touchend",Xt)},this.onButtonTouchStart=function(Qt){Et(Qt.detail.id,"touchstart",Xt)},this.previousButtonValues={},this.bindMethods()},update:function(){var Xt=this.data;this.controllerIndex=Xt.hand==="right"?0:Xt.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var Xt=this.el;Xt.addEventListener("buttonchanged",this.onButtonChanged),Xt.addEventListener("buttondown",this.onButtonDown),Xt.addEventListener("buttonup",this.onButtonUp),Xt.addEventListener("touchend",this.onButtonTouchEnd),Xt.addEventListener("touchstart",this.onButtonTouchStart),Xt.addEventListener("model-loaded",this.onModelLoaded),Xt.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var Xt=this.el;Xt.removeEventListener("buttonchanged",this.onButtonChanged),Xt.removeEventListener("buttondown",this.onButtonDown),Xt.removeEventListener("buttonup",this.onButtonUp),Xt.removeEventListener("touchend",this.onButtonTouchEnd),Xt.removeEventListener("touchstart",this.onButtonTouchStart),Xt.removeEventListener("model-loaded",this.onModelLoaded),Xt.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var Xt=this.data;bt(this,xt,{index:this.controllerIndex,hand:Xt.hand})},injectTrackedControls:function(){var Xt=this.el,Qt=this.data;Xt.setAttribute("tracked-controls",{idPrefix:xt,hand:Qt.hand,controller:this.controllerIndex,orientationOffset:Qt.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:Rt,mtl:pt})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(Xt){var Qt=this.mapping.buttons[Xt.detail.id],tn=this.buttonMeshes,on;Qt&&(Qt==="trigger"&&(on=Xt.detail.state.value,tn&&tn.trigger&&(tn.trigger.rotation.x=-on*(Math.PI/12))),this.el.emit(Qt+"changed",Xt.detail.state))},onModelLoaded:function(Xt){var Qt,tn=Xt.detail.model,on=this;Xt.target!==this.el||!this.data.model||(Qt=this.buttonMeshes={},Qt.grip={left:tn.getObjectByName("leftgrip"),right:tn.getObjectByName("rightgrip")},Qt.menu=tn.getObjectByName("menubutton"),Qt.system=tn.getObjectByName("systembutton"),Qt.trackpad=tn.getObjectByName("touchpad"),Qt.touchpad=tn.getObjectByName("touchpad"),Qt.trigger=tn.getObjectByName("trigger"),Object.keys(Qt).forEach(function(vn){on.setButtonColor(vn,on.data.buttonColor)}),tn.position.set(0,-.015,.04))},onAxisMoved:function(Xt){Tt(this,this.mapping.axes,Xt)},updateModel:function(Xt,Qt){var tn,on;this.data.model&&(on=Qt.indexOf("touch")!==-1,!on&&(tn=Qt==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(Xt,tn)))},setButtonColor:function(Xt,Qt){var tn=this.buttonMeshes;if(tn){if(Xt==="grip"){tn.grip.left.material.color.set(Qt),tn.grip.right.material.color.set(Qt);return}tn[Xt].material.color.set(Qt)}}})},"./src/components/vive-focus-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,Rt=Mt+"controllers/vive/focus-controller/focus-controller.gltf",pt=vt("./src/utils/index.js").device.isWebXRAvailable,mt="htc-vive-focus",gt="HTC Vive Focus ",Ct=pt?mt:gt,xt={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},Dt={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},Ht=pt?Dt:xt;St.exports.Component=it("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},after:["tracked-controls"],mapping:Ht,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var Ut=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Xt){Et(Xt.detail.id,"down",Ut)},this.onButtonUp=function(Xt){Et(Xt.detail.id,"up",Ut)},this.onButtonTouchStart=function(Xt){Et(Xt.detail.id,"touchstart",Ut)},this.onButtonTouchEnd=function(Xt){Et(Xt.detail.id,"touchend",Ut)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var Ut=this.el;Ut.addEventListener("buttonchanged",this.onButtonChanged),Ut.addEventListener("buttondown",this.onButtonDown),Ut.addEventListener("buttonup",this.onButtonUp),Ut.addEventListener("touchstart",this.onButtonTouchStart),Ut.addEventListener("touchend",this.onButtonTouchEnd),Ut.addEventListener("model-loaded",this.onModelLoaded),Ut.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var Ut=this.el;Ut.removeEventListener("buttonchanged",this.onButtonChanged),Ut.removeEventListener("buttondown",this.onButtonDown),Ut.removeEventListener("buttonup",this.onButtonUp),Ut.removeEventListener("touchstart",this.onButtonTouchStart),Ut.removeEventListener("touchend",this.onButtonTouchEnd),Ut.removeEventListener("model-loaded",this.onModelLoaded),Ut.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){bt(this,Ct,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var Ut=this.el,Xt=this.data;Ut.setAttribute("tracked-controls",{armModel:Xt.armModel,idPrefix:Ct,orientationOffset:Xt.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",Rt)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(Ut){var Xt=Ut.detail.model,Qt;Ut.target!==this.el||!this.data.model||(Qt=this.buttonMeshes={},Qt.trigger=Xt.getObjectByName("BumperKey"),Qt.triggerPressed=Xt.getObjectByName("BumperKey_Press"),Qt.triggerPressed&&(Qt.triggerPressed.visible=!1),Qt.trackpad=Xt.getObjectByName("TouchPad"),Qt.trackpadPressed=Xt.getObjectByName("TouchPad_Press"),Qt.trackpadPressed&&(Qt.trackpadPressed.visible=!1))},onButtonChanged:function(Ut){var Xt=this.mapping.buttons[Ut.detail.id];Xt&&this.el.emit(Xt+"changed",Ut.detail.state)},onAxisMoved:function(Ut){Tt(this,this.mapping.axes,Ut)},updateModel:function(Ut,Xt){this.data.model&&this.updateButtonModel(Ut,Xt)},updateButtonModel:function(Ut,Xt){var Qt=this.buttonMeshes,tn=Ut+"Pressed";if(!(!Qt||!Qt[Ut]||!Qt[tn])){var on;switch(Xt){case"down":on=this.data.buttonHighlightColor;break;case"touchstart":on=this.data.buttonTouchedColor;break}on&&Qt[tn].material.color.set(on),Qt[tn].visible=!!on,Qt[Ut].visible=!on}}})},"./src/components/wasd-controls.js":(St,Gt,vt)=>{var it=vt("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,dt=vt("./src/core/component.js").registerComponent,bt=vt("./src/lib/three.js"),Tt=vt("./src/utils/index.js"),Et=Tt.shouldCaptureKeyEvent,Mt=1e-5,Rt=.2,pt=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];St.exports.Component=dt("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new bt.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(gt,Ct){var xt=this.data,Dt=this.el,Ht=this.velocity;!Ht[xt.adAxis]&&!Ht[xt.wsAxis]&&mt(this.keys)||(Ct=Ct/1e3,this.updateVelocity(Ct),!(!Ht[xt.adAxis]&&!Ht[xt.wsAxis])&&Dt.object3D.position.add(this.getMovementVector(Ct)))},update:function(gt){gt.adAxis!==this.data.adAxis&&(this.velocity[gt.adAxis]=0),gt.wsAxis!==this.data.wsAxis&&(this.velocity[gt.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(gt){var Ct,xt,Dt,Ht=this.data,Ut=this.keys,Xt=this.velocity,Qt,tn;if(xt=Ht.adAxis,Qt=Ht.wsAxis,gt>Rt){Xt[xt]=0,Xt[Qt]=0;return}var on=Math.pow(1/this.easing,gt*60);Xt[xt]!==0&&(Xt[xt]=Xt[xt]*on),Xt[Qt]!==0&&(Xt[Qt]=Xt[Qt]*on),Math.abs(Xt[xt])<Mt&&(Xt[xt]=0),Math.abs(Xt[Qt])<Mt&&(Xt[Qt]=0),Ht.enabled&&(Ct=Ht.acceleration,Ht.adEnabled&&(Dt=Ht.adInverted?-1:1,(Ut.KeyA||Ut.ArrowLeft)&&(Xt[xt]-=Dt*Ct*gt),(Ut.KeyD||Ut.ArrowRight)&&(Xt[xt]+=Dt*Ct*gt)),Ht.wsEnabled&&(tn=Ht.wsInverted?-1:1,(Ut.KeyW||Ut.ArrowUp)&&(Xt[Qt]-=tn*Ct*gt),(Ut.KeyS||Ut.ArrowDown)&&(Xt[Qt]+=tn*Ct*gt)))},getMovementVector:function(){var gt=new bt.Vector3(0,0,0),Ct=new bt.Euler(0,0,0,"YXZ");return function(xt){var Dt=this.el.getAttribute("rotation"),Ht=this.velocity,Ut;return gt.copy(Ht),gt.multiplyScalar(xt),Dt&&(Ut=this.data.fly?Dt.x:0,Ct.set(bt.MathUtils.degToRad(Ut),bt.MathUtils.degToRad(Dt.y),0),gt.applyEuler(Ct)),gt}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var gt=Object.keys(this.keys),Ct=0;Ct<gt.length;Ct++)delete this.keys[gt[Ct]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(gt){var Ct;Et(gt)&&(Ct=gt.code||it[gt.keyCode],pt.indexOf(Ct)!==-1&&(this.keys[Ct]=!0))},onKeyUp:function(gt){var Ct;Ct=gt.code||it[gt.keyCode],delete this.keys[Ct]}});function mt(gt){var Ct;for(Ct in gt)return!1;return!0}},"./src/components/windows-motion-controls.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/utils/tracked-controls.js"),bt=dt.checkControllerPresentAndSetup,Tt=dt.emitIfAxesChanged,Et=dt.onButtonEvent,Mt=vt("./src/utils/index.js"),Rt=Mt.debug("components:windows-motion-controls:debug"),pt=Mt.debug("components:windows-motion-controls:warn"),mt=vt("./src/constants/index.js").DEFAULT_HANDEDNESS,gt=vt("./src/constants/index.js").AFRAME_CDN_ROOT,Ct=gt+"controllers/microsoft/",xt={left:"left.glb",right:"right.glb",default:"universal.glb"},Dt=vt("./src/utils/index.js").device.isWebXRAvailable,Ht="windows-mixed-reality",Ut="Spatial Controller (Spatial Interaction Source) ",Xt=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,Qt=Dt?Ht:Ut,tn={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},on={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},vn=Dt?on:tn;St.exports.Component=it("windows-motion-controls",{schema:{hand:{default:mt},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},after:["tracked-controls"],mapping:vn,bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var fn=this,Cn=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(dn){Et(dn.detail.id,"down",fn)},this.onButtonUp=function(dn){Et(dn.detail.id,"up",fn)},this.onButtonTouchStart=function(dn){Et(dn.detail.id,"touchstart",fn)},this.onButtonTouchEnd=function(dn){Et(dn.detail.id,"touchend",fn)},this.onControllerConnected=function(){fn.setModelVisibility(!0)},this.onControllerDisconnected=function(){fn.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},Cn.addEventListener("controllerconnected",this.onControllerConnected),Cn.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var fn=this.el;fn.addEventListener("buttonchanged",this.onButtonChanged),fn.addEventListener("buttondown",this.onButtonDown),fn.addEventListener("buttonup",this.onButtonUp),fn.addEventListener("touchstart",this.onButtonTouchStart),fn.addEventListener("touchend",this.onButtonTouchEnd),fn.addEventListener("axismove",this.onAxisMoved),fn.addEventListener("model-error",this.onModelError),fn.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var fn=this.el;fn.removeEventListener("buttonchanged",this.onButtonChanged),fn.removeEventListener("buttondown",this.onButtonDown),fn.removeEventListener("buttonup",this.onButtonUp),fn.removeEventListener("touchstart",this.onButtonTouchStart),fn.removeEventListener("touchend",this.onButtonTouchEnd),fn.removeEventListener("axismove",this.onAxisMoved),fn.removeEventListener("model-error",this.onModelError),fn.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){bt(this,Qt,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var fn=this.createControllerModelUrl();this.loadModel(fn)},createControllerModelUrl:function(fn){var Cn=this.el.components["tracked-controls"],dn=Cn?Cn.controller:null,An="default",nn=this.data.hand,Zt;if(dn&&!window.hasNativeWebXRImplementation&&(nn=dn.hand,!fn)){var mn=dn.id.match(Xt);An=mn&&mn[0]||An}return Zt=xt[nn]||xt.default,Ct+An+"/"+Zt},injectTrackedControls:function(){var fn=this.data;this.el.setAttribute("tracked-controls",{idPrefix:Qt,controller:fn.pair,hand:fn.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(fn){var Cn=this.createControllerModelUrl(!0);fn.detail.src!==Cn?(pt("Failed to load controller model for device, attempting to load default."),this.loadModel(Cn)):pt("Failed to load default controller model.")},loadModel:function(fn){this.el.setAttribute("gltf-model","url("+fn+")")},onModelLoaded:function(fn){var Cn=this.controllerModel=fn.detail.model,dn=this.loadedMeshInfo,An,nn,Zt,mn;if(fn.target!==this.el)return;if(Rt("Processing model"),dn.buttonMeshes={},dn.axisMeshes={},Cn){for(An=0;An<this.mapping.buttons.length;An++){if(nn=this.mapping.buttonMeshNames[this.mapping.buttons[An]],!nn){Rt("Skipping unknown button at index: "+An+" with mapped name: "+this.mapping.buttons[An]);continue}if(Zt=Cn.getObjectByName(nn),!Zt){pt("Missing button mesh with name: "+nn);continue}mn={index:An,value:gn(Zt,"VALUE"),pressed:gn(Zt,"PRESSED"),unpressed:gn(Zt,"UNPRESSED")},mn.value&&mn.pressed&&mn.unpressed?dn.buttonMeshes[this.mapping.buttons[An]]=mn:pt("Missing button submesh under mesh with name: "+nn+"(VALUE: "+!!mn.value+", PRESSED: "+!!mn.pressed+", UNPRESSED:"+!!mn.unpressed+")")}for(An=0;An<this.mapping.axisMeshNames.length;An++){if(nn=this.mapping.axisMeshNames[An],!nn){Rt("Skipping unknown axis at index: "+An);continue}if(Zt=Cn.getObjectByName(nn),!Zt){pt("Missing axis mesh with name: "+nn);continue}mn={index:An,value:gn(Zt,"VALUE"),min:gn(Zt,"MIN"),max:gn(Zt,"MAX")},mn.value&&mn.min&&mn.max?dn.axisMeshes[An]=mn:pt("Missing axis submesh under mesh with name: "+nn+"(VALUE: "+!!mn.value+", MIN: "+!!mn.min+", MAX:"+!!mn.max+")")}this.calculateRayOriginFromMesh(Cn),this.setModelVisibility()}Rt("Model load complete.");function gn(In,Vn){for(var Zn=0,lr=In.children.length;Zn<lr;Zn++){var hr=In.children[Zn];if(hr&&hr.name===Vn)return hr}}},calculateRayOriginFromMesh:function(){var fn=new THREE.Quaternion;return function(Cn){var dn;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,dn=Cn.getObjectByName(this.mapping.pointingPoseMeshName),dn){var An=Cn.parent;An&&(Cn.parent=null,Cn.updateMatrixWorld(!0),Cn.parent=An),dn.getWorldPosition(this.rayOrigin.origin),dn.getWorldQuaternion(fn),this.rayOrigin.direction.applyQuaternion(fn),An&&Cn.updateMatrixWorld(!0)}else Rt("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var fn=new THREE.Quaternion;return function(Cn,dn){var An=this.loadedMeshInfo.axisMeshes[Cn];if(An){var nn=An.min,Zt=An.max,mn=An.value,gn=dn*.5+.5;mn.setRotationFromQuaternion(fn.copy(nn.quaternion).slerp(Zt.quaternion,gn)),mn.position.lerpVectors(nn.position,Zt.position,gn)}}}(),lerpButtonTransform:function(){var fn=new THREE.Quaternion;return function(Cn,dn){var An=this.loadedMeshInfo.buttonMeshes[Cn];if(An){var nn=An.unpressed,Zt=An.pressed,mn=An.value;mn.setRotationFromQuaternion(fn.copy(nn.quaternion).slerp(Zt.quaternion,dn)),mn.position.lerpVectors(nn.position,Zt.position,dn)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(fn){var Cn=this.mapping.buttons[fn.detail.id];Cn&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(Cn,fn.detail.state.value),this.el.emit(Cn+"changed",fn.detail.state))},onAxisMoved:function(fn){var Cn=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var dn=0;dn<Cn;dn++)this.lerpAxisTransform(dn,fn.detail.axis[dn]||0);Tt(this,this.mapping.axes,fn)},setModelVisibility:function(fn){var Cn=this.el.getObject3D("mesh");this.controllerPresent&&(fn=fn!==void 0?fn:this.modelVisible,this.modelVisible=fn,Cn&&(Cn.visible=fn))}})},"./src/constants/index.js":(St,Gt,vt)=>{St.exports={AFRAME_CDN_ROOT:window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:vt("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":St=>{St.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(St,Gt,vt)=>{var it=vt("./src/core/a-node.js").ANode,dt=vt("./src/utils/debug.js"),bt=vt("./src/lib/three.js"),Tt=new bt.FileLoader,Et=dt("core:a-assets:warn");class Mt extends it{constructor(){super(),this.isAssets=!0,this.fileLoader=Tt,this.timeout=null}doConnectedCallback(){var Ut=this,Xt,Qt=[],tn,on,vn,fn,Cn,dn;if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(fn=this.querySelectorAll("img"),Xt=0;Xt<fn.length;Xt++)vn=mt(fn[Xt]),Qt.push(new Promise(function(An,nn){if(bt.Cache.add(fn[Xt].getAttribute("src"),vn),vn.complete){An();return}vn.onload=An,vn.onerror=nn}));for(on=this.querySelectorAll("audio, video"),Xt=0;Xt<on.length;Xt++)tn=mt(on[Xt]),!tn.src&&!tn.srcObject&&Et("Audio/video asset has neither `src` nor `srcObject` attributes."),Qt.push(pt(tn));dn=this.getChildren(),dn.forEach(function(An){!An.isAssetItem||!An.hasAttribute("src")||Qt.push(new Promise(function(Zt,mn){if(An.hasLoaded)return Zt();An.addEventListener("loaded",Zt),An.addEventListener("error",mn)}))}),Promise.allSettled(Qt).then(function(){Ut.timeout!==null&&Ut.load()}),Cn=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){Ut.hasLoaded||(Et("Asset loading timed out in",Cn,"ms"),Ut.timeout=null,Ut.emit("timeout"),Ut.load())},Cn)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}customElements.define("a-assets",Mt);class Rt extends it{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var Ut=this,Xt=this.getAttribute("src");Tt.setResponseType(this.getAttribute("response-type")||xt(Xt)),Tt.load(Xt,function(tn){Ut.data=tn,it.prototype.load.call(Ut)},function(tn){Ut.emit("progress",{loadedBytes:tn.loaded,totalBytes:tn.total,xhr:tn})},function(tn){Ut.emit("error",{xhr:tn})})}}customElements.define("a-asset-item",Rt);function pt(Ht){if(!(!Ht.hasAttribute("autoplay")&&Ht.getAttribute("preload")!=="auto"))return new Promise(function(Ut,Xt){if(Ht.readyState===4)return Ut();if(Ht.error)return Xt();Ht.addEventListener("loadeddata",Qt,!1),Ht.addEventListener("progress",Qt,!1),Ht.addEventListener("error",Xt,!1);function Qt(){for(var tn=0,on=0;on<Ht.buffered.length;on++)tn+=Ht.buffered.end(on)-Ht.buffered.start(on);tn>=Ht.duration&&(Ht.tagName==="VIDEO"&&bt.Cache.add(Ht.getAttribute("src"),Ht),Ut())}})}function mt(Ht){var Ut=gt(Ht);return Ut.tagName&&Ut.tagName.toLowerCase()==="video"&&(Ut.setAttribute("playsinline",""),Ut.setAttribute("webkit-playsinline","")),Ut!==Ht&&(Ht.parentNode.appendChild(Ut),Ht.parentNode.removeChild(Ht)),Ut}function gt(Ht){var Ut,Xt;return Ht.hasAttribute("crossorigin")||(Xt=Ht.getAttribute("src"),Xt!==null&&(Xt.indexOf("://")===-1||Ct(Xt)===window.location.host))?Ht:(Et('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',Xt),Ht.crossOrigin="anonymous",Ut=Ht.cloneNode(!0),Ut)}function Ct(Ht){var Ut=Ht.indexOf("://")>-1?Ht.split("/")[2]:Ht.split("/")[0];return Ut.substring(0,Ut.indexOf(":"))}function xt(Ht){var Ut=Dt(Ht),Xt=Ut.lastIndexOf(".");if(Xt>=0){var Qt=Ut.slice(Xt,Ht.search(/\?|#|$/));if(Qt===".glb")return"arraybuffer"}return"text"}St.exports.inferResponseType=xt;function Dt(Ht){var Ut=document.createElement("a");Ut.href=Ht;var Xt=Ut.search.replace(/^\?/,""),Qt=Ht.replace(Xt,"").replace("?","");return Qt.substring(Qt.lastIndexOf("/")+1)}St.exports.getFileNameFromURL=Dt},"./src/core/a-cubemap.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=it("core:cubemap:warn");class bt extends HTMLElement{constructor(Et){return Et=super(Et),Et}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}bt.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var Et=this.querySelectorAll("[src]"),Mt,Rt=[];if(Et.length===6){for(Mt=0;Mt<Et.length;Mt++)Et[Mt].tagName==="IMG"?Rt.push(Et[Mt]):Rt.push(Et[Mt].getAttribute("src"));return Rt}dt("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",bt)},"./src/core/a-entity.js":(St,Gt,vt)=>{var it=vt("./src/core/a-node.js").ANode,dt=vt("./src/core/component.js").components,bt=vt("./src/lib/three.js"),Tt=vt("./src/utils/index.js"),Et=Tt.debug("core:a-entity:debug"),Mt=Tt.debug("core:a-entity:warn"),Rt="__",pt=["position","rotation","scale","visible"],mt={once:!0};class gt extends it{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new bt.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(Qt,tn,on){var vn=this.components[Qt];if(super.attributeChangedCallback(),vn&&vn.justInitialized&&on===""){delete vn.justInitialized;return}!vn&&on===null||this.setEntityAttribute(Qt,tn,on)}doConnectedCallback(){var Qt=this,tn,on;if(super.doConnectedCallback(),on=this.sceneEl,this.addToParent(),!this.isScene){if(!on){this.load();return}if(tn=on.querySelector("a-assets"),tn&&!tn.hasLoaded){tn.addEventListener("loaded",function(){Qt.load()});return}this.load()}}disconnectedCallback(){var Qt;if(this.parentEl){for(Qt in this.components)this.removeComponent(Qt,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(Qt){return this.object3DMap[Qt]}setObject3D(Qt,tn){var on,vn=this;if(!(tn instanceof bt.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");on=this.getObject3D(Qt),on&&this.object3D.remove(on),tn.el=this,tn.children.length&&tn.traverse(function(Cn){Cn.el=vn}),this.object3D.add(tn),this.object3DMap[Qt]=tn,this.emit("object3dset",{object:tn,type:Qt})}removeObject3D(Qt){var tn=this.getObject3D(Qt);if(!tn){Mt("Tried to remove `Object3D` of type:",Qt,"which was not defined.");return}this.object3D.remove(tn),delete this.object3DMap[Qt],this.emit("object3dremove",{type:Qt})}getOrCreateObject3D(Qt,tn){var on=this.getObject3D(Qt);return!on&&tn&&(on=new tn,this.setObject3D(Qt,on)),Mt("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),on}add(Qt){if(!Qt.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(Qt.object3D),this.emit("child-attached",{el:Qt})}addToParent(){var Qt=this.parentEl=this.parentNode;!Qt||!Qt.add||this.attachedToParent||(Qt.add(this),this.attachedToParent=!0)}removeFromParent(){var Qt=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,Qt.emit("child-detached",{el:this})}load(){var Qt=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){Qt.parentEl&&(Qt.updateComponents(),(Qt.isScene||Qt.parentEl.isPlaying)&&Qt.play())})}remove(Qt){Qt?this.object3D.remove(Qt.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var Qt=this.children,tn=[],on=0;on<Qt.length;on++){var vn=Qt[on];vn instanceof gt&&tn.push(vn)}return tn}initComponent(Qt,tn,on){var vn,fn,Cn,dn,An;Cn=Tt.split(Qt,Rt),dn=Cn[0],fn=Cn.length>2?Cn.slice(1).join("__"):Cn[1],dt[dn]&&(An=Ct(this,Qt)||tn!==void 0,!(!An&&!on)&&(Qt in this.components||(this.initComponentDependencies(dn),vn=new dt[dn].Component(this,tn,fn),this.isPlaying&&vn.play(),this.hasAttribute(Qt)||(vn.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,Qt,"")),Et("Component initialized: %s",Qt))))}initComponentDependencies(Qt){var tn=this,on=dt[Qt],vn,fn;if(on&&(vn=dt[Qt].dependencies,!!vn))for(fn=0;fn<vn.length;fn++)tn.initComponent(vn[fn],window.HTMLElement.prototype.getAttribute.call(tn,vn[fn])||void 0,!0)}removeComponent(Qt,tn){var on;if(on=this.components[Qt],!!on){if(!on.initialized){this.addEventListener("componentinitialized",function vn(fn){fn.detail.name===Qt&&(this.removeComponent(Qt,tn),this.removeEventListener("componentinitialized",vn))});return}on.pause(),on.remove(),tn&&(on.destroy(),delete this.components[Qt],this.hasAttribute(Qt)&&window.HTMLElement.prototype.removeAttribute.call(this,Qt)),this.emit("componentremoved",on.evtDetail,!1)}}updateComponents(){var Qt,tn,on,vn,fn=this.componentsToUpdate;if(!(!this.hasLoaded&&!this.isLoading)){for(on=0;on<this.mixinEls.length;on++)for(vn in this.mixinEls[on].componentCache)Ht(vn)&&(fn[vn]=!0);if(this.getExtraComponents){tn=this.getExtraComponents();for(vn in tn)Ht(vn)&&(fn[vn]=!0)}for(on=0;on<this.attributes.length;++on)vn=this.attributes[on].name,pt.indexOf(vn)===-1&&Ht(vn)&&(fn[vn]=!0);for(on=0;on<pt.length;on++)vn=pt[on],this.hasAttribute(vn)&&this.updateComponent(vn,this.getDOMAttribute(vn));for(vn in fn)Qt=Dt(this.getDOMAttribute(vn),tn&&tn[vn]),this.updateComponent(vn,Qt),delete fn[vn]}}updateComponent(Qt,tn,on){var vn=this.components[Qt];if(vn){if(tn===null&&!Ct(this,Qt)){this.removeComponent(Qt,!0);return}vn.updateProperties(tn,on);return}this.initComponent(Qt,tn,!1)}removeAttribute(Qt,tn){var on=this.components[Qt];if(on&&tn===void 0&&this.removeComponent(Qt,!0),on&&tn!==void 0){on.resetProperty(tn);return}Qt==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,Qt)}play(){var Qt,tn,on;if(!(this.isPlaying||!this.hasLoaded&&!this.isLoading)){this.isPlaying=!0;for(on in this.components)this.components[on].play();for(Qt=this.getChildEntities(),tn=0;tn<Qt.length;tn++)Qt[tn].play();this.emit("play")}}pause(){var Qt,tn,on;if(this.isPlaying){this.isPlaying=!1;for(on in this.components)this.components[on].pause();for(Qt=this.getChildEntities(),tn=0;tn<Qt.length;tn++)Qt[tn].pause();this.emit("pause")}}setEntityAttribute(Qt,tn,on){if(dt[Qt]||this.components[Qt]){this.updateComponent(Qt,on);return}if(Qt==="mixin"){if(on===this.computedMixinStr)return;this.mixinUpdate(on,tn)}}mixinUpdate(Qt,tn,on){var vn=gt.componentsUpdated,fn,Cn,dn,An,nn=this;if(on||(tn=tn||this.getAttribute("mixin")),!this.hasLoaded){this.addEventListener("loaded-private",function(){nn.mixinUpdate(Qt,tn,!0)},mt);return}for(dn=this.updateMixins(Qt,tn),vn.length=0,An=0;An<this.mixinEls.length;An++)for(fn in this.mixinEls[An].componentCache)vn.indexOf(fn)===-1&&(this.components[fn]?this.components[fn].handleMixinUpdate():this.initComponent(fn,null),vn.push(fn));for(An=0;An<dn.oldMixinIds.length;An++)if(Cn=document.getElementById(dn.oldMixinIds[An]),!!Cn)for(fn in Cn.componentCache)vn.indexOf(fn)===-1&&this.components[fn]&&(this.getDOMAttribute(fn)?this.components[fn].handleMixinUpdate():this.removeComponent(fn,!0))}setAttribute(Qt,tn,on){var vn=gt.singlePropUpdate,fn,Cn,dn,An,nn,Zt;if(An=Qt.indexOf(Rt),dn=An>0?Qt.substring(0,An):Qt,!dt[dn]){Qt==="mixin"&&this.mixinUpdate(tn),super.setAttribute.call(this,Qt,tn);return}if(!this.components[Qt]&&this.hasAttribute(Qt)&&this.updateComponent(Qt,window.HTMLElement.prototype.getAttribute.call(this,Qt)),typeof on<"u"&&typeof tn=="string"&&tn.length>0&&typeof Tt.styleParser.parse(tn)=="string"){for(Zt in vn)delete vn[Zt];fn=vn,fn[tn]=on,Cn=!1}else fn=tn,Cn=on===!0;this.updateComponent(Qt,fn,Cn),nn=this.sceneEl&&this.sceneEl.getAttribute("debug"),nn&&this.components[Qt].flushToDOM()}flushToDOM(Qt){var tn=this.components,on,vn=this.children,fn,Cn;for(Cn in tn)tn[Cn].flushToDOM();if(Qt)for(fn=0;fn<vn.length;++fn)on=vn[fn],on.flushToDOM&&on.flushToDOM(Qt)}getAttribute(Qt){var tn;return Qt==="position"?this.object3D.position:Qt==="rotation"?Ut(this):Qt==="scale"?this.object3D.scale:Qt==="visible"?this.object3D.visible:(tn=this.components[Qt],tn?tn.data:window.HTMLElement.prototype.getAttribute.call(this,Qt))}getDOMAttribute(Qt){var tn=this.components[Qt];return tn?tn.attrValue:window.HTMLElement.prototype.getAttribute.call(this,Qt)}addState(Qt){this.is(Qt)||(this.states.push(Qt),this.emit("stateadded",Qt))}removeState(Qt){var tn=this.states.indexOf(Qt);tn!==-1&&(this.states.splice(tn,1),this.emit("stateremoved",Qt))}is(Qt){return this.states.indexOf(Qt)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var Qt;if(this.parentNode){Mt("Entity can only be destroyed if detached from scenegraph.");return}for(Qt in this.components)this.components[Qt].destroy()}}function Ct(Xt,Qt){return Xt.components[Qt]&&Xt.components[Qt].attrValue?!0:xt(Qt,Xt.mixinEls)}function xt(Xt,Qt){var tn,on=!1;for(tn=0;tn<Qt.length&&(on=Qt[tn].hasAttribute(Xt),!on);++tn);return on}function Dt(Xt,Qt){return Qt?Qt.constructor===Object?Tt.extend(Qt,Tt.styleParser.parse(Xt||{})):Xt||Qt:Xt}function Ht(Xt){return Xt.indexOf(Rt)!==-1&&(Xt=Tt.split(Xt,Rt)[0]),!!dt[Xt]}function Ut(Xt){var Qt=bt.MathUtils.radToDeg,tn=Xt.object3D.rotation,on=Xt.rotationObj;return on.x=Qt(tn.x),on.y=Qt(tn.y),on.z=Qt(tn.z),on}gt.componentsUpdated=[],gt.singlePropUpdate={},customElements.define("a-entity",gt),St.exports.AEntity=gt},"./src/core/a-mixin.js":(St,Gt,vt)=>{var it=vt("./src/core/a-node.js").ANode,dt=vt("./src/core/component.js").components,bt=vt("./src/utils/index.js"),Tt=bt.styleParser,Et="__";class Mt extends it{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(pt,mt,gt){super.attributeChangedCallback(),this.cacheAttribute(pt,gt),this.updateEntities()}setAttribute(pt,mt){window.HTMLElement.prototype.setAttribute.call(this,pt,mt),this.cacheAttribute(pt,mt)}cacheAttribute(pt,mt){var gt,Ct;Ct=bt.split(pt,Et)[0],gt=dt[Ct],mt===void 0&&(mt=window.HTMLElement.prototype.getAttribute.call(this,pt)),this.rawAttributeCache[pt]=mt,gt&&(this.componentCache[pt]=this.parseComponentAttrValue(gt,mt))}parseComponentAttrValue(pt,mt){var gt;return typeof mt!="string"?mt:(pt.isSingleProperty?(gt=pt.schema.parse(mt),typeof gt=="string"&&(gt=mt)):gt=Tt.parse(mt),gt)}getAttribute(pt){return this.componentCache[pt]||window.HTMLElement.prototype.getAttribute.call(this,pt)}cacheAttributes(){var pt=this.attributes,mt,gt;for(gt=0;gt<pt.length;gt++)mt=pt[gt].name,this.cacheAttribute(mt)}updateEntities(){var pt,mt,gt;if(this.sceneEl)for(mt=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),gt=0;gt<mt.length;gt++)pt=mt[gt],!(!pt.hasLoaded||pt.isMixin)&&pt.mixinUpdate(this.id)}}customElements.define("a-mixin",Mt)},"./src/core/a-node.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js"),dt=vt("./src/core/readyState.js"),bt=it.debug("core:a-node:warn"),Tt={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function Et(Rt){return Rt.tagName.toLowerCase()in Tt||Rt.isNode}class Mt extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}connectedCallback(){if(!dt.canInitializeElements){document.addEventListener("aframeready",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var pt;this.sceneEl=this.closestScene(),this.sceneEl||bt("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(pt=this.getAttribute("mixin"),pt&&this.updateMixins(pt))}attributeChangedCallback(pt,mt,gt){gt!==this.computedMixinStr&&pt==="mixin"&&!this.isMixin&&this.updateMixins(gt,mt)}closestScene(){for(var pt=this;pt&&!pt.isScene;)pt=pt.parentElement;return pt}closest(pt){for(var mt=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,gt=this;gt&&!mt.call(gt,pt);)gt=gt.parentElement;return gt}disconnectedCallback(){this.hasLoaded=!1}load(pt,mt){var gt,Ct,xt=this;this.hasLoaded||(mt=mt||Et,gt=this.getChildren(),Ct=gt.filter(mt).map(function(Dt){return new Promise(function(Ut,Xt){if(Dt.hasLoaded)return Ut();Dt.addEventListener("loaded",Ut),Dt.addEventListener("error",Xt)})}),Promise.allSettled(Ct).then(function(Ht){Ht.forEach(function(Xt){Xt.status==="rejected"&&bt("Rendering scene with errors on node: ",Xt.reason.target)}),xt.isLoading=!0,xt.setupMutationObserver(),pt&&pt(),xt.isLoading=!1,xt.hasLoaded=!0,xt.emit("loaded-private",void 0,!1),xt.emit("loaded",void 0,!1)}))}setupMutationObserver(){var pt=this,mt={attributes:!0,attributeOldValue:!0},gt=new MutationObserver(function(xt){var Dt;for(Dt=0;Dt<xt.length;Dt++)if(xt[Dt].type==="attributes"){var Ht=xt[Dt].attributeName,Ut=window.HTMLElement.prototype.getAttribute.call(pt,Ht),Xt=xt[Dt].oldValue;pt.attributeChangedCallback(Ht,Xt,Ut)}});gt.observe(this,mt)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(pt,mt){var gt=Mt.newMixinIdArray,Ct=Mt.oldMixinIdArray,xt=Mt.mixinIds,Dt,Ht,Ut;for(gt.length=0,Ct.length=0,Ht=pt?it.split(pt.trim(),/\s+/):gt,Ut=mt?it.split(mt.trim(),/\s+/):Ct,xt.newMixinIds=Ht,xt.oldMixinIds=Ut,Dt=0;Dt<Ut.length;Dt++)Ht.indexOf(Ut[Dt])===-1&&this.unregisterMixin(Ut[Dt]);for(this.computedMixinStr="",this.mixinEls.length=0,Dt=0;Dt<Ht.length;Dt++)this.registerMixin(Ht[Dt]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),Ht.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),xt}registerMixin(pt){var mt,gt,Ct,xt=document.getElementById(pt);if(!xt){bt("No mixin was found with id `%s`",pt);return}if(Ct=xt.getAttribute("mixin"),Ct)for(mt=it.split(Ct.trim(),/\s+/),gt=0;gt<mt.length;gt++)this.registerMixin(mt[gt]);this.computedMixinStr=this.computedMixinStr+" "+xt.id,this.mixinEls.push(xt)}setAttribute(pt,mt){pt==="mixin"&&this.updateMixins(mt),window.HTMLElement.prototype.setAttribute.call(this,pt,mt)}unregisterMixin(pt){var mt,gt=this.mixinEls,Ct;for(mt=0;mt<gt.length;++mt)if(Ct=gt[mt],pt===Ct.id){gt.splice(mt,1);break}}emit(pt,mt,gt,Ct){var xt=Mt.evtData;gt===void 0&&(gt=!0),xt.bubbles=!!gt,xt.detail=mt,Ct&&(xt=it.extend({},Ct,xt)),this.dispatchEvent(new CustomEvent(pt,xt))}}Mt.evtData={},Mt.newMixinIdArray=[],Mt.oldMixinIdArray=[],Mt.mixinIds={},customElements.define("a-node",Mt),St.exports.ANode=Mt,St.exports.knownTags=Tt},"./src/core/component.js":(St,Gt,vt)=>{var it=vt("./src/core/schema.js"),dt=vt("./src/core/scene/scenes.js"),bt=vt("./src/core/system.js"),Tt=vt("./src/utils/index.js"),Et=St.exports.components={},Mt=it.parseProperty,Rt=it.process,pt=it.isSingleProperty,mt=it.stringifyProperties,gt=it.stringifyProperty,Ct=Tt.styleParser,xt=Tt.debug("core:component:warn"),Dt=document.currentScript,Ht=new RegExp("[A-Z]+"),Ut={},Xt=Object.freeze({}),Qt=[],tn={get:function(Zt,mn){return Zt.getComputedPropertyValue(mn)},set:function(Zt,mn,gn){return mn in Zt.schema?Zt.recomputeProperty(mn,gn):gn!==void 0&&Zt.handleUnknownProperty(mn,gn),!0}},on=St.exports.Component=function(Zt,mn,gn){var In=this;if(this.sceneOnly&&!Zt.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(gn&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=Zt,this.id=gn,this.attrName=this.name+(gn?"__"+gn:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=Ut[this.name];var Vn=this.events;this.events={},vn(this,Vn),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),Tt.objectPool.removeUnusedKeys(this.data,this.schema),this.oldData=this.objectPool.use(),Tt.objectPool.removeUnusedKeys(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,tn)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.silenceUnknownPropertyWarnings=!1,this.throttledEmitComponentChanged=Tt.throttleLeadingAndTrailing(function(){Zt.emit("componentchanged",In.evtDetail,!1)},200),this.updateProperties(mn,!0)};on.prototype={schema:{},init:function(){},events:{},update:function(Zt){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(Zt){var mn=this.schema;return typeof Zt=="string"?Zt:this.isSingleProperty?gt(Zt,mn):(Zt=mt(Zt,mn),Ct.stringify(Zt))},flushToDOM:function(Zt){var mn=Zt?this.data:this.attrValue;mn!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(mn))},updateProperties:function(Zt,mn){var gn=this.el;this.updateData(Zt,mn),!(!gn.hasLoaded&&!gn.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var Zt=this.el,mn;Zt.initializingComponents[this.name]||(Zt.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete Zt.initializingComponents[this.name],mn=this.isObjectBased?Xt:void 0,this.dataChanged=!1,this.storeOldData(),this.update(mn),Zt.isPlaying&&this.play(),Zt.emit("componentinitialized",this.evtDetail,!1))},updateData:function(Zt,mn){if(this.isSingleProperty){this.recomputeProperty(void 0,Zt);return}mn?(Tt.objectPool.clearObject(this.attrValue),this.recomputeData(Zt),this.schemaChangeRequired=!!this.updateSchema):typeof Zt=="string"?Ct.parse(Zt,this.attrValueProxy):Tt.extend(this.attrValueProxy,Zt),this.updateSchemaIfNeeded(Zt)},updateSchemaIfNeeded:function(Zt){if(!this.schemaChangeRequired||!this.updateSchema){for(var mn=0;mn<Qt.length;mn++)xt("Unknown property `"+Qt[mn]+"` for component `"+this.name+"`.");Qt.length=0;return}Qt.length=0,this.updateSchema(this.data),Tt.objectPool.removeUnusedKeys(this.data,this.schema),this.silenceUnknownPropertyWarnings=!0,this.recomputeData(Zt),this.silenceUnknownPropertyWarnings=!1,this.schemaChangeRequired=!1},callUpdateHandler:function(){if(!(!this.isPositionRotationScale&&!this.dataChanged)){this.dataChanged=!1;var Zt=this.oldData;this.oldDataInUse=!0,this.update(Zt),Zt!==this.oldData&&this.objectPool.recycle(Zt),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(Zt){!this.isSingleProperty&&!(Zt in this.schema)||(Zt?this.attrValue[Zt]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(Zt,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(Zt){var mn;mn=Tt.extend({},Et[this.name].schema),Tt.extend(mn,Zt),this.schema=Rt(mn),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(Zt){var mn=this.el.mixinEls,gn=this.attrValue&&Zt?this.attrValue[Zt]:this.attrValue;if(gn!==void 0)return gn;for(var In=mn.length-1;In>=0;In--){var Vn=mn[In].getAttribute(this.attrName);if(!(Vn===null||Zt&&!(Zt in Vn)))return Zt?Vn[Zt]:Vn}var Zn=Zt?this.schema[Zt].default:this.schema.default;return Zn},recomputeProperty:function(Zt,mn){var gn=Zt?this.schema[Zt]:this.schema;if(mn!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var In=Zt?this.attrValue[Zt]:this.attrValue;In=gn.isCacheable?Mt(mn,gn,In):mn,typeof In=="string"&&(In=mn===""?void 0:mn),Zt?this.attrValue[Zt]=In:this.attrValue=In}this.oldDataInUse&&(this.oldData=this.objectPool.use(),Tt.objectPool.removeUnusedKeys(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var Vn=Zt?this.oldData[Zt]:this.oldData,Zn=Zt?this.data[Zt]:this.data,lr=Mt(this.getComputedPropertyValue(Zt),gn,Zn);return gn.type==="array"&&!Zt&&(lr=Tt.clone(lr)),gn.equals(lr,Vn)||(this.dataChanged=!0,gn.schemaChange&&(this.schemaChangeRequired=!0)),Zt?this.data[Zt]=lr:this.data=lr,lr},handleUnknownProperty:function(Zt,mn){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[Zt]=mn,this.silenceUnknownPropertyWarnings||(this.deferUnknownPropertyWarnings?Qt.push(Zt):this.silenceUnknownPropertyWarnings||xt("Unknown property `"+Zt+"` for component `"+this.name+"`."))},storeOldData:function(){if(!this.isObjectBased){this.oldData=this.data;return}if(this.isSingleProperty){this.oldData=Mt(this.data,this.schema,this.oldData);return}var Zt;for(Zt in this.schema)this.data[Zt]!==void 0&&(this.data[Zt]&&typeof this.data[Zt]=="object"?this.oldData[Zt]=Mt(this.data[Zt],this.schema[Zt],this.oldData[Zt]):this.oldData[Zt]=this.data[Zt])},recomputeData:function(Zt){var mn;if(this.isSingleProperty){this.recomputeProperty(void 0,Zt);return}if(Zt&&typeof Zt=="object")for(mn in this.schema)this.attrValueProxy[mn]=Zt[mn];else for(mn in this.schema)this.attrValueProxy[mn]=void 0;typeof Zt=="string"&&Ct.parse(Zt,this.attrValueProxy);for(mn in this.attrValue)this.attrValue[mn]!==void 0&&Qt.indexOf(mn)!==-1&&(mn in this.schema||xt("Unknown property `"+mn+"` for component `"+this.name+"`."))},eventsAttach:function(){var Zt;this.eventsDetach();for(Zt in this.events)this.el.addEventListener(Zt,this.events[Zt])},eventsDetach:function(){var Zt;for(Zt in this.events)this.el.removeEventListener(Zt,this.events[Zt])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};function vn(Zt,mn){var gn;for(gn in mn)Zt.events[gn]=mn[gn].bind(Zt)}if(window.debug)var fn=St.exports.registrationOrderWarnings={};St.exports.registerComponent=function(Zt,mn){var gn,In={},Vn,Zn;if(document.currentScript&&document.currentScript!==Dt&&dt.forEach(function(Lr){Lr.hasLoaded||document.currentScript.compareDocumentPosition(Lr)!==Node.DOCUMENT_POSITION_FOLLOWING&&(xt("The component `"+Zt+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(fn[Zt]=!0))}),Ht.test(Zt)===!0&&xt("The component name `"+Zt+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+Zt.toLowerCase()+"`"),Zt.indexOf("__")!==-1)throw new Error("The component name `"+Zt+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(mn).forEach(function(hr){In[hr]={value:mn[hr],writable:!0}}),Et[Zt])throw new Error("The component `"+Zt+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");gn=function(hr,Lr,Tr){on.call(this,hr,Lr,Tr)},gn.prototype=Object.create(on.prototype,In),gn.prototype.name=Zt,gn.prototype.isPositionRotationScale=Zt==="position"||Zt==="rotation"||Zt==="scale",gn.prototype.constructor=gn,gn.prototype.system=bt&&bt.systems[Zt],gn.prototype.play=An(gn.prototype.play),gn.prototype.pause=dn(gn.prototype.pause),Vn=Tt.extend(Rt(gn.prototype.schema,gn.prototype.name)),gn.prototype.isSingleProperty=Zn=pt(gn.prototype.schema),gn.prototype.isObjectBased=!Zn||Zn&&(nn(Vn.default)||nn(Mt(void 0,Vn))),Ut[Zt]=Tt.objectPool.createPool(),Et[Zt]={Component:gn,dependencies:gn.prototype.dependencies,before:gn.prototype.before,after:gn.prototype.after,isSingleProperty:gn.prototype.isSingleProperty,isObjectBased:gn.prototype.isObjectBased,multiple:gn.prototype.multiple,sceneOnly:gn.prototype.sceneOnly,name:Zt,schema:Vn,stringify:gn.prototype.stringify};for(var lr=0;lr<dt.length;lr++)dt[lr].emit("componentregistered",{name:Zt},!1);return gn};function Cn(Zt){return Zt.tick||Zt.tock}function dn(Zt){return function(){var gn=this.el.sceneEl;this.isPlaying&&(Zt.call(this),this.isPlaying=!1,this.eventsDetach(),Cn(this)&&gn.removeBehavior(this))}}function An(Zt){return function(){var gn=this.el.sceneEl,In=this.el.isPlaying&&!this.isPlaying;!this.initialized||!In||(Zt.call(this),this.isPlaying=!0,this.eventsAttach(),Cn(this)&&gn.addBehavior(this))}}function nn(Zt){return Zt&&Zt.constructor===Object&&!(Zt instanceof window.HTMLElement)}},"./src/core/geometry.js":(St,Gt,vt)=>{var it=vt("./src/core/schema.js"),dt=it.process,bt=St.exports.geometries={},Tt=St.exports.geometryNames=[],Et=vt("./src/lib/three.js"),Mt=St.exports.Geometry=function(){};Mt.prototype={schema:{},init:function(Rt){return this.geometry=new Et.BufferGeometry,this.geometry},update:function(Rt){}},St.exports.registerGeometry=function(Rt,pt){var mt,gt={};if(Object.keys(pt).forEach(function(xt){gt[xt]={value:pt[xt],writable:!0}}),bt[Rt])throw new Error("The geometry `"+Rt+"` has been already registered");return mt=function(){Mt.call(this)},mt.prototype=Object.create(Mt.prototype,gt),mt.prototype.name=Rt,mt.prototype.constructor=mt,bt[Rt]={Geometry:mt,schema:dt(mt.prototype.schema)},Tt.push(Rt),mt}},"./src/core/propertyTypes.js":(St,Gt,vt)=>{var it=vt("./src/utils/coordinates.js"),dt=vt("./node_modules/debug/src/browser.js"),bt=dt("core:propertyTypes:warn"),Tt=St.exports.propertyTypes={},Et=/[,> .[\]:]/,Mt=/url\((.+)\)/;Rt("audio","",Ct),Rt("array",[],pt,mt,gt),Rt("asset","",Ct),Rt("boolean",!1,Ut),Rt("color","#FFF"),Rt("int",0,Xt),Rt("number",0,Qt),Rt("map","",Ct),Rt("model","",Ct),Rt("selector",null,tn,vn,Ht,!1),Rt("selectorAll",null,on,fn,gt,!1),Rt("src","",Cn),Rt("string",""),Rt("time",0,Xt),Rt("vec2",{x:0,y:0},dn,it.stringify,it.equals),Rt("vec3",{x:0,y:0,z:0},dn,it.stringify,it.equals),Rt("vec4",{x:0,y:0,z:0,w:1},dn,it.stringify,it.equals);function Rt(Zt,mn,gn,In,Vn,Zn){if(Zt in Tt)throw new Error("Property type "+Zt+" is already registered.");Tt[Zt]={default:mn,parse:gn||xt,stringify:In||Dt,equals:Vn||Ht,isCacheable:Zn!==!1}}St.exports.registerPropertyType=Rt;function pt(Zt){if(Array.isArray(Zt))return Zt;if(!Zt||typeof Zt!="string")return[];return Zt.split(",").map(mn);function mn(gn){return gn.trim()}}function mt(Zt){return Zt.join(", ")}function gt(Zt,mn){if(!Array.isArray(Zt)||!Array.isArray(mn))return Zt===mn;if(Zt.length!==mn.length)return!1;for(var gn=0;gn<Zt.length;gn++)if(Zt[gn]!==mn[gn])return!1;return!0}function Ct(Zt){var mn,gn;if(typeof Zt!="string")return Zt;if(gn=Zt.match(Mt),gn)return gn[1];if(Zt.charAt(0)==="#"){if(mn=document.getElementById(Zt.substring(1)),mn)return mn.tagName==="CANVAS"||mn.tagName==="VIDEO"||mn.tagName==="IMG"?mn:mn.getAttribute("src");bt('"'+Zt+'" asset not found.');return}return Zt}function xt(Zt){return Zt}function Dt(Zt){return Zt===null?"null":Zt.toString()}function Ht(Zt,mn){return Zt===mn}function Ut(Zt){return Zt!=="false"&&Zt!==!1}function Xt(Zt){return parseInt(Zt,10)}function Qt(Zt){return parseFloat(Zt,10)}function tn(Zt){return Zt?typeof Zt!="string"?Zt:Zt[0]==="#"&&!Et.test(Zt)?document.getElementById(Zt.substring(1)):document.querySelector(Zt):null}function on(Zt){return Zt?typeof Zt!="string"?Zt:Array.prototype.slice.call(document.querySelectorAll(Zt),0):null}function vn(Zt){return Zt.getAttribute?"#"+Zt.getAttribute("id"):Dt(Zt)}function fn(Zt){return Zt instanceof Array?Zt.map(function(mn){return"#"+mn.getAttribute("id")}).join(", "):Dt(Zt)}function Cn(Zt){return bt("`src` property type is deprecated. Use `asset` instead."),Ct(Zt)}function dn(Zt,mn,gn){return it.parse(Zt,mn,gn)}function An(Zt,mn){return Zt==="audio"&&typeof mn!="string"||Zt==="array"&&!Array.isArray(mn)||Zt==="asset"&&typeof mn!="string"||Zt==="boolean"&&typeof mn!="boolean"||Zt==="color"&&typeof mn!="string"||Zt==="int"&&typeof mn!="number"||Zt==="number"&&typeof mn!="number"||Zt==="map"&&typeof mn!="string"||Zt==="model"&&typeof mn!="string"||Zt==="selector"&&typeof mn!="string"&&mn!==null||Zt==="selectorAll"&&typeof mn!="string"&&mn!==null||Zt==="src"&&typeof mn!="string"||Zt==="string"&&typeof mn!="string"||Zt==="time"&&typeof mn!="number"?!1:Zt==="vec2"?nn(mn,2):Zt==="vec3"?nn(mn,3):Zt==="vec4"?nn(mn,4):!0}St.exports.isValidDefaultValue=An;function nn(Zt,mn){if(Zt===null)return!0;if(typeof Zt!="object"||Object.keys(Zt).length!==mn)return!1;var gn=Zt.x,In=Zt.y,Vn=Zt.z,Zn=Zt.w;return!(typeof gn!="number"||typeof In!="number"||mn>2&&typeof Vn!="number"||mn>3&&typeof Zn!="number")}St.exports.isValidDefaultCoordinate=nn},"./src/core/readyState.js":St=>{St.exports.canInitializeElements=!1;function Gt(){if(document.readyState==="complete"){vt();return}document.addEventListener("readystatechange",function it(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",it),vt())})}St.exports.waitForDocumentReadyState=Gt;function vt(){St.exports.canInitializeElements||(St.exports.canInitializeElements=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}St.exports.emitReady=vt},"./src/core/scene/a-scene.js":(St,Gt,vt)=>{var it=vt("./src/core/scene/metaTags.js").inject,dt=vt("./src/core/scene/wakelock.js"),bt=vt("./src/core/scene/loadingScreen.js"),Tt=vt("./src/core/scene/scenes.js"),Et=vt("./src/core/system.js").systems,Mt=vt("./src/core/component.js").components,Rt=vt("./src/lib/three.js"),pt=vt("./src/utils/index.js"),mt=pt.debug("core:a-scene:warn"),gt=vt("./src/core/a-entity.js").AEntity,Ct=vt("./src/core/a-node.js").ANode,xt=vt("./src/core/scene/postMessage.js"),Dt=pt.device.isIOS(),Ht=pt.device.isMobile(),Ut=pt.device.isWebXRAvailable;Dt&&vt("./src/utils/ios-orientationchange-blank-bug.js");class Xt extends gt{constructor(){var nn;super(),nn=this,nn.clock=new Rt.Clock,nn.isIOS=Dt,nn.isMobile=Ht,nn.hasWebXR=Ut,nn.isAR=!1,nn.isScene=!0,nn.object3D=new Rt.Scene,nn.object3D.onAfterRender=function(Zt,mn,gn){nn.isPlaying&&nn.tock(nn.time,nn.delta,gn)},nn.resize=nn.resize.bind(nn),nn.render=nn.render.bind(nn),nn.systems={},nn.systemNames=[],nn.time=nn.delta=0,nn.usedOfferSession=!1,nn.componentOrder=[],nn.behaviors={},nn.hasLoaded=!1,nn.isPlaying=!1,nn.originalHTML=nn.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var nn=this,Zt=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),dn(this),this.setupRenderer(),bt.setup(this,on),this.resize(),Zt||this.addFullScreenStyles(),xt(this),it(this),dt(this),this.onVRPresentChangeBound=this.onVRPresentChange.bind(this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){nn.enterVR()},this.exitVRBound=function(){nn.exitVR()},this.exitVRTrueBound=function(){nn.exitVR(!0)},this.pointerRestrictedBound=function(){nn.pointerRestricted()},this.pointerUnrestrictedBound=function(){nn.pointerUnrestricted()},nn.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){nn.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=Qt(Mt,this.componentOrder),this.addEventListener("componentregistered",function(){nn.componentOrder=Qt(Mt,nn.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){nn.enterVR()})}attachedCallbackPostCamera(){var nn,Zt=this;window.addEventListener("load",nn),window.addEventListener("resize",function(){Zt.isIOS?setTimeout(Zt.resize,100):Zt.resize()}),this.play(),Tt.push(this)}initSystems(){var nn;this.initSystem("camera");for(nn in Et)nn!=="camera"&&this.initSystem(nn)}initSystem(nn){this.systems[nn]||(this.systems[nn]=new Et[nn](this),this.systemNames.push(nn))}disconnectedCallback(){var nn=Tt.indexOf(this);super.disconnectedCallback(),Tt.splice(nn,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(nn){var Zt,mn=this.behaviors[nn.name],gn;mn||(mn=this.behaviors[nn.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}});for(gn in mn)if(nn[gn]){if(Zt=mn[gn],Zt.inUse){var In=Zt.markedForRemoval.indexOf(nn);In!==-1&&Zt.markedForRemoval.splice(In,1)}Zt.array.indexOf(nn)===-1&&Zt.array.push(nn)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return pt.device.checkHeadsetConnected()}enterAR(){var nn;if(!this.hasWebXR)throw nn="Failed to enter AR mode, WebXR not supported.",new Error(nn);if(!pt.device.checkARSupport())throw nn="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(nn);return this.enterVR(!0)}enterVR(nn,Zt){var mn=this,gn,In=mn.renderer.xr,Vn;if(Zt&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(mn.usedOfferSession&&Zt)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var Zn=mn.getAttribute("renderer");if(In.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var lr=this.sceneEl.systems.webxr.sessionReferenceSpaceType;In.setReferenceSpaceType(lr);var hr=nn?"immersive-ar":"immersive-vr";return Vn=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(Yr,ms){var Rs=Zt?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);mn.usedOfferSession|=Zt,Rs(hr,Vn).then(function(ao){Zt&&(mn.usedOfferSession=!1),In.layersEnabled=Vn.requiredFeatures.indexOf("layers")!==-1,In.setSession(ao).then(function(){In.setFoveation(Zn.foveationLevel),mn.xrSession=ao,mn.systems.renderer.setWebXRFrameRate(ao),ao.addEventListener("end",mn.exitVRBound),Tr(Yr)})},function(ao){var go=hr==="immersive-ar",ho=go?"AR":"VR";ms(new Error("Failed to enter "+ho+" mode (`requestSession`)",{cause:ao}))})})}else{if(gn=pt.device.getVRDisplay(),In.setDevice(gn),gn.isPresenting&&!window.hasNativeWebVRImplementation)return Tr(),Promise.resolve();var Lr={highRefreshRate:Zn.highRefreshRate};return gn.requestPresent([{source:this.canvas,attributes:Lr}]).then(Tr,As)}}return Tr(),Promise.resolve();function Tr(Yr){var ms;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(ms=new CustomEvent("vrdisplaypresentchange",{detail:{display:pt.device.getVRDisplay()}}),window.dispatchEvent(ms)),nn?mn.addState("ar-mode"):mn.addState("vr-mode"),mn.emit("enter-vr",{target:mn}),!mn.hasWebXR&&mn.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),mn.addFullScreenStyles(),!mn.isMobile&&!mn.checkHeadsetConnected()&&fn(mn.canvas),mn.resize(),Yr&&Yr()}function As(Yr){throw mn.removeState("vr-mode"),Yr&&Yr.message?new Error("Failed to enter VR mode (`requestPresent`): "+Yr.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var nn=this,Zt,mn=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(mn.enabled=!1,Zt=pt.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(Zt.isPresenting)return Zt.exitPresent().then(gn,In)}else Cn();return gn(),Promise.resolve();function gn(){nn.removeState("vr-mode"),nn.removeState("ar-mode"),nn.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),nn.hasAttribute("embedded")&&nn.removeFullScreenStyles(),nn.resize(),nn.isIOS&&pt.forceCanvasResizeSafariMobile(nn.canvas),nn.renderer.setPixelRatio(window.devicePixelRatio),nn.emit("exit-vr",{target:nn})}function In(Vn){throw Vn&&Vn.message?new Error("Failed to exit VR mode (`exitPresent`): "+Vn.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var nn=this.getPointerLockElement();nn&&nn!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var nn=this.getPointerLockElement();nn&&nn===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(nn){var Zt=nn.display||nn.detail.display;if(Zt&&Zt.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(nn){var Zt=this.systems[nn];return Zt?Zt.data:gt.prototype.getAttribute.call(this,nn)}getDOMAttribute(nn){var Zt=this.systems[nn];return Zt?Zt.data:gt.prototype.getDOMAttribute.call(this,nn)}setAttribute(nn,Zt,mn){if(Et[nn]){Ct.prototype.setAttribute.call(this,nn,Zt);var gn=this.systems[nn];gn&&gn.updateProperties(Zt);return}gt.prototype.setAttribute.call(this,nn,Zt,mn)}removeBehavior(nn){var Zt,mn,gn=this.behaviors[nn.name],In;for(mn in gn)nn[mn]&&(Zt=gn[mn],In=Zt.array.indexOf(nn),In!==-1&&(Zt.inUse?Zt.markedForRemoval.indexOf(nn)===-1&&Zt.markedForRemoval.push(nn):(Zt.array[In]=Zt.array[Zt.array.length-1],Zt.array.pop())))}resize(){var nn=this.camera,Zt=this.canvas,mn,gn,In,Vn=this.renderer.xr.isPresenting;gn=this.renderer.xr.enabled&&Vn,!(!nn||!Zt||this.is("vr-mode")&&(this.isMobile||gn))&&(mn=this.getAttribute("embedded")&&!this.is("vr-mode"),In=on(Zt,mn,this.maxCanvasSize,this.is("vr-mode")),nn.aspect=In.width/In.height,nn.updateProjectionMatrix(),this.renderer.setSize(In.width,In.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var nn=this,Zt,mn,gn,In;In={alpha:!0,antialias:!Ht,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&(gn=this.getAttribute("renderer"),mn=pt.styleParser.parse(gn),mn.precision&&(In.precision=mn.precision+"p"),mn.antialias&&mn.antialias!=="auto"&&(In.antialias=mn.antialias==="true"),mn.logarithmicDepthBuffer&&mn.logarithmicDepthBuffer!=="auto"&&(In.logarithmicDepthBuffer=mn.logarithmicDepthBuffer==="true"),mn.alpha&&(In.alpha=mn.alpha==="true"),mn.stencil&&(In.stencil=mn.stencil==="true"),mn.multiviewStereo&&(In.multiviewStereo=mn.multiviewStereo==="true"),this.maxCanvasSize={width:mn.maxCanvasWidth?parseInt(mn.maxCanvasWidth):this.maxCanvasSize.width,height:mn.maxCanvasHeight?parseInt(mn.maxCanvasHeight):this.maxCanvasSize.height}),Zt=this.renderer=new Rt.WebGLRenderer(In),Zt.setPixelRatio(window.devicePixelRatio),this.camera&&Zt.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){Zt.xr.setPoseTarget(nn.camera.el.object3D)})}play(){var nn=this,Zt=this;if(this.renderStarted){gt.prototype.play.call(this);return}this.addEventListener("loaded",function(){var mn=this.renderer,gn,In=this.renderer.xr;gt.prototype.play.call(this),!Zt.renderStarted&&(Zt.resize(),Zt.renderer&&(window.performance&&window.performance.mark("render-started"),bt.remove(),gn=pt.device.getVRDisplay(),gn&&gn.isPresenting&&(In.setDevice(gn),In.enabled=!0,Zt.enterVR()),mn.setAnimationLoop(this.render),Zt.renderStarted=!0,Zt.emit("renderstart")))}),setTimeout(function(){gt.prototype.load.call(nn)})}updateComponent(nn){nn in Et||gt.prototype.updateComponent.apply(this,arguments)}tick(nn,Zt){var mn,gn=this.systems;for(this.callComponentBehaviors("tick",nn,Zt),mn=0;mn<this.systemNames.length;mn++)gn[this.systemNames[mn]].tick&&gn[this.systemNames[mn]].tick(nn,Zt)}tock(nn,Zt,mn){var gn,In=this.systems;for(this.callComponentBehaviors("tock",nn,Zt),gn=0;gn<this.systemNames.length;gn++)In[this.systemNames[gn]].tock&&In[this.systemNames[gn]].tock(nn,Zt,mn)}render(nn,Zt){var mn=this.renderer;this.frame=Zt,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var gn=null;this.is("ar-mode")&&(gn=this.object3D.background,this.object3D.background=null),mn.render(this.object3D,this.camera),gn&&(this.object3D.background=gn)}callComponentBehaviors(nn,Zt,mn){for(var gn,In=0;In<this.componentOrder.length;In++){var Vn=this.behaviors[this.componentOrder[In]];if(Vn){var Zn=Vn[nn];for(Zn.inUse=!0,gn=0;gn<Zn.array.length;gn++)Zn.array[gn].isPlaying&&Zn.array[gn][nn](Zt,mn);for(Zn.inUse=!1,gn=0;gn<Zn.markedForRemoval.length;gn++)this.removeBehavior(Zn.markedForRemoval[gn]);Zn.markedForRemoval.length=0}}}}function Qt(An,nn){var Zt={},mn,gn,In=nn||[];In.length=0;for(gn in An){var Vn=An[gn];if(Vn!==void 0){var Zn=Vn.before?Vn.before.slice(0):[],lr=Vn.after?Vn.after.slice(0):[];Zt[gn]={before:Zn,after:lr,visited:!1,done:!1}}}for(gn in Zt)for(mn=0;mn<Zt[gn].before.length;mn++){var hr=Zt[gn].before[mn];if(!(hr in Zt)){mt("Invalid ordering constraint, no component named `"+hr+"` referenced by `"+gn+"`");continue}Zt[hr].after.push(gn)}function Lr(Tr){if(!(!(Tr in Zt)||Zt[Tr].done)){if(Zt[Tr].visited){mt("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");return}Zt[Tr].visited=!0;for(var As=0;As<Zt[Tr].after.length;As++){var Yr=Zt[Tr].after[As];Yr in Zt||mt("Invalid before/after constraint, no component named `"+Yr+"` referenced in `"+Tr+"`"),Lr(Yr)}Zt[Tr].done=!0,In.push(Tr)}}for(gn in Zt)Zt[gn].done||Lr(gn);return In}St.exports.determineComponentBehaviorOrder=Qt;function tn(An,nn){var Zt,mn=window.devicePixelRatio;return!nn||nn.width===-1&&nn.height===-1||An.width*mn<nn.width&&An.height*mn<nn.height||(Zt=An.width/An.height,An.width*mn>nn.width&&nn.width!==-1&&(An.width=Math.round(nn.width/mn),An.height=Math.round(nn.width/Zt/mn)),An.height*mn>nn.height&&nn.height!==-1&&(An.height=Math.round(nn.height/mn),An.width=Math.round(nn.height*Zt/mn))),An}customElements.define("a-scene",Xt);function on(An,nn,Zt,mn){if(!An.parentElement)return{height:0,width:0};if(nn){var gn;return gn={height:An.parentElement.offsetHeight,width:An.parentElement.offsetWidth},tn(gn,Zt)}return vn(Zt,mn)}function vn(An,nn){var Zt;return Zt={height:document.body.offsetHeight,width:document.body.offsetWidth},nn?Zt:tn(Zt,An)}function fn(An){var nn=An.requestFullscreen||An.webkitRequestFullscreen||An.mozRequestFullScreen||An.msRequestFullscreen;nn.apply(An,[{navigationUI:"hide"}])}function Cn(){var An=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;An&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function dn(An){var nn;nn=document.createElement("canvas"),nn.classList.add("a-canvas"),nn.dataset.aframeCanvas=!0,An.appendChild(nn),document.addEventListener("fullscreenchange",Zt),document.addEventListener("mozfullscreenchange",Zt),document.addEventListener("webkitfullscreenchange",Zt),document.addEventListener("MSFullscreenChange",Zt),nn.addEventListener("touchmove",function(mn){mn.preventDefault()},{passive:!1}),An.canvas=nn,An.emit("render-target-loaded",{target:nn}),setTimeout(An.resize.bind(An),0);function Zt(){var mn=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;mn||An.exitVR(),document.activeElement.blur(),document.body.focus()}}St.exports.setupCanvas=dn,St.exports.AScene=Xt},"./src/core/scene/loadingScreen.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js"),dt=it.styleParser,bt,Tt,Et,Mt="loading-screen",Rt="a-loader-title";St.exports.setup=function(Ct,xt){bt=Ct,Et=xt;var Dt=bt.hasAttribute(Mt)?dt.parse(bt.getAttribute(Mt)):void 0,Ht=Dt&&Dt.dotsColor||"white",Ut=Dt&&Dt.backgroundColor||"#24CAFF",Xt=Dt===void 0||Dt.enabled==="true"||Dt.enabled===void 0,Qt,tn,on,vn,fn,Cn,dn,An,nn,Zt;Xt&&(Qt=new THREE.Scene,tn=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),on=new THREE.MeshBasicMaterial({color:Ht}),vn=new THREE.Mesh(tn,on),fn=vn.clone(),Cn=vn.clone(),dn=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),An=new THREE.Clock,nn=0,Zt=function(){bt.renderer.render(Qt,dn),nn=An.getElapsedTime()%4,vn.visible=nn>=1,fn.visible=nn>=2,Cn.visible=nn>=3},Qt.background=new THREE.Color(Ut),Qt.add(dn),vn.position.set(-1,0,-15),fn.position.set(0,0,-15),Cn.position.set(1,0,-15),dn.add(vn),dn.add(fn),dn.add(Cn),mt(),setTimeout(function(){bt.hasLoaded||(pt(dn),Tt.style.display="block",window.addEventListener("resize",function(){pt(dn)}),bt.renderer.setAnimationLoop(Zt))},200))},St.exports.remove=function(){window.removeEventListener("resize",pt),Tt&&(Tt.style.display="none")};function pt(gt){var Ct=bt.hasAttribute("embedded"),xt=Et(bt.canvas,Ct,bt.maxCanvasSize,bt.is("vr-mode"));gt.aspect=xt.width/xt.height,gt.updateProjectionMatrix(),bt.renderer.setSize(xt.width,xt.height,!1)}function mt(){Tt=document.createElement("div"),Tt.className=Rt,Tt.innerHTML=document.title,Tt.style.display="none",bt.appendChild(Tt)}},"./src/core/scene/metaTags.js":(St,Gt,vt)=>{var it=vt("./src/constants/index.js"),dt=vt("./src/utils/index.js").extend,bt=St.exports.MOBILE_HEAD_TAGS=[Et({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),Et({name:"mobile-web-app-capable",content:"yes"}),Et({name:"theme-color",content:"black"})],Tt=[Et({name:"apple-mobile-web-app-capable",content:"yes"}),Et({name:"apple-mobile-web-app-status-bar-style",content:"black"}),Mt({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function Et(pt){return{tagName:"meta",attributes:pt,exists:function(){return document.querySelector('meta[name="'+pt.name+'"]')}}}function Mt(pt){return{tagName:"link",attributes:pt,exists:function(){return document.querySelector('link[rel="'+pt.rel+'"]')}}}St.exports.inject=function(mt){var gt=document.head,Ct=gt.querySelector("script"),xt,Dt=[];return bt.forEach(Ht),mt.isIOS&&Tt.forEach(Ht),Dt;function Ht(Ut){!Ut||Ut.exists()||(xt=Rt(Ut),xt&&(Ct?Ct.parentNode.insertBefore(xt,Ct):gt.appendChild(xt),Dt.push(xt)))}};function Rt(pt){if(!(!pt||!pt.tagName)){var mt=document.createElement(pt.tagName);return mt.setAttribute(it.AFRAME_INJECTED,""),dt(mt,pt.attributes)}}},"./src/core/scene/postMessage.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js").isIframed;St.exports=function(Tt){it()&&window.addEventListener("message",dt.bind(Tt))};function dt(bt){var Tt=this;if(bt.data)switch(bt.data.type){case"vr":switch(bt.data.data){case"enter":Tt.enterVR();break;case"exit":Tt.exitVR();break}}}},"./src/core/scene/scenes.js":St=>{St.exports=[]},"./src/core/scene/wakelock.js":(St,Gt,vt)=>{var it=vt("./vendor/wakelock/wakelock.js");St.exports=function(bt){if(bt.isMobile){var Tt=bt.wakelock=new it;bt.addEventListener("enter-vr",function(){Tt.request()}),bt.addEventListener("exit-vr",function(){Tt.release()})}}},"./src/core/schema.js":(St,Gt,vt)=>{var it=vt("./src/utils/index.js"),dt=vt("./src/core/propertyTypes.js"),bt=it.debug,Tt=dt.isValidDefaultValue,Et=dt.propertyTypes,Mt=bt("core:schema:warn");function Rt(Ct){return"type"in Ct?typeof Ct.type=="string":"default"in Ct}St.exports.isSingleProperty=Rt,St.exports.process=function(Ct,xt){var Dt;if(Rt(Ct))return pt(Ct,xt);for(Dt in Ct)Ct[Dt]=pt(Ct[Dt],xt);return Ct};function pt(Ct,xt){var Dt=Ct.default,Ht,Ut,Xt=Ct.type;return Ct.type?Ct.type==="bool"?Xt="boolean":Ct.type==="float"&&(Xt="number"):Dt!==void 0&&(typeof Dt=="boolean"||typeof Dt=="number")?Xt=typeof Dt:Array.isArray(Dt)?Xt="array":Xt="string",Ut=Et[Xt],Ut||Mt("Unknown property type for component `"+xt+"`: "+Xt),Ht=!!Ct.parse,Ct.parse=Ct.parse||Ut.parse,Ct.stringify=Ct.stringify||Ut.stringify,Ct.equals=Ct.equals||Ut.equals,Ct.isCacheable=Ct.isCacheable===!0||Ut.isCacheable,Ct.type=Xt,"default"in Ct?!Ht&&!Tt(Xt,Dt)&&Mt("Default value `"+Dt+"` does not match type `"+Xt+"` in component `"+xt+"`"):Ct.default=Ut.default,Ct}St.exports.processPropertyDefinition=pt,St.exports.parseProperties=function(){var Ct=[];return function(xt,Dt,Ht,Ut,Xt){var Qt,tn,on,vn;Ct.length=0;for(tn in Ht?xt:Dt)Ht&&xt[tn]===void 0||Ct.push(tn);if(xt===null||typeof xt!="object")return xt;for(tn in xt)xt[tn]!==void 0&&!Dt[tn]&&!Xt&&Mt("Unknown property `"+tn+"` for component/system `"+Ut+"`.");for(Qt=0;Qt<Ct.length;Qt++){if(tn=Ct[Qt],on=Dt[tn],vn=xt[tn],!Dt[tn])return;xt[tn]=mt(vn,on)}return xt}}();function mt(Ct,xt,Dt){return(Ct==null||Ct==="")&&(Ct=xt.default,Array.isArray(Ct)&&(Ct=Ct.slice())),xt.parse(Ct,xt.default,Dt)}St.exports.parseProperty=mt,St.exports.stringifyProperties=function(Ct,xt){var Dt,Ht,Ut,Xt={},Qt;for(Dt in Ct)Ht=xt[Dt],Ut=Ct[Dt],Qt=Ut,typeof Qt=="object"&&(Qt=gt(Ut,Ht),Ht||Mt("Unknown component property: "+Dt)),Xt[Dt]=Qt;return Xt};function gt(Ct,xt){return typeof Ct!="object"?Ct:!xt||Ct===null?JSON.stringify(Ct):xt.stringify(Ct)}St.exports.stringifyProperty=gt},"./src/core/shader.js":(St,Gt,vt)=>{var it=vt("./src/core/schema.js"),dt=it.process,bt=St.exports.shaders={},Tt=St.exports.shaderNames=[],Et=vt("./src/lib/three.js"),Mt=vt("./src/utils/index.js"),Rt={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},pt=St.exports.Shader=function(){};pt.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(mt){return this.uniforms=this.initUniforms(),this.material=new(this.raw?Et.RawShaderMaterial:Et.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?Et.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var mt,gt=this.schema,Ct={},xt;for(mt in gt)gt[mt].is==="uniform"&&(xt=Rt[gt[mt].type],Ct[mt]={type:xt,value:void 0});return Ct},update:function(mt){var gt,Ct,xt=this.schema,Dt=this.uniforms;for(gt in mt)if(!(!xt[gt]||xt[gt].is!=="uniform")){if(xt[gt].type==="map"){if(!Dt[gt]||Dt[gt].value===mt[gt])continue;Ct="_texture_"+gt,this.setMapOnTextureLoad(Dt,gt,Ct),Mt.material.updateMapMaterialFromData(Ct,gt,this,mt);continue}Dt[gt].value=this.parseValue(xt[gt].type,mt[gt]),Dt[gt].needsUpdate=!0}},parseValue:function(mt,gt){var Ct;switch(mt){case"vec2":return new Et.Vector2(gt.x,gt.y);case"vec3":return new Et.Vector3(gt.x,gt.y,gt.z);case"vec4":return new Et.Vector4(gt.x,gt.y,gt.z,gt.w);case"color":return Ct=new Et.Color(gt),new Et.Vector3(Ct.r,Ct.g,Ct.b);default:return gt}},setMapOnTextureLoad:function(mt,gt,Ct){var xt=this;this.el.addEventListener("materialtextureloaded",function(){mt[gt].value=xt.material[Ct],mt[gt].needsUpdate=!0})}},St.exports.registerShader=function(mt,gt){var Ct,xt={};if(Object.keys(gt).forEach(function(Dt){xt[Dt]={value:gt[Dt],writable:!0}}),bt[mt])throw new Error("The shader "+mt+" has already been registered");return Ct=function(){pt.call(this)},Ct.prototype=Object.create(pt.prototype,xt),Ct.prototype.name=mt,Ct.prototype.constructor=Ct,bt[mt]={Shader:Ct,schema:dt(Ct.prototype.schema)},Tt.push(mt),Ct}},"./src/core/system.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js"),dt=vt("./src/core/schema.js"),bt=vt("./src/utils/index.js"),Tt=vt("./src/core/readyState.js"),Et=dt.parseProperties,Mt=dt.parseProperty,Rt=dt.process,pt=dt.isSingleProperty,mt=bt.styleParser,gt=St.exports.systems={},Ct=St.exports.System=function(xt){var Dt=it&&it.components[this.name];this.el=xt,this.sceneEl=xt,Dt&&(Dt.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};Ct.prototype={schema:{},init:function(){},update:function(xt){},updateProperties:function(xt){var Dt=this.data;Object.keys(dt).length&&(this.buildData(xt),this.update(Dt))},buildData:function(xt){var Dt=this.schema;Object.keys(Dt).length&&(xt=xt||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),pt(Dt)?this.data=Mt(xt,Dt):this.data=Et(mt.parse(xt)||{},Dt,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},St.exports.registerSystem=function(xt,Dt){var Ht,Ut,Xt={},Qt=bt.findAllScenes(document);if(Object.keys(Dt).forEach(function(tn){Xt[tn]={value:Dt[tn],writable:!0}}),gt[xt])throw new Error("The system `"+xt+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(Ut=function(tn){Ct.call(this,tn)},Ut.prototype=Object.create(Ct.prototype,Xt),Ut.prototype.name=xt,Ut.prototype.constructor=Ut,Ut.prototype.schema=bt.extend(Rt(Ut.prototype.schema)),gt[xt]=Ut,Tt.canInitializeElements)for(Ht=0;Ht<Qt.length;Ht++)Qt[Ht].initSystem(xt)}},"./src/extras/components/index.js":(St,Gt,vt)=>{vt("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").registerComponent,dt=vt("./src/lib/three.js"),bt=new dt.Vector3,Tt=new dt.Vector3;it("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var Et=this.data,Mt=this.el,Rt=Mt.object3D.parent,pt=Mt.object3D,mt=new dt.Group;bt.copy(pt.position),Tt.copy(pt.rotation),Rt.remove(pt),mt.add(pt),Rt.add(mt),Mt.object3D=mt,pt.position.set(-1*Et.x,-1*Et.y,-1*Et.z),mt.position.set(Et.x+bt.x,Et.y+bt.y,Et.z+bt.z),mt.rotation.copy(pt.rotation),pt.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(St,Gt,vt)=>{var it=vt("./src/core/component.js").components,dt=vt("./src/core/shader.js").shaders,bt=vt("./src/utils/index.js"),Tt={};Object.keys(it.material.schema).forEach(Et),Object.keys(dt.standard.schema).forEach(Et);function Et(Mt){var Rt=Mt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Mt==="fog"&&(Rt="material-fog"),Mt==="visible"&&(Rt="material-visible"),Tt[Rt]="material."+Mt}St.exports=function(){return{defaultComponents:{material:{}},mappings:bt.extend({},Tt)}}},"./src/extras/primitives/index.js":(St,Gt,vt)=>{vt("./src/extras/primitives/primitives/a-camera.js"),vt("./src/extras/primitives/primitives/a-cursor.js"),vt("./src/extras/primitives/primitives/a-curvedimage.js"),vt("./src/extras/primitives/primitives/a-gltf-model.js"),vt("./src/extras/primitives/primitives/a-image.js"),vt("./src/extras/primitives/primitives/a-light.js"),vt("./src/extras/primitives/primitives/a-link.js"),vt("./src/extras/primitives/primitives/a-obj-model.js"),vt("./src/extras/primitives/primitives/a-sky.js"),vt("./src/extras/primitives/primitives/a-sound.js"),vt("./src/extras/primitives/primitives/a-text.js"),vt("./src/extras/primitives/primitives/a-video.js"),vt("./src/extras/primitives/primitives/a-videosphere.js"),vt("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(St,Gt,vt)=>{var it=vt("./src/core/a-node.js").knownTags,dt=vt("./src/core/a-entity.js").AEntity,bt=vt("./src/core/component.js").components,Tt=vt("./src/utils/index.js"),Et=Tt.debug,Mt=Tt.entity.setComponentProperty,Rt=Et("extras:primitives:debug"),pt=Et("extras:primitives:warn"),mt=Et("extras:primitives:error"),gt=St.exports.primitives={};St.exports.registerPrimitive=function(Ut,Xt){if(Ut=Ut.toLowerCase(),it[Ut]){mt("Trying to register primitive "+Ut+" that has been already previously registered");return}it[Ut]=!0,Rt("Registering <%s>",Ut),Xt.defaultAttributes&&pt("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var Qt=Xt.mappings||{},tn=class extends dt{constructor(){super(),this.defaultComponentsFromPrimitive=Xt.defaultComponents||Xt.defaultAttributes||{},this.deprecated=Xt.deprecated||null,this.deprecatedMappings=Xt.deprecatedMappings||{},this.mappings=Qt,Xt.deprecated&&console.warn(Xt.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var on=this.mappings,vn=this;Object.keys(on).forEach(function(Cn){var dn;Cn!==Cn.toLowerCase()&&pt("Mapping keys should be specified in lower case. The mapping key "+Cn+" may not be recognized"),bt[Cn]&&(dn=on[Cn].replace(".","-"),on[dn]=on[Cn],delete on[Cn],console.warn("The primitive "+vn.tagName.toLowerCase()+" has a mapping collision. The attribute "+Cn+" has the same name as a registered component and has been renamed to "+dn))})}getExtraComponents(){var on,vn,fn,Cn,dn,An=this;for(vn=Tt.clone(this.defaultComponentsFromPrimitive),dn=this.getAttribute("mixin"),dn&&(dn=Tt.split(dn.trim(),/\s+/),dn.forEach(function(Vn){var Zn=document.getElementById(Vn);if(Zn){var lr=Zn.rawAttributeCache,hr=Zn.componentCache;for(var Lr in lr){if(Cn=An.mappings[Lr],Cn){Ct(Cn,lr[Lr],vn);return}Lr in hr&&(vn[Lr]=nn(vn[Lr],hr[Lr]))}}})),fn=0;fn<this.attributes.length;fn++)on=this.attributes[fn],Cn=this.mappings[on.name],Cn&&Ct(Cn,on.value,vn);return vn;function nn(In,Vn){return Zt(In)?mn(Vn):Zt(Vn)?mn(In):gn(In)&&gn(Vn)?Tt.extendDeep(In,Vn):mn(Vn)}function Zt(In){return typeof In>"u"}function mn(In){return gn(In)?Tt.extendDeep({},In):In}function gn(In){return In!==null&&In.constructor===Object}}attributeChangedCallback(on,vn,fn){var Cn=this.mappings[on];if(on in this.deprecatedMappings&&console.warn(this.deprecatedMappings[on]),!on||!Cn){super.attributeChangedCallback(on,vn,fn);return}Mt(this,Cn,fn)}};return customElements.define(Ut,tn),tn.mappings=Qt,gt[Ut]=tn,tn};function Ct(Ht,Ut,Xt){var Qt=Tt.entity.getComponentPropertyPath(Ht);Qt.constructor===Array?(Xt[Qt[0]]=Xt[Qt[0]]||{},Xt[Qt[0]][Qt[1]]=Ut.trim()):Xt[Qt]=Ut.trim()}function xt(Ht,Ut){var Xt=bt[Ht].schema;Object.keys(Xt).map(function(Qt){var tn=Qt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Ut[tn]!==void 0&&(tn=Ht+"-"+Qt),Ut[tn]=Ht+"."+Qt})}function Dt(Ht,Ut,Xt){Xt=Xt||{},Object.keys(Ut).map(function(tn){xt(tn,Xt)}),St.exports.registerPrimitive(Ht,Tt.extendDeep({},null,{defaultComponents:Ut,mappings:Xt}))}St.exports.definePrimitive=Dt},"./src/extras/primitives/primitives/a-camera.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").registerPrimitive;it("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-cursor",bt.extendDeep({},it(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-curvedimage",bt.extendDeep({},it(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").registerPrimitive;it("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-image",bt.extendDeep({},it(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").registerPrimitive;it("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").registerPrimitive;it("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js")(),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-obj-model",bt.extendDeep({},it,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js"),Tt=vt("./src/extras/primitives/primitives/meshPrimitives.js");dt("a-sky",bt.extendDeep({},it(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:bt.extendDeep({},Tt["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").registerPrimitive;it("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/primitives.js").definePrimitive;it("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-video",bt.extendDeep({},it(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,bt=vt("./src/utils/index.js");dt("a-videosphere",bt.extendDeep({},it(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(St,Gt,vt)=>{var it=vt("./src/extras/primitives/getMeshMixin.js"),dt=vt("./src/core/geometry.js").geometries,bt=vt("./src/core/geometry.js").geometryNames,Tt=vt("./src/extras/primitives/primitives.js").registerPrimitive,Et=vt("./src/utils/index.js"),Mt=St.exports={};bt.forEach(function(mt){var gt=dt[mt],Ct=Rt(mt),xt={};Object.keys(gt.schema).forEach(function(Xt){xt[Rt(Xt)]="geometry."+Xt});var Dt="a-"+Ct,Ht=Tt(Dt,Et.extendDeep({},it(),{defaultComponents:{geometry:{primitive:mt}},mappings:xt}));Mt[Dt]=Ht});function Rt(pt){return pt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(bt){this.geometry=new dt.BoxGeometry(bt.width,bt.height,bt.depth,bt.segmentsWidth,bt.segmentsHeight,bt.segmentsDepth)}})},"./src/geometries/circle.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(Tt){this.geometry=new dt.CircleGeometry(Tt.radius,Tt.segments,bt(Tt.thetaStart),bt(Tt.thetaLength))}})},"./src/geometries/cone.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(Tt){this.geometry=new dt.CylinderGeometry(Tt.radiusTop,Tt.radiusBottom,Tt.height,Tt.segmentsRadial,Tt.segmentsHeight,Tt.openEnded,bt(Tt.thetaStart),bt(Tt.thetaLength))}})},"./src/geometries/cylinder.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(Tt){this.geometry=new dt.CylinderGeometry(Tt.radius,Tt.radius,Tt.height,Tt.segmentsRadial,Tt.segmentsHeight,Tt.openEnded,bt(Tt.thetaStart),bt(Tt.thetaLength))}})},"./src/geometries/dodecahedron.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(bt){this.geometry=new dt.DodecahedronGeometry(bt.radius,bt.detail)}})},"./src/geometries/icosahedron.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(bt){this.geometry=new dt.IcosahedronGeometry(bt.radius,bt.detail)}})},"./src/geometries/index.js":(St,Gt,vt)=>{vt("./src/geometries/box.js"),vt("./src/geometries/circle.js"),vt("./src/geometries/cone.js"),vt("./src/geometries/cylinder.js"),vt("./src/geometries/dodecahedron.js"),vt("./src/geometries/icosahedron.js"),vt("./src/geometries/octahedron.js"),vt("./src/geometries/plane.js"),vt("./src/geometries/ring.js"),vt("./src/geometries/sphere.js"),vt("./src/geometries/tetrahedron.js"),vt("./src/geometries/torus.js"),vt("./src/geometries/torusKnot.js"),vt("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(bt){this.geometry=new dt.OctahedronGeometry(bt.radius,bt.detail)}})},"./src/geometries/plane.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(bt){this.geometry=new dt.PlaneGeometry(bt.width,bt.height,bt.segmentsWidth,bt.segmentsHeight)}})},"./src/geometries/ring.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(Tt){this.geometry=new dt.RingGeometry(Tt.radiusInner,Tt.radiusOuter,Tt.segmentsTheta,Tt.segmentsPhi,bt(Tt.thetaStart),bt(Tt.thetaLength))}})},"./src/geometries/sphere.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(Tt){this.geometry=new dt.SphereGeometry(Tt.radius,Tt.segmentsWidth,Tt.segmentsHeight,bt(Tt.phiStart),bt(Tt.phiLength),bt(Tt.thetaStart),bt(Tt.thetaLength))}})},"./src/geometries/tetrahedron.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(bt){this.geometry=new dt.TetrahedronGeometry(bt.radius,bt.detail)}})},"./src/geometries/torus.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=dt.MathUtils.degToRad;it("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(Tt){this.geometry=new dt.TorusGeometry(Tt.radius,Tt.radiusTubular*2,Tt.segmentsRadial,Tt.segmentsTubular,bt(Tt.arc))}})},"./src/geometries/torusKnot.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js");it("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(bt){this.geometry=new dt.TorusKnotGeometry(bt.radius,bt.radiusTubular*2,bt.segmentsTubular,bt.segmentsRadial,bt.p,bt.q)}})},"./src/geometries/triangle.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").registerGeometry,dt=vt("./src/lib/three.js"),bt=new dt.Quaternion,Tt=new dt.Vector3(0,0,1),Et=new dt.Vector2,Mt=new dt.Vector2,Rt=new dt.Vector2;it("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(pt){var mt,gt,Ct,xt,Dt,Ht,Ut,Xt,Qt;Ct=new dt.Triangle,Ct.a.set(pt.vertexA.x,pt.vertexA.y,pt.vertexA.z),Ct.b.set(pt.vertexB.x,pt.vertexB.y,pt.vertexB.z),Ct.c.set(pt.vertexC.x,pt.vertexC.y,pt.vertexC.z),gt=Ct.getNormal(new dt.Vector3),bt.setFromUnitVectors(gt,Tt),xt=Ct.a.clone().applyQuaternion(bt),Dt=Ct.b.clone().applyQuaternion(bt),Ht=Ct.c.clone().applyQuaternion(bt),Et.set(Math.min(xt.x,Dt.x,Ht.x),Math.min(xt.y,Dt.y,Ht.y)),Mt.set(Math.max(xt.x,Dt.x,Ht.x),Math.max(xt.y,Dt.y,Ht.y)),Rt.set(0,0).subVectors(Mt,Et),xt=new dt.Vector2().subVectors(xt,Et).divide(Rt),Dt=new dt.Vector2().subVectors(Dt,Et).divide(Rt),Ht=new dt.Vector2().subVectors(Ht,Et).divide(Rt),mt=this.geometry=new dt.BufferGeometry,Ut=[Ct.a.x,Ct.a.y,Ct.a.z,Ct.b.x,Ct.b.y,Ct.b.z,Ct.c.x,Ct.c.y,Ct.c.z],Xt=[gt.x,gt.y,gt.z,gt.x,gt.y,gt.z,gt.x,gt.y,gt.z],Qt=[xt.x,xt.y,Dt.x,Dt.y,Ht.x,Ht.y],mt.setAttribute("position",new dt.Float32BufferAttribute(Ut,3)),mt.setAttribute("normal",new dt.Float32BufferAttribute(Xt,3)),mt.setAttribute("uv",new dt.Float32BufferAttribute(Qt,2))}})},"./src/index.js":(St,Gt,vt)=>{if(window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var it=vt("./src/utils/isIOSOlderThan10.js"),dt=it(window.navigator.userAgent)?1/window.devicePixelRatio:1,bt=vt("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),Tt={BUFFER_SCALE:dt,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new bt(Tt)}var Et=vt("./src/utils/index.js"),Mt=Et.debug,Rt=Mt("A-Frame:error"),pt=Mt("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&pt("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&Rt("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),Et.device.isBrowserEnvironment&&(vt("./src/style/aframe.css"),vt("./src/style/rStats.css"));var mt=vt("./src/core/scene/a-scene.js").AScene,gt=vt("./src/core/component.js").components,Ct=vt("./src/core/component.js").registerComponent,xt=vt("./src/core/geometry.js").registerGeometry,Dt=vt("./src/extras/primitives/primitives.js").registerPrimitive,Ht=vt("./src/core/shader.js").registerShader,Ut=vt("./src/core/system.js").registerSystem,Xt=vt("./src/core/shader.js").shaders,Qt=vt("./src/core/system.js").systems,tn=window.THREE=vt("./src/lib/three.js"),on=vt("./src/core/readyState.js"),vn=vt("./package.json");vt("./src/components/index.js"),vt("./src/geometries/index.js"),vt("./src/shaders/index.js"),vt("./src/systems/index.js");var fn=vt("./src/core/a-node.js").ANode,Cn=vt("./src/core/a-entity.js").AEntity;vt("./src/core/a-assets.js"),vt("./src/core/a-cubemap.js"),vt("./src/core/a-mixin.js"),vt("./src/extras/components/index.js"),vt("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.6.0 (Date 2024-05-23, Commit #e6c47761)"),console.log("THREE Version (https://github.com/supermedium/three.js):",tn.REVISION),console.log("WebVR Polyfill Version:",vn.dependencies["webvr-polyfill"]),window.AFRAME_ASYNC||on.waitForDocumentReadyState(),St.exports=window.AFRAME={AComponent:vt("./src/core/component.js").Component,AEntity:Cn,ANode:fn,ANIME:vt("./node_modules/super-animejs/lib/anime.es.js").default,AScene:mt,components:gt,coreComponents:Object.keys(gt),geometries:vt("./src/core/geometry.js").geometries,registerComponent:Ct,registerGeometry:xt,registerPrimitive:Dt,registerShader:Ht,registerSystem:Ut,primitives:{getMeshMixin:vt("./src/extras/primitives/getMeshMixin.js"),primitives:vt("./src/extras/primitives/primitives.js").primitives},scenes:vt("./src/core/scene/scenes.js"),schema:vt("./src/core/schema.js"),shaders:Xt,systems:Qt,emitReady:on.emitReady,THREE:tn,utils:Et,version:vn.version}},"./src/lib/rStatsAframe.js":St=>{window.aframeStats=function(Gt){var vt=null,it=Gt,dt={te:{caption:"Entities"},lt:{caption:"Load Time"}},bt=[{caption:"A-Frame",values:["te","lt"]}];function Tt(){vt("te").set(Et()),window.performance.getEntriesByName&&vt("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function Et(){var mt=it.querySelectorAll("*");return Array.prototype.slice.call(mt).filter(function(gt){return gt.isEntity}),mt.length}function Mt(){}function Rt(){}function pt(mt){vt=mt}return{update:Tt,start:Mt,end:Rt,attach:pt,values:dt,groups:bt,fractions:[]}},St.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(St,Gt,vt)=>{var it=vt("./src/lib/three.mjs").default;vt.g.THREE=it,vt("./vendor/DeviceOrientationControls.js"),it.Cache&&(it.Cache.enabled=!0),St.exports=it},"./src/shaders/flat.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js");St.exports.Shader=it("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(Et){this.materialData={color:new dt.Color},Tt(Et,this.materialData),this.material=new dt.MeshBasicMaterial(this.materialData)},update:function(Et){this.updateMaterial(Et),bt.material.updateMap(this,Et)},updateMaterial:function(Et){var Mt;Tt(Et,this.materialData);for(Mt in this.materialData)this.material[Mt]=this.materialData[Mt]}});function Tt(Et,Mt){return Mt.color.set(Et.color),Mt.fog=Et.fog,Mt.wireframe=Et.wireframe,Mt.toneMapped=Et.toneMapped,Mt.wireframeLinewidth=Et.wireframeLinewidth,Mt}},"./src/shaders/index.js":(St,Gt,vt)=>{vt("./src/shaders/flat.js"),vt("./src/shaders/standard.js"),vt("./src/shaders/phong.js"),vt("./src/shaders/sdf.js"),vt("./src/shaders/msdf.js"),vt("./src/shaders/shadow.js")},"./src/shaders/msdf.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js"),bt=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),Tt=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);St.exports.Shader=it("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:bt,fragmentShader:Tt,init:function(){return this.uniforms=dt.UniformsUtils.merge([dt.UniformsLib.fog,this.initUniforms()]),this.material=new dt.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/phong.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js");St.exports.Shader=it("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(Et){this.materialData={color:new dt.Color,specular:new dt.Color,emissive:new dt.Color},Tt(Et,this.materialData),this.material=new dt.MeshPhongMaterial(this.materialData);var Mt=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||Mt.object3D.environment},set:function(Rt){this._envMap=Rt}})},update:function(Et){this.updateMaterial(Et),bt.material.updateMap(this,Et),bt.material.updateDistortionMap("normal",this,Et),bt.material.updateDistortionMap("displacement",this,Et),bt.material.updateDistortionMap("ambientOcclusion",this,Et),bt.material.updateDistortionMap("bump",this,Et),bt.material.updateEnvMap(this,Et)},updateMaterial:function(Et){var Mt;Tt(Et,this.materialData);for(Mt in this.materialData)this.material[Mt]=this.materialData[Mt]}});function Tt(Et,Mt){switch(Mt.color.set(Et.color),Mt.specular.set(Et.specular),Mt.emissive.set(Et.emissive),Mt.emissiveIntensity=Et.emissiveIntensity,Mt.fog=Et.fog,Mt.transparent=Et.transparent,Mt.wireframe=Et.wireframe,Mt.wireframeLinewidth=Et.wireframeLinewidth,Mt.shininess=Et.shininess,Mt.flatShading=Et.flatShading,Mt.wireframe=Et.wireframe,Mt.wireframeLinewidth=Et.wireframeLinewidth,Mt.reflectivity=Et.reflectivity,Mt.refractionRatio=Et.refractionRatio,Et.combine){case"mix":Mt.combine=dt.MixOperation;break;case"multiply":Mt.combine=dt.MultiplyOperation;break;case"add":Mt.combine=dt.AddOperation;break}return Et.normalMap&&(Mt.normalScale=Et.normalScale),Et.ambientOcclusionMap&&(Mt.aoMapIntensity=Et.ambientOcclusionMapIntensity),Et.bumpMap&&(Mt.bumpScale=Et.bumpMapScale),Et.displacementMap&&(Mt.displacementScale=Et.displacementScale,Mt.displacementBias=Et.displacementBias),Mt}},"./src/shaders/sdf.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js"),bt=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),Tt=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);St.exports.Shader=it("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:bt,fragmentShader:Tt,init:function(){return this.uniforms=dt.UniformsUtils.merge([dt.UniformsLib.fog,this.initUniforms()]),this.material=new dt.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/shadow.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js");St.exports.Shader=it("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(bt){this.material=new dt.ShadowMaterial},update:function(bt){this.material.opacity=bt.opacity,this.material.alphaToCoverage=bt.alphaToCoverage,this.material.transparent=bt.transparent}})},"./src/shaders/standard.js":(St,Gt,vt)=>{var it=vt("./src/core/shader.js").registerShader,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js");St.exports.Shader=it("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(Et){this.materialData={color:new dt.Color,emissive:new dt.Color},Tt(Et,this.materialData),this.material=new dt.MeshStandardMaterial(this.materialData)},update:function(Et){this.updateMaterial(Et),bt.material.updateMap(this,Et),bt.material.updateDistortionMap("normal",this,Et),bt.material.updateDistortionMap("displacement",this,Et),bt.material.updateDistortionMap("ambientOcclusion",this,Et),bt.material.updateDistortionMap("metalness",this,Et),bt.material.updateDistortionMap("roughness",this,Et),bt.material.updateEnvMap(this,Et)},updateMaterial:function(Et){var Mt,Rt=this.material;Tt(Et,this.materialData);for(Mt in this.materialData)Rt[Mt]=this.materialData[Mt]}});function Tt(Et,Mt){return Mt.color.set(Et.color),Mt.emissive.set(Et.emissive),Mt.emissiveIntensity=Et.emissiveIntensity,Mt.fog=Et.fog,Mt.metalness=Et.metalness,Mt.roughness=Et.roughness,Mt.wireframe=Et.wireframe,Mt.wireframeLinewidth=Et.wireframeLinewidth,Et.normalMap&&(Mt.normalScale=Et.normalScale),Et.ambientOcclusionMap&&(Mt.aoMapIntensity=Et.ambientOcclusionMapIntensity),Et.displacementMap&&(Mt.displacementScale=Et.displacementScale,Mt.displacementBias=Et.displacementBias),Mt}},"./src/systems/camera.js":(St,Gt,vt)=>{var it=vt("./src/constants/index.js"),dt=vt("./src/core/system.js").registerSystem,bt="data-aframe-default-camera";St.exports.System=dt("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var Et,Mt,Rt=this.sceneEl,pt=this;if(Rt.camera&&!Rt.camera.el.getAttribute("camera").spectator){Rt.emit("cameraready",{cameraEl:Rt.camera.el});return}if(Et=Rt.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!Et.length){this.createDefaultCamera();return}for(this.numUserCameras=Et.length,Mt=0;Mt<Et.length;Mt++)Et[Mt].addEventListener("object3dset",function(mt){mt.detail.type==="camera"&&pt.checkUserCamera(this)}),Et[Mt].isNode?Et[Mt].load():Et[Mt].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(Et){var Mt,Rt=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(Mt=Et.getAttribute("camera"),!Mt.active||Mt.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,Rt.camera=Et.getObject3D("camera"),Rt.emit("cameraready",{cameraEl:Et})}},createDefaultCamera:function(){var Et,Mt=this.sceneEl;Et=document.createElement("a-entity"),Et.setAttribute("camera",{active:!0}),Et.setAttribute("position",{x:0,y:it.DEFAULT_CAMERA_HEIGHT,z:0}),Et.setAttribute("wasd-controls",""),Et.setAttribute("look-controls",""),Et.setAttribute(it.AFRAME_INJECTED,""),Et.addEventListener("object3dset",function(Rt){Rt.detail.type==="camera"&&(Mt.camera=Rt.detail.object,Mt.emit("cameraready",{cameraEl:Et}))}),Mt.appendChild(Et)},disableActiveCamera:function(){var Et,Mt;Et=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),Mt=Et[Et.length-1],Mt.setAttribute("camera","active",!0)},setActiveCamera:function(Et){var Mt,Rt,pt,mt,gt=this.activeCameraEl,Ct=this.sceneEl;if(mt=Et.getObject3D("camera"),!(!mt||Et===this.activeCameraEl)){var xt=Ct.querySelector("["+bt+"]"),Dt=xt&&xt.querySelector(":not(a-mixin)[camera]");for(Et!==Dt&&Tt(Ct),this.activeCameraEl=Et,this.activeCameraEl.play(),Ct.camera=mt,gt&&gt.setAttribute("camera","active",!1),Rt=Ct.querySelectorAll(":not(a-mixin)[camera]"),pt=0;pt<Rt.length;pt++)Mt=Rt[pt],!(!Mt.isEntity||Et===Mt)&&(Mt.setAttribute("camera","active",!1),Mt.pause());Ct.emit("camera-set-active",{cameraEl:Et})}},setSpectatorCamera:function(Et){var Mt,Rt=this.spectatorCameraEl,pt=this.sceneEl,mt;Mt=Et.getObject3D("camera"),!(!Mt||Et===this.spectatorCameraEl)&&(Rt&&Rt.setAttribute("camera","spectator",!1),mt=this.spectatorCameraEl=Et,pt.addEventListener("enter-vr",this.wrapRender),pt.addEventListener("exit-vr",this.unwrapRender),mt.setAttribute("camera","active",!1),mt.play(),pt.emit("camera-set-spectator",{cameraEl:Et}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(Et,Mt){var Rt,pt=this.sceneEl,mt;Rt=pt.renderer.xr.enabled,this.originalRender.call(pt.renderer,Et,Mt),!(!this.spectatorCameraEl||pt.isMobile||!Rt)&&(mt=this.spectatorCameraEl.components.camera.camera,pt.renderer.xr.enabled=!1,this.originalRender.call(pt.renderer,Et,mt),pt.renderer.xr.enabled=Rt)}});function Tt(Et){var Mt,Rt=Et.camera;Rt&&(Mt=Et.querySelector("["+bt+"]"),Mt&&Et.removeChild(Mt))}},"./src/systems/geometry.js":(St,Gt,vt)=>{var it=vt("./src/core/geometry.js").geometries,dt=vt("./src/core/system.js").registerSystem;St.exports.System=dt("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(Mt){var Rt=this.cache,pt,mt;return Mt.skipCache?bt(Mt):(mt=this.hash(Mt),pt=Rt[mt],Et(this.cacheCount,mt),pt||(pt=bt(Mt),Rt[mt]=pt,pt))},unuseGeometry:function(Mt){var Rt=this.cache,pt=this.cacheCount,mt,gt;Mt.skipCache||(gt=this.hash(Mt),Rt[gt]&&(Tt(pt,gt),!(pt[gt]>0)&&(mt=Rt[gt],mt.dispose(),delete Rt[gt],delete pt[gt])))},hash:function(Mt){return JSON.stringify(Mt)}});function bt(Mt){var Rt=Mt.primitive,pt=it[Rt]&&it[Rt].Geometry,mt=new pt;if(!pt)throw new Error("Unknown geometry `"+Rt+"`");return mt.init(Mt),mt.geometry}function Tt(Mt,Rt){Mt[Rt]--}function Et(Mt,Rt){Mt[Rt]=Mt[Rt]===void 0?1:Mt[Rt]+1}},"./src/systems/gltf-model.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/lib/three.js");function bt(Tt){return new Promise(function(Et,Mt){var Rt=document.createElement("script");document.body.appendChild(Rt),Rt.onload=Et,Rt.onerror=Mt,Rt.async=!0,Rt.src=Tt})}St.exports.System=it("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var Tt=this.data.dracoDecoderPath,Et=this.data.basisTranscoderPath,Mt=this.data.meshoptDecoderPath;!this.dracoLoader&&Tt&&(this.dracoLoader=new dt.DRACOLoader,this.dracoLoader.setDecoderPath(Tt)),!this.ktx2Loader&&Et&&(this.ktx2Loader=new dt.KTX2Loader,this.ktx2Loader.setTranscoderPath(Et).detectSupport(this.el.renderer)),!this.meshoptDecoder&&Mt&&(this.meshoptDecoder=bt(Mt).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(St,Gt,vt)=>{vt("./src/systems/camera.js"),vt("./src/systems/geometry.js"),vt("./src/systems/gltf-model.js"),vt("./src/systems/light.js"),vt("./src/systems/material.js"),vt("./src/systems/obb-collider.js"),vt("./src/systems/renderer.js"),vt("./src/systems/shadow.js"),vt("./src/systems/tracked-controls-webvr.js"),vt("./src/systems/tracked-controls-webxr.js"),vt("./src/systems/webxr.js")},"./src/systems/light.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/constants/index.js"),bt="data-aframe-default-light";St.exports.System=it("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(Tt){Tt.hasAttribute(bt)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var Tt,Et=this.sceneEl;if(this.defaultLights){Tt=document.querySelectorAll("["+bt+"]");for(var Mt=0;Mt<Tt.length;Mt++)Et.removeChild(Tt[Mt]);this.defaultLights=!1}},setupDefaultLights:function(){var Tt=this.sceneEl,Et,Mt;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(Et=document.createElement("a-entity"),Et.setAttribute("light",{color:"#BBB",type:"ambient"}),Et.setAttribute(bt,""),Et.setAttribute(dt.AFRAME_INJECTED,""),Tt.appendChild(Et),Mt=document.createElement("a-entity"),Mt.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),Mt.setAttribute("position",{x:-.5,y:1,z:1}),Mt.setAttribute(bt,""),Mt.setAttribute(dt.AFRAME_INJECTED,""),Tt.appendChild(Mt),this.defaultLights=!0)}})},"./src/systems/material.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/lib/three.js"),bt=vt("./src/utils/index.js"),Tt=vt("./src/utils/material.js").setTextureProperties,Et=vt("./src/utils/material.js").createCompatibleTexture,Mt=bt.debug,Rt=Mt("components:texture:error"),pt=Mt("components:texture:warn"),mt=new dt.ImageLoader;St.exports.System=it("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(Dt,Ht,Ut){this.loadTextureSource(Dt,function(Qt){var tn=Et(Qt);Tt(tn,Ht),Ut(tn)})},loadTextureSource:function(Dt,Ht){var Ut=this,Xt=this.sourceCache,Qt=this.hash(Dt);if(Xt[Qt]){Xt[Qt].then(Ht);return}if(Dt.tagName==="CANVAS"){on(new dt.Source(Dt));return}on(new Promise(tn));function tn(vn,fn){bt.srcLoader.validateSrc(Dt,Cn,dn);function Cn(An){Ut.loadImage(An,vn)}function dn(An){Ut.loadVideo(An,vn)}}function on(vn){Xt[Qt]=Promise.resolve(vn),Xt[Qt].then(Ht)}},loadCubeMapTexture:function(Dt,Ht){var Ut=this,Xt=0,Qt=new dt.CubeTexture;Qt.colorSpace=dt.SRGBColorSpace;function tn(vn){Ut.loadTextureSource(Dt[vn],function(fn){Qt.images[vn]=fn,Xt++,Xt===6&&(Qt.needsUpdate=!0,Ht(Qt))})}if(Dt.length!==6){pt("Cube map texture requires exactly 6 sources, got only %s sources",Dt.length);return}for(var on=0;on<Dt.length;on++)tn(on)},loadImage:function(Dt,Ht){if(typeof Dt!="string"){Ht(new dt.Source(Dt));return}Ht(gt(Dt))},loadVideo:function(Dt,Ht){var Ut;typeof Dt!="string"&&(Ut=Dt,xt(Ut)),Ut=Ut||Ct(Dt),Ht(new dt.Source(Ut))},hash:function(Dt){return Dt.tagName&&(Dt.id||Dt.src)||Dt},registerMaterial:function(Dt){this.materials[Dt.uuid]=Dt},unregisterMaterial:function(Dt){delete this.materials[Dt.uuid]}});function gt(Dt){return new Promise(Ht);function Ht(Ut,Xt){mt.load(Dt,Qt,function(){},function(tn){Rt("`$s` could not be fetched (Error code: %s; Response: %s)",tn.status,tn.statusText)});function Qt(tn){Ut(new dt.Source(tn))}}}function Ct(Dt){var Ht=document.createElement("video");return Ht.setAttribute("playsinline",""),Ht.setAttribute("webkit-playsinline",""),Ht.autoplay=!0,Ht.loop=!0,Ht.crossOrigin="anonymous",Ht.addEventListener("error",function(){pt("`%s` is not a valid video",Dt)},!0),Ht.src=Dt,Ht}function xt(Dt){return Dt.autoplay=Dt.hasAttribute("autoplay")&&Dt.getAttribute("autoplay")!=="false",Dt.controls=Dt.hasAttribute("controls")&&Dt.getAttribute("controls")!=="false",Dt.getAttribute("loop")==="false"&&Dt.removeAttribute("loop"),Dt.getAttribute("preload")==="false"&&(Dt.preload="none"),Dt.crossOrigin=Dt.crossOrigin||"anonymous",Dt.setAttribute("playsinline",""),Dt.setAttribute("webkit-playsinline",""),Dt}},"./src/systems/obb-collider.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem;it("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(dt){this.colliderEls.push(dt),this.data.showColliders?dt.components["obb-collider"].showCollider():dt.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(dt){var bt=this.colliderEls,Tt=bt.indexOf(dt);dt.components["obb-collider"].hideCollider(),Tt>-1&&bt.splice(Tt,1),bt.length===0&&(this.tick=void 0)},registerCollision:function(dt,bt){var Tt=this.collisions,Et=!1,Mt=dt.obb,Rt=bt.obb,pt=dt.renderColliderMesh,mt=bt.renderColliderMesh;pt&&pt.material.color.set(16711680),mt&&mt.material.color.set(16711680);for(var gt=0;gt<Tt.length;gt++)if(Tt[gt].componentA.obb===Mt&&Tt[gt].componentB.obb===Rt||Tt[gt].componentA.obb===Rt&&Tt[gt].componentB.obb===Mt){Et=!0,Tt[gt].detected=!0;break}Et||(Tt.push({componentA:dt,componentB:bt,detected:!0}),dt.el.emit("obbcollisionstarted",{trackedObject3D:dt.trackedObject3D,withEl:bt.el}),bt.el.emit("obbcollisionstarted",{trackedObject3D:bt.trackedObject3D,withEl:dt.el}))},resetCollisions:function(){for(var dt=this.collisions,bt=0;bt<dt.length;bt++)dt[bt].detected=!1},clearCollisions:function(){for(var dt=this.collisions,bt=[],Tt,Et,Mt,Rt,pt=0;pt<dt.length;pt++)dt[pt].detected?bt.push(dt[pt]):(Tt=dt[pt].componentA,Et=dt[pt].componentB,Mt=Tt.renderColliderMesh,Rt=Et.renderColliderMesh,Mt&&Mt.material.color.set(65280),Tt.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:Et.el}),Rt&&Rt.material.color.set(65280),Et.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:Tt.el}));this.collisions=bt},detectCollisions:function(){var dt,bt,Tt,Et,Mt=this.colliderEls;if(!(Mt.length<2)){this.resetCollisions();for(var Rt=0;Rt<Mt.length;Rt++)if(Tt=Mt[Rt].components["obb-collider"],dt=Mt[Rt].components["obb-collider"].obb,!(dt.halfSize.x===0||dt.halfSize.y===0||dt.halfSize.z===0))for(var pt=Rt+1;pt<Mt.length;pt++)Et=Mt[pt].components["obb-collider"],bt=Et.obb,!(bt.halfSize.x===0||bt.halfSize.y===0||bt.halfSize.z===0)&&dt.intersectsOBB(bt)&&this.registerCollision(Tt,Et);this.clearCollisions()}}})},"./src/systems/renderer.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/utils/index.js"),bt=vt("./src/lib/three.js"),Tt=dt.debug,Et=Tt("components:renderer:warn");St.exports.System=it("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:dt.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var mt=this.data,gt=this.el,Ct=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),xt=gt.renderer;mt.physicallyCorrectLights||(xt.useLegacyLights=!mt.physicallyCorrectLights),xt.toneMapping=bt[Ct+"ToneMapping"],bt.Texture.DEFAULT_ANISOTROPY=mt.anisotropy,bt.ColorManagement.enabled=mt.colorManagement,xt.outputColorSpace=mt.colorManagement?bt.SRGBColorSpace:bt.LinearSRGBColorSpace,gt.hasAttribute("antialias")&&Et('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),gt.hasAttribute("logarithmicDepthBuffer")&&Et('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),xt.sortObjects=!0,xt.setOpaqueSort(Mt)},update:function(){var mt=this.data,gt=this.el,Ct=gt.renderer,xt=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);Ct.toneMapping=bt[xt+"ToneMapping"],Ct.toneMappingExposure=mt.exposure,Ct.xr.setFoveation(mt.foveationLevel),mt.sortObjects&&Et('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),mt.sortTransparentObjects?Ct.setTransparentSort(pt):Ct.setTransparentSort(Rt)},applyColorCorrection:function(mt){!this.data.colorManagement||!mt||mt.isTexture&&mt.colorSpace!==bt.SRGBColorSpace&&(mt.colorSpace=bt.SRGBColorSpace,mt.needsUpdate=!0)},setWebXRFrameRate:function(mt){var gt=this.data,Ct=mt.supportedFrameRates;if(Ct&&mt.updateTargetFrameRate){var xt;Ct.includes(90)?xt=gt.highRefreshRate?90:72:xt=gt.highRefreshRate?72:60,mt.updateTargetFrameRate(xt).catch(function(Dt){console.warn("failed to set target frame rate of "+xt+". Error info: "+Dt)})}}});function Mt(mt,gt){return mt.groupOrder!==gt.groupOrder?mt.groupOrder-gt.groupOrder:mt.renderOrder!==gt.renderOrder?mt.renderOrder-gt.renderOrder:mt.z-gt.z}function Rt(mt,gt){return mt.groupOrder!==gt.groupOrder?mt.groupOrder-gt.groupOrder:mt.renderOrder-gt.renderOrder}function pt(mt,gt){return mt.groupOrder!==gt.groupOrder?mt.groupOrder-gt.groupOrder:mt.renderOrder!==gt.renderOrder?mt.renderOrder-gt.renderOrder:gt.z-mt.z}St.exports.sortFrontToBack=Mt,St.exports.sortRenderOrderOnly=Rt,St.exports.sortBackToFront=pt},"./src/systems/shadow.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/lib/three.js"),bt={basic:dt.BasicShadowMap,pcf:dt.PCFShadowMap,pcfsoft:dt.PCFSoftShadowMap};St.exports.System=it("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var Et=this.sceneEl,Mt=this.data;this.shadowMapEnabled=!1,Et.renderer.shadowMap.type=bt[Mt.type],Et.renderer.shadowMap.autoUpdate=Mt.autoUpdate},update:function(Et){Et.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(Et){var Mt=this.sceneEl,Rt=this.sceneEl.renderer;this.shadowMapEnabled=Et;var pt=this.data.enabled&&this.shadowMapEnabled;Rt&&pt!==Rt.shadowMap.enabled&&(Rt.shadowMap.enabled=pt,Tt(Mt))}});function Tt(Et){Et.hasLoaded&&Et.object3D.traverse(function(Mt){if(Mt.material)for(var Rt=Array.isArray(Mt.material)?Mt.material:[Mt.material],pt=0;pt<Rt.length;pt++)Rt[pt].needsUpdate=!0})}},"./src/systems/tracked-controls-webvr.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/utils/index.js"),bt=dt.device.isWebXRAvailable;St.exports.System=it("tracked-controls-webvr",{init:function(){var Tt=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=dt.throttle(this.updateControllerList,500,this),!bt&&navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(Et){Et.length&&(Tt.vrDisplay=Et[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var Tt=this.controllers,Et,Mt,Rt,pt;if(Mt=navigator.getGamepads&&navigator.getGamepads(),!!Mt){for(pt=Tt.length,Tt.length=0,Rt=0;Rt<Mt.length;++Rt)Et=Mt[Rt],Et&&Et.pose&&Tt.push(Et);Tt.length!==pt&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/utils/index.js");St.exports.System=it("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=dt.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var bt=this,Tt=this.el.xrSession;if(!Tt){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var Et=bt.el.sceneEl.systems.webxr.sessionReferenceSpaceType;Tt.requestReferenceSpace(Et).then(function(Mt){bt.referenceSpace=Mt}).catch(function(Mt){throw bt.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(Et,'tracked-controls-webxr uses reference space "'+Et+'".'),Mt})},updateControllerList:function(){var bt=this.el.xrSession,Tt=this.oldControllers,Et;if(!bt){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(bt.inputSources){if(this.controllers=bt.inputSources,this.oldControllersLength===this.controllers.length){var Mt=!0;for(Et=0;Et<this.controllers.length;++Et)if(!(this.controllers[Et]===Tt[Et]&&this.controllers[Et].gamepad===Tt[Et].gamepad)){Mt=!1;break}if(Mt)return}for(Tt.length=0,Et=0;Et<this.controllers.length;Et++)Tt.push(this.controllers[Et]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(St,Gt,vt)=>{var it=vt("./src/core/system.js").registerSystem,dt=vt("./src/utils/index.js"),bt=dt.debug("systems:webxr:warn");St.exports.System=it("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var Tt=this.data;this.sessionConfiguration={requiredFeatures:Tt.requiredFeatures,optionalFeatures:Tt.optionalFeatures},this.sessionReferenceSpaceType=Tt.referenceSpaceType,Tt.overlayElement&&(Tt.overlayElement.classList.remove("a-dom-overlay"),Tt.optionalFeatures.includes("dom-overlay")||(Tt.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",Tt)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:Tt.overlayElement},Tt.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(Tt){return!!(Tt==="viewer"||Tt==="local"||this.sessionConfiguration.requiredFeatures.includes(Tt)||this.sessionConfiguration.optionalFeatures.includes(Tt))},warnIfFeatureNotRequested:function(Tt,Et){if(!this.wasFeatureRequested(Tt)){var Mt='Please add the feature "'+Tt+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;bt((Et?Et+" ":"")+Mt)}}})},"./src/utils/coordinates.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=it("utils:coordinates:warn"),bt=["x","y","z","w"],Tt=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;St.exports.regex=Tt;var Et=/\s+/g;function Mt(Ct,xt,Dt){var Ht,Ut,Xt,Qt,tn=Dt&&typeof Dt=="object"?Dt:{},on,vn,fn,Cn;if(Ct&&Ct instanceof Object)return on=Ct.x===void 0?xt&&xt.x:Ct.x,vn=Ct.y===void 0?xt&&xt.y:Ct.y,fn=Ct.z===void 0?xt&&xt.z:Ct.z,Cn=Ct.w===void 0?xt&&xt.w:Ct.w,on!=null&&(tn.x=gt(on)),vn!=null&&(tn.y=gt(vn)),fn!=null&&(tn.z=gt(fn)),Cn!=null&&(tn.w=gt(Cn)),tn;if(Ct==null)return typeof xt=="object"?Object.assign(tn,xt):xt;for(Ht=Ct.trim().split(Et),Qt=0;Qt<bt.length;Qt++)if(Xt=bt[Qt],Ht[Qt])tn[Xt]=parseFloat(Ht[Qt],10);else{if(Ut=xt&&xt[Xt],Ut===void 0)continue;tn[Xt]=gt(Ut)}return tn}St.exports.parse=Mt;function Rt(Ct){var xt;return typeof Ct!="object"?Ct:(xt=Ct.x+" "+Ct.y,Ct.z!=null&&(xt+=" "+Ct.z),Ct.w!=null&&(xt+=" "+Ct.w),xt)}St.exports.stringify=Rt;function pt(Ct,xt){return typeof Ct!="object"||typeof xt!="object"?Ct===xt:Ct.x===xt.x&&Ct.y===xt.y&&Ct.z===xt.z&&Ct.w===xt.w}St.exports.equals=pt;function mt(Ct){return Tt.test(Ct)}St.exports.isCoordinates=mt,St.exports.isCoordinate=function(Ct){return dt("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),mt(Ct)};function gt(Ct){return Ct!=null&&Ct.constructor===String?parseFloat(Ct,10):Ct}St.exports.toVector3=function(Ct){return new THREE.Vector3(Ct.x,Ct.y,Ct.z)}},"./src/utils/debug.js":(St,Gt,vt)=>{var it=vt("./node_modules/debug/src/browser.js"),dt=vt("./src/utils/device.js").isBrowserEnvironment,bt={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};it.formatArgs=Tt;function Tt(mt){if(mt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+mt[0]+(this.useColors?"%c ":" "),!!this.useColors){this.color=Mt(this.namespace);var gt="color: "+this.color;mt.splice(1,0,gt,"color: inherit");var Ct=0,xt=0;mt[0].replace(/%[a-zA-Z%]/g,function(Dt){Dt!=="%%"&&(Ct++,Dt==="%c"&&(xt=Ct))}),mt.splice(xt,0,gt)}}function Et(mt){var gt=mt.split(":");return gt[gt.length-1]}function Mt(mt){var gt=Et(mt),Ct=bt.colors&&bt.colors[gt];return Ct||null}function Rt(){try{return window.localStorage}catch{}}var pt=Rt();pt&&(parseInt(pt.logs,10)||pt.logs==="true")?it.enable("*"):it.enable("*:error,*:info,*:warn"),dt&&(window.logs=it),St.exports=it},"./src/utils/device.js":(St,Gt,vt)=>{var it=vt("./node_modules/debug/src/browser.js")("device:error"),dt,bt=!1,Tt=!1,Et=St.exports.isWebXRAvailable=navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(fn){var Cn;Et||(Cn=document.createElement("canvas"),dt=fn.display,Cn.getContext("webgl",{}),dt.requestPresent([{source:Cn}]).then(function(){},function(){}))}),Et){var Mt=function(){var fn=document.querySelector("a-scene");if(!fn){window.addEventListener("DOMContentLoaded",Mt);return}fn.hasLoaded?fn.components["xr-mode-ui"].updateEnterInterfaces():fn.addEventListener("loaded",Mt)},Rt=function(fn){it("WebXR session support error: "+fn.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(fn){bt=fn,Mt()}).catch(Rt),navigator.xr.isSessionSupported("immersive-ar").then(function(fn){Tt=fn,Mt()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){bt=!0,Mt()}).catch(Rt),navigator.xr.supportsSession("immersive-ar").then(function(){Tt=!0,Mt()}).catch(function(){})):it("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(fn){var Cn=document.querySelector("a-scene");dt=fn.length&&fn[0],Cn&&Cn.emit("displayconnected",{vrDisplay:dt})});function pt(){return dt}St.exports.getVRDisplay=pt;function mt(){return bt||Tt||!!pt()}St.exports.checkHeadsetConnected=mt;function gt(){return Tt}St.exports.checkARSupport=gt;function Ct(){return bt}St.exports.checkVRSupport=Ct;var xt=function(){var fn=!1;return function(Cn){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Cn)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Cn.substr(0,4)))&&(fn=!0),(Ut()||Dt()||vn())&&(fn=!0),on()&&(fn=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return fn}}();St.exports.isMobile=xt;function Dt(fn){var Cn=fn||window.navigator.userAgent,dn=/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(Cn);return dn||Ht()}St.exports.isTablet=Dt;function Ht(fn,Cn,dn){var An=fn||window.navigator.userAgent,nn=Cn||window.navigator.platform,Zt=dn||window.navigator.maxTouchPoints||0;return(nn==="iPad"||nn==="MacIntel")&&Zt>0&&/Macintosh|Intel|iPad|ipad/i.test(An)&&!window.MSStream}St.exports.isIpad=Ht;function Ut(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}St.exports.isIOS=Ut;function Xt(){return!xt()&&!on()&&window.orientation!==void 0}St.exports.isMobileDeviceRequestingDesktopSite=Xt;function Qt(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}St.exports.isOculusBrowser=Qt;function tn(){return/(Mobile VR)/i.test(window.navigator.userAgent)}St.exports.isFirefoxReality=tn;function on(){return Qt()||tn()}St.exports.isMobileVR=on;function vn(){return/R7 Build/.test(window.navigator.userAgent)}St.exports.isR7=vn,St.exports.isLandscape=function(){var fn=window.orientation;return vn()&&(fn+=90),fn===90||fn===-90},St.exports.isBrowserEnvironment=typeof process>"u"||process.browser===!0,St.exports.isNodeEnvironment=!St.exports.isBrowserEnvironment},"./src/utils/entity.js":(St,Gt,vt)=>{var it=vt("./src/utils/split.js").split;function dt(bt,Tt){Tt=Tt||".";var Et=it(bt,Tt);return Et.length===1?Et[0]:Et}St.exports.getComponentPropertyPath=dt,St.exports.getComponentProperty=function(bt,Tt,Et){var Mt;return Et=Et||".",Tt.indexOf(Et)!==-1?(Mt=dt(Tt,Et),Mt.constructor===String?bt.getAttribute(Mt):bt.getAttribute(Mt[0])[Mt[1]]):bt.getAttribute(Tt)},St.exports.setComponentProperty=function(bt,Tt,Et,Mt){var Rt;if(Mt=Mt||".",Tt.indexOf(Mt)!==-1){Rt=dt(Tt,Mt),Rt.constructor===String?bt.setAttribute(Rt,Et):bt.setAttribute(Rt[0],Rt[1],Et);return}bt.setAttribute(Tt,Et)}},"./src/utils/forceCanvasResizeSafariMobile.js":St=>{St.exports=function(vt){var it=vt.style.width,dt=vt.style.height;vt.style.width=parseInt(it,10)+1+"px",vt.style.height=parseInt(dt,10)+1+"px",setTimeout(function(){vt.style.width=it,vt.style.height=dt},200)}},"./src/utils/index.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=vt("./node_modules/deep-assign/index.js"),bt=vt("./src/utils/device.js"),Tt=vt("./src/utils/object-pool.js"),Et=it("utils:warn");St.exports.bind=function(Rt){return Rt.bind.apply(Rt,Array.prototype.slice.call(arguments,1))},St.exports.coordinates=vt("./src/utils/coordinates.js"),St.exports.debug=it,St.exports.device=bt,St.exports.entity=vt("./src/utils/entity.js"),St.exports.forceCanvasResizeSafariMobile=vt("./src/utils/forceCanvasResizeSafariMobile.js"),St.exports.material=vt("./src/utils/material.js"),St.exports.objectPool=Tt,St.exports.split=vt("./src/utils/split.js").split,St.exports.styleParser=vt("./src/utils/styleParser.js"),St.exports.trackedControls=vt("./src/utils/tracked-controls.js"),St.exports.checkHeadsetConnected=function(){return Et("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),bt.checkHeadsetConnected(arguments)},St.exports.isGearVR=St.exports.device.isGearVR=function(){Et("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},St.exports.isIOS=function(){return Et("`utils.isIOS` has moved to `utils.device.isIOS`"),bt.isIOS(arguments)},St.exports.isOculusGo=St.exports.device.isOculusGo=function(){Et("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},St.exports.isMobile=function(){return Et("`utils.isMobile has moved to `utils.device.isMobile`"),bt.isMobile(arguments)},St.exports.throttle=function(Rt,pt,mt){var gt;return mt&&(Rt=Rt.bind(mt)),function(){var Ct=Date.now(),xt=typeof gt>"u"?pt:Ct-gt;(typeof gt>"u"||xt>=pt)&&(gt=Ct,Rt.apply(null,arguments))}},St.exports.throttleLeadingAndTrailing=function(Rt,pt,mt){var gt,Ct;mt&&(Rt=Rt.bind(mt));var xt,Dt=function(){gt=Date.now(),Rt.apply(this,xt),Ct=void 0};return function(){var Ht=Date.now(),Ut=typeof gt>"u"?pt:Ht-gt;Ut>=pt?(clearTimeout(Ct),Ct=void 0,gt=Ht,Rt.apply(null,arguments)):(Ct=Ct||setTimeout(Dt,pt-Ut),xt=arguments)}},St.exports.throttleTick=function(Rt,pt,mt){var gt;return mt&&(Rt=Rt.bind(mt)),function(Ct,xt){var Dt=typeof gt>"u"?xt:Ct-gt;(typeof gt>"u"||Dt>=pt)&&(gt=Ct,Rt(Ct,Dt))}},St.exports.debounce=function(Rt,pt,mt){var gt;return function(){var Ct=this,xt=arguments,Dt=function(){gt=null,mt||Rt.apply(Ct,xt)},Ht=mt&&!gt;clearTimeout(gt),gt=setTimeout(Dt,pt),Ht&&Rt.apply(Ct,xt)}},St.exports.extend=Object.assign,St.exports.extendDeep=dt,St.exports.clone=function(Rt){return JSON.parse(JSON.stringify(Rt))};var Mt=function(){var Rt=Tt.createPool(function(){return[]});return function(pt,mt){var gt,Ct,xt,Dt,Ht,Ut;if(pt===void 0||mt===void 0||pt===null||mt===null||!(pt&&mt&&pt.constructor===Object&&mt.constructor===Object||pt.constructor===Array&&mt.constructor===Array))return pt===mt;Ct=Rt.use(),xt=Rt.use(),Ct.length=0,xt.length=0;for(gt in pt)Ct.push(gt);for(gt in mt)xt.push(gt);if(Ct.length!==xt.length)return Rt.recycle(Ct),Rt.recycle(xt),!1;for(Dt=0;Dt<Ct.length;++Dt)if(Ht=pt[Ct[Dt]],Ut=mt[Ct[Dt]],typeof Ht=="object"||typeof Ut=="object"||Array.isArray(Ht)&&Array.isArray(Ut)){if(Ht===Ut)continue;if(!Mt(Ht,Ut))return Rt.recycle(Ct),Rt.recycle(xt),!1}else if(Ht!==Ut)return Rt.recycle(Ct),Rt.recycle(xt),!1;return Rt.recycle(Ct),Rt.recycle(xt),!0}}();St.exports.deepEqual=Mt,St.exports.diff=function(){var Rt=[];return function(pt,mt,gt){var Ct,xt,Dt,Ht,Ut,Xt,Qt;Ht=gt||{},Rt.length=0;for(Ut in pt)Rt.push(Ut);if(!mt)return Ht;for(Dt in mt)Rt.indexOf(Dt)===-1&&Rt.push(Dt);for(Xt=0;Xt<Rt.length;Xt++)Ut=Rt[Xt],Ct=pt[Ut],xt=mt[Ut],Qt=Ct&&xt&&Ct.constructor===Object&&xt.constructor===Object,(Qt&&!Mt(Ct,xt)||!Qt&&Ct!==xt)&&(Ht[Ut]=xt);return Ht}}(),St.exports.shouldCaptureKeyEvent=function(Rt){return Rt.metaKey?!1:document.activeElement===document.body},St.exports.splitString=function(Rt,pt){typeof pt>"u"&&(pt=" ");var mt=new RegExp(pt,"g");return Rt=(Rt||"").replace(mt,pt),Rt.split(pt)},St.exports.getElData=function(Rt,pt){pt=pt||{};var mt={};Object.keys(pt).forEach(gt);function gt(Ct){Rt.hasAttribute(Ct)&&(mt[Ct]=Rt.getAttribute(Ct))}return mt},St.exports.getUrlParameter=function(Rt){Rt=Rt.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var pt=new RegExp("[\\?&]"+Rt+"=([^&#]*)"),mt=pt.exec(location.search);return mt===null?"":decodeURIComponent(mt[1].replace(/\+/g," "))},St.exports.isIframed=function(){return window.top!==window.self},St.exports.findAllScenes=function(Rt){for(var pt=[],mt=Rt.getElementsByTagName("*"),gt=0,Ct=mt.length;gt<Ct;gt++)mt[gt].isScene&&pt.push(mt[gt]);return pt},St.exports.srcLoader=vt("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/isIOSOlderThan10.js":St=>{St.exports=function(vt){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(vt)}},"./src/utils/material.js":(St,Gt,vt)=>{var it=vt("./src/lib/three.js"),dt=vt("./src/utils/src-loader.js"),bt=vt("./src/utils/debug.js"),Tt=bt("utils:material:warn"),Et=new Set(["emissiveMap","envMap","map","specularMap"]);function Mt(Ct,xt){var Dt=xt.offset||{x:0,y:0},Ht=xt.repeat||{x:1,y:1},Ut=xt.npot||!1,Xt=xt.anisotropy||it.Texture.DEFAULT_ANISOTROPY,Qt=Ct.wrapS,tn=Ct.wrapT,on=Ct.magFilter,vn=Ct.minFilter;Ut&&(Qt=it.ClampToEdgeWrapping,tn=it.ClampToEdgeWrapping,on=it.LinearFilter,vn=it.LinearFilter),(Ht.x!==1||Ht.y!==1)&&(Qt=it.RepeatWrapping,tn=it.RepeatWrapping),Ct.offset.set(Dt.x,Dt.y),Ct.repeat.set(Ht.x,Ht.y),(Ct.wrapS!==Qt||Ct.wrapT!==tn||Ct.magFilter!==on||Ct.minFilter!==vn||Ct.anisotropy!==Xt)&&(Ct.wrapS=Qt,Ct.wrapT=tn,Ct.magFilter=on,Ct.minFilter=vn,Ct.anisotropy=Xt,Ct.needsUpdate=!0)}St.exports.setTextureProperties=Mt,St.exports.updateMapMaterialFromData=function(Ct,xt,Dt,Ht){var Ut=Dt.el,Xt=Dt.material,Qt=Ut.sceneEl.systems.renderer,tn=Ht[xt];if(Dt.materialSrcs||(Dt.materialSrcs={}),!tn){delete Dt.materialSrcs[Ct],vn(null);return}if(tn===Dt.materialSrcs[Ct]&&Xt[Ct]){Mt(Xt[Ct],Ht);return}Dt.materialSrcs[Ct]=tn,tn instanceof it.Texture?vn(tn):Ut.sceneEl.systems.material.loadTextureSource(tn,on);function on(fn){if(Dt.materialSrcs[Ct]===tn){var Cn=Xt[Ct];Cn&&(fn===null||!mt(Cn,fn))&&(Cn=null),!Cn&&fn&&(Cn=gt(fn)),Cn&&(Cn.source!==fn&&(Cn.source=fn,Cn.needsUpdate=!0),Et.has(Ct)&&Qt.applyColorCorrection(Cn),Mt(Cn,Ht)),vn(Cn)}}function vn(fn){Xt[Ct]!==fn&&(Xt[Ct]&&Xt[Ct].dispose(),Xt[Ct]=fn,Xt.needsUpdate=!0,pt(Ut,fn))}},St.exports.updateMap=function(Ct,xt){return St.exports.updateMapMaterialFromData("map","src",Ct,xt)},St.exports.updateDistortionMap=function(Ct,xt,Dt){var Ht=Ct;Ct==="ambientOcclusion"&&(Ht="ao");var Ut={};return Ut.src=Dt[Ct+"Map"],Ut.offset=Dt[Ct+"TextureOffset"],Ut.repeat=Dt[Ct+"TextureRepeat"],Ut.wrap=Dt[Ct+"TextureWrap"],St.exports.updateMapMaterialFromData(Ht+"Map","src",xt,Ut)};var Rt={};St.exports.updateEnvMap=function(Ct,xt){var Dt=Ct.material,Ht=Ct.el,Ut="envMap",Xt=xt.envMap,Qt=xt.sphericalEnvMap,tn=xt.refract;if(Qt&&(Xt=Qt,Tt("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),Ct.materialSrcs||(Ct.materialSrcs={}),!Xt){delete Ct.materialSrcs[Ut],Dt.envMap=null,Dt.needsUpdate=!0;return}if(Ct.materialSrcs[Ut]=Xt,Rt[Xt]){Rt[Xt].then(on);return}Rt[Xt]=new Promise(function(vn){dt.validateEnvMapSrc(Xt,function(Cn){Ht.sceneEl.systems.material.loadCubeMapTexture(Cn,function(dn){dn.mapping=tn?it.CubeRefractionMapping:it.CubeReflectionMapping,on(dn),vn(dn)})},function(Cn){Ht.sceneEl.systems.material.loadTexture(Cn,{src:Cn},function(dn){dn.mapping=tn?it.EquirectangularRefractionMapping:it.EquirectangularReflectionMapping,on(dn),vn(dn)})})});function on(vn){Ct.materialSrcs[Ut]===Xt&&(Dt.envMap=vn,Dt.needsUpdate=!0,pt(Ht,vn))}};function pt(Ct,xt){if(!xt||(Ct.emit("materialtextureloaded",{src:xt.image,texture:xt}),!xt.image||xt.image.tagName!=="VIDEO"))return;xt.image.addEventListener("loadeddata",Dt),xt.image.addEventListener("ended",Ht);function Dt(){Ct.emit("materialvideoloadeddata",{src:xt.image,texture:xt})}function Ht(){Ct.emit("materialvideoended",{src:xt.image,texture:xt})}xt.addEventListener("dispose",function(){xt.image.removeEventListener("loadeddata",Dt),xt.image.removeEventListener("ended",Ht)})}St.exports.handleTextureEvents=pt;function mt(Ct,xt){return xt.data instanceof HTMLCanvasElement?Ct.isCanvasTexture:xt.data instanceof HTMLVideoElement?Ct.isVideoTexture&&Ct.source===xt:Ct.isTexture&&!Ct.isCanvasTexture&&!Ct.isVideoTexture}St.exports.isCompatibleTexture=mt;function gt(Ct){var xt;return Ct.data instanceof HTMLCanvasElement?xt=new it.CanvasTexture:Ct.data instanceof HTMLVideoElement?xt=new it.VideoTexture(Ct.data):xt=new it.Texture,xt.source=Ct,xt.needsUpdate=!0,xt}St.exports.createCompatibleTexture=gt},"./src/utils/math.js":St=>{function Gt(it,dt,bt){var Tt=dt.dot(it);return(Tt-dt.dot(bt))/dt.length()}function vt(it,dt,bt,Tt){var Et=Gt(it,dt,bt);return Tt.copy(dt),Tt.multiplyScalar(Et),Tt.add(bt),Tt}St.exports.distanceOfPointFromPlane=Gt,St.exports.nearestPointInPlane=vt},"./src/utils/object-pool.js":St=>{var Gt=Object.freeze(Object.create(null));function vt(){return{}}St.exports.createPool=function(Tt){var Et=[],Mt=null;Tt=Tt||vt;function Rt(){var Ct;return(Mt===null||Mt===Et.length)&&mt(Et.length||5),Ct=Et[Mt],Et[Mt++]=Gt,it(Ct),Ct}function pt(Ct){if(Ct instanceof Object){if(Mt===null||Mt===-1){Et[Et.length]=Ct;return}Et[--Mt]=Ct}}function mt(Ct){var xt,Dt;if(Ct=Ct===void 0?Et.length:Ct,Ct>0&&Mt==null&&(Mt=0),Ct>0)for(xt=Et.length,Et.length+=Number(Ct),Dt=xt;Dt<Et.length;Dt++)Et[Dt]=Tt();return Et.length}function gt(){return Et.length}return{grow:mt,pool:Et,recycle:pt,size:gt,use:Rt}};function it(bt){var Tt;if(!(!bt||bt.constructor!==Object))for(Tt in bt)bt[Tt]=void 0}St.exports.clearObject=it;function dt(bt,Tt){var Et;if(!(!bt||bt.constructor!==Object))for(Et in bt)Et in Tt||delete bt[Et]}St.exports.removeUnusedKeys=dt},"./src/utils/split.js":St=>{St.exports.split=function(){var Gt={};return function(vt,it){return it in Gt||(Gt[it]={}),vt in Gt[it]||(Gt[it][vt]=vt.split(it)),Gt[it][vt]}}()},"./src/utils/src-loader.js":(St,Gt,vt)=>{var it=vt("./src/utils/debug.js"),dt=it("utils:src-loader:warn");function bt(gt,Ct,xt){Rt(gt,function(Ht){if(Ht){Ct(gt);return}xt(gt)})}function Tt(gt,Ct,xt){var Dt,Ht="",Ut,Xt,Qt=[];if(typeof gt=="string"){let on=function(vn){Qt.push(vn),Qt.length===6&&Ct(Qt)};for(Ut=0;Ut<5;Ut++)Ht+="(url\\((?:[^\\)]+)\\),\\s*)";if(Ht+="(url\\((?:[^\\)]+)\\)\\s*)",Xt=gt.match(new RegExp(Ht)),Xt){for(Ut=1;Ut<7;Ut++)bt(Mt(Xt[Ut]),on);return}if(!gt.startsWith("#")){var tn=Mt(gt);bt(tn||gt,xt);return}}if(gt.tagName?Dt=gt:Dt=mt(gt),!!Dt){if(Dt.tagName==="A-CUBEMAP"&&Dt.srcs)return Ct(Dt.srcs);if(Dt.tagName==="IMG")return xt(Dt);dt('Selector "%s" does not point to <a-cubemap> or <img>',gt)}}function Et(gt,Ct){return Tt(gt,Ct,function(){dt("Expected cubemap but got image")})}function Mt(gt){var Ct=gt.match(/url\((.+)\)/);if(Ct)return Ct[1]}function Rt(gt,Ct){var xt;if(gt.tagName){Ct(gt.tagName==="IMG");return}xt=new XMLHttpRequest,xt.open("HEAD",gt),xt.addEventListener("load",function(Dt){var Ht;xt.status>=200&&xt.status<300?(Ht=xt.getResponseHeader("Content-Type"),Ht==null?pt(gt,Ct):Ht.startsWith("image")?Ct(!0):Ct(!1)):pt(gt,Ct),xt.abort()}),xt.send()}function pt(gt,Ct){var xt=new Image;xt.addEventListener("load",Dt);function Dt(){Ct(!0)}xt.addEventListener("error",Ht);function Ht(){Ct(!1)}xt.src=gt}function mt(gt){try{var Ct=document.querySelector(gt);return Ct||dt('No element was found matching the selector: "%s"',gt),Ct}catch{dt('"%s" is not a valid selector',gt);return}}St.exports={parseUrl:Mt,validateSrc:bt,validateCubemapSrc:Et,validateEnvMapSrc:Tt}},"./src/utils/styleParser.js":St=>{var Gt=/-([a-z])/g;St.exports.parse=function(Et,Mt){var Rt;return typeof Et!="string"||(Rt=dt(Et,Mt),Rt[""])?Et:Rt},St.exports.stringify=function(Et){return typeof Et=="string"?Et:bt(Et)};function vt(Et){return Et.replace(Gt,Tt)}St.exports.toCamelCase=vt;var it=function(){var Et=[],Mt=/url\([^)]+$/;return function(pt){var mt="",gt,Ct=0,xt=";";for(Et.length=0;Ct<pt.length;){if(gt=pt.indexOf(xt,Ct),gt===-1&&(gt=pt.length),mt+=pt.substring(Ct,gt),Mt.test(mt)){mt+=";",Ct=gt+1;continue}Et.push(mt.trim()),mt="",Ct=gt+1}return Et}}();function dt(Et,Mt){var Rt,pt,mt,gt,Ct,xt;for(Mt=Mt||{},Rt=it(Et),pt=0;pt<Rt.length;pt++)mt=Rt[pt],mt&&(gt=mt.indexOf(":"),Ct=mt.substr(0,gt).trim(),xt=mt.substr(gt+1).trim(),Mt[vt(Ct)]=xt);return Mt}function bt(Et){var Mt,Rt=0,pt=0,mt="";for(Mt in Et)Rt++;for(Mt in Et)mt+=Mt+": "+Et[Mt],pt<Rt-1&&(mt+="; "),pt++;return mt}function Tt(Et){return Et[1].toUpperCase()}},"./src/utils/tracked-controls.js":(St,Gt,vt)=>{var it=vt("./src/constants/index.js").DEFAULT_HANDEDNESS,dt=["x","y","z","w"],bt=2;St.exports.checkControllerPresentAndSetup=function(pt,mt,gt){var Ct=pt.el,xt,Dt=Ct.sceneEl.hasWebXR,Ht=Dt?Et:Tt,Ut;if(xt=Ht(pt,mt,gt),Ut=!!xt,pt.controllerPresent&&!pt.controllerEventsActive&&!Dt&&pt.addEventListeners(),Ut===pt.controllerPresent)return Ut;pt.controllerPresent=Ut,Ut?(pt.addEventListeners(),pt.injectTrackedControls(xt),Ct.emit("controllerconnected",{name:pt.name,component:pt})):(pt.removeEventListeners(),Ct.emit("controllerdisconnected",{name:pt.name,component:pt}))};function Tt(pt,mt,gt){var Ct,xt=pt.el.sceneEl,Dt,Ht=gt.index||0;return!mt||(Dt=xt&&xt.systems["tracked-controls-webvr"],!Dt)||(Ct=Dt.controllers,!Ct.length)?!1:!!Mt(Ct,null,mt,gt.hand,Ht)}function Et(pt,mt,gt){var Ct,xt=pt.el.sceneEl,Dt=xt&&xt.systems["tracked-controls-webxr"];return!Dt||(Ct=Dt.controllers,!Ct||!Ct.length)?!1:Rt(Ct,mt,gt.hand,gt.index,gt.iterateControllerProfiles,gt.handTracking)}St.exports.isControllerPresentWebVR=Tt,St.exports.isControllerPresentWebXR=Et;function Mt(pt,mt,gt,Ct,xt){var Dt,Ht,Ut=0,Xt=xt>=0?xt:0;for(Ht=0;Ht<pt.length;Ht++)if(Dt=pt[Ht],!(gt&&!Dt.id.startsWith(gt))&&!(!gt&&Dt.id!==mt)&&!(Ct&&Dt.hand&&Ct!==Dt.hand)){if(Ct&&!Dt.hand)Xt=bt*xt+(Ct===it?0:1);else return Dt;if(Ut===Xt)return Dt;++Ut}}function Rt(pt,mt,gt,Ct,xt,Dt){var Ht,Ut,Xt,Qt=!1,tn,on;for(Ht=0;Ht<pt.length;Ht++){if(Xt=pt[Ht],on=Xt.profiles,Dt)Qt=Xt.hand;else if(xt)for(Ut=0;Ut<on.length&&(Qt=on[Ut].startsWith(mt),!Qt);Ut++);else Qt=on.length>0&&on[0].startsWith(mt);if(Qt){if(tn=Xt.handedness==="right"||Xt.handedness==="left",tn){if(Xt.handedness===gt)return pt[Ht]}else if(Ht===Ct)return pt[Ht]}}}St.exports.findMatchingControllerWebVR=Mt,St.exports.findMatchingControllerWebXR=Rt,St.exports.emitIfAxesChanged=function(pt,mt,gt){var Ct,xt,Dt,Ht,Ut;for(xt in mt){for(Ct=mt[xt],Dt=!1,Ut=0;Ut<Ct.length;Ut++)gt.detail.changed[Ct[Ut]]&&(Dt=!0);if(Dt){for(Ht={},Ut=0;Ut<Ct.length;Ut++)Ht[dt[Ut]]=gt.detail.axis[Ct[Ut]];pt.el.emit(xt+"moved",Ht)}}},St.exports.onButtonEvent=function(pt,mt,gt,Ct){var xt=Ct?gt.mapping[Ct]:gt.mapping,Dt=xt.buttons[pt];gt.el.emit(Dt+mt),gt.updateModel&&gt.updateModel(Dt,mt)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(St){var Gt=this;this.object=St,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var vt=function(bt){Gt.deviceOrientation=bt},it=function(){Gt.screenOrientation=window.orientation||0},dt=function(){var bt=new THREE.Vector3(0,0,1),Tt=new THREE.Euler,Et=new THREE.Quaternion,Mt=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(Rt,pt,mt,gt,Ct){Tt.set(mt,pt,-gt,"YXZ"),Rt.setFromEuler(Tt),Rt.multiply(Mt),Rt.multiply(Et.setFromAxisAngle(bt,-Ct))}}();this.connect=function(){it(),window.addEventListener("orientationchange",it,!1),window.addEventListener("deviceorientation",vt,!1),Gt.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",it,!1),window.removeEventListener("deviceorientation",vt,!1),Gt.enabled=!1},this.update=function(){if(Gt.enabled!==!1){var bt=Gt.deviceOrientation;if(bt){var Tt=bt.alpha?THREE.MathUtils.degToRad(bt.alpha)+Gt.alphaOffset:0,Et=bt.beta?THREE.MathUtils.degToRad(bt.beta):0,Mt=bt.gamma?THREE.MathUtils.degToRad(bt.gamma):0,Rt=Gt.screenOrientation?THREE.MathUtils.degToRad(Gt.screenOrientation):0;dt(Gt.object.quaternion,Tt,Et,Mt,Rt)}}},this.dispose=function(){Gt.disconnect()},this.connect()}},"./vendor/rStats.extras.js":St=>{window.glStats=function(){var Gt=null,vt=0,it=0,dt=0,bt=0,Tt=0,Et=0,Mt=0;function Rt(Ut,Xt){return function(){Xt.apply(this,arguments),Ut.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=Rt(WebGLRenderingContext.prototype.drawArrays,function(){vt++,arguments[0]==this.POINTS?Et+=arguments[2]:Tt+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=Rt(WebGLRenderingContext.prototype.drawElements,function(){it++,bt+=arguments[1]/3,Tt+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=Rt(WebGLRenderingContext.prototype.useProgram,function(){dt++}),WebGLRenderingContext.prototype.bindTexture=Rt(WebGLRenderingContext.prototype.bindTexture,function(){Mt++});var pt={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},mt=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],gt=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function Ct(){Gt("allcalls").set(vt+it),Gt("drawElements").set(it),Gt("drawArrays").set(vt),Gt("bindTexture").set(Mt),Gt("useProgram").set(dt),Gt("glfaces").set(bt),Gt("glvertices").set(Tt),Gt("glpoints").set(Et)}function xt(){vt=0,it=0,dt=0,bt=0,Tt=0,Et=0,Mt=0}function Dt(){}function Ht(Ut){Gt=Ut}return{update:Ct,start:xt,end:Dt,attach:Ht,values:pt,groups:mt,fractions:gt}},window.threeStats=function(Gt){var vt=null,it={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},dt=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],bt=[];function Tt(){vt("renderer.info.memory.geometries").set(Gt.info.memory.geometries),vt("renderer.info.programs").set(Gt.info.programs.length),vt("renderer.info.memory.textures").set(Gt.info.memory.textures),vt("renderer.info.render.calls").set(Gt.info.render.calls),vt("renderer.info.render.triangles").set(Gt.info.render.triangles),vt("renderer.info.render.points").set(Gt.info.render.points)}function Et(){}function Mt(){}function Rt(pt){vt=pt}return{update:Tt,start:Et,end:Mt,attach:Rt,values:it,groups:dt,fractions:bt}},window.BrowserStats=function(){var Gt=null,vt=0,it=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var dt={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},bt=[{caption:"Browser",values:["memory","total"]}],Tt=[{base:"total",steps:["memory"]}],Et=Math.log(1024);function Mt(Ct){var xt=100,Dt=Math.floor(Math.log(Ct)/Et);return Math.round(Ct*xt/Math.pow(1024,Dt))/xt}function Rt(){vt=Mt(performance.memory.usedJSHeapSize),it=Mt(performance.memory.totalJSHeapSize),Gt("memory").set(vt),Gt("total").set(it)}function pt(){vt=0}function mt(){}function gt(Ct){Gt=Ct}return{update:Rt,start:pt,end:mt,attach:gt,values:dt,groups:bt,fractions:Tt}},St.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":St=>{(function(){"performance"in window||(window.performance={});var Gt=window.performance;if(!("now"in Gt)){var vt=Date.now();Gt.timing&&Gt.timing.navigationStart&&(vt=Gt.timing.navigationStart),Gt.now=function(){return Date.now()-vt}}Gt.mark||(Gt.mark=function(){}),Gt.measure||(Gt.measure=function(){})})(),window.rStats=function(vt){function it(on,vn){for(var fn=Object.keys(on),Cn=0,dn=fn.length;Cn<dn;Cn++)vn(fn[Cn])}function dt(on){var vn=document.createElement("link");vn.href=on,vn.rel="stylesheet",vn.type="text/css",document.getElementsByTagName("head")[0].appendChild(vn)}var bt=vt||{},Tt=bt.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],Et="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",Mt=(bt.CSSPath?bt.CSSPath:"")+"rStats.css",Rt=bt.css||[Et,Mt];Rt.forEach(function(on){dt(on)}),bt.values||(bt.values={});var pt,mt,gt=10,Ct=200,xt={};function Dt(on,vn,fn){var Cn=fn||{},dn=document.createElement("canvas"),An=dn.getContext("2d"),nn=0,Zt=0,mn=Cn.color?Cn.color:"#666666",gn=document.createElement("canvas"),In=gn.getContext("2d");gn.width=1,gn.height=2*gt,In.fillStyle="#444444",In.fillRect(0,0,1,2*gt),In.fillStyle=mn,In.fillRect(0,gt,1,gt),In.fillStyle="#ffffff",In.globalAlpha=.5,In.fillRect(0,gt,1,1),In.globalAlpha=1;var Vn=document.createElement("canvas"),Zn=Vn.getContext("2d");Vn.width=1,Vn.height=2*gt,Zn.fillStyle="#444444",Zn.fillRect(0,0,1,2*gt),Zn.fillStyle="#b70000",Zn.fillRect(0,gt,1,gt),Zn.globalAlpha=.5,Zn.fillStyle="#ffffff",Zn.fillRect(0,gt,1,1),Zn.globalAlpha=1;function lr(){dn.width=Ct,dn.height=gt,dn.style.width=dn.width+"px",dn.style.height=dn.height+"px",dn.className="rs-canvas",on.appendChild(dn),An.fillStyle="#444444",An.fillRect(0,0,dn.width,dn.height)}function hr(Lr,Tr){Zt+=(Lr-Zt)*.1,nn*=.99,Zt>nn&&(nn=Zt),An.drawImage(dn,1,0,dn.width-1,dn.height,0,0,dn.width-1,dn.height),Tr?An.drawImage(Vn,dn.width-1,dn.height-Zt*dn.height/nn-gt):An.drawImage(gn,dn.width-1,dn.height-Zt*dn.height/nn-gt)}return lr(),{draw:hr}}function Ht(on,vn){var fn=document.createElement("canvas"),Cn=fn.getContext("2d");function dn(){fn.width=Ct,fn.height=gt*vn,fn.style.width=fn.width+"px",fn.style.height=fn.height+"px",fn.className="rs-canvas",on.appendChild(fn),Cn.fillStyle="#444444",Cn.fillRect(0,0,fn.width,fn.height)}function An(nn){Cn.drawImage(fn,1,0,fn.width-1,fn.height,0,0,fn.width-1,fn.height);var Zt=0;it(nn,function(mn){var gn=nn[mn]*fn.height;Cn.fillStyle=Tt[mn],Cn.fillRect(fn.width-1,Zt,1,gn),Zt+=gn})}return dn(),{draw:An}}function Ut(on,vn){var fn=on,Cn,dn=0,An=0,nn=0,Zt=0,mn=performance.now(),gn=0,In=document.createElement("div"),Vn=document.createElement("span"),Zn=document.createElement("div"),lr=document.createTextNode(""),hr=bt?bt.values[fn.toLowerCase()]:null,Lr=new Dt(In,fn,hr),Tr=!1;Vn.className="rs-counter-id",Vn.textContent=hr&&hr.caption?hr.caption:fn,Zn.className="rs-counter-value",Zn.appendChild(lr),In.appendChild(Vn),In.appendChild(Zn),vn?vn.div.appendChild(In):mt.appendChild(In),Cn=performance.now();function As(ho){if(hr&&hr.average){Zt+=ho,gn++;var Ys=performance.now();Ys-mn>=(hr.avgMs||1e3)&&(nn=Zt/gn,Zt=0,mn=Ys,gn=0)}}function Yr(){Cn=performance.now(),bt.userTimingAPI&&performance.mark(fn+"-start"),Tr=!0}function ms(){dn=performance.now()-Cn,bt.userTimingAPI&&(performance.mark(fn+"-end"),Tr&&performance.measure(fn,fn+"-start",fn+"-end")),As(dn)}function Rs(){ms(),Yr()}function Zs(){var ho=hr&&hr.average?nn:dn;lr.nodeValue=Math.round(ho*100)/100;var Ys=hr&&(hr.below&&dn<hr.below||hr.over&&dn>hr.over);Lr.draw(dn,Ys),In.className=Ys?"rs-counter-base alarm":"rs-counter-base"}function ao(){var ho=performance.now(),Ys=ho-Cn;An++,Ys>1e3&&(hr&&hr.interpolate===!1?dn=An:dn=An*1e3/Ys,An=0,Cn=ho,As(dn))}function go(ho){dn=ho,As(dn)}return{set:go,start:Yr,tick:Rs,end:ms,frame:ao,value:function(){return dn},draw:Zs}}function Xt(on){var vn=on.toLowerCase();if(vn===void 0&&(vn="default"),xt[vn])return xt[vn];var fn=null;bt&&bt.groups&&it(bt.groups,function(dn){var An=bt.groups[parseInt(dn,10)];!fn&&An.values.indexOf(vn.toLowerCase())!==-1&&(fn=An)});var Cn=new Ut(vn,fn);return xt[vn]=Cn,Cn}function Qt(){if(bt.plugins){bt.values||(bt.values={}),bt.groups||(bt.groups=[]),bt.fractions||(bt.fractions=[]);for(var on=0;on<bt.plugins.length;on++)bt.plugins[on].attach(Xt),it(bt.plugins[on].values,function(vn){bt.values[vn]=bt.plugins[on].values[vn]}),bt.groups=bt.groups.concat(bt.plugins[on].groups),bt.fractions=bt.fractions.concat(bt.plugins[on].fractions)}else bt.plugins={};pt=document.createElement("div"),pt.className="rs-base",mt=document.createElement("div"),mt.className="rs-container",mt.style.height="auto",pt.appendChild(mt),document.body.appendChild(pt),bt&&(bt.groups&&it(bt.groups,function(vn){var fn=bt.groups[parseInt(vn,10)],Cn=document.createElement("div");Cn.className="rs-group",fn.div=Cn;var dn=document.createElement("h1");dn.textContent=fn.caption,dn.addEventListener("click",(function(An){this.classList.toggle("hidden"),An.preventDefault()}).bind(Cn)),mt.appendChild(dn),mt.appendChild(Cn)}),bt.fractions&&it(bt.fractions,function(vn){var fn=bt.fractions[parseInt(vn,10)],Cn=document.createElement("div");Cn.className="rs-fraction";var dn=document.createElement("div");dn.className="rs-legend";var An=0;it(bt.fractions[vn].steps,function(Zt){var mn=document.createElement("p");mn.textContent=bt.fractions[vn].steps[Zt],mn.style.color=Tt[An],dn.appendChild(mn),An++}),Cn.appendChild(dn),Cn.style.height=An*gt+"px",fn.div=Cn;var nn=new Ht(Cn,An);fn.graph=nn,mt.appendChild(Cn)}))}function tn(){it(bt.plugins,function(on){bt.plugins[on].update()}),it(xt,function(on){xt[on].draw()}),bt&&bt.fractions&&it(bt.fractions,function(on){var vn=bt.fractions[parseInt(on,10)],fn=[],Cn=xt[vn.base.toLowerCase()];Cn&&(Cn=Cn.value(),it(bt.fractions[on].steps,function(dn){var An=bt.fractions[on].steps[parseInt(dn,10)].toLowerCase(),nn=xt[An];nn&&fn.push(nn.value()/Cn)})),vn.graph.draw(fn)})}return Qt(),function(on){return on?Xt(on):{element:pt,update:tn}}},St.exports=window.rStats},"./vendor/wakelock/util.js":St=>{var Gt={};Gt.base64=function(vt,it){return"data:"+vt+";base64,"+it},Gt.isMobile=function(){var vt=!1;return function(it){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(it)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(it.substr(0,4)))&&(vt=!0)}(navigator.userAgent||navigator.vendor||window.opera),vt},Gt.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},Gt.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},Gt.appendQueryParameter=function(vt,it,dt){var bt=vt.indexOf("?")<0?"?":"&";return vt+=bt+it+"="+dt,vt},Gt.getQueryParameter=function(vt){vt=vt.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var it=new RegExp("[\\?&]"+vt+"=([^&#]*)"),dt=it.exec(location.search);return dt===null?"":decodeURIComponent(dt[1].replace(/\+/g," "))},Gt.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},St.exports=Gt},"./vendor/wakelock/wakelock.js":(St,Gt,vt)=>{var it=vt("./vendor/wakelock/util.js");function dt(){var Et=document.createElement("video");Et.addEventListener("ended",function(){Et.play()}),this.request=function(){Et.paused&&(Et.src=it.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),Et.play())},this.release=function(){Et.pause(),Et.src=""}}function bt(){var Et=null;this.request=function(){Et||(Et=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){Et&&(clearInterval(Et),Et=null)}}function Tt(){var Et=navigator.userAgent||navigator.vendor||window.opera;return Et.match(/iPhone/i)||Et.match(/iPod/i)?bt:dt}St.exports=Tt()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>tn});var it=vt("./node_modules/css-loader/dist/runtime/sourceMaps.js"),dt=vt.n(it),bt=vt("./node_modules/css-loader/dist/runtime/api.js"),Tt=vt.n(bt),Et=vt("./node_modules/css-loader/dist/runtime/getUrl.js"),Mt=vt.n(Et),Rt=new URL(vt("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),vt.b),pt=new URL(vt("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),vt.b),mt=new URL(vt("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),vt.b),gt=new URL(vt("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),vt.b),Ct=new URL(vt("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),vt.b),xt=Tt()(dt()),Dt=Mt()(Rt),Ht=Mt()(pt),Ut=Mt()(mt),Xt=Mt()(gt),Qt=Mt()(Ct);xt.push([St.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+Dt+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+Ht+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+Ut+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+Xt+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+Qt+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const tn=xt},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>Mt});var it=vt("./node_modules/css-loader/dist/runtime/sourceMaps.js"),dt=vt.n(it),bt=vt("./node_modules/css-loader/dist/runtime/api.js"),Tt=vt.n(bt),Et=Tt()(dt());Et.push([St.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const Mt=Et},"./src/style/aframe.css":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>Ut});var it=vt("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),dt=vt.n(it),bt=vt("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),Tt=vt.n(bt),Et=vt("./node_modules/style-loader/dist/runtime/insertBySelector.js"),Mt=vt.n(Et),Rt=vt("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),pt=vt.n(Rt),mt=vt("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),gt=vt.n(mt),Ct=vt("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),xt=vt.n(Ct),Dt=vt("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),Ht={};Ht.styleTagTransform=xt(),Ht.setAttributes=pt(),Ht.insert=Mt().bind(null,"head"),Ht.domAPI=Tt(),Ht.insertStyleElement=gt(),dt()(Dt.default,Ht);const Ut=Dt.default&&Dt.default.locals?Dt.default.locals:void 0},"./src/style/rStats.css":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>Ut});var it=vt("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),dt=vt.n(it),bt=vt("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),Tt=vt.n(bt),Et=vt("./node_modules/style-loader/dist/runtime/insertBySelector.js"),Mt=vt.n(Et),Rt=vt("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),pt=vt.n(Rt),mt=vt("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),gt=vt.n(mt),Ct=vt("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),xt=vt.n(Ct),Dt=vt("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),Ht={};Ht.styleTagTransform=xt(),Ht.setAttributes=pt(),Ht.insert=Mt().bind(null,"head"),Ht.domAPI=Tt(),Ht.insertStyleElement=gt(),dt()(Dt.default,Ht);const Ut=Dt.default&&Dt.default.locals?Dt.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":St=>{var Gt=[];function vt(bt){for(var Tt=-1,Et=0;Et<Gt.length;Et++)if(Gt[Et].identifier===bt){Tt=Et;break}return Tt}function it(bt,Tt){for(var Et={},Mt=[],Rt=0;Rt<bt.length;Rt++){var pt=bt[Rt],mt=Tt.base?pt[0]+Tt.base:pt[0],gt=Et[mt]||0,Ct="".concat(mt," ").concat(gt);Et[mt]=gt+1;var xt=vt(Ct),Dt={css:pt[1],media:pt[2],sourceMap:pt[3],supports:pt[4],layer:pt[5]};if(xt!==-1)Gt[xt].references++,Gt[xt].updater(Dt);else{var Ht=dt(Dt,Tt);Tt.byIndex=Rt,Gt.splice(Rt,0,{identifier:Ct,updater:Ht,references:1})}Mt.push(Ct)}return Mt}function dt(bt,Tt){var Et=Tt.domAPI(Tt);Et.update(bt);var Mt=function(pt){if(pt){if(pt.css===bt.css&&pt.media===bt.media&&pt.sourceMap===bt.sourceMap&&pt.supports===bt.supports&&pt.layer===bt.layer)return;Et.update(bt=pt)}else Et.remove()};return Mt}St.exports=function(bt,Tt){Tt=Tt||{},bt=bt||[];var Et=it(bt,Tt);return function(Rt){Rt=Rt||[];for(var pt=0;pt<Et.length;pt++){var mt=Et[pt],gt=vt(mt);Gt[gt].references--}for(var Ct=it(Rt,Tt),xt=0;xt<Et.length;xt++){var Dt=Et[xt],Ht=vt(Dt);Gt[Ht].references===0&&(Gt[Ht].updater(),Gt.splice(Ht,1))}Et=Ct}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":St=>{var Gt={};function vt(dt){if(typeof Gt[dt]>"u"){var bt=document.querySelector(dt);if(window.HTMLIFrameElement&&bt instanceof window.HTMLIFrameElement)try{bt=bt.contentDocument.head}catch{bt=null}Gt[dt]=bt}return Gt[dt]}function it(dt,bt){var Tt=vt(dt);if(!Tt)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Tt.appendChild(bt)}St.exports=it},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":St=>{function Gt(vt){var it=document.createElement("style");return vt.setAttributes(it,vt.attributes),vt.insert(it,vt.options),it}St.exports=Gt},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(St,Gt,vt)=>{function it(dt){var bt=vt.nc;bt&&dt.setAttribute("nonce",bt)}St.exports=it},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":St=>{function Gt(dt,bt,Tt){var Et="";Tt.supports&&(Et+="@supports (".concat(Tt.supports,") {")),Tt.media&&(Et+="@media ".concat(Tt.media," {"));var Mt=typeof Tt.layer<"u";Mt&&(Et+="@layer".concat(Tt.layer.length>0?" ".concat(Tt.layer):""," {")),Et+=Tt.css,Mt&&(Et+="}"),Tt.media&&(Et+="}"),Tt.supports&&(Et+="}");var Rt=Tt.sourceMap;Rt&&typeof btoa<"u"&&(Et+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(Rt))))," */")),bt.styleTagTransform(Et,dt,bt.options)}function vt(dt){if(dt.parentNode===null)return!1;dt.parentNode.removeChild(dt)}function it(dt){if(typeof document>"u")return{update:function(){},remove:function(){}};var bt=dt.insertStyleElement(dt);return{update:function(Et){Gt(bt,dt,Et)},remove:function(){vt(bt)}}}St.exports=it},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":St=>{function Gt(vt,it){if(it.styleSheet)it.styleSheet.cssText=vt;else{for(;it.firstChild;)it.removeChild(it.firstChild);it.appendChild(document.createTextNode(vt))}}St.exports=Gt},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":St=>{St.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":St=>{St.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":St=>{St.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":St=>{St.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":St=>{St.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/three/build/three.module.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{ACESFilmicToneMapping:()=>es,AddEquation:()=>fn,AddOperation:()=>L0,AdditiveAnimationBlendMode:()=>I1,AdditiveBlending:()=>Qt,AgXToneMapping:()=>bn,AlphaFormat:()=>Y1,AlwaysCompare:()=>pp,AlwaysDepth:()=>go,AlwaysStencilFunc:()=>S2,AmbientLight:()=>_7,AnimationAction:()=>U7,AnimationClip:()=>Im,AnimationLoader:()=>yC,AnimationMixer:()=>qC,AnimationObjectGroup:()=>XC,AnimationUtils:()=>mC,ArcCurve:()=>U4,ArrayCamera:()=>QE,ArrowHelper:()=>v_,AttachedBindMode:()=>Dn,Audio:()=>F7,AudioAnalyser:()=>kC,AudioContext:()=>Cy,AudioListener:()=>PC,AudioLoader:()=>BC,AxesHelper:()=>g_,BackSide:()=>Dt,BasicDepthPacking:()=>F1,BasicShadowMap:()=>pt,BatchedMesh:()=>I4,Bone:()=>YE,BooleanKeyframeTrack:()=>ep,Box2:()=>n_,Box3:()=>H0,Box3Helper:()=>A_,BoxGeometry:()=>Vu,BoxHelper:()=>p_,BufferAttribute:()=>a0,BufferGeometry:()=>Bo,BufferGeometryLoader:()=>T7,ByteType:()=>u1,Cache:()=>Yu,Camera:()=>Ip,CameraHelper:()=>f_,CanvasTexture:()=>Hw,CapsuleGeometry:()=>K3,CatmullRomCurve3:()=>H4,CineonToneMapping:()=>p0,CircleGeometry:()=>X3,ClampToEdgeWrapping:()=>rr,Clock:()=>D7,Color:()=>Os,ColorKeyframeTrack:()=>my,ColorManagement:()=>u0,CompressedArrayTexture:()=>Nw,CompressedCubeTexture:()=>Uw,CompressedTexture:()=>Q3,CompressedTextureLoader:()=>wC,ConeGeometry:()=>Y3,ConstantAlphaFactor:()=>Rs,ConstantColorFactor:()=>Yr,CubeCamera:()=>Bp,CubeReflectionMapping:()=>un,CubeRefractionMapping:()=>Wt,CubeTexture:()=>H2,CubeTextureLoader:()=>CC,CubeUVReflectionMapping:()=>Rn,CubicBezierCurve:()=>ry,CubicBezierCurve3:()=>Q4,CubicInterpolant:()=>d7,CullFaceBack:()=>Et,CullFaceFront:()=>Mt,CullFaceFrontBack:()=>Rt,CullFaceNone:()=>Tt,Curve:()=>cu,CurvePath:()=>z4,CustomBlending:()=>vn,CustomToneMapping:()=>Mn,CylinderGeometry:()=>jp,Cylindrical:()=>i_,Data3DTexture:()=>yo,DataArrayTexture:()=>t2,DataTexture:()=>E2,DataTextureLoader:()=>_C,DataUtils:()=>_v,DecrementStencilOp:()=>sA,DecrementWrapStencilOp:()=>aA,DefaultLoadingManager:()=>A7,DepthFormat:()=>yr,DepthStencilFormat:()=>Nr,DepthTexture:()=>cm,DetachedBindMode:()=>Un,DirectionalLight:()=>C7,DirectionalLightHelper:()=>d_,DiscreteInterpolant:()=>f7,DisplayP3ColorSpace:()=>ju,DodecahedronGeometry:()=>q3,DoubleSide:()=>Ht,DstAlphaFactor:()=>lr,DstColorFactor:()=>Lr,DynamicCopyUsage:()=>yA,DynamicDrawUsage:()=>pA,DynamicReadUsage:()=>vA,EdgesGeometry:()=>W4,EllipseCurve:()=>V3,EqualCompare:()=>up,EqualDepth:()=>xo,EqualStencilFunc:()=>cA,EquirectangularReflectionMapping:()=>jt,EquirectangularRefractionMapping:()=>yn,Euler:()=>f1,EventDispatcher:()=>Jl,ExtrudeGeometry:()=>iv,FileLoader:()=>Ju,Float16BufferAttribute:()=>Bl,Float32BufferAttribute:()=>Qr,FloatType:()=>P0,Fog:()=>b3,FogExp2:()=>x3,FramebufferTexture:()=>kw,FrontSide:()=>xt,Frustum:()=>Wu,GLBufferAttribute:()=>jC,GLSL1:()=>CA,GLSL3:()=>R2,GreaterCompare:()=>hp,GreaterDepth:()=>Pn,GreaterEqualCompare:()=>fp,GreaterEqualDepth:()=>$o,GreaterEqualStencilFunc:()=>fA,GreaterStencilFunc:()=>hA,GridHelper:()=>u_,Group:()=>Y2,HalfFloatType:()=>Lo,HemisphereLight:()=>m7,HemisphereLightHelper:()=>c_,IcosahedronGeometry:()=>nv,ImageBitmapLoader:()=>IC,ImageLoader:()=>Bm,ImageUtils:()=>fu,IncrementStencilOp:()=>rA,IncrementWrapStencilOp:()=>oA,InstancedBufferAttribute:()=>Jp,InstancedBufferGeometry:()=>S7,InstancedInterleavedBuffer:()=>$C,InstancedMesh:()=>S4,Int16BufferAttribute:()=>Vm,Int32BufferAttribute:()=>zm,Int8BufferAttribute:()=>xv,IntType:()=>R1,InterleavedBuffer:()=>M3,InterleavedBufferAttribute:()=>J2,Interpolant:()=>Sm,InterpolateDiscrete:()=>xa,InterpolateLinear:()=>z0,InterpolateSmooth:()=>q0,InvertStencilOp:()=>Pm,KeepStencilOp:()=>$1,KeyframeTrack:()=>uu,LOD:()=>v4,LatheGeometry:()=>wm,Layers:()=>O2,LessCompare:()=>cp,LessDepth:()=>ho,LessEqualCompare:()=>T2,LessEqualDepth:()=>Ys,LessEqualStencilFunc:()=>uA,LessStencilFunc:()=>lA,Light:()=>_2,LightProbe:()=>M7,Line:()=>w2,Line3:()=>r_,LineBasicMaterial:()=>E1,LineCurve:()=>sy,LineCurve3:()=>V4,LineDashedMaterial:()=>c7,LineLoop:()=>O4,LineSegments:()=>bu,LinearDisplayP3ColorSpace:()=>Ru,LinearFilter:()=>to,LinearInterpolant:()=>Ay,LinearMipMapLinearFilter:()=>Q0,LinearMipMapNearestFilter:()=>i0,LinearMipmapLinearFilter:()=>o0,LinearMipmapNearestFilter:()=>Cr,LinearSRGBColorSpace:()=>B1,LinearToneMapping:()=>Pl,LinearTransfer:()=>Iu,Loader:()=>T1,LoaderUtils:()=>wy,LoadingManager:()=>vy,LoopOnce:()=>O0,LoopPingPong:()=>Y0,LoopRepeat:()=>w0,LuminanceAlphaFormat:()=>Rr,LuminanceFormat:()=>cr,MOUSE:()=>dt,Material:()=>Kl,MaterialLoader:()=>uv,MathUtils:()=>NA,Matrix3:()=>Ao,Matrix4:()=>Vs,MaxEquation:()=>nn,Mesh:()=>Al,MeshBasicMaterial:()=>vu,MeshDepthMaterial:()=>HE,MeshDistanceMaterial:()=>GE,MeshLambertMaterial:()=>a7,MeshMatcapMaterial:()=>l7,MeshNormalMaterial:()=>o7,MeshPhongMaterial:()=>r7,MeshPhysicalMaterial:()=>n7,MeshStandardMaterial:()=>dy,MeshToonMaterial:()=>s7,MinEquation:()=>An,MirroredRepeatWrapping:()=>ns,MixOperation:()=>oo,MultiplyBlending:()=>on,MultiplyOperation:()=>Ho,NearestFilter:()=>ps,NearestMipMapLinearFilter:()=>U0,NearestMipMapNearestFilter:()=>as,NearestMipmapLinearFilter:()=>Cs,NearestMipmapNearestFilter:()=>os,NeutralToneMapping:()=>Hn,NeverCompare:()=>lp,NeverDepth:()=>ao,NeverStencilFunc:()=>Om,NoBlending:()=>Ut,NoColorSpace:()=>Ol,NoToneMapping:()=>f0,NormalAnimationBlendMode:()=>w1,NormalBlending:()=>Xt,NotEqualCompare:()=>dp,NotEqualDepth:()=>j0,NotEqualStencilFunc:()=>dA,NumberKeyframeTrack:()=>Tm,Object3D:()=>s0,ObjectLoader:()=>TC,ObjectSpaceNormalMap:()=>N1,OctahedronGeometry:()=>bm,OneFactor:()=>mn,OneMinusConstantAlphaFactor:()=>Zs,OneMinusConstantColorFactor:()=>ms,OneMinusDstAlphaFactor:()=>hr,OneMinusDstColorFactor:()=>Tr,OneMinusSrcAlphaFactor:()=>Zn,OneMinusSrcColorFactor:()=>In,OrthographicCamera:()=>Op,P3Primaries:()=>Lu,PCFShadowMap:()=>mt,PCFSoftShadowMap:()=>gt,PMREMGenerator:()=>B0,Path:()=>ym,PerspectiveCamera:()=>J0,Plane:()=>_u,PlaneGeometry:()=>lu,PlaneHelper:()=>m_,PointLight:()=>w7,PointLightHelper:()=>a_,Points:()=>k4,PointsMaterial:()=>$E,PolarGridHelper:()=>h_,PolyhedronGeometry:()=>C2,PositionalAudio:()=>FC,PropertyBinding:()=>l0,PropertyMixer:()=>N7,QuadraticBezierCurve:()=>oy,QuadraticBezierCurve3:()=>ay,Quaternion:()=>e0,QuaternionKeyframeTrack:()=>tA,QuaternionLinearInterpolant:()=>p7,RED_GREEN_RGTC2_Format:()=>n0,RED_RGTC1_Format:()=>co,REVISION:()=>it,RGBADepthPacking:()=>k1,RGBAFormat:()=>Xn,RGBAIntegerFormat:()=>Ks,RGBA_ASTC_10x10_Format:()=>Ir,RGBA_ASTC_10x5_Format:()=>Gr,RGBA_ASTC_10x6_Format:()=>Ur,RGBA_ASTC_10x8_Format:()=>pr,RGBA_ASTC_12x10_Format:()=>ts,RGBA_ASTC_12x12_Format:()=>Ls,RGBA_ASTC_4x4_Format:()=>Jo,RGBA_ASTC_5x4_Format:()=>rn,RGBA_ASTC_5x5_Format:()=>ln,RGBA_ASTC_6x5_Format:()=>pn,RGBA_ASTC_6x6_Format:()=>_n,RGBA_ASTC_8x5_Format:()=>On,RGBA_ASTC_8x6_Format:()=>tr,RGBA_ASTC_8x8_Format:()=>ar,RGBA_BPTC_Format:()=>zr,RGBA_ETC2_EAC_Format:()=>T0,RGBA_PVRTC_2BPPV1_Format:()=>V0,RGBA_PVRTC_4BPPV1_Format:()=>_0,RGBA_S3TC_DXT1_Format:()=>lo,RGBA_S3TC_DXT3_Format:()=>A0,RGBA_S3TC_DXT5_Format:()=>bo,RGBFormat:()=>Bn,RGB_BPTC_SIGNED_Format:()=>io,RGB_BPTC_UNSIGNED_Format:()=>So,RGB_ETC1_Format:()=>Ts,RGB_ETC2_Format:()=>Mo,RGB_PVRTC_2BPPV1_Format:()=>zo,RGB_PVRTC_4BPPV1_Format:()=>Eo,RGB_S3TC_DXT1_Format:()=>$s,RGFormat:()=>Ss,RGIntegerFormat:()=>kr,RawShaderMaterial:()=>i7,Ray:()=>yl,Raycaster:()=>e_,Rec709Primaries:()=>Bu,RectAreaLight:()=>x7,RedFormat:()=>is,RedIntegerFormat:()=>Ns,ReinhardToneMapping:()=>na,RenderTarget:()=>pu,RepeatWrapping:()=>Wn,ReplaceStencilOp:()=>nA,ReverseSubtractEquation:()=>dn,RingGeometry:()=>rv,SIGNED_RED_GREEN_RGTC2_Format:()=>c0,SIGNED_RED_RGTC1_Format:()=>so,SRGBColorSpace:()=>jo,SRGBTransfer:()=>g0,Scene:()=>h4,ShaderChunk:()=>To,ShaderLib:()=>m1,ShaderMaterial:()=>b1,ShadowMaterial:()=>t7,Shape:()=>$2,ShapeGeometry:()=>sv,ShapePath:()=>E_,ShapeUtils:()=>Mu,ShortType:()=>ga,Skeleton:()=>L3,SkeletonHelper:()=>o_,SkinnedMesh:()=>_4,Source:()=>R0,Sphere:()=>ba,SphereGeometry:()=>Mm,Spherical:()=>t_,SphericalHarmonics3:()=>b7,SplineCurve:()=>ly,SpotLight:()=>E7,SpotLightHelper:()=>s_,Sprite:()=>A4,SpriteMaterial:()=>zE,SrcAlphaFactor:()=>Vn,SrcAlphaSaturateFactor:()=>As,SrcColorFactor:()=>gn,StaticCopyUsage:()=>EA,StaticDrawUsage:()=>Du,StaticReadUsage:()=>mA,StereoCamera:()=>LC,StreamCopyUsage:()=>wA,StreamDrawUsage:()=>AA,StreamReadUsage:()=>gA,StringKeyframeTrack:()=>tp,SubtractEquation:()=>Cn,SubtractiveBlending:()=>tn,TOUCH:()=>bt,TangentSpaceNormalMap:()=>Vl,TetrahedronGeometry:()=>ov,Texture:()=>C0,TextureLoader:()=>xC,TorusGeometry:()=>av,TorusKnotGeometry:()=>lv,Triangle:()=>p1,TriangleFanDrawMode:()=>Z1,TriangleStripDrawMode:()=>J1,TrianglesDrawMode:()=>q1,TubeGeometry:()=>cv,UVMapping:()=>Gn,Uint16BufferAttribute:()=>qA,Uint32BufferAttribute:()=>gu,Uint8BufferAttribute:()=>YA,Uint8ClampedBufferAttribute:()=>bp,Uniform:()=>by,UniformsGroup:()=>ZC,UniformsLib:()=>bs,UniformsUtils:()=>Ym,UnsignedByteType:()=>D0,UnsignedInt248Type:()=>y1,UnsignedInt5999Type:()=>Tu,UnsignedIntType:()=>Ql,UnsignedShort4444Type:()=>_a,UnsignedShort5551Type:()=>X1,UnsignedShortType:()=>Yl,VSMShadowMap:()=>Ct,Vector2:()=>Wr,Vector3:()=>kn,Vector4:()=>r0,VectorKeyframeTrack:()=>Rm,VideoTexture:()=>Fw,WebGL3DRenderTarget:()=>Zo,WebGLArrayRenderTarget:()=>Us,WebGLCoordinateSystem:()=>C1,WebGLCubeRenderTarget:()=>em,WebGLMultipleRenderTargets:()=>y_,WebGLRenderTarget:()=>r1,WebGLRenderer:()=>Sw,WebGLUtils:()=>o4,WebGPUCoordinateSystem:()=>Pu,WireframeGeometry:()=>$4,WrapAroundEnding:()=>h1,ZeroCurvatureEnding:()=>W0,ZeroFactor:()=>Zt,ZeroSlopeEnding:()=>Ml,ZeroStencilOp:()=>iA,createCanvasElement:()=>gp});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const it="164",dt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bt={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Tt=0,Et=1,Mt=2,Rt=3,pt=0,mt=1,gt=2,Ct=3,xt=0,Dt=1,Ht=2,Ut=0,Xt=1,Qt=2,tn=3,on=4,vn=5,fn=100,Cn=101,dn=102,An=103,nn=104,Zt=200,mn=201,gn=202,In=203,Vn=204,Zn=205,lr=206,hr=207,Lr=208,Tr=209,As=210,Yr=211,ms=212,Rs=213,Zs=214,ao=0,go=1,ho=2,Ys=3,xo=4,$o=5,Pn=6,j0=7,Ho=0,oo=1,L0=2,f0=0,Pl=1,na=2,p0=3,es=4,Mn=5,bn=6,Hn=7,Dn="attached",Un="detached",Gn=300,un=301,Wt=302,jt=303,yn=304,Rn=306,Wn=1e3,rr=1001,ns=1002,ps=1003,os=1004,as=1004,Cs=1005,U0=1005,to=1006,Cr=1007,i0=1007,o0=1008,Q0=1008,D0=1009,u1=1010,ga=1011,Yl=1012,R1=1013,Ql=1014,P0=1015,Lo=1016,_a=1017,X1=1018,y1=1020,Tu=35902,Y1=1021,Bn=1022,Xn=1023,cr=1024,Rr=1025,yr=1026,Nr=1027,is=1028,Ns=1029,Ss=1030,kr=1031,Ks=1033,$s=33776,lo=33777,A0=33778,bo=33779,Eo=35840,zo=35841,_0=35842,V0=35843,Ts=36196,Mo=37492,T0=37496,Jo=37808,rn=37809,ln=37810,pn=37811,_n=37812,On=37813,tr=37814,ar=37815,Gr=37816,Ur=37817,pr=37818,Ir=37819,ts=37820,Ls=37821,zr=36492,io=36494,So=36495,co=36283,so=36284,n0=36285,c0=36286,O0=2200,w0=2201,Y0=2202,xa=2300,z0=2301,q0=2302,W0=2400,Ml=2401,h1=2402,w1=2500,I1=2501,q1=0,J1=1,Z1=2,F1=3200,k1=3201,Vl=0,N1=1,Ol="",jo="srgb",B1="srgb-linear",ju="display-p3",Ru="display-p3-linear",Iu="linear",g0="srgb",Bu="rec709",Lu="p3",iA=0,$1=7680,nA=7681,rA=7682,sA=7683,oA=34055,aA=34056,Pm=5386,Om=512,lA=513,cA=514,uA=515,hA=516,dA=517,fA=518,S2=519,lp=512,cp=513,up=514,T2=515,hp=516,dp=517,fp=518,pp=519,Du=35044,pA=35048,AA=35040,mA=35045,vA=35049,gA=35041,EA=35046,yA=35050,wA=35042,CA="100",R2="300 es",C1=2e3,Pu=2001;class Jl{addEventListener(c,j){this._listeners===void 0&&(this._listeners={});const rt=this._listeners;rt[c]===void 0&&(rt[c]=[]),rt[c].indexOf(j)===-1&&rt[c].push(j)}hasEventListener(c,j){if(this._listeners===void 0)return!1;const rt=this._listeners;return rt[c]!==void 0&&rt[c].indexOf(j)!==-1}removeEventListener(c,j){if(this._listeners===void 0)return;const at=this._listeners[c];if(at!==void 0){const ut=at.indexOf(j);ut!==-1&&at.splice(ut,1)}}dispatchEvent(c){if(this._listeners===void 0)return;const rt=this._listeners[c.type];if(rt!==void 0){c.target=this;const at=rt.slice(0);for(let ut=0,At=at.length;ut<At;ut++)at[ut].call(this,c);c.target=null}}}const Sl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ap=1234567;const j1=Math.PI/180,hu=180/Math.PI;function Zl(){const ht=Math.random()*4294967295|0,c=Math.random()*4294967295|0,j=Math.random()*4294967295|0,rt=Math.random()*4294967295|0;return(Sl[ht&255]+Sl[ht>>8&255]+Sl[ht>>16&255]+Sl[ht>>24&255]+"-"+Sl[c&255]+Sl[c>>8&255]+"-"+Sl[c>>16&15|64]+Sl[c>>24&255]+"-"+Sl[j&63|128]+Sl[j>>8&255]+"-"+Sl[j>>16&255]+Sl[j>>24&255]+Sl[rt&255]+Sl[rt>>8&255]+Sl[rt>>16&255]+Sl[rt>>24&255]).toLowerCase()}function F0(ht,c,j){return Math.max(c,Math.min(j,ht))}function I2(ht,c){return(ht%c+c)%c}function _A(ht,c,j,rt,at){return rt+(ht-c)*(at-rt)/(j-c)}function xA(ht,c,j){return ht!==c?(j-ht)/(c-ht):0}function Ou(ht,c,j){return(1-j)*ht+j*c}function bA(ht,c,j,rt){return Ou(ht,c,1-Math.exp(-j*rt))}function MA(ht,c=1){return c-Math.abs(I2(ht,c*2)-c)}function SA(ht,c,j){return ht<=c?0:ht>=j?1:(ht=(ht-c)/(j-c),ht*ht*(3-2*ht))}function TA(ht,c,j){return ht<=c?0:ht>=j?1:(ht=(ht-c)/(j-c),ht*ht*ht*(ht*(ht*6-15)+10))}function RA(ht,c){return ht+Math.floor(Math.random()*(c-ht+1))}function IA(ht,c){return ht+Math.random()*(c-ht)}function BA(ht){return ht*(.5-Math.random())}function LA(ht){ht!==void 0&&(Ap=ht);let c=Ap+=1831565813;return c=Math.imul(c^c>>>15,c|1),c^=c+Math.imul(c^c>>>7,c|61),((c^c>>>14)>>>0)/4294967296}function mp(ht){return ht*j1}function DA(ht){return ht*hu}function PA(ht){return(ht&ht-1)===0&&ht!==0}function OA(ht){return Math.pow(2,Math.ceil(Math.log(ht)/Math.LN2))}function FA(ht){return Math.pow(2,Math.floor(Math.log(ht)/Math.LN2))}function kA(ht,c,j,rt,at){const ut=Math.cos,At=Math.sin,wt=ut(j/2),Bt=At(j/2),Ft=ut((c+rt)/2),Vt=At((c+rt)/2),qt=ut((c-rt)/2),Jt=At((c-rt)/2),_i=ut((rt-c)/2),sn=At((rt-c)/2);switch(at){case"XYX":ht.set(wt*Vt,Bt*qt,Bt*Jt,wt*Ft);break;case"YZY":ht.set(Bt*Jt,wt*Vt,Bt*qt,wt*Ft);break;case"ZXZ":ht.set(Bt*qt,Bt*Jt,wt*Vt,wt*Ft);break;case"XZX":ht.set(wt*Vt,Bt*sn,Bt*_i,wt*Ft);break;case"YXY":ht.set(Bt*_i,wt*Vt,Bt*sn,wt*Ft);break;case"ZYZ":ht.set(Bt*sn,Bt*_i,wt*Vt,wt*Ft);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+at)}}function Tl(ht,c){switch(c.constructor){case Float32Array:return ht;case Uint32Array:return ht/4294967295;case Uint16Array:return ht/65535;case Uint8Array:return ht/255;case Int32Array:return Math.max(ht/2147483647,-1);case Int16Array:return Math.max(ht/32767,-1);case Int8Array:return Math.max(ht/127,-1);default:throw new Error("Invalid component type.")}}function Co(ht,c){switch(c.constructor){case Float32Array:return ht;case Uint32Array:return Math.round(ht*4294967295);case Uint16Array:return Math.round(ht*65535);case Uint8Array:return Math.round(ht*255);case Int32Array:return Math.round(ht*2147483647);case Int16Array:return Math.round(ht*32767);case Int8Array:return Math.round(ht*127);default:throw new Error("Invalid component type.")}}const NA={DEG2RAD:j1,RAD2DEG:hu,generateUUID:Zl,clamp:F0,euclideanModulo:I2,mapLinear:_A,inverseLerp:xA,lerp:Ou,damp:bA,pingpong:MA,smoothstep:SA,smootherstep:TA,randInt:RA,randFloat:IA,randFloatSpread:BA,seededRandom:LA,degToRad:mp,radToDeg:DA,isPowerOfTwo:PA,ceilPowerOfTwo:OA,floorPowerOfTwo:FA,setQuaternionFromProperEuler:kA,normalize:Co,denormalize:Tl};class Wr{constructor(c=0,j=0){Wr.prototype.isVector2=!0,this.x=c,this.y=j}get width(){return this.x}set width(c){this.x=c}get height(){return this.y}set height(c){this.y=c}set(c,j){return this.x=c,this.y=j,this}setScalar(c){return this.x=c,this.y=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setComponent(c,j){switch(c){case 0:this.x=j;break;case 1:this.y=j;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y)}copy(c){return this.x=c.x,this.y=c.y,this}add(c){return this.x+=c.x,this.y+=c.y,this}addScalar(c){return this.x+=c,this.y+=c,this}addVectors(c,j){return this.x=c.x+j.x,this.y=c.y+j.y,this}addScaledVector(c,j){return this.x+=c.x*j,this.y+=c.y*j,this}sub(c){return this.x-=c.x,this.y-=c.y,this}subScalar(c){return this.x-=c,this.y-=c,this}subVectors(c,j){return this.x=c.x-j.x,this.y=c.y-j.y,this}multiply(c){return this.x*=c.x,this.y*=c.y,this}multiplyScalar(c){return this.x*=c,this.y*=c,this}divide(c){return this.x/=c.x,this.y/=c.y,this}divideScalar(c){return this.multiplyScalar(1/c)}applyMatrix3(c){const j=this.x,rt=this.y,at=c.elements;return this.x=at[0]*j+at[3]*rt+at[6],this.y=at[1]*j+at[4]*rt+at[7],this}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this}clamp(c,j){return this.x=Math.max(c.x,Math.min(j.x,this.x)),this.y=Math.max(c.y,Math.min(j.y,this.y)),this}clampScalar(c,j){return this.x=Math.max(c,Math.min(j,this.x)),this.y=Math.max(c,Math.min(j,this.y)),this}clampLength(c,j){const rt=this.length();return this.divideScalar(rt||1).multiplyScalar(Math.max(c,Math.min(j,rt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(c){return this.x*c.x+this.y*c.y}cross(c){return this.x*c.y-this.y*c.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(c){const j=Math.sqrt(this.lengthSq()*c.lengthSq());if(j===0)return Math.PI/2;const rt=this.dot(c)/j;return Math.acos(F0(rt,-1,1))}distanceTo(c){return Math.sqrt(this.distanceToSquared(c))}distanceToSquared(c){const j=this.x-c.x,rt=this.y-c.y;return j*j+rt*rt}manhattanDistanceTo(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,j){return this.x+=(c.x-this.x)*j,this.y+=(c.y-this.y)*j,this}lerpVectors(c,j,rt){return this.x=c.x+(j.x-c.x)*rt,this.y=c.y+(j.y-c.y)*rt,this}equals(c){return c.x===this.x&&c.y===this.y}fromArray(c,j=0){return this.x=c[j],this.y=c[j+1],this}toArray(c=[],j=0){return c[j]=this.x,c[j+1]=this.y,c}fromBufferAttribute(c,j){return this.x=c.getX(j),this.y=c.getY(j),this}rotateAround(c,j){const rt=Math.cos(j),at=Math.sin(j),ut=this.x-c.x,At=this.y-c.y;return this.x=ut*rt-At*at+c.x,this.y=ut*at+At*rt+c.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ao{constructor(c,j,rt,at,ut,At,wt,Bt,Ft){Ao.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],c!==void 0&&this.set(c,j,rt,at,ut,At,wt,Bt,Ft)}set(c,j,rt,at,ut,At,wt,Bt,Ft){const Vt=this.elements;return Vt[0]=c,Vt[1]=at,Vt[2]=wt,Vt[3]=j,Vt[4]=ut,Vt[5]=Bt,Vt[6]=rt,Vt[7]=At,Vt[8]=Ft,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(c){const j=this.elements,rt=c.elements;return j[0]=rt[0],j[1]=rt[1],j[2]=rt[2],j[3]=rt[3],j[4]=rt[4],j[5]=rt[5],j[6]=rt[6],j[7]=rt[7],j[8]=rt[8],this}extractBasis(c,j,rt){return c.setFromMatrix3Column(this,0),j.setFromMatrix3Column(this,1),rt.setFromMatrix3Column(this,2),this}setFromMatrix4(c){const j=c.elements;return this.set(j[0],j[4],j[8],j[1],j[5],j[9],j[2],j[6],j[10]),this}multiply(c){return this.multiplyMatrices(this,c)}premultiply(c){return this.multiplyMatrices(c,this)}multiplyMatrices(c,j){const rt=c.elements,at=j.elements,ut=this.elements,At=rt[0],wt=rt[3],Bt=rt[6],Ft=rt[1],Vt=rt[4],qt=rt[7],Jt=rt[2],_i=rt[5],sn=rt[8],hn=at[0],an=at[3],en=at[6],xn=at[1],wn=at[4],En=at[7],er=at[2],Nn=at[5],zn=at[8];return ut[0]=At*hn+wt*xn+Bt*er,ut[3]=At*an+wt*wn+Bt*Nn,ut[6]=At*en+wt*En+Bt*zn,ut[1]=Ft*hn+Vt*xn+qt*er,ut[4]=Ft*an+Vt*wn+qt*Nn,ut[7]=Ft*en+Vt*En+qt*zn,ut[2]=Jt*hn+_i*xn+sn*er,ut[5]=Jt*an+_i*wn+sn*Nn,ut[8]=Jt*en+_i*En+sn*zn,this}multiplyScalar(c){const j=this.elements;return j[0]*=c,j[3]*=c,j[6]*=c,j[1]*=c,j[4]*=c,j[7]*=c,j[2]*=c,j[5]*=c,j[8]*=c,this}determinant(){const c=this.elements,j=c[0],rt=c[1],at=c[2],ut=c[3],At=c[4],wt=c[5],Bt=c[6],Ft=c[7],Vt=c[8];return j*At*Vt-j*wt*Ft-rt*ut*Vt+rt*wt*Bt+at*ut*Ft-at*At*Bt}invert(){const c=this.elements,j=c[0],rt=c[1],at=c[2],ut=c[3],At=c[4],wt=c[5],Bt=c[6],Ft=c[7],Vt=c[8],qt=Vt*At-wt*Ft,Jt=wt*Bt-Vt*ut,_i=Ft*ut-At*Bt,sn=j*qt+rt*Jt+at*_i;if(sn===0)return this.set(0,0,0,0,0,0,0,0,0);const hn=1/sn;return c[0]=qt*hn,c[1]=(at*Ft-Vt*rt)*hn,c[2]=(wt*rt-at*At)*hn,c[3]=Jt*hn,c[4]=(Vt*j-at*Bt)*hn,c[5]=(at*ut-wt*j)*hn,c[6]=_i*hn,c[7]=(rt*Bt-Ft*j)*hn,c[8]=(At*j-rt*ut)*hn,this}transpose(){let c;const j=this.elements;return c=j[1],j[1]=j[3],j[3]=c,c=j[2],j[2]=j[6],j[6]=c,c=j[5],j[5]=j[7],j[7]=c,this}getNormalMatrix(c){return this.setFromMatrix4(c).invert().transpose()}transposeIntoArray(c){const j=this.elements;return c[0]=j[0],c[1]=j[3],c[2]=j[6],c[3]=j[1],c[4]=j[4],c[5]=j[7],c[6]=j[2],c[7]=j[5],c[8]=j[8],this}setUvTransform(c,j,rt,at,ut,At,wt){const Bt=Math.cos(ut),Ft=Math.sin(ut);return this.set(rt*Bt,rt*Ft,-rt*(Bt*At+Ft*wt)+At+c,-at*Ft,at*Bt,-at*(-Ft*At+Bt*wt)+wt+j,0,0,1),this}scale(c,j){return this.premultiply(_h.makeScale(c,j)),this}rotate(c){return this.premultiply(_h.makeRotation(-c)),this}translate(c,j){return this.premultiply(_h.makeTranslation(c,j)),this}makeTranslation(c,j){return c.isVector2?this.set(1,0,c.x,0,1,c.y,0,0,1):this.set(1,0,c,0,1,j,0,0,1),this}makeRotation(c){const j=Math.cos(c),rt=Math.sin(c);return this.set(j,-rt,0,rt,j,0,0,0,1),this}makeScale(c,j){return this.set(c,0,0,0,j,0,0,0,1),this}equals(c){const j=this.elements,rt=c.elements;for(let at=0;at<9;at++)if(j[at]!==rt[at])return!1;return!0}fromArray(c,j=0){for(let rt=0;rt<9;rt++)this.elements[rt]=c[rt+j];return this}toArray(c=[],j=0){const rt=this.elements;return c[j]=rt[0],c[j+1]=rt[1],c[j+2]=rt[2],c[j+3]=rt[3],c[j+4]=rt[4],c[j+5]=rt[5],c[j+6]=rt[6],c[j+7]=rt[7],c[j+8]=rt[8],c}clone(){return new this.constructor().fromArray(this.elements)}}const _h=new Ao;function B2(ht){for(let c=ht.length-1;c>=0;--c)if(ht[c]>=65535)return!0;return!1}const vp={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function _c(ht,c){return new vp[ht](c)}function du(ht){return document.createElementNS("http://www.w3.org/1999/xhtml",ht)}function gp(){const ht=du("canvas");return ht.style.display="block",ht}const eu={};function K0(ht){ht in eu||(eu[ht]=!0,console.warn(ht))}const Ep=new Ao().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),yp=new Ao().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),_d={[B1]:{transfer:Iu,primaries:Bu,toReference:ht=>ht,fromReference:ht=>ht},[jo]:{transfer:g0,primaries:Bu,toReference:ht=>ht.convertSRGBToLinear(),fromReference:ht=>ht.convertLinearToSRGB()},[Ru]:{transfer:Iu,primaries:Lu,toReference:ht=>ht.applyMatrix3(yp),fromReference:ht=>ht.applyMatrix3(Ep)},[ju]:{transfer:g0,primaries:Lu,toReference:ht=>ht.convertSRGBToLinear().applyMatrix3(yp),fromReference:ht=>ht.applyMatrix3(Ep).convertLinearToSRGB()}},UA=new Set([B1,Ru]),u0={enabled:!0,_workingColorSpace:B1,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(ht){if(!UA.has(ht))throw new Error(`Unsupported working color space, "${ht}".`);this._workingColorSpace=ht},convert:function(ht,c,j){if(this.enabled===!1||c===j||!c||!j)return ht;const rt=_d[c].toReference,at=_d[j].fromReference;return at(rt(ht))},fromWorkingColorSpace:function(ht,c){return this.convert(ht,this._workingColorSpace,c)},toWorkingColorSpace:function(ht,c){return this.convert(ht,c,this._workingColorSpace)},getPrimaries:function(ht){return _d[ht].primaries},getTransfer:function(ht){return ht===Ol?Iu:_d[ht].transfer}};function Fu(ht){return ht<.04045?ht*.0773993808:Math.pow(ht*.9478672986+.0521327014,2.4)}function L2(ht){return ht<.0031308?ht*12.92:1.055*Math.pow(ht,.41666)-.055}let tu;class fu{static getDataURL(c){if(/^data:/i.test(c.src)||typeof HTMLCanvasElement>"u")return c.src;let j;if(c instanceof HTMLCanvasElement)j=c;else{tu===void 0&&(tu=du("canvas")),tu.width=c.width,tu.height=c.height;const rt=tu.getContext("2d");c instanceof ImageData?rt.putImageData(c,0,0):rt.drawImage(c,0,0,c.width,c.height),j=tu}return j.width>2048||j.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",c),j.toDataURL("image/jpeg",.6)):j.toDataURL("image/png")}static sRGBToLinear(c){if(typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap){const j=du("canvas");j.width=c.width,j.height=c.height;const rt=j.getContext("2d");rt.drawImage(c,0,0,c.width,c.height);const at=rt.getImageData(0,0,c.width,c.height),ut=at.data;for(let At=0;At<ut.length;At++)ut[At]=Fu(ut[At]/255)*255;return rt.putImageData(at,0,0),j}else if(c.data){const j=c.data.slice(0);for(let rt=0;rt<j.length;rt++)j instanceof Uint8Array||j instanceof Uint8ClampedArray?j[rt]=Math.floor(Fu(j[rt]/255)*255):j[rt]=Fu(j[rt]);return{data:j,width:c.width,height:c.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),c}}let wp=0;class R0{constructor(c=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wp++}),this.uuid=Zl(),this.data=c,this.dataReady=!0,this.version=0}set needsUpdate(c){c===!0&&this.version++}toJSON(c){const j=c===void 0||typeof c=="string";if(!j&&c.images[this.uuid]!==void 0)return c.images[this.uuid];const rt={uuid:this.uuid,url:""},at=this.data;if(at!==null){let ut;if(Array.isArray(at)){ut=[];for(let At=0,wt=at.length;At<wt;At++)at[At].isDataTexture?ut.push(e2(at[At].image)):ut.push(e2(at[At]))}else ut=e2(at);rt.url=ut}return j||(c.images[this.uuid]=rt),rt}}function e2(ht){return typeof HTMLImageElement<"u"&&ht instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ht instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ht instanceof ImageBitmap?fu.getDataURL(ht):ht.data?{data:Array.from(ht.data),width:ht.width,height:ht.height,type:ht.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cp=0;class C0 extends Jl{constructor(c=C0.DEFAULT_IMAGE,j=C0.DEFAULT_MAPPING,rt=rr,at=rr,ut=to,At=o0,wt=Xn,Bt=D0,Ft=C0.DEFAULT_ANISOTROPY,Vt=Ol){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cp++}),this.uuid=Zl(),this.name="",this.source=new R0(c),this.mipmaps=[],this.mapping=j,this.channel=0,this.wrapS=rt,this.wrapT=at,this.magFilter=ut,this.minFilter=At,this.anisotropy=Ft,this.format=wt,this.internalFormat=null,this.type=Bt,this.offset=new Wr(0,0),this.repeat=new Wr(1,1),this.center=new Wr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ao,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=Vt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(c=null){this.source.data=c}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(c){return this.name=c.name,this.source=c.source,this.mipmaps=c.mipmaps.slice(0),this.mapping=c.mapping,this.channel=c.channel,this.wrapS=c.wrapS,this.wrapT=c.wrapT,this.magFilter=c.magFilter,this.minFilter=c.minFilter,this.anisotropy=c.anisotropy,this.format=c.format,this.internalFormat=c.internalFormat,this.type=c.type,this.offset.copy(c.offset),this.repeat.copy(c.repeat),this.center.copy(c.center),this.rotation=c.rotation,this.matrixAutoUpdate=c.matrixAutoUpdate,this.matrix.copy(c.matrix),this.generateMipmaps=c.generateMipmaps,this.premultiplyAlpha=c.premultiplyAlpha,this.flipY=c.flipY,this.unpackAlignment=c.unpackAlignment,this.colorSpace=c.colorSpace,this.userData=JSON.parse(JSON.stringify(c.userData)),this.needsUpdate=!0,this}toJSON(c){const j=c===void 0||typeof c=="string";if(!j&&c.textures[this.uuid]!==void 0)return c.textures[this.uuid];const rt={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(c).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(rt.userData=this.userData),j||(c.textures[this.uuid]=rt),rt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(c){if(this.mapping!==Gn)return c;if(c.applyMatrix3(this.matrix),c.x<0||c.x>1)switch(this.wrapS){case Wn:c.x=c.x-Math.floor(c.x);break;case rr:c.x=c.x<0?0:1;break;case ns:Math.abs(Math.floor(c.x)%2)===1?c.x=Math.ceil(c.x)-c.x:c.x=c.x-Math.floor(c.x);break}if(c.y<0||c.y>1)switch(this.wrapT){case Wn:c.y=c.y-Math.floor(c.y);break;case rr:c.y=c.y<0?0:1;break;case ns:Math.abs(Math.floor(c.y)%2)===1?c.y=Math.ceil(c.y)-c.y:c.y=c.y-Math.floor(c.y);break}return this.flipY&&(c.y=1-c.y),c}set needsUpdate(c){c===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(c){c===!0&&this.pmremVersion++}}C0.DEFAULT_IMAGE=null,C0.DEFAULT_MAPPING=Gn,C0.DEFAULT_ANISOTROPY=1;class r0{constructor(c=0,j=0,rt=0,at=1){r0.prototype.isVector4=!0,this.x=c,this.y=j,this.z=rt,this.w=at}get width(){return this.z}set width(c){this.z=c}get height(){return this.w}set height(c){this.w=c}set(c,j,rt,at){return this.x=c,this.y=j,this.z=rt,this.w=at,this}setScalar(c){return this.x=c,this.y=c,this.z=c,this.w=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setZ(c){return this.z=c,this}setW(c){return this.w=c,this}setComponent(c,j){switch(c){case 0:this.x=j;break;case 1:this.y=j;break;case 2:this.z=j;break;case 3:this.w=j;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(c){return this.x=c.x,this.y=c.y,this.z=c.z,this.w=c.w!==void 0?c.w:1,this}add(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z,this.w+=c.w,this}addScalar(c){return this.x+=c,this.y+=c,this.z+=c,this.w+=c,this}addVectors(c,j){return this.x=c.x+j.x,this.y=c.y+j.y,this.z=c.z+j.z,this.w=c.w+j.w,this}addScaledVector(c,j){return this.x+=c.x*j,this.y+=c.y*j,this.z+=c.z*j,this.w+=c.w*j,this}sub(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z,this.w-=c.w,this}subScalar(c){return this.x-=c,this.y-=c,this.z-=c,this.w-=c,this}subVectors(c,j){return this.x=c.x-j.x,this.y=c.y-j.y,this.z=c.z-j.z,this.w=c.w-j.w,this}multiply(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z,this.w*=c.w,this}multiplyScalar(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this}applyMatrix4(c){const j=this.x,rt=this.y,at=this.z,ut=this.w,At=c.elements;return this.x=At[0]*j+At[4]*rt+At[8]*at+At[12]*ut,this.y=At[1]*j+At[5]*rt+At[9]*at+At[13]*ut,this.z=At[2]*j+At[6]*rt+At[10]*at+At[14]*ut,this.w=At[3]*j+At[7]*rt+At[11]*at+At[15]*ut,this}divideScalar(c){return this.multiplyScalar(1/c)}setAxisAngleFromQuaternion(c){this.w=2*Math.acos(c.w);const j=Math.sqrt(1-c.w*c.w);return j<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=c.x/j,this.y=c.y/j,this.z=c.z/j),this}setAxisAngleFromRotationMatrix(c){let j,rt,at,ut;const Bt=c.elements,Ft=Bt[0],Vt=Bt[4],qt=Bt[8],Jt=Bt[1],_i=Bt[5],sn=Bt[9],hn=Bt[2],an=Bt[6],en=Bt[10];if(Math.abs(Vt-Jt)<.01&&Math.abs(qt-hn)<.01&&Math.abs(sn-an)<.01){if(Math.abs(Vt+Jt)<.1&&Math.abs(qt+hn)<.1&&Math.abs(sn+an)<.1&&Math.abs(Ft+_i+en-3)<.1)return this.set(1,0,0,0),this;j=Math.PI;const wn=(Ft+1)/2,En=(_i+1)/2,er=(en+1)/2,Nn=(Vt+Jt)/4,zn=(qt+hn)/4,$n=(sn+an)/4;return wn>En&&wn>er?wn<.01?(rt=0,at=.707106781,ut=.707106781):(rt=Math.sqrt(wn),at=Nn/rt,ut=zn/rt):En>er?En<.01?(rt=.707106781,at=0,ut=.707106781):(at=Math.sqrt(En),rt=Nn/at,ut=$n/at):er<.01?(rt=.707106781,at=.707106781,ut=0):(ut=Math.sqrt(er),rt=zn/ut,at=$n/ut),this.set(rt,at,ut,j),this}let xn=Math.sqrt((an-sn)*(an-sn)+(qt-hn)*(qt-hn)+(Jt-Vt)*(Jt-Vt));return Math.abs(xn)<.001&&(xn=1),this.x=(an-sn)/xn,this.y=(qt-hn)/xn,this.z=(Jt-Vt)/xn,this.w=Math.acos((Ft+_i+en-1)/2),this}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this.w=Math.min(this.w,c.w),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this.w=Math.max(this.w,c.w),this}clamp(c,j){return this.x=Math.max(c.x,Math.min(j.x,this.x)),this.y=Math.max(c.y,Math.min(j.y,this.y)),this.z=Math.max(c.z,Math.min(j.z,this.z)),this.w=Math.max(c.w,Math.min(j.w,this.w)),this}clampScalar(c,j){return this.x=Math.max(c,Math.min(j,this.x)),this.y=Math.max(c,Math.min(j,this.y)),this.z=Math.max(c,Math.min(j,this.z)),this.w=Math.max(c,Math.min(j,this.w)),this}clampLength(c,j){const rt=this.length();return this.divideScalar(rt||1).multiplyScalar(Math.max(c,Math.min(j,rt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,j){return this.x+=(c.x-this.x)*j,this.y+=(c.y-this.y)*j,this.z+=(c.z-this.z)*j,this.w+=(c.w-this.w)*j,this}lerpVectors(c,j,rt){return this.x=c.x+(j.x-c.x)*rt,this.y=c.y+(j.y-c.y)*rt,this.z=c.z+(j.z-c.z)*rt,this.w=c.w+(j.w-c.w)*rt,this}equals(c){return c.x===this.x&&c.y===this.y&&c.z===this.z&&c.w===this.w}fromArray(c,j=0){return this.x=c[j],this.y=c[j+1],this.z=c[j+2],this.w=c[j+3],this}toArray(c=[],j=0){return c[j]=this.x,c[j+1]=this.y,c[j+2]=this.z,c[j+3]=this.w,c}fromBufferAttribute(c,j){return this.x=c.getX(j),this.y=c.getY(j),this.z=c.getZ(j),this.w=c.getW(j),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pu extends Jl{constructor(c=1,j=1,rt={}){super(),this.isRenderTarget=!0,this.width=c,this.height=j,this.depth=1,this.scissor=new r0(0,0,c,j),this.scissorTest=!1,this.viewport=new r0(0,0,c,j);const at={width:c,height:j,depth:1};rt=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:to,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},rt);const ut=new C0(at,rt.mapping,rt.wrapS,rt.wrapT,rt.magFilter,rt.minFilter,rt.format,rt.type,rt.anisotropy,rt.colorSpace);ut.flipY=!1,ut.generateMipmaps=rt.generateMipmaps,ut.internalFormat=rt.internalFormat,this.textures=[];const At=rt.count;for(let wt=0;wt<At;wt++)this.textures[wt]=ut.clone(),this.textures[wt].isRenderTargetTexture=!0;this.depthBuffer=rt.depthBuffer,this.stencilBuffer=rt.stencilBuffer,this.resolveDepthBuffer=rt.resolveDepthBuffer,this.resolveStencilBuffer=rt.resolveStencilBuffer,this.depthTexture=rt.depthTexture,this.samples=rt.samples}get texture(){return this.textures[0]}set texture(c){this.textures[0]=c}setSize(c,j,rt=1){if(this.width!==c||this.height!==j||this.depth!==rt){this.width=c,this.height=j,this.depth=rt;for(let at=0,ut=this.textures.length;at<ut;at++)this.textures[at].image.width=c,this.textures[at].image.height=j,this.textures[at].image.depth=rt;this.dispose()}this.viewport.set(0,0,c,j),this.scissor.set(0,0,c,j)}clone(){return new this.constructor().copy(this)}copy(c){this.width=c.width,this.height=c.height,this.depth=c.depth,this.scissor.copy(c.scissor),this.scissorTest=c.scissorTest,this.viewport.copy(c.viewport),this.textures.length=0;for(let rt=0,at=c.textures.length;rt<at;rt++)this.textures[rt]=c.textures[rt].clone(),this.textures[rt].isRenderTargetTexture=!0;const j=Object.assign({},c.texture.image);return this.texture.source=new R0(j),this.depthBuffer=c.depthBuffer,this.stencilBuffer=c.stencilBuffer,this.resolveDepthBuffer=c.resolveDepthBuffer,this.resolveStencilBuffer=c.resolveStencilBuffer,c.depthTexture!==null&&(this.depthTexture=c.depthTexture.clone()),this.samples=c.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class r1 extends pu{constructor(c=1,j=1,rt={}){super(c,j,rt),this.isWebGLRenderTarget=!0}}class t2 extends C0{constructor(c=null,j=1,rt=1,at=1){super(null),this.isDataArrayTexture=!0,this.image={data:c,width:j,height:rt,depth:at},this.magFilter=ps,this.minFilter=ps,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Us extends r1{constructor(c=1,j=1,rt=1,at={}){super(c,j,at),this.isWebGLArrayRenderTarget=!0,this.depth=rt,this.texture=new t2(null,c,j,rt),this.texture.isRenderTargetTexture=!0}}class yo extends C0{constructor(c=null,j=1,rt=1,at=1){super(null),this.isData3DTexture=!0,this.image={data:c,width:j,height:rt,depth:at},this.magFilter=ps,this.minFilter=ps,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zo extends r1{constructor(c=1,j=1,rt=1,at={}){super(c,j,at),this.isWebGL3DRenderTarget=!0,this.depth=rt,this.texture=new yo(null,c,j,rt),this.texture.isRenderTargetTexture=!0}}class e0{constructor(c=0,j=0,rt=0,at=1){this.isQuaternion=!0,this._x=c,this._y=j,this._z=rt,this._w=at}static slerpFlat(c,j,rt,at,ut,At,wt){let Bt=rt[at+0],Ft=rt[at+1],Vt=rt[at+2],qt=rt[at+3];const Jt=ut[At+0],_i=ut[At+1],sn=ut[At+2],hn=ut[At+3];if(wt===0){c[j+0]=Bt,c[j+1]=Ft,c[j+2]=Vt,c[j+3]=qt;return}if(wt===1){c[j+0]=Jt,c[j+1]=_i,c[j+2]=sn,c[j+3]=hn;return}if(qt!==hn||Bt!==Jt||Ft!==_i||Vt!==sn){let an=1-wt;const en=Bt*Jt+Ft*_i+Vt*sn+qt*hn,xn=en>=0?1:-1,wn=1-en*en;if(wn>Number.EPSILON){const er=Math.sqrt(wn),Nn=Math.atan2(er,en*xn);an=Math.sin(an*Nn)/er,wt=Math.sin(wt*Nn)/er}const En=wt*xn;if(Bt=Bt*an+Jt*En,Ft=Ft*an+_i*En,Vt=Vt*an+sn*En,qt=qt*an+hn*En,an===1-wt){const er=1/Math.sqrt(Bt*Bt+Ft*Ft+Vt*Vt+qt*qt);Bt*=er,Ft*=er,Vt*=er,qt*=er}}c[j]=Bt,c[j+1]=Ft,c[j+2]=Vt,c[j+3]=qt}static multiplyQuaternionsFlat(c,j,rt,at,ut,At){const wt=rt[at],Bt=rt[at+1],Ft=rt[at+2],Vt=rt[at+3],qt=ut[At],Jt=ut[At+1],_i=ut[At+2],sn=ut[At+3];return c[j]=wt*sn+Vt*qt+Bt*_i-Ft*Jt,c[j+1]=Bt*sn+Vt*Jt+Ft*qt-wt*_i,c[j+2]=Ft*sn+Vt*_i+wt*Jt-Bt*qt,c[j+3]=Vt*sn-wt*qt-Bt*Jt-Ft*_i,c}get x(){return this._x}set x(c){this._x=c,this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c,this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c,this._onChangeCallback()}get w(){return this._w}set w(c){this._w=c,this._onChangeCallback()}set(c,j,rt,at){return this._x=c,this._y=j,this._z=rt,this._w=at,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(c){return this._x=c.x,this._y=c.y,this._z=c.z,this._w=c.w,this._onChangeCallback(),this}setFromEuler(c,j=!0){const rt=c._x,at=c._y,ut=c._z,At=c._order,wt=Math.cos,Bt=Math.sin,Ft=wt(rt/2),Vt=wt(at/2),qt=wt(ut/2),Jt=Bt(rt/2),_i=Bt(at/2),sn=Bt(ut/2);switch(At){case"XYZ":this._x=Jt*Vt*qt+Ft*_i*sn,this._y=Ft*_i*qt-Jt*Vt*sn,this._z=Ft*Vt*sn+Jt*_i*qt,this._w=Ft*Vt*qt-Jt*_i*sn;break;case"YXZ":this._x=Jt*Vt*qt+Ft*_i*sn,this._y=Ft*_i*qt-Jt*Vt*sn,this._z=Ft*Vt*sn-Jt*_i*qt,this._w=Ft*Vt*qt+Jt*_i*sn;break;case"ZXY":this._x=Jt*Vt*qt-Ft*_i*sn,this._y=Ft*_i*qt+Jt*Vt*sn,this._z=Ft*Vt*sn+Jt*_i*qt,this._w=Ft*Vt*qt-Jt*_i*sn;break;case"ZYX":this._x=Jt*Vt*qt-Ft*_i*sn,this._y=Ft*_i*qt+Jt*Vt*sn,this._z=Ft*Vt*sn-Jt*_i*qt,this._w=Ft*Vt*qt+Jt*_i*sn;break;case"YZX":this._x=Jt*Vt*qt+Ft*_i*sn,this._y=Ft*_i*qt+Jt*Vt*sn,this._z=Ft*Vt*sn-Jt*_i*qt,this._w=Ft*Vt*qt-Jt*_i*sn;break;case"XZY":this._x=Jt*Vt*qt-Ft*_i*sn,this._y=Ft*_i*qt-Jt*Vt*sn,this._z=Ft*Vt*sn+Jt*_i*qt,this._w=Ft*Vt*qt+Jt*_i*sn;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+At)}return j===!0&&this._onChangeCallback(),this}setFromAxisAngle(c,j){const rt=j/2,at=Math.sin(rt);return this._x=c.x*at,this._y=c.y*at,this._z=c.z*at,this._w=Math.cos(rt),this._onChangeCallback(),this}setFromRotationMatrix(c){const j=c.elements,rt=j[0],at=j[4],ut=j[8],At=j[1],wt=j[5],Bt=j[9],Ft=j[2],Vt=j[6],qt=j[10],Jt=rt+wt+qt;if(Jt>0){const _i=.5/Math.sqrt(Jt+1);this._w=.25/_i,this._x=(Vt-Bt)*_i,this._y=(ut-Ft)*_i,this._z=(At-at)*_i}else if(rt>wt&&rt>qt){const _i=2*Math.sqrt(1+rt-wt-qt);this._w=(Vt-Bt)/_i,this._x=.25*_i,this._y=(at+At)/_i,this._z=(ut+Ft)/_i}else if(wt>qt){const _i=2*Math.sqrt(1+wt-rt-qt);this._w=(ut-Ft)/_i,this._x=(at+At)/_i,this._y=.25*_i,this._z=(Bt+Vt)/_i}else{const _i=2*Math.sqrt(1+qt-rt-wt);this._w=(At-at)/_i,this._x=(ut+Ft)/_i,this._y=(Bt+Vt)/_i,this._z=.25*_i}return this._onChangeCallback(),this}setFromUnitVectors(c,j){let rt=c.dot(j)+1;return rt<Number.EPSILON?(rt=0,Math.abs(c.x)>Math.abs(c.z)?(this._x=-c.y,this._y=c.x,this._z=0,this._w=rt):(this._x=0,this._y=-c.z,this._z=c.y,this._w=rt)):(this._x=c.y*j.z-c.z*j.y,this._y=c.z*j.x-c.x*j.z,this._z=c.x*j.y-c.y*j.x,this._w=rt),this.normalize()}angleTo(c){return 2*Math.acos(Math.abs(F0(this.dot(c),-1,1)))}rotateTowards(c,j){const rt=this.angleTo(c);if(rt===0)return this;const at=Math.min(1,j/rt);return this.slerp(c,at),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(c){return this._x*c._x+this._y*c._y+this._z*c._z+this._w*c._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let c=this.length();return c===0?(this._x=0,this._y=0,this._z=0,this._w=1):(c=1/c,this._x=this._x*c,this._y=this._y*c,this._z=this._z*c,this._w=this._w*c),this._onChangeCallback(),this}multiply(c){return this.multiplyQuaternions(this,c)}premultiply(c){return this.multiplyQuaternions(c,this)}multiplyQuaternions(c,j){const rt=c._x,at=c._y,ut=c._z,At=c._w,wt=j._x,Bt=j._y,Ft=j._z,Vt=j._w;return this._x=rt*Vt+At*wt+at*Ft-ut*Bt,this._y=at*Vt+At*Bt+ut*wt-rt*Ft,this._z=ut*Vt+At*Ft+rt*Bt-at*wt,this._w=At*Vt-rt*wt-at*Bt-ut*Ft,this._onChangeCallback(),this}slerp(c,j){if(j===0)return this;if(j===1)return this.copy(c);const rt=this._x,at=this._y,ut=this._z,At=this._w;let wt=At*c._w+rt*c._x+at*c._y+ut*c._z;if(wt<0?(this._w=-c._w,this._x=-c._x,this._y=-c._y,this._z=-c._z,wt=-wt):this.copy(c),wt>=1)return this._w=At,this._x=rt,this._y=at,this._z=ut,this;const Bt=1-wt*wt;if(Bt<=Number.EPSILON){const _i=1-j;return this._w=_i*At+j*this._w,this._x=_i*rt+j*this._x,this._y=_i*at+j*this._y,this._z=_i*ut+j*this._z,this.normalize(),this}const Ft=Math.sqrt(Bt),Vt=Math.atan2(Ft,wt),qt=Math.sin((1-j)*Vt)/Ft,Jt=Math.sin(j*Vt)/Ft;return this._w=At*qt+this._w*Jt,this._x=rt*qt+this._x*Jt,this._y=at*qt+this._y*Jt,this._z=ut*qt+this._z*Jt,this._onChangeCallback(),this}slerpQuaternions(c,j,rt){return this.copy(c).slerp(j,rt)}random(){const c=2*Math.PI*Math.random(),j=2*Math.PI*Math.random(),rt=Math.random(),at=Math.sqrt(1-rt),ut=Math.sqrt(rt);return this.set(at*Math.sin(c),at*Math.cos(c),ut*Math.sin(j),ut*Math.cos(j))}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._w===this._w}fromArray(c,j=0){return this._x=c[j],this._y=c[j+1],this._z=c[j+2],this._w=c[j+3],this._onChangeCallback(),this}toArray(c=[],j=0){return c[j]=this._x,c[j+1]=this._y,c[j+2]=this._z,c[j+3]=this._w,c}fromBufferAttribute(c,j){return this._x=c.getX(j),this._y=c.getY(j),this._z=c.getZ(j),this._w=c.getW(j),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(c){return this._onChangeCallback=c,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class kn{constructor(c=0,j=0,rt=0){kn.prototype.isVector3=!0,this.x=c,this.y=j,this.z=rt}set(c,j,rt){return rt===void 0&&(rt=this.z),this.x=c,this.y=j,this.z=rt,this}setScalar(c){return this.x=c,this.y=c,this.z=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setZ(c){return this.z=c,this}setComponent(c,j){switch(c){case 0:this.x=j;break;case 1:this.y=j;break;case 2:this.z=j;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(c){return this.x=c.x,this.y=c.y,this.z=c.z,this}add(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z,this}addScalar(c){return this.x+=c,this.y+=c,this.z+=c,this}addVectors(c,j){return this.x=c.x+j.x,this.y=c.y+j.y,this.z=c.z+j.z,this}addScaledVector(c,j){return this.x+=c.x*j,this.y+=c.y*j,this.z+=c.z*j,this}sub(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z,this}subScalar(c){return this.x-=c,this.y-=c,this.z-=c,this}subVectors(c,j){return this.x=c.x-j.x,this.y=c.y-j.y,this.z=c.z-j.z,this}multiply(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z,this}multiplyScalar(c){return this.x*=c,this.y*=c,this.z*=c,this}multiplyVectors(c,j){return this.x=c.x*j.x,this.y=c.y*j.y,this.z=c.z*j.z,this}applyEuler(c){return this.applyQuaternion(I0.setFromEuler(c))}applyAxisAngle(c,j){return this.applyQuaternion(I0.setFromAxisAngle(c,j))}applyMatrix3(c){const j=this.x,rt=this.y,at=this.z,ut=c.elements;return this.x=ut[0]*j+ut[3]*rt+ut[6]*at,this.y=ut[1]*j+ut[4]*rt+ut[7]*at,this.z=ut[2]*j+ut[5]*rt+ut[8]*at,this}applyNormalMatrix(c){return this.applyMatrix3(c).normalize()}applyMatrix4(c){const j=this.x,rt=this.y,at=this.z,ut=c.elements,At=1/(ut[3]*j+ut[7]*rt+ut[11]*at+ut[15]);return this.x=(ut[0]*j+ut[4]*rt+ut[8]*at+ut[12])*At,this.y=(ut[1]*j+ut[5]*rt+ut[9]*at+ut[13])*At,this.z=(ut[2]*j+ut[6]*rt+ut[10]*at+ut[14])*At,this}applyQuaternion(c){const j=this.x,rt=this.y,at=this.z,ut=c.x,At=c.y,wt=c.z,Bt=c.w,Ft=2*(At*at-wt*rt),Vt=2*(wt*j-ut*at),qt=2*(ut*rt-At*j);return this.x=j+Bt*Ft+At*qt-wt*Vt,this.y=rt+Bt*Vt+wt*Ft-ut*qt,this.z=at+Bt*qt+ut*Vt-At*Ft,this}project(c){return this.applyMatrix4(c.matrixWorldInverse).applyMatrix4(c.projectionMatrix)}unproject(c){return this.applyMatrix4(c.projectionMatrixInverse).applyMatrix4(c.matrixWorld)}transformDirection(c){const j=this.x,rt=this.y,at=this.z,ut=c.elements;return this.x=ut[0]*j+ut[4]*rt+ut[8]*at,this.y=ut[1]*j+ut[5]*rt+ut[9]*at,this.z=ut[2]*j+ut[6]*rt+ut[10]*at,this.normalize()}divide(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z,this}divideScalar(c){return this.multiplyScalar(1/c)}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this}clamp(c,j){return this.x=Math.max(c.x,Math.min(j.x,this.x)),this.y=Math.max(c.y,Math.min(j.y,this.y)),this.z=Math.max(c.z,Math.min(j.z,this.z)),this}clampScalar(c,j){return this.x=Math.max(c,Math.min(j,this.x)),this.y=Math.max(c,Math.min(j,this.y)),this.z=Math.max(c,Math.min(j,this.z)),this}clampLength(c,j){const rt=this.length();return this.divideScalar(rt||1).multiplyScalar(Math.max(c,Math.min(j,rt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(c){return this.x*c.x+this.y*c.y+this.z*c.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,j){return this.x+=(c.x-this.x)*j,this.y+=(c.y-this.y)*j,this.z+=(c.z-this.z)*j,this}lerpVectors(c,j,rt){return this.x=c.x+(j.x-c.x)*rt,this.y=c.y+(j.y-c.y)*rt,this.z=c.z+(j.z-c.z)*rt,this}cross(c){return this.crossVectors(this,c)}crossVectors(c,j){const rt=c.x,at=c.y,ut=c.z,At=j.x,wt=j.y,Bt=j.z;return this.x=at*Bt-ut*wt,this.y=ut*At-rt*Bt,this.z=rt*wt-at*At,this}projectOnVector(c){const j=c.lengthSq();if(j===0)return this.set(0,0,0);const rt=c.dot(this)/j;return this.copy(c).multiplyScalar(rt)}projectOnPlane(c){return $l.copy(this).projectOnVector(c),this.sub($l)}reflect(c){return this.sub($l.copy(c).multiplyScalar(2*this.dot(c)))}angleTo(c){const j=Math.sqrt(this.lengthSq()*c.lengthSq());if(j===0)return Math.PI/2;const rt=this.dot(c)/j;return Math.acos(F0(rt,-1,1))}distanceTo(c){return Math.sqrt(this.distanceToSquared(c))}distanceToSquared(c){const j=this.x-c.x,rt=this.y-c.y,at=this.z-c.z;return j*j+rt*rt+at*at}manhattanDistanceTo(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)+Math.abs(this.z-c.z)}setFromSpherical(c){return this.setFromSphericalCoords(c.radius,c.phi,c.theta)}setFromSphericalCoords(c,j,rt){const at=Math.sin(j)*c;return this.x=at*Math.sin(rt),this.y=Math.cos(j)*c,this.z=at*Math.cos(rt),this}setFromCylindrical(c){return this.setFromCylindricalCoords(c.radius,c.theta,c.y)}setFromCylindricalCoords(c,j,rt){return this.x=c*Math.sin(j),this.y=rt,this.z=c*Math.cos(j),this}setFromMatrixPosition(c){const j=c.elements;return this.x=j[12],this.y=j[13],this.z=j[14],this}setFromMatrixScale(c){const j=this.setFromMatrixColumn(c,0).length(),rt=this.setFromMatrixColumn(c,1).length(),at=this.setFromMatrixColumn(c,2).length();return this.x=j,this.y=rt,this.z=at,this}setFromMatrixColumn(c,j){return this.fromArray(c.elements,j*4)}setFromMatrix3Column(c,j){return this.fromArray(c.elements,j*3)}setFromEuler(c){return this.x=c._x,this.y=c._y,this.z=c._z,this}setFromColor(c){return this.x=c.r,this.y=c.g,this.z=c.b,this}equals(c){return c.x===this.x&&c.y===this.y&&c.z===this.z}fromArray(c,j=0){return this.x=c[j],this.y=c[j+1],this.z=c[j+2],this}toArray(c=[],j=0){return c[j]=this.x,c[j+1]=this.y,c[j+2]=this.z,c}fromBufferAttribute(c,j){return this.x=c.getX(j),this.y=c.getY(j),this.z=c.getZ(j),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const c=Math.random()*Math.PI*2,j=Math.random()*2-1,rt=Math.sqrt(1-j*j);return this.x=rt*Math.cos(c),this.y=j,this.z=rt*Math.sin(c),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $l=new kn,I0=new e0;class H0{constructor(c=new kn(1/0,1/0,1/0),j=new kn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=c,this.max=j}set(c,j){return this.min.copy(c),this.max.copy(j),this}setFromArray(c){this.makeEmpty();for(let j=0,rt=c.length;j<rt;j+=3)this.expandByPoint(zl.fromArray(c,j));return this}setFromBufferAttribute(c){this.makeEmpty();for(let j=0,rt=c.count;j<rt;j++)this.expandByPoint(zl.fromBufferAttribute(c,j));return this}setFromPoints(c){this.makeEmpty();for(let j=0,rt=c.length;j<rt;j++)this.expandByPoint(c[j]);return this}setFromCenterAndSize(c,j){const rt=zl.copy(j).multiplyScalar(.5);return this.min.copy(c).sub(rt),this.max.copy(c).add(rt),this}setFromObject(c,j=!1){return this.makeEmpty(),this.expandByObject(c,j)}clone(){return new this.constructor().copy(this)}copy(c){return this.min.copy(c.min),this.max.copy(c.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(c){return this.isEmpty()?c.set(0,0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(c){return this.isEmpty()?c.set(0,0,0):c.subVectors(this.max,this.min)}expandByPoint(c){return this.min.min(c),this.max.max(c),this}expandByVector(c){return this.min.sub(c),this.max.add(c),this}expandByScalar(c){return this.min.addScalar(-c),this.max.addScalar(c),this}expandByObject(c,j=!1){c.updateWorldMatrix(!1,!1);const rt=c.geometry;if(rt!==void 0){const ut=rt.getAttribute("position");if(j===!0&&ut!==void 0&&c.isInstancedMesh!==!0)for(let At=0,wt=ut.count;At<wt;At++)c.isMesh===!0?c.getVertexPosition(At,zl):zl.fromBufferAttribute(ut,At),zl.applyMatrix4(c.matrixWorld),this.expandByPoint(zl);else c.boundingBox!==void 0?(c.boundingBox===null&&c.computeBoundingBox(),U1.copy(c.boundingBox)):(rt.boundingBox===null&&rt.computeBoundingBox(),U1.copy(rt.boundingBox)),U1.applyMatrix4(c.matrixWorld),this.union(U1)}const at=c.children;for(let ut=0,At=at.length;ut<At;ut++)this.expandByObject(at[ut],j);return this}containsPoint(c){return!(c.x<this.min.x||c.x>this.max.x||c.y<this.min.y||c.y>this.max.y||c.z<this.min.z||c.z>this.max.z)}containsBox(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y&&this.min.z<=c.min.z&&c.max.z<=this.max.z}getParameter(c,j){return j.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-this.min.y),(c.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(c){return!(c.max.x<this.min.x||c.min.x>this.max.x||c.max.y<this.min.y||c.min.y>this.max.y||c.max.z<this.min.z||c.min.z>this.max.z)}intersectsSphere(c){return this.clampPoint(c.center,zl),zl.distanceToSquared(c.center)<=c.radius*c.radius}intersectsPlane(c){let j,rt;return c.normal.x>0?(j=c.normal.x*this.min.x,rt=c.normal.x*this.max.x):(j=c.normal.x*this.max.x,rt=c.normal.x*this.min.x),c.normal.y>0?(j+=c.normal.y*this.min.y,rt+=c.normal.y*this.max.y):(j+=c.normal.y*this.max.y,rt+=c.normal.y*this.min.y),c.normal.z>0?(j+=c.normal.z*this.min.z,rt+=c.normal.z*this.max.z):(j+=c.normal.z*this.max.z,rt+=c.normal.z*this.min.z),j<=-c.constant&&rt>=-c.constant}intersectsTriangle(c){if(this.isEmpty())return!1;this.getCenter(t0),Do.subVectors(this.max,t0),s1.subVectors(c.a,t0),Rl.subVectors(c.b,t0),fo.subVectors(c.c,t0),wo.subVectors(Rl,s1),Fl.subVectors(fo,Rl),Il.subVectors(s1,fo);let j=[0,-wo.z,wo.y,0,-Fl.z,Fl.y,0,-Il.z,Il.y,wo.z,0,-wo.x,Fl.z,0,-Fl.x,Il.z,0,-Il.x,-wo.y,wo.x,0,-Fl.y,Fl.x,0,-Il.y,Il.x,0];return!e1(j,s1,Rl,fo,Do)||(j=[1,0,0,0,1,0,0,0,1],!e1(j,s1,Rl,fo,Do))?!1:(_s.crossVectors(wo,Fl),j=[_s.x,_s.y,_s.z],e1(j,s1,Rl,fo,Do))}clampPoint(c,j){return j.copy(c).clamp(this.min,this.max)}distanceToPoint(c){return this.clampPoint(c,zl).distanceTo(c)}getBoundingSphere(c){return this.isEmpty()?c.makeEmpty():(this.getCenter(c.center),c.radius=this.getSize(zl).length()*.5),c}intersect(c){return this.min.max(c.min),this.max.min(c.max),this.isEmpty()&&this.makeEmpty(),this}union(c){return this.min.min(c.min),this.max.max(c.max),this}applyMatrix4(c){return this.isEmpty()?this:(Wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(c),Wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c),Wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c),Wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c),Wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c),Wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c),Wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c),Wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c),this.setFromPoints(Wo),this)}translate(c){return this.min.add(c),this.max.add(c),this}equals(c){return c.min.equals(this.min)&&c.max.equals(this.max)}}const Wo=[new kn,new kn,new kn,new kn,new kn,new kn,new kn,new kn],zl=new kn,U1=new H0,s1=new kn,Rl=new kn,fo=new kn,wo=new kn,Fl=new kn,Il=new kn,t0=new kn,Do=new kn,_s=new kn,Po=new kn;function e1(ht,c,j,rt,at){for(let ut=0,At=ht.length-3;ut<=At;ut+=3){Po.fromArray(ht,ut);const wt=at.x*Math.abs(Po.x)+at.y*Math.abs(Po.y)+at.z*Math.abs(Po.z),Bt=c.dot(Po),Ft=j.dot(Po),Vt=rt.dot(Po);if(Math.max(-Math.max(Bt,Ft,Vt),Math.min(Bt,Ft,Vt))>wt)return!1}return!0}const iu=new H0,nu=new kn,ku=new kn;class ba{constructor(c=new kn,j=-1){this.isSphere=!0,this.center=c,this.radius=j}set(c,j){return this.center.copy(c),this.radius=j,this}setFromPoints(c,j){const rt=this.center;j!==void 0?rt.copy(j):iu.setFromPoints(c).getCenter(rt);let at=0;for(let ut=0,At=c.length;ut<At;ut++)at=Math.max(at,rt.distanceToSquared(c[ut]));return this.radius=Math.sqrt(at),this}copy(c){return this.center.copy(c.center),this.radius=c.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(c){return c.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(c){return c.distanceTo(this.center)-this.radius}intersectsSphere(c){const j=this.radius+c.radius;return c.center.distanceToSquared(this.center)<=j*j}intersectsBox(c){return c.intersectsSphere(this)}intersectsPlane(c){return Math.abs(c.distanceToPoint(this.center))<=this.radius}clampPoint(c,j){const rt=this.center.distanceToSquared(c);return j.copy(c),rt>this.radius*this.radius&&(j.sub(this.center).normalize(),j.multiplyScalar(this.radius).add(this.center)),j}getBoundingBox(c){return this.isEmpty()?(c.makeEmpty(),c):(c.set(this.center,this.center),c.expandByScalar(this.radius),c)}applyMatrix4(c){return this.center.applyMatrix4(c),this.radius=this.radius*c.getMaxScaleOnAxis(),this}translate(c){return this.center.add(c),this}expandByPoint(c){if(this.isEmpty())return this.center.copy(c),this.radius=0,this;nu.subVectors(c,this.center);const j=nu.lengthSq();if(j>this.radius*this.radius){const rt=Math.sqrt(j),at=(rt-this.radius)*.5;this.center.addScaledVector(nu,at/rt),this.radius+=at}return this}union(c){return c.isEmpty()?this:this.isEmpty()?(this.copy(c),this):(this.center.equals(c.center)===!0?this.radius=Math.max(this.radius,c.radius):(ku.subVectors(c.center,this.center).setLength(c.radius),this.expandByPoint(nu.copy(c.center).add(ku)),this.expandByPoint(nu.copy(c.center).sub(ku))),this)}equals(c){return c.center.equals(this.center)&&c.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _1=new kn,ru=new kn,Nu=new kn,H1=new kn,D2=new kn,i2=new kn,n2=new kn;class yl{constructor(c=new kn,j=new kn(0,0,-1)){this.origin=c,this.direction=j}set(c,j){return this.origin.copy(c),this.direction.copy(j),this}copy(c){return this.origin.copy(c.origin),this.direction.copy(c.direction),this}at(c,j){return j.copy(this.origin).addScaledVector(this.direction,c)}lookAt(c){return this.direction.copy(c).sub(this.origin).normalize(),this}recast(c){return this.origin.copy(this.at(c,_1)),this}closestPointToPoint(c,j){j.subVectors(c,this.origin);const rt=j.dot(this.direction);return rt<0?j.copy(this.origin):j.copy(this.origin).addScaledVector(this.direction,rt)}distanceToPoint(c){return Math.sqrt(this.distanceSqToPoint(c))}distanceSqToPoint(c){const j=_1.subVectors(c,this.origin).dot(this.direction);return j<0?this.origin.distanceToSquared(c):(_1.copy(this.origin).addScaledVector(this.direction,j),_1.distanceToSquared(c))}distanceSqToSegment(c,j,rt,at){ru.copy(c).add(j).multiplyScalar(.5),Nu.copy(j).sub(c).normalize(),H1.copy(this.origin).sub(ru);const ut=c.distanceTo(j)*.5,At=-this.direction.dot(Nu),wt=H1.dot(this.direction),Bt=-H1.dot(Nu),Ft=H1.lengthSq(),Vt=Math.abs(1-At*At);let qt,Jt,_i,sn;if(Vt>0)if(qt=At*Bt-wt,Jt=At*wt-Bt,sn=ut*Vt,qt>=0)if(Jt>=-sn)if(Jt<=sn){const hn=1/Vt;qt*=hn,Jt*=hn,_i=qt*(qt+At*Jt+2*wt)+Jt*(At*qt+Jt+2*Bt)+Ft}else Jt=ut,qt=Math.max(0,-(At*Jt+wt)),_i=-qt*qt+Jt*(Jt+2*Bt)+Ft;else Jt=-ut,qt=Math.max(0,-(At*Jt+wt)),_i=-qt*qt+Jt*(Jt+2*Bt)+Ft;else Jt<=-sn?(qt=Math.max(0,-(-At*ut+wt)),Jt=qt>0?-ut:Math.min(Math.max(-ut,-Bt),ut),_i=-qt*qt+Jt*(Jt+2*Bt)+Ft):Jt<=sn?(qt=0,Jt=Math.min(Math.max(-ut,-Bt),ut),_i=Jt*(Jt+2*Bt)+Ft):(qt=Math.max(0,-(At*ut+wt)),Jt=qt>0?ut:Math.min(Math.max(-ut,-Bt),ut),_i=-qt*qt+Jt*(Jt+2*Bt)+Ft);else Jt=At>0?-ut:ut,qt=Math.max(0,-(At*Jt+wt)),_i=-qt*qt+Jt*(Jt+2*Bt)+Ft;return rt&&rt.copy(this.origin).addScaledVector(this.direction,qt),at&&at.copy(ru).addScaledVector(Nu,Jt),_i}intersectSphere(c,j){_1.subVectors(c.center,this.origin);const rt=_1.dot(this.direction),at=_1.dot(_1)-rt*rt,ut=c.radius*c.radius;if(at>ut)return null;const At=Math.sqrt(ut-at),wt=rt-At,Bt=rt+At;return Bt<0?null:wt<0?this.at(Bt,j):this.at(wt,j)}intersectsSphere(c){return this.distanceSqToPoint(c.center)<=c.radius*c.radius}distanceToPlane(c){const j=c.normal.dot(this.direction);if(j===0)return c.distanceToPoint(this.origin)===0?0:null;const rt=-(this.origin.dot(c.normal)+c.constant)/j;return rt>=0?rt:null}intersectPlane(c,j){const rt=this.distanceToPlane(c);return rt===null?null:this.at(rt,j)}intersectsPlane(c){const j=c.distanceToPoint(this.origin);return j===0||c.normal.dot(this.direction)*j<0}intersectBox(c,j){let rt,at,ut,At,wt,Bt;const Ft=1/this.direction.x,Vt=1/this.direction.y,qt=1/this.direction.z,Jt=this.origin;return Ft>=0?(rt=(c.min.x-Jt.x)*Ft,at=(c.max.x-Jt.x)*Ft):(rt=(c.max.x-Jt.x)*Ft,at=(c.min.x-Jt.x)*Ft),Vt>=0?(ut=(c.min.y-Jt.y)*Vt,At=(c.max.y-Jt.y)*Vt):(ut=(c.max.y-Jt.y)*Vt,At=(c.min.y-Jt.y)*Vt),rt>At||ut>at||((ut>rt||isNaN(rt))&&(rt=ut),(At<at||isNaN(at))&&(at=At),qt>=0?(wt=(c.min.z-Jt.z)*qt,Bt=(c.max.z-Jt.z)*qt):(wt=(c.max.z-Jt.z)*qt,Bt=(c.min.z-Jt.z)*qt),rt>Bt||wt>at)||((wt>rt||rt!==rt)&&(rt=wt),(Bt<at||at!==at)&&(at=Bt),at<0)?null:this.at(rt>=0?rt:at,j)}intersectsBox(c){return this.intersectBox(c,_1)!==null}intersectTriangle(c,j,rt,at,ut){D2.subVectors(j,c),i2.subVectors(rt,c),n2.crossVectors(D2,i2);let At=this.direction.dot(n2),wt;if(At>0){if(at)return null;wt=1}else if(At<0)wt=-1,At=-At;else return null;H1.subVectors(this.origin,c);const Bt=wt*this.direction.dot(i2.crossVectors(H1,i2));if(Bt<0)return null;const Ft=wt*this.direction.dot(D2.cross(H1));if(Ft<0||Bt+Ft>At)return null;const Vt=-wt*H1.dot(n2);return Vt<0?null:this.at(Vt/At,ut)}applyMatrix4(c){return this.origin.applyMatrix4(c),this.direction.transformDirection(c),this}equals(c){return c.origin.equals(this.origin)&&c.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Vs{constructor(c,j,rt,at,ut,At,wt,Bt,Ft,Vt,qt,Jt,_i,sn,hn,an){Vs.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c!==void 0&&this.set(c,j,rt,at,ut,At,wt,Bt,Ft,Vt,qt,Jt,_i,sn,hn,an)}set(c,j,rt,at,ut,At,wt,Bt,Ft,Vt,qt,Jt,_i,sn,hn,an){const en=this.elements;return en[0]=c,en[4]=j,en[8]=rt,en[12]=at,en[1]=ut,en[5]=At,en[9]=wt,en[13]=Bt,en[2]=Ft,en[6]=Vt,en[10]=qt,en[14]=Jt,en[3]=_i,en[7]=sn,en[11]=hn,en[15]=an,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Vs().fromArray(this.elements)}copy(c){const j=this.elements,rt=c.elements;return j[0]=rt[0],j[1]=rt[1],j[2]=rt[2],j[3]=rt[3],j[4]=rt[4],j[5]=rt[5],j[6]=rt[6],j[7]=rt[7],j[8]=rt[8],j[9]=rt[9],j[10]=rt[10],j[11]=rt[11],j[12]=rt[12],j[13]=rt[13],j[14]=rt[14],j[15]=rt[15],this}copyPosition(c){const j=this.elements,rt=c.elements;return j[12]=rt[12],j[13]=rt[13],j[14]=rt[14],this}setFromMatrix3(c){const j=c.elements;return this.set(j[0],j[3],j[6],0,j[1],j[4],j[7],0,j[2],j[5],j[8],0,0,0,0,1),this}extractBasis(c,j,rt){return c.setFromMatrixColumn(this,0),j.setFromMatrixColumn(this,1),rt.setFromMatrixColumn(this,2),this}makeBasis(c,j,rt){return this.set(c.x,j.x,rt.x,0,c.y,j.y,rt.y,0,c.z,j.z,rt.z,0,0,0,0,1),this}extractRotation(c){const j=this.elements,rt=c.elements,at=1/wl.setFromMatrixColumn(c,0).length(),ut=1/wl.setFromMatrixColumn(c,1).length(),At=1/wl.setFromMatrixColumn(c,2).length();return j[0]=rt[0]*at,j[1]=rt[1]*at,j[2]=rt[2]*at,j[3]=0,j[4]=rt[4]*ut,j[5]=rt[5]*ut,j[6]=rt[6]*ut,j[7]=0,j[8]=rt[8]*At,j[9]=rt[9]*At,j[10]=rt[10]*At,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,this}makeRotationFromEuler(c){const j=this.elements,rt=c.x,at=c.y,ut=c.z,At=Math.cos(rt),wt=Math.sin(rt),Bt=Math.cos(at),Ft=Math.sin(at),Vt=Math.cos(ut),qt=Math.sin(ut);if(c.order==="XYZ"){const Jt=At*Vt,_i=At*qt,sn=wt*Vt,hn=wt*qt;j[0]=Bt*Vt,j[4]=-Bt*qt,j[8]=Ft,j[1]=_i+sn*Ft,j[5]=Jt-hn*Ft,j[9]=-wt*Bt,j[2]=hn-Jt*Ft,j[6]=sn+_i*Ft,j[10]=At*Bt}else if(c.order==="YXZ"){const Jt=Bt*Vt,_i=Bt*qt,sn=Ft*Vt,hn=Ft*qt;j[0]=Jt+hn*wt,j[4]=sn*wt-_i,j[8]=At*Ft,j[1]=At*qt,j[5]=At*Vt,j[9]=-wt,j[2]=_i*wt-sn,j[6]=hn+Jt*wt,j[10]=At*Bt}else if(c.order==="ZXY"){const Jt=Bt*Vt,_i=Bt*qt,sn=Ft*Vt,hn=Ft*qt;j[0]=Jt-hn*wt,j[4]=-At*qt,j[8]=sn+_i*wt,j[1]=_i+sn*wt,j[5]=At*Vt,j[9]=hn-Jt*wt,j[2]=-At*Ft,j[6]=wt,j[10]=At*Bt}else if(c.order==="ZYX"){const Jt=At*Vt,_i=At*qt,sn=wt*Vt,hn=wt*qt;j[0]=Bt*Vt,j[4]=sn*Ft-_i,j[8]=Jt*Ft+hn,j[1]=Bt*qt,j[5]=hn*Ft+Jt,j[9]=_i*Ft-sn,j[2]=-Ft,j[6]=wt*Bt,j[10]=At*Bt}else if(c.order==="YZX"){const Jt=At*Bt,_i=At*Ft,sn=wt*Bt,hn=wt*Ft;j[0]=Bt*Vt,j[4]=hn-Jt*qt,j[8]=sn*qt+_i,j[1]=qt,j[5]=At*Vt,j[9]=-wt*Vt,j[2]=-Ft*Vt,j[6]=_i*qt+sn,j[10]=Jt-hn*qt}else if(c.order==="XZY"){const Jt=At*Bt,_i=At*Ft,sn=wt*Bt,hn=wt*Ft;j[0]=Bt*Vt,j[4]=-qt,j[8]=Ft*Vt,j[1]=Jt*qt+hn,j[5]=At*Vt,j[9]=_i*qt-sn,j[2]=sn*qt-_i,j[6]=wt*Vt,j[10]=hn*qt+Jt}return j[3]=0,j[7]=0,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,this}makeRotationFromQuaternion(c){return this.compose(yv,c,wv)}lookAt(c,j,rt){const at=this.elements;return d1.subVectors(c,j),d1.lengthSq()===0&&(d1.z=1),d1.normalize(),Au.crossVectors(rt,d1),Au.lengthSq()===0&&(Math.abs(rt.z)===1?d1.x+=1e-4:d1.z+=1e-4,d1.normalize(),Au.crossVectors(rt,d1)),Au.normalize(),P2.crossVectors(d1,Au),at[0]=Au.x,at[4]=P2.x,at[8]=d1.x,at[1]=Au.y,at[5]=P2.y,at[9]=d1.y,at[2]=Au.z,at[6]=P2.z,at[10]=d1.z,this}multiply(c){return this.multiplyMatrices(this,c)}premultiply(c){return this.multiplyMatrices(c,this)}multiplyMatrices(c,j){const rt=c.elements,at=j.elements,ut=this.elements,At=rt[0],wt=rt[4],Bt=rt[8],Ft=rt[12],Vt=rt[1],qt=rt[5],Jt=rt[9],_i=rt[13],sn=rt[2],hn=rt[6],an=rt[10],en=rt[14],xn=rt[3],wn=rt[7],En=rt[11],er=rt[15],Nn=at[0],zn=at[4],$n=at[8],Ln=at[12],Sn=at[1],jn=at[5],ur=at[9],or=at[13],Ar=at[2],br=at[6],Vr=at[10],Es=at[14],Sr=at[3],hs=at[7],vs=at[11],zs=at[15];return ut[0]=At*Nn+wt*Sn+Bt*Ar+Ft*Sr,ut[4]=At*zn+wt*jn+Bt*br+Ft*hs,ut[8]=At*$n+wt*ur+Bt*Vr+Ft*vs,ut[12]=At*Ln+wt*or+Bt*Es+Ft*zs,ut[1]=Vt*Nn+qt*Sn+Jt*Ar+_i*Sr,ut[5]=Vt*zn+qt*jn+Jt*br+_i*hs,ut[9]=Vt*$n+qt*ur+Jt*Vr+_i*vs,ut[13]=Vt*Ln+qt*or+Jt*Es+_i*zs,ut[2]=sn*Nn+hn*Sn+an*Ar+en*Sr,ut[6]=sn*zn+hn*jn+an*br+en*hs,ut[10]=sn*$n+hn*ur+an*Vr+en*vs,ut[14]=sn*Ln+hn*or+an*Es+en*zs,ut[3]=xn*Nn+wn*Sn+En*Ar+er*Sr,ut[7]=xn*zn+wn*jn+En*br+er*hs,ut[11]=xn*$n+wn*ur+En*Vr+er*vs,ut[15]=xn*Ln+wn*or+En*Es+er*zs,this}multiplyScalar(c){const j=this.elements;return j[0]*=c,j[4]*=c,j[8]*=c,j[12]*=c,j[1]*=c,j[5]*=c,j[9]*=c,j[13]*=c,j[2]*=c,j[6]*=c,j[10]*=c,j[14]*=c,j[3]*=c,j[7]*=c,j[11]*=c,j[15]*=c,this}determinant(){const c=this.elements,j=c[0],rt=c[4],at=c[8],ut=c[12],At=c[1],wt=c[5],Bt=c[9],Ft=c[13],Vt=c[2],qt=c[6],Jt=c[10],_i=c[14],sn=c[3],hn=c[7],an=c[11],en=c[15];return sn*(+ut*Bt*qt-at*Ft*qt-ut*wt*Jt+rt*Ft*Jt+at*wt*_i-rt*Bt*_i)+hn*(+j*Bt*_i-j*Ft*Jt+ut*At*Jt-at*At*_i+at*Ft*Vt-ut*Bt*Vt)+an*(+j*Ft*qt-j*wt*_i-ut*At*qt+rt*At*_i+ut*wt*Vt-rt*Ft*Vt)+en*(-at*wt*Vt-j*Bt*qt+j*wt*Jt+at*At*qt-rt*At*Jt+rt*Bt*Vt)}transpose(){const c=this.elements;let j;return j=c[1],c[1]=c[4],c[4]=j,j=c[2],c[2]=c[8],c[8]=j,j=c[6],c[6]=c[9],c[9]=j,j=c[3],c[3]=c[12],c[12]=j,j=c[7],c[7]=c[13],c[13]=j,j=c[11],c[11]=c[14],c[14]=j,this}setPosition(c,j,rt){const at=this.elements;return c.isVector3?(at[12]=c.x,at[13]=c.y,at[14]=c.z):(at[12]=c,at[13]=j,at[14]=rt),this}invert(){const c=this.elements,j=c[0],rt=c[1],at=c[2],ut=c[3],At=c[4],wt=c[5],Bt=c[6],Ft=c[7],Vt=c[8],qt=c[9],Jt=c[10],_i=c[11],sn=c[12],hn=c[13],an=c[14],en=c[15],xn=qt*an*Ft-hn*Jt*Ft+hn*Bt*_i-wt*an*_i-qt*Bt*en+wt*Jt*en,wn=sn*Jt*Ft-Vt*an*Ft-sn*Bt*_i+At*an*_i+Vt*Bt*en-At*Jt*en,En=Vt*hn*Ft-sn*qt*Ft+sn*wt*_i-At*hn*_i-Vt*wt*en+At*qt*en,er=sn*qt*Bt-Vt*hn*Bt-sn*wt*Jt+At*hn*Jt+Vt*wt*an-At*qt*an,Nn=j*xn+rt*wn+at*En+ut*er;if(Nn===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const zn=1/Nn;return c[0]=xn*zn,c[1]=(hn*Jt*ut-qt*an*ut-hn*at*_i+rt*an*_i+qt*at*en-rt*Jt*en)*zn,c[2]=(wt*an*ut-hn*Bt*ut+hn*at*Ft-rt*an*Ft-wt*at*en+rt*Bt*en)*zn,c[3]=(qt*Bt*ut-wt*Jt*ut-qt*at*Ft+rt*Jt*Ft+wt*at*_i-rt*Bt*_i)*zn,c[4]=wn*zn,c[5]=(Vt*an*ut-sn*Jt*ut+sn*at*_i-j*an*_i-Vt*at*en+j*Jt*en)*zn,c[6]=(sn*Bt*ut-At*an*ut-sn*at*Ft+j*an*Ft+At*at*en-j*Bt*en)*zn,c[7]=(At*Jt*ut-Vt*Bt*ut+Vt*at*Ft-j*Jt*Ft-At*at*_i+j*Bt*_i)*zn,c[8]=En*zn,c[9]=(sn*qt*ut-Vt*hn*ut-sn*rt*_i+j*hn*_i+Vt*rt*en-j*qt*en)*zn,c[10]=(At*hn*ut-sn*wt*ut+sn*rt*Ft-j*hn*Ft-At*rt*en+j*wt*en)*zn,c[11]=(Vt*wt*ut-At*qt*ut-Vt*rt*Ft+j*qt*Ft+At*rt*_i-j*wt*_i)*zn,c[12]=er*zn,c[13]=(Vt*hn*at-sn*qt*at+sn*rt*Jt-j*hn*Jt-Vt*rt*an+j*qt*an)*zn,c[14]=(sn*wt*at-At*hn*at-sn*rt*Bt+j*hn*Bt+At*rt*an-j*wt*an)*zn,c[15]=(At*qt*at-Vt*wt*at+Vt*rt*Bt-j*qt*Bt-At*rt*Jt+j*wt*Jt)*zn,this}scale(c){const j=this.elements,rt=c.x,at=c.y,ut=c.z;return j[0]*=rt,j[4]*=at,j[8]*=ut,j[1]*=rt,j[5]*=at,j[9]*=ut,j[2]*=rt,j[6]*=at,j[10]*=ut,j[3]*=rt,j[7]*=at,j[11]*=ut,this}getMaxScaleOnAxis(){const c=this.elements,j=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],rt=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],at=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(j,rt,at))}makeTranslation(c,j,rt){return c.isVector3?this.set(1,0,0,c.x,0,1,0,c.y,0,0,1,c.z,0,0,0,1):this.set(1,0,0,c,0,1,0,j,0,0,1,rt,0,0,0,1),this}makeRotationX(c){const j=Math.cos(c),rt=Math.sin(c);return this.set(1,0,0,0,0,j,-rt,0,0,rt,j,0,0,0,0,1),this}makeRotationY(c){const j=Math.cos(c),rt=Math.sin(c);return this.set(j,0,rt,0,0,1,0,0,-rt,0,j,0,0,0,0,1),this}makeRotationZ(c){const j=Math.cos(c),rt=Math.sin(c);return this.set(j,-rt,0,0,rt,j,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(c,j){const rt=Math.cos(j),at=Math.sin(j),ut=1-rt,At=c.x,wt=c.y,Bt=c.z,Ft=ut*At,Vt=ut*wt;return this.set(Ft*At+rt,Ft*wt-at*Bt,Ft*Bt+at*wt,0,Ft*wt+at*Bt,Vt*wt+rt,Vt*Bt-at*At,0,Ft*Bt-at*wt,Vt*Bt+at*At,ut*Bt*Bt+rt,0,0,0,0,1),this}makeScale(c,j,rt){return this.set(c,0,0,0,0,j,0,0,0,0,rt,0,0,0,0,1),this}makeShear(c,j,rt,at,ut,At){return this.set(1,rt,ut,0,c,1,At,0,j,at,1,0,0,0,0,1),this}compose(c,j,rt){const at=this.elements,ut=j._x,At=j._y,wt=j._z,Bt=j._w,Ft=ut+ut,Vt=At+At,qt=wt+wt,Jt=ut*Ft,_i=ut*Vt,sn=ut*qt,hn=At*Vt,an=At*qt,en=wt*qt,xn=Bt*Ft,wn=Bt*Vt,En=Bt*qt,er=rt.x,Nn=rt.y,zn=rt.z;return at[0]=(1-(hn+en))*er,at[1]=(_i+En)*er,at[2]=(sn-wn)*er,at[3]=0,at[4]=(_i-En)*Nn,at[5]=(1-(Jt+en))*Nn,at[6]=(an+xn)*Nn,at[7]=0,at[8]=(sn+wn)*zn,at[9]=(an-xn)*zn,at[10]=(1-(Jt+hn))*zn,at[11]=0,at[12]=c.x,at[13]=c.y,at[14]=c.z,at[15]=1,this}decompose(c,j,rt){const at=this.elements;let ut=wl.set(at[0],at[1],at[2]).length();const At=wl.set(at[4],at[5],at[6]).length(),wt=wl.set(at[8],at[9],at[10]).length();this.determinant()<0&&(ut=-ut),c.x=at[12],c.y=at[13],c.z=at[14],x0.copy(this);const Ft=1/ut,Vt=1/At,qt=1/wt;return x0.elements[0]*=Ft,x0.elements[1]*=Ft,x0.elements[2]*=Ft,x0.elements[4]*=Vt,x0.elements[5]*=Vt,x0.elements[6]*=Vt,x0.elements[8]*=qt,x0.elements[9]*=qt,x0.elements[10]*=qt,j.setFromRotationMatrix(x0),rt.x=ut,rt.y=At,rt.z=wt,this}makePerspective(c,j,rt,at,ut,At,wt=C1){const Bt=this.elements,Ft=2*ut/(j-c),Vt=2*ut/(rt-at),qt=(j+c)/(j-c),Jt=(rt+at)/(rt-at);let _i,sn;if(wt===C1)_i=-(At+ut)/(At-ut),sn=-2*At*ut/(At-ut);else if(wt===Pu)_i=-At/(At-ut),sn=-At*ut/(At-ut);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+wt);return Bt[0]=Ft,Bt[4]=0,Bt[8]=qt,Bt[12]=0,Bt[1]=0,Bt[5]=Vt,Bt[9]=Jt,Bt[13]=0,Bt[2]=0,Bt[6]=0,Bt[10]=_i,Bt[14]=sn,Bt[3]=0,Bt[7]=0,Bt[11]=-1,Bt[15]=0,this}makeOrthographic(c,j,rt,at,ut,At,wt=C1){const Bt=this.elements,Ft=1/(j-c),Vt=1/(rt-at),qt=1/(At-ut),Jt=(j+c)*Ft,_i=(rt+at)*Vt;let sn,hn;if(wt===C1)sn=(At+ut)*qt,hn=-2*qt;else if(wt===Pu)sn=ut*qt,hn=-1*qt;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+wt);return Bt[0]=2*Ft,Bt[4]=0,Bt[8]=0,Bt[12]=-Jt,Bt[1]=0,Bt[5]=2*Vt,Bt[9]=0,Bt[13]=-_i,Bt[2]=0,Bt[6]=0,Bt[10]=hn,Bt[14]=-sn,Bt[3]=0,Bt[7]=0,Bt[11]=0,Bt[15]=1,this}equals(c){const j=this.elements,rt=c.elements;for(let at=0;at<16;at++)if(j[at]!==rt[at])return!1;return!0}fromArray(c,j=0){for(let rt=0;rt<16;rt++)this.elements[rt]=c[rt+j];return this}toArray(c=[],j=0){const rt=this.elements;return c[j]=rt[0],c[j+1]=rt[1],c[j+2]=rt[2],c[j+3]=rt[3],c[j+4]=rt[4],c[j+5]=rt[5],c[j+6]=rt[6],c[j+7]=rt[7],c[j+8]=rt[8],c[j+9]=rt[9],c[j+10]=rt[10],c[j+11]=rt[11],c[j+12]=rt[12],c[j+13]=rt[13],c[j+14]=rt[14],c[j+15]=rt[15],c}}const wl=new kn,x0=new Vs,yv=new kn(0,0,0),wv=new kn(1,1,1),Au=new kn,P2=new kn,d1=new kn,Fm=new Vs,HA=new e0;class f1{constructor(c=0,j=0,rt=0,at=f1.DEFAULT_ORDER){this.isEuler=!0,this._x=c,this._y=j,this._z=rt,this._order=at}get x(){return this._x}set x(c){this._x=c,this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c,this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c,this._onChangeCallback()}get order(){return this._order}set order(c){this._order=c,this._onChangeCallback()}set(c,j,rt,at=this._order){return this._x=c,this._y=j,this._z=rt,this._order=at,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(c){return this._x=c._x,this._y=c._y,this._z=c._z,this._order=c._order,this._onChangeCallback(),this}setFromRotationMatrix(c,j=this._order,rt=!0){const at=c.elements,ut=at[0],At=at[4],wt=at[8],Bt=at[1],Ft=at[5],Vt=at[9],qt=at[2],Jt=at[6],_i=at[10];switch(j){case"XYZ":this._y=Math.asin(F0(wt,-1,1)),Math.abs(wt)<.9999999?(this._x=Math.atan2(-Vt,_i),this._z=Math.atan2(-At,ut)):(this._x=Math.atan2(Jt,Ft),this._z=0);break;case"YXZ":this._x=Math.asin(-F0(Vt,-1,1)),Math.abs(Vt)<.9999999?(this._y=Math.atan2(wt,_i),this._z=Math.atan2(Bt,Ft)):(this._y=Math.atan2(-qt,ut),this._z=0);break;case"ZXY":this._x=Math.asin(F0(Jt,-1,1)),Math.abs(Jt)<.9999999?(this._y=Math.atan2(-qt,_i),this._z=Math.atan2(-At,Ft)):(this._y=0,this._z=Math.atan2(Bt,ut));break;case"ZYX":this._y=Math.asin(-F0(qt,-1,1)),Math.abs(qt)<.9999999?(this._x=Math.atan2(Jt,_i),this._z=Math.atan2(Bt,ut)):(this._x=0,this._z=Math.atan2(-At,Ft));break;case"YZX":this._z=Math.asin(F0(Bt,-1,1)),Math.abs(Bt)<.9999999?(this._x=Math.atan2(-Vt,Ft),this._y=Math.atan2(-qt,ut)):(this._x=0,this._y=Math.atan2(wt,_i));break;case"XZY":this._z=Math.asin(-F0(At,-1,1)),Math.abs(At)<.9999999?(this._x=Math.atan2(Jt,Ft),this._y=Math.atan2(wt,ut)):(this._x=Math.atan2(-Vt,_i),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+j)}return this._order=j,rt===!0&&this._onChangeCallback(),this}setFromQuaternion(c,j,rt){return Fm.makeRotationFromQuaternion(c),this.setFromRotationMatrix(Fm,j,rt)}setFromVector3(c,j=this._order){return this.set(c.x,c.y,c.z,j)}reorder(c){return HA.setFromEuler(this),this.setFromQuaternion(HA,c)}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._order===this._order}fromArray(c){return this._x=c[0],this._y=c[1],this._z=c[2],c[3]!==void 0&&(this._order=c[3]),this._onChangeCallback(),this}toArray(c=[],j=0){return c[j]=this._x,c[j+1]=this._y,c[j+2]=this._z,c[j+3]=this._order,c}_onChange(c){return this._onChangeCallback=c,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}f1.DEFAULT_ORDER="XYZ";class O2{constructor(){this.mask=1}set(c){this.mask=(1<<c|0)>>>0}enable(c){this.mask|=1<<c|0}enableAll(){this.mask=-1}toggle(c){this.mask^=1<<c|0}disable(c){this.mask&=~(1<<c|0)}disableAll(){this.mask=0}test(c){return(this.mask&c.mask)!==0}isEnabled(c){return(this.mask&(1<<c|0))!==0}}let r2=0;const km=new kn,mu=new e0,G1=new Vs,s2=new kn,F2=new kn,GA=new kn,_p=new e0,Nm=new kn(1,0,0),xp=new kn(0,1,0),QA=new kn(0,0,1),Um={type:"added"},Hm={type:"removed"},b0={type:"childadded",child:null},VA={type:"childremoved",child:null};class s0 extends Jl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:r2++}),this.uuid=Zl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=s0.DEFAULT_UP.clone();const c=new kn,j=new f1,rt=new e0,at=new kn(1,1,1);function ut(){rt.setFromEuler(j,!1)}function At(){j.setFromQuaternion(rt,void 0,!1)}j._onChange(ut),rt._onChange(At),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:c},rotation:{configurable:!0,enumerable:!0,value:j},quaternion:{configurable:!0,enumerable:!0,value:rt},scale:{configurable:!0,enumerable:!0,value:at},modelViewMatrix:{value:new Vs},normalMatrix:{value:new Ao}}),this.matrix=new Vs,this.matrixWorld=new Vs,this.matrixAutoUpdate=s0.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=s0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new O2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(c){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(c),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(c){return this.quaternion.premultiply(c),this}setRotationFromAxisAngle(c,j){this.quaternion.setFromAxisAngle(c,j)}setRotationFromEuler(c){this.quaternion.setFromEuler(c,!0)}setRotationFromMatrix(c){this.quaternion.setFromRotationMatrix(c)}setRotationFromQuaternion(c){this.quaternion.copy(c)}rotateOnAxis(c,j){return mu.setFromAxisAngle(c,j),this.quaternion.multiply(mu),this}rotateOnWorldAxis(c,j){return mu.setFromAxisAngle(c,j),this.quaternion.premultiply(mu),this}rotateX(c){return this.rotateOnAxis(Nm,c)}rotateY(c){return this.rotateOnAxis(xp,c)}rotateZ(c){return this.rotateOnAxis(QA,c)}translateOnAxis(c,j){return km.copy(c).applyQuaternion(this.quaternion),this.position.add(km.multiplyScalar(j)),this}translateX(c){return this.translateOnAxis(Nm,c)}translateY(c){return this.translateOnAxis(xp,c)}translateZ(c){return this.translateOnAxis(QA,c)}localToWorld(c){return this.updateWorldMatrix(!0,!1),c.applyMatrix4(this.matrixWorld)}worldToLocal(c){return this.updateWorldMatrix(!0,!1),c.applyMatrix4(G1.copy(this.matrixWorld).invert())}lookAt(c,j,rt){c.isVector3?s2.copy(c):s2.set(c,j,rt);const at=this.parent;this.updateWorldMatrix(!0,!1),F2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?G1.lookAt(F2,s2,this.up):G1.lookAt(s2,F2,this.up),this.quaternion.setFromRotationMatrix(G1),at&&(G1.extractRotation(at.matrixWorld),mu.setFromRotationMatrix(G1),this.quaternion.premultiply(mu.invert()))}add(c){if(arguments.length>1){for(let j=0;j<arguments.length;j++)this.add(arguments[j]);return this}return c===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",c),this):(c&&c.isObject3D?(c.removeFromParent(),c.parent=this,this.children.push(c),c.dispatchEvent(Um),b0.child=c,this.dispatchEvent(b0),b0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",c),this)}remove(c){if(arguments.length>1){for(let rt=0;rt<arguments.length;rt++)this.remove(arguments[rt]);return this}const j=this.children.indexOf(c);return j!==-1&&(c.parent=null,this.children.splice(j,1),c.dispatchEvent(Hm),VA.child=c,this.dispatchEvent(VA),VA.child=null),this}removeFromParent(){const c=this.parent;return c!==null&&c.remove(this),this}clear(){return this.remove(...this.children)}attach(c){return this.updateWorldMatrix(!0,!1),G1.copy(this.matrixWorld).invert(),c.parent!==null&&(c.parent.updateWorldMatrix(!0,!1),G1.multiply(c.parent.matrixWorld)),c.applyMatrix4(G1),c.removeFromParent(),c.parent=this,this.children.push(c),c.updateWorldMatrix(!1,!0),c.dispatchEvent(Um),b0.child=c,this.dispatchEvent(b0),b0.child=null,this}getObjectById(c){return this.getObjectByProperty("id",c)}getObjectByName(c){return this.getObjectByProperty("name",c)}getObjectByProperty(c,j){if(this[c]===j)return this;for(let rt=0,at=this.children.length;rt<at;rt++){const At=this.children[rt].getObjectByProperty(c,j);if(At!==void 0)return At}}getObjectsByProperty(c,j,rt=[]){this[c]===j&&rt.push(this);const at=this.children;for(let ut=0,At=at.length;ut<At;ut++)at[ut].getObjectsByProperty(c,j,rt);return rt}getWorldPosition(c){return this.updateWorldMatrix(!0,!1),c.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(c){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(F2,c,GA),c}getWorldScale(c){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(F2,_p,c),c}getWorldDirection(c){this.updateWorldMatrix(!0,!1);const j=this.matrixWorld.elements;return c.set(j[8],j[9],j[10]).normalize()}raycast(){}traverse(c){c(this);const j=this.children;for(let rt=0,at=j.length;rt<at;rt++)j[rt].traverse(c)}traverseVisible(c){if(this.visible===!1)return;c(this);const j=this.children;for(let rt=0,at=j.length;rt<at;rt++)j[rt].traverseVisible(c)}traverseAncestors(c){const j=this.parent;j!==null&&(c(j),j.traverseAncestors(c))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(c){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||c)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,c=!0);const j=this.children;for(let rt=0,at=j.length;rt<at;rt++){const ut=j[rt];(ut.matrixWorldAutoUpdate===!0||c===!0)&&ut.updateMatrixWorld(c)}}updateWorldMatrix(c,j){const rt=this.parent;if(c===!0&&rt!==null&&rt.matrixWorldAutoUpdate===!0&&rt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),j===!0){const at=this.children;for(let ut=0,At=at.length;ut<At;ut++){const wt=at[ut];wt.matrixWorldAutoUpdate===!0&&wt.updateWorldMatrix(!1,!0)}}}toJSON(c){const j=c===void 0||typeof c=="string",rt={};j&&(c={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},rt.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const at={};at.uuid=this.uuid,at.type=this.type,this.name!==""&&(at.name=this.name),this.castShadow===!0&&(at.castShadow=!0),this.receiveShadow===!0&&(at.receiveShadow=!0),this.visible===!1&&(at.visible=!1),this.frustumCulled===!1&&(at.frustumCulled=!1),this.renderOrder!==0&&(at.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(at.userData=this.userData),at.layers=this.layers.mask,at.matrix=this.matrix.toArray(),at.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(at.matrixAutoUpdate=!1),this.isInstancedMesh&&(at.type="InstancedMesh",at.count=this.count,at.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(at.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(at.type="BatchedMesh",at.perObjectFrustumCulled=this.perObjectFrustumCulled,at.sortObjects=this.sortObjects,at.drawRanges=this._drawRanges,at.reservedRanges=this._reservedRanges,at.visibility=this._visibility,at.active=this._active,at.bounds=this._bounds.map(wt=>({boxInitialized:wt.boxInitialized,boxMin:wt.box.min.toArray(),boxMax:wt.box.max.toArray(),sphereInitialized:wt.sphereInitialized,sphereRadius:wt.sphere.radius,sphereCenter:wt.sphere.center.toArray()})),at.maxGeometryCount=this._maxGeometryCount,at.maxVertexCount=this._maxVertexCount,at.maxIndexCount=this._maxIndexCount,at.geometryInitialized=this._geometryInitialized,at.geometryCount=this._geometryCount,at.matricesTexture=this._matricesTexture.toJSON(c),this.boundingSphere!==null&&(at.boundingSphere={center:at.boundingSphere.center.toArray(),radius:at.boundingSphere.radius}),this.boundingBox!==null&&(at.boundingBox={min:at.boundingBox.min.toArray(),max:at.boundingBox.max.toArray()}));function ut(wt,Bt){return wt[Bt.uuid]===void 0&&(wt[Bt.uuid]=Bt.toJSON(c)),Bt.uuid}if(this.isScene)this.background&&(this.background.isColor?at.background=this.background.toJSON():this.background.isTexture&&(at.background=this.background.toJSON(c).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(at.environment=this.environment.toJSON(c).uuid);else if(this.isMesh||this.isLine||this.isPoints){at.geometry=ut(c.geometries,this.geometry);const wt=this.geometry.parameters;if(wt!==void 0&&wt.shapes!==void 0){const Bt=wt.shapes;if(Array.isArray(Bt))for(let Ft=0,Vt=Bt.length;Ft<Vt;Ft++){const qt=Bt[Ft];ut(c.shapes,qt)}else ut(c.shapes,Bt)}}if(this.isSkinnedMesh&&(at.bindMode=this.bindMode,at.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ut(c.skeletons,this.skeleton),at.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const wt=[];for(let Bt=0,Ft=this.material.length;Bt<Ft;Bt++)wt.push(ut(c.materials,this.material[Bt]));at.material=wt}else at.material=ut(c.materials,this.material);if(this.children.length>0){at.children=[];for(let wt=0;wt<this.children.length;wt++)at.children.push(this.children[wt].toJSON(c).object)}if(this.animations.length>0){at.animations=[];for(let wt=0;wt<this.animations.length;wt++){const Bt=this.animations[wt];at.animations.push(ut(c.animations,Bt))}}if(j){const wt=At(c.geometries),Bt=At(c.materials),Ft=At(c.textures),Vt=At(c.images),qt=At(c.shapes),Jt=At(c.skeletons),_i=At(c.animations),sn=At(c.nodes);wt.length>0&&(rt.geometries=wt),Bt.length>0&&(rt.materials=Bt),Ft.length>0&&(rt.textures=Ft),Vt.length>0&&(rt.images=Vt),qt.length>0&&(rt.shapes=qt),Jt.length>0&&(rt.skeletons=Jt),_i.length>0&&(rt.animations=_i),sn.length>0&&(rt.nodes=sn)}return rt.object=at,rt;function At(wt){const Bt=[];for(const Ft in wt){const Vt=wt[Ft];delete Vt.metadata,Bt.push(Vt)}return Bt}}clone(c){return new this.constructor().copy(this,c)}copy(c,j=!0){if(this.name=c.name,this.up.copy(c.up),this.position.copy(c.position),this.rotation.order=c.rotation.order,this.quaternion.copy(c.quaternion),this.scale.copy(c.scale),this.matrix.copy(c.matrix),this.matrixWorld.copy(c.matrixWorld),this.matrixAutoUpdate=c.matrixAutoUpdate,this.matrixWorldAutoUpdate=c.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=c.matrixWorldNeedsUpdate,this.layers.mask=c.layers.mask,this.visible=c.visible,this.castShadow=c.castShadow,this.receiveShadow=c.receiveShadow,this.frustumCulled=c.frustumCulled,this.renderOrder=c.renderOrder,this.animations=c.animations.slice(),this.userData=JSON.parse(JSON.stringify(c.userData)),j===!0)for(let rt=0;rt<c.children.length;rt++){const at=c.children[rt];this.add(at.clone())}return this}}s0.DEFAULT_UP=new kn(0,1,0),s0.DEFAULT_MATRIX_AUTO_UPDATE=!0,s0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wl=new kn,su=new kn,zA=new kn,ou=new kn,Uu=new kn,o2=new kn,Gm=new kn,WA=new kn,Hu=new kn,KA=new kn;class p1{constructor(c=new kn,j=new kn,rt=new kn){this.a=c,this.b=j,this.c=rt}static getNormal(c,j,rt,at){at.subVectors(rt,j),Wl.subVectors(c,j),at.cross(Wl);const ut=at.lengthSq();return ut>0?at.multiplyScalar(1/Math.sqrt(ut)):at.set(0,0,0)}static getBarycoord(c,j,rt,at,ut){Wl.subVectors(at,j),su.subVectors(rt,j),zA.subVectors(c,j);const At=Wl.dot(Wl),wt=Wl.dot(su),Bt=Wl.dot(zA),Ft=su.dot(su),Vt=su.dot(zA),qt=At*Ft-wt*wt;if(qt===0)return ut.set(0,0,0),null;const Jt=1/qt,_i=(Ft*Bt-wt*Vt)*Jt,sn=(At*Vt-wt*Bt)*Jt;return ut.set(1-_i-sn,sn,_i)}static containsPoint(c,j,rt,at){return this.getBarycoord(c,j,rt,at,ou)===null?!1:ou.x>=0&&ou.y>=0&&ou.x+ou.y<=1}static getInterpolation(c,j,rt,at,ut,At,wt,Bt){return this.getBarycoord(c,j,rt,at,ou)===null?(Bt.x=0,Bt.y=0,"z"in Bt&&(Bt.z=0),"w"in Bt&&(Bt.w=0),null):(Bt.setScalar(0),Bt.addScaledVector(ut,ou.x),Bt.addScaledVector(At,ou.y),Bt.addScaledVector(wt,ou.z),Bt)}static isFrontFacing(c,j,rt,at){return Wl.subVectors(rt,j),su.subVectors(c,j),Wl.cross(su).dot(at)<0}set(c,j,rt){return this.a.copy(c),this.b.copy(j),this.c.copy(rt),this}setFromPointsAndIndices(c,j,rt,at){return this.a.copy(c[j]),this.b.copy(c[rt]),this.c.copy(c[at]),this}setFromAttributeAndIndices(c,j,rt,at){return this.a.fromBufferAttribute(c,j),this.b.fromBufferAttribute(c,rt),this.c.fromBufferAttribute(c,at),this}clone(){return new this.constructor().copy(this)}copy(c){return this.a.copy(c.a),this.b.copy(c.b),this.c.copy(c.c),this}getArea(){return Wl.subVectors(this.c,this.b),su.subVectors(this.a,this.b),Wl.cross(su).length()*.5}getMidpoint(c){return c.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(c){return p1.getNormal(this.a,this.b,this.c,c)}getPlane(c){return c.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(c,j){return p1.getBarycoord(c,this.a,this.b,this.c,j)}getInterpolation(c,j,rt,at,ut){return p1.getInterpolation(c,this.a,this.b,this.c,j,rt,at,ut)}containsPoint(c){return p1.containsPoint(c,this.a,this.b,this.c)}isFrontFacing(c){return p1.isFrontFacing(this.a,this.b,this.c,c)}intersectsBox(c){return c.intersectsTriangle(this)}closestPointToPoint(c,j){const rt=this.a,at=this.b,ut=this.c;let At,wt;Uu.subVectors(at,rt),o2.subVectors(ut,rt),WA.subVectors(c,rt);const Bt=Uu.dot(WA),Ft=o2.dot(WA);if(Bt<=0&&Ft<=0)return j.copy(rt);Hu.subVectors(c,at);const Vt=Uu.dot(Hu),qt=o2.dot(Hu);if(Vt>=0&&qt<=Vt)return j.copy(at);const Jt=Bt*qt-Vt*Ft;if(Jt<=0&&Bt>=0&&Vt<=0)return At=Bt/(Bt-Vt),j.copy(rt).addScaledVector(Uu,At);KA.subVectors(c,ut);const _i=Uu.dot(KA),sn=o2.dot(KA);if(sn>=0&&_i<=sn)return j.copy(ut);const hn=_i*Ft-Bt*sn;if(hn<=0&&Ft>=0&&sn<=0)return wt=Ft/(Ft-sn),j.copy(rt).addScaledVector(o2,wt);const an=Vt*sn-_i*qt;if(an<=0&&qt-Vt>=0&&_i-sn>=0)return Gm.subVectors(ut,at),wt=(qt-Vt)/(qt-Vt+(_i-sn)),j.copy(at).addScaledVector(Gm,wt);const en=1/(an+hn+Jt);return At=hn*en,wt=Jt*en,j.copy(rt).addScaledVector(Uu,At).addScaledVector(o2,wt)}equals(c){return c.a.equals(this.a)&&c.b.equals(this.b)&&c.c.equals(this.c)}}const Qm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},x1={h:0,s:0,l:0},k2={h:0,s:0,l:0};function XA(ht,c,j){return j<0&&(j+=1),j>1&&(j-=1),j<.16666666666666666?ht+(c-ht)*6*j:j<.5?c:j<.6666666666666666?ht+(c-ht)*6*(.6666666666666666-j):ht}class Os{constructor(c,j,rt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(c,j,rt)}set(c,j,rt){if(j===void 0&&rt===void 0){const at=c;at&&at.isColor?this.copy(at):typeof at=="number"?this.setHex(at):typeof at=="string"&&this.setStyle(at)}else this.setRGB(c,j,rt);return this}setScalar(c){return this.r=c,this.g=c,this.b=c,this}setHex(c,j=jo){return c=Math.floor(c),this.r=(c>>16&255)/255,this.g=(c>>8&255)/255,this.b=(c&255)/255,u0.toWorkingColorSpace(this,j),this}setRGB(c,j,rt,at=u0.workingColorSpace){return this.r=c,this.g=j,this.b=rt,u0.toWorkingColorSpace(this,at),this}setHSL(c,j,rt,at=u0.workingColorSpace){if(c=I2(c,1),j=F0(j,0,1),rt=F0(rt,0,1),j===0)this.r=this.g=this.b=rt;else{const ut=rt<=.5?rt*(1+j):rt+j-rt*j,At=2*rt-ut;this.r=XA(At,ut,c+.3333333333333333),this.g=XA(At,ut,c),this.b=XA(At,ut,c-.3333333333333333)}return u0.toWorkingColorSpace(this,at),this}setStyle(c,j=jo){function rt(ut){ut!==void 0&&parseFloat(ut)<1&&console.warn("THREE.Color: Alpha component of "+c+" will be ignored.")}let at;if(at=/^(\w+)\(([^\)]*)\)/.exec(c)){let ut;const At=at[1],wt=at[2];switch(At){case"rgb":case"rgba":if(ut=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(wt))return rt(ut[4]),this.setRGB(Math.min(255,parseInt(ut[1],10))/255,Math.min(255,parseInt(ut[2],10))/255,Math.min(255,parseInt(ut[3],10))/255,j);if(ut=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(wt))return rt(ut[4]),this.setRGB(Math.min(100,parseInt(ut[1],10))/100,Math.min(100,parseInt(ut[2],10))/100,Math.min(100,parseInt(ut[3],10))/100,j);break;case"hsl":case"hsla":if(ut=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(wt))return rt(ut[4]),this.setHSL(parseFloat(ut[1])/360,parseFloat(ut[2])/100,parseFloat(ut[3])/100,j);break;default:console.warn("THREE.Color: Unknown color model "+c)}}else if(at=/^\#([A-Fa-f\d]+)$/.exec(c)){const ut=at[1],At=ut.length;if(At===3)return this.setRGB(parseInt(ut.charAt(0),16)/15,parseInt(ut.charAt(1),16)/15,parseInt(ut.charAt(2),16)/15,j);if(At===6)return this.setHex(parseInt(ut,16),j);console.warn("THREE.Color: Invalid hex color "+c)}else if(c&&c.length>0)return this.setColorName(c,j);return this}setColorName(c,j=jo){const rt=Qm[c.toLowerCase()];return rt!==void 0?this.setHex(rt,j):console.warn("THREE.Color: Unknown color "+c),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(c){return this.r=c.r,this.g=c.g,this.b=c.b,this}copySRGBToLinear(c){return this.r=Fu(c.r),this.g=Fu(c.g),this.b=Fu(c.b),this}copyLinearToSRGB(c){return this.r=L2(c.r),this.g=L2(c.g),this.b=L2(c.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(c=jo){return u0.fromWorkingColorSpace(Nl.copy(this),c),Math.round(F0(Nl.r*255,0,255))*65536+Math.round(F0(Nl.g*255,0,255))*256+Math.round(F0(Nl.b*255,0,255))}getHexString(c=jo){return("000000"+this.getHex(c).toString(16)).slice(-6)}getHSL(c,j=u0.workingColorSpace){u0.fromWorkingColorSpace(Nl.copy(this),j);const rt=Nl.r,at=Nl.g,ut=Nl.b,At=Math.max(rt,at,ut),wt=Math.min(rt,at,ut);let Bt,Ft;const Vt=(wt+At)/2;if(wt===At)Bt=0,Ft=0;else{const qt=At-wt;switch(Ft=Vt<=.5?qt/(At+wt):qt/(2-At-wt),At){case rt:Bt=(at-ut)/qt+(at<ut?6:0);break;case at:Bt=(ut-rt)/qt+2;break;case ut:Bt=(rt-at)/qt+4;break}Bt/=6}return c.h=Bt,c.s=Ft,c.l=Vt,c}getRGB(c,j=u0.workingColorSpace){return u0.fromWorkingColorSpace(Nl.copy(this),j),c.r=Nl.r,c.g=Nl.g,c.b=Nl.b,c}getStyle(c=jo){u0.fromWorkingColorSpace(Nl.copy(this),c);const j=Nl.r,rt=Nl.g,at=Nl.b;return c!==jo?`color(${c} ${j.toFixed(3)} ${rt.toFixed(3)} ${at.toFixed(3)})`:`rgb(${Math.round(j*255)},${Math.round(rt*255)},${Math.round(at*255)})`}offsetHSL(c,j,rt){return this.getHSL(x1),this.setHSL(x1.h+c,x1.s+j,x1.l+rt)}add(c){return this.r+=c.r,this.g+=c.g,this.b+=c.b,this}addColors(c,j){return this.r=c.r+j.r,this.g=c.g+j.g,this.b=c.b+j.b,this}addScalar(c){return this.r+=c,this.g+=c,this.b+=c,this}sub(c){return this.r=Math.max(0,this.r-c.r),this.g=Math.max(0,this.g-c.g),this.b=Math.max(0,this.b-c.b),this}multiply(c){return this.r*=c.r,this.g*=c.g,this.b*=c.b,this}multiplyScalar(c){return this.r*=c,this.g*=c,this.b*=c,this}lerp(c,j){return this.r+=(c.r-this.r)*j,this.g+=(c.g-this.g)*j,this.b+=(c.b-this.b)*j,this}lerpColors(c,j,rt){return this.r=c.r+(j.r-c.r)*rt,this.g=c.g+(j.g-c.g)*rt,this.b=c.b+(j.b-c.b)*rt,this}lerpHSL(c,j){this.getHSL(x1),c.getHSL(k2);const rt=Ou(x1.h,k2.h,j),at=Ou(x1.s,k2.s,j),ut=Ou(x1.l,k2.l,j);return this.setHSL(rt,at,ut),this}setFromVector3(c){return this.r=c.x,this.g=c.y,this.b=c.z,this}applyMatrix3(c){const j=this.r,rt=this.g,at=this.b,ut=c.elements;return this.r=ut[0]*j+ut[3]*rt+ut[6]*at,this.g=ut[1]*j+ut[4]*rt+ut[7]*at,this.b=ut[2]*j+ut[5]*rt+ut[8]*at,this}equals(c){return c.r===this.r&&c.g===this.g&&c.b===this.b}fromArray(c,j=0){return this.r=c[j],this.g=c[j+1],this.b=c[j+2],this}toArray(c=[],j=0){return c[j]=this.r,c[j+1]=this.g,c[j+2]=this.b,c}fromBufferAttribute(c,j){return this.r=c.getX(j),this.g=c.getY(j),this.b=c.getZ(j),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Nl=new Os;Os.NAMES=Qm;let Gu=0;class Kl extends Jl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gu++}),this.uuid=Zl(),this.name="",this.type="Material",this.blending=Xt,this.side=xt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Vn,this.blendDst=Zn,this.blendEquation=fn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Os(0,0,0),this.blendAlpha=0,this.depthFunc=Ys,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=S2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$1,this.stencilZFail=$1,this.stencilZPass=$1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(c){this._alphaTest>0!=c>0&&this.version++,this._alphaTest=c}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(c){if(c!==void 0)for(const j in c){const rt=c[j];if(rt===void 0){console.warn(`THREE.Material: parameter '${j}' has value of undefined.`);continue}const at=this[j];if(at===void 0){console.warn(`THREE.Material: '${j}' is not a property of THREE.${this.type}.`);continue}at&&at.isColor?at.set(rt):at&&at.isVector3&&rt&&rt.isVector3?at.copy(rt):this[j]=rt}}toJSON(c){const j=c===void 0||typeof c=="string";j&&(c={textures:{},images:{}});const rt={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),this.color&&this.color.isColor&&(rt.color=this.color.getHex()),this.roughness!==void 0&&(rt.roughness=this.roughness),this.metalness!==void 0&&(rt.metalness=this.metalness),this.sheen!==void 0&&(rt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(rt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(rt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(rt.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(rt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(rt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(rt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(rt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(rt.shininess=this.shininess),this.clearcoat!==void 0&&(rt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(rt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(rt.clearcoatMap=this.clearcoatMap.toJSON(c).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(rt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(c).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(rt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(c).uuid,rt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(rt.dispersion=this.dispersion),this.iridescence!==void 0&&(rt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(rt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(rt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(rt.iridescenceMap=this.iridescenceMap.toJSON(c).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(rt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(c).uuid),this.anisotropy!==void 0&&(rt.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(rt.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(rt.anisotropyMap=this.anisotropyMap.toJSON(c).uuid),this.map&&this.map.isTexture&&(rt.map=this.map.toJSON(c).uuid),this.matcap&&this.matcap.isTexture&&(rt.matcap=this.matcap.toJSON(c).uuid),this.alphaMap&&this.alphaMap.isTexture&&(rt.alphaMap=this.alphaMap.toJSON(c).uuid),this.lightMap&&this.lightMap.isTexture&&(rt.lightMap=this.lightMap.toJSON(c).uuid,rt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(rt.aoMap=this.aoMap.toJSON(c).uuid,rt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(rt.bumpMap=this.bumpMap.toJSON(c).uuid,rt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(rt.normalMap=this.normalMap.toJSON(c).uuid,rt.normalMapType=this.normalMapType,rt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(rt.displacementMap=this.displacementMap.toJSON(c).uuid,rt.displacementScale=this.displacementScale,rt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(rt.roughnessMap=this.roughnessMap.toJSON(c).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(rt.metalnessMap=this.metalnessMap.toJSON(c).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(rt.emissiveMap=this.emissiveMap.toJSON(c).uuid),this.specularMap&&this.specularMap.isTexture&&(rt.specularMap=this.specularMap.toJSON(c).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(rt.specularIntensityMap=this.specularIntensityMap.toJSON(c).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(rt.specularColorMap=this.specularColorMap.toJSON(c).uuid),this.envMap&&this.envMap.isTexture&&(rt.envMap=this.envMap.toJSON(c).uuid,this.combine!==void 0&&(rt.combine=this.combine)),this.envMapRotation!==void 0&&(rt.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(rt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(rt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(rt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(rt.gradientMap=this.gradientMap.toJSON(c).uuid),this.transmission!==void 0&&(rt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(rt.transmissionMap=this.transmissionMap.toJSON(c).uuid),this.thickness!==void 0&&(rt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(rt.thicknessMap=this.thicknessMap.toJSON(c).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(rt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(rt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(rt.size=this.size),this.shadowSide!==null&&(rt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(rt.sizeAttenuation=this.sizeAttenuation),this.blending!==Xt&&(rt.blending=this.blending),this.side!==xt&&(rt.side=this.side),this.vertexColors===!0&&(rt.vertexColors=!0),this.opacity<1&&(rt.opacity=this.opacity),this.transparent===!0&&(rt.transparent=!0),this.blendSrc!==Vn&&(rt.blendSrc=this.blendSrc),this.blendDst!==Zn&&(rt.blendDst=this.blendDst),this.blendEquation!==fn&&(rt.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(rt.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(rt.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(rt.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(rt.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(rt.blendAlpha=this.blendAlpha),this.depthFunc!==Ys&&(rt.depthFunc=this.depthFunc),this.depthTest===!1&&(rt.depthTest=this.depthTest),this.depthWrite===!1&&(rt.depthWrite=this.depthWrite),this.colorWrite===!1&&(rt.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(rt.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==S2&&(rt.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(rt.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(rt.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$1&&(rt.stencilFail=this.stencilFail),this.stencilZFail!==$1&&(rt.stencilZFail=this.stencilZFail),this.stencilZPass!==$1&&(rt.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(rt.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(rt.rotation=this.rotation),this.polygonOffset===!0&&(rt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(rt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(rt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(rt.linewidth=this.linewidth),this.dashSize!==void 0&&(rt.dashSize=this.dashSize),this.gapSize!==void 0&&(rt.gapSize=this.gapSize),this.scale!==void 0&&(rt.scale=this.scale),this.dithering===!0&&(rt.dithering=!0),this.alphaTest>0&&(rt.alphaTest=this.alphaTest),this.alphaHash===!0&&(rt.alphaHash=!0),this.alphaToCoverage===!0&&(rt.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(rt.premultipliedAlpha=!0),this.forceSinglePass===!0&&(rt.forceSinglePass=!0),this.wireframe===!0&&(rt.wireframe=!0),this.wireframeLinewidth>1&&(rt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(rt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(rt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(rt.flatShading=!0),this.visible===!1&&(rt.visible=!1),this.toneMapped===!1&&(rt.toneMapped=!1),this.fog===!1&&(rt.fog=!1),Object.keys(this.userData).length>0&&(rt.userData=this.userData);function at(ut){const At=[];for(const wt in ut){const Bt=ut[wt];delete Bt.metadata,At.push(Bt)}return At}if(j){const ut=at(c.textures),At=at(c.images);ut.length>0&&(rt.textures=ut),At.length>0&&(rt.images=At)}return rt}clone(){return new this.constructor().copy(this)}copy(c){this.name=c.name,this.blending=c.blending,this.side=c.side,this.vertexColors=c.vertexColors,this.opacity=c.opacity,this.transparent=c.transparent,this.blendSrc=c.blendSrc,this.blendDst=c.blendDst,this.blendEquation=c.blendEquation,this.blendSrcAlpha=c.blendSrcAlpha,this.blendDstAlpha=c.blendDstAlpha,this.blendEquationAlpha=c.blendEquationAlpha,this.blendColor.copy(c.blendColor),this.blendAlpha=c.blendAlpha,this.depthFunc=c.depthFunc,this.depthTest=c.depthTest,this.depthWrite=c.depthWrite,this.stencilWriteMask=c.stencilWriteMask,this.stencilFunc=c.stencilFunc,this.stencilRef=c.stencilRef,this.stencilFuncMask=c.stencilFuncMask,this.stencilFail=c.stencilFail,this.stencilZFail=c.stencilZFail,this.stencilZPass=c.stencilZPass,this.stencilWrite=c.stencilWrite;const j=c.clippingPlanes;let rt=null;if(j!==null){const at=j.length;rt=new Array(at);for(let ut=0;ut!==at;++ut)rt[ut]=j[ut].clone()}return this.clippingPlanes=rt,this.clipIntersection=c.clipIntersection,this.clipShadows=c.clipShadows,this.shadowSide=c.shadowSide,this.colorWrite=c.colorWrite,this.precision=c.precision,this.polygonOffset=c.polygonOffset,this.polygonOffsetFactor=c.polygonOffsetFactor,this.polygonOffsetUnits=c.polygonOffsetUnits,this.dithering=c.dithering,this.alphaTest=c.alphaTest,this.alphaHash=c.alphaHash,this.alphaToCoverage=c.alphaToCoverage,this.premultipliedAlpha=c.premultipliedAlpha,this.forceSinglePass=c.forceSinglePass,this.visible=c.visible,this.toneMapped=c.toneMapped,this.userData=JSON.parse(JSON.stringify(c.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(c){c===!0&&this.version++}}class vu extends Kl{constructor(c){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Os(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new f1,this.combine=Ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.envMapRotation.copy(c.envMapRotation),this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.fog=c.fog,this}}const au=Cv();function Cv(){const ht=new ArrayBuffer(4),c=new Float32Array(ht),j=new Uint32Array(ht),rt=new Uint32Array(512),at=new Uint32Array(512);for(let Bt=0;Bt<256;++Bt){const Ft=Bt-127;Ft<-27?(rt[Bt]=0,rt[Bt|256]=32768,at[Bt]=24,at[Bt|256]=24):Ft<-14?(rt[Bt]=1024>>-Ft-14,rt[Bt|256]=1024>>-Ft-14|32768,at[Bt]=-Ft-1,at[Bt|256]=-Ft-1):Ft<=15?(rt[Bt]=Ft+15<<10,rt[Bt|256]=Ft+15<<10|32768,at[Bt]=13,at[Bt|256]=13):Ft<128?(rt[Bt]=31744,rt[Bt|256]=64512,at[Bt]=24,at[Bt|256]=24):(rt[Bt]=31744,rt[Bt|256]=64512,at[Bt]=13,at[Bt|256]=13)}const ut=new Uint32Array(2048),At=new Uint32Array(64),wt=new Uint32Array(64);for(let Bt=1;Bt<1024;++Bt){let Ft=Bt<<13,Vt=0;for(;!(Ft&8388608);)Ft<<=1,Vt-=8388608;Ft&=-8388609,Vt+=947912704,ut[Bt]=Ft|Vt}for(let Bt=1024;Bt<2048;++Bt)ut[Bt]=939524096+(Bt-1024<<13);for(let Bt=1;Bt<31;++Bt)At[Bt]=Bt<<23;At[31]=1199570944,At[32]=2147483648;for(let Bt=33;Bt<63;++Bt)At[Bt]=2147483648+(Bt-32<<23);At[63]=3347054592;for(let Bt=1;Bt<64;++Bt)Bt!==32&&(wt[Bt]=1024);return{floatView:c,uint32View:j,baseTable:rt,shiftTable:at,mantissaTable:ut,exponentTable:At,offsetTable:wt}}function t1(ht){Math.abs(ht)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),ht=F0(ht,-65504,65504),au.floatView[0]=ht;const c=au.uint32View[0],j=c>>23&511;return au.baseTable[j]+((c&8388607)>>au.shiftTable[j])}function a2(ht){const c=ht>>10;return au.uint32View[0]=au.mantissaTable[au.offsetTable[c]+(ht&1023)]+au.exponentTable[c],au.floatView[0]}const _v={toHalfFloat:t1,fromHalfFloat:a2},$a=new kn,l2=new Wr;class a0{constructor(c,j,rt=!1){if(Array.isArray(c))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=c,this.itemSize=j,this.count=c!==void 0?c.length/j:0,this.normalized=rt,this.usage=Du,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=P0,this.version=0}onUploadCallback(){}set needsUpdate(c){c===!0&&this.version++}get updateRange(){return K0("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(c){return this.usage=c,this}addUpdateRange(c,j){this.updateRanges.push({start:c,count:j})}clearUpdateRanges(){this.updateRanges.length=0}copy(c){return this.name=c.name,this.array=new c.array.constructor(c.array),this.itemSize=c.itemSize,this.count=c.count,this.normalized=c.normalized,this.usage=c.usage,this.gpuType=c.gpuType,this}copyAt(c,j,rt){c*=this.itemSize,rt*=j.itemSize;for(let at=0,ut=this.itemSize;at<ut;at++)this.array[c+at]=j.array[rt+at];return this}copyArray(c){return this.array.set(c),this}applyMatrix3(c){if(this.itemSize===2)for(let j=0,rt=this.count;j<rt;j++)l2.fromBufferAttribute(this,j),l2.applyMatrix3(c),this.setXY(j,l2.x,l2.y);else if(this.itemSize===3)for(let j=0,rt=this.count;j<rt;j++)$a.fromBufferAttribute(this,j),$a.applyMatrix3(c),this.setXYZ(j,$a.x,$a.y,$a.z);return this}applyMatrix4(c){for(let j=0,rt=this.count;j<rt;j++)$a.fromBufferAttribute(this,j),$a.applyMatrix4(c),this.setXYZ(j,$a.x,$a.y,$a.z);return this}applyNormalMatrix(c){for(let j=0,rt=this.count;j<rt;j++)$a.fromBufferAttribute(this,j),$a.applyNormalMatrix(c),this.setXYZ(j,$a.x,$a.y,$a.z);return this}transformDirection(c){for(let j=0,rt=this.count;j<rt;j++)$a.fromBufferAttribute(this,j),$a.transformDirection(c),this.setXYZ(j,$a.x,$a.y,$a.z);return this}set(c,j=0){return this.array.set(c,j),this}getComponent(c,j){let rt=this.array[c*this.itemSize+j];return this.normalized&&(rt=Tl(rt,this.array)),rt}setComponent(c,j,rt){return this.normalized&&(rt=Co(rt,this.array)),this.array[c*this.itemSize+j]=rt,this}getX(c){let j=this.array[c*this.itemSize];return this.normalized&&(j=Tl(j,this.array)),j}setX(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize]=j,this}getY(c){let j=this.array[c*this.itemSize+1];return this.normalized&&(j=Tl(j,this.array)),j}setY(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+1]=j,this}getZ(c){let j=this.array[c*this.itemSize+2];return this.normalized&&(j=Tl(j,this.array)),j}setZ(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+2]=j,this}getW(c){let j=this.array[c*this.itemSize+3];return this.normalized&&(j=Tl(j,this.array)),j}setW(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+3]=j,this}setXY(c,j,rt){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array)),this.array[c+0]=j,this.array[c+1]=rt,this}setXYZ(c,j,rt,at){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array)),this.array[c+0]=j,this.array[c+1]=rt,this.array[c+2]=at,this}setXYZW(c,j,rt,at,ut){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array),ut=Co(ut,this.array)),this.array[c+0]=j,this.array[c+1]=rt,this.array[c+2]=at,this.array[c+3]=ut,this}onUpload(c){return this.onUploadCallback=c,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const c={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(c.name=this.name),this.usage!==Du&&(c.usage=this.usage),c}}class xv extends a0{constructor(c,j,rt){super(new Int8Array(c),j,rt)}}class YA extends a0{constructor(c,j,rt){super(new Uint8Array(c),j,rt)}}class bp extends a0{constructor(c,j,rt){super(new Uint8ClampedArray(c),j,rt)}}class Vm extends a0{constructor(c,j,rt){super(new Int16Array(c),j,rt)}}class qA extends a0{constructor(c,j,rt){super(new Uint16Array(c),j,rt)}}class zm extends a0{constructor(c,j,rt){super(new Int32Array(c),j,rt)}}class gu extends a0{constructor(c,j,rt){super(new Uint32Array(c),j,rt)}}class Bl extends a0{constructor(c,j,rt){super(new Uint16Array(c),j,rt),this.isFloat16BufferAttribute=!0}getX(c){let j=a2(this.array[c*this.itemSize]);return this.normalized&&(j=Tl(j,this.array)),j}setX(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize]=t1(j),this}getY(c){let j=a2(this.array[c*this.itemSize+1]);return this.normalized&&(j=Tl(j,this.array)),j}setY(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+1]=t1(j),this}getZ(c){let j=a2(this.array[c*this.itemSize+2]);return this.normalized&&(j=Tl(j,this.array)),j}setZ(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+2]=t1(j),this}getW(c){let j=a2(this.array[c*this.itemSize+3]);return this.normalized&&(j=Tl(j,this.array)),j}setW(c,j){return this.normalized&&(j=Co(j,this.array)),this.array[c*this.itemSize+3]=t1(j),this}setXY(c,j,rt){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array)),this.array[c+0]=t1(j),this.array[c+1]=t1(rt),this}setXYZ(c,j,rt,at){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array)),this.array[c+0]=t1(j),this.array[c+1]=t1(rt),this.array[c+2]=t1(at),this}setXYZW(c,j,rt,at,ut){return c*=this.itemSize,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array),ut=Co(ut,this.array)),this.array[c+0]=t1(j),this.array[c+1]=t1(rt),this.array[c+2]=t1(at),this.array[c+3]=t1(ut),this}}class Qr extends a0{constructor(c,j,rt){super(new Float32Array(c),j,rt)}}let xs=0;const A1=new Vs,N2=new s0,c2=new kn,o1=new H0,Eu=new H0,Ll=new kn;class Bo extends Jl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xs++}),this.uuid=Zl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(c){return Array.isArray(c)?this.index=new(B2(c)?gu:qA)(c,1):this.index=c,this}getAttribute(c){return this.attributes[c]}setAttribute(c,j){return this.attributes[c]=j,this}deleteAttribute(c){return delete this.attributes[c],this}hasAttribute(c){return this.attributes[c]!==void 0}addGroup(c,j,rt=0){this.groups.push({start:c,count:j,materialIndex:rt})}clearGroups(){this.groups=[]}setDrawRange(c,j){this.drawRange.start=c,this.drawRange.count=j}applyMatrix4(c){const j=this.attributes.position;j!==void 0&&(j.applyMatrix4(c),j.needsUpdate=!0);const rt=this.attributes.normal;if(rt!==void 0){const ut=new Ao().getNormalMatrix(c);rt.applyNormalMatrix(ut),rt.needsUpdate=!0}const at=this.attributes.tangent;return at!==void 0&&(at.transformDirection(c),at.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(c){return A1.makeRotationFromQuaternion(c),this.applyMatrix4(A1),this}rotateX(c){return A1.makeRotationX(c),this.applyMatrix4(A1),this}rotateY(c){return A1.makeRotationY(c),this.applyMatrix4(A1),this}rotateZ(c){return A1.makeRotationZ(c),this.applyMatrix4(A1),this}translate(c,j,rt){return A1.makeTranslation(c,j,rt),this.applyMatrix4(A1),this}scale(c,j,rt){return A1.makeScale(c,j,rt),this.applyMatrix4(A1),this}lookAt(c){return N2.lookAt(c),N2.updateMatrix(),this.applyMatrix4(N2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(c2).negate(),this.translate(c2.x,c2.y,c2.z),this}setFromPoints(c){const j=[];for(let rt=0,at=c.length;rt<at;rt++){const ut=c[rt];j.push(ut.x,ut.y,ut.z||0)}return this.setAttribute("position",new Qr(j,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new H0);const c=this.attributes.position,j=this.morphAttributes.position;if(c&&c.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new kn(-1/0,-1/0,-1/0),new kn(1/0,1/0,1/0));return}if(c!==void 0){if(this.boundingBox.setFromBufferAttribute(c),j)for(let rt=0,at=j.length;rt<at;rt++){const ut=j[rt];o1.setFromBufferAttribute(ut),this.morphTargetsRelative?(Ll.addVectors(this.boundingBox.min,o1.min),this.boundingBox.expandByPoint(Ll),Ll.addVectors(this.boundingBox.max,o1.max),this.boundingBox.expandByPoint(Ll)):(this.boundingBox.expandByPoint(o1.min),this.boundingBox.expandByPoint(o1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ba);const c=this.attributes.position,j=this.morphAttributes.position;if(c&&c.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new kn,1/0);return}if(c){const rt=this.boundingSphere.center;if(o1.setFromBufferAttribute(c),j)for(let ut=0,At=j.length;ut<At;ut++){const wt=j[ut];Eu.setFromBufferAttribute(wt),this.morphTargetsRelative?(Ll.addVectors(o1.min,Eu.min),o1.expandByPoint(Ll),Ll.addVectors(o1.max,Eu.max),o1.expandByPoint(Ll)):(o1.expandByPoint(Eu.min),o1.expandByPoint(Eu.max))}o1.getCenter(rt);let at=0;for(let ut=0,At=c.count;ut<At;ut++)Ll.fromBufferAttribute(c,ut),at=Math.max(at,rt.distanceToSquared(Ll));if(j)for(let ut=0,At=j.length;ut<At;ut++){const wt=j[ut],Bt=this.morphTargetsRelative;for(let Ft=0,Vt=wt.count;Ft<Vt;Ft++)Ll.fromBufferAttribute(wt,Ft),Bt&&(c2.fromBufferAttribute(c,Ft),Ll.add(c2)),at=Math.max(at,rt.distanceToSquared(Ll))}this.boundingSphere.radius=Math.sqrt(at),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const c=this.index,j=this.attributes;if(c===null||j.position===void 0||j.normal===void 0||j.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const rt=j.position,at=j.normal,ut=j.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new a0(new Float32Array(4*rt.count),4));const At=this.getAttribute("tangent"),wt=[],Bt=[];for(let $n=0;$n<rt.count;$n++)wt[$n]=new kn,Bt[$n]=new kn;const Ft=new kn,Vt=new kn,qt=new kn,Jt=new Wr,_i=new Wr,sn=new Wr,hn=new kn,an=new kn;function en($n,Ln,Sn){Ft.fromBufferAttribute(rt,$n),Vt.fromBufferAttribute(rt,Ln),qt.fromBufferAttribute(rt,Sn),Jt.fromBufferAttribute(ut,$n),_i.fromBufferAttribute(ut,Ln),sn.fromBufferAttribute(ut,Sn),Vt.sub(Ft),qt.sub(Ft),_i.sub(Jt),sn.sub(Jt);const jn=1/(_i.x*sn.y-sn.x*_i.y);isFinite(jn)&&(hn.copy(Vt).multiplyScalar(sn.y).addScaledVector(qt,-_i.y).multiplyScalar(jn),an.copy(qt).multiplyScalar(_i.x).addScaledVector(Vt,-sn.x).multiplyScalar(jn),wt[$n].add(hn),wt[Ln].add(hn),wt[Sn].add(hn),Bt[$n].add(an),Bt[Ln].add(an),Bt[Sn].add(an))}let xn=this.groups;xn.length===0&&(xn=[{start:0,count:c.count}]);for(let $n=0,Ln=xn.length;$n<Ln;++$n){const Sn=xn[$n],jn=Sn.start,ur=Sn.count;for(let or=jn,Ar=jn+ur;or<Ar;or+=3)en(c.getX(or+0),c.getX(or+1),c.getX(or+2))}const wn=new kn,En=new kn,er=new kn,Nn=new kn;function zn($n){er.fromBufferAttribute(at,$n),Nn.copy(er);const Ln=wt[$n];wn.copy(Ln),wn.sub(er.multiplyScalar(er.dot(Ln))).normalize(),En.crossVectors(Nn,Ln);const jn=En.dot(Bt[$n])<0?-1:1;At.setXYZW($n,wn.x,wn.y,wn.z,jn)}for(let $n=0,Ln=xn.length;$n<Ln;++$n){const Sn=xn[$n],jn=Sn.start,ur=Sn.count;for(let or=jn,Ar=jn+ur;or<Ar;or+=3)zn(c.getX(or+0)),zn(c.getX(or+1)),zn(c.getX(or+2))}}computeVertexNormals(){const c=this.index,j=this.getAttribute("position");if(j!==void 0){let rt=this.getAttribute("normal");if(rt===void 0)rt=new a0(new Float32Array(j.count*3),3),this.setAttribute("normal",rt);else for(let Jt=0,_i=rt.count;Jt<_i;Jt++)rt.setXYZ(Jt,0,0,0);const at=new kn,ut=new kn,At=new kn,wt=new kn,Bt=new kn,Ft=new kn,Vt=new kn,qt=new kn;if(c)for(let Jt=0,_i=c.count;Jt<_i;Jt+=3){const sn=c.getX(Jt+0),hn=c.getX(Jt+1),an=c.getX(Jt+2);at.fromBufferAttribute(j,sn),ut.fromBufferAttribute(j,hn),At.fromBufferAttribute(j,an),Vt.subVectors(At,ut),qt.subVectors(at,ut),Vt.cross(qt),wt.fromBufferAttribute(rt,sn),Bt.fromBufferAttribute(rt,hn),Ft.fromBufferAttribute(rt,an),wt.add(Vt),Bt.add(Vt),Ft.add(Vt),rt.setXYZ(sn,wt.x,wt.y,wt.z),rt.setXYZ(hn,Bt.x,Bt.y,Bt.z),rt.setXYZ(an,Ft.x,Ft.y,Ft.z)}else for(let Jt=0,_i=j.count;Jt<_i;Jt+=3)at.fromBufferAttribute(j,Jt+0),ut.fromBufferAttribute(j,Jt+1),At.fromBufferAttribute(j,Jt+2),Vt.subVectors(At,ut),qt.subVectors(at,ut),Vt.cross(qt),rt.setXYZ(Jt+0,Vt.x,Vt.y,Vt.z),rt.setXYZ(Jt+1,Vt.x,Vt.y,Vt.z),rt.setXYZ(Jt+2,Vt.x,Vt.y,Vt.z);this.normalizeNormals(),rt.needsUpdate=!0}}normalizeNormals(){const c=this.attributes.normal;for(let j=0,rt=c.count;j<rt;j++)Ll.fromBufferAttribute(c,j),Ll.normalize(),c.setXYZ(j,Ll.x,Ll.y,Ll.z)}toNonIndexed(){function c(wt,Bt){const Ft=wt.array,Vt=wt.itemSize,qt=wt.normalized,Jt=new Ft.constructor(Bt.length*Vt);let _i=0,sn=0;for(let hn=0,an=Bt.length;hn<an;hn++){wt.isInterleavedBufferAttribute?_i=Bt[hn]*wt.data.stride+wt.offset:_i=Bt[hn]*Vt;for(let en=0;en<Vt;en++)Jt[sn++]=Ft[_i++]}return new a0(Jt,Vt,qt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const j=new Bo,rt=this.index.array,at=this.attributes;for(const wt in at){const Bt=at[wt],Ft=c(Bt,rt);j.setAttribute(wt,Ft)}const ut=this.morphAttributes;for(const wt in ut){const Bt=[],Ft=ut[wt];for(let Vt=0,qt=Ft.length;Vt<qt;Vt++){const Jt=Ft[Vt],_i=c(Jt,rt);Bt.push(_i)}j.morphAttributes[wt]=Bt}j.morphTargetsRelative=this.morphTargetsRelative;const At=this.groups;for(let wt=0,Bt=At.length;wt<Bt;wt++){const Ft=At[wt];j.addGroup(Ft.start,Ft.count,Ft.materialIndex)}return j}toJSON(){const c={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),Object.keys(this.userData).length>0&&(c.userData=this.userData),this.parameters!==void 0){const Bt=this.parameters;for(const Ft in Bt)Bt[Ft]!==void 0&&(c[Ft]=Bt[Ft]);return c}c.data={attributes:{}};const j=this.index;j!==null&&(c.data.index={type:j.array.constructor.name,array:Array.prototype.slice.call(j.array)});const rt=this.attributes;for(const Bt in rt){const Ft=rt[Bt];c.data.attributes[Bt]=Ft.toJSON(c.data)}const at={};let ut=!1;for(const Bt in this.morphAttributes){const Ft=this.morphAttributes[Bt],Vt=[];for(let qt=0,Jt=Ft.length;qt<Jt;qt++){const _i=Ft[qt];Vt.push(_i.toJSON(c.data))}Vt.length>0&&(at[Bt]=Vt,ut=!0)}ut&&(c.data.morphAttributes=at,c.data.morphTargetsRelative=this.morphTargetsRelative);const At=this.groups;At.length>0&&(c.data.groups=JSON.parse(JSON.stringify(At)));const wt=this.boundingSphere;return wt!==null&&(c.data.boundingSphere={center:wt.center.toArray(),radius:wt.radius}),c}clone(){return new this.constructor().copy(this)}copy(c){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const j={};this.name=c.name;const rt=c.index;rt!==null&&this.setIndex(rt.clone(j));const at=c.attributes;for(const Ft in at){const Vt=at[Ft];this.setAttribute(Ft,Vt.clone(j))}const ut=c.morphAttributes;for(const Ft in ut){const Vt=[],qt=ut[Ft];for(let Jt=0,_i=qt.length;Jt<_i;Jt++)Vt.push(qt[Jt].clone(j));this.morphAttributes[Ft]=Vt}this.morphTargetsRelative=c.morphTargetsRelative;const At=c.groups;for(let Ft=0,Vt=At.length;Ft<Vt;Ft++){const qt=At[Ft];this.addGroup(qt.start,qt.count,qt.materialIndex)}const wt=c.boundingBox;wt!==null&&(this.boundingBox=wt.clone());const Bt=c.boundingSphere;return Bt!==null&&(this.boundingSphere=Bt.clone()),this.drawRange.start=c.drawRange.start,this.drawRange.count=c.drawRange.count,this.userData=c.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Wm=new Vs,yu=new yl,Mp=new ba,JA=new kn,u2=new kn,fr=new kn,wu=new kn,ZA=new kn,Sp=new kn,Tp=new Wr,i1=new Wr,Rp=new Wr,h2=new kn,$A=new kn,Km=new kn,js=new kn,d2=new kn;class Al extends s0{constructor(c=new Bo,j=new vu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=c,this.material=j,this.updateMorphTargets()}copy(c,j){return super.copy(c,j),c.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=c.morphTargetInfluences.slice()),c.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},c.morphTargetDictionary)),this.material=Array.isArray(c.material)?c.material.slice():c.material,this.geometry=c.geometry,this}updateMorphTargets(){const j=this.geometry.morphAttributes,rt=Object.keys(j);if(rt.length>0){const at=j[rt[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ut=0,At=at.length;ut<At;ut++){const wt=at[ut].name||String(ut);this.morphTargetInfluences.push(0),this.morphTargetDictionary[wt]=ut}}}}getVertexPosition(c,j){const rt=this.geometry,at=rt.attributes.position,ut=rt.morphAttributes.position,At=rt.morphTargetsRelative;j.fromBufferAttribute(at,c);const wt=this.morphTargetInfluences;if(ut&&wt){Sp.set(0,0,0);for(let Bt=0,Ft=ut.length;Bt<Ft;Bt++){const Vt=wt[Bt],qt=ut[Bt];Vt!==0&&(ZA.fromBufferAttribute(qt,c),At?Sp.addScaledVector(ZA,Vt):Sp.addScaledVector(ZA.sub(j),Vt))}j.add(Sp)}return j}raycast(c,j){const rt=this.geometry,at=this.material,ut=this.matrixWorld;at!==void 0&&(rt.boundingSphere===null&&rt.computeBoundingSphere(),Mp.copy(rt.boundingSphere),Mp.applyMatrix4(ut),yu.copy(c.ray).recast(c.near),!(Mp.containsPoint(yu.origin)===!1&&(yu.intersectSphere(Mp,JA)===null||yu.origin.distanceToSquared(JA)>(c.far-c.near)**2))&&(Wm.copy(ut).invert(),yu.copy(c.ray).applyMatrix4(Wm),!(rt.boundingBox!==null&&yu.intersectsBox(rt.boundingBox)===!1)&&this._computeIntersections(c,j,yu)))}_computeIntersections(c,j,rt){let at;const ut=this.geometry,At=this.material,wt=ut.index,Bt=ut.attributes.position,Ft=ut.attributes.uv,Vt=ut.attributes.uv1,qt=ut.attributes.normal,Jt=ut.groups,_i=ut.drawRange;if(wt!==null)if(Array.isArray(At))for(let sn=0,hn=Jt.length;sn<hn;sn++){const an=Jt[sn],en=At[an.materialIndex],xn=Math.max(an.start,_i.start),wn=Math.min(wt.count,Math.min(an.start+an.count,_i.start+_i.count));for(let En=xn,er=wn;En<er;En+=3){const Nn=wt.getX(En),zn=wt.getX(En+1),$n=wt.getX(En+2);at=Qu(this,en,c,rt,Ft,Vt,qt,Nn,zn,$n),at&&(at.faceIndex=Math.floor(En/3),at.face.materialIndex=an.materialIndex,j.push(at))}}else{const sn=Math.max(0,_i.start),hn=Math.min(wt.count,_i.start+_i.count);for(let an=sn,en=hn;an<en;an+=3){const xn=wt.getX(an),wn=wt.getX(an+1),En=wt.getX(an+2);at=Qu(this,At,c,rt,Ft,Vt,qt,xn,wn,En),at&&(at.faceIndex=Math.floor(an/3),j.push(at))}}else if(Bt!==void 0)if(Array.isArray(At))for(let sn=0,hn=Jt.length;sn<hn;sn++){const an=Jt[sn],en=At[an.materialIndex],xn=Math.max(an.start,_i.start),wn=Math.min(Bt.count,Math.min(an.start+an.count,_i.start+_i.count));for(let En=xn,er=wn;En<er;En+=3){const Nn=En,zn=En+1,$n=En+2;at=Qu(this,en,c,rt,Ft,Vt,qt,Nn,zn,$n),at&&(at.faceIndex=Math.floor(En/3),at.face.materialIndex=an.materialIndex,j.push(at))}}else{const sn=Math.max(0,_i.start),hn=Math.min(Bt.count,_i.start+_i.count);for(let an=sn,en=hn;an<en;an+=3){const xn=an,wn=an+1,En=an+2;at=Qu(this,At,c,rt,Ft,Vt,qt,xn,wn,En),at&&(at.faceIndex=Math.floor(an/3),j.push(at))}}}}function bv(ht,c,j,rt,at,ut,At,wt){let Bt;if(c.side===Dt?Bt=rt.intersectTriangle(At,ut,at,!0,wt):Bt=rt.intersectTriangle(at,ut,At,c.side===xt,wt),Bt===null)return null;d2.copy(wt),d2.applyMatrix4(ht.matrixWorld);const Ft=j.ray.origin.distanceTo(d2);return Ft<j.near||Ft>j.far?null:{distance:Ft,point:d2.clone(),object:ht}}function Qu(ht,c,j,rt,at,ut,At,wt,Bt,Ft){ht.getVertexPosition(wt,u2),ht.getVertexPosition(Bt,fr),ht.getVertexPosition(Ft,wu);const Vt=bv(ht,c,j,rt,u2,fr,wu,js);if(Vt){at&&(Tp.fromBufferAttribute(at,wt),i1.fromBufferAttribute(at,Bt),Rp.fromBufferAttribute(at,Ft),Vt.uv=p1.getInterpolation(js,u2,fr,wu,Tp,i1,Rp,new Wr)),ut&&(Tp.fromBufferAttribute(ut,wt),i1.fromBufferAttribute(ut,Bt),Rp.fromBufferAttribute(ut,Ft),Vt.uv1=p1.getInterpolation(js,u2,fr,wu,Tp,i1,Rp,new Wr)),At&&(h2.fromBufferAttribute(At,wt),$A.fromBufferAttribute(At,Bt),Km.fromBufferAttribute(At,Ft),Vt.normal=p1.getInterpolation(js,u2,fr,wu,h2,$A,Km,new kn),Vt.normal.dot(rt.direction)>0&&Vt.normal.multiplyScalar(-1));const qt={a:wt,b:Bt,c:Ft,normal:new kn,materialIndex:0};p1.getNormal(u2,fr,wu,qt.normal),Vt.face=qt}return Vt}class Vu extends Bo{constructor(c=1,j=1,rt=1,at=1,ut=1,At=1){super(),this.type="BoxGeometry",this.parameters={width:c,height:j,depth:rt,widthSegments:at,heightSegments:ut,depthSegments:At};const wt=this;at=Math.floor(at),ut=Math.floor(ut),At=Math.floor(At);const Bt=[],Ft=[],Vt=[],qt=[];let Jt=0,_i=0;sn("z","y","x",-1,-1,rt,j,c,At,ut,0),sn("z","y","x",1,-1,rt,j,-c,At,ut,1),sn("x","z","y",1,1,c,rt,j,at,At,2),sn("x","z","y",1,-1,c,rt,-j,at,At,3),sn("x","y","z",1,-1,c,j,rt,at,ut,4),sn("x","y","z",-1,-1,c,j,-rt,at,ut,5),this.setIndex(Bt),this.setAttribute("position",new Qr(Ft,3)),this.setAttribute("normal",new Qr(Vt,3)),this.setAttribute("uv",new Qr(qt,2));function sn(hn,an,en,xn,wn,En,er,Nn,zn,$n,Ln){const Sn=En/zn,jn=er/$n,ur=En/2,or=er/2,Ar=Nn/2,br=zn+1,Vr=$n+1;let Es=0,Sr=0;const hs=new kn;for(let vs=0;vs<Vr;vs++){const zs=vs*jn-or;for(let Qo=0;Qo<br;Qo++){const m0=Qo*Sn-ur;hs[hn]=m0*xn,hs[an]=zs*wn,hs[en]=Ar,Ft.push(hs.x,hs.y,hs.z),hs[hn]=0,hs[an]=0,hs[en]=Nn>0?1:-1,Vt.push(hs.x,hs.y,hs.z),qt.push(Qo/zn),qt.push(1-vs/$n),Es+=1}}for(let vs=0;vs<$n;vs++)for(let zs=0;zs<zn;zs++){const Qo=Jt+zs+br*vs,m0=Jt+zs+br*(vs+1),k0=Jt+(zs+1)+br*(vs+1),h0=Jt+(zs+1)+br*vs;Bt.push(Qo,m0,h0),Bt.push(m0,k0,h0),Sr+=6}wt.addGroup(_i,Sr,Ln),_i+=Sr,Jt+=Es}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new Vu(c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments)}}function f2(ht){const c={};for(const j in ht){c[j]={};for(const rt in ht[j]){const at=ht[j][rt];at&&(at.isColor||at.isMatrix3||at.isMatrix4||at.isVector2||at.isVector3||at.isVector4||at.isTexture||at.isQuaternion)?at.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),c[j][rt]=null):c[j][rt]=at.clone():Array.isArray(at)?c[j][rt]=at.slice():c[j][rt]=at}}return c}function n1(ht){const c={};for(let j=0;j<ht.length;j++){const rt=f2(ht[j]);for(const at in rt)c[at]=rt[at]}return c}function Mv(ht){const c=[];for(let j=0;j<ht.length;j++)c.push(ht[j].clone());return c}function Xm(ht){const c=ht.getRenderTarget();return c===null?ht.outputColorSpace:c.isXRRenderTarget===!0?c.texture.colorSpace:u0.workingColorSpace}const Ym={clone:f2,merge:n1};var qm=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,U2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class b1 extends Kl{constructor(c){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=qm,this.fragmentShader=U2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,c!==void 0&&this.setValues(c)}copy(c){return super.copy(c),this.fragmentShader=c.fragmentShader,this.vertexShader=c.vertexShader,this.uniforms=f2(c.uniforms),this.uniformsGroups=Mv(c.uniformsGroups),this.defines=Object.assign({},c.defines),this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.fog=c.fog,this.lights=c.lights,this.clipping=c.clipping,this.extensions=Object.assign({},c.extensions),this.glslVersion=c.glslVersion,this}toJSON(c){const j=super.toJSON(c);j.glslVersion=this.glslVersion,j.uniforms={};for(const at in this.uniforms){const At=this.uniforms[at].value;At&&At.isTexture?j.uniforms[at]={type:"t",value:At.toJSON(c).uuid}:At&&At.isColor?j.uniforms[at]={type:"c",value:At.getHex()}:At&&At.isVector2?j.uniforms[at]={type:"v2",value:At.toArray()}:At&&At.isVector3?j.uniforms[at]={type:"v3",value:At.toArray()}:At&&At.isVector4?j.uniforms[at]={type:"v4",value:At.toArray()}:At&&At.isMatrix3?j.uniforms[at]={type:"m3",value:At.toArray()}:At&&At.isMatrix4?j.uniforms[at]={type:"m4",value:At.toArray()}:j.uniforms[at]={value:At}}Object.keys(this.defines).length>0&&(j.defines=this.defines),j.vertexShader=this.vertexShader,j.fragmentShader=this.fragmentShader,j.lights=this.lights,j.clipping=this.clipping;const rt={};for(const at in this.extensions)this.extensions[at]===!0&&(rt[at]=!0);return Object.keys(rt).length>0&&(j.extensions=rt),j}}class Ip extends s0{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vs,this.projectionMatrix=new Vs,this.projectionMatrixInverse=new Vs,this.coordinateSystem=C1}copy(c,j){return super.copy(c,j),this.matrixWorldInverse.copy(c.matrixWorldInverse),this.projectionMatrix.copy(c.projectionMatrix),this.projectionMatrixInverse.copy(c.projectionMatrixInverse),this.coordinateSystem=c.coordinateSystem,this}getWorldDirection(c){return super.getWorldDirection(c).negate()}updateMatrixWorld(c){super.updateMatrixWorld(c),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(c,j){super.updateWorldMatrix(c,j),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Cu=new kn,X0=new Wr,jA=new Wr;class J0 extends Ip{constructor(c=50,j=1,rt=.1,at=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=c,this.zoom=1,this.near=rt,this.far=at,this.focus=10,this.aspect=j,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(c,j){return super.copy(c,j),this.fov=c.fov,this.zoom=c.zoom,this.near=c.near,this.far=c.far,this.focus=c.focus,this.aspect=c.aspect,this.view=c.view===null?null:Object.assign({},c.view),this.filmGauge=c.filmGauge,this.filmOffset=c.filmOffset,this}setFocalLength(c){const j=.5*this.getFilmHeight()/c;this.fov=hu*2*Math.atan(j),this.updateProjectionMatrix()}getFocalLength(){const c=Math.tan(j1*.5*this.fov);return .5*this.getFilmHeight()/c}getEffectiveFOV(){return hu*2*Math.atan(Math.tan(j1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(c,j,rt){Cu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),j.set(Cu.x,Cu.y).multiplyScalar(-c/Cu.z),Cu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),rt.set(Cu.x,Cu.y).multiplyScalar(-c/Cu.z)}getViewSize(c,j){return this.getViewBounds(c,X0,jA),j.subVectors(jA,X0)}setViewOffset(c,j,rt,at,ut,At){this.aspect=c/j,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=c,this.view.fullHeight=j,this.view.offsetX=rt,this.view.offsetY=at,this.view.width=ut,this.view.height=At,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const c=this.near;let j=c*Math.tan(j1*.5*this.fov)/this.zoom,rt=2*j,at=this.aspect*rt,ut=-.5*at;const At=this.view;if(this.view!==null&&this.view.enabled){const Bt=At.fullWidth,Ft=At.fullHeight;ut+=At.offsetX*at/Bt,j-=At.offsetY*rt/Ft,at*=At.width/Bt,rt*=At.height/Ft}const wt=this.filmOffset;wt!==0&&(ut+=c*wt/this.getFilmWidth()),this.projectionMatrix.makePerspective(ut,ut+at,j,j-rt,c,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(c){const j=super.toJSON(c);return j.object.fov=this.fov,j.object.zoom=this.zoom,j.object.near=this.near,j.object.far=this.far,j.object.focus=this.focus,j.object.aspect=this.aspect,this.view!==null&&(j.object.view=Object.assign({},this.view)),j.object.filmGauge=this.filmGauge,j.object.filmOffset=this.filmOffset,j}}const L1=-90,p2=1;class Bp extends s0{constructor(c,j,rt){super(),this.type="CubeCamera",this.renderTarget=rt,this.coordinateSystem=null,this.activeMipmapLevel=0;const at=new J0(L1,p2,c,j);at.layers=this.layers,this.add(at);const ut=new J0(L1,p2,c,j);ut.layers=this.layers,this.add(ut);const At=new J0(L1,p2,c,j);At.layers=this.layers,this.add(At);const wt=new J0(L1,p2,c,j);wt.layers=this.layers,this.add(wt);const Bt=new J0(L1,p2,c,j);Bt.layers=this.layers,this.add(Bt);const Ft=new J0(L1,p2,c,j);Ft.layers=this.layers,this.add(Ft)}updateCoordinateSystem(){const c=this.coordinateSystem,j=this.children.concat(),[rt,at,ut,At,wt,Bt]=j;for(const Ft of j)this.remove(Ft);if(c===C1)rt.up.set(0,1,0),rt.lookAt(1,0,0),at.up.set(0,1,0),at.lookAt(-1,0,0),ut.up.set(0,0,-1),ut.lookAt(0,1,0),At.up.set(0,0,1),At.lookAt(0,-1,0),wt.up.set(0,1,0),wt.lookAt(0,0,1),Bt.up.set(0,1,0),Bt.lookAt(0,0,-1);else if(c===Pu)rt.up.set(0,-1,0),rt.lookAt(-1,0,0),at.up.set(0,-1,0),at.lookAt(1,0,0),ut.up.set(0,0,1),ut.lookAt(0,1,0),At.up.set(0,0,-1),At.lookAt(0,-1,0),wt.up.set(0,-1,0),wt.lookAt(0,0,1),Bt.up.set(0,-1,0),Bt.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+c);for(const Ft of j)this.add(Ft),Ft.updateMatrixWorld()}update(c,j){this.parent===null&&this.updateMatrixWorld();const{renderTarget:rt,activeMipmapLevel:at}=this;this.coordinateSystem!==c.coordinateSystem&&(this.coordinateSystem=c.coordinateSystem,this.updateCoordinateSystem());const[ut,At,wt,Bt,Ft,Vt]=this.children,qt=c.getRenderTarget(),Jt=c.getActiveCubeFace(),_i=c.getActiveMipmapLevel(),sn=c.xr.enabled;c.xr.enabled=!1;const hn=rt.texture.generateMipmaps;rt.texture.generateMipmaps=!1,c.setRenderTarget(rt,0,at),c.render(j,ut),c.setRenderTarget(rt,1,at),c.render(j,At),c.setRenderTarget(rt,2,at),c.render(j,wt),c.setRenderTarget(rt,3,at),c.render(j,Bt),c.setRenderTarget(rt,4,at),c.render(j,Ft),rt.texture.generateMipmaps=hn,c.setRenderTarget(rt,5,at),c.render(j,Vt),c.setRenderTarget(qt,Jt,_i),c.xr.enabled=sn,rt.texture.needsPMREMUpdate=!0}}class H2 extends C0{constructor(c,j,rt,at,ut,At,wt,Bt,Ft,Vt){c=c!==void 0?c:[],j=j!==void 0?j:un,super(c,j,rt,at,ut,At,wt,Bt,Ft,Vt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(c){this.image=c}}class em extends r1{constructor(c=1,j={}){super(c,c,j),this.isWebGLCubeRenderTarget=!0;const rt={width:c,height:c,depth:1},at=[rt,rt,rt,rt,rt,rt];this.texture=new H2(at,j.mapping,j.wrapS,j.wrapT,j.magFilter,j.minFilter,j.format,j.type,j.anisotropy,j.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=j.generateMipmaps!==void 0?j.generateMipmaps:!1,this.texture.minFilter=j.minFilter!==void 0?j.minFilter:to}fromEquirectangularTexture(c,j){this.texture.type=j.type,this.texture.colorSpace=j.colorSpace,this.texture.generateMipmaps=j.generateMipmaps,this.texture.minFilter=j.minFilter,this.texture.magFilter=j.magFilter;const rt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},at=new Vu(5,5,5),ut=new b1({name:"CubemapFromEquirect",uniforms:f2(rt.uniforms),vertexShader:rt.vertexShader,fragmentShader:rt.fragmentShader,side:Dt,blending:Ut});ut.uniforms.tEquirect.value=j;const At=new Al(at,ut),wt=j.minFilter;return j.minFilter===o0&&(j.minFilter=to),new Bp(1,10,this).update(c,At),j.minFilter=wt,At.geometry.dispose(),At.material.dispose(),this}clear(c,j,rt,at){const ut=c.getRenderTarget();for(let At=0;At<6;At++)c.setRenderTarget(this,At),c.clear(j,rt,at);c.setRenderTarget(ut)}}const Lp=new kn,Jm=new kn,Zm=new Ao;class _u{constructor(c=new kn(1,0,0),j=0){this.isPlane=!0,this.normal=c,this.constant=j}set(c,j){return this.normal.copy(c),this.constant=j,this}setComponents(c,j,rt,at){return this.normal.set(c,j,rt),this.constant=at,this}setFromNormalAndCoplanarPoint(c,j){return this.normal.copy(c),this.constant=-j.dot(this.normal),this}setFromCoplanarPoints(c,j,rt){const at=Lp.subVectors(rt,j).cross(Jm.subVectors(c,j)).normalize();return this.setFromNormalAndCoplanarPoint(at,c),this}copy(c){return this.normal.copy(c.normal),this.constant=c.constant,this}normalize(){const c=1/this.normal.length();return this.normal.multiplyScalar(c),this.constant*=c,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(c){return this.normal.dot(c)+this.constant}distanceToSphere(c){return this.distanceToPoint(c.center)-c.radius}projectPoint(c,j){return j.copy(c).addScaledVector(this.normal,-this.distanceToPoint(c))}intersectLine(c,j){const rt=c.delta(Lp),at=this.normal.dot(rt);if(at===0)return this.distanceToPoint(c.start)===0?j.copy(c.start):null;const ut=-(c.start.dot(this.normal)+this.constant)/at;return ut<0||ut>1?null:j.copy(c.start).addScaledVector(rt,ut)}intersectsLine(c){const j=this.distanceToPoint(c.start),rt=this.distanceToPoint(c.end);return j<0&&rt>0||rt<0&&j>0}intersectsBox(c){return c.intersectsPlane(this)}intersectsSphere(c){return c.intersectsPlane(this)}coplanarPoint(c){return c.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(c,j){const rt=j||Zm.getNormalMatrix(c),at=this.coplanarPoint(Lp).applyMatrix4(c),ut=this.normal.applyMatrix3(rt).normalize();return this.constant=-at.dot(ut),this}translate(c){return this.constant-=c.dot(this.normal),this}equals(c){return c.normal.equals(this.normal)&&c.constant===this.constant}clone(){return new this.constructor().copy(this)}}const zu=new ba,D1=new kn;class Wu{constructor(c=new _u,j=new _u,rt=new _u,at=new _u,ut=new _u,At=new _u){this.planes=[c,j,rt,at,ut,At]}set(c,j,rt,at,ut,At){const wt=this.planes;return wt[0].copy(c),wt[1].copy(j),wt[2].copy(rt),wt[3].copy(at),wt[4].copy(ut),wt[5].copy(At),this}copy(c){const j=this.planes;for(let rt=0;rt<6;rt++)j[rt].copy(c.planes[rt]);return this}setFromProjectionMatrix(c,j=C1){const rt=this.planes,at=c.elements,ut=at[0],At=at[1],wt=at[2],Bt=at[3],Ft=at[4],Vt=at[5],qt=at[6],Jt=at[7],_i=at[8],sn=at[9],hn=at[10],an=at[11],en=at[12],xn=at[13],wn=at[14],En=at[15];if(rt[0].setComponents(Bt-ut,Jt-Ft,an-_i,En-en).normalize(),rt[1].setComponents(Bt+ut,Jt+Ft,an+_i,En+en).normalize(),rt[2].setComponents(Bt+At,Jt+Vt,an+sn,En+xn).normalize(),rt[3].setComponents(Bt-At,Jt-Vt,an-sn,En-xn).normalize(),rt[4].setComponents(Bt-wt,Jt-qt,an-hn,En-wn).normalize(),j===C1)rt[5].setComponents(Bt+wt,Jt+qt,an+hn,En+wn).normalize();else if(j===Pu)rt[5].setComponents(wt,qt,hn,wn).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+j);return this}intersectsObject(c){if(c.boundingSphere!==void 0)c.boundingSphere===null&&c.computeBoundingSphere(),zu.copy(c.boundingSphere).applyMatrix4(c.matrixWorld);else{const j=c.geometry;j.boundingSphere===null&&j.computeBoundingSphere(),zu.copy(j.boundingSphere).applyMatrix4(c.matrixWorld)}return this.intersectsSphere(zu)}intersectsSprite(c){return zu.center.set(0,0,0),zu.radius=.7071067811865476,zu.applyMatrix4(c.matrixWorld),this.intersectsSphere(zu)}intersectsSphere(c){const j=this.planes,rt=c.center,at=-c.radius;for(let ut=0;ut<6;ut++)if(j[ut].distanceToPoint(rt)<at)return!1;return!0}intersectsBox(c){const j=this.planes;for(let rt=0;rt<6;rt++){const at=j[rt];if(D1.x=at.normal.x>0?c.max.x:c.min.x,D1.y=at.normal.y>0?c.max.y:c.min.y,D1.z=at.normal.z>0?c.max.z:c.min.z,at.distanceToPoint(D1)<0)return!1}return!0}containsPoint(c){const j=this.planes;for(let rt=0;rt<6;rt++)if(j[rt].distanceToPoint(c)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function G2(){let ht=null,c=!1,j=null,rt=null;function at(ut,At){j(ut,At),rt=ht.requestAnimationFrame(at)}return{start:function(){c!==!0&&j!==null&&(rt=ht.requestAnimationFrame(at),c=!0)},stop:function(){ht.cancelAnimationFrame(rt),c=!1},setAnimationLoop:function(ut){j=ut},setContext:function(ut){ht=ut}}}function Sv(ht){const c=new WeakMap;function j(wt,Bt){const Ft=wt.array,Vt=wt.usage,qt=Ft.byteLength,Jt=ht.createBuffer();ht.bindBuffer(Bt,Jt),ht.bufferData(Bt,Ft,Vt),wt.onUploadCallback();let _i;if(Ft instanceof Float32Array)_i=ht.FLOAT;else if(Ft instanceof Uint16Array)wt.isFloat16BufferAttribute?_i=ht.HALF_FLOAT:_i=ht.UNSIGNED_SHORT;else if(Ft instanceof Int16Array)_i=ht.SHORT;else if(Ft instanceof Uint32Array)_i=ht.UNSIGNED_INT;else if(Ft instanceof Int32Array)_i=ht.INT;else if(Ft instanceof Int8Array)_i=ht.BYTE;else if(Ft instanceof Uint8Array)_i=ht.UNSIGNED_BYTE;else if(Ft instanceof Uint8ClampedArray)_i=ht.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Ft);return{buffer:Jt,type:_i,bytesPerElement:Ft.BYTES_PER_ELEMENT,version:wt.version,size:qt}}function rt(wt,Bt,Ft){const Vt=Bt.array,qt=Bt._updateRange,Jt=Bt.updateRanges;if(ht.bindBuffer(Ft,wt),qt.count===-1&&Jt.length===0&&ht.bufferSubData(Ft,0,Vt),Jt.length!==0){for(let _i=0,sn=Jt.length;_i<sn;_i++){const hn=Jt[_i];ht.bufferSubData(Ft,hn.start*Vt.BYTES_PER_ELEMENT,Vt,hn.start,hn.count)}Bt.clearUpdateRanges()}qt.count!==-1&&(ht.bufferSubData(Ft,qt.offset*Vt.BYTES_PER_ELEMENT,Vt,qt.offset,qt.count),qt.count=-1),Bt.onUploadCallback()}function at(wt){return wt.isInterleavedBufferAttribute&&(wt=wt.data),c.get(wt)}function ut(wt){wt.isInterleavedBufferAttribute&&(wt=wt.data);const Bt=c.get(wt);Bt&&(ht.deleteBuffer(Bt.buffer),c.delete(wt))}function At(wt,Bt){if(wt.isGLBufferAttribute){const Vt=c.get(wt);(!Vt||Vt.version<wt.version)&&c.set(wt,{buffer:wt.buffer,type:wt.type,bytesPerElement:wt.elementSize,version:wt.version});return}wt.isInterleavedBufferAttribute&&(wt=wt.data);const Ft=c.get(wt);if(Ft===void 0)c.set(wt,j(wt,Bt));else if(Ft.version<wt.version){if(Ft.size!==wt.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");rt(Ft.buffer,wt,Bt),Ft.version=wt.version}}return{get:at,remove:ut,update:At}}class lu extends Bo{constructor(c=1,j=1,rt=1,at=1){super(),this.type="PlaneGeometry",this.parameters={width:c,height:j,widthSegments:rt,heightSegments:at};const ut=c/2,At=j/2,wt=Math.floor(rt),Bt=Math.floor(at),Ft=wt+1,Vt=Bt+1,qt=c/wt,Jt=j/Bt,_i=[],sn=[],hn=[],an=[];for(let en=0;en<Vt;en++){const xn=en*Jt-At;for(let wn=0;wn<Ft;wn++){const En=wn*qt-ut;sn.push(En,-xn,0),hn.push(0,0,1),an.push(wn/wt),an.push(1-en/Bt)}}for(let en=0;en<Bt;en++)for(let xn=0;xn<wt;xn++){const wn=xn+Ft*en,En=xn+Ft*(en+1),er=xn+1+Ft*(en+1),Nn=xn+1+Ft*en;_i.push(wn,En,Nn),_i.push(En,er,Nn)}this.setIndex(_i),this.setAttribute("position",new Qr(sn,3)),this.setAttribute("normal",new Qr(hn,3)),this.setAttribute("uv",new Qr(an,2))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new lu(c.width,c.height,c.widthSegments,c.heightSegments)}}var Tv=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Rv=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Iv=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Bv=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lv=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,$m=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Dv=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Q2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Pv=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ov=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Fv=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,jm=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kv=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Nv=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Uv=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Hv=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Gv=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Qv=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Vv=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zv=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wv=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Kv=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Xv=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Yv=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qv=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Jv=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zv=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$v=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jv=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_g=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,e6="gl_FragColor = linearToOutputTexel( gl_FragColor );",t6=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,i6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,n6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,r6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,a6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,l6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,c6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,tm=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,u6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,h6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,d6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,f6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,p6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,A6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,m6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,v6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,g6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,E6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,y6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,w6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ko=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Go=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,C6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Dp=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,e3=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,t3=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_6=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,V2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,M1=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,i3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,A2=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,b6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,M6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,n3=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,im=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,m2=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,S6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,nm=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,T6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,R6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,I6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,B6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,L6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,D6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,P6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,O6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,F6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,k6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,N6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,U6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,H6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,G6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Q6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,r3=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,V6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,z6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,W6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,K6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,X6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Y6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,q6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,J6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Z6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,j6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iE=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const To={alphahash_fragment:Tv,alphahash_pars_fragment:Rv,alphamap_fragment:Iv,alphamap_pars_fragment:Bv,alphatest_fragment:Lv,alphatest_pars_fragment:$m,aomap_fragment:Dv,aomap_pars_fragment:Q2,batching_pars_vertex:Pv,batching_vertex:Ov,begin_vertex:Fv,beginnormal_vertex:jm,bsdfs:kv,iridescence_fragment:Nv,bumpmap_pars_fragment:Uv,clipping_planes_fragment:Hv,clipping_planes_pars_fragment:Gv,clipping_planes_pars_vertex:Qv,clipping_planes_vertex:Vv,color_fragment:zv,color_pars_fragment:Wv,color_pars_vertex:Kv,color_vertex:Xv,common:Yv,cube_uv_reflection_fragment:qv,defaultnormal_vertex:Jv,displacementmap_pars_vertex:Zv,displacementmap_vertex:$v,emissivemap_fragment:jv,emissivemap_pars_fragment:_g,colorspace_fragment:e6,colorspace_pars_fragment:t6,envmap_fragment:i6,envmap_common_pars_fragment:n6,envmap_pars_fragment:r6,envmap_pars_vertex:s6,envmap_physical_pars_fragment:A6,envmap_vertex:o6,fog_vertex:a6,fog_pars_vertex:l6,fog_fragment:c6,fog_pars_fragment:tm,gradientmap_pars_fragment:u6,lightmap_pars_fragment:h6,lights_lambert_fragment:d6,lights_lambert_pars_fragment:f6,lights_pars_begin:p6,lights_toon_fragment:m6,lights_toon_pars_fragment:v6,lights_phong_fragment:g6,lights_phong_pars_fragment:E6,lights_physical_fragment:y6,lights_physical_pars_fragment:w6,lights_fragment_begin:ko,lights_fragment_maps:Go,lights_fragment_end:C6,logdepthbuf_fragment:Dp,logdepthbuf_pars_fragment:e3,logdepthbuf_pars_vertex:t3,logdepthbuf_vertex:_6,map_fragment:V2,map_pars_fragment:M1,map_particle_fragment:i3,map_particle_pars_fragment:A2,metalnessmap_fragment:x6,metalnessmap_pars_fragment:b6,morphinstance_vertex:M6,morphcolor_vertex:n3,morphnormal_vertex:im,morphtarget_pars_vertex:m2,morphtarget_vertex:S6,normal_fragment_begin:nm,normal_fragment_maps:T6,normal_pars_fragment:R6,normal_pars_vertex:I6,normal_vertex:B6,normalmap_pars_fragment:L6,clearcoat_normal_fragment_begin:D6,clearcoat_normal_fragment_maps:P6,clearcoat_pars_fragment:O6,iridescence_pars_fragment:F6,opaque_fragment:k6,packing:N6,premultiplied_alpha_fragment:U6,project_vertex:H6,dithering_fragment:G6,dithering_pars_fragment:Q6,roughnessmap_fragment:r3,roughnessmap_pars_fragment:V6,shadowmap_pars_fragment:z6,shadowmap_pars_vertex:W6,shadowmap_vertex:K6,shadowmask_pars_fragment:X6,skinbase_vertex:Y6,skinning_pars_vertex:q6,skinning_vertex:J6,skinnormal_vertex:Z6,specularmap_fragment:$6,specularmap_pars_fragment:j6,tonemapping_fragment:eE,tonemapping_pars_fragment:tE,transmission_fragment:iE,transmission_pars_fragment:nE,uv_pars_fragment:rE,uv_pars_vertex:sE,uv_vertex:oE,worldpos_vertex:aE,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},bs={common:{diffuse:{value:new Os(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ao},alphaMap:{value:null},alphaMapTransform:{value:new Ao},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ao}},envmap:{envMap:{value:null},envMapRotation:{value:new Ao},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ao}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ao}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ao},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ao},normalScale:{value:new Wr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ao},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ao}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ao}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ao}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Os(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Os(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ao},alphaTest:{value:0},uvTransform:{value:new Ao}},sprite:{diffuse:{value:new Os(16777215)},opacity:{value:1},center:{value:new Wr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ao},alphaMap:{value:null},alphaMapTransform:{value:new Ao},alphaTest:{value:0}}},m1={basic:{uniforms:n1([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.fog]),vertexShader:To.meshbasic_vert,fragmentShader:To.meshbasic_frag},lambert:{uniforms:n1([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,bs.lights,{emissive:{value:new Os(0)}}]),vertexShader:To.meshlambert_vert,fragmentShader:To.meshlambert_frag},phong:{uniforms:n1([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,bs.lights,{emissive:{value:new Os(0)},specular:{value:new Os(1118481)},shininess:{value:30}}]),vertexShader:To.meshphong_vert,fragmentShader:To.meshphong_frag},standard:{uniforms:n1([bs.common,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.roughnessmap,bs.metalnessmap,bs.fog,bs.lights,{emissive:{value:new Os(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag},toon:{uniforms:n1([bs.common,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.gradientmap,bs.fog,bs.lights,{emissive:{value:new Os(0)}}]),vertexShader:To.meshtoon_vert,fragmentShader:To.meshtoon_frag},matcap:{uniforms:n1([bs.common,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,{matcap:{value:null}}]),vertexShader:To.meshmatcap_vert,fragmentShader:To.meshmatcap_frag},points:{uniforms:n1([bs.points,bs.fog]),vertexShader:To.points_vert,fragmentShader:To.points_frag},dashed:{uniforms:n1([bs.common,bs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:To.linedashed_vert,fragmentShader:To.linedashed_frag},depth:{uniforms:n1([bs.common,bs.displacementmap]),vertexShader:To.depth_vert,fragmentShader:To.depth_frag},normal:{uniforms:n1([bs.common,bs.bumpmap,bs.normalmap,bs.displacementmap,{opacity:{value:1}}]),vertexShader:To.meshnormal_vert,fragmentShader:To.meshnormal_frag},sprite:{uniforms:n1([bs.sprite,bs.fog]),vertexShader:To.sprite_vert,fragmentShader:To.sprite_frag},background:{uniforms:{uvTransform:{value:new Ao},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:To.background_vert,fragmentShader:To.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ao}},vertexShader:To.backgroundCube_vert,fragmentShader:To.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:To.cube_vert,fragmentShader:To.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:To.equirect_vert,fragmentShader:To.equirect_frag},distanceRGBA:{uniforms:n1([bs.common,bs.displacementmap,{referencePosition:{value:new kn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:To.distanceRGBA_vert,fragmentShader:To.distanceRGBA_frag},shadow:{uniforms:n1([bs.lights,bs.fog,{color:{value:new Os(0)},opacity:{value:1}}]),vertexShader:To.shadow_vert,fragmentShader:To.shadow_frag}};m1.physical={uniforms:n1([m1.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ao},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ao},clearcoatNormalScale:{value:new Wr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ao},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ao},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ao},sheen:{value:0},sheenColor:{value:new Os(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ao},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ao},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ao},transmissionSamplerSize:{value:new Wr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ao},attenuationDistance:{value:0},attenuationColor:{value:new Os(0)},specularColor:{value:new Os(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ao},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ao},anisotropyVector:{value:new Wr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ao}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag};const Pp={r:0,b:0,g:0},Xu=new f1,mE=new Vs;function vE(ht,c,j,rt,at,ut,At){const wt=new Os(0);let Bt=ut===!0?0:1,Ft,Vt,qt=null,Jt=0,_i=null;function sn(xn){let wn=xn.isScene===!0?xn.background:null;return wn&&wn.isTexture&&(wn=(xn.backgroundBlurriness>0?j:c).get(wn)),wn}function hn(xn){let wn=!1;const En=sn(xn);En===null?en(wt,Bt):En&&En.isColor&&(en(En,1),wn=!0);const er=ht.xr.getEnvironmentBlendMode();er==="additive"?rt.buffers.color.setClear(0,0,0,1,At):er==="alpha-blend"&&rt.buffers.color.setClear(0,0,0,0,At),(ht.autoClear||wn)&&ht.clear(ht.autoClearColor,ht.autoClearDepth,ht.autoClearStencil)}function an(xn,wn){const En=sn(wn);En&&(En.isCubeTexture||En.mapping===Rn)?(Vt===void 0&&(Vt=new Al(new Vu(1e4,1e4,1e4),new b1({name:"BackgroundCubeMaterial",uniforms:f2(m1.backgroundCube.uniforms),vertexShader:m1.backgroundCube.vertexShader,fragmentShader:m1.backgroundCube.fragmentShader,side:Dt,depthTest:!1,depthWrite:!1,fog:!1})),Vt.geometry.deleteAttribute("normal"),Vt.geometry.deleteAttribute("uv"),Vt.onBeforeRender=function(er,Nn,zn){this.matrixWorld.copyPosition(zn.matrixWorld)},Object.defineProperty(Vt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),at.update(Vt)),Xu.copy(wn.backgroundRotation),Xu.x*=-1,Xu.y*=-1,Xu.z*=-1,En.isCubeTexture&&En.isRenderTargetTexture===!1&&(Xu.y*=-1,Xu.z*=-1),Vt.material.uniforms.envMap.value=En,Vt.material.uniforms.flipEnvMap.value=En.isCubeTexture&&En.isRenderTargetTexture===!1?-1:1,Vt.material.uniforms.backgroundBlurriness.value=wn.backgroundBlurriness,Vt.material.uniforms.backgroundIntensity.value=wn.backgroundIntensity,Vt.material.uniforms.backgroundRotation.value.setFromMatrix4(mE.makeRotationFromEuler(Xu)),Vt.material.toneMapped=u0.getTransfer(En.colorSpace)!==g0,(qt!==En||Jt!==En.version||_i!==ht.toneMapping)&&(Vt.material.needsUpdate=!0,qt=En,Jt=En.version,_i=ht.toneMapping),Vt.layers.enableAll(),xn.unshift(Vt,Vt.geometry,Vt.material,0,0,null)):En&&En.isTexture&&(Ft===void 0&&(Ft=new Al(new lu(2,2),new b1({name:"BackgroundMaterial",uniforms:f2(m1.background.uniforms),vertexShader:m1.background.vertexShader,fragmentShader:m1.background.fragmentShader,side:xt,depthTest:!1,depthWrite:!1,fog:!1})),Ft.geometry.deleteAttribute("normal"),Object.defineProperty(Ft.material,"map",{get:function(){return this.uniforms.t2D.value}}),at.update(Ft)),Ft.material.uniforms.t2D.value=En,Ft.material.uniforms.backgroundIntensity.value=wn.backgroundIntensity,Ft.material.toneMapped=u0.getTransfer(En.colorSpace)!==g0,En.matrixAutoUpdate===!0&&En.updateMatrix(),Ft.material.uniforms.uvTransform.value.copy(En.matrix),(qt!==En||Jt!==En.version||_i!==ht.toneMapping)&&(Ft.material.needsUpdate=!0,qt=En,Jt=En.version,_i=ht.toneMapping),Ft.layers.enableAll(),xn.unshift(Ft,Ft.geometry,Ft.material,0,0,null))}function en(xn,wn){xn.getRGB(Pp,Xm(ht)),rt.buffers.color.setClear(Pp.r,Pp.g,Pp.b,wn,At)}return{getClearColor:function(){return wt},setClearColor:function(xn,wn=1){wt.set(xn),Bt=wn,en(wt,Bt)},getClearAlpha:function(){return Bt},setClearAlpha:function(xn){Bt=xn,en(wt,Bt)},render:hn,addToRenderList:an}}function gE(ht,c){const j=ht.getParameter(ht.MAX_VERTEX_ATTRIBS),rt={},at=Jt(null);let ut=at,At=!1;function wt(Sn,jn,ur,or,Ar){let br=!1;const Vr=qt(or,ur,jn);ut!==Vr&&(ut=Vr,Ft(ut.object)),br=_i(Sn,or,ur,Ar),br&&sn(Sn,or,ur,Ar),Ar!==null&&c.update(Ar,ht.ELEMENT_ARRAY_BUFFER),(br||At)&&(At=!1,En(Sn,jn,ur,or),Ar!==null&&ht.bindBuffer(ht.ELEMENT_ARRAY_BUFFER,c.get(Ar).buffer))}function Bt(){return ht.createVertexArray()}function Ft(Sn){return ht.bindVertexArray(Sn)}function Vt(Sn){return ht.deleteVertexArray(Sn)}function qt(Sn,jn,ur){const or=ur.wireframe===!0;let Ar=rt[Sn.id];Ar===void 0&&(Ar={},rt[Sn.id]=Ar);let br=Ar[jn.id];br===void 0&&(br={},Ar[jn.id]=br);let Vr=br[or];return Vr===void 0&&(Vr=Jt(Bt()),br[or]=Vr),Vr}function Jt(Sn){const jn=[],ur=[],or=[];for(let Ar=0;Ar<j;Ar++)jn[Ar]=0,ur[Ar]=0,or[Ar]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:jn,enabledAttributes:ur,attributeDivisors:or,object:Sn,attributes:{},index:null}}function _i(Sn,jn,ur,or){const Ar=ut.attributes,br=jn.attributes;let Vr=0;const Es=ur.getAttributes();for(const Sr in Es)if(Es[Sr].location>=0){const vs=Ar[Sr];let zs=br[Sr];if(zs===void 0&&(Sr==="instanceMatrix"&&Sn.instanceMatrix&&(zs=Sn.instanceMatrix),Sr==="instanceColor"&&Sn.instanceColor&&(zs=Sn.instanceColor)),vs===void 0||vs.attribute!==zs||zs&&vs.data!==zs.data)return!0;Vr++}return ut.attributesNum!==Vr||ut.index!==or}function sn(Sn,jn,ur,or){const Ar={},br=jn.attributes;let Vr=0;const Es=ur.getAttributes();for(const Sr in Es)if(Es[Sr].location>=0){let vs=br[Sr];vs===void 0&&(Sr==="instanceMatrix"&&Sn.instanceMatrix&&(vs=Sn.instanceMatrix),Sr==="instanceColor"&&Sn.instanceColor&&(vs=Sn.instanceColor));const zs={};zs.attribute=vs,vs&&vs.data&&(zs.data=vs.data),Ar[Sr]=zs,Vr++}ut.attributes=Ar,ut.attributesNum=Vr,ut.index=or}function hn(){const Sn=ut.newAttributes;for(let jn=0,ur=Sn.length;jn<ur;jn++)Sn[jn]=0}function an(Sn){en(Sn,0)}function en(Sn,jn){const ur=ut.newAttributes,or=ut.enabledAttributes,Ar=ut.attributeDivisors;ur[Sn]=1,or[Sn]===0&&(ht.enableVertexAttribArray(Sn),or[Sn]=1),Ar[Sn]!==jn&&(ht.vertexAttribDivisor(Sn,jn),Ar[Sn]=jn)}function xn(){const Sn=ut.newAttributes,jn=ut.enabledAttributes;for(let ur=0,or=jn.length;ur<or;ur++)jn[ur]!==Sn[ur]&&(ht.disableVertexAttribArray(ur),jn[ur]=0)}function wn(Sn,jn,ur,or,Ar,br,Vr){Vr===!0?ht.vertexAttribIPointer(Sn,jn,ur,Ar,br):ht.vertexAttribPointer(Sn,jn,ur,or,Ar,br)}function En(Sn,jn,ur,or){hn();const Ar=or.attributes,br=ur.getAttributes(),Vr=jn.defaultAttributeValues;for(const Es in br){const Sr=br[Es];if(Sr.location>=0){let hs=Ar[Es];if(hs===void 0&&(Es==="instanceMatrix"&&Sn.instanceMatrix&&(hs=Sn.instanceMatrix),Es==="instanceColor"&&Sn.instanceColor&&(hs=Sn.instanceColor)),hs!==void 0){const vs=hs.normalized,zs=hs.itemSize,Qo=c.get(hs);if(Qo===void 0)continue;const m0=Qo.buffer,k0=Qo.type,h0=Qo.bytesPerElement,S0=k0===ht.INT||k0===ht.UNSIGNED_INT||hs.gpuType===R1;if(hs.isInterleavedBufferAttribute){const Ws=hs.data,qr=Ws.stride,ws=hs.offset;if(Ws.isInstancedInterleavedBuffer){for(let Ms=0;Ms<Sr.locationSize;Ms++)en(Sr.location+Ms,Ws.meshPerAttribute);Sn.isInstancedMesh!==!0&&or._maxInstanceCount===void 0&&(or._maxInstanceCount=Ws.meshPerAttribute*Ws.count)}else for(let Ms=0;Ms<Sr.locationSize;Ms++)an(Sr.location+Ms);ht.bindBuffer(ht.ARRAY_BUFFER,m0);for(let Ms=0;Ms<Sr.locationSize;Ms++)wn(Sr.location+Ms,zs/Sr.locationSize,k0,vs,qr*h0,(ws+zs/Sr.locationSize*Ms)*h0,S0)}else{if(hs.isInstancedBufferAttribute){for(let Ws=0;Ws<Sr.locationSize;Ws++)en(Sr.location+Ws,hs.meshPerAttribute);Sn.isInstancedMesh!==!0&&or._maxInstanceCount===void 0&&(or._maxInstanceCount=hs.meshPerAttribute*hs.count)}else for(let Ws=0;Ws<Sr.locationSize;Ws++)an(Sr.location+Ws);ht.bindBuffer(ht.ARRAY_BUFFER,m0);for(let Ws=0;Ws<Sr.locationSize;Ws++)wn(Sr.location+Ws,zs/Sr.locationSize,k0,vs,zs*h0,zs/Sr.locationSize*Ws*h0,S0)}}else if(Vr!==void 0){const vs=Vr[Es];if(vs!==void 0)switch(vs.length){case 2:ht.vertexAttrib2fv(Sr.location,vs);break;case 3:ht.vertexAttrib3fv(Sr.location,vs);break;case 4:ht.vertexAttrib4fv(Sr.location,vs);break;default:ht.vertexAttrib1fv(Sr.location,vs)}}}}xn()}function er(){$n();for(const Sn in rt){const jn=rt[Sn];for(const ur in jn){const or=jn[ur];for(const Ar in or)Vt(or[Ar].object),delete or[Ar];delete jn[ur]}delete rt[Sn]}}function Nn(Sn){if(rt[Sn.id]===void 0)return;const jn=rt[Sn.id];for(const ur in jn){const or=jn[ur];for(const Ar in or)Vt(or[Ar].object),delete or[Ar];delete jn[ur]}delete rt[Sn.id]}function zn(Sn){for(const jn in rt){const ur=rt[jn];if(ur[Sn.id]===void 0)continue;const or=ur[Sn.id];for(const Ar in or)Vt(or[Ar].object),delete or[Ar];delete ur[Sn.id]}}function $n(){Ln(),At=!0,ut!==at&&(ut=at,Ft(ut.object))}function Ln(){at.geometry=null,at.program=null,at.wireframe=!1}return{setup:wt,reset:$n,resetDefaultState:Ln,dispose:er,releaseStatesOfGeometry:Nn,releaseStatesOfProgram:zn,initAttributes:hn,enableAttribute:an,disableUnusedAttributes:xn}}function sm(ht,c,j){let rt;function at(Ft){rt=Ft}function ut(Ft,Vt){ht.drawArrays(rt,Ft,Vt),j.update(Vt,rt,1)}function At(Ft,Vt,qt){qt!==0&&(ht.drawArraysInstanced(rt,Ft,Vt,qt),j.update(Vt,rt,qt))}function wt(Ft,Vt,qt){if(qt===0)return;const Jt=c.get("WEBGL_multi_draw");if(Jt===null)for(let _i=0;_i<qt;_i++)this.render(Ft[_i],Vt[_i]);else{Jt.multiDrawArraysWEBGL(rt,Ft,0,Vt,0,qt);let _i=0;for(let sn=0;sn<qt;sn++)_i+=Vt[sn];j.update(_i,rt,1)}}function Bt(Ft,Vt,qt,Jt){if(qt===0)return;const _i=c.get("WEBGL_multi_draw");if(_i===null)for(let sn=0;sn<Ft.length;sn++)At(Ft[sn],Vt[sn],Jt[sn]);else{_i.multiDrawArraysInstancedWEBGL(rt,Ft,0,Vt,0,Jt,0,qt);let sn=0;for(let hn=0;hn<qt;hn++)sn+=Vt[hn];for(let hn=0;hn<Jt.length;hn++)j.update(sn,rt,Jt[hn])}}this.setMode=at,this.render=ut,this.renderInstances=At,this.renderMultiDraw=wt,this.renderMultiDrawInstances=Bt}function EE(ht,c,j,rt){let at;function ut(){if(at!==void 0)return at;if(c.has("EXT_texture_filter_anisotropic")===!0){const Nn=c.get("EXT_texture_filter_anisotropic");at=ht.getParameter(Nn.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else at=0;return at}function At(Nn){return!(Nn!==Xn&&rt.convert(Nn)!==ht.getParameter(ht.IMPLEMENTATION_COLOR_READ_FORMAT))}function wt(Nn){const zn=Nn===Lo&&(c.has("EXT_color_buffer_half_float")||c.has("EXT_color_buffer_float"));return!(Nn!==D0&&rt.convert(Nn)!==ht.getParameter(ht.IMPLEMENTATION_COLOR_READ_TYPE)&&Nn!==P0&&!zn)}function Bt(Nn){if(Nn==="highp"){if(ht.getShaderPrecisionFormat(ht.VERTEX_SHADER,ht.HIGH_FLOAT).precision>0&&ht.getShaderPrecisionFormat(ht.FRAGMENT_SHADER,ht.HIGH_FLOAT).precision>0)return"highp";Nn="mediump"}return Nn==="mediump"&&ht.getShaderPrecisionFormat(ht.VERTEX_SHADER,ht.MEDIUM_FLOAT).precision>0&&ht.getShaderPrecisionFormat(ht.FRAGMENT_SHADER,ht.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let Ft=j.precision!==void 0?j.precision:"highp";const Vt=Bt(Ft);Vt!==Ft&&(console.warn("THREE.WebGLRenderer:",Ft,"not supported, using",Vt,"instead."),Ft=Vt);const qt=j.logarithmicDepthBuffer===!0,Jt=ht.getParameter(ht.MAX_TEXTURE_IMAGE_UNITS),_i=ht.getParameter(ht.MAX_VERTEX_TEXTURE_IMAGE_UNITS),sn=ht.getParameter(ht.MAX_TEXTURE_SIZE),hn=ht.getParameter(ht.MAX_CUBE_MAP_TEXTURE_SIZE),an=ht.getParameter(ht.MAX_VERTEX_ATTRIBS),en=ht.getParameter(ht.MAX_VERTEX_UNIFORM_VECTORS),xn=ht.getParameter(ht.MAX_VARYING_VECTORS),wn=ht.getParameter(ht.MAX_FRAGMENT_UNIFORM_VECTORS),En=_i>0,er=ht.getParameter(ht.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:ut,getMaxPrecision:Bt,textureFormatReadable:At,textureTypeReadable:wt,precision:Ft,logarithmicDepthBuffer:qt,maxTextures:Jt,maxVertexTextures:_i,maxTextureSize:sn,maxCubemapSize:hn,maxAttributes:an,maxVertexUniforms:en,maxVaryings:xn,maxFragmentUniforms:wn,vertexTextures:En,maxSamples:er}}function yE(ht){const c=this;let j=null,rt=0,at=!1,ut=!1;const At=new _u,wt=new Ao,Bt={value:null,needsUpdate:!1};this.uniform=Bt,this.numPlanes=0,this.numIntersection=0,this.init=function(qt,Jt){const _i=qt.length!==0||Jt||rt!==0||at;return at=Jt,rt=qt.length,_i},this.beginShadows=function(){ut=!0,Vt(null)},this.endShadows=function(){ut=!1},this.setGlobalState=function(qt,Jt){j=Vt(qt,Jt,0)},this.setState=function(qt,Jt,_i){const sn=qt.clippingPlanes,hn=qt.clipIntersection,an=qt.clipShadows,en=ht.get(qt);if(!at||sn===null||sn.length===0||ut&&!an)ut?Vt(null):Ft();else{const xn=ut?0:rt,wn=xn*4;let En=en.clippingState||null;Bt.value=En,En=Vt(sn,Jt,wn,_i);for(let er=0;er!==wn;++er)En[er]=j[er];en.clippingState=En,this.numIntersection=hn?this.numPlanes:0,this.numPlanes+=xn}};function Ft(){Bt.value!==j&&(Bt.value=j,Bt.needsUpdate=rt>0),c.numPlanes=rt,c.numIntersection=0}function Vt(qt,Jt,_i,sn){const hn=qt!==null?qt.length:0;let an=null;if(hn!==0){if(an=Bt.value,sn!==!0||an===null){const en=_i+hn*4,xn=Jt.matrixWorldInverse;wt.getNormalMatrix(xn),(an===null||an.length<en)&&(an=new Float32Array(en));for(let wn=0,En=_i;wn!==hn;++wn,En+=4)At.copy(qt[wn]).applyMatrix4(xn,wt),At.normal.toArray(an,En),an[En+3]=At.constant}Bt.value=an,Bt.needsUpdate=!0}return c.numPlanes=hn,c.numIntersection=0,an}}function wE(ht){let c=new WeakMap;function j(At,wt){return wt===jt?At.mapping=un:wt===yn&&(At.mapping=Wt),At}function rt(At){if(At&&At.isTexture){const wt=At.mapping;if(wt===jt||wt===yn)if(c.has(At)){const Bt=c.get(At).texture;return j(Bt,At.mapping)}else{const Bt=At.image;if(Bt&&Bt.height>0){const Ft=new em(Bt.height);return Ft.fromEquirectangularTexture(ht,At),c.set(At,Ft),At.addEventListener("dispose",at),j(Ft.texture,At.mapping)}else return null}}return At}function at(At){const wt=At.target;wt.removeEventListener("dispose",at);const Bt=c.get(wt);Bt!==void 0&&(c.delete(wt),Bt.dispose())}function ut(){c=new WeakMap}return{get:rt,dispose:ut}}class Op extends Ip{constructor(c=-1,j=1,rt=1,at=-1,ut=.1,At=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=c,this.right=j,this.top=rt,this.bottom=at,this.near=ut,this.far=At,this.updateProjectionMatrix()}copy(c,j){return super.copy(c,j),this.left=c.left,this.right=c.right,this.top=c.top,this.bottom=c.bottom,this.near=c.near,this.far=c.far,this.zoom=c.zoom,this.view=c.view===null?null:Object.assign({},c.view),this}setViewOffset(c,j,rt,at,ut,At){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=c,this.view.fullHeight=j,this.view.offsetX=rt,this.view.offsetY=at,this.view.width=ut,this.view.height=At,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const c=(this.right-this.left)/(2*this.zoom),j=(this.top-this.bottom)/(2*this.zoom),rt=(this.right+this.left)/2,at=(this.top+this.bottom)/2;let ut=rt-c,At=rt+c,wt=at+j,Bt=at-j;if(this.view!==null&&this.view.enabled){const Ft=(this.right-this.left)/this.view.fullWidth/this.zoom,Vt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ut+=Ft*this.view.offsetX,At=ut+Ft*this.view.width,wt-=Vt*this.view.offsetY,Bt=wt-Vt*this.view.height}this.projectionMatrix.makeOrthographic(ut,At,wt,Bt,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(c){const j=super.toJSON(c);return j.object.zoom=this.zoom,j.object.left=this.left,j.object.right=this.right,j.object.top=this.top,j.object.bottom=this.bottom,j.object.near=this.near,j.object.far=this.far,this.view!==null&&(j.object.view=Object.assign({},this.view)),j}}const xu=4,o3=[.125,.215,.35,.446,.526,.582],Q1=20,Fp=new Op,a3=new Os;let kp=null,om=0,Ul=0,Er=!1;const E0=(1+Math.sqrt(5))/2,M0=1/E0,V1=[new kn(-E0,M0,0),new kn(E0,M0,0),new kn(-M0,0,E0),new kn(M0,0,E0),new kn(0,E0,-M0),new kn(0,E0,M0),new kn(-1,1,-1),new kn(1,1,-1),new kn(-1,1,1),new kn(1,1,1)];class B0{constructor(c){this._renderer=c,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(c,j=0,rt=.1,at=100){kp=this._renderer.getRenderTarget(),om=this._renderer.getActiveCubeFace(),Ul=this._renderer.getActiveMipmapLevel(),Er=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const ut=this._allocateTargets();return ut.depthBuffer=!0,this._sceneToCubeUV(c,rt,at,ut),j>0&&this._blur(ut,0,0,j),this._applyPMREM(ut),this._cleanup(ut),ut}fromEquirectangular(c,j=null){return this._fromTexture(c,j)}fromCubemap(c,j=null){return this._fromTexture(c,j)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=z2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=CE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(c){this._lodMax=Math.floor(Math.log2(c)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let c=0;c<this._lodPlanes.length;c++)this._lodPlanes[c].dispose()}_cleanup(c){this._renderer.setRenderTarget(kp,om,Ul),this._renderer.xr.enabled=Er,c.scissorTest=!1,Np(c,0,0,c.width,c.height)}_fromTexture(c,j){c.mapping===un||c.mapping===Wt?this._setSize(c.image.length===0?16:c.image[0].width||c.image[0].image.width):this._setSize(c.image.width/4),kp=this._renderer.getRenderTarget(),om=this._renderer.getActiveCubeFace(),Ul=this._renderer.getActiveMipmapLevel(),Er=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const rt=j||this._allocateTargets();return this._textureToCubeUV(c,rt),this._applyPMREM(rt),this._cleanup(rt),rt}_allocateTargets(){const c=3*Math.max(this._cubeSize,112),j=4*this._cubeSize,rt={magFilter:to,minFilter:to,generateMipmaps:!1,type:Lo,format:Xn,colorSpace:B1,depthBuffer:!1},at=am(c,j,rt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==c||this._pingPongRenderTarget.height!==j){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=am(c,j,rt);const{_lodMax:ut}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=t4(ut)),this._blurMaterial=i4(ut,c,j)}return at}_compileMaterial(c){const j=new Al(this._lodPlanes[0],c);this._renderer.compile(j,Fp)}_sceneToCubeUV(c,j,rt,at){const wt=new J0(90,1,j,rt),Bt=[1,-1,1,1,1,1],Ft=[1,1,1,-1,-1,-1],Vt=this._renderer,qt=Vt.autoClear,Jt=Vt.toneMapping;Vt.getClearColor(a3),Vt.toneMapping=f0,Vt.autoClear=!1;const _i=new vu({name:"PMREM.Background",side:Dt,depthWrite:!1,depthTest:!1}),sn=new Al(new Vu,_i);let hn=!1;const an=c.background;an?an.isColor&&(_i.color.copy(an),c.background=null,hn=!0):(_i.color.copy(a3),hn=!0);for(let en=0;en<6;en++){const xn=en%3;xn===0?(wt.up.set(0,Bt[en],0),wt.lookAt(Ft[en],0,0)):xn===1?(wt.up.set(0,0,Bt[en]),wt.lookAt(0,Ft[en],0)):(wt.up.set(0,Bt[en],0),wt.lookAt(0,0,Ft[en]));const wn=this._cubeSize;Np(at,xn*wn,en>2?wn:0,wn,wn),Vt.setRenderTarget(at),hn&&Vt.render(sn,wt),Vt.render(c,wt)}sn.geometry.dispose(),sn.material.dispose(),Vt.toneMapping=Jt,Vt.autoClear=qt,c.background=an}_textureToCubeUV(c,j){const rt=this._renderer,at=c.mapping===un||c.mapping===Wt;at?(this._cubemapMaterial===null&&(this._cubemapMaterial=z2()),this._cubemapMaterial.uniforms.flipEnvMap.value=c.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=CE());const ut=at?this._cubemapMaterial:this._equirectMaterial,At=new Al(this._lodPlanes[0],ut),wt=ut.uniforms;wt.envMap.value=c;const Bt=this._cubeSize;Np(j,0,0,3*Bt,2*Bt),rt.setRenderTarget(j),rt.render(At,Fp)}_applyPMREM(c){const j=this._renderer,rt=j.autoClear;j.autoClear=!1;const at=this._lodPlanes.length;for(let ut=1;ut<at;ut++){const At=Math.sqrt(this._sigmas[ut]*this._sigmas[ut]-this._sigmas[ut-1]*this._sigmas[ut-1]),wt=V1[(at-ut-1)%V1.length];this._blur(c,ut-1,ut,At,wt)}j.autoClear=rt}_blur(c,j,rt,at,ut){const At=this._pingPongRenderTarget;this._halfBlur(c,At,j,rt,at,"latitudinal",ut),this._halfBlur(At,c,rt,rt,at,"longitudinal",ut)}_halfBlur(c,j,rt,at,ut,At,wt){const Bt=this._renderer,Ft=this._blurMaterial;At!=="latitudinal"&&At!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Vt=3,qt=new Al(this._lodPlanes[at],Ft),Jt=Ft.uniforms,_i=this._sizeLods[rt]-1,sn=isFinite(ut)?Math.PI/(2*_i):2*Math.PI/(2*Q1-1),hn=ut/sn,an=isFinite(ut)?1+Math.floor(Vt*hn):Q1;an>Q1&&console.warn(`sigmaRadians, ${ut}, is too large and will clip, as it requested ${an} samples when the maximum is set to ${Q1}`);const en=[];let xn=0;for(let zn=0;zn<Q1;++zn){const $n=zn/hn,Ln=Math.exp(-$n*$n/2);en.push(Ln),zn===0?xn+=Ln:zn<an&&(xn+=2*Ln)}for(let zn=0;zn<en.length;zn++)en[zn]=en[zn]/xn;Jt.envMap.value=c.texture,Jt.samples.value=an,Jt.weights.value=en,Jt.latitudinal.value=At==="latitudinal",wt&&(Jt.poleAxis.value=wt);const{_lodMax:wn}=this;Jt.dTheta.value=sn,Jt.mipInt.value=wn-rt;const En=this._sizeLods[at],er=3*En*(at>wn-xu?at-wn+xu:0),Nn=4*(this._cubeSize-En);Np(j,er,Nn,3*En,2*En),Bt.setRenderTarget(j),Bt.render(qt,Fp)}}function t4(ht){const c=[],j=[],rt=[];let at=ht;const ut=ht-xu+1+o3.length;for(let At=0;At<ut;At++){const wt=Math.pow(2,at);j.push(wt);let Bt=1/wt;At>ht-xu?Bt=o3[At-ht+xu-1]:At===0&&(Bt=0),rt.push(Bt);const Ft=1/(wt-2),Vt=-Ft,qt=1+Ft,Jt=[Vt,Vt,qt,Vt,qt,qt,Vt,Vt,qt,qt,Vt,qt],_i=6,sn=6,hn=3,an=2,en=1,xn=new Float32Array(hn*sn*_i),wn=new Float32Array(an*sn*_i),En=new Float32Array(en*sn*_i);for(let Nn=0;Nn<_i;Nn++){const zn=Nn%3*2/3-1,$n=Nn>2?0:-1,Ln=[zn,$n,0,zn+2/3,$n,0,zn+2/3,$n+1,0,zn,$n,0,zn+2/3,$n+1,0,zn,$n+1,0];xn.set(Ln,hn*sn*Nn),wn.set(Jt,an*sn*Nn);const Sn=[Nn,Nn,Nn,Nn,Nn,Nn];En.set(Sn,en*sn*Nn)}const er=new Bo;er.setAttribute("position",new a0(xn,hn)),er.setAttribute("uv",new a0(wn,an)),er.setAttribute("faceIndex",new a0(En,en)),c.push(er),at>xu&&at--}return{lodPlanes:c,sizeLods:j,sigmas:rt}}function am(ht,c,j){const rt=new r1(ht,c,j);return rt.texture.mapping=Rn,rt.texture.name="PMREM.cubeUv",rt.scissorTest=!0,rt}function Np(ht,c,j,rt,at){ht.viewport.set(c,j,rt,at),ht.scissor.set(c,j,rt,at)}function i4(ht,c,j){const rt=new Float32Array(Q1),at=new kn(0,1,0);return new b1({name:"SphericalGaussianBlur",defines:{n:Q1,CUBEUV_TEXEL_WIDTH:1/c,CUBEUV_TEXEL_HEIGHT:1/j,CUBEUV_MAX_MIP:`${ht}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:rt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:at}},vertexShader:v2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ut,depthTest:!1,depthWrite:!1})}function CE(){return new b1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:v2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ut,depthTest:!1,depthWrite:!1})}function z2(){return new b1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:v2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ut,depthTest:!1,depthWrite:!1})}function v2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lm(ht){let c=new WeakMap,j=null;function rt(wt){if(wt&&wt.isTexture){const Bt=wt.mapping,Ft=Bt===jt||Bt===yn,Vt=Bt===un||Bt===Wt;if(Ft||Vt){let qt=c.get(wt);const Jt=qt!==void 0?qt.texture.pmremVersion:0;if(wt.isRenderTargetTexture&&wt.pmremVersion!==Jt)return j===null&&(j=new B0(ht)),qt=Ft?j.fromEquirectangular(wt,qt):j.fromCubemap(wt,qt),qt.texture.pmremVersion=wt.pmremVersion,c.set(wt,qt),qt.texture;if(qt!==void 0)return qt.texture;{const _i=wt.image;return Ft&&_i&&_i.height>0||Vt&&_i&&at(_i)?(j===null&&(j=new B0(ht)),qt=Ft?j.fromEquirectangular(wt):j.fromCubemap(wt),qt.texture.pmremVersion=wt.pmremVersion,c.set(wt,qt),wt.addEventListener("dispose",ut),qt.texture):null}}}return wt}function at(wt){let Bt=0;const Ft=6;for(let Vt=0;Vt<Ft;Vt++)wt[Vt]!==void 0&&Bt++;return Bt===Ft}function ut(wt){const Bt=wt.target;Bt.removeEventListener("dispose",ut);const Ft=c.get(Bt);Ft!==void 0&&(c.delete(Bt),Ft.dispose())}function At(){c=new WeakMap,j!==null&&(j.dispose(),j=null)}return{get:rt,dispose:At}}function Up(ht){const c={};function j(rt){if(c[rt]!==void 0)return c[rt];let at;switch(rt){case"WEBGL_depth_texture":at=ht.getExtension("WEBGL_depth_texture")||ht.getExtension("MOZ_WEBGL_depth_texture")||ht.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":at=ht.getExtension("EXT_texture_filter_anisotropic")||ht.getExtension("MOZ_EXT_texture_filter_anisotropic")||ht.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":at=ht.getExtension("WEBGL_compressed_texture_s3tc")||ht.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ht.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":at=ht.getExtension("WEBGL_compressed_texture_pvrtc")||ht.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:at=ht.getExtension(rt)}return c[rt]=at,at}return{has:function(rt){return j(rt)!==null},init:function(){j("EXT_color_buffer_float"),j("WEBGL_clip_cull_distance"),j("OES_texture_float_linear"),j("EXT_color_buffer_half_float"),j("WEBGL_multisampled_render_to_texture"),j("WEBGL_render_shared_exponent")},get:function(rt){const at=j(rt);return at===null&&console.warn("THREE.WebGLRenderer: "+rt+" extension not supported."),at}}}function _E(ht,c,j,rt){const at={},ut=new WeakMap;function At(qt){const Jt=qt.target;Jt.index!==null&&c.remove(Jt.index);for(const sn in Jt.attributes)c.remove(Jt.attributes[sn]);for(const sn in Jt.morphAttributes){const hn=Jt.morphAttributes[sn];for(let an=0,en=hn.length;an<en;an++)c.remove(hn[an])}Jt.removeEventListener("dispose",At),delete at[Jt.id];const _i=ut.get(Jt);_i&&(c.remove(_i),ut.delete(Jt)),rt.releaseStatesOfGeometry(Jt),Jt.isInstancedBufferGeometry===!0&&delete Jt._maxInstanceCount,j.memory.geometries--}function wt(qt,Jt){return at[Jt.id]===!0||(Jt.addEventListener("dispose",At),at[Jt.id]=!0,j.memory.geometries++),Jt}function Bt(qt){const Jt=qt.attributes;for(const sn in Jt)c.update(Jt[sn],ht.ARRAY_BUFFER);const _i=qt.morphAttributes;for(const sn in _i){const hn=_i[sn];for(let an=0,en=hn.length;an<en;an++)c.update(hn[an],ht.ARRAY_BUFFER)}}function Ft(qt){const Jt=[],_i=qt.index,sn=qt.attributes.position;let hn=0;if(_i!==null){const xn=_i.array;hn=_i.version;for(let wn=0,En=xn.length;wn<En;wn+=3){const er=xn[wn+0],Nn=xn[wn+1],zn=xn[wn+2];Jt.push(er,Nn,Nn,zn,zn,er)}}else if(sn!==void 0){const xn=sn.array;hn=sn.version;for(let wn=0,En=xn.length/3-1;wn<En;wn+=3){const er=wn+0,Nn=wn+1,zn=wn+2;Jt.push(er,Nn,Nn,zn,zn,er)}}else return;const an=new(B2(Jt)?gu:qA)(Jt,1);an.version=hn;const en=ut.get(qt);en&&c.remove(en),ut.set(qt,an)}function Vt(qt){const Jt=ut.get(qt);if(Jt){const _i=qt.index;_i!==null&&Jt.version<_i.version&&Ft(qt)}else Ft(qt);return ut.get(qt)}return{get:wt,update:Bt,getWireframeAttribute:Vt}}function xE(ht,c,j){let rt;function at(Jt){rt=Jt}let ut,At;function wt(Jt){ut=Jt.type,At=Jt.bytesPerElement}function Bt(Jt,_i){ht.drawElements(rt,_i,ut,Jt*At),j.update(_i,rt,1)}function Ft(Jt,_i,sn){sn!==0&&(ht.drawElementsInstanced(rt,_i,ut,Jt*At,sn),j.update(_i,rt,sn))}function Vt(Jt,_i,sn){if(sn===0)return;const hn=c.get("WEBGL_multi_draw");if(hn===null)for(let an=0;an<sn;an++)this.render(Jt[an]/At,_i[an]);else{hn.multiDrawElementsWEBGL(rt,_i,0,ut,Jt,0,sn);let an=0;for(let en=0;en<sn;en++)an+=_i[en];j.update(an,rt,1)}}function qt(Jt,_i,sn,hn){if(sn===0)return;const an=c.get("WEBGL_multi_draw");if(an===null)for(let en=0;en<Jt.length;en++)Ft(Jt[en]/At,_i[en],hn[en]);else{an.multiDrawElementsInstancedWEBGL(rt,_i,0,ut,Jt,0,hn,0,sn);let en=0;for(let xn=0;xn<sn;xn++)en+=_i[xn];for(let xn=0;xn<hn.length;xn++)j.update(en,rt,hn[xn])}}this.setMode=at,this.setIndex=wt,this.render=Bt,this.renderInstances=Ft,this.renderMultiDraw=Vt,this.renderMultiDrawInstances=qt}function bE(ht){const c={geometries:0,textures:0},j={frame:0,calls:0,triangles:0,points:0,lines:0};function rt(ut,At,wt){switch(j.calls++,At){case ht.TRIANGLES:j.triangles+=wt*(ut/3);break;case ht.LINES:j.lines+=wt*(ut/2);break;case ht.LINE_STRIP:j.lines+=wt*(ut-1);break;case ht.LINE_LOOP:j.lines+=wt*ut;break;case ht.POINTS:j.points+=wt*ut;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",At);break}}function at(){j.calls=0,j.triangles=0,j.points=0,j.lines=0}return{memory:c,render:j,programs:null,autoReset:!0,reset:at,update:rt}}function ME(ht,c,j){const rt=new WeakMap,at=new r0;function ut(At,wt,Bt){const Ft=At.morphTargetInfluences,Vt=wt.morphAttributes.position||wt.morphAttributes.normal||wt.morphAttributes.color,qt=Vt!==void 0?Vt.length:0;let Jt=rt.get(wt);if(Jt===void 0||Jt.count!==qt){let _i=function(){$n.dispose(),rt.delete(wt),wt.removeEventListener("dispose",_i)};Jt!==void 0&&Jt.texture.dispose();const sn=wt.morphAttributes.position!==void 0,hn=wt.morphAttributes.normal!==void 0,an=wt.morphAttributes.color!==void 0,en=wt.morphAttributes.position||[],xn=wt.morphAttributes.normal||[],wn=wt.morphAttributes.color||[];let En=0;sn===!0&&(En=1),hn===!0&&(En=2),an===!0&&(En=3);let er=wt.attributes.position.count*En,Nn=1;er>c.maxTextureSize&&(Nn=Math.ceil(er/c.maxTextureSize),er=c.maxTextureSize);const zn=new Float32Array(er*Nn*4*qt),$n=new t2(zn,er,Nn,qt);$n.type=P0,$n.needsUpdate=!0;const Ln=En*4;for(let Sn=0;Sn<qt;Sn++){const jn=en[Sn],ur=xn[Sn],or=wn[Sn],Ar=er*Nn*4*Sn;for(let br=0;br<jn.count;br++){const Vr=br*Ln;sn===!0&&(at.fromBufferAttribute(jn,br),zn[Ar+Vr+0]=at.x,zn[Ar+Vr+1]=at.y,zn[Ar+Vr+2]=at.z,zn[Ar+Vr+3]=0),hn===!0&&(at.fromBufferAttribute(ur,br),zn[Ar+Vr+4]=at.x,zn[Ar+Vr+5]=at.y,zn[Ar+Vr+6]=at.z,zn[Ar+Vr+7]=0),an===!0&&(at.fromBufferAttribute(or,br),zn[Ar+Vr+8]=at.x,zn[Ar+Vr+9]=at.y,zn[Ar+Vr+10]=at.z,zn[Ar+Vr+11]=or.itemSize===4?at.w:1)}}Jt={count:qt,texture:$n,size:new Wr(er,Nn)},rt.set(wt,Jt),wt.addEventListener("dispose",_i)}if(At.isInstancedMesh===!0&&At.morphTexture!==null)Bt.getUniforms().setValue(ht,"morphTexture",At.morphTexture,j);else{let _i=0;for(let hn=0;hn<Ft.length;hn++)_i+=Ft[hn];const sn=wt.morphTargetsRelative?1:1-_i;Bt.getUniforms().setValue(ht,"morphTargetBaseInfluence",sn),Bt.getUniforms().setValue(ht,"morphTargetInfluences",Ft)}Bt.getUniforms().setValue(ht,"morphTargetsTexture",Jt.texture,j),Bt.getUniforms().setValue(ht,"morphTargetsTextureSize",Jt.size)}return{update:ut}}class SE{constructor(c,j,rt){if(this.renderer=c,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=rt,this.extensions=j,this.available=this.extensions.has("OCULUS_multiview"),this.available){const ut=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(ut.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var at=0;at<this.maxNumViews;at++)this.mat4[at]=new Vs,this.mat3[at]=new Ao}}getCameraArray(c){return c.isArrayCamera?c.cameras:(this.cameraArray[0]=c,this.cameraArray)}updateCameraProjectionMatricesUniform(c,j){for(var rt=this.getCameraArray(c),at=0;at<rt.length;at++)this.mat4[at].copy(rt[at].projectionMatrix);j.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(c,j){for(var rt=this.getCameraArray(c),at=0;at<rt.length;at++)this.mat4[at].copy(rt[at].matrixWorldInverse);j.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(c,j,rt){for(var at=this.getCameraArray(j),ut=0;ut<at.length;ut++)this.mat4[ut].multiplyMatrices(at[ut].matrixWorldInverse,c.matrixWorld),this.mat3[ut].getNormalMatrix(this.mat4[ut]);rt.setValue(this.gl,"modelViewMatrices",this.mat4),rt.setValue(this.gl,"normalMatrices",this.mat3)}}function TE(ht,c,j,rt){let at=new WeakMap;function ut(Bt){const Ft=rt.render.frame,Vt=Bt.geometry,qt=c.get(Bt,Vt);if(at.get(qt)!==Ft&&(c.update(qt),at.set(qt,Ft)),Bt.isInstancedMesh&&(Bt.hasEventListener("dispose",wt)===!1&&Bt.addEventListener("dispose",wt),at.get(Bt)!==Ft&&(j.update(Bt.instanceMatrix,ht.ARRAY_BUFFER),Bt.instanceColor!==null&&j.update(Bt.instanceColor,ht.ARRAY_BUFFER),at.set(Bt,Ft))),Bt.isSkinnedMesh){const Jt=Bt.skeleton;at.get(Jt)!==Ft&&(Jt.update(),at.set(Jt,Ft))}return qt}function At(){at=new WeakMap}function wt(Bt){const Ft=Bt.target;Ft.removeEventListener("dispose",wt),j.remove(Ft.instanceMatrix),Ft.instanceColor!==null&&j.remove(Ft.instanceColor)}return{update:ut,dispose:At}}class cm extends C0{constructor(c,j,rt,at,ut,At,wt,Bt,Ft,Vt){if(Vt=Vt!==void 0?Vt:yr,Vt!==yr&&Vt!==Nr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");rt===void 0&&Vt===yr&&(rt=Ql),rt===void 0&&Vt===Nr&&(rt=y1),super(null,at,ut,At,wt,Bt,Vt,rt,Ft),this.isDepthTexture=!0,this.image={width:c,height:j},this.magFilter=wt!==void 0?wt:ps,this.minFilter=Bt!==void 0?Bt:ps,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(c){return super.copy(c),this.compareFunction=c.compareFunction,this}toJSON(c){const j=super.toJSON(c);return this.compareFunction!==null&&(j.compareFunction=this.compareFunction),j}}const l3=new C0,c3=new cm(1,1);c3.compareFunction=T2;const u3=new t2,h3=new yo,d3=new H2,f3=[],p3=[],A3=new Float32Array(16),m3=new Float32Array(9),v3=new Float32Array(4);function g2(ht,c,j){const rt=ht[0];if(rt<=0||rt>0)return ht;const at=c*j;let ut=f3[at];if(ut===void 0&&(ut=new Float32Array(at),f3[at]=ut),c!==0){rt.toArray(ut,0);for(let At=1,wt=0;At!==c;++At)wt+=j,ht[At].toArray(ut,wt)}return ut}function Cl(ht,c){if(ht.length!==c.length)return!1;for(let j=0,rt=ht.length;j<rt;j++)if(ht[j]!==c[j])return!1;return!0}function _l(ht,c){for(let j=0,rt=c.length;j<rt;j++)ht[j]=c[j]}function Hp(ht,c){let j=p3[c];j===void 0&&(j=new Int32Array(c),p3[c]=j);for(let rt=0;rt!==c;++rt)j[rt]=ht.allocateTextureUnit();return j}function RE(ht,c){const j=this.cache;j[0]!==c&&(ht.uniform1f(this.addr,c),j[0]=c)}function g3(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y)&&(ht.uniform2f(this.addr,c.x,c.y),j[0]=c.x,j[1]=c.y);else{if(Cl(j,c))return;ht.uniform2fv(this.addr,c),_l(j,c)}}function IE(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z)&&(ht.uniform3f(this.addr,c.x,c.y,c.z),j[0]=c.x,j[1]=c.y,j[2]=c.z);else if(c.r!==void 0)(j[0]!==c.r||j[1]!==c.g||j[2]!==c.b)&&(ht.uniform3f(this.addr,c.r,c.g,c.b),j[0]=c.r,j[1]=c.g,j[2]=c.b);else{if(Cl(j,c))return;ht.uniform3fv(this.addr,c),_l(j,c)}}function Xl(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z||j[3]!==c.w)&&(ht.uniform4f(this.addr,c.x,c.y,c.z,c.w),j[0]=c.x,j[1]=c.y,j[2]=c.z,j[3]=c.w);else{if(Cl(j,c))return;ht.uniform4fv(this.addr,c),_l(j,c)}}function BE(ht,c){const j=this.cache,rt=c.elements;if(rt===void 0){if(Cl(j,c))return;ht.uniformMatrix2fv(this.addr,!1,c),_l(j,c)}else{if(Cl(j,rt))return;v3.set(rt),ht.uniformMatrix2fv(this.addr,!1,v3),_l(j,rt)}}function LE(ht,c){const j=this.cache,rt=c.elements;if(rt===void 0){if(Cl(j,c))return;ht.uniformMatrix3fv(this.addr,!1,c),_l(j,c)}else{if(Cl(j,rt))return;m3.set(rt),ht.uniformMatrix3fv(this.addr,!1,m3),_l(j,rt)}}function E3(ht,c){const j=this.cache,rt=c.elements;if(rt===void 0){if(Cl(j,c))return;ht.uniformMatrix4fv(this.addr,!1,c),_l(j,c)}else{if(Cl(j,rt))return;A3.set(rt),ht.uniformMatrix4fv(this.addr,!1,A3),_l(j,rt)}}function DE(ht,c){const j=this.cache;j[0]!==c&&(ht.uniform1i(this.addr,c),j[0]=c)}function PE(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y)&&(ht.uniform2i(this.addr,c.x,c.y),j[0]=c.x,j[1]=c.y);else{if(Cl(j,c))return;ht.uniform2iv(this.addr,c),_l(j,c)}}function W2(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z)&&(ht.uniform3i(this.addr,c.x,c.y,c.z),j[0]=c.x,j[1]=c.y,j[2]=c.z);else{if(Cl(j,c))return;ht.uniform3iv(this.addr,c),_l(j,c)}}function OE(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z||j[3]!==c.w)&&(ht.uniform4i(this.addr,c.x,c.y,c.z,c.w),j[0]=c.x,j[1]=c.y,j[2]=c.z,j[3]=c.w);else{if(Cl(j,c))return;ht.uniform4iv(this.addr,c),_l(j,c)}}function v1(ht,c){const j=this.cache;j[0]!==c&&(ht.uniform1ui(this.addr,c),j[0]=c)}function Gp(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y)&&(ht.uniform2ui(this.addr,c.x,c.y),j[0]=c.x,j[1]=c.y);else{if(Cl(j,c))return;ht.uniform2uiv(this.addr,c),_l(j,c)}}function FE(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z)&&(ht.uniform3ui(this.addr,c.x,c.y,c.z),j[0]=c.x,j[1]=c.y,j[2]=c.z);else{if(Cl(j,c))return;ht.uniform3uiv(this.addr,c),_l(j,c)}}function um(ht,c){const j=this.cache;if(c.x!==void 0)(j[0]!==c.x||j[1]!==c.y||j[2]!==c.z||j[3]!==c.w)&&(ht.uniform4ui(this.addr,c.x,c.y,c.z,c.w),j[0]=c.x,j[1]=c.y,j[2]=c.z,j[3]=c.w);else{if(Cl(j,c))return;ht.uniform4uiv(this.addr,c),_l(j,c)}}function y3(ht,c,j){const rt=this.cache,at=j.allocateTextureUnit();rt[0]!==at&&(ht.uniform1i(this.addr,at),rt[0]=at);const ut=this.type===ht.SAMPLER_2D_SHADOW?c3:l3;j.setTexture2D(c||ut,at)}function w3(ht,c,j){const rt=this.cache,at=j.allocateTextureUnit();rt[0]!==at&&(ht.uniform1i(this.addr,at),rt[0]=at),j.setTexture3D(c||h3,at)}function K2(ht,c,j){const rt=this.cache,at=j.allocateTextureUnit();rt[0]!==at&&(ht.uniform1i(this.addr,at),rt[0]=at),j.setTextureCube(c||d3,at)}function C3(ht,c,j){const rt=this.cache,at=j.allocateTextureUnit();rt[0]!==at&&(ht.uniform1i(this.addr,at),rt[0]=at),j.setTexture2DArray(c||u3,at)}function Qp(ht){switch(ht){case 5126:return RE;case 35664:return g3;case 35665:return IE;case 35666:return Xl;case 35674:return BE;case 35675:return LE;case 35676:return E3;case 5124:case 35670:return DE;case 35667:case 35671:return PE;case 35668:case 35672:return W2;case 35669:case 35673:return OE;case 5125:return v1;case 36294:return Gp;case 36295:return FE;case 36296:return um;case 35678:case 36198:case 36298:case 36306:case 35682:return y3;case 35679:case 36299:case 36307:return w3;case 35680:case 36300:case 36308:case 36293:return K2;case 36289:case 36303:case 36311:case 36292:return C3}}function kE(ht,c){ht.uniform1fv(this.addr,c)}function _3(ht,c){const j=g2(c,this.size,2);ht.uniform2fv(this.addr,j)}function NE(ht,c){const j=g2(c,this.size,3);ht.uniform3fv(this.addr,j)}function UE(ht,c){const j=g2(c,this.size,4);ht.uniform4fv(this.addr,j)}function X2(ht,c){const j=g2(c,this.size,4);ht.uniformMatrix2fv(this.addr,!1,j)}function z1(ht,c){const j=g2(c,this.size,9);ht.uniformMatrix3fv(this.addr,!1,j)}function Vp(ht,c){const j=g2(c,this.size,16);ht.uniformMatrix4fv(this.addr,!1,j)}function a(ht,c){ht.uniform1iv(this.addr,c)}function d(ht,c){ht.uniform2iv(this.addr,c)}function _(ht,c){ht.uniform3iv(this.addr,c)}function h(ht,c){ht.uniform4iv(this.addr,c)}function o(ht,c){ht.uniform1uiv(this.addr,c)}function s(ht,c){ht.uniform2uiv(this.addr,c)}function b(ht,c){ht.uniform3uiv(this.addr,c)}function g(ht,c){ht.uniform4uiv(this.addr,c)}function _e(ht,c,j){const rt=this.cache,at=c.length,ut=Hp(j,at);Cl(rt,ut)||(ht.uniform1iv(this.addr,ut),_l(rt,ut));for(let At=0;At!==at;++At)j.setTexture2D(c[At]||l3,ut[At])}function tt(ht,c,j){const rt=this.cache,at=c.length,ut=Hp(j,at);Cl(rt,ut)||(ht.uniform1iv(this.addr,ut),_l(rt,ut));for(let At=0;At!==at;++At)j.setTexture3D(c[At]||h3,ut[At])}function nt(ht,c,j){const rt=this.cache,at=c.length,ut=Hp(j,at);Cl(rt,ut)||(ht.uniform1iv(this.addr,ut),_l(rt,ut));for(let At=0;At!==at;++At)j.setTextureCube(c[At]||d3,ut[At])}function lt(ht,c,j){const rt=this.cache,at=c.length,ut=Hp(j,at);Cl(rt,ut)||(ht.uniform1iv(this.addr,ut),_l(rt,ut));for(let At=0;At!==at;++At)j.setTexture2DArray(c[At]||u3,ut[At])}function ft(ht){switch(ht){case 5126:return kE;case 35664:return _3;case 35665:return NE;case 35666:return UE;case 35674:return X2;case 35675:return z1;case 35676:return Vp;case 5124:case 35670:return a;case 35667:case 35671:return d;case 35668:case 35672:return _;case 35669:case 35673:return h;case 5125:return o;case 36294:return s;case 36295:return b;case 36296:return g;case 35678:case 36198:case 36298:case 36306:case 35682:return _e;case 35679:case 36299:case 36307:return tt;case 35680:case 36300:case 36308:case 36293:return nt;case 36289:case 36303:case 36311:case 36292:return lt}}class yt{constructor(c,j,rt){this.id=c,this.addr=rt,this.cache=[],this.type=j.type,this.setValue=Qp(j.type)}}class _t{constructor(c,j,rt){this.id=c,this.addr=rt,this.cache=[],this.type=j.type,this.size=j.size,this.setValue=ft(j.type)}}class Kt{constructor(c){this.id=c,this.seq=[],this.map={}}setValue(c,j,rt){const at=this.seq;for(let ut=0,At=at.length;ut!==At;++ut){const wt=at[ut];wt.setValue(c,j[wt.id],rt)}}}const Nt=/(\w+)(\])?(\[|\.)?/g;function Pt(ht,c){ht.seq.push(c),ht.map[c.id]=c}function Ot(ht,c,j){const rt=ht.name,at=rt.length;for(Nt.lastIndex=0;;){const ut=Nt.exec(rt),At=Nt.lastIndex;let wt=ut[1];const Bt=ut[2]==="]",Ft=ut[3];if(Bt&&(wt=wt|0),Ft===void 0||Ft==="["&&At+2===at){Pt(j,Ft===void 0?new yt(wt,ht,c):new _t(wt,ht,c));break}else{let qt=j.map[wt];qt===void 0&&(qt=new Kt(wt),Pt(j,qt)),j=qt}}}class zt{constructor(c,j){this.seq=[],this.map={};const rt=c.getProgramParameter(j,c.ACTIVE_UNIFORMS);for(let at=0;at<rt;++at){const ut=c.getActiveUniform(j,at),At=c.getUniformLocation(j,ut.name);Ot(ut,At,this)}}setValue(c,j,rt,at){const ut=this.map[j];ut!==void 0&&ut.setValue(c,rt,at)}setOptional(c,j,rt){const at=j[rt];at!==void 0&&this.setValue(c,rt,at)}static upload(c,j,rt,at){for(let ut=0,At=j.length;ut!==At;++ut){const wt=j[ut],Bt=rt[wt.id];Bt.needsUpdate!==!1&&wt.setValue(c,Bt.value,at)}}static seqWithValue(c,j){const rt=[];for(let at=0,ut=c.length;at!==ut;++at){const At=c[at];At.id in j&&rt.push(At)}return rt}}function $t(ht,c,j){const rt=ht.createShader(c);return ht.shaderSource(rt,j),ht.compileShader(rt),rt}const Yt=37297;let kt=0;function Lt(ht,c){const j=ht.split(`
`),rt=[],at=Math.max(c-6,0),ut=Math.min(c+6,j.length);for(let At=at;At<ut;At++){const wt=At+1;rt.push(`${wt===c?">":" "} ${wt}: ${j[At]}`)}return rt.join(`
`)}function cn(ht){const c=u0.getPrimaries(u0.workingColorSpace),j=u0.getPrimaries(ht);let rt;switch(c===j?rt="":c===Lu&&j===Bu?rt="LinearDisplayP3ToLinearSRGB":c===Bu&&j===Lu&&(rt="LinearSRGBToLinearDisplayP3"),ht){case B1:case Ru:return[rt,"LinearTransferOETF"];case jo:case ju:return[rt,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",ht),[rt,"LinearTransferOETF"]}}function Yn(ht,c,j){const rt=ht.getShaderParameter(c,ht.COMPILE_STATUS),at=ht.getShaderInfoLog(c).trim();if(rt&&at==="")return"";const ut=/ERROR: 0:(\d+)/.exec(at);if(ut){const At=parseInt(ut[1]);return j.toUpperCase()+`

`+at+`

`+Lt(ht.getShaderSource(c),At)}else return at}function ir(ht,c){const j=cn(c);return`vec4 ${ht}( vec4 value ) { return ${j[0]}( ${j[1]}( value ) ); }`}function sr(ht,c){let j;switch(c){case Pl:j="Linear";break;case na:j="Reinhard";break;case p0:j="OptimizedCineon";break;case es:j="ACESFilmic";break;case bn:j="AgX";break;case Hn:j="Neutral";break;case Mn:j="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",c),j="Linear"}return"vec3 "+ht+"( vec3 color ) { return "+j+"ToneMapping( color ); }"}function dr(ht){return[ht.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",ht.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(wr).join(`
`)}function Jn(ht){const c=[];for(const j in ht){const rt=ht[j];rt!==!1&&c.push("#define "+j+" "+rt)}return c.join(`
`)}function Hr(ht,c){const j={},rt=ht.getProgramParameter(c,ht.ACTIVE_ATTRIBUTES);for(let at=0;at<rt;at++){const ut=ht.getActiveAttrib(c,at),At=ut.name;let wt=1;ut.type===ht.FLOAT_MAT2&&(wt=2),ut.type===ht.FLOAT_MAT3&&(wt=3),ut.type===ht.FLOAT_MAT4&&(wt=4),j[At]={type:ut.type,location:ht.getAttribLocation(c,At),locationSize:wt}}return j}function wr(ht){return ht!==""}function Or(ht,c){const j=c.numSpotLightShadows+c.numSpotLightMaps-c.numSpotLightShadowsWithMaps;return ht.replace(/NUM_DIR_LIGHTS/g,c.numDirLights).replace(/NUM_SPOT_LIGHTS/g,c.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,c.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,j).replace(/NUM_RECT_AREA_LIGHTS/g,c.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,c.numPointLights).replace(/NUM_HEMI_LIGHTS/g,c.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,c.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,c.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,c.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,c.numPointLightShadows)}function Kr(ht,c){return ht.replace(/NUM_CLIPPING_PLANES/g,c.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,c.numClippingPlanes-c.numClipIntersection)}const Br=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qn(ht){return ht.replace(Br,Kn)}const gr=new Map;function Kn(ht,c){let j=To[c];if(j===void 0){const rt=gr.get(c);if(rt!==void 0)j=To[rt],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',c,rt);else throw new Error("Can not resolve #include <"+c+">")}return Qn(j)}const Ps=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ds(ht){return ht.replace(Ps,mo)}function mo(ht,c,j,rt){let at="";for(let ut=parseInt(c);ut<parseInt(j);ut++)at+=rt.replace(/\[\s*i\s*\]/g,"[ "+ut+" ]").replace(/UNROLLED_LOOP_INDEX/g,ut);return at}function Ko(ht){let c=`precision ${ht.precision} float;
	precision ${ht.precision} int;
	precision ${ht.precision} sampler2D;
	precision ${ht.precision} samplerCube;
	precision ${ht.precision} sampler3D;
	precision ${ht.precision} sampler2DArray;
	precision ${ht.precision} sampler2DShadow;
	precision ${ht.precision} samplerCubeShadow;
	precision ${ht.precision} sampler2DArrayShadow;
	precision ${ht.precision} isampler2D;
	precision ${ht.precision} isampler3D;
	precision ${ht.precision} isamplerCube;
	precision ${ht.precision} isampler2DArray;
	precision ${ht.precision} usampler2D;
	precision ${ht.precision} usampler3D;
	precision ${ht.precision} usamplerCube;
	precision ${ht.precision} usampler2DArray;
	`;return ht.precision==="highp"?c+=`
#define HIGH_PRECISION`:ht.precision==="mediump"?c+=`
#define MEDIUM_PRECISION`:ht.precision==="lowp"&&(c+=`
#define LOW_PRECISION`),c}function Ro(ht){let c="SHADOWMAP_TYPE_BASIC";return ht.shadowMapType===mt?c="SHADOWMAP_TYPE_PCF":ht.shadowMapType===gt?c="SHADOWMAP_TYPE_PCF_SOFT":ht.shadowMapType===Ct&&(c="SHADOWMAP_TYPE_VSM"),c}function Dr(ht){let c="ENVMAP_TYPE_CUBE";if(ht.envMap)switch(ht.envMapMode){case un:case Wt:c="ENVMAP_TYPE_CUBE";break;case Rn:c="ENVMAP_TYPE_CUBE_UV";break}return c}function Zr(ht){let c="ENVMAP_MODE_REFLECTION";if(ht.envMap)switch(ht.envMapMode){case Wt:c="ENVMAP_MODE_REFRACTION";break}return c}function us(ht){let c="ENVMAP_BLENDING_NONE";if(ht.envMap)switch(ht.combine){case Ho:c="ENVMAP_BLENDING_MULTIPLY";break;case oo:c="ENVMAP_BLENDING_MIX";break;case L0:c="ENVMAP_BLENDING_ADD";break}return c}function Oo(ht){const c=ht.envMapCubeUVHeight;if(c===null)return null;const j=Math.log2(c)-2,rt=1/c;return{texelWidth:1/(3*Math.max(Math.pow(2,j),7*16)),texelHeight:rt,maxMip:j}}function Xs(ht,c,j,rt){const at=ht.getContext(),ut=j.defines;let At=j.vertexShader,wt=j.fragmentShader;const Bt=Ro(j),Ft=Dr(j),Vt=Zr(j),qt=us(j),Jt=Oo(j),_i=dr(j),sn=Jn(ut),hn=at.createProgram();let an,en,xn=j.glslVersion?"#version "+j.glslVersion+`
`:"";const wn=j.numMultiviewViews;j.isRawShaderMaterial?(an=["#define SHADER_TYPE "+j.shaderType,"#define SHADER_NAME "+j.shaderName,sn].filter(wr).join(`
`),an.length>0&&(an+=`
`),en=["#define SHADER_TYPE "+j.shaderType,"#define SHADER_NAME "+j.shaderName,sn].filter(wr).join(`
`),en.length>0&&(en+=`
`)):(an=[Ko(j),"#define SHADER_TYPE "+j.shaderType,"#define SHADER_NAME "+j.shaderName,sn,j.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",j.batching?"#define USE_BATCHING":"",j.instancing?"#define USE_INSTANCING":"",j.instancingColor?"#define USE_INSTANCING_COLOR":"",j.instancingMorph?"#define USE_INSTANCING_MORPH":"",j.useFog&&j.fog?"#define USE_FOG":"",j.useFog&&j.fogExp2?"#define FOG_EXP2":"",j.map?"#define USE_MAP":"",j.envMap?"#define USE_ENVMAP":"",j.envMap?"#define "+Vt:"",j.lightMap?"#define USE_LIGHTMAP":"",j.aoMap?"#define USE_AOMAP":"",j.bumpMap?"#define USE_BUMPMAP":"",j.normalMap?"#define USE_NORMALMAP":"",j.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",j.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",j.displacementMap?"#define USE_DISPLACEMENTMAP":"",j.emissiveMap?"#define USE_EMISSIVEMAP":"",j.anisotropy?"#define USE_ANISOTROPY":"",j.anisotropyMap?"#define USE_ANISOTROPYMAP":"",j.clearcoatMap?"#define USE_CLEARCOATMAP":"",j.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",j.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",j.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",j.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",j.specularMap?"#define USE_SPECULARMAP":"",j.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",j.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",j.roughnessMap?"#define USE_ROUGHNESSMAP":"",j.metalnessMap?"#define USE_METALNESSMAP":"",j.alphaMap?"#define USE_ALPHAMAP":"",j.alphaHash?"#define USE_ALPHAHASH":"",j.transmission?"#define USE_TRANSMISSION":"",j.transmissionMap?"#define USE_TRANSMISSIONMAP":"",j.thicknessMap?"#define USE_THICKNESSMAP":"",j.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",j.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",j.mapUv?"#define MAP_UV "+j.mapUv:"",j.alphaMapUv?"#define ALPHAMAP_UV "+j.alphaMapUv:"",j.lightMapUv?"#define LIGHTMAP_UV "+j.lightMapUv:"",j.aoMapUv?"#define AOMAP_UV "+j.aoMapUv:"",j.emissiveMapUv?"#define EMISSIVEMAP_UV "+j.emissiveMapUv:"",j.bumpMapUv?"#define BUMPMAP_UV "+j.bumpMapUv:"",j.normalMapUv?"#define NORMALMAP_UV "+j.normalMapUv:"",j.displacementMapUv?"#define DISPLACEMENTMAP_UV "+j.displacementMapUv:"",j.metalnessMapUv?"#define METALNESSMAP_UV "+j.metalnessMapUv:"",j.roughnessMapUv?"#define ROUGHNESSMAP_UV "+j.roughnessMapUv:"",j.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+j.anisotropyMapUv:"",j.clearcoatMapUv?"#define CLEARCOATMAP_UV "+j.clearcoatMapUv:"",j.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+j.clearcoatNormalMapUv:"",j.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+j.clearcoatRoughnessMapUv:"",j.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+j.iridescenceMapUv:"",j.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+j.iridescenceThicknessMapUv:"",j.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+j.sheenColorMapUv:"",j.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+j.sheenRoughnessMapUv:"",j.specularMapUv?"#define SPECULARMAP_UV "+j.specularMapUv:"",j.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+j.specularColorMapUv:"",j.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+j.specularIntensityMapUv:"",j.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+j.transmissionMapUv:"",j.thicknessMapUv?"#define THICKNESSMAP_UV "+j.thicknessMapUv:"",j.vertexTangents&&j.flatShading===!1?"#define USE_TANGENT":"",j.vertexColors?"#define USE_COLOR":"",j.vertexAlphas?"#define USE_COLOR_ALPHA":"",j.vertexUv1s?"#define USE_UV1":"",j.vertexUv2s?"#define USE_UV2":"",j.vertexUv3s?"#define USE_UV3":"",j.pointsUvs?"#define USE_POINTS_UV":"",j.flatShading?"#define FLAT_SHADED":"",j.skinning?"#define USE_SKINNING":"",j.morphTargets?"#define USE_MORPHTARGETS":"",j.morphNormals&&j.flatShading===!1?"#define USE_MORPHNORMALS":"",j.morphColors?"#define USE_MORPHCOLORS":"",j.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",j.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+j.morphTextureStride:"",j.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+j.morphTargetsCount:"",j.doubleSided?"#define DOUBLE_SIDED":"",j.flipSided?"#define FLIP_SIDED":"",j.shadowMapEnabled?"#define USE_SHADOWMAP":"",j.shadowMapEnabled?"#define "+Bt:"",j.sizeAttenuation?"#define USE_SIZEATTENUATION":"",j.numLightProbes>0?"#define USE_LIGHT_PROBES":"",j.useLegacyLights?"#define LEGACY_LIGHTS":"",j.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wr).join(`
`),en=[Ko(j),"#define SHADER_TYPE "+j.shaderType,"#define SHADER_NAME "+j.shaderName,sn,j.useFog&&j.fog?"#define USE_FOG":"",j.useFog&&j.fogExp2?"#define FOG_EXP2":"",j.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",j.map?"#define USE_MAP":"",j.matcap?"#define USE_MATCAP":"",j.envMap?"#define USE_ENVMAP":"",j.envMap?"#define "+Ft:"",j.envMap?"#define "+Vt:"",j.envMap?"#define "+qt:"",Jt?"#define CUBEUV_TEXEL_WIDTH "+Jt.texelWidth:"",Jt?"#define CUBEUV_TEXEL_HEIGHT "+Jt.texelHeight:"",Jt?"#define CUBEUV_MAX_MIP "+Jt.maxMip+".0":"",j.lightMap?"#define USE_LIGHTMAP":"",j.aoMap?"#define USE_AOMAP":"",j.bumpMap?"#define USE_BUMPMAP":"",j.normalMap?"#define USE_NORMALMAP":"",j.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",j.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",j.emissiveMap?"#define USE_EMISSIVEMAP":"",j.anisotropy?"#define USE_ANISOTROPY":"",j.anisotropyMap?"#define USE_ANISOTROPYMAP":"",j.clearcoat?"#define USE_CLEARCOAT":"",j.clearcoatMap?"#define USE_CLEARCOATMAP":"",j.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",j.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",j.dispersion?"#define USE_DISPERSION":"",j.iridescence?"#define USE_IRIDESCENCE":"",j.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",j.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",j.specularMap?"#define USE_SPECULARMAP":"",j.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",j.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",j.roughnessMap?"#define USE_ROUGHNESSMAP":"",j.metalnessMap?"#define USE_METALNESSMAP":"",j.alphaMap?"#define USE_ALPHAMAP":"",j.alphaTest?"#define USE_ALPHATEST":"",j.alphaHash?"#define USE_ALPHAHASH":"",j.sheen?"#define USE_SHEEN":"",j.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",j.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",j.transmission?"#define USE_TRANSMISSION":"",j.transmissionMap?"#define USE_TRANSMISSIONMAP":"",j.thicknessMap?"#define USE_THICKNESSMAP":"",j.vertexTangents&&j.flatShading===!1?"#define USE_TANGENT":"",j.vertexColors||j.instancingColor?"#define USE_COLOR":"",j.vertexAlphas?"#define USE_COLOR_ALPHA":"",j.vertexUv1s?"#define USE_UV1":"",j.vertexUv2s?"#define USE_UV2":"",j.vertexUv3s?"#define USE_UV3":"",j.pointsUvs?"#define USE_POINTS_UV":"",j.gradientMap?"#define USE_GRADIENTMAP":"",j.flatShading?"#define FLAT_SHADED":"",j.doubleSided?"#define DOUBLE_SIDED":"",j.flipSided?"#define FLIP_SIDED":"",j.shadowMapEnabled?"#define USE_SHADOWMAP":"",j.shadowMapEnabled?"#define "+Bt:"",j.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",j.numLightProbes>0?"#define USE_LIGHT_PROBES":"",j.useLegacyLights?"#define LEGACY_LIGHTS":"",j.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",j.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",j.toneMapping!==f0?"#define TONE_MAPPING":"",j.toneMapping!==f0?To.tonemapping_pars_fragment:"",j.toneMapping!==f0?sr("toneMapping",j.toneMapping):"",j.dithering?"#define DITHERING":"",j.opaque?"#define OPAQUE":"",To.colorspace_pars_fragment,ir("linearToOutputTexel",j.outputColorSpace),j.useDepthPacking?"#define DEPTH_PACKING "+j.depthPacking:"",`
`].filter(wr).join(`
`)),At=Qn(At),At=Or(At,j),At=Kr(At,j),wt=Qn(wt),wt=Or(wt,j),wt=Kr(wt,j),At=ds(At),wt=ds(wt),j.isRawShaderMaterial!==!0&&(xn=`#version 300 es
`,an=[_i,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+an,en=["#define varying in",j.glslVersion===R2?"":"layout(location = 0) out highp vec4 pc_fragColor;",j.glslVersion===R2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+en,wn>0&&(an=["#extension GL_OVR_multiview : require","layout(num_views = "+wn+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+an,an=an.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+wn+"];","uniform mat4 projectionMatrices["+wn+"];","uniform mat4 viewMatrices["+wn+"];","uniform mat3 normalMatrices["+wn+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),en=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+en,en=en.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+wn+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const En=xn+an+At,er=xn+en+wt,Nn=$t(at,at.VERTEX_SHADER,En),zn=$t(at,at.FRAGMENT_SHADER,er);at.attachShader(hn,Nn),at.attachShader(hn,zn),j.index0AttributeName!==void 0?at.bindAttribLocation(hn,0,j.index0AttributeName):j.morphTargets===!0&&at.bindAttribLocation(hn,0,"position"),at.linkProgram(hn);function $n(ur){if(ht.debug.checkShaderErrors){const or=at.getProgramInfoLog(hn).trim(),Ar=at.getShaderInfoLog(Nn).trim(),br=at.getShaderInfoLog(zn).trim();let Vr=!0,Es=!0;if(at.getProgramParameter(hn,at.LINK_STATUS)===!1)if(Vr=!1,typeof ht.debug.onShaderError=="function")ht.debug.onShaderError(at,hn,Nn,zn);else{const Sr=Yn(at,Nn,"vertex"),hs=Yn(at,zn,"fragment");console.error("THREE.WebGLProgram: Shader Error "+at.getError()+" - VALIDATE_STATUS "+at.getProgramParameter(hn,at.VALIDATE_STATUS)+`

Material Name: `+ur.name+`
Material Type: `+ur.type+`

Program Info Log: `+or+`
`+Sr+`
`+hs)}else or!==""?console.warn("THREE.WebGLProgram: Program Info Log:",or):(Ar===""||br==="")&&(Es=!1);Es&&(ur.diagnostics={runnable:Vr,programLog:or,vertexShader:{log:Ar,prefix:an},fragmentShader:{log:br,prefix:en}})}at.deleteShader(Nn),at.deleteShader(zn),Ln=new zt(at,hn),Sn=Hr(at,hn)}let Ln;this.getUniforms=function(){return Ln===void 0&&$n(this),Ln};let Sn;this.getAttributes=function(){return Sn===void 0&&$n(this),Sn};let jn=j.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return jn===!1&&(jn=at.getProgramParameter(hn,Yt)),jn},this.destroy=function(){rt.releaseStatesOfProgram(this),at.deleteProgram(hn),this.program=void 0},this.type=j.shaderType,this.name=j.shaderName,this.id=kt++,this.cacheKey=c,this.usedTimes=1,this.program=hn,this.vertexShader=Nn,this.fragmentShader=zn,this.numMultiviewViews=wn,this}let S1=0;class a1{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(c){const j=c.vertexShader,rt=c.fragmentShader,at=this._getShaderStage(j),ut=this._getShaderStage(rt),At=this._getShaderCacheForMaterial(c);return At.has(at)===!1&&(At.add(at),at.usedTimes++),At.has(ut)===!1&&(At.add(ut),ut.usedTimes++),this}remove(c){const j=this.materialCache.get(c);for(const rt of j)rt.usedTimes--,rt.usedTimes===0&&this.shaderCache.delete(rt.code);return this.materialCache.delete(c),this}getVertexShaderID(c){return this._getShaderStage(c.vertexShader).id}getFragmentShaderID(c){return this._getShaderStage(c.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(c){const j=this.materialCache;let rt=j.get(c);return rt===void 0&&(rt=new Set,j.set(c,rt)),rt}_getShaderStage(c){const j=this.shaderCache;let rt=j.get(c);return rt===void 0&&(rt=new zp(c),j.set(c,rt)),rt}}class zp{constructor(c){this.id=S1++,this.code=c,this.usedTimes=0}}function Wp(ht,c,j,rt,at,ut,At){const wt=new O2,Bt=new a1,Ft=new Set,Vt=[],qt=at.logarithmicDepthBuffer,Jt=at.vertexTextures;let _i=at.precision;const sn={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function hn(Ln){return Ft.add(Ln),Ln===0?"uv":`uv${Ln}`}function an(Ln,Sn,jn,ur,or){const Ar=ur.fog,br=or.geometry,Vr=Ln.isMeshStandardMaterial?ur.environment:null,Es=(Ln.isMeshStandardMaterial?j:c).get(Ln.envMap||Vr),Sr=Es&&Es.mapping===Rn?Es.image.height:null,hs=sn[Ln.type];Ln.precision!==null&&(_i=at.getMaxPrecision(Ln.precision),_i!==Ln.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ln.precision,"not supported, using",_i,"instead."));const vs=br.morphAttributes.position||br.morphAttributes.normal||br.morphAttributes.color,zs=vs!==void 0?vs.length:0;let Qo=0;br.morphAttributes.position!==void 0&&(Qo=1),br.morphAttributes.normal!==void 0&&(Qo=2),br.morphAttributes.color!==void 0&&(Qo=3);let m0,k0,h0,S0;if(hs){const Hl=m1[hs];m0=Hl.vertexShader,k0=Hl.fragmentShader}else m0=Ln.vertexShader,k0=Ln.fragmentShader,Bt.update(Ln),h0=Bt.getVertexShaderID(Ln),S0=Bt.getFragmentShaderID(Ln);const Ws=ht.getRenderTarget(),qr=Ws&&Ws.isWebGLMultiviewRenderTarget?Ws.numViews:0,ws=or.isInstancedMesh===!0,Ms=or.isBatchedMesh===!0,mr=!!Ln.map,Jr=!!Ln.matcap,Fr=!!Es,cs=!!Ln.aoMap,ls=!!Ln.lightMap,rs=!!Ln.bumpMap,Is=!!Ln.normalMap,Hs=!!Ln.displacementMap,_o=!!Ln.emissiveMap,Io=!!Ln.metalnessMap,d0=!!Ln.roughnessMap,$0=Ln.anisotropy>0,N0=Ln.clearcoat>0,qn=Ln.dispersion>0,Tn=Ln.iridescence>0,Pr=Ln.sheen>0,Xr=Ln.transmission>0,jr=$0&&!!Ln.anisotropyMap,$r=N0&&!!Ln.clearcoatMap,qs=N0&&!!Ln.clearcoatNormalMap,ys=N0&&!!Ln.clearcoatRoughnessMap,Gs=Tn&&!!Ln.iridescenceMap,y0=Tn&&!!Ln.iridescenceThicknessMap,Qs=Pr&&!!Ln.sheenColorMap,eo=Pr&&!!Ln.sheenRoughnessMap,No=!!Ln.specularMap,uo=!!Ln.specularColorMap,nr=!!Ln.specularIntensityMap,ss=Xr&&!!Ln.transmissionMap,gs=Xr&&!!Ln.thicknessMap,Js=!!Ln.gradientMap,Fs=!!Ln.alphaMap,Uo=Ln.alphaTest>0,ks=!!Ln.alphaHash,Bs=!!Ln.extensions;let Xo=f0;Ln.toneMapped&&(Ws===null||Ws.isXRRenderTarget===!0)&&(Xo=ht.toneMapping);const po={shaderID:hs,shaderType:Ln.type,shaderName:Ln.name,vertexShader:m0,fragmentShader:k0,defines:Ln.defines,customVertexShaderID:h0,customFragmentShaderID:S0,isRawShaderMaterial:Ln.isRawShaderMaterial===!0,glslVersion:Ln.glslVersion,precision:_i,batching:Ms,instancing:ws,instancingColor:ws&&or.instanceColor!==null,instancingMorph:ws&&or.morphTexture!==null,supportsVertexTextures:Jt,numMultiviewViews:qr,outputColorSpace:Ws===null?ht.outputColorSpace:Ws.isXRRenderTarget===!0?Ws.texture.colorSpace:B1,alphaToCoverage:!!Ln.alphaToCoverage,map:mr,matcap:Jr,envMap:Fr,envMapMode:Fr&&Es.mapping,envMapCubeUVHeight:Sr,aoMap:cs,lightMap:ls,bumpMap:rs,normalMap:Is,displacementMap:Jt&&Hs,emissiveMap:_o,normalMapObjectSpace:Is&&Ln.normalMapType===N1,normalMapTangentSpace:Is&&Ln.normalMapType===Vl,metalnessMap:Io,roughnessMap:d0,anisotropy:$0,anisotropyMap:jr,clearcoat:N0,clearcoatMap:$r,clearcoatNormalMap:qs,clearcoatRoughnessMap:ys,dispersion:qn,iridescence:Tn,iridescenceMap:Gs,iridescenceThicknessMap:y0,sheen:Pr,sheenColorMap:Qs,sheenRoughnessMap:eo,specularMap:No,specularColorMap:uo,specularIntensityMap:nr,transmission:Xr,transmissionMap:ss,thicknessMap:gs,gradientMap:Js,opaque:Ln.transparent===!1&&Ln.blending===Xt&&Ln.alphaToCoverage===!1,alphaMap:Fs,alphaTest:Uo,alphaHash:ks,combine:Ln.combine,mapUv:mr&&hn(Ln.map.channel),aoMapUv:cs&&hn(Ln.aoMap.channel),lightMapUv:ls&&hn(Ln.lightMap.channel),bumpMapUv:rs&&hn(Ln.bumpMap.channel),normalMapUv:Is&&hn(Ln.normalMap.channel),displacementMapUv:Hs&&hn(Ln.displacementMap.channel),emissiveMapUv:_o&&hn(Ln.emissiveMap.channel),metalnessMapUv:Io&&hn(Ln.metalnessMap.channel),roughnessMapUv:d0&&hn(Ln.roughnessMap.channel),anisotropyMapUv:jr&&hn(Ln.anisotropyMap.channel),clearcoatMapUv:$r&&hn(Ln.clearcoatMap.channel),clearcoatNormalMapUv:qs&&hn(Ln.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ys&&hn(Ln.clearcoatRoughnessMap.channel),iridescenceMapUv:Gs&&hn(Ln.iridescenceMap.channel),iridescenceThicknessMapUv:y0&&hn(Ln.iridescenceThicknessMap.channel),sheenColorMapUv:Qs&&hn(Ln.sheenColorMap.channel),sheenRoughnessMapUv:eo&&hn(Ln.sheenRoughnessMap.channel),specularMapUv:No&&hn(Ln.specularMap.channel),specularColorMapUv:uo&&hn(Ln.specularColorMap.channel),specularIntensityMapUv:nr&&hn(Ln.specularIntensityMap.channel),transmissionMapUv:ss&&hn(Ln.transmissionMap.channel),thicknessMapUv:gs&&hn(Ln.thicknessMap.channel),alphaMapUv:Fs&&hn(Ln.alphaMap.channel),vertexTangents:!!br.attributes.tangent&&(Is||$0),vertexColors:Ln.vertexColors,vertexAlphas:Ln.vertexColors===!0&&!!br.attributes.color&&br.attributes.color.itemSize===4,pointsUvs:or.isPoints===!0&&!!br.attributes.uv&&(mr||Fs),fog:!!Ar,useFog:Ln.fog===!0,fogExp2:!!Ar&&Ar.isFogExp2,flatShading:Ln.flatShading===!0,sizeAttenuation:Ln.sizeAttenuation===!0,logarithmicDepthBuffer:qt,skinning:or.isSkinnedMesh===!0,morphTargets:br.morphAttributes.position!==void 0,morphNormals:br.morphAttributes.normal!==void 0,morphColors:br.morphAttributes.color!==void 0,morphTargetsCount:zs,morphTextureStride:Qo,numDirLights:Sn.directional.length,numPointLights:Sn.point.length,numSpotLights:Sn.spot.length,numSpotLightMaps:Sn.spotLightMap.length,numRectAreaLights:Sn.rectArea.length,numHemiLights:Sn.hemi.length,numDirLightShadows:Sn.directionalShadowMap.length,numPointLightShadows:Sn.pointShadowMap.length,numSpotLightShadows:Sn.spotShadowMap.length,numSpotLightShadowsWithMaps:Sn.numSpotLightShadowsWithMaps,numLightProbes:Sn.numLightProbes,numClippingPlanes:At.numPlanes,numClipIntersection:At.numIntersection,dithering:Ln.dithering,shadowMapEnabled:ht.shadowMap.enabled&&jn.length>0,shadowMapType:ht.shadowMap.type,toneMapping:Xo,useLegacyLights:ht._useLegacyLights,decodeVideoTexture:mr&&Ln.map.isVideoTexture===!0&&u0.getTransfer(Ln.map.colorSpace)===g0,premultipliedAlpha:Ln.premultipliedAlpha,doubleSided:Ln.side===Ht,flipSided:Ln.side===Dt,useDepthPacking:Ln.depthPacking>=0,depthPacking:Ln.depthPacking||0,index0AttributeName:Ln.index0AttributeName,extensionClipCullDistance:Bs&&Ln.extensions.clipCullDistance===!0&&rt.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Bs&&Ln.extensions.multiDraw===!0&&rt.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:rt.has("KHR_parallel_shader_compile"),customProgramCacheKey:Ln.customProgramCacheKey()};return po.vertexUv1s=Ft.has(1),po.vertexUv2s=Ft.has(2),po.vertexUv3s=Ft.has(3),Ft.clear(),po}function en(Ln){const Sn=[];if(Ln.shaderID?Sn.push(Ln.shaderID):(Sn.push(Ln.customVertexShaderID),Sn.push(Ln.customFragmentShaderID)),Ln.defines!==void 0)for(const jn in Ln.defines)Sn.push(jn),Sn.push(Ln.defines[jn]);return Ln.isRawShaderMaterial===!1&&(xn(Sn,Ln),wn(Sn,Ln),Sn.push(ht.outputColorSpace)),Sn.push(Ln.customProgramCacheKey),Sn.join()}function xn(Ln,Sn){Ln.push(Sn.precision),Ln.push(Sn.outputColorSpace),Ln.push(Sn.envMapMode),Ln.push(Sn.envMapCubeUVHeight),Ln.push(Sn.mapUv),Ln.push(Sn.alphaMapUv),Ln.push(Sn.lightMapUv),Ln.push(Sn.aoMapUv),Ln.push(Sn.bumpMapUv),Ln.push(Sn.normalMapUv),Ln.push(Sn.displacementMapUv),Ln.push(Sn.emissiveMapUv),Ln.push(Sn.metalnessMapUv),Ln.push(Sn.roughnessMapUv),Ln.push(Sn.anisotropyMapUv),Ln.push(Sn.clearcoatMapUv),Ln.push(Sn.clearcoatNormalMapUv),Ln.push(Sn.clearcoatRoughnessMapUv),Ln.push(Sn.iridescenceMapUv),Ln.push(Sn.iridescenceThicknessMapUv),Ln.push(Sn.sheenColorMapUv),Ln.push(Sn.sheenRoughnessMapUv),Ln.push(Sn.specularMapUv),Ln.push(Sn.specularColorMapUv),Ln.push(Sn.specularIntensityMapUv),Ln.push(Sn.transmissionMapUv),Ln.push(Sn.thicknessMapUv),Ln.push(Sn.combine),Ln.push(Sn.fogExp2),Ln.push(Sn.sizeAttenuation),Ln.push(Sn.morphTargetsCount),Ln.push(Sn.morphAttributeCount),Ln.push(Sn.numDirLights),Ln.push(Sn.numPointLights),Ln.push(Sn.numSpotLights),Ln.push(Sn.numSpotLightMaps),Ln.push(Sn.numHemiLights),Ln.push(Sn.numRectAreaLights),Ln.push(Sn.numDirLightShadows),Ln.push(Sn.numPointLightShadows),Ln.push(Sn.numSpotLightShadows),Ln.push(Sn.numSpotLightShadowsWithMaps),Ln.push(Sn.numLightProbes),Ln.push(Sn.shadowMapType),Ln.push(Sn.toneMapping),Ln.push(Sn.numClippingPlanes),Ln.push(Sn.numClipIntersection),Ln.push(Sn.depthPacking)}function wn(Ln,Sn){wt.disableAll(),Sn.supportsVertexTextures&&wt.enable(0),Sn.instancing&&wt.enable(1),Sn.instancingColor&&wt.enable(2),Sn.instancingMorph&&wt.enable(3),Sn.matcap&&wt.enable(4),Sn.envMap&&wt.enable(5),Sn.normalMapObjectSpace&&wt.enable(6),Sn.normalMapTangentSpace&&wt.enable(7),Sn.clearcoat&&wt.enable(8),Sn.iridescence&&wt.enable(9),Sn.alphaTest&&wt.enable(10),Sn.vertexColors&&wt.enable(11),Sn.vertexAlphas&&wt.enable(12),Sn.vertexUv1s&&wt.enable(13),Sn.vertexUv2s&&wt.enable(14),Sn.vertexUv3s&&wt.enable(15),Sn.vertexTangents&&wt.enable(16),Sn.anisotropy&&wt.enable(17),Sn.alphaHash&&wt.enable(18),Sn.batching&&wt.enable(19),Sn.dispersion&&wt.enable(20),Ln.push(wt.mask),wt.disableAll(),Sn.fog&&wt.enable(0),Sn.useFog&&wt.enable(1),Sn.flatShading&&wt.enable(2),Sn.logarithmicDepthBuffer&&wt.enable(3),Sn.skinning&&wt.enable(4),Sn.morphTargets&&wt.enable(5),Sn.morphNormals&&wt.enable(6),Sn.morphColors&&wt.enable(7),Sn.premultipliedAlpha&&wt.enable(8),Sn.shadowMapEnabled&&wt.enable(9),Sn.useLegacyLights&&wt.enable(10),Sn.doubleSided&&wt.enable(11),Sn.flipSided&&wt.enable(12),Sn.useDepthPacking&&wt.enable(13),Sn.dithering&&wt.enable(14),Sn.transmission&&wt.enable(15),Sn.sheen&&wt.enable(16),Sn.opaque&&wt.enable(17),Sn.pointsUvs&&wt.enable(18),Sn.decodeVideoTexture&&wt.enable(19),Sn.alphaToCoverage&&wt.enable(20),Sn.numMultiviewViews&&wt.enable(21),Ln.push(wt.mask)}function En(Ln){const Sn=sn[Ln.type];let jn;if(Sn){const ur=m1[Sn];jn=Ym.clone(ur.uniforms)}else jn=Ln.uniforms;return jn}function er(Ln,Sn){let jn;for(let ur=0,or=Vt.length;ur<or;ur++){const Ar=Vt[ur];if(Ar.cacheKey===Sn){jn=Ar,++jn.usedTimes;break}}return jn===void 0&&(jn=new Xs(ht,Sn,Ln,ut),Vt.push(jn)),jn}function Nn(Ln){if(--Ln.usedTimes===0){const Sn=Vt.indexOf(Ln);Vt[Sn]=Vt[Vt.length-1],Vt.pop(),Ln.destroy()}}function zn(Ln){Bt.remove(Ln)}function $n(){Bt.dispose()}return{getParameters:an,getProgramCacheKey:en,getUniforms:En,acquireProgram:er,releaseProgram:Nn,releaseShaderCache:zn,programs:Vt,dispose:$n}}function W1(){let ht=new WeakMap;function c(ut){let At=ht.get(ut);return At===void 0&&(At={},ht.set(ut,At)),At}function j(ut){ht.delete(ut)}function rt(ut,At,wt){ht.get(ut)[At]=wt}function at(){ht=new WeakMap}return{get:c,remove:j,update:rt,dispose:at}}function sw(ht,c){return ht.groupOrder!==c.groupOrder?ht.groupOrder-c.groupOrder:ht.renderOrder!==c.renderOrder?ht.renderOrder-c.renderOrder:ht.material.id!==c.material.id?ht.material.id-c.material.id:ht.z!==c.z?ht.z-c.z:ht.id-c.id}function n4(ht,c){return ht.groupOrder!==c.groupOrder?ht.groupOrder-c.groupOrder:ht.renderOrder!==c.renderOrder?ht.renderOrder-c.renderOrder:ht.z!==c.z?c.z-ht.z:ht.id-c.id}function r4(){const ht=[];let c=0;const j=[],rt=[],at=[];function ut(){c=0,j.length=0,rt.length=0,at.length=0}function At(qt,Jt,_i,sn,hn,an){let en=ht[c];return en===void 0?(en={id:qt.id,object:qt,geometry:Jt,material:_i,groupOrder:sn,renderOrder:qt.renderOrder,z:hn,group:an},ht[c]=en):(en.id=qt.id,en.object=qt,en.geometry=Jt,en.material=_i,en.groupOrder=sn,en.renderOrder=qt.renderOrder,en.z=hn,en.group=an),c++,en}function wt(qt,Jt,_i,sn,hn,an){const en=At(qt,Jt,_i,sn,hn,an);_i.transmission>0?rt.push(en):_i.transparent===!0?at.push(en):j.push(en)}function Bt(qt,Jt,_i,sn,hn,an){const en=At(qt,Jt,_i,sn,hn,an);_i.transmission>0?rt.unshift(en):_i.transparent===!0?at.unshift(en):j.unshift(en)}function Ft(qt,Jt){j.length>1&&j.sort(qt||sw),rt.length>1&&rt.sort(Jt||n4),at.length>1&&at.sort(Jt||n4)}function Vt(){for(let qt=c,Jt=ht.length;qt<Jt;qt++){const _i=ht[qt];if(_i.id===null)break;_i.id=null,_i.object=null,_i.geometry=null,_i.material=null,_i.group=null}}return{opaque:j,transmissive:rt,transparent:at,init:ut,push:wt,unshift:Bt,finish:Vt,sort:Ft}}function ow(){let ht=new WeakMap;function c(rt,at){const ut=ht.get(rt);let At;return ut===void 0?(At=new r4,ht.set(rt,[At])):at>=ut.length?(At=new r4,ut.push(At)):At=ut[at],At}function j(){ht=new WeakMap}return{get:c,dispose:j}}function aw(){const ht={};return{get:function(c){if(ht[c.id]!==void 0)return ht[c.id];let j;switch(c.type){case"DirectionalLight":j={direction:new kn,color:new Os};break;case"SpotLight":j={position:new kn,direction:new kn,color:new Os,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":j={position:new kn,color:new Os,distance:0,decay:0};break;case"HemisphereLight":j={direction:new kn,skyColor:new Os,groundColor:new Os};break;case"RectAreaLight":j={color:new Os,position:new kn,halfWidth:new kn,halfHeight:new kn};break}return ht[c.id]=j,j}}}function lw(){const ht={};return{get:function(c){if(ht[c.id]!==void 0)return ht[c.id];let j;switch(c.type){case"DirectionalLight":j={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr};break;case"SpotLight":j={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr};break;case"PointLight":j={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wr,shadowCameraNear:1,shadowCameraFar:1e3};break}return ht[c.id]=j,j}}}let cw=0;function uw(ht,c){return(c.castShadow?2:0)-(ht.castShadow?2:0)+(c.map?1:0)-(ht.map?1:0)}function hw(ht){const c=new aw,j=lw(),rt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let Ft=0;Ft<9;Ft++)rt.probe.push(new kn);const at=new kn,ut=new Vs,At=new Vs;function wt(Ft,Vt){let qt=0,Jt=0,_i=0;for(let jn=0;jn<9;jn++)rt.probe[jn].set(0,0,0);let sn=0,hn=0,an=0,en=0,xn=0,wn=0,En=0,er=0,Nn=0,zn=0,$n=0;Ft.sort(uw);const Ln=Vt===!0?Math.PI:1;for(let jn=0,ur=Ft.length;jn<ur;jn++){const or=Ft[jn],Ar=or.color,br=or.intensity,Vr=or.distance,Es=or.shadow&&or.shadow.map?or.shadow.map.texture:null;if(or.isAmbientLight)qt+=Ar.r*br*Ln,Jt+=Ar.g*br*Ln,_i+=Ar.b*br*Ln;else if(or.isLightProbe){for(let Sr=0;Sr<9;Sr++)rt.probe[Sr].addScaledVector(or.sh.coefficients[Sr],br);$n++}else if(or.isDirectionalLight){const Sr=c.get(or);if(Sr.color.copy(or.color).multiplyScalar(or.intensity*Ln),or.castShadow){const hs=or.shadow,vs=j.get(or);vs.shadowBias=hs.bias,vs.shadowNormalBias=hs.normalBias,vs.shadowRadius=hs.radius,vs.shadowMapSize=hs.mapSize,rt.directionalShadow[sn]=vs,rt.directionalShadowMap[sn]=Es,rt.directionalShadowMatrix[sn]=or.shadow.matrix,wn++}rt.directional[sn]=Sr,sn++}else if(or.isSpotLight){const Sr=c.get(or);Sr.position.setFromMatrixPosition(or.matrixWorld),Sr.color.copy(Ar).multiplyScalar(br*Ln),Sr.distance=Vr,Sr.coneCos=Math.cos(or.angle),Sr.penumbraCos=Math.cos(or.angle*(1-or.penumbra)),Sr.decay=or.decay,rt.spot[an]=Sr;const hs=or.shadow;if(or.map&&(rt.spotLightMap[Nn]=or.map,Nn++,hs.updateMatrices(or),or.castShadow&&zn++),rt.spotLightMatrix[an]=hs.matrix,or.castShadow){const vs=j.get(or);vs.shadowBias=hs.bias,vs.shadowNormalBias=hs.normalBias,vs.shadowRadius=hs.radius,vs.shadowMapSize=hs.mapSize,rt.spotShadow[an]=vs,rt.spotShadowMap[an]=Es,er++}an++}else if(or.isRectAreaLight){const Sr=c.get(or);Sr.color.copy(Ar).multiplyScalar(br),Sr.halfWidth.set(or.width*.5,0,0),Sr.halfHeight.set(0,or.height*.5,0),rt.rectArea[en]=Sr,en++}else if(or.isPointLight){const Sr=c.get(or);if(Sr.color.copy(or.color).multiplyScalar(or.intensity*Ln),Sr.distance=or.distance,Sr.decay=or.decay,or.castShadow){const hs=or.shadow,vs=j.get(or);vs.shadowBias=hs.bias,vs.shadowNormalBias=hs.normalBias,vs.shadowRadius=hs.radius,vs.shadowMapSize=hs.mapSize,vs.shadowCameraNear=hs.camera.near,vs.shadowCameraFar=hs.camera.far,rt.pointShadow[hn]=vs,rt.pointShadowMap[hn]=Es,rt.pointShadowMatrix[hn]=or.shadow.matrix,En++}rt.point[hn]=Sr,hn++}else if(or.isHemisphereLight){const Sr=c.get(or);Sr.skyColor.copy(or.color).multiplyScalar(br*Ln),Sr.groundColor.copy(or.groundColor).multiplyScalar(br*Ln),rt.hemi[xn]=Sr,xn++}}en>0&&(ht.has("OES_texture_float_linear")===!0?(rt.rectAreaLTC1=bs.LTC_FLOAT_1,rt.rectAreaLTC2=bs.LTC_FLOAT_2):(rt.rectAreaLTC1=bs.LTC_HALF_1,rt.rectAreaLTC2=bs.LTC_HALF_2)),rt.ambient[0]=qt,rt.ambient[1]=Jt,rt.ambient[2]=_i;const Sn=rt.hash;(Sn.directionalLength!==sn||Sn.pointLength!==hn||Sn.spotLength!==an||Sn.rectAreaLength!==en||Sn.hemiLength!==xn||Sn.numDirectionalShadows!==wn||Sn.numPointShadows!==En||Sn.numSpotShadows!==er||Sn.numSpotMaps!==Nn||Sn.numLightProbes!==$n)&&(rt.directional.length=sn,rt.spot.length=an,rt.rectArea.length=en,rt.point.length=hn,rt.hemi.length=xn,rt.directionalShadow.length=wn,rt.directionalShadowMap.length=wn,rt.pointShadow.length=En,rt.pointShadowMap.length=En,rt.spotShadow.length=er,rt.spotShadowMap.length=er,rt.directionalShadowMatrix.length=wn,rt.pointShadowMatrix.length=En,rt.spotLightMatrix.length=er+Nn-zn,rt.spotLightMap.length=Nn,rt.numSpotLightShadowsWithMaps=zn,rt.numLightProbes=$n,Sn.directionalLength=sn,Sn.pointLength=hn,Sn.spotLength=an,Sn.rectAreaLength=en,Sn.hemiLength=xn,Sn.numDirectionalShadows=wn,Sn.numPointShadows=En,Sn.numSpotShadows=er,Sn.numSpotMaps=Nn,Sn.numLightProbes=$n,rt.version=cw++)}function Bt(Ft,Vt){let qt=0,Jt=0,_i=0,sn=0,hn=0;const an=Vt.matrixWorldInverse;for(let en=0,xn=Ft.length;en<xn;en++){const wn=Ft[en];if(wn.isDirectionalLight){const En=rt.directional[qt];En.direction.setFromMatrixPosition(wn.matrixWorld),at.setFromMatrixPosition(wn.target.matrixWorld),En.direction.sub(at),En.direction.transformDirection(an),qt++}else if(wn.isSpotLight){const En=rt.spot[_i];En.position.setFromMatrixPosition(wn.matrixWorld),En.position.applyMatrix4(an),En.direction.setFromMatrixPosition(wn.matrixWorld),at.setFromMatrixPosition(wn.target.matrixWorld),En.direction.sub(at),En.direction.transformDirection(an),_i++}else if(wn.isRectAreaLight){const En=rt.rectArea[sn];En.position.setFromMatrixPosition(wn.matrixWorld),En.position.applyMatrix4(an),At.identity(),ut.copy(wn.matrixWorld),ut.premultiply(an),At.extractRotation(ut),En.halfWidth.set(wn.width*.5,0,0),En.halfHeight.set(0,wn.height*.5,0),En.halfWidth.applyMatrix4(At),En.halfHeight.applyMatrix4(At),sn++}else if(wn.isPointLight){const En=rt.point[Jt];En.position.setFromMatrixPosition(wn.matrixWorld),En.position.applyMatrix4(an),Jt++}else if(wn.isHemisphereLight){const En=rt.hemi[hn];En.direction.setFromMatrixPosition(wn.matrixWorld),En.direction.transformDirection(an),hn++}}}return{setup:wt,setupView:Bt,state:rt}}function s4(ht){const c=new hw(ht),j=[],rt=[];function at(Vt){Ft.camera=Vt,j.length=0,rt.length=0}function ut(Vt){j.push(Vt)}function At(Vt){rt.push(Vt)}function wt(Vt){c.setup(j,Vt)}function Bt(Vt){c.setupView(j,Vt)}const Ft={lightsArray:j,shadowsArray:rt,camera:null,lights:c,transmissionRenderTarget:{}};return{init:at,state:Ft,setupLights:wt,setupLightsView:Bt,pushLight:ut,pushShadow:At}}function dw(ht){let c=new WeakMap;function j(at,ut=0){const At=c.get(at);let wt;return At===void 0?(wt=new s4(ht),c.set(at,[wt])):ut>=At.length?(wt=new s4(ht),At.push(wt)):wt=At[ut],wt}function rt(){c=new WeakMap}return{get:j,dispose:rt}}class HE extends Kl{constructor(c){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=F1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(c)}copy(c){return super.copy(c),this.depthPacking=c.depthPacking,this.map=c.map,this.alphaMap=c.alphaMap,this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this}}class GE extends Kl{constructor(c){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(c)}copy(c){return super.copy(c),this.map=c.map,this.alphaMap=c.alphaMap,this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this}}const fw=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,pw=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Aw(ht,c,j){let rt=new Wu;const at=new Wr,ut=new Wr,At=new r0,wt=new HE({depthPacking:k1}),Bt=new GE,Ft={},Vt=j.maxTextureSize,qt={[xt]:Dt,[Dt]:xt,[Ht]:Ht},Jt=new b1({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wr},radius:{value:4}},vertexShader:fw,fragmentShader:pw}),_i=Jt.clone();_i.defines.HORIZONTAL_PASS=1;const sn=new Bo;sn.setAttribute("position",new a0(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const hn=new Al(sn,Jt),an=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mt;let en=this.type;this.render=function(Nn,zn,$n){if(an.enabled===!1||an.autoUpdate===!1&&an.needsUpdate===!1||Nn.length===0)return;const Ln=ht.getRenderTarget(),Sn=ht.getActiveCubeFace(),jn=ht.getActiveMipmapLevel(),ur=ht.state;ur.setBlending(Ut),ur.buffers.color.setClear(1,1,1,1),ur.buffers.depth.setTest(!0),ur.setScissorTest(!1);const or=en!==Ct&&this.type===Ct,Ar=en===Ct&&this.type!==Ct;for(let br=0,Vr=Nn.length;br<Vr;br++){const Es=Nn[br],Sr=Es.shadow;if(Sr===void 0){console.warn("THREE.WebGLShadowMap:",Es,"has no shadow.");continue}if(Sr.autoUpdate===!1&&Sr.needsUpdate===!1)continue;at.copy(Sr.mapSize);const hs=Sr.getFrameExtents();if(at.multiply(hs),ut.copy(Sr.mapSize),(at.x>Vt||at.y>Vt)&&(at.x>Vt&&(ut.x=Math.floor(Vt/hs.x),at.x=ut.x*hs.x,Sr.mapSize.x=ut.x),at.y>Vt&&(ut.y=Math.floor(Vt/hs.y),at.y=ut.y*hs.y,Sr.mapSize.y=ut.y)),Sr.map===null||or===!0||Ar===!0){const zs=this.type!==Ct?{minFilter:ps,magFilter:ps}:{};Sr.map!==null&&Sr.map.dispose(),Sr.map=new r1(at.x,at.y,zs),Sr.map.texture.name=Es.name+".shadowMap",Sr.camera.updateProjectionMatrix()}ht.setRenderTarget(Sr.map),ht.clear();const vs=Sr.getViewportCount();for(let zs=0;zs<vs;zs++){const Qo=Sr.getViewport(zs);At.set(ut.x*Qo.x,ut.y*Qo.y,ut.x*Qo.z,ut.y*Qo.w),ur.viewport(At),Sr.updateMatrices(Es,zs),rt=Sr.getFrustum(),En(zn,$n,Sr.camera,Es,this.type)}Sr.isPointLightShadow!==!0&&this.type===Ct&&xn(Sr,$n),Sr.needsUpdate=!1}en=this.type,an.needsUpdate=!1,ht.setRenderTarget(Ln,Sn,jn)};function xn(Nn,zn){const $n=c.update(hn);Jt.defines.VSM_SAMPLES!==Nn.blurSamples&&(Jt.defines.VSM_SAMPLES=Nn.blurSamples,_i.defines.VSM_SAMPLES=Nn.blurSamples,Jt.needsUpdate=!0,_i.needsUpdate=!0),Nn.mapPass===null&&(Nn.mapPass=new r1(at.x,at.y)),Jt.uniforms.shadow_pass.value=Nn.map.texture,Jt.uniforms.resolution.value=Nn.mapSize,Jt.uniforms.radius.value=Nn.radius,ht.setRenderTarget(Nn.mapPass),ht.clear(),ht.renderBufferDirect(zn,null,$n,Jt,hn,null),_i.uniforms.shadow_pass.value=Nn.mapPass.texture,_i.uniforms.resolution.value=Nn.mapSize,_i.uniforms.radius.value=Nn.radius,ht.setRenderTarget(Nn.map),ht.clear(),ht.renderBufferDirect(zn,null,$n,_i,hn,null)}function wn(Nn,zn,$n,Ln){let Sn=null;const jn=$n.isPointLight===!0?Nn.customDistanceMaterial:Nn.customDepthMaterial;if(jn!==void 0)Sn=jn;else if(Sn=$n.isPointLight===!0?Bt:wt,ht.localClippingEnabled&&zn.clipShadows===!0&&Array.isArray(zn.clippingPlanes)&&zn.clippingPlanes.length!==0||zn.displacementMap&&zn.displacementScale!==0||zn.alphaMap&&zn.alphaTest>0||zn.map&&zn.alphaTest>0){const ur=Sn.uuid,or=zn.uuid;let Ar=Ft[ur];Ar===void 0&&(Ar={},Ft[ur]=Ar);let br=Ar[or];br===void 0&&(br=Sn.clone(),Ar[or]=br,zn.addEventListener("dispose",er)),Sn=br}if(Sn.visible=zn.visible,Sn.wireframe=zn.wireframe,Ln===Ct?Sn.side=zn.shadowSide!==null?zn.shadowSide:zn.side:Sn.side=zn.shadowSide!==null?zn.shadowSide:qt[zn.side],Sn.alphaMap=zn.alphaMap,Sn.alphaTest=zn.alphaTest,Sn.map=zn.map,Sn.clipShadows=zn.clipShadows,Sn.clippingPlanes=zn.clippingPlanes,Sn.clipIntersection=zn.clipIntersection,Sn.displacementMap=zn.displacementMap,Sn.displacementScale=zn.displacementScale,Sn.displacementBias=zn.displacementBias,Sn.wireframeLinewidth=zn.wireframeLinewidth,Sn.linewidth=zn.linewidth,$n.isPointLight===!0&&Sn.isMeshDistanceMaterial===!0){const ur=ht.properties.get(Sn);ur.light=$n}return Sn}function En(Nn,zn,$n,Ln,Sn){if(Nn.visible===!1)return;if(Nn.layers.test(zn.layers)&&(Nn.isMesh||Nn.isLine||Nn.isPoints)&&(Nn.castShadow||Nn.receiveShadow&&Sn===Ct)&&(!Nn.frustumCulled||rt.intersectsObject(Nn))){Nn.modelViewMatrix.multiplyMatrices($n.matrixWorldInverse,Nn.matrixWorld);const or=c.update(Nn),Ar=Nn.material;if(Array.isArray(Ar)){const br=or.groups;for(let Vr=0,Es=br.length;Vr<Es;Vr++){const Sr=br[Vr],hs=Ar[Sr.materialIndex];if(hs&&hs.visible){const vs=wn(Nn,hs,Ln,Sn);Nn.onBeforeShadow(ht,Nn,zn,$n,or,vs,Sr),ht.renderBufferDirect($n,null,or,vs,Nn,Sr),Nn.onAfterShadow(ht,Nn,zn,$n,or,vs,Sr)}}}else if(Ar.visible){const br=wn(Nn,Ar,Ln,Sn);Nn.onBeforeShadow(ht,Nn,zn,$n,or,br,null),ht.renderBufferDirect($n,null,or,br,Nn,null),Nn.onAfterShadow(ht,Nn,zn,$n,or,br,null)}}const ur=Nn.children;for(let or=0,Ar=ur.length;or<Ar;or++)En(ur[or],zn,$n,Ln,Sn)}function er(Nn){Nn.target.removeEventListener("dispose",er);for(const $n in Ft){const Ln=Ft[$n],Sn=Nn.target.uuid;Sn in Ln&&(Ln[Sn].dispose(),delete Ln[Sn])}}}function mw(ht){function c(){let nr=!1;const ss=new r0;let gs=null;const Js=new r0(0,0,0,0);return{setMask:function(Fs){gs!==Fs&&!nr&&(ht.colorMask(Fs,Fs,Fs,Fs),gs=Fs)},setLocked:function(Fs){nr=Fs},setClear:function(Fs,Uo,ks,Bs,Xo){Xo===!0&&(Fs*=Bs,Uo*=Bs,ks*=Bs),ss.set(Fs,Uo,ks,Bs),Js.equals(ss)===!1&&(ht.clearColor(Fs,Uo,ks,Bs),Js.copy(ss))},reset:function(){nr=!1,gs=null,Js.set(-1,0,0,0)}}}function j(){let nr=!1,ss=null,gs=null,Js=null;return{setTest:function(Fs){Fs?S0(ht.DEPTH_TEST):Ws(ht.DEPTH_TEST)},setMask:function(Fs){ss!==Fs&&!nr&&(ht.depthMask(Fs),ss=Fs)},setFunc:function(Fs){if(gs!==Fs){switch(Fs){case ao:ht.depthFunc(ht.NEVER);break;case go:ht.depthFunc(ht.ALWAYS);break;case ho:ht.depthFunc(ht.LESS);break;case Ys:ht.depthFunc(ht.LEQUAL);break;case xo:ht.depthFunc(ht.EQUAL);break;case $o:ht.depthFunc(ht.GEQUAL);break;case Pn:ht.depthFunc(ht.GREATER);break;case j0:ht.depthFunc(ht.NOTEQUAL);break;default:ht.depthFunc(ht.LEQUAL)}gs=Fs}},setLocked:function(Fs){nr=Fs},setClear:function(Fs){Js!==Fs&&(ht.clearDepth(Fs),Js=Fs)},reset:function(){nr=!1,ss=null,gs=null,Js=null}}}function rt(){let nr=!1,ss=null,gs=null,Js=null,Fs=null,Uo=null,ks=null,Bs=null,Xo=null;return{setTest:function(po){nr||(po?S0(ht.STENCIL_TEST):Ws(ht.STENCIL_TEST))},setMask:function(po){ss!==po&&!nr&&(ht.stencilMask(po),ss=po)},setFunc:function(po,Hl,Su){(gs!==po||Js!==Hl||Fs!==Su)&&(ht.stencilFunc(po,Hl,Su),gs=po,Js=Hl,Fs=Su)},setOp:function(po,Hl,Su){(Uo!==po||ks!==Hl||Bs!==Su)&&(ht.stencilOp(po,Hl,Su),Uo=po,ks=Hl,Bs=Su)},setLocked:function(po){nr=po},setClear:function(po){Xo!==po&&(ht.clearStencil(po),Xo=po)},reset:function(){nr=!1,ss=null,gs=null,Js=null,Fs=null,Uo=null,ks=null,Bs=null,Xo=null}}}const at=new c,ut=new j,At=new rt,wt=new WeakMap,Bt=new WeakMap;let Ft={},Vt={},qt=new WeakMap,Jt=[],_i=null,sn=!1,hn=null,an=null,en=null,xn=null,wn=null,En=null,er=null,Nn=new Os(0,0,0),zn=0,$n=!1,Ln=null,Sn=null,jn=null,ur=null,or=null;const Ar=ht.getParameter(ht.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let br=!1,Vr=0;const Es=ht.getParameter(ht.VERSION);Es.indexOf("WebGL")!==-1?(Vr=parseFloat(/^WebGL (\d)/.exec(Es)[1]),br=Vr>=1):Es.indexOf("OpenGL ES")!==-1&&(Vr=parseFloat(/^OpenGL ES (\d)/.exec(Es)[1]),br=Vr>=2);let Sr=null,hs={};const vs=ht.getParameter(ht.SCISSOR_BOX),zs=ht.getParameter(ht.VIEWPORT),Qo=new r0().fromArray(vs),m0=new r0().fromArray(zs);function k0(nr,ss,gs,Js){const Fs=new Uint8Array(4),Uo=ht.createTexture();ht.bindTexture(nr,Uo),ht.texParameteri(nr,ht.TEXTURE_MIN_FILTER,ht.NEAREST),ht.texParameteri(nr,ht.TEXTURE_MAG_FILTER,ht.NEAREST);for(let ks=0;ks<gs;ks++)nr===ht.TEXTURE_3D||nr===ht.TEXTURE_2D_ARRAY?ht.texImage3D(ss,0,ht.RGBA,1,1,Js,0,ht.RGBA,ht.UNSIGNED_BYTE,Fs):ht.texImage2D(ss+ks,0,ht.RGBA,1,1,0,ht.RGBA,ht.UNSIGNED_BYTE,Fs);return Uo}const h0={};h0[ht.TEXTURE_2D]=k0(ht.TEXTURE_2D,ht.TEXTURE_2D,1),h0[ht.TEXTURE_CUBE_MAP]=k0(ht.TEXTURE_CUBE_MAP,ht.TEXTURE_CUBE_MAP_POSITIVE_X,6),h0[ht.TEXTURE_2D_ARRAY]=k0(ht.TEXTURE_2D_ARRAY,ht.TEXTURE_2D_ARRAY,1,1),h0[ht.TEXTURE_3D]=k0(ht.TEXTURE_3D,ht.TEXTURE_3D,1,1),at.setClear(0,0,0,1),ut.setClear(1),At.setClear(0),S0(ht.DEPTH_TEST),ut.setFunc(Ys),ls(!1),rs(Et),S0(ht.CULL_FACE),Fr(Ut);function S0(nr){Ft[nr]!==!0&&(ht.enable(nr),Ft[nr]=!0)}function Ws(nr){Ft[nr]!==!1&&(ht.disable(nr),Ft[nr]=!1)}function qr(nr,ss){return Vt[nr]!==ss?(ht.bindFramebuffer(nr,ss),Vt[nr]=ss,nr===ht.DRAW_FRAMEBUFFER&&(Vt[ht.FRAMEBUFFER]=ss),nr===ht.FRAMEBUFFER&&(Vt[ht.DRAW_FRAMEBUFFER]=ss),!0):!1}function ws(nr,ss){let gs=Jt,Js=!1;if(nr){gs=qt.get(ss),gs===void 0&&(gs=[],qt.set(ss,gs));const Fs=nr.textures;if(gs.length!==Fs.length||gs[0]!==ht.COLOR_ATTACHMENT0){for(let Uo=0,ks=Fs.length;Uo<ks;Uo++)gs[Uo]=ht.COLOR_ATTACHMENT0+Uo;gs.length=Fs.length,Js=!0}}else gs[0]!==ht.BACK&&(gs[0]=ht.BACK,Js=!0);Js&&ht.drawBuffers(gs)}function Ms(nr){return _i!==nr?(ht.useProgram(nr),_i=nr,!0):!1}const mr={[fn]:ht.FUNC_ADD,[Cn]:ht.FUNC_SUBTRACT,[dn]:ht.FUNC_REVERSE_SUBTRACT};mr[An]=ht.MIN,mr[nn]=ht.MAX;const Jr={[Zt]:ht.ZERO,[mn]:ht.ONE,[gn]:ht.SRC_COLOR,[Vn]:ht.SRC_ALPHA,[As]:ht.SRC_ALPHA_SATURATE,[Lr]:ht.DST_COLOR,[lr]:ht.DST_ALPHA,[In]:ht.ONE_MINUS_SRC_COLOR,[Zn]:ht.ONE_MINUS_SRC_ALPHA,[Tr]:ht.ONE_MINUS_DST_COLOR,[hr]:ht.ONE_MINUS_DST_ALPHA,[Yr]:ht.CONSTANT_COLOR,[ms]:ht.ONE_MINUS_CONSTANT_COLOR,[Rs]:ht.CONSTANT_ALPHA,[Zs]:ht.ONE_MINUS_CONSTANT_ALPHA};function Fr(nr,ss,gs,Js,Fs,Uo,ks,Bs,Xo,po){if(nr===Ut){sn===!0&&(Ws(ht.BLEND),sn=!1);return}if(sn===!1&&(S0(ht.BLEND),sn=!0),nr!==vn){if(nr!==hn||po!==$n){if((an!==fn||wn!==fn)&&(ht.blendEquation(ht.FUNC_ADD),an=fn,wn=fn),po)switch(nr){case Xt:ht.blendFuncSeparate(ht.ONE,ht.ONE_MINUS_SRC_ALPHA,ht.ONE,ht.ONE_MINUS_SRC_ALPHA);break;case Qt:ht.blendFunc(ht.ONE,ht.ONE);break;case tn:ht.blendFuncSeparate(ht.ZERO,ht.ONE_MINUS_SRC_COLOR,ht.ZERO,ht.ONE);break;case on:ht.blendFuncSeparate(ht.ZERO,ht.SRC_COLOR,ht.ZERO,ht.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",nr);break}else switch(nr){case Xt:ht.blendFuncSeparate(ht.SRC_ALPHA,ht.ONE_MINUS_SRC_ALPHA,ht.ONE,ht.ONE_MINUS_SRC_ALPHA);break;case Qt:ht.blendFunc(ht.SRC_ALPHA,ht.ONE);break;case tn:ht.blendFuncSeparate(ht.ZERO,ht.ONE_MINUS_SRC_COLOR,ht.ZERO,ht.ONE);break;case on:ht.blendFunc(ht.ZERO,ht.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",nr);break}en=null,xn=null,En=null,er=null,Nn.set(0,0,0),zn=0,hn=nr,$n=po}return}Fs=Fs||ss,Uo=Uo||gs,ks=ks||Js,(ss!==an||Fs!==wn)&&(ht.blendEquationSeparate(mr[ss],mr[Fs]),an=ss,wn=Fs),(gs!==en||Js!==xn||Uo!==En||ks!==er)&&(ht.blendFuncSeparate(Jr[gs],Jr[Js],Jr[Uo],Jr[ks]),en=gs,xn=Js,En=Uo,er=ks),(Bs.equals(Nn)===!1||Xo!==zn)&&(ht.blendColor(Bs.r,Bs.g,Bs.b,Xo),Nn.copy(Bs),zn=Xo),hn=nr,$n=!1}function cs(nr,ss){nr.side===Ht?Ws(ht.CULL_FACE):S0(ht.CULL_FACE);let gs=nr.side===Dt;ss&&(gs=!gs),ls(gs),nr.blending===Xt&&nr.transparent===!1?Fr(Ut):Fr(nr.blending,nr.blendEquation,nr.blendSrc,nr.blendDst,nr.blendEquationAlpha,nr.blendSrcAlpha,nr.blendDstAlpha,nr.blendColor,nr.blendAlpha,nr.premultipliedAlpha),ut.setFunc(nr.depthFunc),ut.setTest(nr.depthTest),ut.setMask(nr.depthWrite),at.setMask(nr.colorWrite);const Js=nr.stencilWrite;At.setTest(Js),Js&&(At.setMask(nr.stencilWriteMask),At.setFunc(nr.stencilFunc,nr.stencilRef,nr.stencilFuncMask),At.setOp(nr.stencilFail,nr.stencilZFail,nr.stencilZPass)),Hs(nr.polygonOffset,nr.polygonOffsetFactor,nr.polygonOffsetUnits),nr.alphaToCoverage===!0?S0(ht.SAMPLE_ALPHA_TO_COVERAGE):Ws(ht.SAMPLE_ALPHA_TO_COVERAGE)}function ls(nr){Ln!==nr&&(nr?ht.frontFace(ht.CW):ht.frontFace(ht.CCW),Ln=nr)}function rs(nr){nr!==Tt?(S0(ht.CULL_FACE),nr!==Sn&&(nr===Et?ht.cullFace(ht.BACK):nr===Mt?ht.cullFace(ht.FRONT):ht.cullFace(ht.FRONT_AND_BACK))):Ws(ht.CULL_FACE),Sn=nr}function Is(nr){nr!==jn&&(br&&ht.lineWidth(nr),jn=nr)}function Hs(nr,ss,gs){nr?(S0(ht.POLYGON_OFFSET_FILL),(ur!==ss||or!==gs)&&(ht.polygonOffset(ss,gs),ur=ss,or=gs)):Ws(ht.POLYGON_OFFSET_FILL)}function _o(nr){nr?S0(ht.SCISSOR_TEST):Ws(ht.SCISSOR_TEST)}function Io(nr){nr===void 0&&(nr=ht.TEXTURE0+Ar-1),Sr!==nr&&(ht.activeTexture(nr),Sr=nr)}function d0(nr,ss,gs){gs===void 0&&(Sr===null?gs=ht.TEXTURE0+Ar-1:gs=Sr);let Js=hs[gs];Js===void 0&&(Js={type:void 0,texture:void 0},hs[gs]=Js),(Js.type!==nr||Js.texture!==ss)&&(Sr!==gs&&(ht.activeTexture(gs),Sr=gs),ht.bindTexture(nr,ss||h0[nr]),Js.type=nr,Js.texture=ss)}function $0(){const nr=hs[Sr];nr!==void 0&&nr.type!==void 0&&(ht.bindTexture(nr.type,null),nr.type=void 0,nr.texture=void 0)}function N0(){try{ht.compressedTexImage2D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function qn(){try{ht.compressedTexImage3D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function Tn(){try{ht.texSubImage2D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function Pr(){try{ht.texSubImage3D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function Xr(){try{ht.compressedTexSubImage2D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function jr(){try{ht.compressedTexSubImage3D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function $r(){try{ht.texStorage2D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function qs(){try{ht.texStorage3D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function ys(){try{ht.texImage2D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function Gs(){try{ht.texImage3D.apply(ht,arguments)}catch(nr){console.error("THREE.WebGLState:",nr)}}function y0(nr){Qo.equals(nr)===!1&&(ht.scissor(nr.x,nr.y,nr.z,nr.w),Qo.copy(nr))}function Qs(nr){m0.equals(nr)===!1&&(ht.viewport(nr.x,nr.y,nr.z,nr.w),m0.copy(nr))}function eo(nr,ss){let gs=Bt.get(ss);gs===void 0&&(gs=new WeakMap,Bt.set(ss,gs));let Js=gs.get(nr);Js===void 0&&(Js=ht.getUniformBlockIndex(ss,nr.name),gs.set(nr,Js))}function No(nr,ss){const Js=Bt.get(ss).get(nr);wt.get(ss)!==Js&&(ht.uniformBlockBinding(ss,Js,nr.__bindingPointIndex),wt.set(ss,Js))}function uo(){ht.disable(ht.BLEND),ht.disable(ht.CULL_FACE),ht.disable(ht.DEPTH_TEST),ht.disable(ht.POLYGON_OFFSET_FILL),ht.disable(ht.SCISSOR_TEST),ht.disable(ht.STENCIL_TEST),ht.disable(ht.SAMPLE_ALPHA_TO_COVERAGE),ht.blendEquation(ht.FUNC_ADD),ht.blendFunc(ht.ONE,ht.ZERO),ht.blendFuncSeparate(ht.ONE,ht.ZERO,ht.ONE,ht.ZERO),ht.blendColor(0,0,0,0),ht.colorMask(!0,!0,!0,!0),ht.clearColor(0,0,0,0),ht.depthMask(!0),ht.depthFunc(ht.LESS),ht.clearDepth(1),ht.stencilMask(4294967295),ht.stencilFunc(ht.ALWAYS,0,4294967295),ht.stencilOp(ht.KEEP,ht.KEEP,ht.KEEP),ht.clearStencil(0),ht.cullFace(ht.BACK),ht.frontFace(ht.CCW),ht.polygonOffset(0,0),ht.activeTexture(ht.TEXTURE0),ht.bindFramebuffer(ht.FRAMEBUFFER,null),ht.bindFramebuffer(ht.DRAW_FRAMEBUFFER,null),ht.bindFramebuffer(ht.READ_FRAMEBUFFER,null),ht.useProgram(null),ht.lineWidth(1),ht.scissor(0,0,ht.canvas.width,ht.canvas.height),ht.viewport(0,0,ht.canvas.width,ht.canvas.height),Ft={},Sr=null,hs={},Vt={},qt=new WeakMap,Jt=[],_i=null,sn=!1,hn=null,an=null,en=null,xn=null,wn=null,En=null,er=null,Nn=new Os(0,0,0),zn=0,$n=!1,Ln=null,Sn=null,jn=null,ur=null,or=null,Qo.set(0,0,ht.canvas.width,ht.canvas.height),m0.set(0,0,ht.canvas.width,ht.canvas.height),at.reset(),ut.reset(),At.reset()}return{buffers:{color:at,depth:ut,stencil:At},enable:S0,disable:Ws,bindFramebuffer:qr,drawBuffers:ws,useProgram:Ms,setBlending:Fr,setMaterial:cs,setFlipSided:ls,setCullFace:rs,setLineWidth:Is,setPolygonOffset:Hs,setScissorTest:_o,activeTexture:Io,bindTexture:d0,unbindTexture:$0,compressedTexImage2D:N0,compressedTexImage3D:qn,texImage2D:ys,texImage3D:Gs,updateUBOMapping:eo,uniformBlockBinding:No,texStorage2D:$r,texStorage3D:qs,texSubImage2D:Tn,texSubImage3D:Pr,compressedTexSubImage2D:Xr,compressedTexSubImage3D:jr,scissor:y0,viewport:Qs,reset:uo}}function vw(ht,c,j,rt,at,ut,At){const wt=c.has("WEBGL_multisampled_render_to_texture")?c.get("WEBGL_multisampled_render_to_texture"):null,Bt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Ft=c.has("OCULUS_multiview")?c.get("OCULUS_multiview"):null,Vt=new Wr,qt=new WeakMap;let Jt;const _i=new WeakMap;let sn=[],hn=!1,an=!1;try{an=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function en(qn,Tn){return an?new OffscreenCanvas(qn,Tn):du("canvas")}function xn(qn,Tn,Pr){let Xr=1;const jr=N0(qn);if((jr.width>Pr||jr.height>Pr)&&(Xr=Pr/Math.max(jr.width,jr.height)),Xr<1)if(typeof HTMLImageElement<"u"&&qn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&qn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&qn instanceof ImageBitmap||typeof VideoFrame<"u"&&qn instanceof VideoFrame){const $r=Math.floor(Xr*jr.width),qs=Math.floor(Xr*jr.height);Jt===void 0&&(Jt=en($r,qs));const ys=Tn?en($r,qs):Jt;return ys.width=$r,ys.height=qs,ys.getContext("2d").drawImage(qn,0,0,$r,qs),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jr.width+"x"+jr.height+") to ("+$r+"x"+qs+")."),ys}else return"data"in qn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jr.width+"x"+jr.height+")."),qn;return qn}function wn(qn){return qn.generateMipmaps&&qn.minFilter!==ps&&qn.minFilter!==to}function En(qn){ht.generateMipmap(qn)}function er(qn,Tn,Pr,Xr,jr=!1){if(qn!==null){if(ht[qn]!==void 0)return ht[qn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+qn+"'")}let $r=Tn;if(Tn===ht.RED&&(Pr===ht.FLOAT&&($r=ht.R32F),Pr===ht.HALF_FLOAT&&($r=ht.R16F),Pr===ht.UNSIGNED_BYTE&&($r=ht.R8)),Tn===ht.RED_INTEGER&&(Pr===ht.UNSIGNED_BYTE&&($r=ht.R8UI),Pr===ht.UNSIGNED_SHORT&&($r=ht.R16UI),Pr===ht.UNSIGNED_INT&&($r=ht.R32UI),Pr===ht.BYTE&&($r=ht.R8I),Pr===ht.SHORT&&($r=ht.R16I),Pr===ht.INT&&($r=ht.R32I)),Tn===ht.RG&&(Pr===ht.FLOAT&&($r=ht.RG32F),Pr===ht.HALF_FLOAT&&($r=ht.RG16F),Pr===ht.UNSIGNED_BYTE&&($r=ht.RG8)),Tn===ht.RG_INTEGER&&(Pr===ht.UNSIGNED_BYTE&&($r=ht.RG8UI),Pr===ht.UNSIGNED_SHORT&&($r=ht.RG16UI),Pr===ht.UNSIGNED_INT&&($r=ht.RG32UI),Pr===ht.BYTE&&($r=ht.RG8I),Pr===ht.SHORT&&($r=ht.RG16I),Pr===ht.INT&&($r=ht.RG32I)),Tn===ht.RGB&&Pr===ht.UNSIGNED_INT_5_9_9_9_REV&&($r=ht.RGB9_E5),Tn===ht.RGBA){const qs=jr?Iu:u0.getTransfer(Xr);Pr===ht.FLOAT&&($r=ht.RGBA32F),Pr===ht.HALF_FLOAT&&($r=ht.RGBA16F),Pr===ht.UNSIGNED_BYTE&&($r=qs===g0?ht.SRGB8_ALPHA8:ht.RGBA8),Pr===ht.UNSIGNED_SHORT_4_4_4_4&&($r=ht.RGBA4),Pr===ht.UNSIGNED_SHORT_5_5_5_1&&($r=ht.RGB5_A1)}return($r===ht.R16F||$r===ht.R32F||$r===ht.RG16F||$r===ht.RG32F||$r===ht.RGBA16F||$r===ht.RGBA32F)&&c.get("EXT_color_buffer_float"),$r}function Nn(qn,Tn){return wn(qn)===!0||qn.isFramebufferTexture&&qn.minFilter!==ps&&qn.minFilter!==to?Math.log2(Math.max(Tn.width,Tn.height))+1:qn.mipmaps!==void 0&&qn.mipmaps.length>0?qn.mipmaps.length:qn.isCompressedTexture&&Array.isArray(qn.image)?Tn.mipmaps.length:1}function zn(qn){const Tn=qn.target;Tn.removeEventListener("dispose",zn),Ln(Tn),Tn.isVideoTexture&&qt.delete(Tn)}function $n(qn){const Tn=qn.target;Tn.removeEventListener("dispose",$n),jn(Tn)}function Ln(qn){const Tn=rt.get(qn);if(Tn.__webglInit===void 0)return;const Pr=qn.source,Xr=_i.get(Pr);if(Xr){const jr=Xr[Tn.__cacheKey];jr.usedTimes--,jr.usedTimes===0&&Sn(qn),Object.keys(Xr).length===0&&_i.delete(Pr)}rt.remove(qn)}function Sn(qn){const Tn=rt.get(qn);ht.deleteTexture(Tn.__webglTexture);const Pr=qn.source,Xr=_i.get(Pr);delete Xr[Tn.__cacheKey],At.memory.textures--}function jn(qn){const Tn=rt.get(qn);if(qn.depthTexture&&qn.depthTexture.dispose(),qn.isWebGLCubeRenderTarget)for(let Xr=0;Xr<6;Xr++){if(Array.isArray(Tn.__webglFramebuffer[Xr]))for(let jr=0;jr<Tn.__webglFramebuffer[Xr].length;jr++)ht.deleteFramebuffer(Tn.__webglFramebuffer[Xr][jr]);else ht.deleteFramebuffer(Tn.__webglFramebuffer[Xr]);Tn.__webglDepthbuffer&&ht.deleteRenderbuffer(Tn.__webglDepthbuffer[Xr])}else{if(Array.isArray(Tn.__webglFramebuffer))for(let Xr=0;Xr<Tn.__webglFramebuffer.length;Xr++)ht.deleteFramebuffer(Tn.__webglFramebuffer[Xr]);else ht.deleteFramebuffer(Tn.__webglFramebuffer);if(Tn.__webglDepthbuffer&&ht.deleteRenderbuffer(Tn.__webglDepthbuffer),Tn.__webglMultisampledFramebuffer&&ht.deleteFramebuffer(Tn.__webglMultisampledFramebuffer),Tn.__webglColorRenderbuffer)for(let Xr=0;Xr<Tn.__webglColorRenderbuffer.length;Xr++)Tn.__webglColorRenderbuffer[Xr]&&ht.deleteRenderbuffer(Tn.__webglColorRenderbuffer[Xr]);Tn.__webglDepthRenderbuffer&&ht.deleteRenderbuffer(Tn.__webglDepthRenderbuffer)}const Pr=qn.textures;for(let Xr=0,jr=Pr.length;Xr<jr;Xr++){const $r=rt.get(Pr[Xr]);$r.__webglTexture&&(ht.deleteTexture($r.__webglTexture),At.memory.textures--),rt.remove(Pr[Xr])}rt.remove(qn)}let ur=0;function or(){ur=0}function Ar(){const qn=ur;return qn>=at.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+qn+" texture units while this GPU supports only "+at.maxTextures),ur+=1,qn}function br(qn){const Tn=[];return Tn.push(qn.wrapS),Tn.push(qn.wrapT),Tn.push(qn.wrapR||0),Tn.push(qn.magFilter),Tn.push(qn.minFilter),Tn.push(qn.anisotropy),Tn.push(qn.internalFormat),Tn.push(qn.format),Tn.push(qn.type),Tn.push(qn.generateMipmaps),Tn.push(qn.premultiplyAlpha),Tn.push(qn.flipY),Tn.push(qn.unpackAlignment),Tn.push(qn.colorSpace),Tn.join()}function Vr(qn,Tn){const Pr=rt.get(qn);if(qn.isVideoTexture&&d0(qn),qn.isRenderTargetTexture===!1&&qn.version>0&&Pr.__version!==qn.version){const Xr=qn.image;if(Xr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Xr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(Ws(Pr,qn,Tn))return}j.bindTexture(ht.TEXTURE_2D,Pr.__webglTexture,ht.TEXTURE0+Tn)}function Es(qn,Tn){const Pr=rt.get(qn);if(qn.version>0&&Pr.__version!==qn.version){Ws(Pr,qn,Tn);return}j.bindTexture(ht.TEXTURE_2D_ARRAY,Pr.__webglTexture,ht.TEXTURE0+Tn)}function Sr(qn,Tn){const Pr=rt.get(qn);if(qn.version>0&&Pr.__version!==qn.version){Ws(Pr,qn,Tn);return}j.bindTexture(ht.TEXTURE_3D,Pr.__webglTexture,ht.TEXTURE0+Tn)}function hs(qn,Tn){const Pr=rt.get(qn);if(qn.version>0&&Pr.__version!==qn.version){qr(Pr,qn,Tn);return}j.bindTexture(ht.TEXTURE_CUBE_MAP,Pr.__webglTexture,ht.TEXTURE0+Tn)}const vs={[Wn]:ht.REPEAT,[rr]:ht.CLAMP_TO_EDGE,[ns]:ht.MIRRORED_REPEAT},zs={[ps]:ht.NEAREST,[os]:ht.NEAREST_MIPMAP_NEAREST,[Cs]:ht.NEAREST_MIPMAP_LINEAR,[to]:ht.LINEAR,[Cr]:ht.LINEAR_MIPMAP_NEAREST,[o0]:ht.LINEAR_MIPMAP_LINEAR},Qo={[lp]:ht.NEVER,[pp]:ht.ALWAYS,[cp]:ht.LESS,[T2]:ht.LEQUAL,[up]:ht.EQUAL,[fp]:ht.GEQUAL,[hp]:ht.GREATER,[dp]:ht.NOTEQUAL};function m0(qn,Tn){if(Tn.type===P0&&c.has("OES_texture_float_linear")===!1&&(Tn.magFilter===to||Tn.magFilter===Cr||Tn.magFilter===Cs||Tn.magFilter===o0||Tn.minFilter===to||Tn.minFilter===Cr||Tn.minFilter===Cs||Tn.minFilter===o0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ht.texParameteri(qn,ht.TEXTURE_WRAP_S,vs[Tn.wrapS]),ht.texParameteri(qn,ht.TEXTURE_WRAP_T,vs[Tn.wrapT]),(qn===ht.TEXTURE_3D||qn===ht.TEXTURE_2D_ARRAY)&&ht.texParameteri(qn,ht.TEXTURE_WRAP_R,vs[Tn.wrapR]),ht.texParameteri(qn,ht.TEXTURE_MAG_FILTER,zs[Tn.magFilter]),ht.texParameteri(qn,ht.TEXTURE_MIN_FILTER,zs[Tn.minFilter]),Tn.compareFunction&&(ht.texParameteri(qn,ht.TEXTURE_COMPARE_MODE,ht.COMPARE_REF_TO_TEXTURE),ht.texParameteri(qn,ht.TEXTURE_COMPARE_FUNC,Qo[Tn.compareFunction])),c.has("EXT_texture_filter_anisotropic")===!0){if(Tn.magFilter===ps||Tn.minFilter!==Cs&&Tn.minFilter!==o0||Tn.type===P0&&c.has("OES_texture_float_linear")===!1)return;if(Tn.anisotropy>1||rt.get(Tn).__currentAnisotropy){const Pr=c.get("EXT_texture_filter_anisotropic");ht.texParameterf(qn,Pr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Tn.anisotropy,at.getMaxAnisotropy())),rt.get(Tn).__currentAnisotropy=Tn.anisotropy}}}function k0(qn,Tn){let Pr=!1;qn.__webglInit===void 0&&(qn.__webglInit=!0,Tn.addEventListener("dispose",zn));const Xr=Tn.source;let jr=_i.get(Xr);jr===void 0&&(jr={},_i.set(Xr,jr));const $r=br(Tn);if($r!==qn.__cacheKey){jr[$r]===void 0&&(jr[$r]={texture:ht.createTexture(),usedTimes:0},At.memory.textures++,Pr=!0),jr[$r].usedTimes++;const qs=jr[qn.__cacheKey];qs!==void 0&&(jr[qn.__cacheKey].usedTimes--,qs.usedTimes===0&&Sn(Tn)),qn.__cacheKey=$r,qn.__webglTexture=jr[$r].texture}return Pr}function h0(qn){hn=qn}function S0(){const qn=hn;hn=!1;for(const Tn of sn)Ws(Tn.textureProperties,Tn.texture,Tn.slot),Tn.texture.isPendingDeferredUpload=!1;sn=[],hn=qn}function Ws(qn,Tn,Pr){if(hn)return Tn.isPendingDeferredUpload||(Tn.isPendingDeferredUpload=!0,sn.push({textureProperties:qn,texture:Tn,slot:Pr})),!1;let Xr=ht.TEXTURE_2D;(Tn.isDataArrayTexture||Tn.isCompressedArrayTexture)&&(Xr=ht.TEXTURE_2D_ARRAY),Tn.isData3DTexture&&(Xr=ht.TEXTURE_3D);const jr=k0(qn,Tn),$r=Tn.source;j.bindTexture(Xr,qn.__webglTexture,ht.TEXTURE0+Pr);const qs=rt.get($r);if($r.version!==qs.__version||jr===!0){j.activeTexture(ht.TEXTURE0+Pr);const ys=u0.getPrimaries(u0.workingColorSpace),Gs=Tn.colorSpace===Ol?null:u0.getPrimaries(Tn.colorSpace),y0=Tn.colorSpace===Ol||ys===Gs?ht.NONE:ht.BROWSER_DEFAULT_WEBGL;ht.pixelStorei(ht.UNPACK_FLIP_Y_WEBGL,Tn.flipY),ht.pixelStorei(ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Tn.premultiplyAlpha),ht.pixelStorei(ht.UNPACK_ALIGNMENT,Tn.unpackAlignment),ht.pixelStorei(ht.UNPACK_COLORSPACE_CONVERSION_WEBGL,y0);let Qs=xn(Tn.image,!1,at.maxTextureSize);Qs=$0(Tn,Qs);const eo=ut.convert(Tn.format,Tn.colorSpace),No=ut.convert(Tn.type);let uo=er(Tn.internalFormat,eo,No,Tn.colorSpace,Tn.isVideoTexture);m0(Xr,Tn);let nr;const ss=Tn.mipmaps,gs=Tn.isVideoTexture!==!0,Js=qs.__version===void 0||jr===!0,Fs=$r.dataReady,Uo=Nn(Tn,Qs);if(Tn.isDepthTexture)uo=ht.DEPTH_COMPONENT16,Tn.type===P0?uo=ht.DEPTH_COMPONENT32F:Tn.type===Ql?uo=ht.DEPTH_COMPONENT24:Tn.type===y1&&(uo=ht.DEPTH24_STENCIL8),Js&&(gs?j.texStorage2D(ht.TEXTURE_2D,1,uo,Qs.width,Qs.height):j.texImage2D(ht.TEXTURE_2D,0,uo,Qs.width,Qs.height,0,eo,No,null));else if(Tn.isDataTexture)if(ss.length>0){gs&&Js&&j.texStorage2D(ht.TEXTURE_2D,Uo,uo,ss[0].width,ss[0].height);for(let ks=0,Bs=ss.length;ks<Bs;ks++)nr=ss[ks],gs?Fs&&j.texSubImage2D(ht.TEXTURE_2D,ks,0,0,nr.width,nr.height,eo,No,nr.data):j.texImage2D(ht.TEXTURE_2D,ks,uo,nr.width,nr.height,0,eo,No,nr.data);Tn.generateMipmaps=!1}else gs?(Js&&j.texStorage2D(ht.TEXTURE_2D,Uo,uo,Qs.width,Qs.height),Fs&&j.texSubImage2D(ht.TEXTURE_2D,0,0,0,Qs.width,Qs.height,eo,No,Qs.data)):j.texImage2D(ht.TEXTURE_2D,0,uo,Qs.width,Qs.height,0,eo,No,Qs.data);else if(Tn.isCompressedTexture)if(Tn.isCompressedArrayTexture){gs&&Js&&j.texStorage3D(ht.TEXTURE_2D_ARRAY,Uo,uo,ss[0].width,ss[0].height,Qs.depth);for(let ks=0,Bs=ss.length;ks<Bs;ks++)nr=ss[ks],Tn.format!==Xn?eo!==null?gs?Fs&&j.compressedTexSubImage3D(ht.TEXTURE_2D_ARRAY,ks,0,0,0,nr.width,nr.height,Qs.depth,eo,nr.data,0,0):j.compressedTexImage3D(ht.TEXTURE_2D_ARRAY,ks,uo,nr.width,nr.height,Qs.depth,0,nr.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gs?Fs&&j.texSubImage3D(ht.TEXTURE_2D_ARRAY,ks,0,0,0,nr.width,nr.height,Qs.depth,eo,No,nr.data):j.texImage3D(ht.TEXTURE_2D_ARRAY,ks,uo,nr.width,nr.height,Qs.depth,0,eo,No,nr.data)}else{gs&&Js&&j.texStorage2D(ht.TEXTURE_2D,Uo,uo,ss[0].width,ss[0].height);for(let ks=0,Bs=ss.length;ks<Bs;ks++)nr=ss[ks],Tn.format!==Xn?eo!==null?gs?Fs&&j.compressedTexSubImage2D(ht.TEXTURE_2D,ks,0,0,nr.width,nr.height,eo,nr.data):j.compressedTexImage2D(ht.TEXTURE_2D,ks,uo,nr.width,nr.height,0,nr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gs?Fs&&j.texSubImage2D(ht.TEXTURE_2D,ks,0,0,nr.width,nr.height,eo,No,nr.data):j.texImage2D(ht.TEXTURE_2D,ks,uo,nr.width,nr.height,0,eo,No,nr.data)}else if(Tn.isDataArrayTexture)gs?(Js&&j.texStorage3D(ht.TEXTURE_2D_ARRAY,Uo,uo,Qs.width,Qs.height,Qs.depth),Fs&&j.texSubImage3D(ht.TEXTURE_2D_ARRAY,0,0,0,0,Qs.width,Qs.height,Qs.depth,eo,No,Qs.data)):j.texImage3D(ht.TEXTURE_2D_ARRAY,0,uo,Qs.width,Qs.height,Qs.depth,0,eo,No,Qs.data);else if(Tn.isData3DTexture)gs?(Js&&j.texStorage3D(ht.TEXTURE_3D,Uo,uo,Qs.width,Qs.height,Qs.depth),Fs&&j.texSubImage3D(ht.TEXTURE_3D,0,0,0,0,Qs.width,Qs.height,Qs.depth,eo,No,Qs.data)):j.texImage3D(ht.TEXTURE_3D,0,uo,Qs.width,Qs.height,Qs.depth,0,eo,No,Qs.data);else if(Tn.isFramebufferTexture){if(Js)if(gs)j.texStorage2D(ht.TEXTURE_2D,Uo,uo,Qs.width,Qs.height);else{let ks=Qs.width,Bs=Qs.height;for(let Xo=0;Xo<Uo;Xo++)j.texImage2D(ht.TEXTURE_2D,Xo,uo,ks,Bs,0,eo,No,null),ks>>=1,Bs>>=1}}else if(ss.length>0){if(gs&&Js){const ks=N0(ss[0]);j.texStorage2D(ht.TEXTURE_2D,Uo,uo,ks.width,ks.height)}for(let ks=0,Bs=ss.length;ks<Bs;ks++)nr=ss[ks],gs?Fs&&j.texSubImage2D(ht.TEXTURE_2D,ks,0,0,eo,No,nr):j.texImage2D(ht.TEXTURE_2D,ks,uo,eo,No,nr);Tn.generateMipmaps=!1}else if(gs){if(Js){const ks=N0(Qs);j.texStorage2D(ht.TEXTURE_2D,Uo,uo,ks.width,ks.height)}Fs&&j.texSubImage2D(ht.TEXTURE_2D,0,0,0,eo,No,Qs)}else j.texImage2D(ht.TEXTURE_2D,0,uo,eo,No,Qs);wn(Tn)&&En(Xr),qs.__version=$r.version,Tn.onUpdate&&Tn.onUpdate(Tn)}return qn.__version=Tn.version,!0}function qr(qn,Tn,Pr){if(Tn.image.length!==6)return;const Xr=k0(qn,Tn),jr=Tn.source;j.bindTexture(ht.TEXTURE_CUBE_MAP,qn.__webglTexture,ht.TEXTURE0+Pr);const $r=rt.get(jr);if(jr.version!==$r.__version||Xr===!0){j.activeTexture(ht.TEXTURE0+Pr);const qs=u0.getPrimaries(u0.workingColorSpace),ys=Tn.colorSpace===Ol?null:u0.getPrimaries(Tn.colorSpace),Gs=Tn.colorSpace===Ol||qs===ys?ht.NONE:ht.BROWSER_DEFAULT_WEBGL;ht.pixelStorei(ht.UNPACK_FLIP_Y_WEBGL,Tn.flipY),ht.pixelStorei(ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Tn.premultiplyAlpha),ht.pixelStorei(ht.UNPACK_ALIGNMENT,Tn.unpackAlignment),ht.pixelStorei(ht.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gs);const y0=Tn.isCompressedTexture||Tn.image[0].isCompressedTexture,Qs=Tn.image[0]&&Tn.image[0].isDataTexture,eo=[];for(let Bs=0;Bs<6;Bs++)!y0&&!Qs?eo[Bs]=xn(Tn.image[Bs],!0,at.maxCubemapSize):eo[Bs]=Qs?Tn.image[Bs].image:Tn.image[Bs],eo[Bs]=$0(Tn,eo[Bs]);const No=eo[0],uo=ut.convert(Tn.format,Tn.colorSpace),nr=ut.convert(Tn.type),ss=er(Tn.internalFormat,uo,nr,Tn.colorSpace),gs=Tn.isVideoTexture!==!0,Js=$r.__version===void 0||Xr===!0,Fs=jr.dataReady;let Uo=Nn(Tn,No);m0(ht.TEXTURE_CUBE_MAP,Tn);let ks;if(y0){gs&&Js&&j.texStorage2D(ht.TEXTURE_CUBE_MAP,Uo,ss,No.width,No.height);for(let Bs=0;Bs<6;Bs++){ks=eo[Bs].mipmaps;for(let Xo=0;Xo<ks.length;Xo++){const po=ks[Xo];Tn.format!==Xn?uo!==null?gs?Fs&&j.compressedTexSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo,0,0,po.width,po.height,uo,po.data):j.compressedTexImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo,ss,po.width,po.height,0,po.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):gs?Fs&&j.texSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo,0,0,po.width,po.height,uo,nr,po.data):j.texImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo,ss,po.width,po.height,0,uo,nr,po.data)}}}else{if(ks=Tn.mipmaps,gs&&Js){ks.length>0&&Uo++;const Bs=N0(eo[0]);j.texStorage2D(ht.TEXTURE_CUBE_MAP,Uo,ss,Bs.width,Bs.height)}for(let Bs=0;Bs<6;Bs++)if(Qs){gs?Fs&&j.texSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,0,0,0,eo[Bs].width,eo[Bs].height,uo,nr,eo[Bs].data):j.texImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,0,ss,eo[Bs].width,eo[Bs].height,0,uo,nr,eo[Bs].data);for(let Xo=0;Xo<ks.length;Xo++){const Hl=ks[Xo].image[Bs].image;gs?Fs&&j.texSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo+1,0,0,Hl.width,Hl.height,uo,nr,Hl.data):j.texImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo+1,ss,Hl.width,Hl.height,0,uo,nr,Hl.data)}}else{gs?Fs&&j.texSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,0,0,0,uo,nr,eo[Bs]):j.texImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,0,ss,uo,nr,eo[Bs]);for(let Xo=0;Xo<ks.length;Xo++){const po=ks[Xo];gs?Fs&&j.texSubImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo+1,0,0,uo,nr,po.image[Bs]):j.texImage2D(ht.TEXTURE_CUBE_MAP_POSITIVE_X+Bs,Xo+1,ss,uo,nr,po.image[Bs])}}}wn(Tn)&&En(ht.TEXTURE_CUBE_MAP),$r.__version=jr.version,Tn.onUpdate&&Tn.onUpdate(Tn)}qn.__version=Tn.version}function ws(qn,Tn,Pr,Xr,jr,$r){const qs=ut.convert(Pr.format,Pr.colorSpace),ys=ut.convert(Pr.type),Gs=er(Pr.internalFormat,qs,ys,Pr.colorSpace);if(!rt.get(Tn).__hasExternalTextures){const eo=Math.max(1,Tn.width>>$r),No=Math.max(1,Tn.height>>$r);Tn.isWebGLMultiviewRenderTarget===!0?j.texStorage3D(ht.TEXTURE_2D_ARRAY,0,Gs,Tn.width,Tn.height,Tn.numViews):jr===ht.TEXTURE_3D||jr===ht.TEXTURE_2D_ARRAY?j.texImage3D(jr,$r,Gs,eo,No,Tn.depth,0,qs,ys,null):j.texImage2D(jr,$r,Gs,eo,No,0,qs,ys,null)}j.bindFramebuffer(ht.FRAMEBUFFER,qn);const Qs=Io(Tn);Tn.isWebGLMultiviewRenderTarget===!0?Qs?Ft.framebufferTextureMultisampleMultiviewOVR(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,rt.get(Pr).__webglTexture,0,_o(Tn),0,Tn.numViews):Ft.framebufferTextureMultiviewOVR(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0,rt.get(Pr).__webglTexture,0,0,Tn.numViews):(jr===ht.TEXTURE_2D||jr>=ht.TEXTURE_CUBE_MAP_POSITIVE_X&&jr<=ht.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(Qs?wt.framebufferTexture2DMultisampleEXT(ht.FRAMEBUFFER,Xr,jr,rt.get(Pr).__webglTexture,0,_o(Tn)):ht.framebufferTexture2D(ht.FRAMEBUFFER,Xr,jr,rt.get(Pr).__webglTexture,$r)),j.bindFramebuffer(ht.FRAMEBUFFER,null)}function Ms(qn,Tn,Pr){if(ht.bindRenderbuffer(ht.RENDERBUFFER,qn),Tn.isWebGLMultiviewRenderTarget===!0){const Xr=Io(Tn),jr=Tn.numViews,$r=Tn.depthTexture;let qs=ht.DEPTH_COMPONENT24,ys=ht.DEPTH_ATTACHMENT;$r&&$r.isDepthTexture&&($r.type===P0?qs=ht.DEPTH_COMPONENT32F:$r.type===y1&&(qs=ht.DEPTH24_STENCIL8,ys=ht.DEPTH_STENCIL_ATTACHMENT));let Gs=rt.get(Tn.depthTexture).__webglTexture;Gs===void 0&&(Gs=ht.createTexture(),ht.bindTexture(ht.TEXTURE_2D_ARRAY,Gs),ht.texStorage3D(ht.TEXTURE_2D_ARRAY,1,qs,Tn.width,Tn.height,jr)),Xr?Ft.framebufferTextureMultisampleMultiviewOVR(ht.FRAMEBUFFER,ys,Gs,0,_o(Tn),0,jr):Ft.framebufferTextureMultiviewOVR(ht.FRAMEBUFFER,ys,Gs,0,0,jr)}else if(Tn.depthBuffer&&!Tn.stencilBuffer){let Xr=ht.DEPTH_COMPONENT24;if(Pr||Io(Tn)){const jr=Tn.depthTexture;jr&&jr.isDepthTexture&&(jr.type===P0?Xr=ht.DEPTH_COMPONENT32F:jr.type===Ql&&(Xr=ht.DEPTH_COMPONENT24));const $r=_o(Tn);Io(Tn)?wt.renderbufferStorageMultisampleEXT(ht.RENDERBUFFER,$r,Xr,Tn.width,Tn.height):ht.renderbufferStorageMultisample(ht.RENDERBUFFER,$r,Xr,Tn.width,Tn.height)}else ht.renderbufferStorage(ht.RENDERBUFFER,Xr,Tn.width,Tn.height);ht.framebufferRenderbuffer(ht.FRAMEBUFFER,ht.DEPTH_ATTACHMENT,ht.RENDERBUFFER,qn)}else if(Tn.depthBuffer&&Tn.stencilBuffer){const Xr=_o(Tn);Pr&&Io(Tn)===!1?ht.renderbufferStorageMultisample(ht.RENDERBUFFER,Xr,ht.DEPTH24_STENCIL8,Tn.width,Tn.height):Io(Tn)?wt.renderbufferStorageMultisampleEXT(ht.RENDERBUFFER,Xr,ht.DEPTH24_STENCIL8,Tn.width,Tn.height):ht.renderbufferStorage(ht.RENDERBUFFER,ht.DEPTH_STENCIL,Tn.width,Tn.height),ht.framebufferRenderbuffer(ht.FRAMEBUFFER,ht.DEPTH_STENCIL_ATTACHMENT,ht.RENDERBUFFER,qn)}else{const Xr=Tn.textures;for(let jr=0;jr<Xr.length;jr++){const $r=Xr[jr],qs=ut.convert($r.format,$r.colorSpace),ys=ut.convert($r.type),Gs=er($r.internalFormat,qs,ys,$r.colorSpace),y0=_o(Tn);Pr&&Io(Tn)===!1?ht.renderbufferStorageMultisample(ht.RENDERBUFFER,y0,Gs,Tn.width,Tn.height):Io(Tn)?wt.renderbufferStorageMultisampleEXT(ht.RENDERBUFFER,y0,Gs,Tn.width,Tn.height):ht.renderbufferStorage(ht.RENDERBUFFER,Gs,Tn.width,Tn.height)}}ht.bindRenderbuffer(ht.RENDERBUFFER,null)}function mr(qn,Tn){if(Tn&&Tn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(j.bindFramebuffer(ht.FRAMEBUFFER,qn),!(Tn.depthTexture&&Tn.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!rt.get(Tn.depthTexture).__webglTexture||Tn.depthTexture.image.width!==Tn.width||Tn.depthTexture.image.height!==Tn.height)&&(Tn.depthTexture.image.width=Tn.width,Tn.depthTexture.image.height=Tn.height,Tn.depthTexture.needsUpdate=!0),Vr(Tn.depthTexture,0),Tn.depthTexture.image.depth!=1?Es(Tn.depthTexture,0):Vr(Tn.depthTexture,0);const Xr=rt.get(Tn.depthTexture).__webglTexture,jr=_o(Tn);if(Tn.isWebGLMultiviewRenderTarget===!0){const $r=Io(Tn),qs=Tn.numViews;if(Tn.depthTexture.format===yr)$r?Ft.framebufferTextureMultisampleMultiviewOVR(ht.FRAMEBUFFER,ht.DEPTH_ATTACHMENT,Xr,0,jr,0,qs):Ft.framebufferTextureMultiviewOVR(ht.FRAMEBUFFER,ht.DEPTH_ATTACHMENT,Xr,0,0,qs);else if(Tn.depthTexture.format===Nr)$r?Ft.framebufferTextureMultisampleMultiviewOVR(ht.FRAMEBUFFER,ht.DEPTH_STENCIL_ATTACHMENT,Xr,0,jr,0,qs):Ft.framebufferTextureMultiviewOVR(ht.FRAMEBUFFER,ht.DEPTH_STENCIL_ATTACHMENT,Xr,0,0,qs);else throw new Error("Unknown depthTexture format")}else if(Tn.depthTexture.format===yr)Io(Tn)?wt.framebufferTexture2DMultisampleEXT(ht.FRAMEBUFFER,ht.DEPTH_ATTACHMENT,ht.TEXTURE_2D,Xr,0,jr):ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.DEPTH_ATTACHMENT,ht.TEXTURE_2D,Xr,0);else if(Tn.depthTexture.format===Nr)Io(Tn)?wt.framebufferTexture2DMultisampleEXT(ht.FRAMEBUFFER,ht.DEPTH_STENCIL_ATTACHMENT,ht.TEXTURE_2D,Xr,0,jr):ht.framebufferTexture2D(ht.FRAMEBUFFER,ht.DEPTH_STENCIL_ATTACHMENT,ht.TEXTURE_2D,Xr,0);else throw new Error("Unknown depthTexture format")}function Jr(qn){const Tn=rt.get(qn),Pr=qn.isWebGLCubeRenderTarget===!0;if(qn.depthTexture&&!Tn.__autoAllocateDepthBuffer){if(Pr)throw new Error("target.depthTexture not supported in Cube render targets");mr(Tn.__webglFramebuffer,qn)}else if(Pr){Tn.__webglDepthbuffer=[];for(let Xr=0;Xr<6;Xr++)j.bindFramebuffer(ht.FRAMEBUFFER,Tn.__webglFramebuffer[Xr]),Tn.__webglDepthbuffer[Xr]=ht.createRenderbuffer(),Ms(Tn.__webglDepthbuffer[Xr],qn,!1)}else j.bindFramebuffer(ht.FRAMEBUFFER,Tn.__webglFramebuffer),Tn.__webglDepthbuffer=ht.createRenderbuffer(),Ms(Tn.__webglDepthbuffer,qn,!1);j.bindFramebuffer(ht.FRAMEBUFFER,null)}function Fr(qn,Tn,Pr){const Xr=rt.get(qn);Tn!==void 0&&ws(Xr.__webglFramebuffer,qn,qn.texture,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,0),Pr!==void 0&&Jr(qn)}function cs(qn){const Tn=qn.texture,Pr=rt.get(qn),Xr=rt.get(Tn);qn.addEventListener("dispose",$n);const jr=qn.textures,$r=qn.isWebGLCubeRenderTarget===!0,qs=jr.length>1;if(qs||(Xr.__webglTexture===void 0&&(Xr.__webglTexture=ht.createTexture()),Xr.__version=Tn.version,At.memory.textures++),$r){Pr.__webglFramebuffer=[];for(let ys=0;ys<6;ys++)if(Tn.mipmaps&&Tn.mipmaps.length>0){Pr.__webglFramebuffer[ys]=[];for(let Gs=0;Gs<Tn.mipmaps.length;Gs++)Pr.__webglFramebuffer[ys][Gs]=ht.createFramebuffer()}else Pr.__webglFramebuffer[ys]=ht.createFramebuffer()}else{if(Tn.mipmaps&&Tn.mipmaps.length>0){Pr.__webglFramebuffer=[];for(let ys=0;ys<Tn.mipmaps.length;ys++)Pr.__webglFramebuffer[ys]=ht.createFramebuffer()}else Pr.__webglFramebuffer=ht.createFramebuffer();if(qs)for(let ys=0,Gs=jr.length;ys<Gs;ys++){const y0=rt.get(jr[ys]);y0.__webglTexture===void 0&&(y0.__webglTexture=ht.createTexture(),At.memory.textures++)}if(qn.samples>0&&Io(qn)===!1){Pr.__webglMultisampledFramebuffer=ht.createFramebuffer(),Pr.__webglColorRenderbuffer=[],j.bindFramebuffer(ht.FRAMEBUFFER,Pr.__webglMultisampledFramebuffer);for(let ys=0;ys<jr.length;ys++){const Gs=jr[ys];Pr.__webglColorRenderbuffer[ys]=ht.createRenderbuffer(),ht.bindRenderbuffer(ht.RENDERBUFFER,Pr.__webglColorRenderbuffer[ys]);const y0=ut.convert(Gs.format,Gs.colorSpace),Qs=ut.convert(Gs.type),eo=er(Gs.internalFormat,y0,Qs,Gs.colorSpace,qn.isXRRenderTarget===!0),No=_o(qn);ht.renderbufferStorageMultisample(ht.RENDERBUFFER,No,eo,qn.width,qn.height),ht.framebufferRenderbuffer(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0+ys,ht.RENDERBUFFER,Pr.__webglColorRenderbuffer[ys])}ht.bindRenderbuffer(ht.RENDERBUFFER,null),qn.depthBuffer&&(Pr.__webglDepthRenderbuffer=ht.createRenderbuffer(),Ms(Pr.__webglDepthRenderbuffer,qn,!0)),j.bindFramebuffer(ht.FRAMEBUFFER,null)}}if($r){j.bindTexture(ht.TEXTURE_CUBE_MAP,Xr.__webglTexture),m0(ht.TEXTURE_CUBE_MAP,Tn);for(let ys=0;ys<6;ys++)if(Tn.mipmaps&&Tn.mipmaps.length>0)for(let Gs=0;Gs<Tn.mipmaps.length;Gs++)ws(Pr.__webglFramebuffer[ys][Gs],qn,Tn,ht.COLOR_ATTACHMENT0,ht.TEXTURE_CUBE_MAP_POSITIVE_X+ys,Gs);else ws(Pr.__webglFramebuffer[ys],qn,Tn,ht.COLOR_ATTACHMENT0,ht.TEXTURE_CUBE_MAP_POSITIVE_X+ys,0);wn(Tn)&&En(ht.TEXTURE_CUBE_MAP),j.unbindTexture()}else if(qs){for(let ys=0,Gs=jr.length;ys<Gs;ys++){const y0=jr[ys],Qs=rt.get(y0);j.bindTexture(ht.TEXTURE_2D,Qs.__webglTexture),m0(ht.TEXTURE_2D,y0),ws(Pr.__webglFramebuffer,qn,y0,ht.COLOR_ATTACHMENT0+ys,ht.TEXTURE_2D,0),wn(y0)&&En(ht.TEXTURE_2D)}j.unbindTexture()}else{let ys=ht.TEXTURE_2D;if((qn.isWebGL3DRenderTarget||qn.isWebGLArrayRenderTarget)&&(ys=qn.isWebGL3DRenderTarget?ht.TEXTURE_3D:ht.TEXTURE_2D_ARRAY),qn.isWebGLMultiviewRenderTarget===!0&&(ys=ht.TEXTURE_2D_ARRAY),j.bindTexture(ys,Xr.__webglTexture),m0(ys,Tn),Tn.mipmaps&&Tn.mipmaps.length>0)for(let Gs=0;Gs<Tn.mipmaps.length;Gs++)ws(Pr.__webglFramebuffer[Gs],qn,Tn,ht.COLOR_ATTACHMENT0,ys,Gs);else ws(Pr.__webglFramebuffer,qn,Tn,ht.COLOR_ATTACHMENT0,ys,0);wn(Tn)&&En(ys),j.unbindTexture()}(qn.depthBuffer||qn.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(qn)}function ls(qn){const Tn=qn.textures;for(let Pr=0,Xr=Tn.length;Pr<Xr;Pr++){const jr=Tn[Pr];if(wn(jr)){const $r=qn.isWebGLCubeRenderTarget?ht.TEXTURE_CUBE_MAP:ht.TEXTURE_2D,qs=rt.get(jr).__webglTexture;j.bindTexture($r,qs),En($r),j.unbindTexture()}}}const rs=[],Is=[];function Hs(qn){if(qn.samples>0){if(Io(qn)===!1){const Tn=qn.textures,Pr=qn.width,Xr=qn.height;let jr=ht.COLOR_BUFFER_BIT;const $r=qn.stencilBuffer?ht.DEPTH_STENCIL_ATTACHMENT:ht.DEPTH_ATTACHMENT,qs=rt.get(qn),ys=Tn.length>1;if(ys)for(let Gs=0;Gs<Tn.length;Gs++)j.bindFramebuffer(ht.FRAMEBUFFER,qs.__webglMultisampledFramebuffer),ht.framebufferRenderbuffer(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0+Gs,ht.RENDERBUFFER,null),j.bindFramebuffer(ht.FRAMEBUFFER,qs.__webglFramebuffer),ht.framebufferTexture2D(ht.DRAW_FRAMEBUFFER,ht.COLOR_ATTACHMENT0+Gs,ht.TEXTURE_2D,null,0);j.bindFramebuffer(ht.READ_FRAMEBUFFER,qs.__webglMultisampledFramebuffer),j.bindFramebuffer(ht.DRAW_FRAMEBUFFER,qs.__webglFramebuffer);for(let Gs=0;Gs<Tn.length;Gs++){if(qn.resolveDepthBuffer&&(qn.depthBuffer&&(jr|=ht.DEPTH_BUFFER_BIT),qn.stencilBuffer&&qn.resolveStencilBuffer&&(jr|=ht.STENCIL_BUFFER_BIT)),ys){ht.framebufferRenderbuffer(ht.READ_FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.RENDERBUFFER,qs.__webglColorRenderbuffer[Gs]);const y0=rt.get(Tn[Gs]).__webglTexture;ht.framebufferTexture2D(ht.DRAW_FRAMEBUFFER,ht.COLOR_ATTACHMENT0,ht.TEXTURE_2D,y0,0)}ht.blitFramebuffer(0,0,Pr,Xr,0,0,Pr,Xr,jr,ht.NEAREST),Bt===!0&&(rs.length=0,Is.length=0,rs.push(ht.COLOR_ATTACHMENT0+Gs),qn.depthBuffer&&qn.resolveDepthBuffer===!1&&(rs.push($r),Is.push($r),ht.invalidateFramebuffer(ht.DRAW_FRAMEBUFFER,Is)),ht.invalidateFramebuffer(ht.READ_FRAMEBUFFER,rs))}if(j.bindFramebuffer(ht.READ_FRAMEBUFFER,null),j.bindFramebuffer(ht.DRAW_FRAMEBUFFER,null),ys)for(let Gs=0;Gs<Tn.length;Gs++){j.bindFramebuffer(ht.FRAMEBUFFER,qs.__webglMultisampledFramebuffer),ht.framebufferRenderbuffer(ht.FRAMEBUFFER,ht.COLOR_ATTACHMENT0+Gs,ht.RENDERBUFFER,qs.__webglColorRenderbuffer[Gs]);const y0=rt.get(Tn[Gs]).__webglTexture;j.bindFramebuffer(ht.FRAMEBUFFER,qs.__webglFramebuffer),ht.framebufferTexture2D(ht.DRAW_FRAMEBUFFER,ht.COLOR_ATTACHMENT0+Gs,ht.TEXTURE_2D,y0,0)}j.bindFramebuffer(ht.DRAW_FRAMEBUFFER,qs.__webglMultisampledFramebuffer)}else if(qn.depthBuffer&&qn.resolveDepthBuffer===!1&&Bt){const Tn=qn.stencilBuffer?ht.DEPTH_STENCIL_ATTACHMENT:ht.DEPTH_ATTACHMENT;ht.invalidateFramebuffer(ht.DRAW_FRAMEBUFFER,[Tn])}}}function _o(qn){return Math.min(at.maxSamples,qn.samples)}function Io(qn){const Tn=rt.get(qn);return qn.samples>0&&c.has("WEBGL_multisampled_render_to_texture")===!0&&Tn.__useRenderToTexture!==!1}function d0(qn){const Tn=At.render.frame;qt.get(qn)!==Tn&&(qt.set(qn,Tn),qn.update())}function $0(qn,Tn){const Pr=qn.colorSpace,Xr=qn.format,jr=qn.type;return qn.isCompressedTexture===!0||qn.isVideoTexture===!0||Pr!==B1&&Pr!==Ol&&(u0.getTransfer(Pr)===g0?(Xr!==Xn||jr!==D0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Pr)),Tn}function N0(qn){return typeof HTMLImageElement<"u"&&qn instanceof HTMLImageElement?(Vt.width=qn.naturalWidth||qn.width,Vt.height=qn.naturalHeight||qn.height):typeof VideoFrame<"u"&&qn instanceof VideoFrame?(Vt.width=qn.displayWidth,Vt.height=qn.displayHeight):(Vt.width=qn.width,Vt.height=qn.height),Vt}this.allocateTextureUnit=Ar,this.resetTextureUnits=or,this.setTexture2D=Vr,this.setTexture2DArray=Es,this.setTexture3D=Sr,this.setTextureCube=hs,this.rebindTextures=Fr,this.uploadTexture=Ws,this.setupRenderTarget=cs,this.updateRenderTargetMipmap=ls,this.updateMultisampleRenderTarget=Hs,this.setupDepthTexture=mr,this.setupDepthRenderbuffer=Jr,this.setupFrameBufferTexture=ws,this.useMultisampledRTT=Io,this.runDeferredUploads=S0,this.setDeferTextureUploads=h0}function o4(ht,c){function j(rt,at=Ol){let ut;const At=u0.getTransfer(at);if(rt===D0)return ht.UNSIGNED_BYTE;if(rt===_a)return ht.UNSIGNED_SHORT_4_4_4_4;if(rt===X1)return ht.UNSIGNED_SHORT_5_5_5_1;if(rt===Tu)return ht.UNSIGNED_INT_5_9_9_9_REV;if(rt===u1)return ht.BYTE;if(rt===ga)return ht.SHORT;if(rt===Yl)return ht.UNSIGNED_SHORT;if(rt===R1)return ht.INT;if(rt===Ql)return ht.UNSIGNED_INT;if(rt===P0)return ht.FLOAT;if(rt===Lo)return ht.HALF_FLOAT;if(rt===Y1)return ht.ALPHA;if(rt===Bn)return ht.RGB;if(rt===Xn)return ht.RGBA;if(rt===cr)return ht.LUMINANCE;if(rt===Rr)return ht.LUMINANCE_ALPHA;if(rt===yr)return ht.DEPTH_COMPONENT;if(rt===Nr)return ht.DEPTH_STENCIL;if(rt===is)return ht.RED;if(rt===Ns)return ht.RED_INTEGER;if(rt===Ss)return ht.RG;if(rt===kr)return ht.RG_INTEGER;if(rt===Ks)return ht.RGBA_INTEGER;if(rt===$s||rt===lo||rt===A0||rt===bo)if(At===g0)if(ut=c.get("WEBGL_compressed_texture_s3tc_srgb"),ut!==null){if(rt===$s)return ut.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(rt===lo)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(rt===A0)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(rt===bo)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ut=c.get("WEBGL_compressed_texture_s3tc"),ut!==null){if(rt===$s)return ut.COMPRESSED_RGB_S3TC_DXT1_EXT;if(rt===lo)return ut.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(rt===A0)return ut.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(rt===bo)return ut.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(rt===Eo||rt===zo||rt===_0||rt===V0)if(ut=c.get("WEBGL_compressed_texture_pvrtc"),ut!==null){if(rt===Eo)return ut.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(rt===zo)return ut.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(rt===_0)return ut.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(rt===V0)return ut.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(rt===Ts||rt===Mo||rt===T0)if(ut=c.get("WEBGL_compressed_texture_etc"),ut!==null){if(rt===Ts||rt===Mo)return At===g0?ut.COMPRESSED_SRGB8_ETC2:ut.COMPRESSED_RGB8_ETC2;if(rt===T0)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ut.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(rt===Jo||rt===rn||rt===ln||rt===pn||rt===_n||rt===On||rt===tr||rt===ar||rt===Gr||rt===Ur||rt===pr||rt===Ir||rt===ts||rt===Ls)if(ut=c.get("WEBGL_compressed_texture_astc"),ut!==null){if(rt===Jo)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ut.COMPRESSED_RGBA_ASTC_4x4_KHR;if(rt===rn)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ut.COMPRESSED_RGBA_ASTC_5x4_KHR;if(rt===ln)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ut.COMPRESSED_RGBA_ASTC_5x5_KHR;if(rt===pn)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ut.COMPRESSED_RGBA_ASTC_6x5_KHR;if(rt===_n)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ut.COMPRESSED_RGBA_ASTC_6x6_KHR;if(rt===On)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ut.COMPRESSED_RGBA_ASTC_8x5_KHR;if(rt===tr)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ut.COMPRESSED_RGBA_ASTC_8x6_KHR;if(rt===ar)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ut.COMPRESSED_RGBA_ASTC_8x8_KHR;if(rt===Gr)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ut.COMPRESSED_RGBA_ASTC_10x5_KHR;if(rt===Ur)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ut.COMPRESSED_RGBA_ASTC_10x6_KHR;if(rt===pr)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ut.COMPRESSED_RGBA_ASTC_10x8_KHR;if(rt===Ir)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ut.COMPRESSED_RGBA_ASTC_10x10_KHR;if(rt===ts)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ut.COMPRESSED_RGBA_ASTC_12x10_KHR;if(rt===Ls)return At===g0?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ut.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(rt===zr||rt===io||rt===So)if(ut=c.get("EXT_texture_compression_bptc"),ut!==null){if(rt===zr)return At===g0?ut.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ut.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(rt===io)return ut.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(rt===So)return ut.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(rt===co||rt===so||rt===n0||rt===c0)if(ut=c.get("EXT_texture_compression_rgtc"),ut!==null){if(rt===zr)return ut.COMPRESSED_RED_RGTC1_EXT;if(rt===so)return ut.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(rt===n0)return ut.COMPRESSED_RED_GREEN_RGTC2_EXT;if(rt===c0)return ut.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return rt===y1?ht.UNSIGNED_INT_24_8:ht[rt]!==void 0?ht[rt]:null}return{convert:j}}class Y2 extends s0{constructor(){super(),this.isGroup=!0,this.type="Group"}}class QE extends J0{constructor(c=[]){super(),this.isArrayCamera=!0,this.cameras=c}}var a4=new kn,l4=new kn;function gw(ht,c,j){a4.setFromMatrixPosition(c.matrixWorld),l4.setFromMatrixPosition(j.matrixWorld);var rt=a4.distanceTo(l4),at=c.projectionMatrix.elements,ut=j.projectionMatrix.elements,At=at[14]/(at[10]-1),wt=at[14]/(at[10]+1),Bt=(at[9]+1)/at[5],Ft=(at[9]-1)/at[5],Vt=(at[8]-1)/at[0],qt=(ut[8]+1)/ut[0],Jt=At*Vt,_i=At*qt,sn=rt/(-Vt+qt),hn=sn*-Vt;c.matrixWorld.decompose(ht.position,ht.quaternion,ht.scale),ht.translateX(hn),ht.translateZ(sn),ht.matrixWorld.compose(ht.position,ht.quaternion,ht.scale),ht.matrixWorldInverse.copy(ht.matrixWorld).invert();var an=At+sn,en=wt+sn,xn=Jt-hn,wn=_i+(rt-hn),En=Bt*wt/en*an,er=Ft*wt/en*an;ht.projectionMatrix.makePerspective(xn,wn,En,er,an,en)}function c4(ht){var c,j,rt=this,at=null,ut=null,At=null,wt=[],Bt=new Vs,Ft=new Vs,Vt=1,qt="local-floor";typeof window<"u"&&"VRFrameData"in window&&(ut=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",En,!1));var Jt=new Vs,_i=new e0,sn=new kn,hn=new J0;hn.viewport=new r0,hn.layers.enable(1);var an=new J0;an.viewport=new r0,an.layers.enable(2);var en=new QE([hn,an]);en.layers.enable(1),en.layers.enable(2);var xn=new Wr,wn;function En(){var jn=rt.isPresenting=at!==null&&at.isPresenting===!0;if(jn){var ur=at.getEyeParameters("left");c=2*ur.renderWidth*Vt,j=ur.renderHeight*Vt,wn=ht.getPixelRatio(),ht.getSize(xn),ht.setDrawingBufferSize(c,j,1),hn.viewport.set(0,0,c/2,j),an.viewport.set(c/2,0,c/2,j),Sn.start(),rt.dispatchEvent({type:"sessionstart"})}else rt.enabled&&ht.setDrawingBufferSize(xn.width,xn.height,wn),Sn.stop(),rt.dispatchEvent({type:"sessionend"})}var er=[],Nn=[];function zn(jn){for(var ur=navigator.getGamepads&&navigator.getGamepads(),or=0,Ar=ur.length;or<Ar;or++){var br=ur[or];if(br&&(br.id==="Daydream Controller"||br.id==="Gear VR Controller"||br.id==="Oculus Go Controller"||br.id==="OpenVR Gamepad"||br.id.startsWith("Oculus Touch")||br.id.startsWith("HTC Vive Focus")||br.id.startsWith("Spatial Controller"))){var Vr=br.hand;if(jn===0&&(Vr===""||Vr==="right")||jn===1&&Vr==="left")return br}}}function $n(){for(var jn=0;jn<wt.length;jn++){var ur=wt[jn],or=zn(jn);if(or!==void 0&&or.pose!==void 0){if(or.pose===null)return;var Ar=or.pose;Ar.hasPosition===!1&&ur.position.set(.2,-.6,-.05),Ar.position!==null&&ur.position.fromArray(Ar.position),Ar.orientation!==null&&ur.quaternion.fromArray(Ar.orientation),ur.matrix.compose(ur.position,ur.quaternion,ur.scale),ur.matrix.premultiply(Bt),ur.matrix.decompose(ur.position,ur.quaternion,ur.scale),ur.matrixWorldNeedsUpdate=!0,ur.visible=!0;var br=or.id==="Daydream Controller"?0:1;er[jn]===void 0&&(er[jn]=!1),er[jn]!==or.buttons[br].pressed&&(er[jn]=or.buttons[br].pressed,er[jn]===!0?ur.dispatchEvent({type:"selectstart"}):(ur.dispatchEvent({type:"selectend"}),ur.dispatchEvent({type:"select"}))),br=2,Nn[jn]===void 0&&(Nn[jn]=!1),or.buttons[br]!==void 0&&Nn[jn]!==or.buttons[br].pressed&&(Nn[jn]=or.buttons[br].pressed,Nn[jn]===!0?ur.dispatchEvent({type:"squeezestart"}):(ur.dispatchEvent({type:"squeezeend"}),ur.dispatchEvent({type:"squeeze"})))}else ur.visible=!1}}function Ln(jn,ur){ur!==null&&ur.length===4&&jn.set(ur[0]*c,ur[1]*j,ur[2]*c,ur[3]*j)}this.enabled=!1,this.getController=function(jn){var ur=wt[jn];return ur===void 0&&(ur=new Y2,ur.matrixAutoUpdate=!1,ur.visible=!1,wt[jn]=ur),ur},this.getDevice=function(){return at},this.setDevice=function(jn){jn!==void 0&&(at=jn),Sn.setContext(jn)},this.setFramebufferScaleFactor=function(jn){Vt=jn},this.setReferenceSpaceType=function(jn){qt=jn},this.setPoseTarget=function(jn){jn!==void 0&&(At=jn)},this.cameraAutoUpdate=!0,this.updateCamera=function(jn){var ur=qt==="local-floor"?1.6:0;if(at.depthNear=jn.near,at.depthFar=jn.far,at.getFrameData(ut),qt==="local-floor"){var or=at.stageParameters;or?Bt.fromArray(or.sittingToStandingTransform):Bt.makeTranslation(0,ur,0)}var Ar=ut.pose,br=At!==null?At:jn;br.matrix.copy(Bt),br.matrix.decompose(br.position,br.quaternion,br.scale),Ar.orientation!==null&&(_i.fromArray(Ar.orientation),br.quaternion.multiply(_i)),Ar.position!==null&&(_i.setFromRotationMatrix(Bt),sn.fromArray(Ar.position),sn.applyQuaternion(_i),br.position.add(sn)),br.updateMatrixWorld();for(var Vr=br.children,Es=0,Sr=Vr.length;Es<Sr;Es++)Vr[Es].updateMatrixWorld(!0);hn.near=jn.near,an.near=jn.near,hn.far=jn.far,an.far=jn.far,hn.matrixWorldInverse.fromArray(ut.leftViewMatrix),an.matrixWorldInverse.fromArray(ut.rightViewMatrix),Ft.copy(Bt).invert(),qt==="local-floor"&&(hn.matrixWorldInverse.multiply(Ft),an.matrixWorldInverse.multiply(Ft));var hs=br.parent;hs!==null&&(Jt.copy(hs.matrixWorld).invert(),hn.matrixWorldInverse.multiply(Jt),an.matrixWorldInverse.multiply(Jt)),hn.matrixWorld.copy(hn.matrixWorldInverse).invert(),an.matrixWorld.copy(an.matrixWorldInverse).invert(),hn.projectionMatrix.fromArray(ut.leftProjectionMatrix),an.projectionMatrix.fromArray(ut.rightProjectionMatrix),gw(en,hn,an);var vs=at.getLayers();if(vs.length){var zs=vs[0];Ln(hn.viewport,zs.leftBounds),Ln(an.viewport,zs.rightBounds)}return $n(),en},this.getCamera=function(){return en},this.getFoveation=function(){return 1},this.setFoveation=function(jn){jn!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getEnvironmentBlendMode=function(){if(rt.isPresenting)return"opaque"},this.getStandingMatrix=function(){return Bt},this.isPresenting=!1;var Sn=new G2;this.setAnimationLoop=function(jn){Sn.setAnimationLoop(jn),this.isPresenting&&Sn.start()},this.submitFrame=function(){this.isPresenting&&at.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",En)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(c4.prototype,{addEventListener:Jl.prototype.addEventListener,hasEventListener:Jl.prototype.hasEventListener,removeEventListener:Jl.prototype.removeEventListener,dispatchEvent:Jl.prototype.dispatchEvent});class u4 extends r1{constructor(c,j,rt,at={}){super(c,j,at),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=rt}copy(c){return super.copy(c),this.numViews=c.numViews,this}}u4.prototype.isWebGLMultiviewRenderTarget=!0;const Ew={type:"move"};class VE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Y2,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Y2,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new kn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new kn),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Y2,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new kn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new kn),this._grip}dispatchEvent(c){return this._targetRay!==null&&this._targetRay.dispatchEvent(c),this._grip!==null&&this._grip.dispatchEvent(c),this._hand!==null&&this._hand.dispatchEvent(c),this}connect(c){if(c&&c.hand){const j=this._hand;if(j)for(const rt of c.hand.values())this._getHandJoint(j,rt)}return this.dispatchEvent({type:"connected",data:c}),this}disconnect(c){return this.dispatchEvent({type:"disconnected",data:c}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(c,j,rt){let at=null,ut=null,At=null;const wt=this._targetRay,Bt=this._grip,Ft=this._hand;if(c&&j.session.visibilityState!=="visible-blurred"){if(Ft&&c.hand){At=!0;for(const hn of c.hand.values()){const an=j.getJointPose(hn,rt),en=this._getHandJoint(Ft,hn);an!==null&&(en.matrix.fromArray(an.transform.matrix),en.matrix.decompose(en.position,en.rotation,en.scale),en.matrixWorldNeedsUpdate=!0,en.jointRadius=an.radius),en.visible=an!==null}const Vt=Ft.joints["index-finger-tip"],qt=Ft.joints["thumb-tip"],Jt=Vt.position.distanceTo(qt.position),_i=.02,sn=.005;Ft.inputState.pinching&&Jt>_i+sn?(Ft.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:c.handedness,target:this})):!Ft.inputState.pinching&&Jt<=_i-sn&&(Ft.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:c.handedness,target:this}))}else Bt!==null&&c.gripSpace&&(ut=j.getPose(c.gripSpace,rt),ut!==null&&(Bt.matrix.fromArray(ut.transform.matrix),Bt.matrix.decompose(Bt.position,Bt.rotation,Bt.scale),Bt.matrixWorldNeedsUpdate=!0,ut.linearVelocity?(Bt.hasLinearVelocity=!0,Bt.linearVelocity.copy(ut.linearVelocity)):Bt.hasLinearVelocity=!1,ut.angularVelocity?(Bt.hasAngularVelocity=!0,Bt.angularVelocity.copy(ut.angularVelocity)):Bt.hasAngularVelocity=!1));wt!==null&&(at=j.getPose(c.targetRaySpace,rt),at===null&&ut!==null&&(at=ut),at!==null&&(wt.matrix.fromArray(at.transform.matrix),wt.matrix.decompose(wt.position,wt.rotation,wt.scale),wt.matrixWorldNeedsUpdate=!0,at.linearVelocity?(wt.hasLinearVelocity=!0,wt.linearVelocity.copy(at.linearVelocity)):wt.hasLinearVelocity=!1,at.angularVelocity?(wt.hasAngularVelocity=!0,wt.angularVelocity.copy(at.angularVelocity)):wt.hasAngularVelocity=!1,this.dispatchEvent(Ew)))}return wt!==null&&(wt.visible=at!==null),Bt!==null&&(Bt.visible=ut!==null),Ft!==null&&(Ft.visible=At!==null),this}_getHandJoint(c,j){if(c.joints[j.jointName]===void 0){const rt=new Y2;rt.matrixAutoUpdate=!1,rt.visible=!1,c.joints[j.jointName]=rt,c.add(rt)}return c.joints[j.jointName]}}const yw=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ww=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Cw{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(c,j,rt){if(this.texture===null){const at=new C0,ut=c.properties.get(at);ut.__webglTexture=j.texture,(j.depthNear!=rt.depthNear||j.depthFar!=rt.depthFar)&&(this.depthNear=j.depthNear,this.depthFar=j.depthFar),this.texture=at}}render(c,j){if(this.texture!==null){if(this.mesh===null){const rt=j.cameras[0].viewport,at=new b1({vertexShader:yw,fragmentShader:ww,uniforms:{depthColor:{value:this.texture},depthWidth:{value:rt.z},depthHeight:{value:rt.w}}});this.mesh=new Al(new lu(20,20),at)}c.render(this.mesh,j)}}reset(){this.texture=null,this.mesh=null}}class _w extends Jl{constructor(c,j,rt,at){super();const ut=this;let At=null,wt=1;var Bt=null;let Ft=null,Vt="local-floor",qt=1,Jt=null,_i=null;var sn=[];let hn=null,an=null,en=null,xn=null;const wn=new Cw,En=j.getContextAttributes();let er=null,Nn=null;const zn=[],$n=[],Ln=new Wr;let Sn=null;const jn=new J0;jn.layers.enable(1),jn.viewport=new r0;const ur=new J0;ur.layers.enable(2),ur.viewport=new r0;const or=[jn,ur],Ar=new QE;Ar.layers.enable(1),Ar.layers.enable(2);let br=null,Vr=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return _i},this.getController=function(qr){let ws=zn[qr];return ws===void 0&&(ws=new VE,zn[qr]=ws),ws.getTargetRaySpace()},this.getControllerGrip=function(qr){let ws=zn[qr];return ws===void 0&&(ws=new VE,zn[qr]=ws),ws.getGripSpace()},this.getHand=function(qr){let ws=zn[qr];return ws===void 0&&(ws=new VE,zn[qr]=ws),ws.getHandSpace()};function Es(qr){const ws=$n.indexOf(qr.inputSource);if(ws===-1)return;const Ms=zn[ws];Ms!==void 0&&(Ms.update(qr.inputSource,qr.frame,Jt||Ft),Ms.dispatchEvent({type:qr.type,data:qr.inputSource}))}function Sr(){At.removeEventListener("select",Es),At.removeEventListener("selectstart",Es),At.removeEventListener("selectend",Es),At.removeEventListener("squeeze",Es),At.removeEventListener("squeezestart",Es),At.removeEventListener("squeezeend",Es),At.removeEventListener("end",Sr),At.removeEventListener("inputsourceschange",hs);for(let qr=0;qr<zn.length;qr++){const ws=$n[qr];ws!==null&&($n[qr]=null,zn[qr].disconnect(ws))}br=null,Vr=null,wn.reset(),c.setRenderTarget(er),en=null,an=null,hn=null,At=null,Nn=null,Ws.stop(),ut.isPresenting=!1,c.setPixelRatio(Sn),c.setSize(Ln.width,Ln.height,!1),ut.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(qr){wt=qr,ut.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(qr){Vt=qr,ut.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Jt||Ft},this.setReferenceSpace=function(qr){Jt=qr},this.getBaseLayer=function(){return an!==null?an:en},this.getBinding=function(){return hn},this.getFrame=function(){return xn},this.getSession=function(){return At},this.setSession=async function(qr){if(At=qr,At!==null){if(er=c.getRenderTarget(),At.addEventListener("select",Es),At.addEventListener("selectstart",Es),At.addEventListener("selectend",Es),At.addEventListener("squeeze",Es),At.addEventListener("squeezestart",Es),At.addEventListener("squeezeend",Es),At.addEventListener("end",Sr),At.addEventListener("inputsourceschange",hs),En.xrCompatible!==!0&&await j.makeXRCompatible(),Sn=c.getPixelRatio(),c.getSize(Ln),At.renderState.layers===void 0){const ws={antialias:En.antialias,alpha:!0,depth:En.depth,stencil:En.stencil,framebufferScaleFactor:wt};en=new XRWebGLLayer(At,j,ws),At.updateRenderState({baseLayer:en}),c.setPixelRatio(1),c.setSize(en.framebufferWidth,en.framebufferHeight,!1),Nn=new r1(en.framebufferWidth,en.framebufferHeight,{format:Xn,type:D0,colorSpace:c.outputColorSpace,stencilBuffer:En.stencil})}else{let ws=null,Ms=null,mr=null;En.depth&&(mr=En.stencil?j.DEPTH24_STENCIL8:j.DEPTH_COMPONENT24,ws=En.stencil?Nr:yr,Ms=En.stencil?y1:Ql),ut.isMultiview=at&&rt.has("OCULUS_multiview");const Jr={colorFormat:j.RGBA8,depthFormat:mr,scaleFactor:wt};ut.isMultiview&&(Jr.textureType="texture-array"),hn=new XRWebGLBinding(At,j),an=hn.createProjectionLayer(Jr),At.updateRenderState({layers:[an]}),c.setPixelRatio(1),c.setSize(an.textureWidth,an.textureHeight,!1);const Fr={format:Xn,type:D0,depthTexture:new cm(an.textureWidth,an.textureHeight,Ms,void 0,void 0,void 0,void 0,void 0,void 0,ws),stencilBuffer:En.stencil,colorSpace:c.outputColorSpace,samples:En.antialias?4:0,resolveDepthBuffer:an.ignoreDepthValues===!1};if(ut.isMultiview){const cs=rt.get("OCULUS_multiview");this.maxNumViews=j.getParameter(cs.MAX_VIEWS_OVR),Nn=new u4(an.textureWidth,an.textureHeight,2,Fr)}else Nn=new r1(an.textureWidth,an.textureHeight,Fr)}Nn.isXRRenderTarget=!0,this.setFoveation(qt),Jt=null,Ft=await At.requestReferenceSpace(Vt),Ws.setContext(At),Ws.start(),ut.isPresenting=!0,ut.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(At!==null)return At.environmentBlendMode},this.addLayer=function(qr){!window.XRWebGLBinding||!this.layersEnabled||!At||(sn.push(qr),this.updateLayers())},this.removeLayer=function(qr){sn.splice(sn.indexOf(qr),1),!(!window.XRWebGLBinding||!this.layersEnabled||!At)&&this.updateLayers()},this.updateLayers=function(){var qr=sn.map(function(ws){return ws});qr.unshift(At.renderState.layers[0]),At.updateRenderState({layers:qr})};function hs(qr){for(let ws=0;ws<qr.removed.length;ws++){const Ms=qr.removed[ws],mr=$n.indexOf(Ms);mr>=0&&($n[mr]=null,zn[mr].disconnect(Ms))}for(let ws=0;ws<qr.added.length;ws++){const Ms=qr.added[ws];let mr=$n.indexOf(Ms);if(mr===-1){for(let Fr=0;Fr<zn.length;Fr++)if(Fr>=$n.length){$n.push(Ms),mr=Fr;break}else if($n[Fr]===null){$n[Fr]=Ms,mr=Fr;break}if(mr===-1)break}const Jr=zn[mr];Jr&&Jr.connect(Ms)}}const vs=new kn,zs=new kn;function Qo(qr,ws,Ms){vs.setFromMatrixPosition(ws.matrixWorld),zs.setFromMatrixPosition(Ms.matrixWorld);const mr=vs.distanceTo(zs),Jr=ws.projectionMatrix.elements,Fr=Ms.projectionMatrix.elements,cs=Jr[14]/(Jr[10]-1),ls=Jr[14]/(Jr[10]+1),rs=(Jr[9]+1)/Jr[5],Is=(Jr[9]-1)/Jr[5],Hs=(Jr[8]-1)/Jr[0],_o=(Fr[8]+1)/Fr[0],Io=cs*Hs,d0=cs*_o,$0=mr/(-Hs+_o),N0=$0*-Hs;ws.matrixWorld.decompose(qr.position,qr.quaternion,qr.scale),qr.translateX(N0),qr.translateZ($0),qr.matrixWorld.compose(qr.position,qr.quaternion,qr.scale),qr.matrixWorldInverse.copy(qr.matrixWorld).invert();const qn=cs+$0,Tn=ls+$0,Pr=Io-N0,Xr=d0+(mr-N0),jr=rs*ls/Tn*qn,$r=Is*ls/Tn*qn;qr.projectionMatrix.makePerspective(Pr,Xr,jr,$r,qn,Tn),qr.projectionMatrixInverse.copy(qr.projectionMatrix).invert()}function m0(qr,ws){ws===null?qr.matrixWorld.copy(qr.matrix):qr.matrixWorld.multiplyMatrices(ws.matrixWorld,qr.matrix),qr.matrixWorldInverse.copy(qr.matrixWorld).invert()}this.setPoseTarget=function(qr){qr!==void 0&&(Bt=qr)},this.updateCamera=function(qr){if(At===null)return;wn.texture!==null&&(qr.near=wn.depthNear,qr.far=wn.depthFar),Ar.near=ur.near=jn.near=qr.near,Ar.far=ur.far=jn.far=qr.far,(br!==Ar.near||Vr!==Ar.far)&&(At.updateRenderState({depthNear:Ar.near,depthFar:Ar.far}),br=Ar.near,Vr=Ar.far,jn.near=br,jn.far=Vr,ur.near=br,ur.far=Vr,jn.updateProjectionMatrix(),ur.updateProjectionMatrix(),qr.updateProjectionMatrix());const ws=Ar.cameras;var Ms=Bt||qr;const mr=Ms.parent;m0(Ar,mr);for(let Jr=0;Jr<ws.length;Jr++)m0(ws[Jr],mr);ws.length===2?Qo(Ar,jn,ur):Ar.projectionMatrix.copy(jn.projectionMatrix),k0(qr,Ar,Ms)};function k0(qr,ws,Ms){ws.matrixWorld.decompose(ws.position,ws.quaternion,ws.scale),Ms.parent===null?Ms.matrix.copy(ws.matrixWorld):(Ms.matrix.copy(Ms.parent.matrixWorld),Ms.matrix.invert(),Ms.matrix.multiply(ws.matrixWorld)),Ms.matrix.decompose(Ms.position,Ms.quaternion,Ms.scale),Ms.updateMatrixWorld(!0),qr.projectionMatrix.copy(ws.projectionMatrix),qr.projectionMatrixInverse.copy(ws.projectionMatrixInverse),qr.isPerspectiveCamera&&(qr.fov=hu*2*Math.atan(1/qr.projectionMatrix.elements[5]),qr.zoom=1)}this.getCamera=function(){return Ar},this.getFoveation=function(){if(!(an===null&&en===null))return qt},this.setFoveation=function(qr){qt=qr,an!==null&&(an.fixedFoveation=qr),en!==null&&en.fixedFoveation!==void 0&&(en.fixedFoveation=qr)},this.hasDepthSensing=function(){return wn.texture!==null};let h0=null;function S0(qr,ws){if(_i=ws.getViewerPose(Jt||Ft),xn=ws,_i!==null){const Ms=_i.views;en!==null&&(c.setRenderTargetFramebuffer(Nn,en.framebuffer),c.setRenderTarget(Nn));let mr=!1;Ms.length!==Ar.cameras.length&&(Ar.cameras.length=0,mr=!0);for(let Fr=0;Fr<Ms.length;Fr++){const cs=Ms[Fr];let ls=null;if(en!==null)ls=en.getViewport(cs);else{const Is=hn.getViewSubImage(an,cs);ls=Is.viewport,Fr===0&&(c.setRenderTargetTextures(Nn,Is.colorTexture,an.ignoreDepthValues?void 0:Is.depthStencilTexture),c.setRenderTarget(Nn))}let rs=or[Fr];rs===void 0&&(rs=new J0,rs.layers.enable(Fr),rs.viewport=new r0,or[Fr]=rs),rs.matrix.fromArray(cs.transform.matrix),rs.matrix.decompose(rs.position,rs.quaternion,rs.scale),rs.projectionMatrix.fromArray(cs.projectionMatrix),rs.projectionMatrixInverse.copy(rs.projectionMatrix).invert(),rs.viewport.set(ls.x,ls.y,ls.width,ls.height),Fr===0&&(Ar.matrix.copy(rs.matrix),Ar.matrix.decompose(Ar.position,Ar.quaternion,Ar.scale)),mr===!0&&Ar.cameras.push(rs)}const Jr=At.enabledFeatures;if(Jr&&Jr.includes("depth-sensing")){const Fr=hn.getDepthInformation(Ms[0]);Fr&&Fr.isValid&&Fr.texture&&wn.init(c,Fr,At.renderState)}}for(let Ms=0;Ms<zn.length;Ms++){const mr=$n[Ms],Jr=zn[Ms];mr!==null&&Jr!==void 0&&Jr.update(mr,ws,Jt||Ft)}wn.render(c,Ar),h0&&h0(qr,ws),ws.detectedPlanes&&ut.dispatchEvent({type:"planesdetected",data:ws}),xn=null}const Ws=new G2;Ws.setAnimationLoop(S0),this.setAnimationLoop=function(qr){h0=qr},this.dispose=function(){}}}const q2=new f1,xw=new Vs;function bw(ht,c){function j(an,en){an.matrixAutoUpdate===!0&&an.updateMatrix(),en.value.copy(an.matrix)}function rt(an,en){en.color.getRGB(an.fogColor.value,Xm(ht)),en.isFog?(an.fogNear.value=en.near,an.fogFar.value=en.far):en.isFogExp2&&(an.fogDensity.value=en.density)}function at(an,en,xn,wn,En){en.isMeshBasicMaterial||en.isMeshLambertMaterial?ut(an,en):en.isMeshToonMaterial?(ut(an,en),qt(an,en)):en.isMeshPhongMaterial?(ut(an,en),Vt(an,en)):en.isMeshStandardMaterial?(ut(an,en),Jt(an,en),en.isMeshPhysicalMaterial&&_i(an,en,En)):en.isMeshMatcapMaterial?(ut(an,en),sn(an,en)):en.isMeshDepthMaterial?ut(an,en):en.isMeshDistanceMaterial?(ut(an,en),hn(an,en)):en.isMeshNormalMaterial?ut(an,en):en.isLineBasicMaterial?(At(an,en),en.isLineDashedMaterial&&wt(an,en)):en.isPointsMaterial?Bt(an,en,xn,wn):en.isSpriteMaterial?Ft(an,en):en.isShadowMaterial?(an.color.value.copy(en.color),an.opacity.value=en.opacity):en.isShaderMaterial&&(en.uniformsNeedUpdate=!1)}function ut(an,en){an.opacity.value=en.opacity,en.color&&an.diffuse.value.copy(en.color),en.emissive&&an.emissive.value.copy(en.emissive).multiplyScalar(en.emissiveIntensity),en.map&&(an.map.value=en.map,j(en.map,an.mapTransform)),en.alphaMap&&(an.alphaMap.value=en.alphaMap,j(en.alphaMap,an.alphaMapTransform)),en.bumpMap&&(an.bumpMap.value=en.bumpMap,j(en.bumpMap,an.bumpMapTransform),an.bumpScale.value=en.bumpScale,en.side===Dt&&(an.bumpScale.value*=-1)),en.normalMap&&(an.normalMap.value=en.normalMap,j(en.normalMap,an.normalMapTransform),an.normalScale.value.copy(en.normalScale),en.side===Dt&&an.normalScale.value.negate()),en.displacementMap&&(an.displacementMap.value=en.displacementMap,j(en.displacementMap,an.displacementMapTransform),an.displacementScale.value=en.displacementScale,an.displacementBias.value=en.displacementBias),en.emissiveMap&&(an.emissiveMap.value=en.emissiveMap,j(en.emissiveMap,an.emissiveMapTransform)),en.specularMap&&(an.specularMap.value=en.specularMap,j(en.specularMap,an.specularMapTransform)),en.alphaTest>0&&(an.alphaTest.value=en.alphaTest);const xn=c.get(en),wn=xn.envMap,En=xn.envMapRotation;if(wn&&(an.envMap.value=wn,q2.copy(En),q2.x*=-1,q2.y*=-1,q2.z*=-1,wn.isCubeTexture&&wn.isRenderTargetTexture===!1&&(q2.y*=-1,q2.z*=-1),an.envMapRotation.value.setFromMatrix4(xw.makeRotationFromEuler(q2)),an.flipEnvMap.value=wn.isCubeTexture&&wn.isRenderTargetTexture===!1?-1:1,an.reflectivity.value=en.reflectivity,an.ior.value=en.ior,an.refractionRatio.value=en.refractionRatio),en.lightMap){an.lightMap.value=en.lightMap;const er=ht._useLegacyLights===!0?Math.PI:1;an.lightMapIntensity.value=en.lightMapIntensity*er,j(en.lightMap,an.lightMapTransform)}en.aoMap&&(an.aoMap.value=en.aoMap,an.aoMapIntensity.value=en.aoMapIntensity,j(en.aoMap,an.aoMapTransform))}function At(an,en){an.diffuse.value.copy(en.color),an.opacity.value=en.opacity,en.map&&(an.map.value=en.map,j(en.map,an.mapTransform))}function wt(an,en){an.dashSize.value=en.dashSize,an.totalSize.value=en.dashSize+en.gapSize,an.scale.value=en.scale}function Bt(an,en,xn,wn){an.diffuse.value.copy(en.color),an.opacity.value=en.opacity,an.size.value=en.size*xn,an.scale.value=wn*.5,en.map&&(an.map.value=en.map,j(en.map,an.uvTransform)),en.alphaMap&&(an.alphaMap.value=en.alphaMap,j(en.alphaMap,an.alphaMapTransform)),en.alphaTest>0&&(an.alphaTest.value=en.alphaTest)}function Ft(an,en){an.diffuse.value.copy(en.color),an.opacity.value=en.opacity,an.rotation.value=en.rotation,en.map&&(an.map.value=en.map,j(en.map,an.mapTransform)),en.alphaMap&&(an.alphaMap.value=en.alphaMap,j(en.alphaMap,an.alphaMapTransform)),en.alphaTest>0&&(an.alphaTest.value=en.alphaTest)}function Vt(an,en){an.specular.value.copy(en.specular),an.shininess.value=Math.max(en.shininess,1e-4)}function qt(an,en){en.gradientMap&&(an.gradientMap.value=en.gradientMap)}function Jt(an,en){an.metalness.value=en.metalness,en.metalnessMap&&(an.metalnessMap.value=en.metalnessMap,j(en.metalnessMap,an.metalnessMapTransform)),an.roughness.value=en.roughness,en.roughnessMap&&(an.roughnessMap.value=en.roughnessMap,j(en.roughnessMap,an.roughnessMapTransform)),en.envMap&&(an.envMapIntensity.value=en.envMapIntensity)}function _i(an,en,xn){an.ior.value=en.ior,en.sheen>0&&(an.sheenColor.value.copy(en.sheenColor).multiplyScalar(en.sheen),an.sheenRoughness.value=en.sheenRoughness,en.sheenColorMap&&(an.sheenColorMap.value=en.sheenColorMap,j(en.sheenColorMap,an.sheenColorMapTransform)),en.sheenRoughnessMap&&(an.sheenRoughnessMap.value=en.sheenRoughnessMap,j(en.sheenRoughnessMap,an.sheenRoughnessMapTransform))),en.clearcoat>0&&(an.clearcoat.value=en.clearcoat,an.clearcoatRoughness.value=en.clearcoatRoughness,en.clearcoatMap&&(an.clearcoatMap.value=en.clearcoatMap,j(en.clearcoatMap,an.clearcoatMapTransform)),en.clearcoatRoughnessMap&&(an.clearcoatRoughnessMap.value=en.clearcoatRoughnessMap,j(en.clearcoatRoughnessMap,an.clearcoatRoughnessMapTransform)),en.clearcoatNormalMap&&(an.clearcoatNormalMap.value=en.clearcoatNormalMap,j(en.clearcoatNormalMap,an.clearcoatNormalMapTransform),an.clearcoatNormalScale.value.copy(en.clearcoatNormalScale),en.side===Dt&&an.clearcoatNormalScale.value.negate())),en.dispersion>0&&(an.dispersion.value=en.dispersion),en.iridescence>0&&(an.iridescence.value=en.iridescence,an.iridescenceIOR.value=en.iridescenceIOR,an.iridescenceThicknessMinimum.value=en.iridescenceThicknessRange[0],an.iridescenceThicknessMaximum.value=en.iridescenceThicknessRange[1],en.iridescenceMap&&(an.iridescenceMap.value=en.iridescenceMap,j(en.iridescenceMap,an.iridescenceMapTransform)),en.iridescenceThicknessMap&&(an.iridescenceThicknessMap.value=en.iridescenceThicknessMap,j(en.iridescenceThicknessMap,an.iridescenceThicknessMapTransform))),en.transmission>0&&(an.transmission.value=en.transmission,an.transmissionSamplerMap.value=xn.texture,an.transmissionSamplerSize.value.set(xn.width,xn.height),en.transmissionMap&&(an.transmissionMap.value=en.transmissionMap,j(en.transmissionMap,an.transmissionMapTransform)),an.thickness.value=en.thickness,en.thicknessMap&&(an.thicknessMap.value=en.thicknessMap,j(en.thicknessMap,an.thicknessMapTransform)),an.attenuationDistance.value=en.attenuationDistance,an.attenuationColor.value.copy(en.attenuationColor)),en.anisotropy>0&&(an.anisotropyVector.value.set(en.anisotropy*Math.cos(en.anisotropyRotation),en.anisotropy*Math.sin(en.anisotropyRotation)),en.anisotropyMap&&(an.anisotropyMap.value=en.anisotropyMap,j(en.anisotropyMap,an.anisotropyMapTransform))),an.specularIntensity.value=en.specularIntensity,an.specularColor.value.copy(en.specularColor),en.specularColorMap&&(an.specularColorMap.value=en.specularColorMap,j(en.specularColorMap,an.specularColorMapTransform)),en.specularIntensityMap&&(an.specularIntensityMap.value=en.specularIntensityMap,j(en.specularIntensityMap,an.specularIntensityMapTransform))}function sn(an,en){en.matcap&&(an.matcap.value=en.matcap)}function hn(an,en){const xn=c.get(en).light;an.referencePosition.value.setFromMatrixPosition(xn.matrixWorld),an.nearDistance.value=xn.shadow.camera.near,an.farDistance.value=xn.shadow.camera.far}return{refreshFogUniforms:rt,refreshMaterialUniforms:at}}function Mw(ht,c,j,rt){let at={},ut={},At=[];const wt=ht.getParameter(ht.MAX_UNIFORM_BUFFER_BINDINGS);function Bt(xn,wn){const En=wn.program;rt.uniformBlockBinding(xn,En)}function Ft(xn,wn){let En=at[xn.id];En===void 0&&(sn(xn),En=Vt(xn),at[xn.id]=En,xn.addEventListener("dispose",an));const er=wn.program;rt.updateUBOMapping(xn,er);const Nn=c.render.frame;ut[xn.id]!==Nn&&(Jt(xn),ut[xn.id]=Nn)}function Vt(xn){const wn=qt();xn.__bindingPointIndex=wn;const En=ht.createBuffer(),er=xn.__size,Nn=xn.usage;return ht.bindBuffer(ht.UNIFORM_BUFFER,En),ht.bufferData(ht.UNIFORM_BUFFER,er,Nn),ht.bindBuffer(ht.UNIFORM_BUFFER,null),ht.bindBufferBase(ht.UNIFORM_BUFFER,wn,En),En}function qt(){for(let xn=0;xn<wt;xn++)if(At.indexOf(xn)===-1)return At.push(xn),xn;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Jt(xn){const wn=at[xn.id],En=xn.uniforms,er=xn.__cache;ht.bindBuffer(ht.UNIFORM_BUFFER,wn);for(let Nn=0,zn=En.length;Nn<zn;Nn++){const $n=Array.isArray(En[Nn])?En[Nn]:[En[Nn]];for(let Ln=0,Sn=$n.length;Ln<Sn;Ln++){const jn=$n[Ln];if(_i(jn,Nn,Ln,er)===!0){const ur=jn.__offset,or=Array.isArray(jn.value)?jn.value:[jn.value];let Ar=0;for(let br=0;br<or.length;br++){const Vr=or[br],Es=hn(Vr);typeof Vr=="number"||typeof Vr=="boolean"?(jn.__data[0]=Vr,ht.bufferSubData(ht.UNIFORM_BUFFER,ur+Ar,jn.__data)):Vr.isMatrix3?(jn.__data[0]=Vr.elements[0],jn.__data[1]=Vr.elements[1],jn.__data[2]=Vr.elements[2],jn.__data[3]=0,jn.__data[4]=Vr.elements[3],jn.__data[5]=Vr.elements[4],jn.__data[6]=Vr.elements[5],jn.__data[7]=0,jn.__data[8]=Vr.elements[6],jn.__data[9]=Vr.elements[7],jn.__data[10]=Vr.elements[8],jn.__data[11]=0):(Vr.toArray(jn.__data,Ar),Ar+=Es.storage/Float32Array.BYTES_PER_ELEMENT)}ht.bufferSubData(ht.UNIFORM_BUFFER,ur,jn.__data)}}}ht.bindBuffer(ht.UNIFORM_BUFFER,null)}function _i(xn,wn,En,er){const Nn=xn.value,zn=wn+"_"+En;if(er[zn]===void 0)return typeof Nn=="number"||typeof Nn=="boolean"?er[zn]=Nn:er[zn]=Nn.clone(),!0;{const $n=er[zn];if(typeof Nn=="number"||typeof Nn=="boolean"){if($n!==Nn)return er[zn]=Nn,!0}else if($n.equals(Nn)===!1)return $n.copy(Nn),!0}return!1}function sn(xn){const wn=xn.uniforms;let En=0;const er=16;for(let zn=0,$n=wn.length;zn<$n;zn++){const Ln=Array.isArray(wn[zn])?wn[zn]:[wn[zn]];for(let Sn=0,jn=Ln.length;Sn<jn;Sn++){const ur=Ln[Sn],or=Array.isArray(ur.value)?ur.value:[ur.value];for(let Ar=0,br=or.length;Ar<br;Ar++){const Vr=or[Ar],Es=hn(Vr),Sr=En%er;Sr!==0&&er-Sr<Es.boundary&&(En+=er-Sr),ur.__data=new Float32Array(Es.storage/Float32Array.BYTES_PER_ELEMENT),ur.__offset=En,En+=Es.storage}}}const Nn=En%er;return Nn>0&&(En+=er-Nn),xn.__size=En,xn.__cache={},this}function hn(xn){const wn={boundary:0,storage:0};return typeof xn=="number"||typeof xn=="boolean"?(wn.boundary=4,wn.storage=4):xn.isVector2?(wn.boundary=8,wn.storage=8):xn.isVector3||xn.isColor?(wn.boundary=16,wn.storage=12):xn.isVector4?(wn.boundary=16,wn.storage=16):xn.isMatrix3?(wn.boundary=48,wn.storage=48):xn.isMatrix4?(wn.boundary=64,wn.storage=64):xn.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",xn),wn}function an(xn){const wn=xn.target;wn.removeEventListener("dispose",an);const En=At.indexOf(wn.__bindingPointIndex);At.splice(En,1),ht.deleteBuffer(at[wn.id]),delete at[wn.id],delete ut[wn.id]}function en(){for(const xn in at)ht.deleteBuffer(at[xn]);At=[],at={},ut={}}return{bind:Bt,update:Ft,dispose:en}}class Sw{constructor(c={}){const{canvas:j=gp(),context:rt=null,depth:at=!0,stencil:ut=!1,alpha:At=!1,antialias:wt=!1,premultipliedAlpha:Bt=!0,preserveDrawingBuffer:Ft=!1,powerPreference:Vt="default",failIfMajorPerformanceCaveat:qt=!1,multiviewStereo:Jt=!1}=c;this.isWebGLRenderer=!0;let _i;if(rt!==null){if(typeof WebGLRenderingContext<"u"&&rt instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_i=rt.getContextAttributes().alpha}else _i=At;const sn=new Uint32Array(4),hn=new Int32Array(4);let an=null,en=null;const xn=[],wn=[];this.domElement=j,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jo,this._useLegacyLights=!1,this.toneMapping=f0,this.toneMappingExposure=1;const En=this;let er=!1,Nn=0,zn=0,$n=null,Ln=-1,Sn=null;const jn=new r0,ur=new r0;let or=null;const Ar=new Os(0);let br=0,Vr=j.width,Es=j.height,Sr=1,hs=null,vs=null;const zs=new r0(0,0,Vr,Es),Qo=new r0(0,0,Vr,Es);let m0=!1;const k0=new Wu;let h0=!1,S0=!1;const Ws=new Vs,qr=new kn,ws={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ms(){return $n===null?Sr:1}let mr=rt;function Jr(Fn,vr){return j.getContext(Fn,vr)}try{const Fn={alpha:!0,depth:at,stencil:ut,antialias:wt,premultipliedAlpha:Bt,preserveDrawingBuffer:Ft,powerPreference:Vt,failIfMajorPerformanceCaveat:qt};if("setAttribute"in j&&j.setAttribute("data-engine",`three.js r${it}`),j.addEventListener("webglcontextlost",gs,!1),j.addEventListener("webglcontextrestored",Js,!1),j.addEventListener("webglcontextcreationerror",Fs,!1),mr===null){const vr="webgl2";if(mr=Jr(vr,Fn),mr===null)throw Jr(vr)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Fn){throw console.error("THREE.WebGLRenderer: "+Fn.message),Fn}let Fr,cs,ls,rs,Is,Hs,_o,Io,d0,$0,N0,qn,Tn,Pr,Xr,jr,$r,qs,ys,Gs,y0,Qs,eo,No,uo;function nr(){Fr=new Up(mr),Fr.init(),eo=new o4(mr,Fr),cs=new EE(mr,Fr,c,eo),ls=new mw(mr),rs=new bE(mr),Is=new W1,Hs=new vw(mr,Fr,ls,Is,cs,eo,rs),_o=new wE(En),Io=new lm(En),d0=new Sv(mr),No=new gE(mr,d0),$0=new _E(mr,d0,rs,No),N0=new TE(mr,$0,d0,rs),Gs=new ME(mr,cs,Hs),jr=new yE(Is),qn=new Wp(En,_o,Io,Fr,cs,No,jr),Tn=new bw(En,Is),Pr=new ow,Xr=new dw(Fr),ys=new vE(En,_o,Io,ls,N0,_i,Bt),qs=new SE(En,Fr,mr),$r=new Aw(En,N0,cs),uo=new Mw(mr,rs,cs,ls),y0=new sm(mr,Fr,rs),Qs=new xE(mr,Fr,rs),rs.programs=qn.programs,En.capabilities=cs,En.extensions=Fr,En.properties=Is,En.renderLists=Pr,En.shadowMap=$r,En.state=ls,En.info=rs}nr();const ss=typeof navigator<"u"&&"xr"in navigator?new _w(En,mr,Fr,Jt):new c4(En);this.xr=ss,this.getContext=function(){return mr},this.getContextAttributes=function(){return mr.getContextAttributes()},this.forceContextLoss=function(){const Fn=Fr.get("WEBGL_lose_context");Fn&&Fn.loseContext()},this.forceContextRestore=function(){const Fn=Fr.get("WEBGL_lose_context");Fn&&Fn.restoreContext()},this.getPixelRatio=function(){return Sr},this.setPixelRatio=function(Fn){Fn!==void 0&&(Sr=Fn,this.setSize(Vr,Es,!1))},this.getSize=function(Fn){return Fn.set(Vr,Es)},this.setSize=function(Fn,vr,Mr=!0){if(ss.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Vr=Fn,Es=vr,j.width=Math.floor(Fn*Sr),j.height=Math.floor(vr*Sr),Mr===!0&&(j.style.width=Fn+"px",j.style.height=vr+"px"),this.setViewport(0,0,Fn,vr)},this.getDrawingBufferSize=function(Fn){return Fn.set(Vr*Sr,Es*Sr).floor()},this.setDrawingBufferSize=function(Fn,vr,Mr){Vr=Fn,Es=vr,Sr=Mr,j.width=Math.floor(Fn*Mr),j.height=Math.floor(vr*Mr),this.setViewport(0,0,Fn,vr)},this.getCurrentViewport=function(Fn){return Fn.copy(jn)},this.getViewport=function(Fn){return Fn.copy(zs)},this.setViewport=function(Fn,vr,Mr,_r){Fn.isVector4?zs.set(Fn.x,Fn.y,Fn.z,Fn.w):zs.set(Fn,vr,Mr,_r),ls.viewport(jn.copy(zs).multiplyScalar(Sr).round())},this.getScissor=function(Fn){return Fn.copy(Qo)},this.setScissor=function(Fn,vr,Mr,_r){Fn.isVector4?Qo.set(Fn.x,Fn.y,Fn.z,Fn.w):Qo.set(Fn,vr,Mr,_r),ls.scissor(ur.copy(Qo).multiplyScalar(Sr).round())},this.getScissorTest=function(){return m0},this.setScissorTest=function(Fn){ls.setScissorTest(m0=Fn)},this.setOpaqueSort=function(Fn){hs=Fn},this.setTransparentSort=function(Fn){vs=Fn},this.getClearColor=function(Fn){return Fn.copy(ys.getClearColor())},this.setClearColor=function(){ys.setClearColor.apply(ys,arguments)},this.getClearAlpha=function(){return ys.getClearAlpha()},this.setClearAlpha=function(){ys.setClearAlpha.apply(ys,arguments)},this.clear=function(Fn=!0,vr=!0,Mr=!0){let _r=0;if(Fn){let xr=!1;if($n!==null){const Ds=$n.texture.format;xr=Ds===Ks||Ds===kr||Ds===Ns}if(xr){const Ds=$n.texture.type,no=Ds===D0||Ds===Ql||Ds===Yl||Ds===y1||Ds===_a||Ds===X1,ro=ys.getClearColor(),vo=ys.getClearAlpha(),Fo=ro.r,Vo=ro.g,qo=ro.b;no?(sn[0]=Fo,sn[1]=Vo,sn[2]=qo,sn[3]=vo,mr.clearBufferuiv(mr.COLOR,0,sn)):(hn[0]=Fo,hn[1]=Vo,hn[2]=qo,hn[3]=vo,mr.clearBufferiv(mr.COLOR,0,hn))}else _r|=mr.COLOR_BUFFER_BIT}vr&&(_r|=mr.DEPTH_BUFFER_BIT),Mr&&(_r|=mr.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),mr.clear(_r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){j.removeEventListener("webglcontextlost",gs,!1),j.removeEventListener("webglcontextrestored",Js,!1),j.removeEventListener("webglcontextcreationerror",Fs,!1),Pr.dispose(),Xr.dispose(),Is.dispose(),_o.dispose(),Io.dispose(),N0.dispose(),No.dispose(),uo.dispose(),qn.dispose(),ss.dispose(),ss.removeEventListener("sessionstart",Su),ss.removeEventListener("sessionend",Z7),ap.stop()};function gs(Fn){Fn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),er=!0}function Js(){console.log("THREE.WebGLRenderer: Context Restored."),er=!1;const Fn=rs.autoReset,vr=$r.enabled,Mr=$r.autoUpdate,_r=$r.needsUpdate,xr=$r.type;nr(),rs.autoReset=Fn,$r.enabled=vr,$r.autoUpdate=Mr,$r.needsUpdate=_r,$r.type=xr}function Fs(Fn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Fn.statusMessage)}function Uo(Fn){const vr=Fn.target;vr.removeEventListener("dispose",Uo),ks(vr)}function ks(Fn){Bs(Fn),Is.remove(Fn)}function Bs(Fn){const vr=Is.get(Fn).programs;vr!==void 0&&(vr.forEach(function(Mr){qn.releaseProgram(Mr)}),Fn.isShaderMaterial&&qn.releaseShaderCache(Fn))}this.renderBufferDirect=function(Fn,vr,Mr,_r,xr,Ds){vr===null&&(vr=ws);const no=xr.isMesh&&xr.matrixWorld.determinant()<0,ro=w_(Fn,vr,Mr,_r,xr);ls.setMaterial(_r,no);let vo=Mr.index,Fo=1;if(_r.wireframe===!0){if(vo=$0.getWireframeAttribute(Mr),vo===void 0)return;Fo=2}const Vo=Mr.drawRange,qo=Mr.attributes.position;let Dl=Vo.start*Fo,c1=(Vo.start+Vo.count)*Fo;Ds!==null&&(Dl=Math.max(Dl,Ds.start*Fo),c1=Math.min(c1,(Ds.start+Ds.count)*Fo)),vo!==null?(Dl=Math.max(Dl,0),c1=Math.min(c1,vo.count)):qo!=null&&(Dl=Math.max(Dl,0),c1=Math.min(c1,qo.count));const O1=c1-Dl;if(O1<0||O1===1/0)return;No.setup(xr,_r,ro,Mr,vo);let b2,v0=y0;if(vo!==null&&(b2=d0.get(vo),v0=Qs,v0.setIndex(b2)),xr.isMesh)_r.wireframe===!0?(ls.setLineWidth(_r.wireframeLinewidth*Ms()),v0.setMode(mr.LINES)):v0.setMode(mr.TRIANGLES);else if(xr.isLine){let Zu=_r.linewidth;Zu===void 0&&(Zu=1),ls.setLineWidth(Zu*Ms()),xr.isLineSegments?v0.setMode(mr.LINES):xr.isLineLoop?v0.setMode(mr.LINE_LOOP):v0.setMode(mr.LINE_STRIP)}else xr.isPoints?v0.setMode(mr.POINTS):xr.isSprite&&v0.setMode(mr.TRIANGLES);if(xr.isBatchedMesh)xr._multiDrawInstances!==null?v0.renderMultiDrawInstances(xr._multiDrawStarts,xr._multiDrawCounts,xr._multiDrawCount,xr._multiDrawInstances):v0.renderMultiDraw(xr._multiDrawStarts,xr._multiDrawCounts,xr._multiDrawCount);else if(xr.isInstancedMesh)v0.renderInstances(Dl,O1,xr.count);else if(Mr.isInstancedBufferGeometry){const Zu=Mr._maxInstanceCount!==void 0?Mr._maxInstanceCount:1/0,Yo=Math.min(Mr.instanceCount,Zu);v0.renderInstances(Dl,O1,Yo)}else v0.render(Dl,O1)};function Xo(Fn,vr,Mr){Fn.transparent===!0&&Fn.side===Ht&&Fn.forceSinglePass===!1?(Fn.side=Dt,Fn.needsUpdate=!0,Ev(Fn,vr,Mr),Fn.side=xt,Fn.needsUpdate=!0,Ev(Fn,vr,Mr),Fn.side=Ht):Ev(Fn,vr,Mr)}this.compile=function(Fn,vr,Mr=null){Mr===null&&(Mr=Fn),en=Xr.get(Mr),en.init(vr),wn.push(en),Mr.traverseVisible(function(xr){xr.isLight&&xr.layers.test(vr.layers)&&(en.pushLight(xr),xr.castShadow&&en.pushShadow(xr))}),Fn!==Mr&&Fn.traverseVisible(function(xr){xr.isLight&&xr.layers.test(vr.layers)&&(en.pushLight(xr),xr.castShadow&&en.pushShadow(xr))}),en.setupLights(En._useLegacyLights);const _r=new Set;return Fn.traverse(function(xr){const Ds=xr.material;if(Ds)if(Array.isArray(Ds))for(let no=0;no<Ds.length;no++){const ro=Ds[no];Xo(ro,Mr,xr),_r.add(ro)}else Xo(Ds,Mr,xr),_r.add(Ds)}),wn.pop(),en=null,_r},this.compileAsync=function(Fn,vr,Mr=null){const _r=this.compile(Fn,vr,Mr);return new Promise(xr=>{function Ds(){if(_r.forEach(function(no){Is.get(no).currentProgram.isReady()&&_r.delete(no)}),_r.size===0){xr(Fn);return}setTimeout(Ds,10)}Fr.get("KHR_parallel_shader_compile")!==null?Ds():setTimeout(Ds,10)})};let po=null;function Hl(Fn){po&&po(Fn)}function Su(){ap.stop()}function Z7(){ap.start()}const ap=new G2;ap.setAnimationLoop(Hl),typeof self<"u"&&ap.setContext(self),this.setAnimationLoop=function(Fn){po=Fn,ss.setAnimationLoop(Fn),Fn===null?ap.stop():ap.start()},ss.addEventListener("sessionstart",Su),ss.addEventListener("sessionend",Z7),this.render=function(Fn,vr){if(vr!==void 0&&vr.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(er===!0)return;Fn.matrixWorldAutoUpdate===!0&&Fn.updateMatrixWorld(),vr.parent===null&&vr.matrixWorldAutoUpdate===!0&&vr.updateMatrixWorld(),ss.enabled===!0&&ss.isPresenting===!0&&(ss.cameraAutoUpdate===!0&&ss.updateCamera(vr),vr=ss.getCamera()),Fn.isScene===!0&&Fn.onBeforeRender(En,Fn,vr,$n),en=Xr.get(Fn,wn.length),en.init(vr),wn.push(en),Ws.multiplyMatrices(vr.projectionMatrix,vr.matrixWorldInverse),k0.setFromProjectionMatrix(Ws),S0=this.localClippingEnabled,h0=jr.init(this.clippingPlanes,S0),an=Pr.get(Fn,xn.length),an.init(),xn.push(an),$7(Fn,vr,0,En.sortObjects),an.finish(),En.sortObjects===!0&&an.sort(hs,vs);const Mr=ss.enabled===!1||ss.isPresenting===!1||ss.hasDepthSensing()===!1;Mr&&ys.addToRenderList(an,Fn),this.info.render.frame++,h0===!0&&jr.beginShadows();const _r=en.state.shadowsArray;$r.render(_r,Fn,vr),h0===!0&&jr.endShadows(),this.info.autoReset===!0&&this.info.reset();const xr=an.opaque,Ds=an.transmissive;if(en.setupLights(En._useLegacyLights),vr.isArrayCamera){const no=vr.cameras;if(Ds.length>0)for(let ro=0,vo=no.length;ro<vo;ro++){const Fo=no[ro];j7(xr,Ds,Fn,Fo)}if(Mr&&ys.render(Fn),ss.enabled&&ss.isMultiview)Hs.setDeferTextureUploads(!0),Ry(an,Fn,vr,vr.cameras[0].viewport);else for(let ro=0,vo=no.length;ro<vo;ro++){const Fo=no[ro];Ry(an,Fn,Fo,Fo.viewport)}}else Ds.length>0&&j7(xr,Ds,Fn,vr),Mr&&ys.render(Fn),Ry(an,Fn,vr);$n!==null&&(Hs.updateMultisampleRenderTarget($n),Hs.updateRenderTargetMipmap($n)),Fn.isScene===!0&&Fn.onAfterRender(En,Fn,vr),Hs.runDeferredUploads(),ss.enabled&&ss.submitFrame&&ss.submitFrame(),No.resetDefaultState(),Ln=-1,Sn=null,wn.pop(),wn.length>0?(en=wn[wn.length-1],h0===!0&&jr.setGlobalState(En.clippingPlanes,en.state.camera)):en=null,xn.pop(),xn.length>0?an=xn[xn.length-1]:an=null};function $7(Fn,vr,Mr,_r){if(Fn.visible===!1)return;if(Fn.layers.test(vr.layers)){if(Fn.isGroup)Mr=Fn.renderOrder;else if(Fn.isLOD)Fn.autoUpdate===!0&&Fn.update(vr);else if(Fn.isLight)en.pushLight(Fn),Fn.castShadow&&en.pushShadow(Fn);else if(Fn.isSprite){if(!Fn.frustumCulled||k0.intersectsSprite(Fn)){_r&&qr.setFromMatrixPosition(Fn.matrixWorld).applyMatrix4(Ws);const no=N0.update(Fn),ro=Fn.material;ro.visible&&an.push(Fn,no,ro,Mr,qr.z,null)}}else if((Fn.isMesh||Fn.isLine||Fn.isPoints)&&(!Fn.frustumCulled||k0.intersectsObject(Fn))){const no=N0.update(Fn),ro=Fn.material;if(_r&&(Fn.boundingSphere!==void 0?(Fn.boundingSphere===null&&Fn.computeBoundingSphere(),qr.copy(Fn.boundingSphere.center)):(no.boundingSphere===null&&no.computeBoundingSphere(),qr.copy(no.boundingSphere.center)),qr.applyMatrix4(Fn.matrixWorld).applyMatrix4(Ws)),Array.isArray(ro)){const vo=no.groups;for(let Fo=0,Vo=vo.length;Fo<Vo;Fo++){const qo=vo[Fo],Dl=ro[qo.materialIndex];Dl&&Dl.visible&&an.push(Fn,no,Dl,Mr,qr.z,qo)}}else ro.visible&&an.push(Fn,no,ro,Mr,qr.z,null)}}const Ds=Fn.children;for(let no=0,ro=Ds.length;no<ro;no++)$7(Ds[no],vr,Mr,_r)}function Ry(Fn,vr,Mr,_r){const xr=Fn.opaque,Ds=Fn.transmissive,no=Fn.transparent;en.setupLightsView(Mr),h0===!0&&jr.setGlobalState(En.clippingPlanes,Mr),_r&&ls.viewport(jn.copy(_r)),xr.length>0&&gv(xr,vr,Mr),Ds.length>0&&gv(Ds,vr,Mr),no.length>0&&gv(no,vr,Mr),ls.buffers.depth.setTest(!0),ls.buffers.depth.setMask(!0),ls.buffers.color.setMask(!0),ls.setPolygonOffset(!1)}function j7(Fn,vr,Mr,_r){if((Mr.isScene===!0?Mr.overrideMaterial:null)!==null)return;en.state.transmissionRenderTarget[_r.id]===void 0&&(en.state.transmissionRenderTarget[_r.id]=new r1(1,1,{generateMipmaps:!0,type:Fr.has("EXT_color_buffer_half_float")||Fr.has("EXT_color_buffer_float")?Lo:D0,minFilter:o0,samples:4,stencilBuffer:ut,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const Ds=en.state.transmissionRenderTarget[_r.id],no=_r.viewport||jn;Ds.setSize(no.z,no.w);const ro=En.getRenderTarget();En.setRenderTarget(Ds),En.getClearColor(Ar),br=En.getClearAlpha(),br<1&&En.setClearColor(16777215,.5),En.clear();const vo=En.toneMapping;En.toneMapping=f0;const Fo=_r.viewport;if(_r.viewport!==void 0&&(_r.viewport=void 0),en.setupLightsView(_r),h0===!0&&jr.setGlobalState(En.clippingPlanes,_r),gv(Fn,Mr,_r),Hs.updateMultisampleRenderTarget(Ds),Hs.updateRenderTargetMipmap(Ds),Fr.has("WEBGL_multisampled_render_to_texture")===!1){let Vo=!1;for(let qo=0,Dl=vr.length;qo<Dl;qo++){const c1=vr[qo],O1=c1.object,b2=c1.geometry,v0=c1.material,Zu=c1.group;if(v0.side===Ht&&O1.layers.test(_r.layers)){const Yo=v0.side;v0.side=Dt,v0.needsUpdate=!0,ew(O1,Mr,_r,b2,v0,Zu),v0.side=Yo,v0.needsUpdate=!0,Vo=!0}}Vo===!0&&(Hs.updateMultisampleRenderTarget(Ds),Hs.updateRenderTargetMipmap(Ds))}En.setRenderTarget(ro),En.setClearColor(Ar,br),Fo!==void 0&&(_r.viewport=Fo),En.toneMapping=vo}function gv(Fn,vr,Mr){const _r=vr.isScene===!0?vr.overrideMaterial:null;for(let xr=0,Ds=Fn.length;xr<Ds;xr++){const no=Fn[xr],ro=no.object,vo=no.geometry,Fo=_r===null?no.material:_r,Vo=no.group;ro.layers.test(Mr.layers)&&ew(ro,vr,Mr,vo,Fo,Vo)}}function ew(Fn,vr,Mr,_r,xr,Ds){Fn.onBeforeRender(En,vr,Mr,_r,xr,Ds),Fn.modelViewMatrix.multiplyMatrices(Mr.matrixWorldInverse,Fn.matrixWorld),Fn.normalMatrix.getNormalMatrix(Fn.modelViewMatrix),xr.onBeforeRender(En,vr,Mr,_r,Fn,Ds),xr.transparent===!0&&xr.side===Ht&&xr.forceSinglePass===!1?(xr.side=Dt,xr.needsUpdate=!0,En.renderBufferDirect(Mr,vr,_r,xr,Fn,Ds),xr.side=xt,xr.needsUpdate=!0,En.renderBufferDirect(Mr,vr,_r,xr,Fn,Ds),xr.side=Ht):En.renderBufferDirect(Mr,vr,_r,xr,Fn,Ds),Fn.onAfterRender(En,vr,Mr,_r,xr,Ds)}function Ev(Fn,vr,Mr){vr.isScene!==!0&&(vr=ws);const _r=Is.get(Fn),xr=en.state.lights,Ds=en.state.shadowsArray,no=xr.state.version,ro=qn.getParameters(Fn,xr.state,Ds,vr,Mr),vo=qn.getProgramCacheKey(ro);let Fo=_r.programs;_r.environment=Fn.isMeshStandardMaterial?vr.environment:null,_r.fog=vr.fog,_r.envMap=(Fn.isMeshStandardMaterial?Io:_o).get(Fn.envMap||_r.environment),_r.envMapRotation=_r.environment!==null&&Fn.envMap===null?vr.environmentRotation:Fn.envMapRotation,Fo===void 0&&(Fn.addEventListener("dispose",Uo),Fo=new Map,_r.programs=Fo);let Vo=Fo.get(vo);if(Vo!==void 0){if(_r.currentProgram===Vo&&_r.lightsStateVersion===no)return iw(Fn,ro),Vo}else ro.uniforms=qn.getUniforms(Fn),Fn.onBuild(Mr,ro,En),Fn.onBeforeCompile(ro,En),Vo=qn.acquireProgram(ro,vo),Fo.set(vo,Vo),_r.uniforms=ro.uniforms;const qo=_r.uniforms;return(!Fn.isShaderMaterial&&!Fn.isRawShaderMaterial||Fn.clipping===!0)&&(qo.clippingPlanes=jr.uniform),iw(Fn,ro),_r.needsLights=__(Fn),_r.lightsStateVersion=no,_r.needsLights&&(qo.ambientLightColor.value=xr.state.ambient,qo.lightProbe.value=xr.state.probe,qo.directionalLights.value=xr.state.directional,qo.directionalLightShadows.value=xr.state.directionalShadow,qo.spotLights.value=xr.state.spot,qo.spotLightShadows.value=xr.state.spotShadow,qo.rectAreaLights.value=xr.state.rectArea,qo.ltc_1.value=xr.state.rectAreaLTC1,qo.ltc_2.value=xr.state.rectAreaLTC2,qo.pointLights.value=xr.state.point,qo.pointLightShadows.value=xr.state.pointShadow,qo.hemisphereLights.value=xr.state.hemi,qo.directionalShadowMap.value=xr.state.directionalShadowMap,qo.directionalShadowMatrix.value=xr.state.directionalShadowMatrix,qo.spotShadowMap.value=xr.state.spotShadowMap,qo.spotLightMatrix.value=xr.state.spotLightMatrix,qo.spotLightMap.value=xr.state.spotLightMap,qo.pointShadowMap.value=xr.state.pointShadowMap,qo.pointShadowMatrix.value=xr.state.pointShadowMatrix),_r.currentProgram=Vo,_r.uniformsList=null,Vo}function tw(Fn){if(Fn.uniformsList===null){const vr=Fn.currentProgram.getUniforms();Fn.uniformsList=zt.seqWithValue(vr.seq,Fn.uniforms)}return Fn.uniformsList}function iw(Fn,vr){const Mr=Is.get(Fn);Mr.outputColorSpace=vr.outputColorSpace,Mr.batching=vr.batching,Mr.instancing=vr.instancing,Mr.instancingColor=vr.instancingColor,Mr.instancingMorph=vr.instancingMorph,Mr.skinning=vr.skinning,Mr.morphTargets=vr.morphTargets,Mr.morphNormals=vr.morphNormals,Mr.morphColors=vr.morphColors,Mr.morphTargetsCount=vr.morphTargetsCount,Mr.numClippingPlanes=vr.numClippingPlanes,Mr.numIntersection=vr.numClipIntersection,Mr.vertexAlphas=vr.vertexAlphas,Mr.vertexTangents=vr.vertexTangents,Mr.toneMapping=vr.toneMapping,Mr.numMultiviewViews=vr.numMultiviewViews}function w_(Fn,vr,Mr,_r,xr){vr.isScene!==!0&&(vr=ws),Hs.resetTextureUnits();const Ds=vr.fog,no=_r.isMeshStandardMaterial?vr.environment:null,ro=$n===null?En.outputColorSpace:$n.isXRRenderTarget===!0?$n.texture.colorSpace:B1,vo=(_r.isMeshStandardMaterial?Io:_o).get(_r.envMap||no),Fo=_r.vertexColors===!0&&!!Mr.attributes.color&&Mr.attributes.color.itemSize===4,Vo=!!Mr.attributes.tangent&&(!!_r.normalMap||_r.anisotropy>0),qo=!!Mr.morphAttributes.position,Dl=!!Mr.morphAttributes.normal,c1=!!Mr.morphAttributes.color;let O1=f0;_r.toneMapped&&($n===null||$n.isXRRenderTarget===!0)&&(O1=En.toneMapping);const b2=$n&&$n.isWebGLMultiviewRenderTarget?$n.numViews:0,v0=Mr.morphAttributes.position||Mr.morphAttributes.normal||Mr.morphAttributes.color,Zu=v0!==void 0?v0.length:0,Yo=Is.get(_r),x_=en.state.lights;if(h0===!0&&(S0===!0||Fn!==Sn)){const K1=Fn===Sn&&_r.id===Ln;jr.setState(_r,Fn,K1)}let G0=!1;_r.version===Yo.__version?(Yo.needsLights&&Yo.lightsStateVersion!==x_.state.version||Yo.outputColorSpace!==ro||xr.isBatchedMesh&&Yo.batching===!1||!xr.isBatchedMesh&&Yo.batching===!0||xr.isInstancedMesh&&Yo.instancing===!1||!xr.isInstancedMesh&&Yo.instancing===!0||xr.isSkinnedMesh&&Yo.skinning===!1||!xr.isSkinnedMesh&&Yo.skinning===!0||xr.isInstancedMesh&&Yo.instancingColor===!0&&xr.instanceColor===null||xr.isInstancedMesh&&Yo.instancingColor===!1&&xr.instanceColor!==null||xr.isInstancedMesh&&Yo.instancingMorph===!0&&xr.morphTexture===null||xr.isInstancedMesh&&Yo.instancingMorph===!1&&xr.morphTexture!==null||Yo.envMap!==vo||_r.fog===!0&&Yo.fog!==Ds||Yo.numClippingPlanes!==void 0&&(Yo.numClippingPlanes!==jr.numPlanes||Yo.numIntersection!==jr.numIntersection)||Yo.vertexAlphas!==Fo||Yo.vertexTangents!==Vo||Yo.morphTargets!==qo||Yo.morphNormals!==Dl||Yo.morphColors!==c1||Yo.toneMapping!==O1||Yo.morphTargetsCount!==Zu||Yo.numMultiviewViews!==b2)&&(G0=!0):(G0=!0,Yo.__version=_r.version);let $u=Yo.currentProgram;G0===!0&&($u=Ev(_r,vr,xr));let nw=!1,Dm=!1,Iy=!1;const Gl=$u.getUniforms(),M2=Yo.uniforms;if(ls.useProgram($u.program)&&(nw=!0,Dm=!0,Iy=!0),_r.id!==Ln&&(Ln=_r.id,Dm=!0),nw||Sn!==Fn){$u.numMultiviewViews>0?(qs.updateCameraProjectionMatricesUniform(Fn,Gl),qs.updateCameraViewMatricesUniform(Fn,Gl)):(Gl.setValue(mr,"projectionMatrix",Fn.projectionMatrix),Gl.setValue(mr,"viewMatrix",Fn.matrixWorldInverse));const K1=Gl.map.cameraPosition;K1!==void 0&&K1.setValue(mr,qr.setFromMatrixPosition(Fn.matrixWorld)),cs.logarithmicDepthBuffer&&Gl.setValue(mr,"logDepthBufFC",2/(Math.log(Fn.far+1)/Math.LN2)),(_r.isMeshPhongMaterial||_r.isMeshToonMaterial||_r.isMeshLambertMaterial||_r.isMeshBasicMaterial||_r.isMeshStandardMaterial||_r.isShaderMaterial)&&Gl.setValue(mr,"isOrthographic",Fn.isOrthographicCamera===!0),Sn!==Fn&&(Sn=Fn,Dm=!0,Iy=!0)}if(xr.isSkinnedMesh){Gl.setOptional(mr,xr,"bindMatrix"),Gl.setOptional(mr,xr,"bindMatrixInverse");const K1=xr.skeleton;K1&&(K1.boneTexture===null&&K1.computeBoneTexture(),Gl.setValue(mr,"boneTexture",K1.boneTexture,Hs))}xr.isBatchedMesh&&(Gl.setOptional(mr,xr,"batchingTexture"),Gl.setValue(mr,"batchingTexture",xr._matricesTexture,Hs));const By=Mr.morphAttributes;if((By.position!==void 0||By.normal!==void 0||By.color!==void 0)&&Gs.update(xr,Mr,$u),(Dm||Yo.receiveShadow!==xr.receiveShadow)&&(Yo.receiveShadow=xr.receiveShadow,Gl.setValue(mr,"receiveShadow",xr.receiveShadow)),_r.isMeshGouraudMaterial&&_r.envMap!==null&&(M2.envMap.value=vo,M2.flipEnvMap.value=vo.isCubeTexture&&vo.isRenderTargetTexture===!1?-1:1),_r.isMeshStandardMaterial&&_r.envMap===null&&vr.environment!==null&&(M2.envMapIntensity.value=vr.environmentIntensity),Dm&&(Gl.setValue(mr,"toneMappingExposure",En.toneMappingExposure),Yo.needsLights&&C_(M2,Iy),Ds&&_r.fog===!0&&Tn.refreshFogUniforms(M2,Ds),Tn.refreshMaterialUniforms(M2,_r,Sr,Es,en.state.transmissionRenderTarget[Fn.id]),zt.upload(mr,tw(Yo),M2,Hs)),_r.isShaderMaterial&&_r.uniformsNeedUpdate===!0&&(zt.upload(mr,tw(Yo),M2,Hs),_r.uniformsNeedUpdate=!1),_r.isSpriteMaterial&&Gl.setValue(mr,"center",xr.center),$u.numMultiviewViews>0?qs.updateObjectMatricesUniforms(xr,Fn,Gl):(Gl.setValue(mr,"modelViewMatrix",xr.modelViewMatrix),Gl.setValue(mr,"normalMatrix",xr.normalMatrix)),Gl.setValue(mr,"modelMatrix",xr.matrixWorld),_r.isShaderMaterial||_r.isRawShaderMaterial){const K1=_r.uniformsGroups;for(let Ly=0,b_=K1.length;Ly<b_;Ly++){const rw=K1[Ly];uo.update(rw,$u),uo.bind(rw,$u)}}return $u}function C_(Fn,vr){Fn.ambientLightColor.needsUpdate=vr,Fn.lightProbe.needsUpdate=vr,Fn.directionalLights.needsUpdate=vr,Fn.directionalLightShadows.needsUpdate=vr,Fn.pointLights.needsUpdate=vr,Fn.pointLightShadows.needsUpdate=vr,Fn.spotLights.needsUpdate=vr,Fn.spotLightShadows.needsUpdate=vr,Fn.rectAreaLights.needsUpdate=vr,Fn.hemisphereLights.needsUpdate=vr}function __(Fn){return Fn.isMeshLambertMaterial||Fn.isMeshToonMaterial||Fn.isMeshPhongMaterial||Fn.isMeshStandardMaterial||Fn.isShadowMaterial||Fn.isShaderMaterial&&Fn.lights===!0}this.setTexture2D=function(){var Fn=!1;return function(Mr,_r){Mr&&Mr.isWebGLRenderTarget&&(Fn||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Fn=!0),Mr=Mr.texture),Hs.setTexture2D(Mr,_r)}}(),this.getActiveCubeFace=function(){return Nn},this.getActiveMipmapLevel=function(){return zn},this.getRenderTarget=function(){return $n},this.setRenderTargetTextures=function(Fn,vr,Mr){Is.get(Fn.texture).__webglTexture=vr,Is.get(Fn.depthTexture).__webglTexture=Mr;const _r=Is.get(Fn);_r.__hasExternalTextures=!0,_r.__autoAllocateDepthBuffer=Mr===void 0,!_r.__autoAllocateDepthBuffer&&(!$n||!$n.isWebGLMultiviewRenderTarget)&&Fr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Fn,vr){const Mr=Is.get(Fn);Mr.__webglFramebuffer=vr,Mr.__useDefaultFramebuffer=vr===void 0},this.setRenderTarget=function(Fn,vr=0,Mr=0){$n=Fn,Nn=vr,zn=Mr;let _r=!0,xr=null,Ds=!1,no=!1;if(Fn){const vo=Is.get(Fn);vo.__useDefaultFramebuffer!==void 0?(ls.bindFramebuffer(mr.FRAMEBUFFER,null),_r=!1):vo.__webglFramebuffer===void 0?Hs.setupRenderTarget(Fn):vo.__hasExternalTextures&&Hs.rebindTextures(Fn,Is.get(Fn.texture).__webglTexture,Is.get(Fn.depthTexture).__webglTexture);const Fo=Fn.texture;(Fo.isData3DTexture||Fo.isDataArrayTexture||Fo.isCompressedArrayTexture)&&(no=!0);const Vo=Is.get(Fn).__webglFramebuffer;Fn.isWebGLCubeRenderTarget?(Array.isArray(Vo[vr])?xr=Vo[vr][Mr]:xr=Vo[vr],Ds=!0):Fn.samples>0&&Hs.useMultisampledRTT(Fn)===!1?xr=Is.get(Fn).__webglMultisampledFramebuffer:Array.isArray(Vo)?xr=Vo[Mr]:xr=Vo,jn.copy(Fn.viewport),ur.copy(Fn.scissor),or=Fn.scissorTest}else jn.copy(zs).multiplyScalar(Sr).floor(),ur.copy(Qo).multiplyScalar(Sr).floor(),or=m0;if(ls.bindFramebuffer(mr.FRAMEBUFFER,xr)&&_r&&ls.drawBuffers(Fn,xr),ls.viewport(jn),ls.scissor(ur),ls.setScissorTest(or),Ds){const vo=Is.get(Fn.texture);mr.framebufferTexture2D(mr.FRAMEBUFFER,mr.COLOR_ATTACHMENT0,mr.TEXTURE_CUBE_MAP_POSITIVE_X+vr,vo.__webglTexture,Mr)}else if(no){const vo=Is.get(Fn.texture),Fo=vr||0;mr.framebufferTextureLayer(mr.FRAMEBUFFER,mr.COLOR_ATTACHMENT0,vo.__webglTexture,Mr||0,Fo)}Ln=-1},this.readRenderTargetPixels=function(Fn,vr,Mr,_r,xr,Ds,no){if(!(Fn&&Fn.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ro=Is.get(Fn).__webglFramebuffer;if(Fn.isWebGLCubeRenderTarget&&no!==void 0&&(ro=ro[no]),ro){ls.bindFramebuffer(mr.FRAMEBUFFER,ro);try{const vo=Fn.texture,Fo=vo.format,Vo=vo.type;if(!cs.textureFormatReadable(Fo)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!cs.textureTypeReadable(Vo)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}vr>=0&&vr<=Fn.width-_r&&Mr>=0&&Mr<=Fn.height-xr&&mr.readPixels(vr,Mr,_r,xr,eo.convert(Fo),eo.convert(Vo),Ds)}finally{const vo=$n!==null?Is.get($n).__webglFramebuffer:null;ls.bindFramebuffer(mr.FRAMEBUFFER,vo)}}},this.copyFramebufferToTexture=function(Fn,vr,Mr=0){const _r=Math.pow(2,-Mr),xr=Math.floor(vr.image.width*_r),Ds=Math.floor(vr.image.height*_r);Hs.setTexture2D(vr,0),mr.copyTexSubImage2D(mr.TEXTURE_2D,Mr,0,0,Fn.x,Fn.y,xr,Ds),ls.unbindTexture()},this.copyTextureToTexture=function(Fn,vr,Mr,_r=0){const xr=vr.image.width,Ds=vr.image.height,no=eo.convert(Mr.format),ro=eo.convert(Mr.type);Hs.setTexture2D(Mr,0),mr.pixelStorei(mr.UNPACK_FLIP_Y_WEBGL,Mr.flipY),mr.pixelStorei(mr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mr.premultiplyAlpha),mr.pixelStorei(mr.UNPACK_ALIGNMENT,Mr.unpackAlignment),vr.isDataTexture?mr.texSubImage2D(mr.TEXTURE_2D,_r,Fn.x,Fn.y,xr,Ds,no,ro,vr.image.data):vr.isCompressedTexture?mr.compressedTexSubImage2D(mr.TEXTURE_2D,_r,Fn.x,Fn.y,vr.mipmaps[0].width,vr.mipmaps[0].height,no,vr.mipmaps[0].data):mr.texSubImage2D(mr.TEXTURE_2D,_r,Fn.x,Fn.y,no,ro,vr.image),_r===0&&Mr.generateMipmaps&&mr.generateMipmap(mr.TEXTURE_2D),ls.unbindTexture()},this.copyTextureToTexture3D=function(Fn,vr,Mr,_r,xr=0){const Ds=Fn.max.x-Fn.min.x,no=Fn.max.y-Fn.min.y,ro=Fn.max.z-Fn.min.z,vo=eo.convert(_r.format),Fo=eo.convert(_r.type);let Vo;if(_r.isData3DTexture)Hs.setTexture3D(_r,0),Vo=mr.TEXTURE_3D;else if(_r.isDataArrayTexture||_r.isCompressedArrayTexture)Hs.setTexture2DArray(_r,0),Vo=mr.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}mr.pixelStorei(mr.UNPACK_FLIP_Y_WEBGL,_r.flipY),mr.pixelStorei(mr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_r.premultiplyAlpha),mr.pixelStorei(mr.UNPACK_ALIGNMENT,_r.unpackAlignment);const qo=mr.getParameter(mr.UNPACK_ROW_LENGTH),Dl=mr.getParameter(mr.UNPACK_IMAGE_HEIGHT),c1=mr.getParameter(mr.UNPACK_SKIP_PIXELS),O1=mr.getParameter(mr.UNPACK_SKIP_ROWS),b2=mr.getParameter(mr.UNPACK_SKIP_IMAGES),v0=Mr.isCompressedTexture?Mr.mipmaps[xr]:Mr.image;mr.pixelStorei(mr.UNPACK_ROW_LENGTH,v0.width),mr.pixelStorei(mr.UNPACK_IMAGE_HEIGHT,v0.height),mr.pixelStorei(mr.UNPACK_SKIP_PIXELS,Fn.min.x),mr.pixelStorei(mr.UNPACK_SKIP_ROWS,Fn.min.y),mr.pixelStorei(mr.UNPACK_SKIP_IMAGES,Fn.min.z),Mr.isDataTexture||Mr.isData3DTexture?mr.texSubImage3D(Vo,xr,vr.x,vr.y,vr.z,Ds,no,ro,vo,Fo,v0.data):_r.isCompressedArrayTexture?mr.compressedTexSubImage3D(Vo,xr,vr.x,vr.y,vr.z,Ds,no,ro,vo,v0.data):mr.texSubImage3D(Vo,xr,vr.x,vr.y,vr.z,Ds,no,ro,vo,Fo,v0),mr.pixelStorei(mr.UNPACK_ROW_LENGTH,qo),mr.pixelStorei(mr.UNPACK_IMAGE_HEIGHT,Dl),mr.pixelStorei(mr.UNPACK_SKIP_PIXELS,c1),mr.pixelStorei(mr.UNPACK_SKIP_ROWS,O1),mr.pixelStorei(mr.UNPACK_SKIP_IMAGES,b2),xr===0&&_r.generateMipmaps&&mr.generateMipmap(Vo),ls.unbindTexture()},this.initTexture=function(Fn){Fn.isCubeTexture?Hs.setTextureCube(Fn,0):Fn.isData3DTexture?Hs.setTexture3D(Fn,0):Fn.isDataArrayTexture||Fn.isCompressedArrayTexture?Hs.setTexture2DArray(Fn,0):Hs.setTexture2D(Fn,0),ls.unbindTexture()},this.resetState=function(){Nn=0,zn=0,$n=null,ls.reset(),No.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return C1}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(c){this._outputColorSpace=c;const j=this.getContext();j.drawingBufferColorSpace=c===ju?"display-p3":"srgb",j.unpackColorSpace=u0.workingColorSpace===Ru?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(c){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=c}}class x3{constructor(c,j=25e-5){this.isFogExp2=!0,this.name="",this.color=new Os(c),this.density=j}clone(){return new x3(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class b3{constructor(c,j=1,rt=1e3){this.isFog=!0,this.name="",this.color=new Os(c),this.near=j,this.far=rt}clone(){return new b3(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class h4 extends s0{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new f1,this.environmentIntensity=1,this.environmentRotation=new f1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(c,j){return super.copy(c,j),c.background!==null&&(this.background=c.background.clone()),c.environment!==null&&(this.environment=c.environment.clone()),c.fog!==null&&(this.fog=c.fog.clone()),this.backgroundBlurriness=c.backgroundBlurriness,this.backgroundIntensity=c.backgroundIntensity,this.backgroundRotation.copy(c.backgroundRotation),this.environmentIntensity=c.environmentIntensity,this.environmentRotation.copy(c.environmentRotation),c.overrideMaterial!==null&&(this.overrideMaterial=c.overrideMaterial.clone()),this.matrixAutoUpdate=c.matrixAutoUpdate,this}toJSON(c){const j=super.toJSON(c);return this.fog!==null&&(j.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(j.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(j.object.backgroundIntensity=this.backgroundIntensity),j.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(j.object.environmentIntensity=this.environmentIntensity),j.object.environmentRotation=this.environmentRotation.toArray(),j}}class M3{constructor(c,j){this.isInterleavedBuffer=!0,this.array=c,this.stride=j,this.count=c!==void 0?c.length/j:0,this.usage=Du,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Zl()}onUploadCallback(){}set needsUpdate(c){c===!0&&this.version++}get updateRange(){return K0("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(c){return this.usage=c,this}addUpdateRange(c,j){this.updateRanges.push({start:c,count:j})}clearUpdateRanges(){this.updateRanges.length=0}copy(c){return this.array=new c.array.constructor(c.array),this.count=c.count,this.stride=c.stride,this.usage=c.usage,this}copyAt(c,j,rt){c*=this.stride,rt*=j.stride;for(let at=0,ut=this.stride;at<ut;at++)this.array[c+at]=j.array[rt+at];return this}set(c,j=0){return this.array.set(c,j),this}clone(c){c.arrayBuffers===void 0&&(c.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zl()),c.arrayBuffers[this.array.buffer._uuid]===void 0&&(c.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const j=new this.array.constructor(c.arrayBuffers[this.array.buffer._uuid]),rt=new this.constructor(j,this.stride);return rt.setUsage(this.usage),rt}onUpload(c){return this.onUploadCallback=c,this}toJSON(c){return c.arrayBuffers===void 0&&(c.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zl()),c.arrayBuffers[this.array.buffer._uuid]===void 0&&(c.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const g1=new kn;class J2{constructor(c,j,rt,at=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=c,this.itemSize=j,this.offset=rt,this.normalized=at}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(c){this.data.needsUpdate=c}applyMatrix4(c){for(let j=0,rt=this.data.count;j<rt;j++)g1.fromBufferAttribute(this,j),g1.applyMatrix4(c),this.setXYZ(j,g1.x,g1.y,g1.z);return this}applyNormalMatrix(c){for(let j=0,rt=this.count;j<rt;j++)g1.fromBufferAttribute(this,j),g1.applyNormalMatrix(c),this.setXYZ(j,g1.x,g1.y,g1.z);return this}transformDirection(c){for(let j=0,rt=this.count;j<rt;j++)g1.fromBufferAttribute(this,j),g1.transformDirection(c),this.setXYZ(j,g1.x,g1.y,g1.z);return this}getComponent(c,j){let rt=this.array[c*this.data.stride+this.offset+j];return this.normalized&&(rt=Tl(rt,this.array)),rt}setComponent(c,j,rt){return this.normalized&&(rt=Co(rt,this.array)),this.data.array[c*this.data.stride+this.offset+j]=rt,this}setX(c,j){return this.normalized&&(j=Co(j,this.array)),this.data.array[c*this.data.stride+this.offset]=j,this}setY(c,j){return this.normalized&&(j=Co(j,this.array)),this.data.array[c*this.data.stride+this.offset+1]=j,this}setZ(c,j){return this.normalized&&(j=Co(j,this.array)),this.data.array[c*this.data.stride+this.offset+2]=j,this}setW(c,j){return this.normalized&&(j=Co(j,this.array)),this.data.array[c*this.data.stride+this.offset+3]=j,this}getX(c){let j=this.data.array[c*this.data.stride+this.offset];return this.normalized&&(j=Tl(j,this.array)),j}getY(c){let j=this.data.array[c*this.data.stride+this.offset+1];return this.normalized&&(j=Tl(j,this.array)),j}getZ(c){let j=this.data.array[c*this.data.stride+this.offset+2];return this.normalized&&(j=Tl(j,this.array)),j}getW(c){let j=this.data.array[c*this.data.stride+this.offset+3];return this.normalized&&(j=Tl(j,this.array)),j}setXY(c,j,rt){return c=c*this.data.stride+this.offset,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array)),this.data.array[c+0]=j,this.data.array[c+1]=rt,this}setXYZ(c,j,rt,at){return c=c*this.data.stride+this.offset,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array)),this.data.array[c+0]=j,this.data.array[c+1]=rt,this.data.array[c+2]=at,this}setXYZW(c,j,rt,at,ut){return c=c*this.data.stride+this.offset,this.normalized&&(j=Co(j,this.array),rt=Co(rt,this.array),at=Co(at,this.array),ut=Co(ut,this.array)),this.data.array[c+0]=j,this.data.array[c+1]=rt,this.data.array[c+2]=at,this.data.array[c+3]=ut,this}clone(c){if(c===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const j=[];for(let rt=0;rt<this.count;rt++){const at=rt*this.data.stride+this.offset;for(let ut=0;ut<this.itemSize;ut++)j.push(this.data.array[at+ut])}return new a0(new this.array.constructor(j),this.itemSize,this.normalized)}else return c.interleavedBuffers===void 0&&(c.interleavedBuffers={}),c.interleavedBuffers[this.data.uuid]===void 0&&(c.interleavedBuffers[this.data.uuid]=this.data.clone(c)),new J2(c.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(c){if(c===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const j=[];for(let rt=0;rt<this.count;rt++){const at=rt*this.data.stride+this.offset;for(let ut=0;ut<this.itemSize;ut++)j.push(this.data.array[at+ut])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:j,normalized:this.normalized}}else return c.interleavedBuffers===void 0&&(c.interleavedBuffers={}),c.interleavedBuffers[this.data.uuid]===void 0&&(c.interleavedBuffers[this.data.uuid]=this.data.toJSON(c)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zE extends Kl{constructor(c){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Os(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.alphaMap=c.alphaMap,this.rotation=c.rotation,this.sizeAttenuation=c.sizeAttenuation,this.fog=c.fog,this}}let Kp;const hm=new kn,Xp=new kn,Yp=new kn,qp=new Wr,dm=new Wr,d4=new Vs,S3=new kn,fm=new kn,T3=new kn,f4=new Wr,WE=new Wr,p4=new Wr;class A4 extends s0{constructor(c=new zE){if(super(),this.isSprite=!0,this.type="Sprite",Kp===void 0){Kp=new Bo;const j=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),rt=new M3(j,5);Kp.setIndex([0,1,2,0,2,3]),Kp.setAttribute("position",new J2(rt,3,0,!1)),Kp.setAttribute("uv",new J2(rt,2,3,!1))}this.geometry=Kp,this.material=c,this.center=new Wr(.5,.5)}raycast(c,j){c.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xp.setFromMatrixScale(this.matrixWorld),d4.copy(c.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(c.camera.matrixWorldInverse,this.matrixWorld),Yp.setFromMatrixPosition(this.modelViewMatrix),c.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xp.multiplyScalar(-Yp.z);const rt=this.material.rotation;let at,ut;rt!==0&&(ut=Math.cos(rt),at=Math.sin(rt));const At=this.center;R3(S3.set(-.5,-.5,0),Yp,At,Xp,at,ut),R3(fm.set(.5,-.5,0),Yp,At,Xp,at,ut),R3(T3.set(.5,.5,0),Yp,At,Xp,at,ut),f4.set(0,0),WE.set(1,0),p4.set(1,1);let wt=c.ray.intersectTriangle(S3,fm,T3,!1,hm);if(wt===null&&(R3(fm.set(-.5,.5,0),Yp,At,Xp,at,ut),WE.set(0,1),wt=c.ray.intersectTriangle(S3,T3,fm,!1,hm),wt===null))return;const Bt=c.ray.origin.distanceTo(hm);Bt<c.near||Bt>c.far||j.push({distance:Bt,point:hm.clone(),uv:p1.getInterpolation(hm,S3,fm,T3,f4,WE,p4,new Wr),face:null,object:this})}copy(c,j){return super.copy(c,j),c.center!==void 0&&this.center.copy(c.center),this.material=c.material,this}}function R3(ht,c,j,rt,at,ut){qp.subVectors(ht,j).addScalar(.5).multiply(rt),at!==void 0?(dm.x=ut*qp.x-at*qp.y,dm.y=at*qp.x+ut*qp.y):dm.copy(qp),ht.copy(c),ht.x+=dm.x,ht.y+=dm.y,ht.applyMatrix4(d4)}const I3=new kn,m4=new kn;class v4 extends s0{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(c){super.copy(c,!1);const j=c.levels;for(let rt=0,at=j.length;rt<at;rt++){const ut=j[rt];this.addLevel(ut.object.clone(),ut.distance,ut.hysteresis)}return this.autoUpdate=c.autoUpdate,this}addLevel(c,j=0,rt=0){j=Math.abs(j);const at=this.levels;let ut;for(ut=0;ut<at.length&&!(j<at[ut].distance);ut++);return at.splice(ut,0,{distance:j,hysteresis:rt,object:c}),this.add(c),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(c){const j=this.levels;if(j.length>0){let rt,at;for(rt=1,at=j.length;rt<at;rt++){let ut=j[rt].distance;if(j[rt].object.visible&&(ut-=ut*j[rt].hysteresis),c<ut)break}return j[rt-1].object}return null}raycast(c,j){if(this.levels.length>0){I3.setFromMatrixPosition(this.matrixWorld);const at=c.ray.origin.distanceTo(I3);this.getObjectForDistance(at).raycast(c,j)}}update(c){const j=this.levels;if(j.length>1){I3.setFromMatrixPosition(c.matrixWorld),m4.setFromMatrixPosition(this.matrixWorld);const rt=I3.distanceTo(m4)/c.zoom;j[0].object.visible=!0;let at,ut;for(at=1,ut=j.length;at<ut;at++){let At=j[at].distance;if(j[at].object.visible&&(At-=At*j[at].hysteresis),rt>=At)j[at-1].object.visible=!1,j[at].object.visible=!0;else break}for(this._currentLevel=at-1;at<ut;at++)j[at].object.visible=!1}}toJSON(c){const j=super.toJSON(c);this.autoUpdate===!1&&(j.object.autoUpdate=!1),j.object.levels=[];const rt=this.levels;for(let at=0,ut=rt.length;at<ut;at++){const At=rt[at];j.object.levels.push({object:At.object.uuid,distance:At.distance,hysteresis:At.hysteresis})}return j}}const g4=new kn,E4=new r0,y4=new r0,Tw=new kn,w4=new Vs,B3=new kn,KE=new ba,C4=new Vs,XE=new yl;class _4 extends Al{constructor(c,j){super(c,j),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Dn,this.bindMatrix=new Vs,this.bindMatrixInverse=new Vs,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const c=this.geometry;this.boundingBox===null&&(this.boundingBox=new H0),this.boundingBox.makeEmpty();const j=c.getAttribute("position");for(let rt=0;rt<j.count;rt++)this.getVertexPosition(rt,B3),this.boundingBox.expandByPoint(B3)}computeBoundingSphere(){const c=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ba),this.boundingSphere.makeEmpty();const j=c.getAttribute("position");for(let rt=0;rt<j.count;rt++)this.getVertexPosition(rt,B3),this.boundingSphere.expandByPoint(B3)}copy(c,j){return super.copy(c,j),this.bindMode=c.bindMode,this.bindMatrix.copy(c.bindMatrix),this.bindMatrixInverse.copy(c.bindMatrixInverse),this.skeleton=c.skeleton,c.boundingBox!==null&&(this.boundingBox=c.boundingBox.clone()),c.boundingSphere!==null&&(this.boundingSphere=c.boundingSphere.clone()),this}raycast(c,j){const rt=this.material,at=this.matrixWorld;rt!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),KE.copy(this.boundingSphere),KE.applyMatrix4(at),c.ray.intersectsSphere(KE)!==!1&&(C4.copy(at).invert(),XE.copy(c.ray).applyMatrix4(C4),!(this.boundingBox!==null&&XE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(c,j,XE)))}getVertexPosition(c,j){return super.getVertexPosition(c,j),this.applyBoneTransform(c,j),j}bind(c,j){this.skeleton=c,j===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),j=this.matrixWorld),this.bindMatrix.copy(j),this.bindMatrixInverse.copy(j).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const c=new r0,j=this.geometry.attributes.skinWeight;for(let rt=0,at=j.count;rt<at;rt++){c.fromBufferAttribute(j,rt);const ut=1/c.manhattanLength();ut!==1/0?c.multiplyScalar(ut):c.set(1,0,0,0),j.setXYZW(rt,c.x,c.y,c.z,c.w)}}updateMatrixWorld(c){super.updateMatrixWorld(c),this.bindMode===Dn?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Un?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(c,j){const rt=this.skeleton,at=this.geometry;E4.fromBufferAttribute(at.attributes.skinIndex,c),y4.fromBufferAttribute(at.attributes.skinWeight,c),g4.copy(j).applyMatrix4(this.bindMatrix),j.set(0,0,0);for(let ut=0;ut<4;ut++){const At=y4.getComponent(ut);if(At!==0){const wt=E4.getComponent(ut);w4.multiplyMatrices(rt.bones[wt].matrixWorld,rt.boneInverses[wt]),j.addScaledVector(Tw.copy(g4).applyMatrix4(w4),At)}}return j.applyMatrix4(this.bindMatrixInverse)}}class YE extends s0{constructor(){super(),this.isBone=!0,this.type="Bone"}}class E2 extends C0{constructor(c=null,j=1,rt=1,at,ut,At,wt,Bt,Ft=ps,Vt=ps,qt,Jt){super(null,At,wt,Bt,Ft,Vt,at,ut,qt,Jt),this.isDataTexture=!0,this.image={data:c,width:j,height:rt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const x4=new Vs,Rw=new Vs;class L3{constructor(c=[],j=[]){this.uuid=Zl(),this.bones=c.slice(0),this.boneInverses=j,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const c=this.bones,j=this.boneInverses;if(this.boneMatrices=new Float32Array(c.length*16),j.length===0)this.calculateInverses();else if(c.length!==j.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let rt=0,at=this.bones.length;rt<at;rt++)this.boneInverses.push(new Vs)}}calculateInverses(){this.boneInverses.length=0;for(let c=0,j=this.bones.length;c<j;c++){const rt=new Vs;this.bones[c]&&rt.copy(this.bones[c].matrixWorld).invert(),this.boneInverses.push(rt)}}pose(){for(let c=0,j=this.bones.length;c<j;c++){const rt=this.bones[c];rt&&rt.matrixWorld.copy(this.boneInverses[c]).invert()}for(let c=0,j=this.bones.length;c<j;c++){const rt=this.bones[c];rt&&(rt.parent&&rt.parent.isBone?(rt.matrix.copy(rt.parent.matrixWorld).invert(),rt.matrix.multiply(rt.matrixWorld)):rt.matrix.copy(rt.matrixWorld),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale))}}update(){const c=this.bones,j=this.boneInverses,rt=this.boneMatrices,at=this.boneTexture;for(let ut=0,At=c.length;ut<At;ut++){const wt=c[ut]?c[ut].matrixWorld:Rw;x4.multiplyMatrices(wt,j[ut]),x4.toArray(rt,ut*16)}at!==null&&(at.needsUpdate=!0)}clone(){return new L3(this.bones,this.boneInverses)}computeBoneTexture(){let c=Math.sqrt(this.bones.length*4);c=Math.ceil(c/4)*4,c=Math.max(c,4);const j=new Float32Array(c*c*4);j.set(this.boneMatrices);const rt=new E2(j,c,c,Xn,P0);return rt.needsUpdate=!0,this.boneMatrices=j,this.boneTexture=rt,this}getBoneByName(c){for(let j=0,rt=this.bones.length;j<rt;j++){const at=this.bones[j];if(at.name===c)return at}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(c,j){this.uuid=c.uuid;for(let rt=0,at=c.bones.length;rt<at;rt++){const ut=c.bones[rt];let At=j[ut];At===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ut),At=new YE),this.bones.push(At),this.boneInverses.push(new Vs().fromArray(c.boneInverses[rt]))}return this.init(),this}toJSON(){const c={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};c.uuid=this.uuid;const j=this.bones,rt=this.boneInverses;for(let at=0,ut=j.length;at<ut;at++){const At=j[at];c.bones.push(At.uuid);const wt=rt[at];c.boneInverses.push(wt.toArray())}return c}}class Jp extends a0{constructor(c,j,rt,at=1){super(c,j,rt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=at}copy(c){return super.copy(c),this.meshPerAttribute=c.meshPerAttribute,this}toJSON(){const c=super.toJSON();return c.meshPerAttribute=this.meshPerAttribute,c.isInstancedBufferAttribute=!0,c}}const Zp=new Vs,b4=new Vs,D3=[],M4=new H0,Iw=new Vs,pm=new Al,Am=new ba;class S4 extends Al{constructor(c,j,rt){super(c,j),this.isInstancedMesh=!0,this.instanceMatrix=new Jp(new Float32Array(rt*16),16),this.instanceColor=null,this.morphTexture=null,this.count=rt,this.boundingBox=null,this.boundingSphere=null;for(let at=0;at<rt;at++)this.setMatrixAt(at,Iw)}computeBoundingBox(){const c=this.geometry,j=this.count;this.boundingBox===null&&(this.boundingBox=new H0),c.boundingBox===null&&c.computeBoundingBox(),this.boundingBox.makeEmpty();for(let rt=0;rt<j;rt++)this.getMatrixAt(rt,Zp),M4.copy(c.boundingBox).applyMatrix4(Zp),this.boundingBox.union(M4)}computeBoundingSphere(){const c=this.geometry,j=this.count;this.boundingSphere===null&&(this.boundingSphere=new ba),c.boundingSphere===null&&c.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let rt=0;rt<j;rt++)this.getMatrixAt(rt,Zp),Am.copy(c.boundingSphere).applyMatrix4(Zp),this.boundingSphere.union(Am)}copy(c,j){return super.copy(c,j),this.instanceMatrix.copy(c.instanceMatrix),c.morphTexture!==null&&(this.morphTexture=c.morphTexture.clone()),c.instanceColor!==null&&(this.instanceColor=c.instanceColor.clone()),this.count=c.count,c.boundingBox!==null&&(this.boundingBox=c.boundingBox.clone()),c.boundingSphere!==null&&(this.boundingSphere=c.boundingSphere.clone()),this}getColorAt(c,j){j.fromArray(this.instanceColor.array,c*3)}getMatrixAt(c,j){j.fromArray(this.instanceMatrix.array,c*16)}getMorphAt(c,j){const rt=j.morphTargetInfluences,at=this.morphTexture.source.data.data,ut=rt.length+1,At=c*ut+1;for(let wt=0;wt<rt.length;wt++)rt[wt]=at[At+wt]}raycast(c,j){const rt=this.matrixWorld,at=this.count;if(pm.geometry=this.geometry,pm.material=this.material,pm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Am.copy(this.boundingSphere),Am.applyMatrix4(rt),c.ray.intersectsSphere(Am)!==!1))for(let ut=0;ut<at;ut++){this.getMatrixAt(ut,Zp),b4.multiplyMatrices(rt,Zp),pm.matrixWorld=b4,pm.raycast(c,D3);for(let At=0,wt=D3.length;At<wt;At++){const Bt=D3[At];Bt.instanceId=ut,Bt.object=this,j.push(Bt)}D3.length=0}}setColorAt(c,j){this.instanceColor===null&&(this.instanceColor=new Jp(new Float32Array(this.instanceMatrix.count*3),3)),j.toArray(this.instanceColor.array,c*3)}setMatrixAt(c,j){j.toArray(this.instanceMatrix.array,c*16)}setMorphAt(c,j){const rt=j.morphTargetInfluences,at=rt.length+1;this.morphTexture===null&&(this.morphTexture=new E2(new Float32Array(at*this.count),at,this.count,is,P0));const ut=this.morphTexture.source.data.data;let At=0;for(let Ft=0;Ft<rt.length;Ft++)At+=rt[Ft];const wt=this.geometry.morphTargetsRelative?1:1-At,Bt=at*c;ut[Bt]=wt,ut.set(rt,Bt+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Bw(ht,c){return ht.z-c.z}function Lw(ht,c){return c.z-ht.z}class Dw{constructor(){this.index=0,this.pool=[],this.list=[]}push(c,j){const rt=this.pool,at=this.list;this.index>=rt.length&&rt.push({start:-1,count:-1,z:-1});const ut=rt[this.index];at.push(ut),this.index++,ut.start=c.start,ut.count=c.count,ut.z=j}reset(){this.list.length=0,this.index=0}}const $p="batchId",y2=new Vs,T4=new Vs,Pw=new Vs,R4=new Vs,qE=new Wu,P3=new H0,Z2=new ba,mm=new kn,JE=new Dw,l1=new Al,O3=[];function Ow(ht,c,j=0){const rt=c.itemSize;if(ht.isInterleavedBufferAttribute||ht.array.constructor!==c.array.constructor){const at=ht.count;for(let ut=0;ut<at;ut++)for(let At=0;At<rt;At++)c.setComponent(ut+j,At,ht.getComponent(ut,At))}else c.array.set(ht.array,j*rt);c.needsUpdate=!0}class I4 extends Al{get maxGeometryCount(){return this._maxGeometryCount}constructor(c,j,rt=j*2,at){super(new Bo,at),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=c,this._maxVertexCount=j,this._maxIndexCount=rt,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(c),this._multiDrawStarts=new Int32Array(c),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let c=Math.sqrt(this._maxGeometryCount*4);c=Math.ceil(c/4)*4,c=Math.max(c,4);const j=new Float32Array(c*c*4),rt=new E2(j,c,c,Xn,P0);this._matricesTexture=rt}_initializeGeometry(c){const j=this.geometry,rt=this._maxVertexCount,at=this._maxGeometryCount,ut=this._maxIndexCount;if(this._geometryInitialized===!1){for(const wt in c.attributes){const Bt=c.getAttribute(wt),{array:Ft,itemSize:Vt,normalized:qt}=Bt,Jt=new Ft.constructor(rt*Vt),_i=new a0(Jt,Vt,qt);j.setAttribute(wt,_i)}if(c.getIndex()!==null){const wt=rt>65536?new Uint32Array(ut):new Uint16Array(ut);j.setIndex(new a0(wt,1))}const At=at>65536?new Uint32Array(rt):new Uint16Array(rt);j.setAttribute($p,new a0(At,1)),this._geometryInitialized=!0}}_validateGeometry(c){if(c.getAttribute($p))throw new Error(`BatchedMesh: Geometry cannot use attribute "${$p}"`);const j=this.geometry;if(!!c.getIndex()!=!!j.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const rt in j.attributes){if(rt===$p)continue;if(!c.hasAttribute(rt))throw new Error(`BatchedMesh: Added geometry missing "${rt}". All geometries must have consistent attributes.`);const at=c.getAttribute(rt),ut=j.getAttribute(rt);if(at.itemSize!==ut.itemSize||at.normalized!==ut.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(c){return this.customSort=c,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new H0);const c=this._geometryCount,j=this.boundingBox,rt=this._active;j.makeEmpty();for(let at=0;at<c;at++)rt[at]!==!1&&(this.getMatrixAt(at,y2),this.getBoundingBoxAt(at,P3).applyMatrix4(y2),j.union(P3))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ba);const c=this._geometryCount,j=this.boundingSphere,rt=this._active;j.makeEmpty();for(let at=0;at<c;at++)rt[at]!==!1&&(this.getMatrixAt(at,y2),this.getBoundingSphereAt(at,Z2).applyMatrix4(y2),j.union(Z2))}addGeometry(c,j=-1,rt=-1){if(this._initializeGeometry(c),this._validateGeometry(c),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const at={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let ut=null;const At=this._reservedRanges,wt=this._drawRanges,Bt=this._bounds;this._geometryCount!==0&&(ut=At[At.length-1]),j===-1?at.vertexCount=c.getAttribute("position").count:at.vertexCount=j,ut===null?at.vertexStart=0:at.vertexStart=ut.vertexStart+ut.vertexCount;const Ft=c.getIndex(),Vt=Ft!==null;if(Vt&&(rt===-1?at.indexCount=Ft.count:at.indexCount=rt,ut===null?at.indexStart=0:at.indexStart=ut.indexStart+ut.indexCount),at.indexStart!==-1&&at.indexStart+at.indexCount>this._maxIndexCount||at.vertexStart+at.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const qt=this._visibility,Jt=this._active,_i=this._matricesTexture,sn=this._matricesTexture.image.data;qt.push(!0),Jt.push(!0);const hn=this._geometryCount;this._geometryCount++,Pw.toArray(sn,hn*16),_i.needsUpdate=!0,At.push(at),wt.push({start:Vt?at.indexStart:at.vertexStart,count:-1}),Bt.push({boxInitialized:!1,box:new H0,sphereInitialized:!1,sphere:new ba});const an=this.geometry.getAttribute($p);for(let en=0;en<at.vertexCount;en++)an.setX(at.vertexStart+en,hn);return an.needsUpdate=!0,this.setGeometryAt(hn,c),hn}setGeometryAt(c,j){if(c>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(j);const rt=this.geometry,at=rt.getIndex()!==null,ut=rt.getIndex(),At=j.getIndex(),wt=this._reservedRanges[c];if(at&&At.count>wt.indexCount||j.attributes.position.count>wt.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const Bt=wt.vertexStart,Ft=wt.vertexCount;for(const _i in rt.attributes){if(_i===$p)continue;const sn=j.getAttribute(_i),hn=rt.getAttribute(_i);Ow(sn,hn,Bt);const an=sn.itemSize;for(let en=sn.count,xn=Ft;en<xn;en++){const wn=Bt+en;for(let En=0;En<an;En++)hn.setComponent(wn,En,0)}hn.needsUpdate=!0,hn.addUpdateRange(Bt*an,Ft*an)}if(at){const _i=wt.indexStart;for(let sn=0;sn<At.count;sn++)ut.setX(_i+sn,Bt+At.getX(sn));for(let sn=At.count,hn=wt.indexCount;sn<hn;sn++)ut.setX(_i+sn,Bt);ut.needsUpdate=!0,ut.addUpdateRange(_i,wt.indexCount)}const Vt=this._bounds[c];j.boundingBox!==null?(Vt.box.copy(j.boundingBox),Vt.boxInitialized=!0):Vt.boxInitialized=!1,j.boundingSphere!==null?(Vt.sphere.copy(j.boundingSphere),Vt.sphereInitialized=!0):Vt.sphereInitialized=!1;const qt=this._drawRanges[c],Jt=j.getAttribute("position");return qt.count=at?At.count:Jt.count,this._visibilityChanged=!0,c}deleteGeometry(c){const j=this._active;return c>=j.length||j[c]===!1?this:(j[c]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(c){return this._multiDrawInstances===null?null:this._multiDrawInstances[c]}setInstanceCountAt(c,j){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[c]=j,c}getBoundingBoxAt(c,j){if(this._active[c]===!1)return null;const at=this._bounds[c],ut=at.box,At=this.geometry;if(at.boxInitialized===!1){ut.makeEmpty();const wt=At.index,Bt=At.attributes.position,Ft=this._drawRanges[c];for(let Vt=Ft.start,qt=Ft.start+Ft.count;Vt<qt;Vt++){let Jt=Vt;wt&&(Jt=wt.getX(Jt)),ut.expandByPoint(mm.fromBufferAttribute(Bt,Jt))}at.boxInitialized=!0}return j.copy(ut),j}getBoundingSphereAt(c,j){if(this._active[c]===!1)return null;const at=this._bounds[c],ut=at.sphere,At=this.geometry;if(at.sphereInitialized===!1){ut.makeEmpty(),this.getBoundingBoxAt(c,P3),P3.getCenter(ut.center);const wt=At.index,Bt=At.attributes.position,Ft=this._drawRanges[c];let Vt=0;for(let qt=Ft.start,Jt=Ft.start+Ft.count;qt<Jt;qt++){let _i=qt;wt&&(_i=wt.getX(_i)),mm.fromBufferAttribute(Bt,_i),Vt=Math.max(Vt,ut.center.distanceToSquared(mm))}ut.radius=Math.sqrt(Vt),at.sphereInitialized=!0}return j.copy(ut),j}setMatrixAt(c,j){const rt=this._active,at=this._matricesTexture,ut=this._matricesTexture.image.data,At=this._geometryCount;return c>=At||rt[c]===!1?this:(j.toArray(ut,c*16),at.needsUpdate=!0,this)}getMatrixAt(c,j){const rt=this._active,at=this._matricesTexture.image.data,ut=this._geometryCount;return c>=ut||rt[c]===!1?null:j.fromArray(at,c*16)}setVisibleAt(c,j){const rt=this._visibility,at=this._active,ut=this._geometryCount;return c>=ut||at[c]===!1||rt[c]===j?this:(rt[c]=j,this._visibilityChanged=!0,this)}getVisibleAt(c){const j=this._visibility,rt=this._active,at=this._geometryCount;return c>=at||rt[c]===!1?!1:j[c]}raycast(c,j){const rt=this._visibility,at=this._active,ut=this._drawRanges,At=this._geometryCount,wt=this.matrixWorld,Bt=this.geometry;l1.material=this.material,l1.geometry.index=Bt.index,l1.geometry.attributes=Bt.attributes,l1.geometry.boundingBox===null&&(l1.geometry.boundingBox=new H0),l1.geometry.boundingSphere===null&&(l1.geometry.boundingSphere=new ba);for(let Ft=0;Ft<At;Ft++){if(!rt[Ft]||!at[Ft])continue;const Vt=ut[Ft];l1.geometry.setDrawRange(Vt.start,Vt.count),this.getMatrixAt(Ft,l1.matrixWorld).premultiply(wt),this.getBoundingBoxAt(Ft,l1.geometry.boundingBox),this.getBoundingSphereAt(Ft,l1.geometry.boundingSphere),l1.raycast(c,O3);for(let qt=0,Jt=O3.length;qt<Jt;qt++){const _i=O3[qt];_i.object=this,_i.batchId=Ft,j.push(_i)}O3.length=0}l1.material=null,l1.geometry.index=null,l1.geometry.attributes={},l1.geometry.setDrawRange(0,1/0)}copy(c){return super.copy(c),this.geometry=c.geometry.clone(),this.perObjectFrustumCulled=c.perObjectFrustumCulled,this.sortObjects=c.sortObjects,this.boundingBox=c.boundingBox!==null?c.boundingBox.clone():null,this.boundingSphere=c.boundingSphere!==null?c.boundingSphere.clone():null,this._drawRanges=c._drawRanges.map(j=>({...j})),this._reservedRanges=c._reservedRanges.map(j=>({...j})),this._visibility=c._visibility.slice(),this._active=c._active.slice(),this._bounds=c._bounds.map(j=>({boxInitialized:j.boxInitialized,box:j.box.clone(),sphereInitialized:j.sphereInitialized,sphere:j.sphere.clone()})),this._maxGeometryCount=c._maxGeometryCount,this._maxVertexCount=c._maxVertexCount,this._maxIndexCount=c._maxIndexCount,this._geometryInitialized=c._geometryInitialized,this._geometryCount=c._geometryCount,this._multiDrawCounts=c._multiDrawCounts.slice(),this._multiDrawStarts=c._multiDrawStarts.slice(),this._matricesTexture=c._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(c,j,rt,at,ut){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const At=at.getIndex(),wt=At===null?1:At.array.BYTES_PER_ELEMENT,Bt=this._active,Ft=this._visibility,Vt=this._multiDrawStarts,qt=this._multiDrawCounts,Jt=this._drawRanges,_i=this.perObjectFrustumCulled;_i&&(R4.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse).multiply(this.matrixWorld),qE.setFromProjectionMatrix(R4,c.coordinateSystem));let sn=0;if(this.sortObjects){T4.copy(this.matrixWorld).invert(),mm.setFromMatrixPosition(rt.matrixWorld).applyMatrix4(T4);for(let en=0,xn=Ft.length;en<xn;en++)if(Ft[en]&&Bt[en]){this.getMatrixAt(en,y2),this.getBoundingSphereAt(en,Z2).applyMatrix4(y2);let wn=!1;if(_i&&(wn=!qE.intersectsSphere(Z2)),!wn){const En=mm.distanceTo(Z2.center);JE.push(Jt[en],En)}}const hn=JE.list,an=this.customSort;an===null?hn.sort(ut.transparent?Lw:Bw):an.call(this,hn,rt);for(let en=0,xn=hn.length;en<xn;en++){const wn=hn[en];Vt[sn]=wn.start*wt,qt[sn]=wn.count,sn++}JE.reset()}else for(let hn=0,an=Ft.length;hn<an;hn++)if(Ft[hn]&&Bt[hn]){let en=!1;if(_i&&(this.getMatrixAt(hn,y2),this.getBoundingSphereAt(hn,Z2).applyMatrix4(y2),en=!qE.intersectsSphere(Z2)),!en){const xn=Jt[hn];Vt[sn]=xn.start*wt,qt[sn]=xn.count,sn++}}this._multiDrawCount=sn,this._visibilityChanged=!1}onBeforeShadow(c,j,rt,at,ut,At){this.onBeforeRender(c,null,at,ut,At)}}class E1 extends Kl{constructor(c){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Os(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.linewidth=c.linewidth,this.linecap=c.linecap,this.linejoin=c.linejoin,this.fog=c.fog,this}}const F3=new kn,k3=new kn,B4=new Vs,vm=new yl,N3=new ba,ZE=new kn,L4=new kn;class w2 extends s0{constructor(c=new Bo,j=new E1){super(),this.isLine=!0,this.type="Line",this.geometry=c,this.material=j,this.updateMorphTargets()}copy(c,j){return super.copy(c,j),this.material=Array.isArray(c.material)?c.material.slice():c.material,this.geometry=c.geometry,this}computeLineDistances(){const c=this.geometry;if(c.index===null){const j=c.attributes.position,rt=[0];for(let at=1,ut=j.count;at<ut;at++)F3.fromBufferAttribute(j,at-1),k3.fromBufferAttribute(j,at),rt[at]=rt[at-1],rt[at]+=F3.distanceTo(k3);c.setAttribute("lineDistance",new Qr(rt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(c,j){const rt=this.geometry,at=this.matrixWorld,ut=c.params.Line.threshold,At=rt.drawRange;if(rt.boundingSphere===null&&rt.computeBoundingSphere(),N3.copy(rt.boundingSphere),N3.applyMatrix4(at),N3.radius+=ut,c.ray.intersectsSphere(N3)===!1)return;B4.copy(at).invert(),vm.copy(c.ray).applyMatrix4(B4);const wt=ut/((this.scale.x+this.scale.y+this.scale.z)/3),Bt=wt*wt,Ft=this.isLineSegments?2:1,Vt=rt.index,Jt=rt.attributes.position;if(Vt!==null){const _i=Math.max(0,At.start),sn=Math.min(Vt.count,At.start+At.count);for(let hn=_i,an=sn-1;hn<an;hn+=Ft){const en=Vt.getX(hn),xn=Vt.getX(hn+1),wn=U3(this,c,vm,Bt,en,xn);wn&&j.push(wn)}if(this.isLineLoop){const hn=Vt.getX(sn-1),an=Vt.getX(_i),en=U3(this,c,vm,Bt,hn,an);en&&j.push(en)}}else{const _i=Math.max(0,At.start),sn=Math.min(Jt.count,At.start+At.count);for(let hn=_i,an=sn-1;hn<an;hn+=Ft){const en=U3(this,c,vm,Bt,hn,hn+1);en&&j.push(en)}if(this.isLineLoop){const hn=U3(this,c,vm,Bt,sn-1,_i);hn&&j.push(hn)}}}updateMorphTargets(){const j=this.geometry.morphAttributes,rt=Object.keys(j);if(rt.length>0){const at=j[rt[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ut=0,At=at.length;ut<At;ut++){const wt=at[ut].name||String(ut);this.morphTargetInfluences.push(0),this.morphTargetDictionary[wt]=ut}}}}}function U3(ht,c,j,rt,at,ut){const At=ht.geometry.attributes.position;if(F3.fromBufferAttribute(At,at),k3.fromBufferAttribute(At,ut),j.distanceSqToSegment(F3,k3,ZE,L4)>rt)return;ZE.applyMatrix4(ht.matrixWorld);const Bt=c.ray.origin.distanceTo(ZE);if(!(Bt<c.near||Bt>c.far))return{distance:Bt,point:L4.clone().applyMatrix4(ht.matrixWorld),index:at,face:null,faceIndex:null,object:ht}}const D4=new kn,P4=new kn;class bu extends w2{constructor(c,j){super(c,j),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const c=this.geometry;if(c.index===null){const j=c.attributes.position,rt=[];for(let at=0,ut=j.count;at<ut;at+=2)D4.fromBufferAttribute(j,at),P4.fromBufferAttribute(j,at+1),rt[at]=at===0?0:rt[at-1],rt[at+1]=rt[at]+D4.distanceTo(P4);c.setAttribute("lineDistance",new Qr(rt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class O4 extends w2{constructor(c,j){super(c,j),this.isLineLoop=!0,this.type="LineLoop"}}class $E extends Kl{constructor(c){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Os(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.alphaMap=c.alphaMap,this.size=c.size,this.sizeAttenuation=c.sizeAttenuation,this.fog=c.fog,this}}const F4=new Vs,jE=new yl,H3=new ba,G3=new kn;class k4 extends s0{constructor(c=new Bo,j=new $E){super(),this.isPoints=!0,this.type="Points",this.geometry=c,this.material=j,this.updateMorphTargets()}copy(c,j){return super.copy(c,j),this.material=Array.isArray(c.material)?c.material.slice():c.material,this.geometry=c.geometry,this}raycast(c,j){const rt=this.geometry,at=this.matrixWorld,ut=c.params.Points.threshold,At=rt.drawRange;if(rt.boundingSphere===null&&rt.computeBoundingSphere(),H3.copy(rt.boundingSphere),H3.applyMatrix4(at),H3.radius+=ut,c.ray.intersectsSphere(H3)===!1)return;F4.copy(at).invert(),jE.copy(c.ray).applyMatrix4(F4);const wt=ut/((this.scale.x+this.scale.y+this.scale.z)/3),Bt=wt*wt,Ft=rt.index,qt=rt.attributes.position;if(Ft!==null){const Jt=Math.max(0,At.start),_i=Math.min(Ft.count,At.start+At.count);for(let sn=Jt,hn=_i;sn<hn;sn++){const an=Ft.getX(sn);G3.fromBufferAttribute(qt,an),N4(G3,an,Bt,at,c,j,this)}}else{const Jt=Math.max(0,At.start),_i=Math.min(qt.count,At.start+At.count);for(let sn=Jt,hn=_i;sn<hn;sn++)G3.fromBufferAttribute(qt,sn),N4(G3,sn,Bt,at,c,j,this)}}updateMorphTargets(){const j=this.geometry.morphAttributes,rt=Object.keys(j);if(rt.length>0){const at=j[rt[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ut=0,At=at.length;ut<At;ut++){const wt=at[ut].name||String(ut);this.morphTargetInfluences.push(0),this.morphTargetDictionary[wt]=ut}}}}}function N4(ht,c,j,rt,at,ut,At){const wt=jE.distanceSqToPoint(ht);if(wt<j){const Bt=new kn;jE.closestPointToPoint(ht,Bt),Bt.applyMatrix4(rt);const Ft=at.ray.origin.distanceTo(Bt);if(Ft<at.near||Ft>at.far)return;ut.push({distance:Ft,distanceToRay:Math.sqrt(wt),point:Bt,index:c,face:null,object:At})}}class Fw extends C0{constructor(c,j,rt,at,ut,At,wt,Bt,Ft){super(c,j,rt,at,ut,At,wt,Bt,Ft),this.isVideoTexture=!0,this.minFilter=At!==void 0?At:to,this.magFilter=ut!==void 0?ut:to,this.generateMipmaps=!1;const Vt=this;function qt(){Vt.needsUpdate=!0,c.requestVideoFrameCallback(qt)}"requestVideoFrameCallback"in c&&c.requestVideoFrameCallback(qt)}clone(){return new this.constructor(this.image).copy(this)}update(){const c=this.image;"requestVideoFrameCallback"in c===!1&&c.readyState>=c.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kw extends C0{constructor(c,j){super({width:c,height:j}),this.isFramebufferTexture=!0,this.magFilter=ps,this.minFilter=ps,this.generateMipmaps=!1,this.needsUpdate=!0}}class Q3 extends C0{constructor(c,j,rt,at,ut,At,wt,Bt,Ft,Vt,qt,Jt){super(null,At,wt,Bt,Ft,Vt,at,ut,qt,Jt),this.isCompressedTexture=!0,this.image={width:j,height:rt},this.mipmaps=c,this.flipY=!1,this.generateMipmaps=!1}}class Nw extends Q3{constructor(c,j,rt,at,ut,At){super(c,j,rt,ut,At),this.isCompressedArrayTexture=!0,this.image.depth=at,this.wrapR=rr}}class Uw extends Q3{constructor(c,j,rt){super(void 0,c[0].width,c[0].height,j,rt,un),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=c}}class Hw extends C0{constructor(c,j,rt,at,ut,At,wt,Bt,Ft){super(c,j,rt,at,ut,At,wt,Bt,Ft),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(c,j){const rt=this.getUtoTmapping(c);return this.getPoint(rt,j)}getPoints(c=5){const j=[];for(let rt=0;rt<=c;rt++)j.push(this.getPoint(rt/c));return j}getSpacedPoints(c=5){const j=[];for(let rt=0;rt<=c;rt++)j.push(this.getPointAt(rt/c));return j}getLength(){const c=this.getLengths();return c[c.length-1]}getLengths(c=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===c+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const j=[];let rt,at=this.getPoint(0),ut=0;j.push(0);for(let At=1;At<=c;At++)rt=this.getPoint(At/c),ut+=rt.distanceTo(at),j.push(ut),at=rt;return this.cacheArcLengths=j,j}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(c,j){const rt=this.getLengths();let at=0;const ut=rt.length;let At;j?At=j:At=c*rt[ut-1];let wt=0,Bt=ut-1,Ft;for(;wt<=Bt;)if(at=Math.floor(wt+(Bt-wt)/2),Ft=rt[at]-At,Ft<0)wt=at+1;else if(Ft>0)Bt=at-1;else{Bt=at;break}if(at=Bt,rt[at]===At)return at/(ut-1);const Vt=rt[at],Jt=rt[at+1]-Vt,_i=(At-Vt)/Jt;return(at+_i)/(ut-1)}getTangent(c,j){let at=c-1e-4,ut=c+1e-4;at<0&&(at=0),ut>1&&(ut=1);const At=this.getPoint(at),wt=this.getPoint(ut),Bt=j||(At.isVector2?new Wr:new kn);return Bt.copy(wt).sub(At).normalize(),Bt}getTangentAt(c,j){const rt=this.getUtoTmapping(c);return this.getTangent(rt,j)}computeFrenetFrames(c,j){const rt=new kn,at=[],ut=[],At=[],wt=new kn,Bt=new Vs;for(let _i=0;_i<=c;_i++){const sn=_i/c;at[_i]=this.getTangentAt(sn,new kn)}ut[0]=new kn,At[0]=new kn;let Ft=Number.MAX_VALUE;const Vt=Math.abs(at[0].x),qt=Math.abs(at[0].y),Jt=Math.abs(at[0].z);Vt<=Ft&&(Ft=Vt,rt.set(1,0,0)),qt<=Ft&&(Ft=qt,rt.set(0,1,0)),Jt<=Ft&&rt.set(0,0,1),wt.crossVectors(at[0],rt).normalize(),ut[0].crossVectors(at[0],wt),At[0].crossVectors(at[0],ut[0]);for(let _i=1;_i<=c;_i++){if(ut[_i]=ut[_i-1].clone(),At[_i]=At[_i-1].clone(),wt.crossVectors(at[_i-1],at[_i]),wt.length()>Number.EPSILON){wt.normalize();const sn=Math.acos(F0(at[_i-1].dot(at[_i]),-1,1));ut[_i].applyMatrix4(Bt.makeRotationAxis(wt,sn))}At[_i].crossVectors(at[_i],ut[_i])}if(j===!0){let _i=Math.acos(F0(ut[0].dot(ut[c]),-1,1));_i/=c,at[0].dot(wt.crossVectors(ut[0],ut[c]))>0&&(_i=-_i);for(let sn=1;sn<=c;sn++)ut[sn].applyMatrix4(Bt.makeRotationAxis(at[sn],_i*sn)),At[sn].crossVectors(at[sn],ut[sn])}return{tangents:at,normals:ut,binormals:At}}clone(){return new this.constructor().copy(this)}copy(c){return this.arcLengthDivisions=c.arcLengthDivisions,this}toJSON(){const c={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return c.arcLengthDivisions=this.arcLengthDivisions,c.type=this.type,c}fromJSON(c){return this.arcLengthDivisions=c.arcLengthDivisions,this}}class V3 extends cu{constructor(c=0,j=0,rt=1,at=1,ut=0,At=Math.PI*2,wt=!1,Bt=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=c,this.aY=j,this.xRadius=rt,this.yRadius=at,this.aStartAngle=ut,this.aEndAngle=At,this.aClockwise=wt,this.aRotation=Bt}getPoint(c,j=new Wr){const rt=j,at=Math.PI*2;let ut=this.aEndAngle-this.aStartAngle;const At=Math.abs(ut)<Number.EPSILON;for(;ut<0;)ut+=at;for(;ut>at;)ut-=at;ut<Number.EPSILON&&(At?ut=0:ut=at),this.aClockwise===!0&&!At&&(ut===at?ut=-at:ut=ut-at);const wt=this.aStartAngle+c*ut;let Bt=this.aX+this.xRadius*Math.cos(wt),Ft=this.aY+this.yRadius*Math.sin(wt);if(this.aRotation!==0){const Vt=Math.cos(this.aRotation),qt=Math.sin(this.aRotation),Jt=Bt-this.aX,_i=Ft-this.aY;Bt=Jt*Vt-_i*qt+this.aX,Ft=Jt*qt+_i*Vt+this.aY}return rt.set(Bt,Ft)}copy(c){return super.copy(c),this.aX=c.aX,this.aY=c.aY,this.xRadius=c.xRadius,this.yRadius=c.yRadius,this.aStartAngle=c.aStartAngle,this.aEndAngle=c.aEndAngle,this.aClockwise=c.aClockwise,this.aRotation=c.aRotation,this}toJSON(){const c=super.toJSON();return c.aX=this.aX,c.aY=this.aY,c.xRadius=this.xRadius,c.yRadius=this.yRadius,c.aStartAngle=this.aStartAngle,c.aEndAngle=this.aEndAngle,c.aClockwise=this.aClockwise,c.aRotation=this.aRotation,c}fromJSON(c){return super.fromJSON(c),this.aX=c.aX,this.aY=c.aY,this.xRadius=c.xRadius,this.yRadius=c.yRadius,this.aStartAngle=c.aStartAngle,this.aEndAngle=c.aEndAngle,this.aClockwise=c.aClockwise,this.aRotation=c.aRotation,this}}class U4 extends V3{constructor(c,j,rt,at,ut,At){super(c,j,rt,rt,at,ut,At),this.isArcCurve=!0,this.type="ArcCurve"}}function ey(){let ht=0,c=0,j=0,rt=0;function at(ut,At,wt,Bt){ht=ut,c=wt,j=-3*ut+3*At-2*wt-Bt,rt=2*ut-2*At+wt+Bt}return{initCatmullRom:function(ut,At,wt,Bt,Ft){at(At,wt,Ft*(wt-ut),Ft*(Bt-At))},initNonuniformCatmullRom:function(ut,At,wt,Bt,Ft,Vt,qt){let Jt=(At-ut)/Ft-(wt-ut)/(Ft+Vt)+(wt-At)/Vt,_i=(wt-At)/Vt-(Bt-At)/(Vt+qt)+(Bt-wt)/qt;Jt*=Vt,_i*=Vt,at(At,wt,Jt,_i)},calc:function(ut){const At=ut*ut,wt=At*ut;return ht+c*ut+j*At+rt*wt}}}const z3=new kn,ty=new ey,iy=new ey,ny=new ey;class H4 extends cu{constructor(c=[],j=!1,rt="centripetal",at=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=c,this.closed=j,this.curveType=rt,this.tension=at}getPoint(c,j=new kn){const rt=j,at=this.points,ut=at.length,At=(ut-(this.closed?0:1))*c;let wt=Math.floor(At),Bt=At-wt;this.closed?wt+=wt>0?0:(Math.floor(Math.abs(wt)/ut)+1)*ut:Bt===0&&wt===ut-1&&(wt=ut-2,Bt=1);let Ft,Vt;this.closed||wt>0?Ft=at[(wt-1)%ut]:(z3.subVectors(at[0],at[1]).add(at[0]),Ft=z3);const qt=at[wt%ut],Jt=at[(wt+1)%ut];if(this.closed||wt+2<ut?Vt=at[(wt+2)%ut]:(z3.subVectors(at[ut-1],at[ut-2]).add(at[ut-1]),Vt=z3),this.curveType==="centripetal"||this.curveType==="chordal"){const _i=this.curveType==="chordal"?.5:.25;let sn=Math.pow(Ft.distanceToSquared(qt),_i),hn=Math.pow(qt.distanceToSquared(Jt),_i),an=Math.pow(Jt.distanceToSquared(Vt),_i);hn<1e-4&&(hn=1),sn<1e-4&&(sn=hn),an<1e-4&&(an=hn),ty.initNonuniformCatmullRom(Ft.x,qt.x,Jt.x,Vt.x,sn,hn,an),iy.initNonuniformCatmullRom(Ft.y,qt.y,Jt.y,Vt.y,sn,hn,an),ny.initNonuniformCatmullRom(Ft.z,qt.z,Jt.z,Vt.z,sn,hn,an)}else this.curveType==="catmullrom"&&(ty.initCatmullRom(Ft.x,qt.x,Jt.x,Vt.x,this.tension),iy.initCatmullRom(Ft.y,qt.y,Jt.y,Vt.y,this.tension),ny.initCatmullRom(Ft.z,qt.z,Jt.z,Vt.z,this.tension));return rt.set(ty.calc(Bt),iy.calc(Bt),ny.calc(Bt)),rt}copy(c){super.copy(c),this.points=[];for(let j=0,rt=c.points.length;j<rt;j++){const at=c.points[j];this.points.push(at.clone())}return this.closed=c.closed,this.curveType=c.curveType,this.tension=c.tension,this}toJSON(){const c=super.toJSON();c.points=[];for(let j=0,rt=this.points.length;j<rt;j++){const at=this.points[j];c.points.push(at.toArray())}return c.closed=this.closed,c.curveType=this.curveType,c.tension=this.tension,c}fromJSON(c){super.fromJSON(c),this.points=[];for(let j=0,rt=c.points.length;j<rt;j++){const at=c.points[j];this.points.push(new kn().fromArray(at))}return this.closed=c.closed,this.curveType=c.curveType,this.tension=c.tension,this}}function G4(ht,c,j,rt,at){const ut=(rt-c)*.5,At=(at-j)*.5,wt=ht*ht,Bt=ht*wt;return(2*j-2*rt+ut+At)*Bt+(-3*j+3*rt-2*ut-At)*wt+ut*ht+j}function Gw(ht,c){const j=1-ht;return j*j*c}function Qw(ht,c){return 2*(1-ht)*ht*c}function Vw(ht,c){return ht*ht*c}function gm(ht,c,j,rt){return Gw(ht,c)+Qw(ht,j)+Vw(ht,rt)}function zw(ht,c){const j=1-ht;return j*j*j*c}function Ww(ht,c){const j=1-ht;return 3*j*j*ht*c}function Kw(ht,c){return 3*(1-ht)*ht*ht*c}function Xw(ht,c){return ht*ht*ht*c}function Em(ht,c,j,rt,at){return zw(ht,c)+Ww(ht,j)+Kw(ht,rt)+Xw(ht,at)}class ry extends cu{constructor(c=new Wr,j=new Wr,rt=new Wr,at=new Wr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=c,this.v1=j,this.v2=rt,this.v3=at}getPoint(c,j=new Wr){const rt=j,at=this.v0,ut=this.v1,At=this.v2,wt=this.v3;return rt.set(Em(c,at.x,ut.x,At.x,wt.x),Em(c,at.y,ut.y,At.y,wt.y)),rt}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this.v3.copy(c.v3),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c.v3=this.v3.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this.v3.fromArray(c.v3),this}}class Q4 extends cu{constructor(c=new kn,j=new kn,rt=new kn,at=new kn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=c,this.v1=j,this.v2=rt,this.v3=at}getPoint(c,j=new kn){const rt=j,at=this.v0,ut=this.v1,At=this.v2,wt=this.v3;return rt.set(Em(c,at.x,ut.x,At.x,wt.x),Em(c,at.y,ut.y,At.y,wt.y),Em(c,at.z,ut.z,At.z,wt.z)),rt}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this.v3.copy(c.v3),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c.v3=this.v3.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this.v3.fromArray(c.v3),this}}class sy extends cu{constructor(c=new Wr,j=new Wr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=c,this.v2=j}getPoint(c,j=new Wr){const rt=j;return c===1?rt.copy(this.v2):(rt.copy(this.v2).sub(this.v1),rt.multiplyScalar(c).add(this.v1)),rt}getPointAt(c,j){return this.getPoint(c,j)}getTangent(c,j=new Wr){return j.subVectors(this.v2,this.v1).normalize()}getTangentAt(c,j){return this.getTangent(c,j)}copy(c){return super.copy(c),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}class V4 extends cu{constructor(c=new kn,j=new kn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=c,this.v2=j}getPoint(c,j=new kn){const rt=j;return c===1?rt.copy(this.v2):(rt.copy(this.v2).sub(this.v1),rt.multiplyScalar(c).add(this.v1)),rt}getPointAt(c,j){return this.getPoint(c,j)}getTangent(c,j=new kn){return j.subVectors(this.v2,this.v1).normalize()}getTangentAt(c,j){return this.getTangent(c,j)}copy(c){return super.copy(c),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}class oy extends cu{constructor(c=new Wr,j=new Wr,rt=new Wr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=c,this.v1=j,this.v2=rt}getPoint(c,j=new Wr){const rt=j,at=this.v0,ut=this.v1,At=this.v2;return rt.set(gm(c,at.x,ut.x,At.x),gm(c,at.y,ut.y,At.y)),rt}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}class ay extends cu{constructor(c=new kn,j=new kn,rt=new kn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=c,this.v1=j,this.v2=rt}getPoint(c,j=new kn){const rt=j,at=this.v0,ut=this.v1,At=this.v2;return rt.set(gm(c,at.x,ut.x,At.x),gm(c,at.y,ut.y,At.y),gm(c,at.z,ut.z,At.z)),rt}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}class ly extends cu{constructor(c=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=c}getPoint(c,j=new Wr){const rt=j,at=this.points,ut=(at.length-1)*c,At=Math.floor(ut),wt=ut-At,Bt=at[At===0?At:At-1],Ft=at[At],Vt=at[At>at.length-2?at.length-1:At+1],qt=at[At>at.length-3?at.length-1:At+2];return rt.set(G4(wt,Bt.x,Ft.x,Vt.x,qt.x),G4(wt,Bt.y,Ft.y,Vt.y,qt.y)),rt}copy(c){super.copy(c),this.points=[];for(let j=0,rt=c.points.length;j<rt;j++){const at=c.points[j];this.points.push(at.clone())}return this}toJSON(){const c=super.toJSON();c.points=[];for(let j=0,rt=this.points.length;j<rt;j++){const at=this.points[j];c.points.push(at.toArray())}return c}fromJSON(c){super.fromJSON(c),this.points=[];for(let j=0,rt=c.points.length;j<rt;j++){const at=c.points[j];this.points.push(new Wr().fromArray(at))}return this}}var W3=Object.freeze({__proto__:null,ArcCurve:U4,CatmullRomCurve3:H4,CubicBezierCurve:ry,CubicBezierCurve3:Q4,EllipseCurve:V3,LineCurve:sy,LineCurve3:V4,QuadraticBezierCurve:oy,QuadraticBezierCurve3:ay,SplineCurve:ly});class z4 extends cu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(c){this.curves.push(c)}closePath(){const c=this.curves[0].getPoint(0),j=this.curves[this.curves.length-1].getPoint(1);if(!c.equals(j)){const rt=c.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new W3[rt](j,c))}return this}getPoint(c,j){const rt=c*this.getLength(),at=this.getCurveLengths();let ut=0;for(;ut<at.length;){if(at[ut]>=rt){const At=at[ut]-rt,wt=this.curves[ut],Bt=wt.getLength(),Ft=Bt===0?0:1-At/Bt;return wt.getPointAt(Ft,j)}ut++}return null}getLength(){const c=this.getCurveLengths();return c[c.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const c=[];let j=0;for(let rt=0,at=this.curves.length;rt<at;rt++)j+=this.curves[rt].getLength(),c.push(j);return this.cacheLengths=c,c}getSpacedPoints(c=40){const j=[];for(let rt=0;rt<=c;rt++)j.push(this.getPoint(rt/c));return this.autoClose&&j.push(j[0]),j}getPoints(c=12){const j=[];let rt;for(let at=0,ut=this.curves;at<ut.length;at++){const At=ut[at],wt=At.isEllipseCurve?c*2:At.isLineCurve||At.isLineCurve3?1:At.isSplineCurve?c*At.points.length:c,Bt=At.getPoints(wt);for(let Ft=0;Ft<Bt.length;Ft++){const Vt=Bt[Ft];rt&&rt.equals(Vt)||(j.push(Vt),rt=Vt)}}return this.autoClose&&j.length>1&&!j[j.length-1].equals(j[0])&&j.push(j[0]),j}copy(c){super.copy(c),this.curves=[];for(let j=0,rt=c.curves.length;j<rt;j++){const at=c.curves[j];this.curves.push(at.clone())}return this.autoClose=c.autoClose,this}toJSON(){const c=super.toJSON();c.autoClose=this.autoClose,c.curves=[];for(let j=0,rt=this.curves.length;j<rt;j++){const at=this.curves[j];c.curves.push(at.toJSON())}return c}fromJSON(c){super.fromJSON(c),this.autoClose=c.autoClose,this.curves=[];for(let j=0,rt=c.curves.length;j<rt;j++){const at=c.curves[j];this.curves.push(new W3[at.type]().fromJSON(at))}return this}}class ym extends z4{constructor(c){super(),this.type="Path",this.currentPoint=new Wr,c&&this.setFromPoints(c)}setFromPoints(c){this.moveTo(c[0].x,c[0].y);for(let j=1,rt=c.length;j<rt;j++)this.lineTo(c[j].x,c[j].y);return this}moveTo(c,j){return this.currentPoint.set(c,j),this}lineTo(c,j){const rt=new sy(this.currentPoint.clone(),new Wr(c,j));return this.curves.push(rt),this.currentPoint.set(c,j),this}quadraticCurveTo(c,j,rt,at){const ut=new oy(this.currentPoint.clone(),new Wr(c,j),new Wr(rt,at));return this.curves.push(ut),this.currentPoint.set(rt,at),this}bezierCurveTo(c,j,rt,at,ut,At){const wt=new ry(this.currentPoint.clone(),new Wr(c,j),new Wr(rt,at),new Wr(ut,At));return this.curves.push(wt),this.currentPoint.set(ut,At),this}splineThru(c){const j=[this.currentPoint.clone()].concat(c),rt=new ly(j);return this.curves.push(rt),this.currentPoint.copy(c[c.length-1]),this}arc(c,j,rt,at,ut,At){const wt=this.currentPoint.x,Bt=this.currentPoint.y;return this.absarc(c+wt,j+Bt,rt,at,ut,At),this}absarc(c,j,rt,at,ut,At){return this.absellipse(c,j,rt,rt,at,ut,At),this}ellipse(c,j,rt,at,ut,At,wt,Bt){const Ft=this.currentPoint.x,Vt=this.currentPoint.y;return this.absellipse(c+Ft,j+Vt,rt,at,ut,At,wt,Bt),this}absellipse(c,j,rt,at,ut,At,wt,Bt){const Ft=new V3(c,j,rt,at,ut,At,wt,Bt);if(this.curves.length>0){const qt=Ft.getPoint(0);qt.equals(this.currentPoint)||this.lineTo(qt.x,qt.y)}this.curves.push(Ft);const Vt=Ft.getPoint(1);return this.currentPoint.copy(Vt),this}copy(c){return super.copy(c),this.currentPoint.copy(c.currentPoint),this}toJSON(){const c=super.toJSON();return c.currentPoint=this.currentPoint.toArray(),c}fromJSON(c){return super.fromJSON(c),this.currentPoint.fromArray(c.currentPoint),this}}class wm extends Bo{constructor(c=[new Wr(0,-.5),new Wr(.5,0),new Wr(0,.5)],j=12,rt=0,at=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:c,segments:j,phiStart:rt,phiLength:at},j=Math.floor(j),at=F0(at,0,Math.PI*2);const ut=[],At=[],wt=[],Bt=[],Ft=[],Vt=1/j,qt=new kn,Jt=new Wr,_i=new kn,sn=new kn,hn=new kn;let an=0,en=0;for(let xn=0;xn<=c.length-1;xn++)switch(xn){case 0:an=c[xn+1].x-c[xn].x,en=c[xn+1].y-c[xn].y,_i.x=en*1,_i.y=-an,_i.z=en*0,hn.copy(_i),_i.normalize(),Bt.push(_i.x,_i.y,_i.z);break;case c.length-1:Bt.push(hn.x,hn.y,hn.z);break;default:an=c[xn+1].x-c[xn].x,en=c[xn+1].y-c[xn].y,_i.x=en*1,_i.y=-an,_i.z=en*0,sn.copy(_i),_i.x+=hn.x,_i.y+=hn.y,_i.z+=hn.z,_i.normalize(),Bt.push(_i.x,_i.y,_i.z),hn.copy(sn)}for(let xn=0;xn<=j;xn++){const wn=rt+xn*Vt*at,En=Math.sin(wn),er=Math.cos(wn);for(let Nn=0;Nn<=c.length-1;Nn++){qt.x=c[Nn].x*En,qt.y=c[Nn].y,qt.z=c[Nn].x*er,At.push(qt.x,qt.y,qt.z),Jt.x=xn/j,Jt.y=Nn/(c.length-1),wt.push(Jt.x,Jt.y);const zn=Bt[3*Nn+0]*En,$n=Bt[3*Nn+1],Ln=Bt[3*Nn+0]*er;Ft.push(zn,$n,Ln)}}for(let xn=0;xn<j;xn++)for(let wn=0;wn<c.length-1;wn++){const En=wn+xn*c.length,er=En,Nn=En+c.length,zn=En+c.length+1,$n=En+1;ut.push(er,Nn,$n),ut.push(zn,$n,Nn)}this.setIndex(ut),this.setAttribute("position",new Qr(At,3)),this.setAttribute("uv",new Qr(wt,2)),this.setAttribute("normal",new Qr(Ft,3))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new wm(c.points,c.segments,c.phiStart,c.phiLength)}}class K3 extends wm{constructor(c=1,j=1,rt=4,at=8){const ut=new ym;ut.absarc(0,-j/2,c,Math.PI*1.5,0),ut.absarc(0,j/2,c,0,Math.PI*.5),super(ut.getPoints(rt),at),this.type="CapsuleGeometry",this.parameters={radius:c,length:j,capSegments:rt,radialSegments:at}}static fromJSON(c){return new K3(c.radius,c.length,c.capSegments,c.radialSegments)}}class X3 extends Bo{constructor(c=1,j=32,rt=0,at=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:c,segments:j,thetaStart:rt,thetaLength:at},j=Math.max(3,j);const ut=[],At=[],wt=[],Bt=[],Ft=new kn,Vt=new Wr;At.push(0,0,0),wt.push(0,0,1),Bt.push(.5,.5);for(let qt=0,Jt=3;qt<=j;qt++,Jt+=3){const _i=rt+qt/j*at;Ft.x=c*Math.cos(_i),Ft.y=c*Math.sin(_i),At.push(Ft.x,Ft.y,Ft.z),wt.push(0,0,1),Vt.x=(At[Jt]/c+1)/2,Vt.y=(At[Jt+1]/c+1)/2,Bt.push(Vt.x,Vt.y)}for(let qt=1;qt<=j;qt++)ut.push(qt,qt+1,0);this.setIndex(ut),this.setAttribute("position",new Qr(At,3)),this.setAttribute("normal",new Qr(wt,3)),this.setAttribute("uv",new Qr(Bt,2))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new X3(c.radius,c.segments,c.thetaStart,c.thetaLength)}}class jp extends Bo{constructor(c=1,j=1,rt=1,at=32,ut=1,At=!1,wt=0,Bt=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:c,radiusBottom:j,height:rt,radialSegments:at,heightSegments:ut,openEnded:At,thetaStart:wt,thetaLength:Bt};const Ft=this;at=Math.floor(at),ut=Math.floor(ut);const Vt=[],qt=[],Jt=[],_i=[];let sn=0;const hn=[],an=rt/2;let en=0;xn(),At===!1&&(c>0&&wn(!0),j>0&&wn(!1)),this.setIndex(Vt),this.setAttribute("position",new Qr(qt,3)),this.setAttribute("normal",new Qr(Jt,3)),this.setAttribute("uv",new Qr(_i,2));function xn(){const En=new kn,er=new kn;let Nn=0;const zn=(j-c)/rt;for(let $n=0;$n<=ut;$n++){const Ln=[],Sn=$n/ut,jn=Sn*(j-c)+c;for(let ur=0;ur<=at;ur++){const or=ur/at,Ar=or*Bt+wt,br=Math.sin(Ar),Vr=Math.cos(Ar);er.x=jn*br,er.y=-Sn*rt+an,er.z=jn*Vr,qt.push(er.x,er.y,er.z),En.set(br,zn,Vr).normalize(),Jt.push(En.x,En.y,En.z),_i.push(or,1-Sn),Ln.push(sn++)}hn.push(Ln)}for(let $n=0;$n<at;$n++)for(let Ln=0;Ln<ut;Ln++){const Sn=hn[Ln][$n],jn=hn[Ln+1][$n],ur=hn[Ln+1][$n+1],or=hn[Ln][$n+1];Vt.push(Sn,jn,or),Vt.push(jn,ur,or),Nn+=6}Ft.addGroup(en,Nn,0),en+=Nn}function wn(En){const er=sn,Nn=new Wr,zn=new kn;let $n=0;const Ln=En===!0?c:j,Sn=En===!0?1:-1;for(let ur=1;ur<=at;ur++)qt.push(0,an*Sn,0),Jt.push(0,Sn,0),_i.push(.5,.5),sn++;const jn=sn;for(let ur=0;ur<=at;ur++){const Ar=ur/at*Bt+wt,br=Math.cos(Ar),Vr=Math.sin(Ar);zn.x=Ln*Vr,zn.y=an*Sn,zn.z=Ln*br,qt.push(zn.x,zn.y,zn.z),Jt.push(0,Sn,0),Nn.x=br*.5+.5,Nn.y=Vr*.5*Sn+.5,_i.push(Nn.x,Nn.y),sn++}for(let ur=0;ur<at;ur++){const or=er+ur,Ar=jn+ur;En===!0?Vt.push(Ar,Ar+1,or):Vt.push(Ar+1,Ar,or),$n+=3}Ft.addGroup(en,$n,En===!0?1:2),en+=$n}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new jp(c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength)}}class Y3 extends jp{constructor(c=1,j=1,rt=32,at=1,ut=!1,At=0,wt=Math.PI*2){super(0,c,j,rt,at,ut,At,wt),this.type="ConeGeometry",this.parameters={radius:c,height:j,radialSegments:rt,heightSegments:at,openEnded:ut,thetaStart:At,thetaLength:wt}}static fromJSON(c){return new Y3(c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength)}}class C2 extends Bo{constructor(c=[],j=[],rt=1,at=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:c,indices:j,radius:rt,detail:at};const ut=[],At=[];wt(at),Ft(rt),Vt(),this.setAttribute("position",new Qr(ut,3)),this.setAttribute("normal",new Qr(ut.slice(),3)),this.setAttribute("uv",new Qr(At,2)),at===0?this.computeVertexNormals():this.normalizeNormals();function wt(xn){const wn=new kn,En=new kn,er=new kn;for(let Nn=0;Nn<j.length;Nn+=3)_i(j[Nn+0],wn),_i(j[Nn+1],En),_i(j[Nn+2],er),Bt(wn,En,er,xn)}function Bt(xn,wn,En,er){const Nn=er+1,zn=[];for(let $n=0;$n<=Nn;$n++){zn[$n]=[];const Ln=xn.clone().lerp(En,$n/Nn),Sn=wn.clone().lerp(En,$n/Nn),jn=Nn-$n;for(let ur=0;ur<=jn;ur++)ur===0&&$n===Nn?zn[$n][ur]=Ln:zn[$n][ur]=Ln.clone().lerp(Sn,ur/jn)}for(let $n=0;$n<Nn;$n++)for(let Ln=0;Ln<2*(Nn-$n)-1;Ln++){const Sn=Math.floor(Ln/2);Ln%2===0?(Jt(zn[$n][Sn+1]),Jt(zn[$n+1][Sn]),Jt(zn[$n][Sn])):(Jt(zn[$n][Sn+1]),Jt(zn[$n+1][Sn+1]),Jt(zn[$n+1][Sn]))}}function Ft(xn){const wn=new kn;for(let En=0;En<ut.length;En+=3)wn.x=ut[En+0],wn.y=ut[En+1],wn.z=ut[En+2],wn.normalize().multiplyScalar(xn),ut[En+0]=wn.x,ut[En+1]=wn.y,ut[En+2]=wn.z}function Vt(){const xn=new kn;for(let wn=0;wn<ut.length;wn+=3){xn.x=ut[wn+0],xn.y=ut[wn+1],xn.z=ut[wn+2];const En=an(xn)/2/Math.PI+.5,er=en(xn)/Math.PI+.5;At.push(En,1-er)}sn(),qt()}function qt(){for(let xn=0;xn<At.length;xn+=6){const wn=At[xn+0],En=At[xn+2],er=At[xn+4],Nn=Math.max(wn,En,er),zn=Math.min(wn,En,er);Nn>.9&&zn<.1&&(wn<.2&&(At[xn+0]+=1),En<.2&&(At[xn+2]+=1),er<.2&&(At[xn+4]+=1))}}function Jt(xn){ut.push(xn.x,xn.y,xn.z)}function _i(xn,wn){const En=xn*3;wn.x=c[En+0],wn.y=c[En+1],wn.z=c[En+2]}function sn(){const xn=new kn,wn=new kn,En=new kn,er=new kn,Nn=new Wr,zn=new Wr,$n=new Wr;for(let Ln=0,Sn=0;Ln<ut.length;Ln+=9,Sn+=6){xn.set(ut[Ln+0],ut[Ln+1],ut[Ln+2]),wn.set(ut[Ln+3],ut[Ln+4],ut[Ln+5]),En.set(ut[Ln+6],ut[Ln+7],ut[Ln+8]),Nn.set(At[Sn+0],At[Sn+1]),zn.set(At[Sn+2],At[Sn+3]),$n.set(At[Sn+4],At[Sn+5]),er.copy(xn).add(wn).add(En).divideScalar(3);const jn=an(er);hn(Nn,Sn+0,xn,jn),hn(zn,Sn+2,wn,jn),hn($n,Sn+4,En,jn)}}function hn(xn,wn,En,er){er<0&&xn.x===1&&(At[wn]=xn.x-1),En.x===0&&En.z===0&&(At[wn]=er/2/Math.PI+.5)}function an(xn){return Math.atan2(xn.z,-xn.x)}function en(xn){return Math.atan2(-xn.y,Math.sqrt(xn.x*xn.x+xn.z*xn.z))}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new C2(c.vertices,c.indices,c.radius,c.details)}}class q3 extends C2{constructor(c=1,j=0){const rt=(1+Math.sqrt(5))/2,at=1/rt,ut=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-at,-rt,0,-at,rt,0,at,-rt,0,at,rt,-at,-rt,0,-at,rt,0,at,-rt,0,at,rt,0,-rt,0,-at,rt,0,-at,-rt,0,at,rt,0,at],At=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ut,At,c,j),this.type="DodecahedronGeometry",this.parameters={radius:c,detail:j}}static fromJSON(c){return new q3(c.radius,c.detail)}}const J3=new kn,Z3=new kn,cy=new kn,$3=new p1;class W4 extends Bo{constructor(c=null,j=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:c,thresholdAngle:j},c!==null){const at=Math.pow(10,4),ut=Math.cos(j1*j),At=c.getIndex(),wt=c.getAttribute("position"),Bt=At?At.count:wt.count,Ft=[0,0,0],Vt=["a","b","c"],qt=new Array(3),Jt={},_i=[];for(let sn=0;sn<Bt;sn+=3){At?(Ft[0]=At.getX(sn),Ft[1]=At.getX(sn+1),Ft[2]=At.getX(sn+2)):(Ft[0]=sn,Ft[1]=sn+1,Ft[2]=sn+2);const{a:hn,b:an,c:en}=$3;if(hn.fromBufferAttribute(wt,Ft[0]),an.fromBufferAttribute(wt,Ft[1]),en.fromBufferAttribute(wt,Ft[2]),$3.getNormal(cy),qt[0]=`${Math.round(hn.x*at)},${Math.round(hn.y*at)},${Math.round(hn.z*at)}`,qt[1]=`${Math.round(an.x*at)},${Math.round(an.y*at)},${Math.round(an.z*at)}`,qt[2]=`${Math.round(en.x*at)},${Math.round(en.y*at)},${Math.round(en.z*at)}`,!(qt[0]===qt[1]||qt[1]===qt[2]||qt[2]===qt[0]))for(let xn=0;xn<3;xn++){const wn=(xn+1)%3,En=qt[xn],er=qt[wn],Nn=$3[Vt[xn]],zn=$3[Vt[wn]],$n=`${En}_${er}`,Ln=`${er}_${En}`;Ln in Jt&&Jt[Ln]?(cy.dot(Jt[Ln].normal)<=ut&&(_i.push(Nn.x,Nn.y,Nn.z),_i.push(zn.x,zn.y,zn.z)),Jt[Ln]=null):$n in Jt||(Jt[$n]={index0:Ft[xn],index1:Ft[wn],normal:cy.clone()})}}for(const sn in Jt)if(Jt[sn]){const{index0:hn,index1:an}=Jt[sn];J3.fromBufferAttribute(wt,hn),Z3.fromBufferAttribute(wt,an),_i.push(J3.x,J3.y,J3.z),_i.push(Z3.x,Z3.y,Z3.z)}this.setAttribute("position",new Qr(_i,3))}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}}class $2 extends ym{constructor(c){super(c),this.uuid=Zl(),this.type="Shape",this.holes=[]}getPointsHoles(c){const j=[];for(let rt=0,at=this.holes.length;rt<at;rt++)j[rt]=this.holes[rt].getPoints(c);return j}extractPoints(c){return{shape:this.getPoints(c),holes:this.getPointsHoles(c)}}copy(c){super.copy(c),this.holes=[];for(let j=0,rt=c.holes.length;j<rt;j++){const at=c.holes[j];this.holes.push(at.clone())}return this}toJSON(){const c=super.toJSON();c.uuid=this.uuid,c.holes=[];for(let j=0,rt=this.holes.length;j<rt;j++){const at=this.holes[j];c.holes.push(at.toJSON())}return c}fromJSON(c){super.fromJSON(c),this.uuid=c.uuid,this.holes=[];for(let j=0,rt=c.holes.length;j<rt;j++){const at=c.holes[j];this.holes.push(new ym().fromJSON(at))}return this}}const Yw={triangulate:function(ht,c,j=2){const rt=c&&c.length,at=rt?c[0]*j:ht.length;let ut=K4(ht,0,at,j,!0);const At=[];if(!ut||ut.next===ut.prev)return At;let wt,Bt,Ft,Vt,qt,Jt,_i;if(rt&&(ut=jw(ht,c,ut,j)),ht.length>80*j){wt=Ft=ht[0],Bt=Vt=ht[1];for(let sn=j;sn<at;sn+=j)qt=ht[sn],Jt=ht[sn+1],qt<wt&&(wt=qt),Jt<Bt&&(Bt=Jt),qt>Ft&&(Ft=qt),Jt>Vt&&(Vt=Jt);_i=Math.max(Ft-wt,Vt-Bt),_i=_i!==0?32767/_i:0}return Cm(ut,At,j,wt,Bt,_i,0),At}};function K4(ht,c,j,rt,at){let ut,At;if(at===uC(ht,c,j,rt)>0)for(ut=c;ut<j;ut+=rt)At=q4(ut,ht[ut],ht[ut+1],At);else for(ut=j-rt;ut>=c;ut-=rt)At=q4(ut,ht[ut],ht[ut+1],At);return At&&j3(At,At.next)&&(xm(At),At=At.next),At}function j2(ht,c){if(!ht)return ht;c||(c=ht);let j=ht,rt;do if(rt=!1,!j.steiner&&(j3(j,j.next)||Z0(j.prev,j,j.next)===0)){if(xm(j),j=c=j.prev,j===j.next)break;rt=!0}else j=j.next;while(rt||j!==c);return c}function Cm(ht,c,j,rt,at,ut,At){if(!ht)return;!At&&ut&&rC(ht,rt,at,ut);let wt=ht,Bt,Ft;for(;ht.prev!==ht.next;){if(Bt=ht.prev,Ft=ht.next,ut?Jw(ht,rt,at,ut):qw(ht)){c.push(Bt.i/j|0),c.push(ht.i/j|0),c.push(Ft.i/j|0),xm(ht),ht=Ft.next,wt=Ft.next;continue}if(ht=Ft,ht===wt){At?At===1?(ht=Zw(j2(ht),c,j),Cm(ht,c,j,rt,at,ut,2)):At===2&&$w(ht,c,j,rt,at,ut):Cm(j2(ht),c,j,rt,at,ut,1);break}}}function qw(ht){const c=ht.prev,j=ht,rt=ht.next;if(Z0(c,j,rt)>=0)return!1;const at=c.x,ut=j.x,At=rt.x,wt=c.y,Bt=j.y,Ft=rt.y,Vt=at<ut?at<At?at:At:ut<At?ut:At,qt=wt<Bt?wt<Ft?wt:Ft:Bt<Ft?Bt:Ft,Jt=at>ut?at>At?at:At:ut>At?ut:At,_i=wt>Bt?wt>Ft?wt:Ft:Bt>Ft?Bt:Ft;let sn=rt.next;for(;sn!==c;){if(sn.x>=Vt&&sn.x<=Jt&&sn.y>=qt&&sn.y<=_i&&eA(at,wt,ut,Bt,At,Ft,sn.x,sn.y)&&Z0(sn.prev,sn,sn.next)>=0)return!1;sn=sn.next}return!0}function Jw(ht,c,j,rt){const at=ht.prev,ut=ht,At=ht.next;if(Z0(at,ut,At)>=0)return!1;const wt=at.x,Bt=ut.x,Ft=At.x,Vt=at.y,qt=ut.y,Jt=At.y,_i=wt<Bt?wt<Ft?wt:Ft:Bt<Ft?Bt:Ft,sn=Vt<qt?Vt<Jt?Vt:Jt:qt<Jt?qt:Jt,hn=wt>Bt?wt>Ft?wt:Ft:Bt>Ft?Bt:Ft,an=Vt>qt?Vt>Jt?Vt:Jt:qt>Jt?qt:Jt,en=uy(_i,sn,c,j,rt),xn=uy(hn,an,c,j,rt);let wn=ht.prevZ,En=ht.nextZ;for(;wn&&wn.z>=en&&En&&En.z<=xn;){if(wn.x>=_i&&wn.x<=hn&&wn.y>=sn&&wn.y<=an&&wn!==at&&wn!==At&&eA(wt,Vt,Bt,qt,Ft,Jt,wn.x,wn.y)&&Z0(wn.prev,wn,wn.next)>=0||(wn=wn.prevZ,En.x>=_i&&En.x<=hn&&En.y>=sn&&En.y<=an&&En!==at&&En!==At&&eA(wt,Vt,Bt,qt,Ft,Jt,En.x,En.y)&&Z0(En.prev,En,En.next)>=0))return!1;En=En.nextZ}for(;wn&&wn.z>=en;){if(wn.x>=_i&&wn.x<=hn&&wn.y>=sn&&wn.y<=an&&wn!==at&&wn!==At&&eA(wt,Vt,Bt,qt,Ft,Jt,wn.x,wn.y)&&Z0(wn.prev,wn,wn.next)>=0)return!1;wn=wn.prevZ}for(;En&&En.z<=xn;){if(En.x>=_i&&En.x<=hn&&En.y>=sn&&En.y<=an&&En!==at&&En!==At&&eA(wt,Vt,Bt,qt,Ft,Jt,En.x,En.y)&&Z0(En.prev,En,En.next)>=0)return!1;En=En.nextZ}return!0}function Zw(ht,c,j){let rt=ht;do{const at=rt.prev,ut=rt.next.next;!j3(at,ut)&&X4(at,rt,rt.next,ut)&&_m(at,ut)&&_m(ut,at)&&(c.push(at.i/j|0),c.push(rt.i/j|0),c.push(ut.i/j|0),xm(rt),xm(rt.next),rt=ht=ut),rt=rt.next}while(rt!==ht);return j2(rt)}function $w(ht,c,j,rt,at,ut){let At=ht;do{let wt=At.next.next;for(;wt!==At.prev;){if(At.i!==wt.i&&aC(At,wt)){let Bt=Y4(At,wt);At=j2(At,At.next),Bt=j2(Bt,Bt.next),Cm(At,c,j,rt,at,ut,0),Cm(Bt,c,j,rt,at,ut,0);return}wt=wt.next}At=At.next}while(At!==ht)}function jw(ht,c,j,rt){const at=[];let ut,At,wt,Bt,Ft;for(ut=0,At=c.length;ut<At;ut++)wt=c[ut]*rt,Bt=ut<At-1?c[ut+1]*rt:ht.length,Ft=K4(ht,wt,Bt,rt,!1),Ft===Ft.next&&(Ft.steiner=!0),at.push(oC(Ft));for(at.sort(eC),ut=0;ut<at.length;ut++)j=tC(at[ut],j);return j}function eC(ht,c){return ht.x-c.x}function tC(ht,c){const j=iC(ht,c);if(!j)return c;const rt=Y4(j,ht);return j2(rt,rt.next),j2(j,j.next)}function iC(ht,c){let j=c,rt=-1/0,at;const ut=ht.x,At=ht.y;do{if(At<=j.y&&At>=j.next.y&&j.next.y!==j.y){const Jt=j.x+(At-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Jt<=ut&&Jt>rt&&(rt=Jt,at=j.x<j.next.x?j:j.next,Jt===ut))return at}j=j.next}while(j!==c);if(!at)return null;const wt=at,Bt=at.x,Ft=at.y;let Vt=1/0,qt;j=at;do ut>=j.x&&j.x>=Bt&&ut!==j.x&&eA(At<Ft?ut:rt,At,Bt,Ft,At<Ft?rt:ut,At,j.x,j.y)&&(qt=Math.abs(At-j.y)/(ut-j.x),_m(j,ht)&&(qt<Vt||qt===Vt&&(j.x>at.x||j.x===at.x&&nC(at,j)))&&(at=j,Vt=qt)),j=j.next;while(j!==wt);return at}function nC(ht,c){return Z0(ht.prev,ht,c.prev)<0&&Z0(c.next,ht,ht.next)<0}function rC(ht,c,j,rt){let at=ht;do at.z===0&&(at.z=uy(at.x,at.y,c,j,rt)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next;while(at!==ht);at.prevZ.nextZ=null,at.prevZ=null,sC(at)}function sC(ht){let c,j,rt,at,ut,At,wt,Bt,Ft=1;do{for(j=ht,ht=null,ut=null,At=0;j;){for(At++,rt=j,wt=0,c=0;c<Ft&&(wt++,rt=rt.nextZ,!!rt);c++);for(Bt=Ft;wt>0||Bt>0&&rt;)wt!==0&&(Bt===0||!rt||j.z<=rt.z)?(at=j,j=j.nextZ,wt--):(at=rt,rt=rt.nextZ,Bt--),ut?ut.nextZ=at:ht=at,at.prevZ=ut,ut=at;j=rt}ut.nextZ=null,Ft*=2}while(At>1);return ht}function uy(ht,c,j,rt,at){return ht=(ht-j)*at|0,c=(c-rt)*at|0,ht=(ht|ht<<8)&16711935,ht=(ht|ht<<4)&252645135,ht=(ht|ht<<2)&858993459,ht=(ht|ht<<1)&1431655765,c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,ht|c<<1}function oC(ht){let c=ht,j=ht;do(c.x<j.x||c.x===j.x&&c.y<j.y)&&(j=c),c=c.next;while(c!==ht);return j}function eA(ht,c,j,rt,at,ut,At,wt){return(at-At)*(c-wt)>=(ht-At)*(ut-wt)&&(ht-At)*(rt-wt)>=(j-At)*(c-wt)&&(j-At)*(ut-wt)>=(at-At)*(rt-wt)}function aC(ht,c){return ht.next.i!==c.i&&ht.prev.i!==c.i&&!lC(ht,c)&&(_m(ht,c)&&_m(c,ht)&&cC(ht,c)&&(Z0(ht.prev,ht,c.prev)||Z0(ht,c.prev,c))||j3(ht,c)&&Z0(ht.prev,ht,ht.next)>0&&Z0(c.prev,c,c.next)>0)}function Z0(ht,c,j){return(c.y-ht.y)*(j.x-c.x)-(c.x-ht.x)*(j.y-c.y)}function j3(ht,c){return ht.x===c.x&&ht.y===c.y}function X4(ht,c,j,rt){const at=tv(Z0(ht,c,j)),ut=tv(Z0(ht,c,rt)),At=tv(Z0(j,rt,ht)),wt=tv(Z0(j,rt,c));return!!(at!==ut&&At!==wt||at===0&&ev(ht,j,c)||ut===0&&ev(ht,rt,c)||At===0&&ev(j,ht,rt)||wt===0&&ev(j,c,rt))}function ev(ht,c,j){return c.x<=Math.max(ht.x,j.x)&&c.x>=Math.min(ht.x,j.x)&&c.y<=Math.max(ht.y,j.y)&&c.y>=Math.min(ht.y,j.y)}function tv(ht){return ht>0?1:ht<0?-1:0}function lC(ht,c){let j=ht;do{if(j.i!==ht.i&&j.next.i!==ht.i&&j.i!==c.i&&j.next.i!==c.i&&X4(j,j.next,ht,c))return!0;j=j.next}while(j!==ht);return!1}function _m(ht,c){return Z0(ht.prev,ht,ht.next)<0?Z0(ht,c,ht.next)>=0&&Z0(ht,ht.prev,c)>=0:Z0(ht,c,ht.prev)<0||Z0(ht,ht.next,c)<0}function cC(ht,c){let j=ht,rt=!1;const at=(ht.x+c.x)/2,ut=(ht.y+c.y)/2;do j.y>ut!=j.next.y>ut&&j.next.y!==j.y&&at<(j.next.x-j.x)*(ut-j.y)/(j.next.y-j.y)+j.x&&(rt=!rt),j=j.next;while(j!==ht);return rt}function Y4(ht,c){const j=new hy(ht.i,ht.x,ht.y),rt=new hy(c.i,c.x,c.y),at=ht.next,ut=c.prev;return ht.next=c,c.prev=ht,j.next=at,at.prev=j,rt.next=j,j.prev=rt,ut.next=rt,rt.prev=ut,rt}function q4(ht,c,j,rt){const at=new hy(ht,c,j);return rt?(at.next=rt.next,at.prev=rt,rt.next.prev=at,rt.next=at):(at.prev=at,at.next=at),at}function xm(ht){ht.next.prev=ht.prev,ht.prev.next=ht.next,ht.prevZ&&(ht.prevZ.nextZ=ht.nextZ),ht.nextZ&&(ht.nextZ.prevZ=ht.prevZ)}function hy(ht,c,j){this.i=ht,this.x=c,this.y=j,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uC(ht,c,j,rt){let at=0;for(let ut=c,At=j-rt;ut<j;ut+=rt)at+=(ht[At]-ht[ut])*(ht[ut+1]+ht[At+1]),At=ut;return at}class Mu{static area(c){const j=c.length;let rt=0;for(let at=j-1,ut=0;ut<j;at=ut++)rt+=c[at].x*c[ut].y-c[ut].x*c[at].y;return rt*.5}static isClockWise(c){return Mu.area(c)<0}static triangulateShape(c,j){const rt=[],at=[],ut=[];J4(c),Z4(rt,c);let At=c.length;j.forEach(J4);for(let Bt=0;Bt<j.length;Bt++)at.push(At),At+=j[Bt].length,Z4(rt,j[Bt]);const wt=Yw.triangulate(rt,at);for(let Bt=0;Bt<wt.length;Bt+=3)ut.push(wt.slice(Bt,Bt+3));return ut}}function J4(ht){const c=ht.length;c>2&&ht[c-1].equals(ht[0])&&ht.pop()}function Z4(ht,c){for(let j=0;j<c.length;j++)ht.push(c[j].x),ht.push(c[j].y)}class iv extends Bo{constructor(c=new $2([new Wr(.5,.5),new Wr(-.5,.5),new Wr(-.5,-.5),new Wr(.5,-.5)]),j={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:c,options:j},c=Array.isArray(c)?c:[c];const rt=this,at=[],ut=[];for(let wt=0,Bt=c.length;wt<Bt;wt++){const Ft=c[wt];At(Ft)}this.setAttribute("position",new Qr(at,3)),this.setAttribute("uv",new Qr(ut,2)),this.computeVertexNormals();function At(wt){const Bt=[],Ft=j.curveSegments!==void 0?j.curveSegments:12,Vt=j.steps!==void 0?j.steps:1,qt=j.depth!==void 0?j.depth:1;let Jt=j.bevelEnabled!==void 0?j.bevelEnabled:!0,_i=j.bevelThickness!==void 0?j.bevelThickness:.2,sn=j.bevelSize!==void 0?j.bevelSize:_i-.1,hn=j.bevelOffset!==void 0?j.bevelOffset:0,an=j.bevelSegments!==void 0?j.bevelSegments:3;const en=j.extrudePath,xn=j.UVGenerator!==void 0?j.UVGenerator:hC;let wn,En=!1,er,Nn,zn,$n;en&&(wn=en.getSpacedPoints(Vt),En=!0,Jt=!1,er=en.computeFrenetFrames(Vt,!1),Nn=new kn,zn=new kn,$n=new kn),Jt||(an=0,_i=0,sn=0,hn=0);const Ln=wt.extractPoints(Ft);let Sn=Ln.shape;const jn=Ln.holes;if(!Mu.isClockWise(Sn)){Sn=Sn.reverse();for(let Jr=0,Fr=jn.length;Jr<Fr;Jr++){const cs=jn[Jr];Mu.isClockWise(cs)&&(jn[Jr]=cs.reverse())}}const or=Mu.triangulateShape(Sn,jn),Ar=Sn;for(let Jr=0,Fr=jn.length;Jr<Fr;Jr++){const cs=jn[Jr];Sn=Sn.concat(cs)}function br(Jr,Fr,cs){return Fr||console.error("THREE.ExtrudeGeometry: vec does not exist"),Jr.clone().addScaledVector(Fr,cs)}const Vr=Sn.length,Es=or.length;function Sr(Jr,Fr,cs){let ls,rs,Is;const Hs=Jr.x-Fr.x,_o=Jr.y-Fr.y,Io=cs.x-Jr.x,d0=cs.y-Jr.y,$0=Hs*Hs+_o*_o,N0=Hs*d0-_o*Io;if(Math.abs(N0)>Number.EPSILON){const qn=Math.sqrt($0),Tn=Math.sqrt(Io*Io+d0*d0),Pr=Fr.x-_o/qn,Xr=Fr.y+Hs/qn,jr=cs.x-d0/Tn,$r=cs.y+Io/Tn,qs=((jr-Pr)*d0-($r-Xr)*Io)/(Hs*d0-_o*Io);ls=Pr+Hs*qs-Jr.x,rs=Xr+_o*qs-Jr.y;const ys=ls*ls+rs*rs;if(ys<=2)return new Wr(ls,rs);Is=Math.sqrt(ys/2)}else{let qn=!1;Hs>Number.EPSILON?Io>Number.EPSILON&&(qn=!0):Hs<-Number.EPSILON?Io<-Number.EPSILON&&(qn=!0):Math.sign(_o)===Math.sign(d0)&&(qn=!0),qn?(ls=-_o,rs=Hs,Is=Math.sqrt($0)):(ls=Hs,rs=_o,Is=Math.sqrt($0/2))}return new Wr(ls/Is,rs/Is)}const hs=[];for(let Jr=0,Fr=Ar.length,cs=Fr-1,ls=Jr+1;Jr<Fr;Jr++,cs++,ls++)cs===Fr&&(cs=0),ls===Fr&&(ls=0),hs[Jr]=Sr(Ar[Jr],Ar[cs],Ar[ls]);const vs=[];let zs,Qo=hs.concat();for(let Jr=0,Fr=jn.length;Jr<Fr;Jr++){const cs=jn[Jr];zs=[];for(let ls=0,rs=cs.length,Is=rs-1,Hs=ls+1;ls<rs;ls++,Is++,Hs++)Is===rs&&(Is=0),Hs===rs&&(Hs=0),zs[ls]=Sr(cs[ls],cs[Is],cs[Hs]);vs.push(zs),Qo=Qo.concat(zs)}for(let Jr=0;Jr<an;Jr++){const Fr=Jr/an,cs=_i*Math.cos(Fr*Math.PI/2),ls=sn*Math.sin(Fr*Math.PI/2)+hn;for(let rs=0,Is=Ar.length;rs<Is;rs++){const Hs=br(Ar[rs],hs[rs],ls);Ws(Hs.x,Hs.y,-cs)}for(let rs=0,Is=jn.length;rs<Is;rs++){const Hs=jn[rs];zs=vs[rs];for(let _o=0,Io=Hs.length;_o<Io;_o++){const d0=br(Hs[_o],zs[_o],ls);Ws(d0.x,d0.y,-cs)}}}const m0=sn+hn;for(let Jr=0;Jr<Vr;Jr++){const Fr=Jt?br(Sn[Jr],Qo[Jr],m0):Sn[Jr];En?(zn.copy(er.normals[0]).multiplyScalar(Fr.x),Nn.copy(er.binormals[0]).multiplyScalar(Fr.y),$n.copy(wn[0]).add(zn).add(Nn),Ws($n.x,$n.y,$n.z)):Ws(Fr.x,Fr.y,0)}for(let Jr=1;Jr<=Vt;Jr++)for(let Fr=0;Fr<Vr;Fr++){const cs=Jt?br(Sn[Fr],Qo[Fr],m0):Sn[Fr];En?(zn.copy(er.normals[Jr]).multiplyScalar(cs.x),Nn.copy(er.binormals[Jr]).multiplyScalar(cs.y),$n.copy(wn[Jr]).add(zn).add(Nn),Ws($n.x,$n.y,$n.z)):Ws(cs.x,cs.y,qt/Vt*Jr)}for(let Jr=an-1;Jr>=0;Jr--){const Fr=Jr/an,cs=_i*Math.cos(Fr*Math.PI/2),ls=sn*Math.sin(Fr*Math.PI/2)+hn;for(let rs=0,Is=Ar.length;rs<Is;rs++){const Hs=br(Ar[rs],hs[rs],ls);Ws(Hs.x,Hs.y,qt+cs)}for(let rs=0,Is=jn.length;rs<Is;rs++){const Hs=jn[rs];zs=vs[rs];for(let _o=0,Io=Hs.length;_o<Io;_o++){const d0=br(Hs[_o],zs[_o],ls);En?Ws(d0.x,d0.y+wn[Vt-1].y,wn[Vt-1].x+cs):Ws(d0.x,d0.y,qt+cs)}}}k0(),h0();function k0(){const Jr=at.length/3;if(Jt){let Fr=0,cs=Vr*Fr;for(let ls=0;ls<Es;ls++){const rs=or[ls];qr(rs[2]+cs,rs[1]+cs,rs[0]+cs)}Fr=Vt+an*2,cs=Vr*Fr;for(let ls=0;ls<Es;ls++){const rs=or[ls];qr(rs[0]+cs,rs[1]+cs,rs[2]+cs)}}else{for(let Fr=0;Fr<Es;Fr++){const cs=or[Fr];qr(cs[2],cs[1],cs[0])}for(let Fr=0;Fr<Es;Fr++){const cs=or[Fr];qr(cs[0]+Vr*Vt,cs[1]+Vr*Vt,cs[2]+Vr*Vt)}}rt.addGroup(Jr,at.length/3-Jr,0)}function h0(){const Jr=at.length/3;let Fr=0;S0(Ar,Fr),Fr+=Ar.length;for(let cs=0,ls=jn.length;cs<ls;cs++){const rs=jn[cs];S0(rs,Fr),Fr+=rs.length}rt.addGroup(Jr,at.length/3-Jr,1)}function S0(Jr,Fr){let cs=Jr.length;for(;--cs>=0;){const ls=cs;let rs=cs-1;rs<0&&(rs=Jr.length-1);for(let Is=0,Hs=Vt+an*2;Is<Hs;Is++){const _o=Vr*Is,Io=Vr*(Is+1),d0=Fr+ls+_o,$0=Fr+rs+_o,N0=Fr+rs+Io,qn=Fr+ls+Io;ws(d0,$0,N0,qn)}}}function Ws(Jr,Fr,cs){Bt.push(Jr),Bt.push(Fr),Bt.push(cs)}function qr(Jr,Fr,cs){Ms(Jr),Ms(Fr),Ms(cs);const ls=at.length/3,rs=xn.generateTopUV(rt,at,ls-3,ls-2,ls-1);mr(rs[0]),mr(rs[1]),mr(rs[2])}function ws(Jr,Fr,cs,ls){Ms(Jr),Ms(Fr),Ms(ls),Ms(Fr),Ms(cs),Ms(ls);const rs=at.length/3,Is=xn.generateSideWallUV(rt,at,rs-6,rs-3,rs-2,rs-1);mr(Is[0]),mr(Is[1]),mr(Is[3]),mr(Is[1]),mr(Is[2]),mr(Is[3])}function Ms(Jr){at.push(Bt[Jr*3+0]),at.push(Bt[Jr*3+1]),at.push(Bt[Jr*3+2])}function mr(Jr){ut.push(Jr.x),ut.push(Jr.y)}}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}toJSON(){const c=super.toJSON(),j=this.parameters.shapes,rt=this.parameters.options;return dC(j,rt,c)}static fromJSON(c,j){const rt=[];for(let ut=0,At=c.shapes.length;ut<At;ut++){const wt=j[c.shapes[ut]];rt.push(wt)}const at=c.options.extrudePath;return at!==void 0&&(c.options.extrudePath=new W3[at.type]().fromJSON(at)),new iv(rt,c.options)}}const hC={generateTopUV:function(ht,c,j,rt,at){const ut=c[j*3],At=c[j*3+1],wt=c[rt*3],Bt=c[rt*3+1],Ft=c[at*3],Vt=c[at*3+1];return[new Wr(ut,At),new Wr(wt,Bt),new Wr(Ft,Vt)]},generateSideWallUV:function(ht,c,j,rt,at,ut){const At=c[j*3],wt=c[j*3+1],Bt=c[j*3+2],Ft=c[rt*3],Vt=c[rt*3+1],qt=c[rt*3+2],Jt=c[at*3],_i=c[at*3+1],sn=c[at*3+2],hn=c[ut*3],an=c[ut*3+1],en=c[ut*3+2];return Math.abs(wt-Vt)<Math.abs(At-Ft)?[new Wr(At,1-Bt),new Wr(Ft,1-qt),new Wr(Jt,1-sn),new Wr(hn,1-en)]:[new Wr(wt,1-Bt),new Wr(Vt,1-qt),new Wr(_i,1-sn),new Wr(an,1-en)]}};function dC(ht,c,j){if(j.shapes=[],Array.isArray(ht))for(let rt=0,at=ht.length;rt<at;rt++){const ut=ht[rt];j.shapes.push(ut.uuid)}else j.shapes.push(ht.uuid);return j.options=Object.assign({},c),c.extrudePath!==void 0&&(j.options.extrudePath=c.extrudePath.toJSON()),j}class nv extends C2{constructor(c=1,j=0){const rt=(1+Math.sqrt(5))/2,at=[-1,rt,0,1,rt,0,-1,-rt,0,1,-rt,0,0,-1,rt,0,1,rt,0,-1,-rt,0,1,-rt,rt,0,-1,rt,0,1,-rt,0,-1,-rt,0,1],ut=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(at,ut,c,j),this.type="IcosahedronGeometry",this.parameters={radius:c,detail:j}}static fromJSON(c){return new nv(c.radius,c.detail)}}class bm extends C2{constructor(c=1,j=0){const rt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],at=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(rt,at,c,j),this.type="OctahedronGeometry",this.parameters={radius:c,detail:j}}static fromJSON(c){return new bm(c.radius,c.detail)}}class rv extends Bo{constructor(c=.5,j=1,rt=32,at=1,ut=0,At=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:c,outerRadius:j,thetaSegments:rt,phiSegments:at,thetaStart:ut,thetaLength:At},rt=Math.max(3,rt),at=Math.max(1,at);const wt=[],Bt=[],Ft=[],Vt=[];let qt=c;const Jt=(j-c)/at,_i=new kn,sn=new Wr;for(let hn=0;hn<=at;hn++){for(let an=0;an<=rt;an++){const en=ut+an/rt*At;_i.x=qt*Math.cos(en),_i.y=qt*Math.sin(en),Bt.push(_i.x,_i.y,_i.z),Ft.push(0,0,1),sn.x=(_i.x/j+1)/2,sn.y=(_i.y/j+1)/2,Vt.push(sn.x,sn.y)}qt+=Jt}for(let hn=0;hn<at;hn++){const an=hn*(rt+1);for(let en=0;en<rt;en++){const xn=en+an,wn=xn,En=xn+rt+1,er=xn+rt+2,Nn=xn+1;wt.push(wn,En,Nn),wt.push(En,er,Nn)}}this.setIndex(wt),this.setAttribute("position",new Qr(Bt,3)),this.setAttribute("normal",new Qr(Ft,3)),this.setAttribute("uv",new Qr(Vt,2))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new rv(c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength)}}class sv extends Bo{constructor(c=new $2([new Wr(0,.5),new Wr(-.5,-.5),new Wr(.5,-.5)]),j=12){super(),this.type="ShapeGeometry",this.parameters={shapes:c,curveSegments:j};const rt=[],at=[],ut=[],At=[];let wt=0,Bt=0;if(Array.isArray(c)===!1)Ft(c);else for(let Vt=0;Vt<c.length;Vt++)Ft(c[Vt]),this.addGroup(wt,Bt,Vt),wt+=Bt,Bt=0;this.setIndex(rt),this.setAttribute("position",new Qr(at,3)),this.setAttribute("normal",new Qr(ut,3)),this.setAttribute("uv",new Qr(At,2));function Ft(Vt){const qt=at.length/3,Jt=Vt.extractPoints(j);let _i=Jt.shape;const sn=Jt.holes;Mu.isClockWise(_i)===!1&&(_i=_i.reverse());for(let an=0,en=sn.length;an<en;an++){const xn=sn[an];Mu.isClockWise(xn)===!0&&(sn[an]=xn.reverse())}const hn=Mu.triangulateShape(_i,sn);for(let an=0,en=sn.length;an<en;an++){const xn=sn[an];_i=_i.concat(xn)}for(let an=0,en=_i.length;an<en;an++){const xn=_i[an];at.push(xn.x,xn.y,0),ut.push(0,0,1),At.push(xn.x,xn.y)}for(let an=0,en=hn.length;an<en;an++){const xn=hn[an],wn=xn[0]+qt,En=xn[1]+qt,er=xn[2]+qt;rt.push(wn,En,er),Bt+=3}}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}toJSON(){const c=super.toJSON(),j=this.parameters.shapes;return fC(j,c)}static fromJSON(c,j){const rt=[];for(let at=0,ut=c.shapes.length;at<ut;at++){const At=j[c.shapes[at]];rt.push(At)}return new sv(rt,c.curveSegments)}}function fC(ht,c){if(c.shapes=[],Array.isArray(ht))for(let j=0,rt=ht.length;j<rt;j++){const at=ht[j];c.shapes.push(at.uuid)}else c.shapes.push(ht.uuid);return c}class Mm extends Bo{constructor(c=1,j=32,rt=16,at=0,ut=Math.PI*2,At=0,wt=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:c,widthSegments:j,heightSegments:rt,phiStart:at,phiLength:ut,thetaStart:At,thetaLength:wt},j=Math.max(3,Math.floor(j)),rt=Math.max(2,Math.floor(rt));const Bt=Math.min(At+wt,Math.PI);let Ft=0;const Vt=[],qt=new kn,Jt=new kn,_i=[],sn=[],hn=[],an=[];for(let en=0;en<=rt;en++){const xn=[],wn=en/rt;let En=0;en===0&&At===0?En=.5/j:en===rt&&Bt===Math.PI&&(En=-.5/j);for(let er=0;er<=j;er++){const Nn=er/j;qt.x=-c*Math.cos(at+Nn*ut)*Math.sin(At+wn*wt),qt.y=c*Math.cos(At+wn*wt),qt.z=c*Math.sin(at+Nn*ut)*Math.sin(At+wn*wt),sn.push(qt.x,qt.y,qt.z),Jt.copy(qt).normalize(),hn.push(Jt.x,Jt.y,Jt.z),an.push(Nn+En,1-wn),xn.push(Ft++)}Vt.push(xn)}for(let en=0;en<rt;en++)for(let xn=0;xn<j;xn++){const wn=Vt[en][xn+1],En=Vt[en][xn],er=Vt[en+1][xn],Nn=Vt[en+1][xn+1];(en!==0||At>0)&&_i.push(wn,En,Nn),(en!==rt-1||Bt<Math.PI)&&_i.push(En,er,Nn)}this.setIndex(_i),this.setAttribute("position",new Qr(sn,3)),this.setAttribute("normal",new Qr(hn,3)),this.setAttribute("uv",new Qr(an,2))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new Mm(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength)}}class ov extends C2{constructor(c=1,j=0){const rt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],at=[2,1,0,0,3,2,1,3,0,2,3,1];super(rt,at,c,j),this.type="TetrahedronGeometry",this.parameters={radius:c,detail:j}}static fromJSON(c){return new ov(c.radius,c.detail)}}class av extends Bo{constructor(c=1,j=.4,rt=12,at=48,ut=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:c,tube:j,radialSegments:rt,tubularSegments:at,arc:ut},rt=Math.floor(rt),at=Math.floor(at);const At=[],wt=[],Bt=[],Ft=[],Vt=new kn,qt=new kn,Jt=new kn;for(let _i=0;_i<=rt;_i++)for(let sn=0;sn<=at;sn++){const hn=sn/at*ut,an=_i/rt*Math.PI*2;qt.x=(c+j*Math.cos(an))*Math.cos(hn),qt.y=(c+j*Math.cos(an))*Math.sin(hn),qt.z=j*Math.sin(an),wt.push(qt.x,qt.y,qt.z),Vt.x=c*Math.cos(hn),Vt.y=c*Math.sin(hn),Jt.subVectors(qt,Vt).normalize(),Bt.push(Jt.x,Jt.y,Jt.z),Ft.push(sn/at),Ft.push(_i/rt)}for(let _i=1;_i<=rt;_i++)for(let sn=1;sn<=at;sn++){const hn=(at+1)*_i+sn-1,an=(at+1)*(_i-1)+sn-1,en=(at+1)*(_i-1)+sn,xn=(at+1)*_i+sn;At.push(hn,an,xn),At.push(an,en,xn)}this.setIndex(At),this.setAttribute("position",new Qr(wt,3)),this.setAttribute("normal",new Qr(Bt,3)),this.setAttribute("uv",new Qr(Ft,2))}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new av(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc)}}class lv extends Bo{constructor(c=1,j=.4,rt=64,at=8,ut=2,At=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:c,tube:j,tubularSegments:rt,radialSegments:at,p:ut,q:At},rt=Math.floor(rt),at=Math.floor(at);const wt=[],Bt=[],Ft=[],Vt=[],qt=new kn,Jt=new kn,_i=new kn,sn=new kn,hn=new kn,an=new kn,en=new kn;for(let wn=0;wn<=rt;++wn){const En=wn/rt*ut*Math.PI*2;xn(En,ut,At,c,_i),xn(En+.01,ut,At,c,sn),an.subVectors(sn,_i),en.addVectors(sn,_i),hn.crossVectors(an,en),en.crossVectors(hn,an),hn.normalize(),en.normalize();for(let er=0;er<=at;++er){const Nn=er/at*Math.PI*2,zn=-j*Math.cos(Nn),$n=j*Math.sin(Nn);qt.x=_i.x+(zn*en.x+$n*hn.x),qt.y=_i.y+(zn*en.y+$n*hn.y),qt.z=_i.z+(zn*en.z+$n*hn.z),Bt.push(qt.x,qt.y,qt.z),Jt.subVectors(qt,_i).normalize(),Ft.push(Jt.x,Jt.y,Jt.z),Vt.push(wn/rt),Vt.push(er/at)}}for(let wn=1;wn<=rt;wn++)for(let En=1;En<=at;En++){const er=(at+1)*(wn-1)+(En-1),Nn=(at+1)*wn+(En-1),zn=(at+1)*wn+En,$n=(at+1)*(wn-1)+En;wt.push(er,Nn,$n),wt.push(Nn,zn,$n)}this.setIndex(wt),this.setAttribute("position",new Qr(Bt,3)),this.setAttribute("normal",new Qr(Ft,3)),this.setAttribute("uv",new Qr(Vt,2));function xn(wn,En,er,Nn,zn){const $n=Math.cos(wn),Ln=Math.sin(wn),Sn=er/En*wn,jn=Math.cos(Sn);zn.x=Nn*(2+jn)*.5*$n,zn.y=Nn*(2+jn)*Ln*.5,zn.z=Nn*Math.sin(Sn)*.5}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}static fromJSON(c){return new lv(c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q)}}class cv extends Bo{constructor(c=new ay(new kn(-1,-1,0),new kn(-1,1,0),new kn(1,1,0)),j=64,rt=1,at=8,ut=!1){super(),this.type="TubeGeometry",this.parameters={path:c,tubularSegments:j,radius:rt,radialSegments:at,closed:ut};const At=c.computeFrenetFrames(j,ut);this.tangents=At.tangents,this.normals=At.normals,this.binormals=At.binormals;const wt=new kn,Bt=new kn,Ft=new Wr;let Vt=new kn;const qt=[],Jt=[],_i=[],sn=[];hn(),this.setIndex(sn),this.setAttribute("position",new Qr(qt,3)),this.setAttribute("normal",new Qr(Jt,3)),this.setAttribute("uv",new Qr(_i,2));function hn(){for(let wn=0;wn<j;wn++)an(wn);an(ut===!1?j:0),xn(),en()}function an(wn){Vt=c.getPointAt(wn/j,Vt);const En=At.normals[wn],er=At.binormals[wn];for(let Nn=0;Nn<=at;Nn++){const zn=Nn/at*Math.PI*2,$n=Math.sin(zn),Ln=-Math.cos(zn);Bt.x=Ln*En.x+$n*er.x,Bt.y=Ln*En.y+$n*er.y,Bt.z=Ln*En.z+$n*er.z,Bt.normalize(),Jt.push(Bt.x,Bt.y,Bt.z),wt.x=Vt.x+rt*Bt.x,wt.y=Vt.y+rt*Bt.y,wt.z=Vt.z+rt*Bt.z,qt.push(wt.x,wt.y,wt.z)}}function en(){for(let wn=1;wn<=j;wn++)for(let En=1;En<=at;En++){const er=(at+1)*(wn-1)+(En-1),Nn=(at+1)*wn+(En-1),zn=(at+1)*wn+En,$n=(at+1)*(wn-1)+En;sn.push(er,Nn,$n),sn.push(Nn,zn,$n)}}function xn(){for(let wn=0;wn<=j;wn++)for(let En=0;En<=at;En++)Ft.x=wn/j,Ft.y=En/at,_i.push(Ft.x,Ft.y)}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}toJSON(){const c=super.toJSON();return c.path=this.parameters.path.toJSON(),c}static fromJSON(c){return new cv(new W3[c.path.type]().fromJSON(c.path),c.tubularSegments,c.radius,c.radialSegments,c.closed)}}class $4 extends Bo{constructor(c=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:c},c!==null){const j=[],rt=new Set,at=new kn,ut=new kn;if(c.index!==null){const At=c.attributes.position,wt=c.index;let Bt=c.groups;Bt.length===0&&(Bt=[{start:0,count:wt.count,materialIndex:0}]);for(let Ft=0,Vt=Bt.length;Ft<Vt;++Ft){const qt=Bt[Ft],Jt=qt.start,_i=qt.count;for(let sn=Jt,hn=Jt+_i;sn<hn;sn+=3)for(let an=0;an<3;an++){const en=wt.getX(sn+an),xn=wt.getX(sn+(an+1)%3);at.fromBufferAttribute(At,en),ut.fromBufferAttribute(At,xn),j4(at,ut,rt)===!0&&(j.push(at.x,at.y,at.z),j.push(ut.x,ut.y,ut.z))}}}else{const At=c.attributes.position;for(let wt=0,Bt=At.count/3;wt<Bt;wt++)for(let Ft=0;Ft<3;Ft++){const Vt=3*wt+Ft,qt=3*wt+(Ft+1)%3;at.fromBufferAttribute(At,Vt),ut.fromBufferAttribute(At,qt),j4(at,ut,rt)===!0&&(j.push(at.x,at.y,at.z),j.push(ut.x,ut.y,ut.z))}}this.setAttribute("position",new Qr(j,3))}}copy(c){return super.copy(c),this.parameters=Object.assign({},c.parameters),this}}function j4(ht,c,j){const rt=`${ht.x},${ht.y},${ht.z}-${c.x},${c.y},${c.z}`,at=`${c.x},${c.y},${c.z}-${ht.x},${ht.y},${ht.z}`;return j.has(rt)===!0||j.has(at)===!0?!1:(j.add(rt),j.add(at),!0)}var e7=Object.freeze({__proto__:null,BoxGeometry:Vu,CapsuleGeometry:K3,CircleGeometry:X3,ConeGeometry:Y3,CylinderGeometry:jp,DodecahedronGeometry:q3,EdgesGeometry:W4,ExtrudeGeometry:iv,IcosahedronGeometry:nv,LatheGeometry:wm,OctahedronGeometry:bm,PlaneGeometry:lu,PolyhedronGeometry:C2,RingGeometry:rv,ShapeGeometry:sv,SphereGeometry:Mm,TetrahedronGeometry:ov,TorusGeometry:av,TorusKnotGeometry:lv,TubeGeometry:cv,WireframeGeometry:$4});class t7 extends Kl{constructor(c){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Os(0),this.transparent=!0,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.fog=c.fog,this}}class i7 extends b1{constructor(c){super(c),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dy extends Kl{constructor(c){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Os(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Os(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new f1,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.defines={STANDARD:""},this.color.copy(c.color),this.roughness=c.roughness,this.metalness=c.metalness,this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.roughnessMap=c.roughnessMap,this.metalnessMap=c.metalnessMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.envMapRotation.copy(c.envMapRotation),this.envMapIntensity=c.envMapIntensity,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.flatShading=c.flatShading,this.fog=c.fog,this}}class n7 extends dy{constructor(c){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Wr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return F0(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(j){this.ior=(1+.4*j)/(1-.4*j)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Os(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Os(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Os(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(c)}get anisotropy(){return this._anisotropy}set anisotropy(c){this._anisotropy>0!=c>0&&this.version++,this._anisotropy=c}get clearcoat(){return this._clearcoat}set clearcoat(c){this._clearcoat>0!=c>0&&this.version++,this._clearcoat=c}get iridescence(){return this._iridescence}set iridescence(c){this._iridescence>0!=c>0&&this.version++,this._iridescence=c}get dispersion(){return this._dispersion}set dispersion(c){this._dispersion>0!=c>0&&this.version++,this._dispersion=c}get sheen(){return this._sheen}set sheen(c){this._sheen>0!=c>0&&this.version++,this._sheen=c}get transmission(){return this._transmission}set transmission(c){this._transmission>0!=c>0&&this.version++,this._transmission=c}copy(c){return super.copy(c),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=c.anisotropy,this.anisotropyRotation=c.anisotropyRotation,this.anisotropyMap=c.anisotropyMap,this.clearcoat=c.clearcoat,this.clearcoatMap=c.clearcoatMap,this.clearcoatRoughness=c.clearcoatRoughness,this.clearcoatRoughnessMap=c.clearcoatRoughnessMap,this.clearcoatNormalMap=c.clearcoatNormalMap,this.clearcoatNormalScale.copy(c.clearcoatNormalScale),this.dispersion=c.dispersion,this.ior=c.ior,this.iridescence=c.iridescence,this.iridescenceMap=c.iridescenceMap,this.iridescenceIOR=c.iridescenceIOR,this.iridescenceThicknessRange=[...c.iridescenceThicknessRange],this.iridescenceThicknessMap=c.iridescenceThicknessMap,this.sheen=c.sheen,this.sheenColor.copy(c.sheenColor),this.sheenColorMap=c.sheenColorMap,this.sheenRoughness=c.sheenRoughness,this.sheenRoughnessMap=c.sheenRoughnessMap,this.transmission=c.transmission,this.transmissionMap=c.transmissionMap,this.thickness=c.thickness,this.thicknessMap=c.thicknessMap,this.attenuationDistance=c.attenuationDistance,this.attenuationColor.copy(c.attenuationColor),this.specularIntensity=c.specularIntensity,this.specularIntensityMap=c.specularIntensityMap,this.specularColor.copy(c.specularColor),this.specularColorMap=c.specularColorMap,this}}class r7 extends Kl{constructor(c){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Os(16777215),this.specular=new Os(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Os(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new f1,this.combine=Ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.specular.copy(c.specular),this.shininess=c.shininess,this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.envMapRotation.copy(c.envMapRotation),this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.flatShading=c.flatShading,this.fog=c.fog,this}}class s7 extends Kl{constructor(c){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Os(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Os(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.gradientMap=c.gradientMap,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.alphaMap=c.alphaMap,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.fog=c.fog,this}}class o7 extends Kl{constructor(c){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(c)}copy(c){return super.copy(c),this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.flatShading=c.flatShading,this}}class a7 extends Kl{constructor(c){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Os(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Os(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new f1,this.combine=Ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.envMapRotation.copy(c.envMapRotation),this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.flatShading=c.flatShading,this.fog=c.fog,this}}class l7 extends Kl{constructor(c){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Os(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Wr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(c)}copy(c){return super.copy(c),this.defines={MATCAP:""},this.color.copy(c.color),this.matcap=c.matcap,this.map=c.map,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.alphaMap=c.alphaMap,this.flatShading=c.flatShading,this.fog=c.fog,this}}class c7 extends E1{constructor(c){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(c)}copy(c){return super.copy(c),this.scale=c.scale,this.dashSize=c.dashSize,this.gapSize=c.gapSize,this}}function _f(ht,c,j){return!ht||!j&&ht.constructor===c?ht:typeof c.BYTES_PER_ELEMENT=="number"?new c(ht):Array.prototype.slice.call(ht)}function u7(ht){return ArrayBuffer.isView(ht)&&!(ht instanceof DataView)}function h7(ht){function c(at,ut){return ht[at]-ht[ut]}const j=ht.length,rt=new Array(j);for(let at=0;at!==j;++at)rt[at]=at;return rt.sort(c),rt}function fy(ht,c,j){const rt=ht.length,at=new ht.constructor(rt);for(let ut=0,At=0;At!==rt;++ut){const wt=j[ut]*c;for(let Bt=0;Bt!==c;++Bt)at[At++]=ht[wt+Bt]}return at}function py(ht,c,j,rt){let at=1,ut=ht[0];for(;ut!==void 0&&ut[rt]===void 0;)ut=ht[at++];if(ut===void 0)return;let At=ut[rt];if(At!==void 0)if(Array.isArray(At))do At=ut[rt],At!==void 0&&(c.push(ut.time),j.push.apply(j,At)),ut=ht[at++];while(ut!==void 0);else if(At.toArray!==void 0)do At=ut[rt],At!==void 0&&(c.push(ut.time),At.toArray(j,j.length)),ut=ht[at++];while(ut!==void 0);else do At=ut[rt],At!==void 0&&(c.push(ut.time),j.push(At)),ut=ht[at++];while(ut!==void 0)}function pC(ht,c,j,rt,at=30){const ut=ht.clone();ut.name=c;const At=[];for(let Bt=0;Bt<ut.tracks.length;++Bt){const Ft=ut.tracks[Bt],Vt=Ft.getValueSize(),qt=[],Jt=[];for(let _i=0;_i<Ft.times.length;++_i){const sn=Ft.times[_i]*at;if(!(sn<j||sn>=rt)){qt.push(Ft.times[_i]);for(let hn=0;hn<Vt;++hn)Jt.push(Ft.values[_i*Vt+hn])}}qt.length!==0&&(Ft.times=_f(qt,Ft.times.constructor),Ft.values=_f(Jt,Ft.values.constructor),At.push(Ft))}ut.tracks=At;let wt=1/0;for(let Bt=0;Bt<ut.tracks.length;++Bt)wt>ut.tracks[Bt].times[0]&&(wt=ut.tracks[Bt].times[0]);for(let Bt=0;Bt<ut.tracks.length;++Bt)ut.tracks[Bt].shift(-1*wt);return ut.resetDuration(),ut}function AC(ht,c=0,j=ht,rt=30){rt<=0&&(rt=30);const at=j.tracks.length,ut=c/rt;for(let At=0;At<at;++At){const wt=j.tracks[At],Bt=wt.ValueTypeName;if(Bt==="bool"||Bt==="string")continue;const Ft=ht.tracks.find(function(en){return en.name===wt.name&&en.ValueTypeName===Bt});if(Ft===void 0)continue;let Vt=0;const qt=wt.getValueSize();wt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Vt=qt/3);let Jt=0;const _i=Ft.getValueSize();Ft.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Jt=_i/3);const sn=wt.times.length-1;let hn;if(ut<=wt.times[0]){const en=Vt,xn=qt-Vt;hn=wt.values.slice(en,xn)}else if(ut>=wt.times[sn]){const en=sn*qt+Vt,xn=en+qt-Vt;hn=wt.values.slice(en,xn)}else{const en=wt.createInterpolant(),xn=Vt,wn=qt-Vt;en.evaluate(ut),hn=en.resultBuffer.slice(xn,wn)}Bt==="quaternion"&&new e0().fromArray(hn).normalize().conjugate().toArray(hn);const an=Ft.times.length;for(let en=0;en<an;++en){const xn=en*_i+Jt;if(Bt==="quaternion")e0.multiplyQuaternionsFlat(Ft.values,xn,hn,0,Ft.values,xn);else{const wn=_i-Jt*2;for(let En=0;En<wn;++En)Ft.values[xn+En]-=hn[En]}}}return ht.blendMode=I1,ht}const mC={convertArray:_f,isTypedArray:u7,getKeyframeOrder:h7,sortedArray:fy,flattenJSON:py,subclip:pC,makeClipAdditive:AC};class Sm{constructor(c,j,rt,at){this.parameterPositions=c,this._cachedIndex=0,this.resultBuffer=at!==void 0?at:new j.constructor(rt),this.sampleValues=j,this.valueSize=rt,this.settings=null,this.DefaultSettings_={}}evaluate(c){const j=this.parameterPositions;let rt=this._cachedIndex,at=j[rt],ut=j[rt-1];e:{t:{let At;i:{s:if(!(c<at)){for(let wt=rt+2;;){if(at===void 0){if(c<ut)break s;return rt=j.length,this._cachedIndex=rt,this.copySampleValue_(rt-1)}if(rt===wt)break;if(ut=at,at=j[++rt],c<at)break t}At=j.length;break i}if(!(c>=ut)){const wt=j[1];c<wt&&(rt=2,ut=wt);for(let Bt=rt-2;;){if(ut===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(rt===Bt)break;if(at=ut,ut=j[--rt-1],c>=ut)break t}At=rt,rt=0;break i}break e}for(;rt<At;){const wt=rt+At>>>1;c<j[wt]?At=wt:rt=wt+1}if(at=j[rt],ut=j[rt-1],ut===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(at===void 0)return rt=j.length,this._cachedIndex=rt,this.copySampleValue_(rt-1)}this._cachedIndex=rt,this.intervalChanged_(rt,ut,at)}return this.interpolate_(rt,ut,c,at)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(c){const j=this.resultBuffer,rt=this.sampleValues,at=this.valueSize,ut=c*at;for(let At=0;At!==at;++At)j[At]=rt[ut+At];return j}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class d7 extends Sm{constructor(c,j,rt,at){super(c,j,rt,at),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:W0,endingEnd:W0}}intervalChanged_(c,j,rt){const at=this.parameterPositions;let ut=c-2,At=c+1,wt=at[ut],Bt=at[At];if(wt===void 0)switch(this.getSettings_().endingStart){case Ml:ut=c,wt=2*j-rt;break;case h1:ut=at.length-2,wt=j+at[ut]-at[ut+1];break;default:ut=c,wt=rt}if(Bt===void 0)switch(this.getSettings_().endingEnd){case Ml:At=c,Bt=2*rt-j;break;case h1:At=1,Bt=rt+at[1]-at[0];break;default:At=c-1,Bt=j}const Ft=(rt-j)*.5,Vt=this.valueSize;this._weightPrev=Ft/(j-wt),this._weightNext=Ft/(Bt-rt),this._offsetPrev=ut*Vt,this._offsetNext=At*Vt}interpolate_(c,j,rt,at){const ut=this.resultBuffer,At=this.sampleValues,wt=this.valueSize,Bt=c*wt,Ft=Bt-wt,Vt=this._offsetPrev,qt=this._offsetNext,Jt=this._weightPrev,_i=this._weightNext,sn=(rt-j)/(at-j),hn=sn*sn,an=hn*sn,en=-Jt*an+2*Jt*hn-Jt*sn,xn=(1+Jt)*an+(-1.5-2*Jt)*hn+(-.5+Jt)*sn+1,wn=(-1-_i)*an+(1.5+_i)*hn+.5*sn,En=_i*an-_i*hn;for(let er=0;er!==wt;++er)ut[er]=en*At[Vt+er]+xn*At[Ft+er]+wn*At[Bt+er]+En*At[qt+er];return ut}}class Ay extends Sm{constructor(c,j,rt,at){super(c,j,rt,at)}interpolate_(c,j,rt,at){const ut=this.resultBuffer,At=this.sampleValues,wt=this.valueSize,Bt=c*wt,Ft=Bt-wt,Vt=(rt-j)/(at-j),qt=1-Vt;for(let Jt=0;Jt!==wt;++Jt)ut[Jt]=At[Ft+Jt]*qt+At[Bt+Jt]*Vt;return ut}}class f7 extends Sm{constructor(c,j,rt,at){super(c,j,rt,at)}interpolate_(c){return this.copySampleValue_(c-1)}}class uu{constructor(c,j,rt,at){if(c===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(j===void 0||j.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+c);this.name=c,this.times=_f(j,this.TimeBufferType),this.values=_f(rt,this.ValueBufferType),this.setInterpolation(at||this.DefaultInterpolation)}static toJSON(c){const j=c.constructor;let rt;if(j.toJSON!==this.toJSON)rt=j.toJSON(c);else{rt={name:c.name,times:_f(c.times,Array),values:_f(c.values,Array)};const at=c.getInterpolation();at!==c.DefaultInterpolation&&(rt.interpolation=at)}return rt.type=c.ValueTypeName,rt}InterpolantFactoryMethodDiscrete(c){return new f7(this.times,this.values,this.getValueSize(),c)}InterpolantFactoryMethodLinear(c){return new Ay(this.times,this.values,this.getValueSize(),c)}InterpolantFactoryMethodSmooth(c){return new d7(this.times,this.values,this.getValueSize(),c)}setInterpolation(c){let j;switch(c){case xa:j=this.InterpolantFactoryMethodDiscrete;break;case z0:j=this.InterpolantFactoryMethodLinear;break;case q0:j=this.InterpolantFactoryMethodSmooth;break}if(j===void 0){const rt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(c!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(rt);return console.warn("THREE.KeyframeTrack:",rt),this}return this.createInterpolant=j,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xa;case this.InterpolantFactoryMethodLinear:return z0;case this.InterpolantFactoryMethodSmooth:return q0}}getValueSize(){return this.values.length/this.times.length}shift(c){if(c!==0){const j=this.times;for(let rt=0,at=j.length;rt!==at;++rt)j[rt]+=c}return this}scale(c){if(c!==1){const j=this.times;for(let rt=0,at=j.length;rt!==at;++rt)j[rt]*=c}return this}trim(c,j){const rt=this.times,at=rt.length;let ut=0,At=at-1;for(;ut!==at&&rt[ut]<c;)++ut;for(;At!==-1&&rt[At]>j;)--At;if(++At,ut!==0||At!==at){ut>=At&&(At=Math.max(At,1),ut=At-1);const wt=this.getValueSize();this.times=rt.slice(ut,At),this.values=this.values.slice(ut*wt,At*wt)}return this}validate(){let c=!0;const j=this.getValueSize();j-Math.floor(j)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),c=!1);const rt=this.times,at=this.values,ut=rt.length;ut===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),c=!1);let At=null;for(let wt=0;wt!==ut;wt++){const Bt=rt[wt];if(typeof Bt=="number"&&isNaN(Bt)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,wt,Bt),c=!1;break}if(At!==null&&At>Bt){console.error("THREE.KeyframeTrack: Out of order keys.",this,wt,Bt,At),c=!1;break}At=Bt}if(at!==void 0&&u7(at))for(let wt=0,Bt=at.length;wt!==Bt;++wt){const Ft=at[wt];if(isNaN(Ft)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,wt,Ft),c=!1;break}}return c}optimize(){const c=this.times.slice(),j=this.values.slice(),rt=this.getValueSize(),at=this.getInterpolation()===q0,ut=c.length-1;let At=1;for(let wt=1;wt<ut;++wt){let Bt=!1;const Ft=c[wt],Vt=c[wt+1];if(Ft!==Vt&&(wt!==1||Ft!==c[0]))if(at)Bt=!0;else{const qt=wt*rt,Jt=qt-rt,_i=qt+rt;for(let sn=0;sn!==rt;++sn){const hn=j[qt+sn];if(hn!==j[Jt+sn]||hn!==j[_i+sn]){Bt=!0;break}}}if(Bt){if(wt!==At){c[At]=c[wt];const qt=wt*rt,Jt=At*rt;for(let _i=0;_i!==rt;++_i)j[Jt+_i]=j[qt+_i]}++At}}if(ut>0){c[At]=c[ut];for(let wt=ut*rt,Bt=At*rt,Ft=0;Ft!==rt;++Ft)j[Bt+Ft]=j[wt+Ft];++At}return At!==c.length?(this.times=c.slice(0,At),this.values=j.slice(0,At*rt)):(this.times=c,this.values=j),this}clone(){const c=this.times.slice(),j=this.values.slice(),rt=this.constructor,at=new rt(this.name,c,j);return at.createInterpolant=this.createInterpolant,at}}uu.prototype.TimeBufferType=Float32Array,uu.prototype.ValueBufferType=Float32Array,uu.prototype.DefaultInterpolation=z0;class ep extends uu{}ep.prototype.ValueTypeName="bool",ep.prototype.ValueBufferType=Array,ep.prototype.DefaultInterpolation=xa,ep.prototype.InterpolantFactoryMethodLinear=void 0,ep.prototype.InterpolantFactoryMethodSmooth=void 0;class my extends uu{}my.prototype.ValueTypeName="color";class Tm extends uu{}Tm.prototype.ValueTypeName="number";class p7 extends Sm{constructor(c,j,rt,at){super(c,j,rt,at)}interpolate_(c,j,rt,at){const ut=this.resultBuffer,At=this.sampleValues,wt=this.valueSize,Bt=(rt-j)/(at-j);let Ft=c*wt;for(let Vt=Ft+wt;Ft!==Vt;Ft+=4)e0.slerpFlat(ut,0,At,Ft-wt,At,Ft,Bt);return ut}}class tA extends uu{InterpolantFactoryMethodLinear(c){return new p7(this.times,this.values,this.getValueSize(),c)}}tA.prototype.ValueTypeName="quaternion",tA.prototype.DefaultInterpolation=z0,tA.prototype.InterpolantFactoryMethodSmooth=void 0;class tp extends uu{}tp.prototype.ValueTypeName="string",tp.prototype.ValueBufferType=Array,tp.prototype.DefaultInterpolation=xa,tp.prototype.InterpolantFactoryMethodLinear=void 0,tp.prototype.InterpolantFactoryMethodSmooth=void 0;class Rm extends uu{}Rm.prototype.ValueTypeName="vector";class Im{constructor(c="",j=-1,rt=[],at=w1){this.name=c,this.tracks=rt,this.duration=j,this.blendMode=at,this.uuid=Zl(),this.duration<0&&this.resetDuration()}static parse(c){const j=[],rt=c.tracks,at=1/(c.fps||1);for(let At=0,wt=rt.length;At!==wt;++At)j.push(gC(rt[At]).scale(at));const ut=new this(c.name,c.duration,j,c.blendMode);return ut.uuid=c.uuid,ut}static toJSON(c){const j=[],rt=c.tracks,at={name:c.name,duration:c.duration,tracks:j,uuid:c.uuid,blendMode:c.blendMode};for(let ut=0,At=rt.length;ut!==At;++ut)j.push(uu.toJSON(rt[ut]));return at}static CreateFromMorphTargetSequence(c,j,rt,at){const ut=j.length,At=[];for(let wt=0;wt<ut;wt++){let Bt=[],Ft=[];Bt.push((wt+ut-1)%ut,wt,(wt+1)%ut),Ft.push(0,1,0);const Vt=h7(Bt);Bt=fy(Bt,1,Vt),Ft=fy(Ft,1,Vt),!at&&Bt[0]===0&&(Bt.push(ut),Ft.push(Ft[0])),At.push(new Tm(".morphTargetInfluences["+j[wt].name+"]",Bt,Ft).scale(1/rt))}return new this(c,-1,At)}static findByName(c,j){let rt=c;if(!Array.isArray(c)){const at=c;rt=at.geometry&&at.geometry.animations||at.animations}for(let at=0;at<rt.length;at++)if(rt[at].name===j)return rt[at];return null}static CreateClipsFromMorphTargetSequences(c,j,rt){const at={},ut=/^([\w-]*?)([\d]+)$/;for(let wt=0,Bt=c.length;wt<Bt;wt++){const Ft=c[wt],Vt=Ft.name.match(ut);if(Vt&&Vt.length>1){const qt=Vt[1];let Jt=at[qt];Jt||(at[qt]=Jt=[]),Jt.push(Ft)}}const At=[];for(const wt in at)At.push(this.CreateFromMorphTargetSequence(wt,at[wt],j,rt));return At}static parseAnimation(c,j){if(!c)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const rt=function(qt,Jt,_i,sn,hn){if(_i.length!==0){const an=[],en=[];py(_i,an,en,sn),an.length!==0&&hn.push(new qt(Jt,an,en))}},at=[],ut=c.name||"default",At=c.fps||30,wt=c.blendMode;let Bt=c.length||-1;const Ft=c.hierarchy||[];for(let qt=0;qt<Ft.length;qt++){const Jt=Ft[qt].keys;if(!(!Jt||Jt.length===0))if(Jt[0].morphTargets){const _i={};let sn;for(sn=0;sn<Jt.length;sn++)if(Jt[sn].morphTargets)for(let hn=0;hn<Jt[sn].morphTargets.length;hn++)_i[Jt[sn].morphTargets[hn]]=-1;for(const hn in _i){const an=[],en=[];for(let xn=0;xn!==Jt[sn].morphTargets.length;++xn){const wn=Jt[sn];an.push(wn.time),en.push(wn.morphTarget===hn?1:0)}at.push(new Tm(".morphTargetInfluence["+hn+"]",an,en))}Bt=_i.length*At}else{const _i=".bones["+j[qt].name+"]";rt(Rm,_i+".position",Jt,"pos",at),rt(tA,_i+".quaternion",Jt,"rot",at),rt(Rm,_i+".scale",Jt,"scl",at)}}return at.length===0?null:new this(ut,Bt,at,wt)}resetDuration(){const c=this.tracks;let j=0;for(let rt=0,at=c.length;rt!==at;++rt){const ut=this.tracks[rt];j=Math.max(j,ut.times[ut.times.length-1])}return this.duration=j,this}trim(){for(let c=0;c<this.tracks.length;c++)this.tracks[c].trim(0,this.duration);return this}validate(){let c=!0;for(let j=0;j<this.tracks.length;j++)c=c&&this.tracks[j].validate();return c}optimize(){for(let c=0;c<this.tracks.length;c++)this.tracks[c].optimize();return this}clone(){const c=[];for(let j=0;j<this.tracks.length;j++)c.push(this.tracks[j].clone());return new this.constructor(this.name,this.duration,c,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vC(ht){switch(ht.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tm;case"vector":case"vector2":case"vector3":case"vector4":return Rm;case"color":return my;case"quaternion":return tA;case"bool":case"boolean":return ep;case"string":return tp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ht)}function gC(ht){if(ht.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const c=vC(ht.type);if(ht.times===void 0){const j=[],rt=[];py(ht.keys,j,rt,"value"),ht.times=j,ht.values=rt}return c.parse!==void 0?c.parse(ht):new c(ht.name,ht.times,ht.values,ht.interpolation)}const Yu={enabled:!1,files:{},add:function(ht,c){this.enabled!==!1&&(this.files[ht]=c)},get:function(ht){if(this.enabled!==!1)return this.files[ht]},remove:function(ht){delete this.files[ht]},clear:function(){this.files={}}};class vy{constructor(c,j,rt){const at=this;let ut=!1,At=0,wt=0,Bt;const Ft=[];this.onStart=void 0,this.onLoad=c,this.onProgress=j,this.onError=rt,this.itemStart=function(Vt){wt++,ut===!1&&at.onStart!==void 0&&at.onStart(Vt,At,wt),ut=!0},this.itemEnd=function(Vt){At++,at.onProgress!==void 0&&at.onProgress(Vt,At,wt),At===wt&&(ut=!1,at.onLoad!==void 0&&at.onLoad())},this.itemError=function(Vt){at.onError!==void 0&&at.onError(Vt)},this.resolveURL=function(Vt){return Bt?Bt(Vt):Vt},this.setURLModifier=function(Vt){return Bt=Vt,this},this.addHandler=function(Vt,qt){return Ft.push(Vt,qt),this},this.removeHandler=function(Vt){const qt=Ft.indexOf(Vt);return qt!==-1&&Ft.splice(qt,2),this},this.getHandler=function(Vt){for(let qt=0,Jt=Ft.length;qt<Jt;qt+=2){const _i=Ft[qt],sn=Ft[qt+1];if(_i.global&&(_i.lastIndex=0),_i.test(Vt))return sn}return null}}}const A7=new vy;class T1{constructor(c){this.manager=c!==void 0?c:A7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(c,j){const rt=this;return new Promise(function(at,ut){rt.load(c,at,j,ut)})}parse(){}setCrossOrigin(c){return this.crossOrigin=c,this}setWithCredentials(c){return this.withCredentials=c,this}setPath(c){return this.path=c,this}setResourcePath(c){return this.resourcePath=c,this}setRequestHeader(c){return this.requestHeader=c,this}}T1.DEFAULT_MATERIAL_NAME="__DEFAULT";const qu={};class EC extends Error{constructor(c,j){super(c),this.response=j}}class Ju extends T1{constructor(c){super(c)}load(c,j,rt,at){c===void 0&&(c=""),this.path!==void 0&&(c=this.path+c),c=this.manager.resolveURL(c);const ut=Yu.get(c);if(ut!==void 0)return this.manager.itemStart(c),setTimeout(()=>{j&&j(ut),this.manager.itemEnd(c)},0),ut;if(qu[c]!==void 0){qu[c].push({onLoad:j,onProgress:rt,onError:at});return}qu[c]=[],qu[c].push({onLoad:j,onProgress:rt,onError:at});const At=new Request(c,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),wt=this.mimeType,Bt=this.responseType;fetch(At).then(Ft=>{if(Ft.status===200||Ft.status===0){if(Ft.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||Ft.body===void 0||Ft.body.getReader===void 0)return Ft;const Vt=qu[c],qt=Ft.body.getReader(),Jt=Ft.headers.get("X-File-Size")||Ft.headers.get("Content-Length"),_i=Jt?parseInt(Jt):0,sn=_i!==0;let hn=0;const an=new ReadableStream({start(en){xn();function xn(){qt.read().then(({done:wn,value:En})=>{if(wn)en.close();else{hn+=En.byteLength;const er=new ProgressEvent("progress",{lengthComputable:sn,loaded:hn,total:_i});for(let Nn=0,zn=Vt.length;Nn<zn;Nn++){const $n=Vt[Nn];$n.onProgress&&$n.onProgress(er)}en.enqueue(En),xn()}})}}});return new Response(an)}else throw new EC(`fetch for "${Ft.url}" responded with ${Ft.status}: ${Ft.statusText}`,Ft)}).then(Ft=>{switch(Bt){case"arraybuffer":return Ft.arrayBuffer();case"blob":return Ft.blob();case"document":return Ft.text().then(Vt=>new DOMParser().parseFromString(Vt,wt));case"json":return Ft.json();default:if(wt===void 0)return Ft.text();{const qt=/charset="?([^;"\s]*)"?/i.exec(wt),Jt=qt&&qt[1]?qt[1].toLowerCase():void 0,_i=new TextDecoder(Jt);return Ft.arrayBuffer().then(sn=>_i.decode(sn))}}}).then(Ft=>{Yu.add(c,Ft);const Vt=qu[c];delete qu[c];for(let qt=0,Jt=Vt.length;qt<Jt;qt++){const _i=Vt[qt];_i.onLoad&&_i.onLoad(Ft)}}).catch(Ft=>{const Vt=qu[c];if(Vt===void 0)throw this.manager.itemError(c),Ft;delete qu[c];for(let qt=0,Jt=Vt.length;qt<Jt;qt++){const _i=Vt[qt];_i.onError&&_i.onError(Ft)}this.manager.itemError(c)}).finally(()=>{this.manager.itemEnd(c)}),this.manager.itemStart(c)}setResponseType(c){return this.responseType=c,this}setMimeType(c){return this.mimeType=c,this}}class yC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=new Ju(this.manager);At.setPath(this.path),At.setRequestHeader(this.requestHeader),At.setWithCredentials(this.withCredentials),At.load(c,function(wt){try{j(ut.parse(JSON.parse(wt)))}catch(Bt){at?at(Bt):console.error(Bt),ut.manager.itemError(c)}},rt,at)}parse(c){const j=[];for(let rt=0;rt<c.length;rt++){const at=Im.parse(c[rt]);j.push(at)}return j}}class wC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=[],wt=new Q3,Bt=new Ju(this.manager);Bt.setPath(this.path),Bt.setResponseType("arraybuffer"),Bt.setRequestHeader(this.requestHeader),Bt.setWithCredentials(ut.withCredentials);let Ft=0;function Vt(qt){Bt.load(c[qt],function(Jt){const _i=ut.parse(Jt,!0);At[qt]={width:_i.width,height:_i.height,format:_i.format,mipmaps:_i.mipmaps},Ft+=1,Ft===6&&(_i.mipmapCount===1&&(wt.minFilter=to),wt.image=At,wt.format=_i.format,wt.needsUpdate=!0,j&&j(wt))},rt,at)}if(Array.isArray(c))for(let qt=0,Jt=c.length;qt<Jt;++qt)Vt(qt);else Bt.load(c,function(qt){const Jt=ut.parse(qt,!0);if(Jt.isCubemap){const _i=Jt.mipmaps.length/Jt.mipmapCount;for(let sn=0;sn<_i;sn++){At[sn]={mipmaps:[]};for(let hn=0;hn<Jt.mipmapCount;hn++)At[sn].mipmaps.push(Jt.mipmaps[sn*Jt.mipmapCount+hn]),At[sn].format=Jt.format,At[sn].width=Jt.width,At[sn].height=Jt.height}wt.image=At}else wt.image.width=Jt.width,wt.image.height=Jt.height,wt.mipmaps=Jt.mipmaps;Jt.mipmapCount===1&&(wt.minFilter=to),wt.format=Jt.format,wt.needsUpdate=!0,j&&j(wt)},rt,at);return wt}}class Bm extends T1{constructor(c){super(c)}load(c,j,rt,at){this.path!==void 0&&(c=this.path+c),c=this.manager.resolveURL(c);const ut=this,At=Yu.get(c);if(At!==void 0)return ut.manager.itemStart(c),setTimeout(function(){j&&j(At),ut.manager.itemEnd(c)},0),At;const wt=du("img");function Bt(){Vt(),Yu.add(c,this),j&&j(this),ut.manager.itemEnd(c)}function Ft(qt){Vt(),at&&at(qt),ut.manager.itemError(c),ut.manager.itemEnd(c)}function Vt(){wt.removeEventListener("load",Bt,!1),wt.removeEventListener("error",Ft,!1)}return wt.addEventListener("load",Bt,!1),wt.addEventListener("error",Ft,!1),c.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(wt.crossOrigin=this.crossOrigin),ut.manager.itemStart(c),wt.src=c,wt}}class CC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=new H2;ut.colorSpace=jo;const At=new Bm(this.manager);At.setCrossOrigin(this.crossOrigin),At.setPath(this.path);let wt=0;function Bt(Ft){At.load(c[Ft],function(Vt){ut.images[Ft]=Vt,wt++,wt===6&&(ut.needsUpdate=!0,j&&j(ut))},void 0,at)}for(let Ft=0;Ft<c.length;++Ft)Bt(Ft);return ut}}class _C extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=new E2,wt=new Ju(this.manager);return wt.setResponseType("arraybuffer"),wt.setRequestHeader(this.requestHeader),wt.setPath(this.path),wt.setWithCredentials(ut.withCredentials),wt.load(c,function(Bt){let Ft;try{Ft=ut.parse(Bt)}catch(Vt){if(at!==void 0)at(Vt);else{console.error(Vt);return}}Ft.image!==void 0?At.image=Ft.image:Ft.data!==void 0&&(At.image.width=Ft.width,At.image.height=Ft.height,At.image.data=Ft.data),At.wrapS=Ft.wrapS!==void 0?Ft.wrapS:rr,At.wrapT=Ft.wrapT!==void 0?Ft.wrapT:rr,At.magFilter=Ft.magFilter!==void 0?Ft.magFilter:to,At.minFilter=Ft.minFilter!==void 0?Ft.minFilter:to,At.anisotropy=Ft.anisotropy!==void 0?Ft.anisotropy:1,Ft.colorSpace!==void 0&&(At.colorSpace=Ft.colorSpace),Ft.flipY!==void 0&&(At.flipY=Ft.flipY),Ft.format!==void 0&&(At.format=Ft.format),Ft.type!==void 0&&(At.type=Ft.type),Ft.mipmaps!==void 0&&(At.mipmaps=Ft.mipmaps,At.minFilter=o0),Ft.mipmapCount===1&&(At.minFilter=to),Ft.generateMipmaps!==void 0&&(At.generateMipmaps=Ft.generateMipmaps),At.needsUpdate=!0,j&&j(At,Ft)},rt,at),At}}class xC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=new C0,At=new Bm(this.manager);return At.setCrossOrigin(this.crossOrigin),At.setPath(this.path),At.load(c,function(wt){ut.image=wt,ut.needsUpdate=!0,j!==void 0&&j(ut)},rt,at),ut}}class _2 extends s0{constructor(c,j=1){super(),this.isLight=!0,this.type="Light",this.color=new Os(c),this.intensity=j}dispose(){}copy(c,j){return super.copy(c,j),this.color.copy(c.color),this.intensity=c.intensity,this}toJSON(c){const j=super.toJSON(c);return j.object.color=this.color.getHex(),j.object.intensity=this.intensity,this.groundColor!==void 0&&(j.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(j.object.distance=this.distance),this.angle!==void 0&&(j.object.angle=this.angle),this.decay!==void 0&&(j.object.decay=this.decay),this.penumbra!==void 0&&(j.object.penumbra=this.penumbra),this.shadow!==void 0&&(j.object.shadow=this.shadow.toJSON()),j}}class m7 extends _2{constructor(c,j,rt){super(c,rt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(s0.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Os(j)}copy(c,j){return super.copy(c,j),this.groundColor.copy(c.groundColor),this}}const gy=new Vs,v7=new kn,g7=new kn;class Ey{constructor(c){this.camera=c,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Wr(512,512),this.map=null,this.mapPass=null,this.matrix=new Vs,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wu,this._frameExtents=new Wr(1,1),this._viewportCount=1,this._viewports=[new r0(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(c){const j=this.camera,rt=this.matrix;v7.setFromMatrixPosition(c.matrixWorld),j.position.copy(v7),g7.setFromMatrixPosition(c.target.matrixWorld),j.lookAt(g7),j.updateMatrixWorld(),gy.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gy),rt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),rt.multiply(gy)}getViewport(c){return this._viewports[c]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(c){return this.camera=c.camera.clone(),this.bias=c.bias,this.radius=c.radius,this.mapSize.copy(c.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const c={};return this.bias!==0&&(c.bias=this.bias),this.normalBias!==0&&(c.normalBias=this.normalBias),this.radius!==1&&(c.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(c.mapSize=this.mapSize.toArray()),c.camera=this.camera.toJSON(!1).object,delete c.camera.matrix,c}}class bC extends Ey{constructor(){super(new J0(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(c){const j=this.camera,rt=hu*2*c.angle*this.focus,at=this.mapSize.width/this.mapSize.height,ut=c.distance||j.far;(rt!==j.fov||at!==j.aspect||ut!==j.far)&&(j.fov=rt,j.aspect=at,j.far=ut,j.updateProjectionMatrix()),super.updateMatrices(c)}copy(c){return super.copy(c),this.focus=c.focus,this}}class E7 extends _2{constructor(c,j,rt=0,at=Math.PI/3,ut=0,At=2){super(c,j),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(s0.DEFAULT_UP),this.updateMatrix(),this.target=new s0,this.distance=rt,this.angle=at,this.penumbra=ut,this.decay=At,this.map=null,this.shadow=new bC}get power(){return this.intensity*Math.PI}set power(c){this.intensity=c/Math.PI}dispose(){this.shadow.dispose()}copy(c,j){return super.copy(c,j),this.distance=c.distance,this.angle=c.angle,this.penumbra=c.penumbra,this.decay=c.decay,this.target=c.target.clone(),this.shadow=c.shadow.clone(),this}}const y7=new Vs,Lm=new kn,yy=new kn;class MC extends Ey{constructor(){super(new J0(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Wr(4,2),this._viewportCount=6,this._viewports=[new r0(2,1,1,1),new r0(0,1,1,1),new r0(3,1,1,1),new r0(1,1,1,1),new r0(3,0,1,1),new r0(1,0,1,1)],this._cubeDirections=[new kn(1,0,0),new kn(-1,0,0),new kn(0,0,1),new kn(0,0,-1),new kn(0,1,0),new kn(0,-1,0)],this._cubeUps=[new kn(0,1,0),new kn(0,1,0),new kn(0,1,0),new kn(0,1,0),new kn(0,0,1),new kn(0,0,-1)]}updateMatrices(c,j=0){const rt=this.camera,at=this.matrix,ut=c.distance||rt.far;ut!==rt.far&&(rt.far=ut,rt.updateProjectionMatrix()),Lm.setFromMatrixPosition(c.matrixWorld),rt.position.copy(Lm),yy.copy(rt.position),yy.add(this._cubeDirections[j]),rt.up.copy(this._cubeUps[j]),rt.lookAt(yy),rt.updateMatrixWorld(),at.makeTranslation(-Lm.x,-Lm.y,-Lm.z),y7.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(y7)}}class w7 extends _2{constructor(c,j,rt=0,at=2){super(c,j),this.isPointLight=!0,this.type="PointLight",this.distance=rt,this.decay=at,this.shadow=new MC}get power(){return this.intensity*4*Math.PI}set power(c){this.intensity=c/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(c,j){return super.copy(c,j),this.distance=c.distance,this.decay=c.decay,this.shadow=c.shadow.clone(),this}}class SC extends Ey{constructor(){super(new Op(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class C7 extends _2{constructor(c,j){super(c,j),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(s0.DEFAULT_UP),this.updateMatrix(),this.target=new s0,this.shadow=new SC}dispose(){this.shadow.dispose()}copy(c){return super.copy(c),this.target=c.target.clone(),this.shadow=c.shadow.clone(),this}}class _7 extends _2{constructor(c,j){super(c,j),this.isAmbientLight=!0,this.type="AmbientLight"}}class x7 extends _2{constructor(c,j,rt=10,at=10){super(c,j),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=rt,this.height=at}get power(){return this.intensity*this.width*this.height*Math.PI}set power(c){this.intensity=c/(this.width*this.height*Math.PI)}copy(c){return super.copy(c),this.width=c.width,this.height=c.height,this}toJSON(c){const j=super.toJSON(c);return j.object.width=this.width,j.object.height=this.height,j}}class b7{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let c=0;c<9;c++)this.coefficients.push(new kn)}set(c){for(let j=0;j<9;j++)this.coefficients[j].copy(c[j]);return this}zero(){for(let c=0;c<9;c++)this.coefficients[c].set(0,0,0);return this}getAt(c,j){const rt=c.x,at=c.y,ut=c.z,At=this.coefficients;return j.copy(At[0]).multiplyScalar(.282095),j.addScaledVector(At[1],.488603*at),j.addScaledVector(At[2],.488603*ut),j.addScaledVector(At[3],.488603*rt),j.addScaledVector(At[4],1.092548*(rt*at)),j.addScaledVector(At[5],1.092548*(at*ut)),j.addScaledVector(At[6],.315392*(3*ut*ut-1)),j.addScaledVector(At[7],1.092548*(rt*ut)),j.addScaledVector(At[8],.546274*(rt*rt-at*at)),j}getIrradianceAt(c,j){const rt=c.x,at=c.y,ut=c.z,At=this.coefficients;return j.copy(At[0]).multiplyScalar(.886227),j.addScaledVector(At[1],1.023328*at),j.addScaledVector(At[2],1.023328*ut),j.addScaledVector(At[3],1.023328*rt),j.addScaledVector(At[4],.858086*rt*at),j.addScaledVector(At[5],.858086*at*ut),j.addScaledVector(At[6],.743125*ut*ut-.247708),j.addScaledVector(At[7],.858086*rt*ut),j.addScaledVector(At[8],.429043*(rt*rt-at*at)),j}add(c){for(let j=0;j<9;j++)this.coefficients[j].add(c.coefficients[j]);return this}addScaledSH(c,j){for(let rt=0;rt<9;rt++)this.coefficients[rt].addScaledVector(c.coefficients[rt],j);return this}scale(c){for(let j=0;j<9;j++)this.coefficients[j].multiplyScalar(c);return this}lerp(c,j){for(let rt=0;rt<9;rt++)this.coefficients[rt].lerp(c.coefficients[rt],j);return this}equals(c){for(let j=0;j<9;j++)if(!this.coefficients[j].equals(c.coefficients[j]))return!1;return!0}copy(c){return this.set(c.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(c,j=0){const rt=this.coefficients;for(let at=0;at<9;at++)rt[at].fromArray(c,j+at*3);return this}toArray(c=[],j=0){const rt=this.coefficients;for(let at=0;at<9;at++)rt[at].toArray(c,j+at*3);return c}static getBasisAt(c,j){const rt=c.x,at=c.y,ut=c.z;j[0]=.282095,j[1]=.488603*at,j[2]=.488603*ut,j[3]=.488603*rt,j[4]=1.092548*rt*at,j[5]=1.092548*at*ut,j[6]=.315392*(3*ut*ut-1),j[7]=1.092548*rt*ut,j[8]=.546274*(rt*rt-at*at)}}class M7 extends _2{constructor(c=new b7,j=1){super(void 0,j),this.isLightProbe=!0,this.sh=c}copy(c){return super.copy(c),this.sh.copy(c.sh),this}fromJSON(c){return this.intensity=c.intensity,this.sh.fromArray(c.sh),this}toJSON(c){const j=super.toJSON(c);return j.object.sh=this.sh.toArray(),j}}class uv extends T1{constructor(c){super(c),this.textures={}}load(c,j,rt,at){const ut=this,At=new Ju(ut.manager);At.setPath(ut.path),At.setRequestHeader(ut.requestHeader),At.setWithCredentials(ut.withCredentials),At.load(c,function(wt){try{j(ut.parse(JSON.parse(wt)))}catch(Bt){at?at(Bt):console.error(Bt),ut.manager.itemError(c)}},rt,at)}parse(c){const j=this.textures;function rt(ut){return j[ut]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ut),j[ut]}const at=uv.createMaterialFromType(c.type);if(c.uuid!==void 0&&(at.uuid=c.uuid),c.name!==void 0&&(at.name=c.name),c.color!==void 0&&at.color!==void 0&&at.color.setHex(c.color),c.roughness!==void 0&&(at.roughness=c.roughness),c.metalness!==void 0&&(at.metalness=c.metalness),c.sheen!==void 0&&(at.sheen=c.sheen),c.sheenColor!==void 0&&(at.sheenColor=new Os().setHex(c.sheenColor)),c.sheenRoughness!==void 0&&(at.sheenRoughness=c.sheenRoughness),c.emissive!==void 0&&at.emissive!==void 0&&at.emissive.setHex(c.emissive),c.specular!==void 0&&at.specular!==void 0&&at.specular.setHex(c.specular),c.specularIntensity!==void 0&&(at.specularIntensity=c.specularIntensity),c.specularColor!==void 0&&at.specularColor!==void 0&&at.specularColor.setHex(c.specularColor),c.shininess!==void 0&&(at.shininess=c.shininess),c.clearcoat!==void 0&&(at.clearcoat=c.clearcoat),c.clearcoatRoughness!==void 0&&(at.clearcoatRoughness=c.clearcoatRoughness),c.dispersion!==void 0&&(at.dispersion=c.dispersion),c.iridescence!==void 0&&(at.iridescence=c.iridescence),c.iridescenceIOR!==void 0&&(at.iridescenceIOR=c.iridescenceIOR),c.iridescenceThicknessRange!==void 0&&(at.iridescenceThicknessRange=c.iridescenceThicknessRange),c.transmission!==void 0&&(at.transmission=c.transmission),c.thickness!==void 0&&(at.thickness=c.thickness),c.attenuationDistance!==void 0&&(at.attenuationDistance=c.attenuationDistance),c.attenuationColor!==void 0&&at.attenuationColor!==void 0&&at.attenuationColor.setHex(c.attenuationColor),c.anisotropy!==void 0&&(at.anisotropy=c.anisotropy),c.anisotropyRotation!==void 0&&(at.anisotropyRotation=c.anisotropyRotation),c.fog!==void 0&&(at.fog=c.fog),c.flatShading!==void 0&&(at.flatShading=c.flatShading),c.blending!==void 0&&(at.blending=c.blending),c.combine!==void 0&&(at.combine=c.combine),c.side!==void 0&&(at.side=c.side),c.shadowSide!==void 0&&(at.shadowSide=c.shadowSide),c.opacity!==void 0&&(at.opacity=c.opacity),c.transparent!==void 0&&(at.transparent=c.transparent),c.alphaTest!==void 0&&(at.alphaTest=c.alphaTest),c.alphaHash!==void 0&&(at.alphaHash=c.alphaHash),c.depthFunc!==void 0&&(at.depthFunc=c.depthFunc),c.depthTest!==void 0&&(at.depthTest=c.depthTest),c.depthWrite!==void 0&&(at.depthWrite=c.depthWrite),c.colorWrite!==void 0&&(at.colorWrite=c.colorWrite),c.blendSrc!==void 0&&(at.blendSrc=c.blendSrc),c.blendDst!==void 0&&(at.blendDst=c.blendDst),c.blendEquation!==void 0&&(at.blendEquation=c.blendEquation),c.blendSrcAlpha!==void 0&&(at.blendSrcAlpha=c.blendSrcAlpha),c.blendDstAlpha!==void 0&&(at.blendDstAlpha=c.blendDstAlpha),c.blendEquationAlpha!==void 0&&(at.blendEquationAlpha=c.blendEquationAlpha),c.blendColor!==void 0&&at.blendColor!==void 0&&at.blendColor.setHex(c.blendColor),c.blendAlpha!==void 0&&(at.blendAlpha=c.blendAlpha),c.stencilWriteMask!==void 0&&(at.stencilWriteMask=c.stencilWriteMask),c.stencilFunc!==void 0&&(at.stencilFunc=c.stencilFunc),c.stencilRef!==void 0&&(at.stencilRef=c.stencilRef),c.stencilFuncMask!==void 0&&(at.stencilFuncMask=c.stencilFuncMask),c.stencilFail!==void 0&&(at.stencilFail=c.stencilFail),c.stencilZFail!==void 0&&(at.stencilZFail=c.stencilZFail),c.stencilZPass!==void 0&&(at.stencilZPass=c.stencilZPass),c.stencilWrite!==void 0&&(at.stencilWrite=c.stencilWrite),c.wireframe!==void 0&&(at.wireframe=c.wireframe),c.wireframeLinewidth!==void 0&&(at.wireframeLinewidth=c.wireframeLinewidth),c.wireframeLinecap!==void 0&&(at.wireframeLinecap=c.wireframeLinecap),c.wireframeLinejoin!==void 0&&(at.wireframeLinejoin=c.wireframeLinejoin),c.rotation!==void 0&&(at.rotation=c.rotation),c.linewidth!==void 0&&(at.linewidth=c.linewidth),c.dashSize!==void 0&&(at.dashSize=c.dashSize),c.gapSize!==void 0&&(at.gapSize=c.gapSize),c.scale!==void 0&&(at.scale=c.scale),c.polygonOffset!==void 0&&(at.polygonOffset=c.polygonOffset),c.polygonOffsetFactor!==void 0&&(at.polygonOffsetFactor=c.polygonOffsetFactor),c.polygonOffsetUnits!==void 0&&(at.polygonOffsetUnits=c.polygonOffsetUnits),c.dithering!==void 0&&(at.dithering=c.dithering),c.alphaToCoverage!==void 0&&(at.alphaToCoverage=c.alphaToCoverage),c.premultipliedAlpha!==void 0&&(at.premultipliedAlpha=c.premultipliedAlpha),c.forceSinglePass!==void 0&&(at.forceSinglePass=c.forceSinglePass),c.visible!==void 0&&(at.visible=c.visible),c.toneMapped!==void 0&&(at.toneMapped=c.toneMapped),c.userData!==void 0&&(at.userData=c.userData),c.vertexColors!==void 0&&(typeof c.vertexColors=="number"?at.vertexColors=c.vertexColors>0:at.vertexColors=c.vertexColors),c.uniforms!==void 0)for(const ut in c.uniforms){const At=c.uniforms[ut];switch(at.uniforms[ut]={},At.type){case"t":at.uniforms[ut].value=rt(At.value);break;case"c":at.uniforms[ut].value=new Os().setHex(At.value);break;case"v2":at.uniforms[ut].value=new Wr().fromArray(At.value);break;case"v3":at.uniforms[ut].value=new kn().fromArray(At.value);break;case"v4":at.uniforms[ut].value=new r0().fromArray(At.value);break;case"m3":at.uniforms[ut].value=new Ao().fromArray(At.value);break;case"m4":at.uniforms[ut].value=new Vs().fromArray(At.value);break;default:at.uniforms[ut].value=At.value}}if(c.defines!==void 0&&(at.defines=c.defines),c.vertexShader!==void 0&&(at.vertexShader=c.vertexShader),c.fragmentShader!==void 0&&(at.fragmentShader=c.fragmentShader),c.glslVersion!==void 0&&(at.glslVersion=c.glslVersion),c.extensions!==void 0)for(const ut in c.extensions)at.extensions[ut]=c.extensions[ut];if(c.lights!==void 0&&(at.lights=c.lights),c.clipping!==void 0&&(at.clipping=c.clipping),c.size!==void 0&&(at.size=c.size),c.sizeAttenuation!==void 0&&(at.sizeAttenuation=c.sizeAttenuation),c.map!==void 0&&(at.map=rt(c.map)),c.matcap!==void 0&&(at.matcap=rt(c.matcap)),c.alphaMap!==void 0&&(at.alphaMap=rt(c.alphaMap)),c.bumpMap!==void 0&&(at.bumpMap=rt(c.bumpMap)),c.bumpScale!==void 0&&(at.bumpScale=c.bumpScale),c.normalMap!==void 0&&(at.normalMap=rt(c.normalMap)),c.normalMapType!==void 0&&(at.normalMapType=c.normalMapType),c.normalScale!==void 0){let ut=c.normalScale;Array.isArray(ut)===!1&&(ut=[ut,ut]),at.normalScale=new Wr().fromArray(ut)}return c.displacementMap!==void 0&&(at.displacementMap=rt(c.displacementMap)),c.displacementScale!==void 0&&(at.displacementScale=c.displacementScale),c.displacementBias!==void 0&&(at.displacementBias=c.displacementBias),c.roughnessMap!==void 0&&(at.roughnessMap=rt(c.roughnessMap)),c.metalnessMap!==void 0&&(at.metalnessMap=rt(c.metalnessMap)),c.emissiveMap!==void 0&&(at.emissiveMap=rt(c.emissiveMap)),c.emissiveIntensity!==void 0&&(at.emissiveIntensity=c.emissiveIntensity),c.specularMap!==void 0&&(at.specularMap=rt(c.specularMap)),c.specularIntensityMap!==void 0&&(at.specularIntensityMap=rt(c.specularIntensityMap)),c.specularColorMap!==void 0&&(at.specularColorMap=rt(c.specularColorMap)),c.envMap!==void 0&&(at.envMap=rt(c.envMap)),c.envMapRotation!==void 0&&at.envMapRotation.fromArray(c.envMapRotation),c.envMapIntensity!==void 0&&(at.envMapIntensity=c.envMapIntensity),c.reflectivity!==void 0&&(at.reflectivity=c.reflectivity),c.refractionRatio!==void 0&&(at.refractionRatio=c.refractionRatio),c.lightMap!==void 0&&(at.lightMap=rt(c.lightMap)),c.lightMapIntensity!==void 0&&(at.lightMapIntensity=c.lightMapIntensity),c.aoMap!==void 0&&(at.aoMap=rt(c.aoMap)),c.aoMapIntensity!==void 0&&(at.aoMapIntensity=c.aoMapIntensity),c.gradientMap!==void 0&&(at.gradientMap=rt(c.gradientMap)),c.clearcoatMap!==void 0&&(at.clearcoatMap=rt(c.clearcoatMap)),c.clearcoatRoughnessMap!==void 0&&(at.clearcoatRoughnessMap=rt(c.clearcoatRoughnessMap)),c.clearcoatNormalMap!==void 0&&(at.clearcoatNormalMap=rt(c.clearcoatNormalMap)),c.clearcoatNormalScale!==void 0&&(at.clearcoatNormalScale=new Wr().fromArray(c.clearcoatNormalScale)),c.iridescenceMap!==void 0&&(at.iridescenceMap=rt(c.iridescenceMap)),c.iridescenceThicknessMap!==void 0&&(at.iridescenceThicknessMap=rt(c.iridescenceThicknessMap)),c.transmissionMap!==void 0&&(at.transmissionMap=rt(c.transmissionMap)),c.thicknessMap!==void 0&&(at.thicknessMap=rt(c.thicknessMap)),c.anisotropyMap!==void 0&&(at.anisotropyMap=rt(c.anisotropyMap)),c.sheenColorMap!==void 0&&(at.sheenColorMap=rt(c.sheenColorMap)),c.sheenRoughnessMap!==void 0&&(at.sheenRoughnessMap=rt(c.sheenRoughnessMap)),at}setTextures(c){return this.textures=c,this}static createMaterialFromType(c){const j={ShadowMaterial:t7,SpriteMaterial:zE,RawShaderMaterial:i7,ShaderMaterial:b1,PointsMaterial:$E,MeshPhysicalMaterial:n7,MeshStandardMaterial:dy,MeshPhongMaterial:r7,MeshToonMaterial:s7,MeshNormalMaterial:o7,MeshLambertMaterial:a7,MeshDepthMaterial:HE,MeshDistanceMaterial:GE,MeshBasicMaterial:vu,MeshMatcapMaterial:l7,LineDashedMaterial:c7,LineBasicMaterial:E1,Material:Kl};return new j[c]}}class wy{static decodeText(c){if(typeof TextDecoder<"u")return new TextDecoder().decode(c);let j="";for(let rt=0,at=c.length;rt<at;rt++)j+=String.fromCharCode(c[rt]);try{return decodeURIComponent(escape(j))}catch{return j}}static extractUrlBase(c){const j=c.lastIndexOf("/");return j===-1?"./":c.slice(0,j+1)}static resolveURL(c,j){return typeof c!="string"||c===""?"":(/^https?:\/\//i.test(j)&&/^\//.test(c)&&(j=j.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(c)||/^data:.*,.*$/i.test(c)||/^blob:.*$/i.test(c)?c:j+c)}}class S7 extends Bo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(c){return super.copy(c),this.instanceCount=c.instanceCount,this}toJSON(){const c=super.toJSON();return c.instanceCount=this.instanceCount,c.isInstancedBufferGeometry=!0,c}}class T7 extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=new Ju(ut.manager);At.setPath(ut.path),At.setRequestHeader(ut.requestHeader),At.setWithCredentials(ut.withCredentials),At.load(c,function(wt){try{j(ut.parse(JSON.parse(wt)))}catch(Bt){at?at(Bt):console.error(Bt),ut.manager.itemError(c)}},rt,at)}parse(c){const j={},rt={};function at(_i,sn){if(j[sn]!==void 0)return j[sn];const an=_i.interleavedBuffers[sn],en=ut(_i,an.buffer),xn=_c(an.type,en),wn=new M3(xn,an.stride);return wn.uuid=an.uuid,j[sn]=wn,wn}function ut(_i,sn){if(rt[sn]!==void 0)return rt[sn];const an=_i.arrayBuffers[sn],en=new Uint32Array(an).buffer;return rt[sn]=en,en}const At=c.isInstancedBufferGeometry?new S7:new Bo,wt=c.data.index;if(wt!==void 0){const _i=_c(wt.type,wt.array);At.setIndex(new a0(_i,1))}const Bt=c.data.attributes;for(const _i in Bt){const sn=Bt[_i];let hn;if(sn.isInterleavedBufferAttribute){const an=at(c.data,sn.data);hn=new J2(an,sn.itemSize,sn.offset,sn.normalized)}else{const an=_c(sn.type,sn.array),en=sn.isInstancedBufferAttribute?Jp:a0;hn=new en(an,sn.itemSize,sn.normalized)}sn.name!==void 0&&(hn.name=sn.name),sn.usage!==void 0&&hn.setUsage(sn.usage),At.setAttribute(_i,hn)}const Ft=c.data.morphAttributes;if(Ft)for(const _i in Ft){const sn=Ft[_i],hn=[];for(let an=0,en=sn.length;an<en;an++){const xn=sn[an];let wn;if(xn.isInterleavedBufferAttribute){const En=at(c.data,xn.data);wn=new J2(En,xn.itemSize,xn.offset,xn.normalized)}else{const En=_c(xn.type,xn.array);wn=new a0(En,xn.itemSize,xn.normalized)}xn.name!==void 0&&(wn.name=xn.name),hn.push(wn)}At.morphAttributes[_i]=hn}c.data.morphTargetsRelative&&(At.morphTargetsRelative=!0);const qt=c.data.groups||c.data.drawcalls||c.data.offsets;if(qt!==void 0)for(let _i=0,sn=qt.length;_i!==sn;++_i){const hn=qt[_i];At.addGroup(hn.start,hn.count,hn.materialIndex)}const Jt=c.data.boundingSphere;if(Jt!==void 0){const _i=new kn;Jt.center!==void 0&&_i.fromArray(Jt.center),At.boundingSphere=new ba(_i,Jt.radius)}return c.name&&(At.name=c.name),c.userData&&(At.userData=c.userData),At}}class TC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=this.path===""?wy.extractUrlBase(c):this.path;this.resourcePath=this.resourcePath||At;const wt=new Ju(this.manager);wt.setPath(this.path),wt.setRequestHeader(this.requestHeader),wt.setWithCredentials(this.withCredentials),wt.load(c,function(Bt){let Ft=null;try{Ft=JSON.parse(Bt)}catch(qt){at!==void 0&&at(qt),console.error("THREE:ObjectLoader: Can't parse "+c+".",qt.message);return}const Vt=Ft.metadata;if(Vt===void 0||Vt.type===void 0||Vt.type.toLowerCase()==="geometry"){at!==void 0&&at(new Error("THREE.ObjectLoader: Can't load "+c)),console.error("THREE.ObjectLoader: Can't load "+c);return}ut.parse(Ft,j)},rt,at)}async loadAsync(c,j){const rt=this,at=this.path===""?wy.extractUrlBase(c):this.path;this.resourcePath=this.resourcePath||at;const ut=new Ju(this.manager);ut.setPath(this.path),ut.setRequestHeader(this.requestHeader),ut.setWithCredentials(this.withCredentials);const At=await ut.loadAsync(c,j),wt=JSON.parse(At),Bt=wt.metadata;if(Bt===void 0||Bt.type===void 0||Bt.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+c);return await rt.parseAsync(wt)}parse(c,j){const rt=this.parseAnimations(c.animations),at=this.parseShapes(c.shapes),ut=this.parseGeometries(c.geometries,at),At=this.parseImages(c.images,function(){j!==void 0&&j(Ft)}),wt=this.parseTextures(c.textures,At),Bt=this.parseMaterials(c.materials,wt),Ft=this.parseObject(c.object,ut,Bt,wt,rt),Vt=this.parseSkeletons(c.skeletons,Ft);if(this.bindSkeletons(Ft,Vt),j!==void 0){let qt=!1;for(const Jt in At)if(At[Jt].data instanceof HTMLImageElement){qt=!0;break}qt===!1&&j(Ft)}return Ft}async parseAsync(c){const j=this.parseAnimations(c.animations),rt=this.parseShapes(c.shapes),at=this.parseGeometries(c.geometries,rt),ut=await this.parseImagesAsync(c.images),At=this.parseTextures(c.textures,ut),wt=this.parseMaterials(c.materials,At),Bt=this.parseObject(c.object,at,wt,At,j),Ft=this.parseSkeletons(c.skeletons,Bt);return this.bindSkeletons(Bt,Ft),Bt}parseShapes(c){const j={};if(c!==void 0)for(let rt=0,at=c.length;rt<at;rt++){const ut=new $2().fromJSON(c[rt]);j[ut.uuid]=ut}return j}parseSkeletons(c,j){const rt={},at={};if(j.traverse(function(ut){ut.isBone&&(at[ut.uuid]=ut)}),c!==void 0)for(let ut=0,At=c.length;ut<At;ut++){const wt=new L3().fromJSON(c[ut],at);rt[wt.uuid]=wt}return rt}parseGeometries(c,j){const rt={};if(c!==void 0){const ut=new T7;for(let At=0,wt=c.length;At<wt;At++){let Bt;const Ft=c[At];switch(Ft.type){case"BufferGeometry":case"InstancedBufferGeometry":Bt=ut.parse(Ft);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var at=new THREE.LegacyJSONLoader;Bt=at.parse(Ft,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:Ft.type in e7?Bt=e7[Ft.type].fromJSON(Ft,j):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${Ft.type}"`)}Bt.uuid=Ft.uuid,Ft.name!==void 0&&(Bt.name=Ft.name),Ft.userData!==void 0&&(Bt.userData=Ft.userData),rt[Ft.uuid]=Bt}}return rt}parseMaterials(c,j){const rt={},at={};if(c!==void 0){const ut=new uv;ut.setTextures(j);for(let At=0,wt=c.length;At<wt;At++){const Bt=c[At];rt[Bt.uuid]===void 0&&(rt[Bt.uuid]=ut.parse(Bt)),at[Bt.uuid]=rt[Bt.uuid]}}return at}parseAnimations(c){const j={};if(c!==void 0)for(let rt=0;rt<c.length;rt++){const at=c[rt],ut=Im.parse(at);j[ut.uuid]=ut}return j}parseImages(c,j){const rt=this,at={};let ut;function At(Bt){return rt.manager.itemStart(Bt),ut.load(Bt,function(){rt.manager.itemEnd(Bt)},void 0,function(){rt.manager.itemError(Bt),rt.manager.itemEnd(Bt)})}function wt(Bt){if(typeof Bt=="string"){const Ft=Bt,Vt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ft)?Ft:rt.resourcePath+Ft;return At(Vt)}else return Bt.data?{data:_c(Bt.type,Bt.data),width:Bt.width,height:Bt.height}:null}if(c!==void 0&&c.length>0){const Bt=new vy(j);ut=new Bm(Bt),ut.setCrossOrigin(this.crossOrigin);for(let Ft=0,Vt=c.length;Ft<Vt;Ft++){const qt=c[Ft],Jt=qt.url;if(Array.isArray(Jt)){const _i=[];for(let sn=0,hn=Jt.length;sn<hn;sn++){const an=Jt[sn],en=wt(an);en!==null&&(en instanceof HTMLImageElement?_i.push(en):_i.push(new E2(en.data,en.width,en.height)))}at[qt.uuid]=new R0(_i)}else{const _i=wt(qt.url);at[qt.uuid]=new R0(_i)}}}return at}async parseImagesAsync(c){const j=this,rt={};let at;async function ut(At){if(typeof At=="string"){const wt=At,Bt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(wt)?wt:j.resourcePath+wt;return await at.loadAsync(Bt)}else return At.data?{data:_c(At.type,At.data),width:At.width,height:At.height}:null}if(c!==void 0&&c.length>0){at=new Bm(this.manager),at.setCrossOrigin(this.crossOrigin);for(let At=0,wt=c.length;At<wt;At++){const Bt=c[At],Ft=Bt.url;if(Array.isArray(Ft)){const Vt=[];for(let qt=0,Jt=Ft.length;qt<Jt;qt++){const _i=Ft[qt],sn=await ut(_i);sn!==null&&(sn instanceof HTMLImageElement?Vt.push(sn):Vt.push(new E2(sn.data,sn.width,sn.height)))}rt[Bt.uuid]=new R0(Vt)}else{const Vt=await ut(Bt.url);rt[Bt.uuid]=new R0(Vt)}}}return rt}parseTextures(c,j){function rt(ut,At){return typeof ut=="number"?ut:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ut),At[ut])}const at={};if(c!==void 0)for(let ut=0,At=c.length;ut<At;ut++){const wt=c[ut];wt.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',wt.uuid),j[wt.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",wt.image);const Bt=j[wt.image],Ft=Bt.data;let Vt;Array.isArray(Ft)?(Vt=new H2,Ft.length===6&&(Vt.needsUpdate=!0)):(Ft&&Ft.data?Vt=new E2:Vt=new C0,Ft&&(Vt.needsUpdate=!0)),Vt.source=Bt,Vt.uuid=wt.uuid,wt.name!==void 0&&(Vt.name=wt.name),wt.mapping!==void 0&&(Vt.mapping=rt(wt.mapping,RC)),wt.channel!==void 0&&(Vt.channel=wt.channel),wt.offset!==void 0&&Vt.offset.fromArray(wt.offset),wt.repeat!==void 0&&Vt.repeat.fromArray(wt.repeat),wt.center!==void 0&&Vt.center.fromArray(wt.center),wt.rotation!==void 0&&(Vt.rotation=wt.rotation),wt.wrap!==void 0&&(Vt.wrapS=rt(wt.wrap[0],R7),Vt.wrapT=rt(wt.wrap[1],R7)),wt.format!==void 0&&(Vt.format=wt.format),wt.internalFormat!==void 0&&(Vt.internalFormat=wt.internalFormat),wt.type!==void 0&&(Vt.type=wt.type),wt.colorSpace!==void 0&&(Vt.colorSpace=wt.colorSpace),wt.minFilter!==void 0&&(Vt.minFilter=rt(wt.minFilter,I7)),wt.magFilter!==void 0&&(Vt.magFilter=rt(wt.magFilter,I7)),wt.anisotropy!==void 0&&(Vt.anisotropy=wt.anisotropy),wt.flipY!==void 0&&(Vt.flipY=wt.flipY),wt.generateMipmaps!==void 0&&(Vt.generateMipmaps=wt.generateMipmaps),wt.premultiplyAlpha!==void 0&&(Vt.premultiplyAlpha=wt.premultiplyAlpha),wt.unpackAlignment!==void 0&&(Vt.unpackAlignment=wt.unpackAlignment),wt.compareFunction!==void 0&&(Vt.compareFunction=wt.compareFunction),wt.userData!==void 0&&(Vt.userData=wt.userData),at[wt.uuid]=Vt}return at}parseObject(c,j,rt,at,ut){let At;function wt(Jt){return j[Jt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Jt),j[Jt]}function Bt(Jt){if(Jt!==void 0){if(Array.isArray(Jt)){const _i=[];for(let sn=0,hn=Jt.length;sn<hn;sn++){const an=Jt[sn];rt[an]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",an),_i.push(rt[an])}return _i}return rt[Jt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Jt),rt[Jt]}}function Ft(Jt){return at[Jt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Jt),at[Jt]}let Vt,qt;switch(c.type){case"Scene":At=new h4,c.background!==void 0&&(Number.isInteger(c.background)?At.background=new Os(c.background):At.background=Ft(c.background)),c.environment!==void 0&&(At.environment=Ft(c.environment)),c.fog!==void 0&&(c.fog.type==="Fog"?At.fog=new b3(c.fog.color,c.fog.near,c.fog.far):c.fog.type==="FogExp2"&&(At.fog=new x3(c.fog.color,c.fog.density)),c.fog.name!==""&&(At.fog.name=c.fog.name)),c.backgroundBlurriness!==void 0&&(At.backgroundBlurriness=c.backgroundBlurriness),c.backgroundIntensity!==void 0&&(At.backgroundIntensity=c.backgroundIntensity),c.backgroundRotation!==void 0&&At.backgroundRotation.fromArray(c.backgroundRotation),c.environmentIntensity!==void 0&&(At.environmentIntensity=c.environmentIntensity),c.environmentRotation!==void 0&&At.environmentRotation.fromArray(c.environmentRotation);break;case"PerspectiveCamera":At=new J0(c.fov,c.aspect,c.near,c.far),c.focus!==void 0&&(At.focus=c.focus),c.zoom!==void 0&&(At.zoom=c.zoom),c.filmGauge!==void 0&&(At.filmGauge=c.filmGauge),c.filmOffset!==void 0&&(At.filmOffset=c.filmOffset),c.view!==void 0&&(At.view=Object.assign({},c.view));break;case"OrthographicCamera":At=new Op(c.left,c.right,c.top,c.bottom,c.near,c.far),c.zoom!==void 0&&(At.zoom=c.zoom),c.view!==void 0&&(At.view=Object.assign({},c.view));break;case"AmbientLight":At=new _7(c.color,c.intensity);break;case"DirectionalLight":At=new C7(c.color,c.intensity);break;case"PointLight":At=new w7(c.color,c.intensity,c.distance,c.decay);break;case"RectAreaLight":At=new x7(c.color,c.intensity,c.width,c.height);break;case"SpotLight":At=new E7(c.color,c.intensity,c.distance,c.angle,c.penumbra,c.decay);break;case"HemisphereLight":At=new m7(c.color,c.groundColor,c.intensity);break;case"LightProbe":At=new M7().fromJSON(c);break;case"SkinnedMesh":Vt=wt(c.geometry),qt=Bt(c.material),At=new _4(Vt,qt),c.bindMode!==void 0&&(At.bindMode=c.bindMode),c.bindMatrix!==void 0&&At.bindMatrix.fromArray(c.bindMatrix),c.skeleton!==void 0&&(At.skeleton=c.skeleton);break;case"Mesh":Vt=wt(c.geometry),qt=Bt(c.material),At=new Al(Vt,qt);break;case"InstancedMesh":Vt=wt(c.geometry),qt=Bt(c.material);const Jt=c.count,_i=c.instanceMatrix,sn=c.instanceColor;At=new S4(Vt,qt,Jt),At.instanceMatrix=new Jp(new Float32Array(_i.array),16),sn!==void 0&&(At.instanceColor=new Jp(new Float32Array(sn.array),sn.itemSize));break;case"BatchedMesh":Vt=wt(c.geometry),qt=Bt(c.material),At=new I4(c.maxGeometryCount,c.maxVertexCount,c.maxIndexCount,qt),At.geometry=Vt,At.perObjectFrustumCulled=c.perObjectFrustumCulled,At.sortObjects=c.sortObjects,At._drawRanges=c.drawRanges,At._reservedRanges=c.reservedRanges,At._visibility=c.visibility,At._active=c.active,At._bounds=c.bounds.map(hn=>{const an=new H0;an.min.fromArray(hn.boxMin),an.max.fromArray(hn.boxMax);const en=new ba;return en.radius=hn.sphereRadius,en.center.fromArray(hn.sphereCenter),{boxInitialized:hn.boxInitialized,box:an,sphereInitialized:hn.sphereInitialized,sphere:en}}),At._maxGeometryCount=c.maxGeometryCount,At._maxVertexCount=c.maxVertexCount,At._maxIndexCount=c.maxIndexCount,At._geometryInitialized=c.geometryInitialized,At._geometryCount=c.geometryCount,At._matricesTexture=Ft(c.matricesTexture.uuid);break;case"LOD":At=new v4;break;case"Line":At=new w2(wt(c.geometry),Bt(c.material));break;case"LineLoop":At=new O4(wt(c.geometry),Bt(c.material));break;case"LineSegments":At=new bu(wt(c.geometry),Bt(c.material));break;case"PointCloud":case"Points":At=new k4(wt(c.geometry),Bt(c.material));break;case"Sprite":At=new A4(Bt(c.material));break;case"Group":At=new Y2;break;case"Bone":At=new YE;break;default:At=new s0}if(At.uuid=c.uuid,c.name!==void 0&&(At.name=c.name),c.matrix!==void 0?(At.matrix.fromArray(c.matrix),c.matrixAutoUpdate!==void 0&&(At.matrixAutoUpdate=c.matrixAutoUpdate),At.matrixAutoUpdate&&At.matrix.decompose(At.position,At.quaternion,At.scale)):(c.position!==void 0&&At.position.fromArray(c.position),c.rotation!==void 0&&At.rotation.fromArray(c.rotation),c.quaternion!==void 0&&At.quaternion.fromArray(c.quaternion),c.scale!==void 0&&At.scale.fromArray(c.scale)),c.up!==void 0&&At.up.fromArray(c.up),c.castShadow!==void 0&&(At.castShadow=c.castShadow),c.receiveShadow!==void 0&&(At.receiveShadow=c.receiveShadow),c.shadow&&(c.shadow.bias!==void 0&&(At.shadow.bias=c.shadow.bias),c.shadow.normalBias!==void 0&&(At.shadow.normalBias=c.shadow.normalBias),c.shadow.radius!==void 0&&(At.shadow.radius=c.shadow.radius),c.shadow.mapSize!==void 0&&At.shadow.mapSize.fromArray(c.shadow.mapSize),c.shadow.camera!==void 0&&(At.shadow.camera=this.parseObject(c.shadow.camera))),c.visible!==void 0&&(At.visible=c.visible),c.frustumCulled!==void 0&&(At.frustumCulled=c.frustumCulled),c.renderOrder!==void 0&&(At.renderOrder=c.renderOrder),c.userData!==void 0&&(At.userData=c.userData),c.layers!==void 0&&(At.layers.mask=c.layers),c.children!==void 0){const Jt=c.children;for(let _i=0;_i<Jt.length;_i++)At.add(this.parseObject(Jt[_i],j,rt,at,ut))}if(c.animations!==void 0){const Jt=c.animations;for(let _i=0;_i<Jt.length;_i++){const sn=Jt[_i];At.animations.push(ut[sn])}}if(c.type==="LOD"){c.autoUpdate!==void 0&&(At.autoUpdate=c.autoUpdate);const Jt=c.levels;for(let _i=0;_i<Jt.length;_i++){const sn=Jt[_i],hn=At.getObjectByProperty("uuid",sn.object);hn!==void 0&&At.addLevel(hn,sn.distance,sn.hysteresis)}}return At}bindSkeletons(c,j){Object.keys(j).length!==0&&c.traverse(function(rt){if(rt.isSkinnedMesh===!0&&rt.skeleton!==void 0){const at=j[rt.skeleton];at===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",rt.skeleton):rt.bind(at,rt.bindMatrix)}})}}const RC={UVMapping:Gn,CubeReflectionMapping:un,CubeRefractionMapping:Wt,EquirectangularReflectionMapping:jt,EquirectangularRefractionMapping:yn,CubeUVReflectionMapping:Rn},R7={RepeatWrapping:Wn,ClampToEdgeWrapping:rr,MirroredRepeatWrapping:ns},I7={NearestFilter:ps,NearestMipmapNearestFilter:os,NearestMipmapLinearFilter:Cs,LinearFilter:to,LinearMipmapNearestFilter:Cr,LinearMipmapLinearFilter:o0};class IC extends T1{constructor(c){super(c),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(c){return this.options=c,this}load(c,j,rt,at){c===void 0&&(c=""),this.path!==void 0&&(c=this.path+c),c=this.manager.resolveURL(c);const ut=this,At=Yu.get(c);if(At!==void 0){if(ut.manager.itemStart(c),At.then){At.then(Ft=>{j&&j(Ft),ut.manager.itemEnd(c)}).catch(Ft=>{at&&at(Ft)});return}return setTimeout(function(){j&&j(At),ut.manager.itemEnd(c)},0),At}const wt={};wt.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",wt.headers=this.requestHeader;const Bt=fetch(c,wt).then(function(Ft){return Ft.blob()}).then(function(Ft){return createImageBitmap(Ft,Object.assign(ut.options,{colorSpaceConversion:"none"}))}).then(function(Ft){return Yu.add(c,Ft),j&&j(Ft),ut.manager.itemEnd(c),Ft}).catch(function(Ft){at&&at(Ft),Yu.remove(c),ut.manager.itemError(c),ut.manager.itemEnd(c)});Yu.add(c,Bt),ut.manager.itemStart(c)}}let hv;class Cy{static getContext(){return hv===void 0&&(hv=new(window.AudioContext||window.webkitAudioContext)),hv}static setContext(c){hv=c}}class BC extends T1{constructor(c){super(c)}load(c,j,rt,at){const ut=this,At=new Ju(this.manager);At.setResponseType("arraybuffer"),At.setPath(this.path),At.setRequestHeader(this.requestHeader),At.setWithCredentials(this.withCredentials),At.load(c,function(Bt){try{const Ft=Bt.slice(0);Cy.getContext().decodeAudioData(Ft,function(qt){j(qt)}).catch(wt)}catch(Ft){wt(Ft)}},rt,at);function wt(Bt){at?at(Bt):console.error(Bt),ut.manager.itemError(c)}}}const B7=new Vs,L7=new Vs,ip=new Vs;class LC{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new J0,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new J0,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(c){const j=this._cache;if(j.focus!==c.focus||j.fov!==c.fov||j.aspect!==c.aspect*this.aspect||j.near!==c.near||j.far!==c.far||j.zoom!==c.zoom||j.eyeSep!==this.eyeSep){j.focus=c.focus,j.fov=c.fov,j.aspect=c.aspect*this.aspect,j.near=c.near,j.far=c.far,j.zoom=c.zoom,j.eyeSep=this.eyeSep,ip.copy(c.projectionMatrix);const at=j.eyeSep/2,ut=at*j.near/j.focus,At=j.near*Math.tan(j1*j.fov*.5)/j.zoom;let wt,Bt;L7.elements[12]=-at,B7.elements[12]=at,wt=-At*j.aspect+ut,Bt=At*j.aspect+ut,ip.elements[0]=2*j.near/(Bt-wt),ip.elements[8]=(Bt+wt)/(Bt-wt),this.cameraL.projectionMatrix.copy(ip),wt=-At*j.aspect-ut,Bt=At*j.aspect-ut,ip.elements[0]=2*j.near/(Bt-wt),ip.elements[8]=(Bt+wt)/(Bt-wt),this.cameraR.projectionMatrix.copy(ip)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(L7),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(B7)}}class D7{constructor(c=!0){this.autoStart=c,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=P7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let c=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const j=P7();c=(j-this.oldTime)/1e3,this.oldTime=j,this.elapsedTime+=c}return c}}function P7(){return(typeof performance>"u"?Date:performance).now()}const np=new kn,O7=new e0,DC=new kn,rp=new kn;class PC extends s0{constructor(){super(),this.type="AudioListener",this.context=Cy.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new D7}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(c){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=c,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(c){return this.gain.gain.setTargetAtTime(c,this.context.currentTime,.01),this}updateMatrixWorld(c){super.updateMatrixWorld(c);const j=this.context.listener,rt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(np,O7,DC),rp.set(0,0,-1).applyQuaternion(O7),j.positionX){const at=this.context.currentTime+this.timeDelta;j.positionX.linearRampToValueAtTime(np.x,at),j.positionY.linearRampToValueAtTime(np.y,at),j.positionZ.linearRampToValueAtTime(np.z,at),j.forwardX.linearRampToValueAtTime(rp.x,at),j.forwardY.linearRampToValueAtTime(rp.y,at),j.forwardZ.linearRampToValueAtTime(rp.z,at),j.upX.linearRampToValueAtTime(rt.x,at),j.upY.linearRampToValueAtTime(rt.y,at),j.upZ.linearRampToValueAtTime(rt.z,at)}else j.setPosition(np.x,np.y,np.z),j.setOrientation(rp.x,rp.y,rp.z,rt.x,rt.y,rt.z)}}class F7 extends s0{constructor(c){super(),this.type="Audio",this.listener=c,this.context=c.context,this.gain=this.context.createGain(),this.gain.connect(c.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(c){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=c,this.connect(),this}setMediaElementSource(c){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(c),this.connect(),this}setMediaStreamSource(c){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(c),this.connect(),this}setBuffer(c){return this.buffer=c,this.sourceType="buffer",this.autoplay&&this.play(),this}play(c=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+c;const j=this.context.createBufferSource();return j.buffer=this.buffer,j.loop=this.loop,j.loopStart=this.loopStart,j.loopEnd=this.loopEnd,j.onended=this.onEnded.bind(this),j.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=j,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let c=1,j=this.filters.length;c<j;c++)this.filters[c-1].connect(this.filters[c]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let c=1,j=this.filters.length;c<j;c++)this.filters[c-1].disconnect(this.filters[c]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(c){return c||(c=[]),this._connected===!0?(this.disconnect(),this.filters=c.slice(),this.connect()):this.filters=c.slice(),this}setDetune(c){return this.detune=c,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(c){return this.setFilters(c?[c]:[])}setPlaybackRate(c){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=c,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(c){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=c,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(c){return this.loopStart=c,this}setLoopEnd(c){return this.loopEnd=c,this}getVolume(){return this.gain.gain.value}setVolume(c){return this.gain.gain.setTargetAtTime(c,this.context.currentTime,.01),this}}const sp=new kn,k7=new e0,OC=new kn,op=new kn;class FC extends F7{constructor(c){super(c),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(c){return this.panner.refDistance=c,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(c){return this.panner.rolloffFactor=c,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(c){return this.panner.distanceModel=c,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(c){return this.panner.maxDistance=c,this}setDirectionalCone(c,j,rt){return this.panner.coneInnerAngle=c,this.panner.coneOuterAngle=j,this.panner.coneOuterGain=rt,this}updateMatrixWorld(c){if(super.updateMatrixWorld(c),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(sp,k7,OC),op.set(0,0,1).applyQuaternion(k7);const j=this.panner;if(j.positionX){const rt=this.context.currentTime+this.listener.timeDelta;j.positionX.linearRampToValueAtTime(sp.x,rt),j.positionY.linearRampToValueAtTime(sp.y,rt),j.positionZ.linearRampToValueAtTime(sp.z,rt),j.orientationX.linearRampToValueAtTime(op.x,rt),j.orientationY.linearRampToValueAtTime(op.y,rt),j.orientationZ.linearRampToValueAtTime(op.z,rt)}else j.setPosition(sp.x,sp.y,sp.z),j.setOrientation(op.x,op.y,op.z)}}class kC{constructor(c,j=2048){this.analyser=c.context.createAnalyser(),this.analyser.fftSize=j,this.data=new Uint8Array(this.analyser.frequencyBinCount),c.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let c=0;const j=this.getFrequencyData();for(let rt=0;rt<j.length;rt++)c+=j[rt];return c/j.length}}class N7{constructor(c,j,rt){this.binding=c,this.valueSize=rt;let at,ut,At;switch(j){case"quaternion":at=this._slerp,ut=this._slerpAdditive,At=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(rt*6),this._workIndex=5;break;case"string":case"bool":at=this._select,ut=this._select,At=this._setAdditiveIdentityOther,this.buffer=new Array(rt*5);break;default:at=this._lerp,ut=this._lerpAdditive,At=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(rt*5)}this._mixBufferRegion=at,this._mixBufferRegionAdditive=ut,this._setIdentity=At,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(c,j){const rt=this.buffer,at=this.valueSize,ut=c*at+at;let At=this.cumulativeWeight;if(At===0){for(let wt=0;wt!==at;++wt)rt[ut+wt]=rt[wt];At=j}else{At+=j;const wt=j/At;this._mixBufferRegion(rt,ut,0,wt,at)}this.cumulativeWeight=At}accumulateAdditive(c){const j=this.buffer,rt=this.valueSize,at=rt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(j,at,0,c,rt),this.cumulativeWeightAdditive+=c}apply(c){const j=this.valueSize,rt=this.buffer,at=c*j+j,ut=this.cumulativeWeight,At=this.cumulativeWeightAdditive,wt=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ut<1){const Bt=j*this._origIndex;this._mixBufferRegion(rt,at,Bt,1-ut,j)}At>0&&this._mixBufferRegionAdditive(rt,at,this._addIndex*j,1,j);for(let Bt=j,Ft=j+j;Bt!==Ft;++Bt)if(rt[Bt]!==rt[Bt+j]){wt.setValue(rt,at);break}}saveOriginalState(){const c=this.binding,j=this.buffer,rt=this.valueSize,at=rt*this._origIndex;c.getValue(j,at);for(let ut=rt,At=at;ut!==At;++ut)j[ut]=j[at+ut%rt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const c=this.valueSize*3;this.binding.setValue(this.buffer,c)}_setAdditiveIdentityNumeric(){const c=this._addIndex*this.valueSize,j=c+this.valueSize;for(let rt=c;rt<j;rt++)this.buffer[rt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const c=this._origIndex*this.valueSize,j=this._addIndex*this.valueSize;for(let rt=0;rt<this.valueSize;rt++)this.buffer[j+rt]=this.buffer[c+rt]}_select(c,j,rt,at,ut){if(at>=.5)for(let At=0;At!==ut;++At)c[j+At]=c[rt+At]}_slerp(c,j,rt,at){e0.slerpFlat(c,j,c,j,c,rt,at)}_slerpAdditive(c,j,rt,at,ut){const At=this._workIndex*ut;e0.multiplyQuaternionsFlat(c,At,c,j,c,rt),e0.slerpFlat(c,j,c,j,c,At,at)}_lerp(c,j,rt,at,ut){const At=1-at;for(let wt=0;wt!==ut;++wt){const Bt=j+wt;c[Bt]=c[Bt]*At+c[rt+wt]*at}}_lerpAdditive(c,j,rt,at,ut){for(let At=0;At!==ut;++At){const wt=j+At;c[wt]=c[wt]+c[rt+At]*at}}}const _y="\\[\\]\\.:\\/",NC=new RegExp("["+_y+"]","g"),xy="[^"+_y+"]",UC="[^"+_y.replace("\\.","")+"]",HC=/((?:WC+[\/:])*)/.source.replace("WC",xy),GC=/(WCOD+)?/.source.replace("WCOD",UC),QC=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xy),VC=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xy),zC=new RegExp("^"+HC+GC+QC+VC+"$"),WC=["material","materials","bones","map"];class KC{constructor(c,j,rt){const at=rt||l0.parseTrackName(j);this._targetGroup=c,this._bindings=c.subscribe_(j,at)}getValue(c,j){this.bind();const rt=this._targetGroup.nCachedObjects_,at=this._bindings[rt];at!==void 0&&at.getValue(c,j)}setValue(c,j){const rt=this._bindings;for(let at=this._targetGroup.nCachedObjects_,ut=rt.length;at!==ut;++at)rt[at].setValue(c,j)}bind(){const c=this._bindings;for(let j=this._targetGroup.nCachedObjects_,rt=c.length;j!==rt;++j)c[j].bind()}unbind(){const c=this._bindings;for(let j=this._targetGroup.nCachedObjects_,rt=c.length;j!==rt;++j)c[j].unbind()}}class l0{constructor(c,j,rt){this.path=j,this.parsedPath=rt||l0.parseTrackName(j),this.node=l0.findNode(c,this.parsedPath.nodeName),this.rootNode=c,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(c,j,rt){return c&&c.isAnimationObjectGroup?new l0.Composite(c,j,rt):new l0(c,j,rt)}static sanitizeNodeName(c){return c.replace(/\s/g,"_").replace(NC,"")}static parseTrackName(c){const j=zC.exec(c);if(j===null)throw new Error("PropertyBinding: Cannot parse trackName: "+c);const rt={nodeName:j[2],objectName:j[3],objectIndex:j[4],propertyName:j[5],propertyIndex:j[6]},at=rt.nodeName&&rt.nodeName.lastIndexOf(".");if(at!==void 0&&at!==-1){const ut=rt.nodeName.substring(at+1);WC.indexOf(ut)!==-1&&(rt.nodeName=rt.nodeName.substring(0,at),rt.objectName=ut)}if(rt.propertyName===null||rt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+c);return rt}static findNode(c,j){if(j===void 0||j===""||j==="."||j===-1||j===c.name||j===c.uuid)return c;if(c.skeleton){const rt=c.skeleton.getBoneByName(j);if(rt!==void 0)return rt}if(c.children){const rt=function(ut){for(let At=0;At<ut.length;At++){const wt=ut[At];if(wt.name===j||wt.uuid===j)return wt;const Bt=rt(wt.children);if(Bt)return Bt}return null},at=rt(c.children);if(at)return at}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(c,j){c[j]=this.targetObject[this.propertyName]}_getValue_array(c,j){const rt=this.resolvedProperty;for(let at=0,ut=rt.length;at!==ut;++at)c[j++]=rt[at]}_getValue_arrayElement(c,j){c[j]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(c,j){this.resolvedProperty.toArray(c,j)}_setValue_direct(c,j){this.targetObject[this.propertyName]=c[j]}_setValue_direct_setNeedsUpdate(c,j){this.targetObject[this.propertyName]=c[j],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(c,j){this.targetObject[this.propertyName]=c[j],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(c,j){const rt=this.resolvedProperty;for(let at=0,ut=rt.length;at!==ut;++at)rt[at]=c[j++]}_setValue_array_setNeedsUpdate(c,j){const rt=this.resolvedProperty;for(let at=0,ut=rt.length;at!==ut;++at)rt[at]=c[j++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(c,j){const rt=this.resolvedProperty;for(let at=0,ut=rt.length;at!==ut;++at)rt[at]=c[j++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(c,j){this.resolvedProperty[this.propertyIndex]=c[j]}_setValue_arrayElement_setNeedsUpdate(c,j){this.resolvedProperty[this.propertyIndex]=c[j],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(c,j){this.resolvedProperty[this.propertyIndex]=c[j],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(c,j){this.resolvedProperty.fromArray(c,j)}_setValue_fromArray_setNeedsUpdate(c,j){this.resolvedProperty.fromArray(c,j),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(c,j){this.resolvedProperty.fromArray(c,j),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(c,j){this.bind(),this.getValue(c,j)}_setValue_unbound(c,j){this.bind(),this.setValue(c,j)}bind(){let c=this.node;const j=this.parsedPath,rt=j.objectName,at=j.propertyName;let ut=j.propertyIndex;if(c||(c=l0.findNode(this.rootNode,j.nodeName),this.node=c),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!c){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(rt){let Ft=j.objectIndex;switch(rt){case"materials":if(!c.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!c.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}c=c.material.materials;break;case"bones":if(!c.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}c=c.skeleton.bones;for(let Vt=0;Vt<c.length;Vt++)if(c[Vt].name===Ft){Ft=Vt;break}break;case"map":if("map"in c){c=c.map;break}if(!c.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!c.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}c=c.material.map;break;default:if(c[rt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}c=c[rt]}if(Ft!==void 0){if(c[Ft]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,c);return}c=c[Ft]}}const At=c[at];if(At===void 0){const Ft=j.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Ft+"."+at+" but it wasn't found.",c);return}let wt=this.Versioning.None;this.targetObject=c,c.needsUpdate!==void 0?wt=this.Versioning.NeedsUpdate:c.matrixWorldNeedsUpdate!==void 0&&(wt=this.Versioning.MatrixWorldNeedsUpdate);let Bt=this.BindingType.Direct;if(ut!==void 0){if(at==="morphTargetInfluences"){if(!c.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!c.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}c.morphTargetDictionary[ut]!==void 0&&(ut=c.morphTargetDictionary[ut])}Bt=this.BindingType.ArrayElement,this.resolvedProperty=At,this.propertyIndex=ut}else At.fromArray!==void 0&&At.toArray!==void 0?(Bt=this.BindingType.HasFromToArray,this.resolvedProperty=At):Array.isArray(At)?(Bt=this.BindingType.EntireArray,this.resolvedProperty=At):this.propertyName=at;this.getValue=this.GetterByBindingType[Bt],this.setValue=this.SetterByBindingTypeAndVersioning[Bt][wt]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}l0.Composite=KC,l0.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},l0.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},l0.prototype.GetterByBindingType=[l0.prototype._getValue_direct,l0.prototype._getValue_array,l0.prototype._getValue_arrayElement,l0.prototype._getValue_toArray],l0.prototype.SetterByBindingTypeAndVersioning=[[l0.prototype._setValue_direct,l0.prototype._setValue_direct_setNeedsUpdate,l0.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[l0.prototype._setValue_array,l0.prototype._setValue_array_setNeedsUpdate,l0.prototype._setValue_array_setMatrixWorldNeedsUpdate],[l0.prototype._setValue_arrayElement,l0.prototype._setValue_arrayElement_setNeedsUpdate,l0.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[l0.prototype._setValue_fromArray,l0.prototype._setValue_fromArray_setNeedsUpdate,l0.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class XC{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Zl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const c={};this._indicesByUUID=c;for(let rt=0,at=arguments.length;rt!==at;++rt)c[arguments[rt].uuid]=rt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const j=this;this.stats={objects:{get total(){return j._objects.length},get inUse(){return this.total-j.nCachedObjects_}},get bindingsPerObject(){return j._bindings.length}}}add(){const c=this._objects,j=this._indicesByUUID,rt=this._paths,at=this._parsedPaths,ut=this._bindings,At=ut.length;let wt,Bt=c.length,Ft=this.nCachedObjects_;for(let Vt=0,qt=arguments.length;Vt!==qt;++Vt){const Jt=arguments[Vt],_i=Jt.uuid;let sn=j[_i];if(sn===void 0){sn=Bt++,j[_i]=sn,c.push(Jt);for(let hn=0,an=At;hn!==an;++hn)ut[hn].push(new l0(Jt,rt[hn],at[hn]))}else if(sn<Ft){wt=c[sn];const hn=--Ft,an=c[hn];j[an.uuid]=sn,c[sn]=an,j[_i]=hn,c[hn]=Jt;for(let en=0,xn=At;en!==xn;++en){const wn=ut[en],En=wn[hn];let er=wn[sn];wn[sn]=En,er===void 0&&(er=new l0(Jt,rt[en],at[en])),wn[hn]=er}}else c[sn]!==wt&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Ft}remove(){const c=this._objects,j=this._indicesByUUID,rt=this._bindings,at=rt.length;let ut=this.nCachedObjects_;for(let At=0,wt=arguments.length;At!==wt;++At){const Bt=arguments[At],Ft=Bt.uuid,Vt=j[Ft];if(Vt!==void 0&&Vt>=ut){const qt=ut++,Jt=c[qt];j[Jt.uuid]=Vt,c[Vt]=Jt,j[Ft]=qt,c[qt]=Bt;for(let _i=0,sn=at;_i!==sn;++_i){const hn=rt[_i],an=hn[qt],en=hn[Vt];hn[Vt]=an,hn[qt]=en}}}this.nCachedObjects_=ut}uncache(){const c=this._objects,j=this._indicesByUUID,rt=this._bindings,at=rt.length;let ut=this.nCachedObjects_,At=c.length;for(let wt=0,Bt=arguments.length;wt!==Bt;++wt){const Ft=arguments[wt],Vt=Ft.uuid,qt=j[Vt];if(qt!==void 0)if(delete j[Vt],qt<ut){const Jt=--ut,_i=c[Jt],sn=--At,hn=c[sn];j[_i.uuid]=qt,c[qt]=_i,j[hn.uuid]=Jt,c[Jt]=hn,c.pop();for(let an=0,en=at;an!==en;++an){const xn=rt[an],wn=xn[Jt],En=xn[sn];xn[qt]=wn,xn[Jt]=En,xn.pop()}}else{const Jt=--At,_i=c[Jt];Jt>0&&(j[_i.uuid]=qt),c[qt]=_i,c.pop();for(let sn=0,hn=at;sn!==hn;++sn){const an=rt[sn];an[qt]=an[Jt],an.pop()}}}this.nCachedObjects_=ut}subscribe_(c,j){const rt=this._bindingsIndicesByPath;let at=rt[c];const ut=this._bindings;if(at!==void 0)return ut[at];const At=this._paths,wt=this._parsedPaths,Bt=this._objects,Ft=Bt.length,Vt=this.nCachedObjects_,qt=new Array(Ft);at=ut.length,rt[c]=at,At.push(c),wt.push(j),ut.push(qt);for(let Jt=Vt,_i=Bt.length;Jt!==_i;++Jt){const sn=Bt[Jt];qt[Jt]=new l0(sn,c,j)}return qt}unsubscribe_(c){const j=this._bindingsIndicesByPath,rt=j[c];if(rt!==void 0){const at=this._paths,ut=this._parsedPaths,At=this._bindings,wt=At.length-1,Bt=At[wt],Ft=c[wt];j[Ft]=rt,At[rt]=Bt,At.pop(),ut[rt]=ut[wt],ut.pop(),at[rt]=at[wt],at.pop()}}}class U7{constructor(c,j,rt=null,at=j.blendMode){this._mixer=c,this._clip=j,this._localRoot=rt,this.blendMode=at;const ut=j.tracks,At=ut.length,wt=new Array(At),Bt={endingStart:W0,endingEnd:W0};for(let Ft=0;Ft!==At;++Ft){const Vt=ut[Ft].createInterpolant(null);wt[Ft]=Vt,Vt.settings=Bt}this._interpolantSettings=Bt,this._interpolants=wt,this._propertyBindings=new Array(At),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=w0,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(c){return this._startTime=c,this}setLoop(c,j){return this.loop=c,this.repetitions=j,this}setEffectiveWeight(c){return this.weight=c,this._effectiveWeight=this.enabled?c:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(c){return this._scheduleFading(c,0,1)}fadeOut(c){return this._scheduleFading(c,1,0)}crossFadeFrom(c,j,rt){if(c.fadeOut(j),this.fadeIn(j),rt){const at=this._clip.duration,ut=c._clip.duration,At=ut/at,wt=at/ut;c.warp(1,At,j),this.warp(wt,1,j)}return this}crossFadeTo(c,j,rt){return c.crossFadeFrom(this,j,rt)}stopFading(){const c=this._weightInterpolant;return c!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(c)),this}setEffectiveTimeScale(c){return this.timeScale=c,this._effectiveTimeScale=this.paused?0:c,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(c){return this.timeScale=this._clip.duration/c,this.stopWarping()}syncWith(c){return this.time=c.time,this.timeScale=c.timeScale,this.stopWarping()}halt(c){return this.warp(this._effectiveTimeScale,0,c)}warp(c,j,rt){const at=this._mixer,ut=at.time,At=this.timeScale;let wt=this._timeScaleInterpolant;wt===null&&(wt=at._lendControlInterpolant(),this._timeScaleInterpolant=wt);const Bt=wt.parameterPositions,Ft=wt.sampleValues;return Bt[0]=ut,Bt[1]=ut+rt,Ft[0]=c/At,Ft[1]=j/At,this}stopWarping(){const c=this._timeScaleInterpolant;return c!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(c)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(c,j,rt,at){if(!this.enabled){this._updateWeight(c);return}const ut=this._startTime;if(ut!==null){const Bt=(c-ut)*rt;Bt<0||rt===0?j=0:(this._startTime=null,j=rt*Bt)}j*=this._updateTimeScale(c);const At=this._updateTime(j),wt=this._updateWeight(c);if(wt>0){const Bt=this._interpolants,Ft=this._propertyBindings;switch(this.blendMode){case I1:for(let Vt=0,qt=Bt.length;Vt!==qt;++Vt)Bt[Vt].evaluate(At),Ft[Vt].accumulateAdditive(wt);break;case w1:default:for(let Vt=0,qt=Bt.length;Vt!==qt;++Vt)Bt[Vt].evaluate(At),Ft[Vt].accumulate(at,wt)}}}_updateWeight(c){let j=0;if(this.enabled){j=this.weight;const rt=this._weightInterpolant;if(rt!==null){const at=rt.evaluate(c)[0];j*=at,c>rt.parameterPositions[1]&&(this.stopFading(),at===0&&(this.enabled=!1))}}return this._effectiveWeight=j,j}_updateTimeScale(c){let j=0;if(!this.paused){j=this.timeScale;const rt=this._timeScaleInterpolant;if(rt!==null){const at=rt.evaluate(c)[0];j*=at,c>rt.parameterPositions[1]&&(this.stopWarping(),j===0?this.paused=!0:this.timeScale=j)}}return this._effectiveTimeScale=j,j}_updateTime(c){const j=this._clip.duration,rt=this.loop;let at=this.time+c,ut=this._loopCount;const At=rt===Y0;if(c===0)return ut===-1?at:At&&(ut&1)===1?j-at:at;if(rt===O0){ut===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(at>=j)at=j;else if(at<0)at=0;else{this.time=at;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=at,this._mixer.dispatchEvent({type:"finished",action:this,direction:c<0?-1:1})}}else{if(ut===-1&&(c>=0?(ut=0,this._setEndings(!0,this.repetitions===0,At)):this._setEndings(this.repetitions===0,!0,At)),at>=j||at<0){const wt=Math.floor(at/j);at-=j*wt,ut+=Math.abs(wt);const Bt=this.repetitions-ut;if(Bt<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,at=c>0?j:0,this.time=at,this._mixer.dispatchEvent({type:"finished",action:this,direction:c>0?1:-1});else{if(Bt===1){const Ft=c<0;this._setEndings(Ft,!Ft,At)}else this._setEndings(!1,!1,At);this._loopCount=ut,this.time=at,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:wt})}}else this.time=at;if(At&&(ut&1)===1)return j-at}return at}_setEndings(c,j,rt){const at=this._interpolantSettings;rt?(at.endingStart=Ml,at.endingEnd=Ml):(c?at.endingStart=this.zeroSlopeAtStart?Ml:W0:at.endingStart=h1,j?at.endingEnd=this.zeroSlopeAtEnd?Ml:W0:at.endingEnd=h1)}_scheduleFading(c,j,rt){const at=this._mixer,ut=at.time;let At=this._weightInterpolant;At===null&&(At=at._lendControlInterpolant(),this._weightInterpolant=At);const wt=At.parameterPositions,Bt=At.sampleValues;return wt[0]=ut,Bt[0]=j,wt[1]=ut+c,Bt[1]=rt,this}}const YC=new Float32Array(1);class qC extends Jl{constructor(c){super(),this._root=c,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(c,j){const rt=c._localRoot||this._root,at=c._clip.tracks,ut=at.length,At=c._propertyBindings,wt=c._interpolants,Bt=rt.uuid,Ft=this._bindingsByRootAndName;let Vt=Ft[Bt];Vt===void 0&&(Vt={},Ft[Bt]=Vt);for(let qt=0;qt!==ut;++qt){const Jt=at[qt],_i=Jt.name;let sn=Vt[_i];if(sn!==void 0)++sn.referenceCount,At[qt]=sn;else{if(sn=At[qt],sn!==void 0){sn._cacheIndex===null&&(++sn.referenceCount,this._addInactiveBinding(sn,Bt,_i));continue}const hn=j&&j._propertyBindings[qt].binding.parsedPath;sn=new N7(l0.create(rt,_i,hn),Jt.ValueTypeName,Jt.getValueSize()),++sn.referenceCount,this._addInactiveBinding(sn,Bt,_i),At[qt]=sn}wt[qt].resultBuffer=sn.buffer}}_activateAction(c){if(!this._isActiveAction(c)){if(c._cacheIndex===null){const rt=(c._localRoot||this._root).uuid,at=c._clip.uuid,ut=this._actionsByClip[at];this._bindAction(c,ut&&ut.knownActions[0]),this._addInactiveAction(c,at,rt)}const j=c._propertyBindings;for(let rt=0,at=j.length;rt!==at;++rt){const ut=j[rt];ut.useCount++===0&&(this._lendBinding(ut),ut.saveOriginalState())}this._lendAction(c)}}_deactivateAction(c){if(this._isActiveAction(c)){const j=c._propertyBindings;for(let rt=0,at=j.length;rt!==at;++rt){const ut=j[rt];--ut.useCount===0&&(ut.restoreOriginalState(),this._takeBackBinding(ut))}this._takeBackAction(c)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const c=this;this.stats={actions:{get total(){return c._actions.length},get inUse(){return c._nActiveActions}},bindings:{get total(){return c._bindings.length},get inUse(){return c._nActiveBindings}},controlInterpolants:{get total(){return c._controlInterpolants.length},get inUse(){return c._nActiveControlInterpolants}}}}_isActiveAction(c){const j=c._cacheIndex;return j!==null&&j<this._nActiveActions}_addInactiveAction(c,j,rt){const at=this._actions,ut=this._actionsByClip;let At=ut[j];if(At===void 0)At={knownActions:[c],actionByRoot:{}},c._byClipCacheIndex=0,ut[j]=At;else{const wt=At.knownActions;c._byClipCacheIndex=wt.length,wt.push(c)}c._cacheIndex=at.length,at.push(c),At.actionByRoot[rt]=c}_removeInactiveAction(c){const j=this._actions,rt=j[j.length-1],at=c._cacheIndex;rt._cacheIndex=at,j[at]=rt,j.pop(),c._cacheIndex=null;const ut=c._clip.uuid,At=this._actionsByClip,wt=At[ut],Bt=wt.knownActions,Ft=Bt[Bt.length-1],Vt=c._byClipCacheIndex;Ft._byClipCacheIndex=Vt,Bt[Vt]=Ft,Bt.pop(),c._byClipCacheIndex=null;const qt=wt.actionByRoot,Jt=(c._localRoot||this._root).uuid;delete qt[Jt],Bt.length===0&&delete At[ut],this._removeInactiveBindingsForAction(c)}_removeInactiveBindingsForAction(c){const j=c._propertyBindings;for(let rt=0,at=j.length;rt!==at;++rt){const ut=j[rt];--ut.referenceCount===0&&this._removeInactiveBinding(ut)}}_lendAction(c){const j=this._actions,rt=c._cacheIndex,at=this._nActiveActions++,ut=j[at];c._cacheIndex=at,j[at]=c,ut._cacheIndex=rt,j[rt]=ut}_takeBackAction(c){const j=this._actions,rt=c._cacheIndex,at=--this._nActiveActions,ut=j[at];c._cacheIndex=at,j[at]=c,ut._cacheIndex=rt,j[rt]=ut}_addInactiveBinding(c,j,rt){const at=this._bindingsByRootAndName,ut=this._bindings;let At=at[j];At===void 0&&(At={},at[j]=At),At[rt]=c,c._cacheIndex=ut.length,ut.push(c)}_removeInactiveBinding(c){const j=this._bindings,rt=c.binding,at=rt.rootNode.uuid,ut=rt.path,At=this._bindingsByRootAndName,wt=At[at],Bt=j[j.length-1],Ft=c._cacheIndex;Bt._cacheIndex=Ft,j[Ft]=Bt,j.pop(),delete wt[ut],Object.keys(wt).length===0&&delete At[at]}_lendBinding(c){const j=this._bindings,rt=c._cacheIndex,at=this._nActiveBindings++,ut=j[at];c._cacheIndex=at,j[at]=c,ut._cacheIndex=rt,j[rt]=ut}_takeBackBinding(c){const j=this._bindings,rt=c._cacheIndex,at=--this._nActiveBindings,ut=j[at];c._cacheIndex=at,j[at]=c,ut._cacheIndex=rt,j[rt]=ut}_lendControlInterpolant(){const c=this._controlInterpolants,j=this._nActiveControlInterpolants++;let rt=c[j];return rt===void 0&&(rt=new Ay(new Float32Array(2),new Float32Array(2),1,YC),rt.__cacheIndex=j,c[j]=rt),rt}_takeBackControlInterpolant(c){const j=this._controlInterpolants,rt=c.__cacheIndex,at=--this._nActiveControlInterpolants,ut=j[at];c.__cacheIndex=at,j[at]=c,ut.__cacheIndex=rt,j[rt]=ut}clipAction(c,j,rt){const at=j||this._root,ut=at.uuid;let At=typeof c=="string"?Im.findByName(at,c):c;const wt=At!==null?At.uuid:c,Bt=this._actionsByClip[wt];let Ft=null;if(rt===void 0&&(At!==null?rt=At.blendMode:rt=w1),Bt!==void 0){const qt=Bt.actionByRoot[ut];if(qt!==void 0&&qt.blendMode===rt)return qt;Ft=Bt.knownActions[0],At===null&&(At=Ft._clip)}if(At===null)return null;const Vt=new U7(this,At,j,rt);return this._bindAction(Vt,Ft),this._addInactiveAction(Vt,wt,ut),Vt}existingAction(c,j){const rt=j||this._root,at=rt.uuid,ut=typeof c=="string"?Im.findByName(rt,c):c,At=ut?ut.uuid:c,wt=this._actionsByClip[At];return wt!==void 0&&wt.actionByRoot[at]||null}stopAllAction(){const c=this._actions,j=this._nActiveActions;for(let rt=j-1;rt>=0;--rt)c[rt].stop();return this}update(c){c*=this.timeScale;const j=this._actions,rt=this._nActiveActions,at=this.time+=c,ut=Math.sign(c),At=this._accuIndex^=1;for(let Ft=0;Ft!==rt;++Ft)j[Ft]._update(at,c,ut,At);const wt=this._bindings,Bt=this._nActiveBindings;for(let Ft=0;Ft!==Bt;++Ft)wt[Ft].apply(At);return this}setTime(c){this.time=0;for(let j=0;j<this._actions.length;j++)this._actions[j].time=0;return this.update(c)}getRoot(){return this._root}uncacheClip(c){const j=this._actions,rt=c.uuid,at=this._actionsByClip,ut=at[rt];if(ut!==void 0){const At=ut.knownActions;for(let wt=0,Bt=At.length;wt!==Bt;++wt){const Ft=At[wt];this._deactivateAction(Ft);const Vt=Ft._cacheIndex,qt=j[j.length-1];Ft._cacheIndex=null,Ft._byClipCacheIndex=null,qt._cacheIndex=Vt,j[Vt]=qt,j.pop(),this._removeInactiveBindingsForAction(Ft)}delete at[rt]}}uncacheRoot(c){const j=c.uuid,rt=this._actionsByClip;for(const At in rt){const wt=rt[At].actionByRoot,Bt=wt[j];Bt!==void 0&&(this._deactivateAction(Bt),this._removeInactiveAction(Bt))}const at=this._bindingsByRootAndName,ut=at[j];if(ut!==void 0)for(const At in ut){const wt=ut[At];wt.restoreOriginalState(),this._removeInactiveBinding(wt)}}uncacheAction(c,j){const rt=this.existingAction(c,j);rt!==null&&(this._deactivateAction(rt),this._removeInactiveAction(rt))}}class by{constructor(c){this.value=c}clone(){return new by(this.value.clone===void 0?this.value:this.value.clone())}}let JC=0;class ZC extends Jl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:JC++}),this.name="",this.usage=Du,this.uniforms=[]}add(c){return this.uniforms.push(c),this}remove(c){const j=this.uniforms.indexOf(c);return j!==-1&&this.uniforms.splice(j,1),this}setName(c){return this.name=c,this}setUsage(c){return this.usage=c,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(c){this.name=c.name,this.usage=c.usage;const j=c.uniforms;this.uniforms.length=0;for(let rt=0,at=j.length;rt<at;rt++){const ut=Array.isArray(j[rt])?j[rt]:[j[rt]];for(let At=0;At<ut.length;At++)this.uniforms.push(ut[At].clone())}return this}clone(){return new this.constructor().copy(this)}}class $C extends M3{constructor(c,j,rt=1){super(c,j),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=rt}copy(c){return super.copy(c),this.meshPerAttribute=c.meshPerAttribute,this}clone(c){const j=super.clone(c);return j.meshPerAttribute=this.meshPerAttribute,j}toJSON(c){const j=super.toJSON(c);return j.isInstancedInterleavedBuffer=!0,j.meshPerAttribute=this.meshPerAttribute,j}}class jC{constructor(c,j,rt,at,ut){this.isGLBufferAttribute=!0,this.name="",this.buffer=c,this.type=j,this.itemSize=rt,this.elementSize=at,this.count=ut,this.version=0}set needsUpdate(c){c===!0&&this.version++}setBuffer(c){return this.buffer=c,this}setType(c,j){return this.type=c,this.elementSize=j,this}setItemSize(c){return this.itemSize=c,this}setCount(c){return this.count=c,this}}const H7=new Vs;class e_{constructor(c,j,rt=0,at=1/0){this.ray=new yl(c,j),this.near=rt,this.far=at,this.camera=null,this.layers=new O2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(c,j){this.ray.set(c,j)}setFromCamera(c,j){j.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(j.matrixWorld),this.ray.direction.set(c.x,c.y,.5).unproject(j).sub(this.ray.origin).normalize(),this.camera=j):j.isOrthographicCamera?(this.ray.origin.set(c.x,c.y,(j.near+j.far)/(j.near-j.far)).unproject(j),this.ray.direction.set(0,0,-1).transformDirection(j.matrixWorld),this.camera=j):console.error("THREE.Raycaster: Unsupported camera type: "+j.type)}setFromXRController(c){return H7.identity().extractRotation(c.matrixWorld),this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(H7),this}intersectObject(c,j=!0,rt=[]){return My(c,this,rt,j),rt.sort(G7),rt}intersectObjects(c,j=!0,rt=[]){for(let at=0,ut=c.length;at<ut;at++)My(c[at],this,rt,j);return rt.sort(G7),rt}}function G7(ht,c){return ht.distance-c.distance}function My(ht,c,j,rt){if(ht.layers.test(c.layers)&&ht.raycast(c,j),rt===!0){const at=ht.children;for(let ut=0,At=at.length;ut<At;ut++)My(at[ut],c,j,!0)}}class t_{constructor(c=1,j=0,rt=0){return this.radius=c,this.phi=j,this.theta=rt,this}set(c,j,rt){return this.radius=c,this.phi=j,this.theta=rt,this}copy(c){return this.radius=c.radius,this.phi=c.phi,this.theta=c.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(c){return this.setFromCartesianCoords(c.x,c.y,c.z)}setFromCartesianCoords(c,j,rt){return this.radius=Math.sqrt(c*c+j*j+rt*rt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(c,rt),this.phi=Math.acos(F0(j/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class i_{constructor(c=1,j=0,rt=0){return this.radius=c,this.theta=j,this.y=rt,this}set(c,j,rt){return this.radius=c,this.theta=j,this.y=rt,this}copy(c){return this.radius=c.radius,this.theta=c.theta,this.y=c.y,this}setFromVector3(c){return this.setFromCartesianCoords(c.x,c.y,c.z)}setFromCartesianCoords(c,j,rt){return this.radius=Math.sqrt(c*c+rt*rt),this.theta=Math.atan2(c,rt),this.y=j,this}clone(){return new this.constructor().copy(this)}}const Q7=new Wr;class n_{constructor(c=new Wr(1/0,1/0),j=new Wr(-1/0,-1/0)){this.isBox2=!0,this.min=c,this.max=j}set(c,j){return this.min.copy(c),this.max.copy(j),this}setFromPoints(c){this.makeEmpty();for(let j=0,rt=c.length;j<rt;j++)this.expandByPoint(c[j]);return this}setFromCenterAndSize(c,j){const rt=Q7.copy(j).multiplyScalar(.5);return this.min.copy(c).sub(rt),this.max.copy(c).add(rt),this}clone(){return new this.constructor().copy(this)}copy(c){return this.min.copy(c.min),this.max.copy(c.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(c){return this.isEmpty()?c.set(0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(c){return this.isEmpty()?c.set(0,0):c.subVectors(this.max,this.min)}expandByPoint(c){return this.min.min(c),this.max.max(c),this}expandByVector(c){return this.min.sub(c),this.max.add(c),this}expandByScalar(c){return this.min.addScalar(-c),this.max.addScalar(c),this}containsPoint(c){return!(c.x<this.min.x||c.x>this.max.x||c.y<this.min.y||c.y>this.max.y)}containsBox(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y}getParameter(c,j){return j.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(c){return!(c.max.x<this.min.x||c.min.x>this.max.x||c.max.y<this.min.y||c.min.y>this.max.y)}clampPoint(c,j){return j.copy(c).clamp(this.min,this.max)}distanceToPoint(c){return this.clampPoint(c,Q7).distanceTo(c)}intersect(c){return this.min.max(c.min),this.max.min(c.max),this.isEmpty()&&this.makeEmpty(),this}union(c){return this.min.min(c.min),this.max.max(c.max),this}translate(c){return this.min.add(c),this.max.add(c),this}equals(c){return c.min.equals(this.min)&&c.max.equals(this.max)}}const V7=new kn,dv=new kn;class r_{constructor(c=new kn,j=new kn){this.start=c,this.end=j}set(c,j){return this.start.copy(c),this.end.copy(j),this}copy(c){return this.start.copy(c.start),this.end.copy(c.end),this}getCenter(c){return c.addVectors(this.start,this.end).multiplyScalar(.5)}delta(c){return c.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(c,j){return this.delta(j).multiplyScalar(c).add(this.start)}closestPointToPointParameter(c,j){V7.subVectors(c,this.start),dv.subVectors(this.end,this.start);const rt=dv.dot(dv);let ut=dv.dot(V7)/rt;return j&&(ut=F0(ut,0,1)),ut}closestPointToPoint(c,j,rt){const at=this.closestPointToPointParameter(c,j);return this.delta(rt).multiplyScalar(at).add(this.start)}applyMatrix4(c){return this.start.applyMatrix4(c),this.end.applyMatrix4(c),this}equals(c){return c.start.equals(this.start)&&c.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const z7=new kn;class s_ extends s0{constructor(c,j){super(),this.light=c,this.matrixAutoUpdate=!1,this.color=j,this.type="SpotLightHelper";const rt=new Bo,at=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let At=0,wt=1,Bt=32;At<Bt;At++,wt++){const Ft=At/Bt*Math.PI*2,Vt=wt/Bt*Math.PI*2;at.push(Math.cos(Ft),Math.sin(Ft),1,Math.cos(Vt),Math.sin(Vt),1)}rt.setAttribute("position",new Qr(at,3));const ut=new E1({fog:!1,toneMapped:!1});this.cone=new bu(rt,ut),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const c=this.light.distance?this.light.distance:1e3,j=c*Math.tan(this.light.angle);this.cone.scale.set(j,j,c),z7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(z7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const x2=new kn,fv=new Vs,Sy=new Vs;class o_ extends bu{constructor(c){const j=W7(c),rt=new Bo,at=[],ut=[],At=new Os(0,0,1),wt=new Os(0,1,0);for(let Ft=0;Ft<j.length;Ft++){const Vt=j[Ft];Vt.parent&&Vt.parent.isBone&&(at.push(0,0,0),at.push(0,0,0),ut.push(At.r,At.g,At.b),ut.push(wt.r,wt.g,wt.b))}rt.setAttribute("position",new Qr(at,3)),rt.setAttribute("color",new Qr(ut,3));const Bt=new E1({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(rt,Bt),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=c,this.bones=j,this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(c){const j=this.bones,rt=this.geometry,at=rt.getAttribute("position");Sy.copy(this.root.matrixWorld).invert();for(let ut=0,At=0;ut<j.length;ut++){const wt=j[ut];wt.parent&&wt.parent.isBone&&(fv.multiplyMatrices(Sy,wt.matrixWorld),x2.setFromMatrixPosition(fv),at.setXYZ(At,x2.x,x2.y,x2.z),fv.multiplyMatrices(Sy,wt.parent.matrixWorld),x2.setFromMatrixPosition(fv),at.setXYZ(At+1,x2.x,x2.y,x2.z),At+=2)}rt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(c)}dispose(){this.geometry.dispose(),this.material.dispose()}}function W7(ht){const c=[];ht.isBone===!0&&c.push(ht);for(let j=0;j<ht.children.length;j++)c.push.apply(c,W7(ht.children[j]));return c}class a_ extends Al{constructor(c,j,rt){const at=new Mm(j,4,2),ut=new vu({wireframe:!0,fog:!1,toneMapped:!1});super(at,ut),this.light=c,this.color=rt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const l_=new kn,K7=new Os,X7=new Os;class c_ extends s0{constructor(c,j,rt){super(),this.light=c,this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=rt,this.type="HemisphereLightHelper";const at=new bm(j);at.rotateY(Math.PI*.5),this.material=new vu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ut=at.getAttribute("position"),At=new Float32Array(ut.count*3);at.setAttribute("color",new a0(At,3)),this.add(new Al(at,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const c=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const j=c.geometry.getAttribute("color");K7.copy(this.light.color),X7.copy(this.light.groundColor);for(let rt=0,at=j.count;rt<at;rt++){const ut=rt<at/2?K7:X7;j.setXYZ(rt,ut.r,ut.g,ut.b)}j.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),c.lookAt(l_.setFromMatrixPosition(this.light.matrixWorld).negate())}}class u_ extends bu{constructor(c=10,j=10,rt=4473924,at=8947848){rt=new Os(rt),at=new Os(at);const ut=j/2,At=c/j,wt=c/2,Bt=[],Ft=[];for(let Jt=0,_i=0,sn=-wt;Jt<=j;Jt++,sn+=At){Bt.push(-wt,0,sn,wt,0,sn),Bt.push(sn,0,-wt,sn,0,wt);const hn=Jt===ut?rt:at;hn.toArray(Ft,_i),_i+=3,hn.toArray(Ft,_i),_i+=3,hn.toArray(Ft,_i),_i+=3,hn.toArray(Ft,_i),_i+=3}const Vt=new Bo;Vt.setAttribute("position",new Qr(Bt,3)),Vt.setAttribute("color",new Qr(Ft,3));const qt=new E1({vertexColors:!0,toneMapped:!1});super(Vt,qt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class h_ extends bu{constructor(c=10,j=16,rt=8,at=64,ut=4473924,At=8947848){ut=new Os(ut),At=new Os(At);const wt=[],Bt=[];if(j>1)for(let qt=0;qt<j;qt++){const Jt=qt/j*(Math.PI*2),_i=Math.sin(Jt)*c,sn=Math.cos(Jt)*c;wt.push(0,0,0),wt.push(_i,0,sn);const hn=qt&1?ut:At;Bt.push(hn.r,hn.g,hn.b),Bt.push(hn.r,hn.g,hn.b)}for(let qt=0;qt<rt;qt++){const Jt=qt&1?ut:At,_i=c-c/rt*qt;for(let sn=0;sn<at;sn++){let hn=sn/at*(Math.PI*2),an=Math.sin(hn)*_i,en=Math.cos(hn)*_i;wt.push(an,0,en),Bt.push(Jt.r,Jt.g,Jt.b),hn=(sn+1)/at*(Math.PI*2),an=Math.sin(hn)*_i,en=Math.cos(hn)*_i,wt.push(an,0,en),Bt.push(Jt.r,Jt.g,Jt.b)}}const Ft=new Bo;Ft.setAttribute("position",new Qr(wt,3)),Ft.setAttribute("color",new Qr(Bt,3));const Vt=new E1({vertexColors:!0,toneMapped:!1});super(Ft,Vt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Y7=new kn,pv=new kn,q7=new kn;class d_ extends s0{constructor(c,j,rt){super(),this.light=c,this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=rt,this.type="DirectionalLightHelper",j===void 0&&(j=1);let at=new Bo;at.setAttribute("position",new Qr([-j,j,0,j,j,0,j,-j,0,-j,-j,0,-j,j,0],3));const ut=new E1({fog:!1,toneMapped:!1});this.lightPlane=new w2(at,ut),this.add(this.lightPlane),at=new Bo,at.setAttribute("position",new Qr([0,0,0,0,0,1],3)),this.targetLine=new w2(at,ut),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Y7.setFromMatrixPosition(this.light.matrixWorld),pv.setFromMatrixPosition(this.light.target.matrixWorld),q7.subVectors(pv,Y7),this.lightPlane.lookAt(pv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pv),this.targetLine.scale.z=q7.length()}}const Av=new kn,El=new Ip;class f_ extends bu{constructor(c){const j=new Bo,rt=new E1({color:16777215,vertexColors:!0,toneMapped:!1}),at=[],ut=[],At={};wt("n1","n2"),wt("n2","n4"),wt("n4","n3"),wt("n3","n1"),wt("f1","f2"),wt("f2","f4"),wt("f4","f3"),wt("f3","f1"),wt("n1","f1"),wt("n2","f2"),wt("n3","f3"),wt("n4","f4"),wt("p","n1"),wt("p","n2"),wt("p","n3"),wt("p","n4"),wt("u1","u2"),wt("u2","u3"),wt("u3","u1"),wt("c","t"),wt("p","c"),wt("cn1","cn2"),wt("cn3","cn4"),wt("cf1","cf2"),wt("cf3","cf4");function wt(sn,hn){Bt(sn),Bt(hn)}function Bt(sn){at.push(0,0,0),ut.push(0,0,0),At[sn]===void 0&&(At[sn]=[]),At[sn].push(at.length/3-1)}j.setAttribute("position",new Qr(at,3)),j.setAttribute("color",new Qr(ut,3)),super(j,rt),this.type="CameraHelper",this.camera=c,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=At,this.update();const Ft=new Os(16755200),Vt=new Os(16711680),qt=new Os(43775),Jt=new Os(16777215),_i=new Os(3355443);this.setColors(Ft,Vt,qt,Jt,_i)}setColors(c,j,rt,at,ut){const wt=this.geometry.getAttribute("color");wt.setXYZ(0,c.r,c.g,c.b),wt.setXYZ(1,c.r,c.g,c.b),wt.setXYZ(2,c.r,c.g,c.b),wt.setXYZ(3,c.r,c.g,c.b),wt.setXYZ(4,c.r,c.g,c.b),wt.setXYZ(5,c.r,c.g,c.b),wt.setXYZ(6,c.r,c.g,c.b),wt.setXYZ(7,c.r,c.g,c.b),wt.setXYZ(8,c.r,c.g,c.b),wt.setXYZ(9,c.r,c.g,c.b),wt.setXYZ(10,c.r,c.g,c.b),wt.setXYZ(11,c.r,c.g,c.b),wt.setXYZ(12,c.r,c.g,c.b),wt.setXYZ(13,c.r,c.g,c.b),wt.setXYZ(14,c.r,c.g,c.b),wt.setXYZ(15,c.r,c.g,c.b),wt.setXYZ(16,c.r,c.g,c.b),wt.setXYZ(17,c.r,c.g,c.b),wt.setXYZ(18,c.r,c.g,c.b),wt.setXYZ(19,c.r,c.g,c.b),wt.setXYZ(20,c.r,c.g,c.b),wt.setXYZ(21,c.r,c.g,c.b),wt.setXYZ(22,c.r,c.g,c.b),wt.setXYZ(23,c.r,c.g,c.b),wt.setXYZ(24,j.r,j.g,j.b),wt.setXYZ(25,j.r,j.g,j.b),wt.setXYZ(26,j.r,j.g,j.b),wt.setXYZ(27,j.r,j.g,j.b),wt.setXYZ(28,j.r,j.g,j.b),wt.setXYZ(29,j.r,j.g,j.b),wt.setXYZ(30,j.r,j.g,j.b),wt.setXYZ(31,j.r,j.g,j.b),wt.setXYZ(32,rt.r,rt.g,rt.b),wt.setXYZ(33,rt.r,rt.g,rt.b),wt.setXYZ(34,rt.r,rt.g,rt.b),wt.setXYZ(35,rt.r,rt.g,rt.b),wt.setXYZ(36,rt.r,rt.g,rt.b),wt.setXYZ(37,rt.r,rt.g,rt.b),wt.setXYZ(38,at.r,at.g,at.b),wt.setXYZ(39,at.r,at.g,at.b),wt.setXYZ(40,ut.r,ut.g,ut.b),wt.setXYZ(41,ut.r,ut.g,ut.b),wt.setXYZ(42,ut.r,ut.g,ut.b),wt.setXYZ(43,ut.r,ut.g,ut.b),wt.setXYZ(44,ut.r,ut.g,ut.b),wt.setXYZ(45,ut.r,ut.g,ut.b),wt.setXYZ(46,ut.r,ut.g,ut.b),wt.setXYZ(47,ut.r,ut.g,ut.b),wt.setXYZ(48,ut.r,ut.g,ut.b),wt.setXYZ(49,ut.r,ut.g,ut.b),wt.needsUpdate=!0}update(){const c=this.geometry,j=this.pointMap,rt=1,at=1;El.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),xl("c",j,c,El,0,0,-1),xl("t",j,c,El,0,0,1),xl("n1",j,c,El,-rt,-at,-1),xl("n2",j,c,El,rt,-at,-1),xl("n3",j,c,El,-rt,at,-1),xl("n4",j,c,El,rt,at,-1),xl("f1",j,c,El,-rt,-at,1),xl("f2",j,c,El,rt,-at,1),xl("f3",j,c,El,-rt,at,1),xl("f4",j,c,El,rt,at,1),xl("u1",j,c,El,rt*.7,at*1.1,-1),xl("u2",j,c,El,-rt*.7,at*1.1,-1),xl("u3",j,c,El,0,at*2,-1),xl("cf1",j,c,El,-rt,0,1),xl("cf2",j,c,El,rt,0,1),xl("cf3",j,c,El,0,-at,1),xl("cf4",j,c,El,0,at,1),xl("cn1",j,c,El,-rt,0,-1),xl("cn2",j,c,El,rt,0,-1),xl("cn3",j,c,El,0,-at,-1),xl("cn4",j,c,El,0,at,-1),c.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xl(ht,c,j,rt,at,ut,At){Av.set(at,ut,At).unproject(rt);const wt=c[ht];if(wt!==void 0){const Bt=j.getAttribute("position");for(let Ft=0,Vt=wt.length;Ft<Vt;Ft++)Bt.setXYZ(wt[Ft],Av.x,Av.y,Av.z)}}const mv=new H0;class p_ extends bu{constructor(c,j=16776960){const rt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),at=new Float32Array(8*3),ut=new Bo;ut.setIndex(new a0(rt,1)),ut.setAttribute("position",new a0(at,3)),super(ut,new E1({color:j,toneMapped:!1})),this.object=c,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(c){if(c!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&mv.setFromObject(this.object),mv.isEmpty())return;const j=mv.min,rt=mv.max,at=this.geometry.attributes.position,ut=at.array;ut[0]=rt.x,ut[1]=rt.y,ut[2]=rt.z,ut[3]=j.x,ut[4]=rt.y,ut[5]=rt.z,ut[6]=j.x,ut[7]=j.y,ut[8]=rt.z,ut[9]=rt.x,ut[10]=j.y,ut[11]=rt.z,ut[12]=rt.x,ut[13]=rt.y,ut[14]=j.z,ut[15]=j.x,ut[16]=rt.y,ut[17]=j.z,ut[18]=j.x,ut[19]=j.y,ut[20]=j.z,ut[21]=rt.x,ut[22]=j.y,ut[23]=j.z,at.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(c){return this.object=c,this.update(),this}copy(c,j){return super.copy(c,j),this.object=c.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A_ extends bu{constructor(c,j=16776960){const rt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),at=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ut=new Bo;ut.setIndex(new a0(rt,1)),ut.setAttribute("position",new Qr(at,3)),super(ut,new E1({color:j,toneMapped:!1})),this.box=c,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(c){const j=this.box;j.isEmpty()||(j.getCenter(this.position),j.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(c))}dispose(){this.geometry.dispose(),this.material.dispose()}}class m_ extends w2{constructor(c,j=1,rt=16776960){const at=rt,ut=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],At=new Bo;At.setAttribute("position",new Qr(ut,3)),At.computeBoundingSphere(),super(At,new E1({color:at,toneMapped:!1})),this.type="PlaneHelper",this.plane=c,this.size=j;const wt=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],Bt=new Bo;Bt.setAttribute("position",new Qr(wt,3)),Bt.computeBoundingSphere(),this.add(new Al(Bt,new vu({color:at,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(c){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(c)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const J7=new kn;let vv,Ty;class v_ extends s0{constructor(c=new kn(0,0,1),j=new kn(0,0,0),rt=1,at=16776960,ut=rt*.2,At=ut*.2){super(),this.type="ArrowHelper",vv===void 0&&(vv=new Bo,vv.setAttribute("position",new Qr([0,0,0,0,1,0],3)),Ty=new jp(0,.5,1,5,1),Ty.translate(0,-.5,0)),this.position.copy(j),this.line=new w2(vv,new E1({color:at,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Al(Ty,new vu({color:at,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(c),this.setLength(rt,ut,At)}setDirection(c){if(c.y>.99999)this.quaternion.set(0,0,0,1);else if(c.y<-.99999)this.quaternion.set(1,0,0,0);else{J7.set(c.z,0,-c.x).normalize();const j=Math.acos(c.y);this.quaternion.setFromAxisAngle(J7,j)}}setLength(c,j=c*.2,rt=j*.2){this.line.scale.set(1,Math.max(1e-4,c-j),1),this.line.updateMatrix(),this.cone.scale.set(rt,j,rt),this.cone.position.y=c,this.cone.updateMatrix()}setColor(c){this.line.material.color.set(c),this.cone.material.color.set(c)}copy(c){return super.copy(c,!1),this.line.copy(c.line),this.cone.copy(c.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class g_ extends bu{constructor(c=1){const j=[0,0,0,c,0,0,0,0,0,0,c,0,0,0,0,0,0,c],rt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],at=new Bo;at.setAttribute("position",new Qr(j,3)),at.setAttribute("color",new Qr(rt,3));const ut=new E1({vertexColors:!0,toneMapped:!1});super(at,ut),this.type="AxesHelper"}setColors(c,j,rt){const at=new Os,ut=this.geometry.attributes.color.array;return at.set(c),at.toArray(ut,0),at.toArray(ut,3),at.set(j),at.toArray(ut,6),at.toArray(ut,9),at.set(rt),at.toArray(ut,12),at.toArray(ut,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class E_{constructor(){this.type="ShapePath",this.color=new Os,this.subPaths=[],this.currentPath=null}moveTo(c,j){return this.currentPath=new ym,this.subPaths.push(this.currentPath),this.currentPath.moveTo(c,j),this}lineTo(c,j){return this.currentPath.lineTo(c,j),this}quadraticCurveTo(c,j,rt,at){return this.currentPath.quadraticCurveTo(c,j,rt,at),this}bezierCurveTo(c,j,rt,at,ut,At){return this.currentPath.bezierCurveTo(c,j,rt,at,ut,At),this}splineThru(c){return this.currentPath.splineThru(c),this}toShapes(c){function j(en){const xn=[];for(let wn=0,En=en.length;wn<En;wn++){const er=en[wn],Nn=new $2;Nn.curves=er.curves,xn.push(Nn)}return xn}function rt(en,xn){const wn=xn.length;let En=!1;for(let er=wn-1,Nn=0;Nn<wn;er=Nn++){let zn=xn[er],$n=xn[Nn],Ln=$n.x-zn.x,Sn=$n.y-zn.y;if(Math.abs(Sn)>Number.EPSILON){if(Sn<0&&(zn=xn[Nn],Ln=-Ln,$n=xn[er],Sn=-Sn),en.y<zn.y||en.y>$n.y)continue;if(en.y===zn.y){if(en.x===zn.x)return!0}else{const jn=Sn*(en.x-zn.x)-Ln*(en.y-zn.y);if(jn===0)return!0;if(jn<0)continue;En=!En}}else{if(en.y!==zn.y)continue;if($n.x<=en.x&&en.x<=zn.x||zn.x<=en.x&&en.x<=$n.x)return!0}}return En}const at=Mu.isClockWise,ut=this.subPaths;if(ut.length===0)return[];let At,wt,Bt;const Ft=[];if(ut.length===1)return wt=ut[0],Bt=new $2,Bt.curves=wt.curves,Ft.push(Bt),Ft;let Vt=!at(ut[0].getPoints());Vt=c?!Vt:Vt;const qt=[],Jt=[];let _i=[],sn=0,hn;Jt[sn]=void 0,_i[sn]=[];for(let en=0,xn=ut.length;en<xn;en++)wt=ut[en],hn=wt.getPoints(),At=at(hn),At=c?!At:At,At?(!Vt&&Jt[sn]&&sn++,Jt[sn]={s:new $2,p:hn},Jt[sn].s.curves=wt.curves,Vt&&sn++,_i[sn]=[]):_i[sn].push({h:wt,p:hn[0]});if(!Jt[0])return j(ut);if(Jt.length>1){let en=!1,xn=0;for(let wn=0,En=Jt.length;wn<En;wn++)qt[wn]=[];for(let wn=0,En=Jt.length;wn<En;wn++){const er=_i[wn];for(let Nn=0;Nn<er.length;Nn++){const zn=er[Nn];let $n=!0;for(let Ln=0;Ln<Jt.length;Ln++)rt(zn.p,Jt[Ln].p)&&(wn!==Ln&&xn++,$n?($n=!1,qt[Ln].push(zn)):en=!0);$n&&qt[wn].push(zn)}}xn>0&&en===!1&&(_i=qt)}let an;for(let en=0,xn=Jt.length;en<xn;en++){Bt=Jt[en].s,Ft.push(Bt),an=_i[en];for(let wn=0,En=an.length;wn<En;wn++)Bt.holes.push(an[wn].h)}return Ft}}class y_ extends r1{constructor(c=1,j=1,rt=1,at={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(c,j,{...at,count:rt}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:it}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=it)},"./node_modules/three/examples/jsm/libs/ktx-parse.module.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>Pl,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>oo,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>f0,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>Ho,KHR_DF_CHANNEL_RGBSDA_RED:()=>j0,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>L0,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>Xt,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>Ut,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>Mt,KHR_DF_MODEL_ASTC:()=>Dt,KHR_DF_MODEL_ETC1:()=>Ct,KHR_DF_MODEL_ETC1S:()=>Ht,KHR_DF_MODEL_ETC2:()=>xt,KHR_DF_MODEL_RGBSDA:()=>gt,KHR_DF_MODEL_UNSPECIFIED:()=>mt,KHR_DF_PRIMARIES_ACES:()=>go,KHR_DF_PRIMARIES_ACESCC:()=>ho,KHR_DF_PRIMARIES_ADOBERGB:()=>Pn,KHR_DF_PRIMARIES_BT2020:()=>Zs,KHR_DF_PRIMARIES_BT601_EBU:()=>ms,KHR_DF_PRIMARIES_BT601_SMPTE:()=>Rs,KHR_DF_PRIMARIES_BT709:()=>Yr,KHR_DF_PRIMARIES_CIEXYZ:()=>ao,KHR_DF_PRIMARIES_DISPLAYP3:()=>$o,KHR_DF_PRIMARIES_NTSC1953:()=>Ys,KHR_DF_PRIMARIES_PAL525:()=>xo,KHR_DF_PRIMARIES_UNSPECIFIED:()=>As,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>es,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>na,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>Mn,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>p0,KHR_DF_TRANSFER_ACESCC:()=>hr,KHR_DF_TRANSFER_ACESCCT:()=>Lr,KHR_DF_TRANSFER_ADOBERGB:()=>Tr,KHR_DF_TRANSFER_BT1886:()=>An,KHR_DF_TRANSFER_DCIP3:()=>In,KHR_DF_TRANSFER_HLG_EOTF:()=>Zt,KHR_DF_TRANSFER_HLG_OETF:()=>nn,KHR_DF_TRANSFER_ITU:()=>vn,KHR_DF_TRANSFER_LINEAR:()=>tn,KHR_DF_TRANSFER_NTSC:()=>fn,KHR_DF_TRANSFER_PAL625_EOTF:()=>Zn,KHR_DF_TRANSFER_PAL_OETF:()=>Vn,KHR_DF_TRANSFER_PQ_EOTF:()=>mn,KHR_DF_TRANSFER_PQ_OETF:()=>gn,KHR_DF_TRANSFER_SLOG:()=>Cn,KHR_DF_TRANSFER_SLOG2:()=>dn,KHR_DF_TRANSFER_SRGB:()=>on,KHR_DF_TRANSFER_ST240:()=>lr,KHR_DF_TRANSFER_UNSPECIFIED:()=>Qt,KHR_DF_VENDORID_KHRONOS:()=>Rt,KHR_DF_VERSION:()=>pt,KHR_SUPERCOMPRESSION_BASISLZ:()=>bt,KHR_SUPERCOMPRESSION_NONE:()=>dt,KHR_SUPERCOMPRESSION_ZLIB:()=>Et,KHR_SUPERCOMPRESSION_ZSTD:()=>Tt,KTX2Container:()=>tu,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>yn,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>Ks,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>Ss,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>kr,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>Ns,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>is,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>yr,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>Nr,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>Rr,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>L2,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>Fu,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>_d,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>F0,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>Zl,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>K0,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>Jl,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>Pu,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>Ep,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>Ap,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>Sl,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>yp,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>hu,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>j1,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>UA,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>_A,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>I2,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>u0,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>Ou,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>xA,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>Ao,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>dp,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>hp,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>_h,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>pp,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>fp,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>B2,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>pA,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>Du,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>vp,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>mA,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>AA,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>_c,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>gA,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>vA,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>du,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>yA,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>EA,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>gp,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>CA,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>wA,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>eu,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>C1,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>R2,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>J1,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>RA,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>DA,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Un,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>jt,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>un,VK_FORMAT_B8G8R8A8_SINT:()=>Xn,VK_FORMAT_B8G8R8A8_SNORM:()=>Y1,VK_FORMAT_B8G8R8A8_SRGB:()=>cr,VK_FORMAT_B8G8R8A8_UINT:()=>Bn,VK_FORMAT_B8G8R8A8_UNORM:()=>Tu,VK_FORMAT_B8G8R8_SINT:()=>R1,VK_FORMAT_B8G8R8_SNORM:()=>ga,VK_FORMAT_B8G8R8_SRGB:()=>Ql,VK_FORMAT_B8G8R8_UINT:()=>Yl,VK_FORMAT_B8G8R8_UNORM:()=>u1,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>g0,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>Iu,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>Ru,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>ju,VK_FORMAT_BC2_SRGB_BLOCK:()=>Lu,VK_FORMAT_BC2_UNORM_BLOCK:()=>Bu,VK_FORMAT_BC3_SRGB_BLOCK:()=>$1,VK_FORMAT_BC3_UNORM_BLOCK:()=>iA,VK_FORMAT_BC4_SNORM_BLOCK:()=>rA,VK_FORMAT_BC4_UNORM_BLOCK:()=>nA,VK_FORMAT_BC5_SNORM_BLOCK:()=>oA,VK_FORMAT_BC5_UNORM_BLOCK:()=>sA,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>Pm,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>aA,VK_FORMAT_BC7_SRGB_BLOCK:()=>lA,VK_FORMAT_BC7_UNORM_BLOCK:()=>Om,VK_FORMAT_D16_UNORM:()=>F1,VK_FORMAT_D16_UNORM_S8_UINT:()=>Ol,VK_FORMAT_D24_UNORM_S8_UINT:()=>jo,VK_FORMAT_D32_SFLOAT:()=>Vl,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>B1,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>Z1,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>T2,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>up,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>cp,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>lp,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>dA,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>hA,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>S2,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>fA,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>uA,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>cA,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>TA,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>mp,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>Tl,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>PA,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>Co,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>OA,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>NA,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>FA,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>Wr,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>kA,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>SA,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>MA,VK_FORMAT_R10X6_UNORM_PACK16:()=>bA,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>LA,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>BA,VK_FORMAT_R12X4_UNORM_PACK16:()=>IA,VK_FORMAT_R16G16B16A16_SFLOAT:()=>Gr,VK_FORMAT_R16G16B16A16_SINT:()=>ar,VK_FORMAT_R16G16B16A16_SNORM:()=>On,VK_FORMAT_R16G16B16A16_UINT:()=>tr,VK_FORMAT_R16G16B16A16_UNORM:()=>_n,VK_FORMAT_R16G16B16_SFLOAT:()=>pn,VK_FORMAT_R16G16B16_SINT:()=>ln,VK_FORMAT_R16G16B16_SNORM:()=>Jo,VK_FORMAT_R16G16B16_UINT:()=>rn,VK_FORMAT_R16G16B16_UNORM:()=>T0,VK_FORMAT_R16G16_SFLOAT:()=>Mo,VK_FORMAT_R16G16_SINT:()=>Ts,VK_FORMAT_R16G16_SNORM:()=>_0,VK_FORMAT_R16G16_UINT:()=>V0,VK_FORMAT_R16G16_UNORM:()=>zo,VK_FORMAT_R16_SFLOAT:()=>Eo,VK_FORMAT_R16_SINT:()=>bo,VK_FORMAT_R16_SNORM:()=>lo,VK_FORMAT_R16_UINT:()=>A0,VK_FORMAT_R16_UNORM:()=>$s,VK_FORMAT_R32G32B32A32_SFLOAT:()=>c0,VK_FORMAT_R32G32B32A32_SINT:()=>n0,VK_FORMAT_R32G32B32A32_UINT:()=>so,VK_FORMAT_R32G32B32_SFLOAT:()=>co,VK_FORMAT_R32G32B32_SINT:()=>So,VK_FORMAT_R32G32B32_UINT:()=>io,VK_FORMAT_R32G32_SFLOAT:()=>zr,VK_FORMAT_R32G32_SINT:()=>Ls,VK_FORMAT_R32G32_UINT:()=>ts,VK_FORMAT_R32_SFLOAT:()=>Ir,VK_FORMAT_R32_SINT:()=>pr,VK_FORMAT_R32_UINT:()=>Ur,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>Dn,VK_FORMAT_R4G4_UNORM_PACK8:()=>Hn,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>Wt,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>Gn,VK_FORMAT_R64G64B64A64_SFLOAT:()=>q1,VK_FORMAT_R64G64B64A64_SINT:()=>I1,VK_FORMAT_R64G64B64A64_UINT:()=>w1,VK_FORMAT_R64G64B64_SFLOAT:()=>h1,VK_FORMAT_R64G64B64_SINT:()=>Ml,VK_FORMAT_R64G64B64_UINT:()=>W0,VK_FORMAT_R64G64_SFLOAT:()=>q0,VK_FORMAT_R64G64_SINT:()=>z0,VK_FORMAT_R64G64_UINT:()=>xa,VK_FORMAT_R64_SFLOAT:()=>Y0,VK_FORMAT_R64_SINT:()=>w0,VK_FORMAT_R64_UINT:()=>O0,VK_FORMAT_R8G8B8A8_SINT:()=>X1,VK_FORMAT_R8G8B8A8_SNORM:()=>Lo,VK_FORMAT_R8G8B8A8_SRGB:()=>y1,VK_FORMAT_R8G8B8A8_UINT:()=>_a,VK_FORMAT_R8G8B8A8_UNORM:()=>P0,VK_FORMAT_R8G8B8_SINT:()=>Q0,VK_FORMAT_R8G8B8_SNORM:()=>i0,VK_FORMAT_R8G8B8_SRGB:()=>D0,VK_FORMAT_R8G8B8_UINT:()=>o0,VK_FORMAT_R8G8B8_UNORM:()=>Cr,VK_FORMAT_R8G8_SINT:()=>U0,VK_FORMAT_R8G8_SNORM:()=>as,VK_FORMAT_R8G8_SRGB:()=>to,VK_FORMAT_R8G8_UINT:()=>Cs,VK_FORMAT_R8G8_UNORM:()=>os,VK_FORMAT_R8_SINT:()=>ns,VK_FORMAT_R8_SNORM:()=>Wn,VK_FORMAT_R8_SRGB:()=>ps,VK_FORMAT_R8_UINT:()=>rr,VK_FORMAT_R8_UNORM:()=>Rn,VK_FORMAT_S8_UINT:()=>N1,VK_FORMAT_UNDEFINED:()=>bn,VK_FORMAT_X8_D24_UNORM_PACK32:()=>k1,read:()=>r0,write:()=>t2});var it=vt("./node_modules/buffer/index.js").Buffer;const dt=0,bt=1,Tt=2,Et=3,Mt=0,Rt=0,pt=2,mt=0,gt=1,Ct=160,xt=161,Dt=162,Ht=163,Ut=0,Xt=1,Qt=0,tn=1,on=2,vn=3,fn=4,Cn=5,dn=6,An=7,nn=8,Zt=9,mn=10,gn=11,In=12,Vn=13,Zn=14,lr=15,hr=16,Lr=17,Tr=18,As=0,Yr=1,ms=2,Rs=3,Zs=4,ao=5,go=6,ho=7,Ys=8,xo=9,$o=10,Pn=11,j0=0,Ho=1,oo=2,L0=13,f0=14,Pl=15,na=128,p0=64,es=32,Mn=16,bn=0,Hn=1,Dn=2,Un=3,Gn=4,un=5,Wt=6,jt=7,yn=8,Rn=9,Wn=10,rr=13,ns=14,ps=15,os=16,as=17,Cs=20,U0=21,to=22,Cr=23,i0=24,o0=27,Q0=28,D0=29,u1=30,ga=31,Yl=34,R1=35,Ql=36,P0=37,Lo=38,_a=41,X1=42,y1=43,Tu=44,Y1=45,Bn=48,Xn=49,cr=50,Rr=58,yr=59,Nr=62,is=63,Ns=64,Ss=65,kr=68,Ks=69,$s=70,lo=71,A0=74,bo=75,Eo=76,zo=77,_0=78,V0=81,Ts=82,Mo=83,T0=84,Jo=85,rn=88,ln=89,pn=90,_n=91,On=92,tr=95,ar=96,Gr=97,Ur=98,pr=99,Ir=100,ts=101,Ls=102,zr=103,io=104,So=105,co=106,so=107,n0=108,c0=109,O0=110,w0=111,Y0=112,xa=113,z0=114,q0=115,W0=116,Ml=117,h1=118,w1=119,I1=120,q1=121,J1=122,Z1=123,F1=124,k1=125,Vl=126,N1=127,Ol=128,jo=129,B1=130,ju=131,Ru=132,Iu=133,g0=134,Bu=135,Lu=136,iA=137,$1=138,nA=139,rA=140,sA=141,oA=142,aA=143,Pm=144,Om=145,lA=146,cA=147,uA=148,hA=149,dA=150,fA=151,S2=152,lp=153,cp=154,up=155,T2=156,hp=157,dp=158,fp=159,pp=160,Du=161,pA=162,AA=163,mA=164,vA=165,gA=166,EA=167,yA=168,wA=169,CA=170,R2=171,C1=172,Pu=173,Jl=174,Sl=175,Ap=176,j1=177,hu=178,Zl=179,F0=180,I2=181,_A=182,xA=183,Ou=184,bA=1000156007,MA=1000156008,SA=1000156009,TA=1000156010,RA=1000156011,IA=1000156017,BA=1000156018,LA=1000156019,mp=1000156020,DA=1000156021,PA=1000054e3,OA=1000054001,FA=1000054002,kA=1000054003,Tl=1000054004,Co=1000054005,NA=1000054006,Wr=1000054007,Ao=1000066e3,_h=1000066001,B2=1000066002,vp=1000066003,_c=1000066004,du=1000066005,gp=1000066006,eu=1000066007,K0=1000066008,Ep=1000066009,yp=1000066010,_d=1000066011,UA=1000066012,u0=1000066013,Fu=100034e4,L2=1000340001;class tu{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class fu{constructor(yo,Zo,e0,kn){this._dataView=new DataView(yo.buffer,yo.byteOffset+Zo,e0),this._littleEndian=kn,this._offset=0}_nextUint8(){const yo=this._dataView.getUint8(this._offset);return this._offset+=1,yo}_nextUint16(){const yo=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,yo}_nextUint32(){const yo=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,yo}_nextUint64(){const yo=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,yo}_nextInt32(){const yo=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,yo}_skip(yo){return this._offset+=yo,this}_scan(yo,Zo=0){const e0=this._offset;let kn=0;for(;this._dataView.getUint8(this._offset)!==Zo&&kn<yo;)kn++,this._offset++;return kn<yo&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+e0,kn)}}const wp=new Uint8Array([0]),R0=[171,75,84,88,32,50,48,187,13,10,26,10];function e2(Us){return typeof TextEncoder<"u"?new TextEncoder().encode(Us):it.from(Us)}function Cp(Us){return typeof TextDecoder<"u"?new TextDecoder().decode(Us):it.from(Us).toString("utf8")}function C0(Us){let yo=0;for(const kn of Us)yo+=kn.byteLength;const Zo=new Uint8Array(yo);let e0=0;for(const kn of Us)Zo.set(new Uint8Array(kn),e0),e0+=kn.byteLength;return Zo}function r0(Us){const yo=new Uint8Array(Us.buffer,Us.byteOffset,R0.length);if(yo[0]!==R0[0]||yo[1]!==R0[1]||yo[2]!==R0[2]||yo[3]!==R0[3]||yo[4]!==R0[4]||yo[5]!==R0[5]||yo[6]!==R0[6]||yo[7]!==R0[7]||yo[8]!==R0[8]||yo[9]!==R0[9]||yo[10]!==R0[10]||yo[11]!==R0[11])throw new Error("Missing KTX 2.0 identifier.");const Zo=new tu,e0=17*Uint32Array.BYTES_PER_ELEMENT,kn=new fu(Us,R0.length,e0,!0);Zo.vkFormat=kn._nextUint32(),Zo.typeSize=kn._nextUint32(),Zo.pixelWidth=kn._nextUint32(),Zo.pixelHeight=kn._nextUint32(),Zo.pixelDepth=kn._nextUint32(),Zo.layerCount=kn._nextUint32(),Zo.faceCount=kn._nextUint32();const $l=kn._nextUint32();Zo.supercompressionScheme=kn._nextUint32();const I0=kn._nextUint32(),H0=kn._nextUint32(),Wo=kn._nextUint32(),zl=kn._nextUint32(),U1=kn._nextUint64(),s1=kn._nextUint64(),Rl=new fu(Us,R0.length+e0,3*$l*8,!0);for(let yl=0;yl<$l;yl++)Zo.levels.push({levelData:new Uint8Array(Us.buffer,Us.byteOffset+Rl._nextUint64(),Rl._nextUint64()),uncompressedByteLength:Rl._nextUint64()});const fo=new fu(Us,I0,H0,!0),wo={vendorId:fo._skip(4)._nextUint16(),descriptorType:fo._nextUint16(),versionNumber:fo._nextUint16(),descriptorBlockSize:fo._nextUint16(),colorModel:fo._nextUint8(),colorPrimaries:fo._nextUint8(),transferFunction:fo._nextUint8(),flags:fo._nextUint8(),texelBlockDimension:[fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8()],bytesPlane:[fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8()],samples:[]},Fl=(wo.descriptorBlockSize/4-6)/4;for(let yl=0;yl<Fl;yl++){const Vs={bitOffset:fo._nextUint16(),bitLength:fo._nextUint8(),channelType:fo._nextUint8(),samplePosition:[fo._nextUint8(),fo._nextUint8(),fo._nextUint8(),fo._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Vs.channelType?(Vs.sampleLower=fo._nextInt32(),Vs.sampleUpper=fo._nextInt32()):(Vs.sampleLower=fo._nextUint32(),Vs.sampleUpper=fo._nextUint32()),wo.samples[yl]=Vs}Zo.dataFormatDescriptor.length=0,Zo.dataFormatDescriptor.push(wo);const Il=new fu(Us,Wo,zl,!0);for(;Il._offset<zl;){const yl=Il._nextUint32(),Vs=Il._scan(yl),wl=Cp(Vs),x0=Il._scan(yl-Vs.byteLength);Zo.keyValue[wl]=wl.match(/^ktx/i)?Cp(x0):x0,Il._offset%4&&Il._skip(4-Il._offset%4)}if(s1<=0)return Zo;const t0=new fu(Us,U1,s1,!0),Do=t0._nextUint16(),_s=t0._nextUint16(),Po=t0._nextUint32(),e1=t0._nextUint32(),iu=t0._nextUint32(),nu=t0._nextUint32(),ku=[];for(let yl=0;yl<$l;yl++)ku.push({imageFlags:t0._nextUint32(),rgbSliceByteOffset:t0._nextUint32(),rgbSliceByteLength:t0._nextUint32(),alphaSliceByteOffset:t0._nextUint32(),alphaSliceByteLength:t0._nextUint32()});const ba=U1+t0._offset,_1=ba+Po,ru=_1+e1,Nu=ru+iu,H1=new Uint8Array(Us.buffer,Us.byteOffset+ba,Po),D2=new Uint8Array(Us.buffer,Us.byteOffset+_1,e1),i2=new Uint8Array(Us.buffer,Us.byteOffset+ru,iu),n2=new Uint8Array(Us.buffer,Us.byteOffset+Nu,nu);return Zo.globalData={endpointCount:Do,selectorCount:_s,imageDescs:ku,endpointsData:H1,selectorsData:D2,tablesData:i2,extendedData:n2},Zo}function pu(){return(pu=Object.assign||function(Us){for(var yo=1;yo<arguments.length;yo++){var Zo=arguments[yo];for(var e0 in Zo)Object.prototype.hasOwnProperty.call(Zo,e0)&&(Us[e0]=Zo[e0])}return Us}).apply(this,arguments)}const r1={keepWriter:!1};function t2(Us,yo={}){yo=pu({},r1,yo);let Zo=new ArrayBuffer(0);if(Us.globalData){const Do=new ArrayBuffer(20+5*Us.globalData.imageDescs.length*4),_s=new DataView(Do);_s.setUint16(0,Us.globalData.endpointCount,!0),_s.setUint16(2,Us.globalData.selectorCount,!0),_s.setUint32(4,Us.globalData.endpointsData.byteLength,!0),_s.setUint32(8,Us.globalData.selectorsData.byteLength,!0),_s.setUint32(12,Us.globalData.tablesData.byteLength,!0),_s.setUint32(16,Us.globalData.extendedData.byteLength,!0);for(let Po=0;Po<Us.globalData.imageDescs.length;Po++){const e1=Us.globalData.imageDescs[Po];_s.setUint32(20+5*Po*4+0,e1.imageFlags,!0),_s.setUint32(20+5*Po*4+4,e1.rgbSliceByteOffset,!0),_s.setUint32(20+5*Po*4+8,e1.rgbSliceByteLength,!0),_s.setUint32(20+5*Po*4+12,e1.alphaSliceByteOffset,!0),_s.setUint32(20+5*Po*4+16,e1.alphaSliceByteLength,!0)}Zo=C0([Do,Us.globalData.endpointsData,Us.globalData.selectorsData,Us.globalData.tablesData,Us.globalData.extendedData])}const e0=[];let kn=Us.keyValue;yo.keepWriter||(kn=pu({},Us.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const Do in kn){const _s=kn[Do],Po=e2(Do),e1=typeof _s=="string"?e2(_s):_s,iu=Po.byteLength+1+e1.byteLength+1,nu=iu%4?4-iu%4:0;e0.push(C0([new Uint32Array([iu]),Po,wp,e1,wp,new Uint8Array(nu).fill(0)]))}const $l=C0(e0);if(Us.dataFormatDescriptor.length!==1||Us.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const I0=Us.dataFormatDescriptor[0],H0=new ArrayBuffer(28+16*I0.samples.length),Wo=new DataView(H0),zl=24+16*I0.samples.length;if(Wo.setUint32(0,H0.byteLength,!0),Wo.setUint16(4,I0.vendorId,!0),Wo.setUint16(6,I0.descriptorType,!0),Wo.setUint16(8,I0.versionNumber,!0),Wo.setUint16(10,zl,!0),Wo.setUint8(12,I0.colorModel),Wo.setUint8(13,I0.colorPrimaries),Wo.setUint8(14,I0.transferFunction),Wo.setUint8(15,I0.flags),!Array.isArray(I0.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");Wo.setUint8(16,I0.texelBlockDimension[0]),Wo.setUint8(17,I0.texelBlockDimension[1]),Wo.setUint8(18,I0.texelBlockDimension[2]),Wo.setUint8(19,I0.texelBlockDimension[3]);for(let Do=0;Do<8;Do++)Wo.setUint8(20+Do,I0.bytesPlane[Do]);for(let Do=0;Do<I0.samples.length;Do++){const _s=I0.samples[Do],Po=28+16*Do;if(_s.channelID)throw new Error("channelID has been renamed to channelType.");Wo.setUint16(Po+0,_s.bitOffset,!0),Wo.setUint8(Po+2,_s.bitLength),Wo.setUint8(Po+3,_s.channelType),Wo.setUint8(Po+4,_s.samplePosition[0]),Wo.setUint8(Po+5,_s.samplePosition[1]),Wo.setUint8(Po+6,_s.samplePosition[2]),Wo.setUint8(Po+7,_s.samplePosition[3]),64&_s.channelType?(Wo.setInt32(Po+8,_s.sampleLower,!0),Wo.setInt32(Po+12,_s.sampleUpper,!0)):(Wo.setUint32(Po+8,_s.sampleLower,!0),Wo.setUint32(Po+12,_s.sampleUpper,!0))}const U1=R0.length+68+3*Us.levels.length*8,s1=U1+H0.byteLength;let Rl=Zo.byteLength>0?s1+$l.byteLength:0;Rl%8&&(Rl+=8-Rl%8);const fo=[],wo=new DataView(new ArrayBuffer(3*Us.levels.length*8));let Fl=(Rl||s1+$l.byteLength)+Zo.byteLength;for(let Do=0;Do<Us.levels.length;Do++){const _s=Us.levels[Do];fo.push(_s.levelData),wo.setBigUint64(24*Do+0,BigInt(Fl),!0),wo.setBigUint64(24*Do+8,BigInt(_s.levelData.byteLength),!0),wo.setBigUint64(24*Do+16,BigInt(_s.uncompressedByteLength),!0),Fl+=_s.levelData.byteLength}const Il=new ArrayBuffer(68),t0=new DataView(Il);return t0.setUint32(0,Us.vkFormat,!0),t0.setUint32(4,Us.typeSize,!0),t0.setUint32(8,Us.pixelWidth,!0),t0.setUint32(12,Us.pixelHeight,!0),t0.setUint32(16,Us.pixelDepth,!0),t0.setUint32(20,Us.layerCount,!0),t0.setUint32(24,Us.faceCount,!0),t0.setUint32(28,Us.levels.length,!0),t0.setUint32(32,Us.supercompressionScheme,!0),t0.setUint32(36,U1,!0),t0.setUint32(40,H0.byteLength,!0),t0.setUint32(44,s1,!0),t0.setUint32(48,$l.byteLength,!0),t0.setBigUint64(52,BigInt(Zo.byteLength>0?Rl:0),!0),t0.setBigUint64(60,BigInt(Zo.byteLength),!0),new Uint8Array(C0([new Uint8Array(R0).buffer,Il,wo.buffer,H0,$l,Rl>0?new ArrayBuffer(Rl-(s1+$l.byteLength)):new ArrayBuffer(0),Zo,...fo]))}},"./node_modules/three/examples/jsm/libs/zstddec.module.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{ZSTDDecoder:()=>Mt});var it=vt("./node_modules/buffer/index.js").Buffer;let dt,bt,Tt;const Et={env:{emscripten_notify_memory_growth:function(pt){Tt=new Uint8Array(bt.exports.memory.buffer)}}};class Mt{init(){return dt||(dt=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Rt).then(mt=>mt.arrayBuffer()).then(mt=>WebAssembly.instantiate(mt,Et)).then(this._init):WebAssembly.instantiate(it.from(Rt,"base64"),Et).then(this._init),dt)}_init(mt){bt=mt.instance,Et.env.emscripten_notify_memory_growth(0)}decode(mt,gt=0){if(!bt)throw new Error("ZSTDDecoder: Await .init() before decoding.");const Ct=mt.byteLength,xt=bt.exports.malloc(Ct);Tt.set(mt,xt),gt=gt||Number(bt.exports.ZSTD_findDecompressedSize(xt,Ct));const Dt=bt.exports.malloc(gt),Ht=bt.exports.ZSTD_decompress(Dt,gt,xt,Ct),Ut=Tt.slice(Dt,Dt+Ht);return bt.exports.free(xt),bt.exports.free(Dt),Ut}}const Rt="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/three/examples/jsm/lights/LightProbeGenerator.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{LightProbeGenerator:()=>dt});var it=vt("./node_modules/three/build/three.module.js");class dt{static fromCubeTexture(Et){let Mt=0;const Rt=new it.Vector3,pt=new it.Vector3,mt=new it.Color,gt=[0,0,0,0,0,0,0,0,0],Ct=new it.SphericalHarmonics3,xt=Ct.coefficients;for(let Ht=0;Ht<6;Ht++){const Ut=Et.image[Ht],Xt=Ut.width,Qt=Ut.height,tn=document.createElement("canvas");tn.width=Xt,tn.height=Qt;const on=tn.getContext("2d");on.drawImage(Ut,0,0,Xt,Qt);const vn=on.getImageData(0,0,Xt,Qt),fn=vn.data,Cn=vn.width,dn=2/Cn;for(let An=0,nn=fn.length;An<nn;An+=4){mt.setRGB(fn[An]/255,fn[An+1]/255,fn[An+2]/255),bt(mt,Et.colorSpace);const Zt=An/4,mn=-1+(Zt%Cn+.5)*dn,gn=1-(Math.floor(Zt/Cn)+.5)*dn;switch(Ht){case 0:Rt.set(-1,gn,-mn);break;case 1:Rt.set(1,gn,mn);break;case 2:Rt.set(-mn,1,-gn);break;case 3:Rt.set(-mn,-1,gn);break;case 4:Rt.set(-mn,gn,1);break;case 5:Rt.set(mn,gn,-1);break}const In=Rt.lengthSq(),Vn=4/(Math.sqrt(In)*In);Mt+=Vn,pt.copy(Rt).normalize(),it.SphericalHarmonics3.getBasisAt(pt,gt);for(let Zn=0;Zn<9;Zn++)xt[Zn].x+=gt[Zn]*mt.r*Vn,xt[Zn].y+=gt[Zn]*mt.g*Vn,xt[Zn].z+=gt[Zn]*mt.b*Vn}}const Dt=4*Math.PI/Mt;for(let Ht=0;Ht<9;Ht++)xt[Ht].x*=Dt,xt[Ht].y*=Dt,xt[Ht].z*=Dt;return new it.LightProbe(Ct)}static fromCubeRenderTarget(Et,Mt){let Rt=0;const pt=new it.Vector3,mt=new it.Vector3,gt=new it.Color,Ct=[0,0,0,0,0,0,0,0,0],xt=new it.SphericalHarmonics3,Dt=xt.coefficients,Ht=Mt.texture.type;for(let Xt=0;Xt<6;Xt++){const Qt=Mt.width;let tn;Ht===it.HalfFloatType?tn=new Uint16Array(Qt*Qt*4):tn=new Uint8Array(Qt*Qt*4),Et.readRenderTargetPixels(Mt,0,0,Qt,Qt,tn,Xt);const on=2/Qt;for(let vn=0,fn=tn.length;vn<fn;vn+=4){let Cn,dn,An;Ht===it.HalfFloatType?(Cn=it.DataUtils.fromHalfFloat(tn[vn]),dn=it.DataUtils.fromHalfFloat(tn[vn+1]),An=it.DataUtils.fromHalfFloat(tn[vn+2])):(Cn=tn[vn]/255,dn=tn[vn+1]/255,An=tn[vn+2]/255),gt.setRGB(Cn,dn,An),bt(gt,Mt.texture.colorSpace);const nn=vn/4,Zt=-1+(nn%Qt+.5)*on,mn=1-(Math.floor(nn/Qt)+.5)*on;switch(Xt){case 0:pt.set(1,mn,-Zt);break;case 1:pt.set(-1,mn,Zt);break;case 2:pt.set(Zt,1,-mn);break;case 3:pt.set(Zt,-1,mn);break;case 4:pt.set(Zt,mn,1);break;case 5:pt.set(-Zt,mn,-1);break}const gn=pt.lengthSq(),In=4/(Math.sqrt(gn)*gn);Rt+=In,mt.copy(pt).normalize(),it.SphericalHarmonics3.getBasisAt(mt,Ct);for(let Vn=0;Vn<9;Vn++)Dt[Vn].x+=Ct[Vn]*gt.r*In,Dt[Vn].y+=Ct[Vn]*gt.g*In,Dt[Vn].z+=Ct[Vn]*gt.b*In}}const Ut=4*Math.PI/Rt;for(let Xt=0;Xt<9;Xt++)Dt[Xt].x*=Ut,Dt[Xt].y*=Ut,Dt[Xt].z*=Ut;return new it.LightProbe(xt)}}function bt(Tt,Et){switch(Et){case it.SRGBColorSpace:Tt.convertSRGBToLinear();break;case it.LinearSRGBColorSpace:case it.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.");break}return Tt}},"./node_modules/three/examples/jsm/loaders/DRACOLoader.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{DRACOLoader:()=>bt});var it=vt("./node_modules/three/build/three.module.js");const dt=new WeakMap;class bt extends it.Loader{constructor(Mt){super(Mt),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(Mt){return this.decoderPath=Mt,this}setDecoderConfig(Mt){return this.decoderConfig=Mt,this}setWorkerLimit(Mt){return this.workerLimit=Mt,this}load(Mt,Rt,pt,mt){const gt=new it.FileLoader(this.manager);gt.setPath(this.path),gt.setResponseType("arraybuffer"),gt.setRequestHeader(this.requestHeader),gt.setWithCredentials(this.withCredentials),gt.load(Mt,Ct=>{this.parse(Ct,Rt,mt)},pt,mt)}parse(Mt,Rt,pt=()=>{}){this.decodeDracoFile(Mt,Rt,null,null,it.SRGBColorSpace).catch(pt)}decodeDracoFile(Mt,Rt,pt,mt,gt=it.LinearSRGBColorSpace,Ct=()=>{}){const xt={attributeIDs:pt||this.defaultAttributeIDs,attributeTypes:mt||this.defaultAttributeTypes,useUniqueIDs:!!pt,vertexColorSpace:gt};return this.decodeGeometry(Mt,xt).then(Rt).catch(Ct)}decodeGeometry(Mt,Rt){const pt=JSON.stringify(Rt);if(dt.has(Mt)){const Dt=dt.get(Mt);if(Dt.key===pt)return Dt.promise;if(Mt.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let mt;const gt=this.workerNextTaskID++,Ct=Mt.byteLength,xt=this._getWorker(gt,Ct).then(Dt=>(mt=Dt,new Promise((Ht,Ut)=>{mt._callbacks[gt]={resolve:Ht,reject:Ut},mt.postMessage({type:"decode",id:gt,taskConfig:Rt,buffer:Mt},[Mt])}))).then(Dt=>this._createGeometry(Dt.geometry));return xt.catch(()=>!0).then(()=>{mt&&gt&&this._releaseTask(mt,gt)}),dt.set(Mt,{key:pt,promise:xt}),xt}_createGeometry(Mt){const Rt=new it.BufferGeometry;Mt.index&&Rt.setIndex(new it.BufferAttribute(Mt.index.array,1));for(let pt=0;pt<Mt.attributes.length;pt++){const mt=Mt.attributes[pt],gt=mt.name,Ct=mt.array,xt=mt.itemSize,Dt=new it.BufferAttribute(Ct,xt);gt==="color"&&(this._assignVertexColorSpace(Dt,mt.vertexColorSpace),Dt.normalized=!(Ct instanceof Float32Array)),Rt.setAttribute(gt,Dt)}return Rt}_assignVertexColorSpace(Mt,Rt){if(Rt!==it.SRGBColorSpace)return;const pt=new it.Color;for(let mt=0,gt=Mt.count;mt<gt;mt++)pt.fromBufferAttribute(Mt,mt).convertSRGBToLinear(),Mt.setXYZ(mt,pt.r,pt.g,pt.b)}_loadLibrary(Mt,Rt){const pt=new it.FileLoader(this.manager);return pt.setPath(this.decoderPath),pt.setResponseType(Rt),pt.setWithCredentials(this.withCredentials),new Promise((mt,gt)=>{pt.load(Mt,mt,void 0,gt)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const Mt=typeof WebAssembly!="object"||this.decoderConfig.type==="js",Rt=[];return Mt?Rt.push(this._loadLibrary("draco_decoder.js","text")):(Rt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),Rt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(Rt).then(pt=>{const mt=pt[0];Mt||(this.decoderConfig.wasmBinary=pt[1]);const gt=Tt.toString(),Ct=["/* draco decoder */",mt,"","/* worker */",gt.substring(gt.indexOf("{")+1,gt.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ct]))}),this.decoderPending}_getWorker(Mt,Rt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const mt=new Worker(this.workerSourceURL);mt._callbacks={},mt._taskCosts={},mt._taskLoad=0,mt.postMessage({type:"init",decoderConfig:this.decoderConfig}),mt.onmessage=function(gt){const Ct=gt.data;switch(Ct.type){case"decode":mt._callbacks[Ct.id].resolve(Ct);break;case"error":mt._callbacks[Ct.id].reject(Ct);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Ct.type+'"')}},this.workerPool.push(mt)}else this.workerPool.sort(function(mt,gt){return mt._taskLoad>gt._taskLoad?-1:1});const pt=this.workerPool[this.workerPool.length-1];return pt._taskCosts[Mt]=Rt,pt._taskLoad+=Rt,pt})}_releaseTask(Mt,Rt){Mt._taskLoad-=Mt._taskCosts[Rt],delete Mt._callbacks[Rt],delete Mt._taskCosts[Rt]}debug(){console.log("Task load: ",this.workerPool.map(Mt=>Mt._taskLoad))}dispose(){for(let Mt=0;Mt<this.workerPool.length;++Mt)this.workerPool[Mt].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Tt(){let Et,Mt;onmessage=function(Ct){const xt=Ct.data;switch(xt.type){case"init":Et=xt.decoderConfig,Mt=new Promise(function(Ut){Et.onModuleLoaded=function(Xt){Ut({draco:Xt})},DracoDecoderModule(Et)});break;case"decode":const Dt=xt.buffer,Ht=xt.taskConfig;Mt.then(Ut=>{const Xt=Ut.draco,Qt=new Xt.Decoder;try{const tn=Rt(Xt,Qt,new Int8Array(Dt),Ht),on=tn.attributes.map(vn=>vn.array.buffer);tn.index&&on.push(tn.index.array.buffer),self.postMessage({type:"decode",id:xt.id,geometry:tn},on)}catch(tn){console.error(tn),self.postMessage({type:"error",id:xt.id,error:tn.message})}finally{Xt.destroy(Qt)}});break}};function Rt(Ct,xt,Dt,Ht){const Ut=Ht.attributeIDs,Xt=Ht.attributeTypes;let Qt,tn;const on=xt.GetEncodedGeometryType(Dt);if(on===Ct.TRIANGULAR_MESH)Qt=new Ct.Mesh,tn=xt.DecodeArrayToMesh(Dt,Dt.byteLength,Qt);else if(on===Ct.POINT_CLOUD)Qt=new Ct.PointCloud,tn=xt.DecodeArrayToPointCloud(Dt,Dt.byteLength,Qt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!tn.ok()||Qt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+tn.error_msg());const vn={index:null,attributes:[]};for(const fn in Ut){const Cn=self[Xt[fn]];let dn,An;if(Ht.useUniqueIDs)An=Ut[fn],dn=xt.GetAttributeByUniqueId(Qt,An);else{if(An=xt.GetAttributeId(Qt,Ct[Ut[fn]]),An===-1)continue;dn=xt.GetAttribute(Qt,An)}const nn=mt(Ct,xt,Qt,fn,Cn,dn);fn==="color"&&(nn.vertexColorSpace=Ht.vertexColorSpace),vn.attributes.push(nn)}return on===Ct.TRIANGULAR_MESH&&(vn.index=pt(Ct,xt,Qt)),Ct.destroy(Qt),vn}function pt(Ct,xt,Dt){const Ut=Dt.num_faces()*3,Xt=Ut*4,Qt=Ct._malloc(Xt);xt.GetTrianglesUInt32Array(Dt,Xt,Qt);const tn=new Uint32Array(Ct.HEAPF32.buffer,Qt,Ut).slice();return Ct._free(Qt),{array:tn,itemSize:1}}function mt(Ct,xt,Dt,Ht,Ut,Xt){const Qt=Xt.num_components(),on=Dt.num_points()*Qt,vn=on*Ut.BYTES_PER_ELEMENT,fn=gt(Ct,Ut),Cn=Ct._malloc(vn);xt.GetAttributeDataArrayForAllPoints(Dt,Xt,fn,vn,Cn);const dn=new Ut(Ct.HEAPF32.buffer,Cn,on).slice();return Ct._free(Cn),{name:Ht,array:dn,itemSize:Qt}}function gt(Ct,xt){switch(xt){case Float32Array:return Ct.DT_FLOAT32;case Int8Array:return Ct.DT_INT8;case Int16Array:return Ct.DT_INT16;case Int32Array:return Ct.DT_INT32;case Uint8Array:return Ct.DT_UINT8;case Uint16Array:return Ct.DT_UINT16;case Uint32Array:return Ct.DT_UINT32}}}},"./node_modules/three/examples/jsm/loaders/GLTFLoader.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{GLTFLoader:()=>bt});var it=vt("./node_modules/three/build/three.module.js"),dt=vt("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js");class bt extends it.Loader{constructor(Mn){super(Mn),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(bn){return new mt(bn)}),this.register(function(bn){return new gt(bn)}),this.register(function(bn){return new on(bn)}),this.register(function(bn){return new vn(bn)}),this.register(function(bn){return new fn(bn)}),this.register(function(bn){return new xt(bn)}),this.register(function(bn){return new Dt(bn)}),this.register(function(bn){return new Ht(bn)}),this.register(function(bn){return new Ut(bn)}),this.register(function(bn){return new pt(bn)}),this.register(function(bn){return new Xt(bn)}),this.register(function(bn){return new Ct(bn)}),this.register(function(bn){return new tn(bn)}),this.register(function(bn){return new Qt(bn)}),this.register(function(bn){return new Mt(bn)}),this.register(function(bn){return new Cn(bn)}),this.register(function(bn){return new dn(bn)})}load(Mn,bn,Hn,Dn){const Un=this;let Gn;if(this.resourcePath!=="")Gn=this.resourcePath;else if(this.path!==""){const jt=it.LoaderUtils.extractUrlBase(Mn);Gn=it.LoaderUtils.resolveURL(jt,this.path)}else Gn=it.LoaderUtils.extractUrlBase(Mn);this.manager.itemStart(Mn);const un=function(jt){Dn?Dn(jt):console.error(jt),Un.manager.itemError(Mn),Un.manager.itemEnd(Mn)},Wt=new it.FileLoader(this.manager);Wt.setPath(this.path),Wt.setResponseType("arraybuffer"),Wt.setRequestHeader(this.requestHeader),Wt.setWithCredentials(this.withCredentials),Wt.load(Mn,function(jt){try{Un.parse(jt,Gn,function(yn){bn(yn),Un.manager.itemEnd(Mn)},un)}catch(yn){un(yn)}},Hn,un)}setDRACOLoader(Mn){return this.dracoLoader=Mn,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(Mn){return this.ktx2Loader=Mn,this}setMeshoptDecoder(Mn){return this.meshoptDecoder=Mn,this}register(Mn){return this.pluginCallbacks.indexOf(Mn)===-1&&this.pluginCallbacks.push(Mn),this}unregister(Mn){return this.pluginCallbacks.indexOf(Mn)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Mn),1),this}parse(Mn,bn,Hn,Dn){let Un;const Gn={},un={},Wt=new TextDecoder;if(typeof Mn=="string")Un=JSON.parse(Mn);else if(Mn instanceof ArrayBuffer)if(Wt.decode(new Uint8Array(Mn,0,4))===An){try{Gn[Et.KHR_BINARY_GLTF]=new mn(Mn)}catch(Rn){Dn&&Dn(Rn);return}Un=JSON.parse(Gn[Et.KHR_BINARY_GLTF].content)}else Un=JSON.parse(Wt.decode(Mn));else Un=Mn;if(Un.asset===void 0||Un.asset.version[0]<2){Dn&&Dn(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const jt=new Pl(Un,{path:bn||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});jt.fileLoader.setRequestHeader(this.requestHeader);for(let yn=0;yn<this.pluginCallbacks.length;yn++){const Rn=this.pluginCallbacks[yn](jt);Rn.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),un[Rn.name]=Rn,Gn[Rn.name]=!0}if(Un.extensionsUsed)for(let yn=0;yn<Un.extensionsUsed.length;++yn){const Rn=Un.extensionsUsed[yn],Wn=Un.extensionsRequired||[];switch(Rn){case Et.KHR_MATERIALS_UNLIT:Gn[Rn]=new Rt;break;case Et.KHR_DRACO_MESH_COMPRESSION:Gn[Rn]=new gn(Un,this.dracoLoader);break;case Et.KHR_TEXTURE_TRANSFORM:Gn[Rn]=new In;break;case Et.KHR_MESH_QUANTIZATION:Gn[Rn]=new Vn;break;default:Wn.indexOf(Rn)>=0&&un[Rn]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Rn+'".')}}jt.setExtensions(Gn),jt.setPlugins(un),jt.parse(Hn,Dn)}parseAsync(Mn,bn){const Hn=this;return new Promise(function(Dn,Un){Hn.parse(Mn,bn,Dn,Un)})}}function Tt(){let es={};return{get:function(Mn){return es[Mn]},add:function(Mn,bn){es[Mn]=bn},remove:function(Mn){delete es[Mn]},removeAll:function(){es={}}}}const Et={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Mt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const Mn=this.parser,bn=this.parser.json.nodes||[];for(let Hn=0,Dn=bn.length;Hn<Dn;Hn++){const Un=bn[Hn];Un.extensions&&Un.extensions[this.name]&&Un.extensions[this.name].light!==void 0&&Mn._addNodeRef(this.cache,Un.extensions[this.name].light)}}_loadLight(Mn){const bn=this.parser,Hn="light:"+Mn;let Dn=bn.cache.get(Hn);if(Dn)return Dn;const Un=bn.json,Wt=((Un.extensions&&Un.extensions[this.name]||{}).lights||[])[Mn];let jt;const yn=new it.Color(16777215);Wt.color!==void 0&&yn.setRGB(Wt.color[0],Wt.color[1],Wt.color[2],it.LinearSRGBColorSpace);const Rn=Wt.range!==void 0?Wt.range:0;switch(Wt.type){case"directional":jt=new it.DirectionalLight(yn),jt.target.position.set(0,0,-1),jt.add(jt.target);break;case"point":jt=new it.PointLight(yn),jt.distance=Rn;break;case"spot":jt=new it.SpotLight(yn),jt.distance=Rn,Wt.spot=Wt.spot||{},Wt.spot.innerConeAngle=Wt.spot.innerConeAngle!==void 0?Wt.spot.innerConeAngle:0,Wt.spot.outerConeAngle=Wt.spot.outerConeAngle!==void 0?Wt.spot.outerConeAngle:Math.PI/4,jt.angle=Wt.spot.outerConeAngle,jt.penumbra=1-Wt.spot.innerConeAngle/Wt.spot.outerConeAngle,jt.target.position.set(0,0,-1),jt.add(jt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Wt.type)}return jt.position.set(0,0,0),jt.decay=2,xo(jt,Wt),Wt.intensity!==void 0&&(jt.intensity=Wt.intensity),jt.name=bn.createUniqueName(Wt.name||"light_"+Mn),Dn=Promise.resolve(jt),bn.cache.add(Hn,Dn),Dn}getDependency(Mn,bn){if(Mn==="light")return this._loadLight(bn)}createNodeAttachment(Mn){const bn=this,Hn=this.parser,Un=Hn.json.nodes[Mn],un=(Un.extensions&&Un.extensions[this.name]||{}).light;return un===void 0?null:this._loadLight(un).then(function(Wt){return Hn._getNodeRef(bn.cache,un,Wt)})}}class Rt{constructor(){this.name=Et.KHR_MATERIALS_UNLIT}getMaterialType(){return it.MeshBasicMaterial}extendParams(Mn,bn,Hn){const Dn=[];Mn.color=new it.Color(1,1,1),Mn.opacity=1;const Un=bn.pbrMetallicRoughness;if(Un){if(Array.isArray(Un.baseColorFactor)){const Gn=Un.baseColorFactor;Mn.color.setRGB(Gn[0],Gn[1],Gn[2],it.LinearSRGBColorSpace),Mn.opacity=Gn[3]}Un.baseColorTexture!==void 0&&Dn.push(Hn.assignTexture(Mn,"map",Un.baseColorTexture,it.SRGBColorSpace))}return Promise.all(Dn)}}class pt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(Mn,bn){const Dn=this.parser.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=Dn.extensions[this.name].emissiveStrength;return Un!==void 0&&(bn.emissiveIntensity=Un),Promise.resolve()}}class mt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_CLEARCOAT}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];if(Gn.clearcoatFactor!==void 0&&(bn.clearcoat=Gn.clearcoatFactor),Gn.clearcoatTexture!==void 0&&Un.push(Hn.assignTexture(bn,"clearcoatMap",Gn.clearcoatTexture)),Gn.clearcoatRoughnessFactor!==void 0&&(bn.clearcoatRoughness=Gn.clearcoatRoughnessFactor),Gn.clearcoatRoughnessTexture!==void 0&&Un.push(Hn.assignTexture(bn,"clearcoatRoughnessMap",Gn.clearcoatRoughnessTexture)),Gn.clearcoatNormalTexture!==void 0&&(Un.push(Hn.assignTexture(bn,"clearcoatNormalMap",Gn.clearcoatNormalTexture)),Gn.clearcoatNormalTexture.scale!==void 0)){const un=Gn.clearcoatNormalTexture.scale;bn.clearcoatNormalScale=new it.Vector2(un,un)}return Promise.all(Un)}}class gt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_DISPERSION}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Dn=this.parser.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=Dn.extensions[this.name];return bn.dispersion=Un.dispersion!==void 0?Un.dispersion:0,Promise.resolve()}}class Ct{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_IRIDESCENCE}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];return Gn.iridescenceFactor!==void 0&&(bn.iridescence=Gn.iridescenceFactor),Gn.iridescenceTexture!==void 0&&Un.push(Hn.assignTexture(bn,"iridescenceMap",Gn.iridescenceTexture)),Gn.iridescenceIor!==void 0&&(bn.iridescenceIOR=Gn.iridescenceIor),bn.iridescenceThicknessRange===void 0&&(bn.iridescenceThicknessRange=[100,400]),Gn.iridescenceThicknessMinimum!==void 0&&(bn.iridescenceThicknessRange[0]=Gn.iridescenceThicknessMinimum),Gn.iridescenceThicknessMaximum!==void 0&&(bn.iridescenceThicknessRange[1]=Gn.iridescenceThicknessMaximum),Gn.iridescenceThicknessTexture!==void 0&&Un.push(Hn.assignTexture(bn,"iridescenceThicknessMap",Gn.iridescenceThicknessTexture)),Promise.all(Un)}}class xt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_SHEEN}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[];bn.sheenColor=new it.Color(0,0,0),bn.sheenRoughness=0,bn.sheen=1;const Gn=Dn.extensions[this.name];if(Gn.sheenColorFactor!==void 0){const un=Gn.sheenColorFactor;bn.sheenColor.setRGB(un[0],un[1],un[2],it.LinearSRGBColorSpace)}return Gn.sheenRoughnessFactor!==void 0&&(bn.sheenRoughness=Gn.sheenRoughnessFactor),Gn.sheenColorTexture!==void 0&&Un.push(Hn.assignTexture(bn,"sheenColorMap",Gn.sheenColorTexture,it.SRGBColorSpace)),Gn.sheenRoughnessTexture!==void 0&&Un.push(Hn.assignTexture(bn,"sheenRoughnessMap",Gn.sheenRoughnessTexture)),Promise.all(Un)}}class Dt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_TRANSMISSION}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];return Gn.transmissionFactor!==void 0&&(bn.transmission=Gn.transmissionFactor),Gn.transmissionTexture!==void 0&&Un.push(Hn.assignTexture(bn,"transmissionMap",Gn.transmissionTexture)),Promise.all(Un)}}class Ht{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_VOLUME}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];bn.thickness=Gn.thicknessFactor!==void 0?Gn.thicknessFactor:0,Gn.thicknessTexture!==void 0&&Un.push(Hn.assignTexture(bn,"thicknessMap",Gn.thicknessTexture)),bn.attenuationDistance=Gn.attenuationDistance||1/0;const un=Gn.attenuationColor||[1,1,1];return bn.attenuationColor=new it.Color().setRGB(un[0],un[1],un[2],it.LinearSRGBColorSpace),Promise.all(Un)}}class Ut{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_IOR}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Dn=this.parser.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=Dn.extensions[this.name];return bn.ior=Un.ior!==void 0?Un.ior:1.5,Promise.resolve()}}class Xt{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_SPECULAR}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];bn.specularIntensity=Gn.specularFactor!==void 0?Gn.specularFactor:1,Gn.specularTexture!==void 0&&Un.push(Hn.assignTexture(bn,"specularIntensityMap",Gn.specularTexture));const un=Gn.specularColorFactor||[1,1,1];return bn.specularColor=new it.Color().setRGB(un[0],un[1],un[2],it.LinearSRGBColorSpace),Gn.specularColorTexture!==void 0&&Un.push(Hn.assignTexture(bn,"specularColorMap",Gn.specularColorTexture,it.SRGBColorSpace)),Promise.all(Un)}}class Qt{constructor(Mn){this.parser=Mn,this.name=Et.EXT_MATERIALS_BUMP}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];return bn.bumpScale=Gn.bumpFactor!==void 0?Gn.bumpFactor:1,Gn.bumpTexture!==void 0&&Un.push(Hn.assignTexture(bn,"bumpMap",Gn.bumpTexture)),Promise.all(Un)}}class tn{constructor(Mn){this.parser=Mn,this.name=Et.KHR_MATERIALS_ANISOTROPY}getMaterialType(Mn){const Hn=this.parser.json.materials[Mn];return!Hn.extensions||!Hn.extensions[this.name]?null:it.MeshPhysicalMaterial}extendMaterialParams(Mn,bn){const Hn=this.parser,Dn=Hn.json.materials[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return Promise.resolve();const Un=[],Gn=Dn.extensions[this.name];return Gn.anisotropyStrength!==void 0&&(bn.anisotropy=Gn.anisotropyStrength),Gn.anisotropyRotation!==void 0&&(bn.anisotropyRotation=Gn.anisotropyRotation),Gn.anisotropyTexture!==void 0&&Un.push(Hn.assignTexture(bn,"anisotropyMap",Gn.anisotropyTexture)),Promise.all(Un)}}class on{constructor(Mn){this.parser=Mn,this.name=Et.KHR_TEXTURE_BASISU}loadTexture(Mn){const bn=this.parser,Hn=bn.json,Dn=Hn.textures[Mn];if(!Dn.extensions||!Dn.extensions[this.name])return null;const Un=Dn.extensions[this.name],Gn=bn.options.ktx2Loader;if(!Gn){if(Hn.extensionsRequired&&Hn.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return bn.loadTextureImage(Mn,Un.source,Gn)}}class vn{constructor(Mn){this.parser=Mn,this.name=Et.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(Mn){const bn=this.name,Hn=this.parser,Dn=Hn.json,Un=Dn.textures[Mn];if(!Un.extensions||!Un.extensions[bn])return null;const Gn=Un.extensions[bn],un=Dn.images[Gn.source];let Wt=Hn.textureLoader;if(un.uri){const jt=Hn.options.manager.getHandler(un.uri);jt!==null&&(Wt=jt)}return this.detectSupport().then(function(jt){if(jt)return Hn.loadTextureImage(Mn,Gn.source,Wt);if(Dn.extensionsRequired&&Dn.extensionsRequired.indexOf(bn)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Hn.loadTexture(Mn)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Mn){const bn=new Image;bn.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",bn.onload=bn.onerror=function(){Mn(bn.height===1)}})),this.isSupported}}class fn{constructor(Mn){this.parser=Mn,this.name=Et.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(Mn){const bn=this.name,Hn=this.parser,Dn=Hn.json,Un=Dn.textures[Mn];if(!Un.extensions||!Un.extensions[bn])return null;const Gn=Un.extensions[bn],un=Dn.images[Gn.source];let Wt=Hn.textureLoader;if(un.uri){const jt=Hn.options.manager.getHandler(un.uri);jt!==null&&(Wt=jt)}return this.detectSupport().then(function(jt){if(jt)return Hn.loadTextureImage(Mn,Gn.source,Wt);if(Dn.extensionsRequired&&Dn.extensionsRequired.indexOf(bn)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return Hn.loadTexture(Mn)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Mn){const bn=new Image;bn.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",bn.onload=bn.onerror=function(){Mn(bn.height===1)}})),this.isSupported}}class Cn{constructor(Mn){this.name=Et.EXT_MESHOPT_COMPRESSION,this.parser=Mn}loadBufferView(Mn){const bn=this.parser.json,Hn=bn.bufferViews[Mn];if(Hn.extensions&&Hn.extensions[this.name]){const Dn=Hn.extensions[this.name],Un=this.parser.getDependency("buffer",Dn.buffer),Gn=this.parser.options.meshoptDecoder;if(!Gn||!Gn.supported){if(bn.extensionsRequired&&bn.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Un.then(function(un){const Wt=Dn.byteOffset||0,jt=Dn.byteLength||0,yn=Dn.count,Rn=Dn.byteStride,Wn=new Uint8Array(un,Wt,jt);return Gn.decodeGltfBufferAsync?Gn.decodeGltfBufferAsync(yn,Rn,Wn,Dn.mode,Dn.filter).then(function(rr){return rr.buffer}):Gn.ready.then(function(){const rr=new ArrayBuffer(yn*Rn);return Gn.decodeGltfBuffer(new Uint8Array(rr),yn,Rn,Wn,Dn.mode,Dn.filter),rr})})}else return null}}class dn{constructor(Mn){this.name=Et.EXT_MESH_GPU_INSTANCING,this.parser=Mn}createNodeMesh(Mn){const bn=this.parser.json,Hn=bn.nodes[Mn];if(!Hn.extensions||!Hn.extensions[this.name]||Hn.mesh===void 0)return null;const Dn=bn.meshes[Hn.mesh];for(const jt of Dn.primitives)if(jt.mode!==Lr.TRIANGLES&&jt.mode!==Lr.TRIANGLE_STRIP&&jt.mode!==Lr.TRIANGLE_FAN&&jt.mode!==void 0)return null;const Gn=Hn.extensions[this.name].attributes,un=[],Wt={};for(const jt in Gn)un.push(this.parser.getDependency("accessor",Gn[jt]).then(yn=>(Wt[jt]=yn,Wt[jt])));return un.length<1?null:(un.push(this.parser.createNodeMesh(Mn)),Promise.all(un).then(jt=>{const yn=jt.pop(),Rn=yn.isGroup?yn.children:[yn],Wn=jt[0].count,rr=[];for(const ns of Rn){const ps=new it.Matrix4,os=new it.Vector3,as=new it.Quaternion,Cs=new it.Vector3(1,1,1),U0=new it.InstancedMesh(ns.geometry,ns.material,Wn);for(let to=0;to<Wn;to++)Wt.TRANSLATION&&os.fromBufferAttribute(Wt.TRANSLATION,to),Wt.ROTATION&&as.fromBufferAttribute(Wt.ROTATION,to),Wt.SCALE&&Cs.fromBufferAttribute(Wt.SCALE,to),U0.setMatrixAt(to,ps.compose(os,as,Cs));for(const to in Wt)if(to==="_COLOR_0"){const Cr=Wt[to];U0.instanceColor=new it.InstancedBufferAttribute(Cr.array,Cr.itemSize,Cr.normalized)}else to!=="TRANSLATION"&&to!=="ROTATION"&&to!=="SCALE"&&ns.geometry.setAttribute(to,Wt[to]);it.Object3D.prototype.copy.call(U0,ns),this.parser.assignFinalMaterial(U0),rr.push(U0)}return yn.isGroup?(yn.clear(),yn.add(...rr),yn):rr[0]}))}}const An="glTF",nn=12,Zt={JSON:1313821514,BIN:5130562};class mn{constructor(Mn){this.name=Et.KHR_BINARY_GLTF,this.content=null,this.body=null;const bn=new DataView(Mn,0,nn),Hn=new TextDecoder;if(this.header={magic:Hn.decode(new Uint8Array(Mn.slice(0,4))),version:bn.getUint32(4,!0),length:bn.getUint32(8,!0)},this.header.magic!==An)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Dn=this.header.length-nn,Un=new DataView(Mn,nn);let Gn=0;for(;Gn<Dn;){const un=Un.getUint32(Gn,!0);Gn+=4;const Wt=Un.getUint32(Gn,!0);if(Gn+=4,Wt===Zt.JSON){const jt=new Uint8Array(Mn,nn+Gn,un);this.content=Hn.decode(jt)}else if(Wt===Zt.BIN){const jt=nn+Gn;this.body=Mn.slice(jt,jt+un)}Gn+=un}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gn{constructor(Mn,bn){if(!bn)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Et.KHR_DRACO_MESH_COMPRESSION,this.json=Mn,this.dracoLoader=bn,this.dracoLoader.preload()}decodePrimitive(Mn,bn){const Hn=this.json,Dn=this.dracoLoader,Un=Mn.extensions[this.name].bufferView,Gn=Mn.extensions[this.name].attributes,un={},Wt={},jt={};for(const yn in Gn){const Rn=Rs[yn]||yn.toLowerCase();un[Rn]=Gn[yn]}for(const yn in Mn.attributes){const Rn=Rs[yn]||yn.toLowerCase();if(Gn[yn]!==void 0){const Wn=Hn.accessors[Mn.attributes[yn]],rr=Tr[Wn.componentType];jt[Rn]=rr.name,Wt[Rn]=Wn.normalized===!0}}return bn.getDependency("bufferView",Un).then(function(yn){return new Promise(function(Rn,Wn){Dn.decodeDracoFile(yn,function(rr){for(const ns in rr.attributes){const ps=rr.attributes[ns],os=Wt[ns];os!==void 0&&(ps.normalized=os)}Rn(rr)},un,jt,it.LinearSRGBColorSpace,Wn)})})}}class In{constructor(){this.name=Et.KHR_TEXTURE_TRANSFORM}extendTexture(Mn,bn){return(bn.texCoord===void 0||bn.texCoord===Mn.channel)&&bn.offset===void 0&&bn.rotation===void 0&&bn.scale===void 0||(Mn=Mn.clone(),bn.texCoord!==void 0&&(Mn.channel=bn.texCoord),bn.offset!==void 0&&Mn.offset.fromArray(bn.offset),bn.rotation!==void 0&&(Mn.rotation=bn.rotation),bn.scale!==void 0&&Mn.repeat.fromArray(bn.scale),Mn.needsUpdate=!0),Mn}}class Vn{constructor(){this.name=Et.KHR_MESH_QUANTIZATION}}class Zn extends it.Interpolant{constructor(Mn,bn,Hn,Dn){super(Mn,bn,Hn,Dn)}copySampleValue_(Mn){const bn=this.resultBuffer,Hn=this.sampleValues,Dn=this.valueSize,Un=Mn*Dn*3+Dn;for(let Gn=0;Gn!==Dn;Gn++)bn[Gn]=Hn[Un+Gn];return bn}interpolate_(Mn,bn,Hn,Dn){const Un=this.resultBuffer,Gn=this.sampleValues,un=this.valueSize,Wt=un*2,jt=un*3,yn=Dn-bn,Rn=(Hn-bn)/yn,Wn=Rn*Rn,rr=Wn*Rn,ns=Mn*jt,ps=ns-jt,os=-2*rr+3*Wn,as=rr-Wn,Cs=1-os,U0=as-Wn+Rn;for(let to=0;to!==un;to++){const Cr=Gn[ps+to+un],i0=Gn[ps+to+Wt]*yn,o0=Gn[ns+to+un],Q0=Gn[ns+to]*yn;Un[to]=Cs*Cr+U0*i0+os*o0+as*Q0}return Un}}const lr=new it.Quaternion;class hr extends Zn{interpolate_(Mn,bn,Hn,Dn){const Un=super.interpolate_(Mn,bn,Hn,Dn);return lr.fromArray(Un).normalize().toArray(Un),Un}}const Lr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Tr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},As={9728:it.NearestFilter,9729:it.LinearFilter,9984:it.NearestMipmapNearestFilter,9985:it.LinearMipmapNearestFilter,9986:it.NearestMipmapLinearFilter,9987:it.LinearMipmapLinearFilter},Yr={33071:it.ClampToEdgeWrapping,33648:it.MirroredRepeatWrapping,10497:it.RepeatWrapping},ms={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rs={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ao={CUBICSPLINE:void 0,LINEAR:it.InterpolateLinear,STEP:it.InterpolateDiscrete},go={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ho(es){return es.DefaultMaterial===void 0&&(es.DefaultMaterial=new it.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:it.FrontSide})),es.DefaultMaterial}function Ys(es,Mn,bn){for(const Hn in bn.extensions)es[Hn]===void 0&&(Mn.userData.gltfExtensions=Mn.userData.gltfExtensions||{},Mn.userData.gltfExtensions[Hn]=bn.extensions[Hn])}function xo(es,Mn){Mn.extras!==void 0&&(typeof Mn.extras=="object"?Object.assign(es.userData,Mn.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Mn.extras))}function $o(es,Mn,bn){let Hn=!1,Dn=!1,Un=!1;for(let jt=0,yn=Mn.length;jt<yn;jt++){const Rn=Mn[jt];if(Rn.POSITION!==void 0&&(Hn=!0),Rn.NORMAL!==void 0&&(Dn=!0),Rn.COLOR_0!==void 0&&(Un=!0),Hn&&Dn&&Un)break}if(!Hn&&!Dn&&!Un)return Promise.resolve(es);const Gn=[],un=[],Wt=[];for(let jt=0,yn=Mn.length;jt<yn;jt++){const Rn=Mn[jt];if(Hn){const Wn=Rn.POSITION!==void 0?bn.getDependency("accessor",Rn.POSITION):es.attributes.position;Gn.push(Wn)}if(Dn){const Wn=Rn.NORMAL!==void 0?bn.getDependency("accessor",Rn.NORMAL):es.attributes.normal;un.push(Wn)}if(Un){const Wn=Rn.COLOR_0!==void 0?bn.getDependency("accessor",Rn.COLOR_0):es.attributes.color;Wt.push(Wn)}}return Promise.all([Promise.all(Gn),Promise.all(un),Promise.all(Wt)]).then(function(jt){const yn=jt[0],Rn=jt[1],Wn=jt[2];return Hn&&(es.morphAttributes.position=yn),Dn&&(es.morphAttributes.normal=Rn),Un&&(es.morphAttributes.color=Wn),es.morphTargetsRelative=!0,es})}function Pn(es,Mn){if(es.updateMorphTargets(),Mn.weights!==void 0)for(let bn=0,Hn=Mn.weights.length;bn<Hn;bn++)es.morphTargetInfluences[bn]=Mn.weights[bn];if(Mn.extras&&Array.isArray(Mn.extras.targetNames)){const bn=Mn.extras.targetNames;if(es.morphTargetInfluences.length===bn.length){es.morphTargetDictionary={};for(let Hn=0,Dn=bn.length;Hn<Dn;Hn++)es.morphTargetDictionary[bn[Hn]]=Hn}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j0(es){let Mn;const bn=es.extensions&&es.extensions[Et.KHR_DRACO_MESH_COMPRESSION];if(bn?Mn="draco:"+bn.bufferView+":"+bn.indices+":"+Ho(bn.attributes):Mn=es.indices+":"+Ho(es.attributes)+":"+es.mode,es.targets!==void 0)for(let Hn=0,Dn=es.targets.length;Hn<Dn;Hn++)Mn+=":"+Ho(es.targets[Hn]);return Mn}function Ho(es){let Mn="";const bn=Object.keys(es).sort();for(let Hn=0,Dn=bn.length;Hn<Dn;Hn++)Mn+=bn[Hn]+":"+es[bn[Hn]]+";";return Mn}function oo(es){switch(es){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function L0(es){return es.search(/\.jpe?g($|\?)/i)>0||es.search(/^data\:image\/jpeg/)===0?"image/jpeg":es.search(/\.webp($|\?)/i)>0||es.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const f0=new it.Matrix4;class Pl{constructor(Mn={},bn={}){this.json=Mn,this.extensions={},this.plugins={},this.options=bn,this.cache=new Tt,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Hn=!1,Dn=!1,Un=-1;typeof navigator<"u"&&(Hn=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Dn=navigator.userAgent.indexOf("Firefox")>-1,Un=Dn?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Hn||Dn&&Un<98?this.textureLoader=new it.TextureLoader(this.options.manager):this.textureLoader=new it.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new it.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(Mn){this.extensions=Mn}setPlugins(Mn){this.plugins=Mn}parse(Mn,bn){const Hn=this,Dn=this.json,Un=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(Gn){return Gn._markDefs&&Gn._markDefs()}),Promise.all(this._invokeAll(function(Gn){return Gn.beforeRoot&&Gn.beforeRoot()})).then(function(){return Promise.all([Hn.getDependencies("scene"),Hn.getDependencies("animation"),Hn.getDependencies("camera")])}).then(function(Gn){const un={scene:Gn[0][Dn.scene||0],scenes:Gn[0],animations:Gn[1],cameras:Gn[2],asset:Dn.asset,parser:Hn,userData:{}};return Ys(Un,un,Dn),xo(un,Dn),Promise.all(Hn._invokeAll(function(Wt){return Wt.afterRoot&&Wt.afterRoot(un)})).then(function(){for(const Wt of un.scenes)Wt.updateMatrixWorld();Mn(un)})}).catch(bn)}_markDefs(){const Mn=this.json.nodes||[],bn=this.json.skins||[],Hn=this.json.meshes||[];for(let Dn=0,Un=bn.length;Dn<Un;Dn++){const Gn=bn[Dn].joints;for(let un=0,Wt=Gn.length;un<Wt;un++)Mn[Gn[un]].isBone=!0}for(let Dn=0,Un=Mn.length;Dn<Un;Dn++){const Gn=Mn[Dn];Gn.mesh!==void 0&&(this._addNodeRef(this.meshCache,Gn.mesh),Gn.skin!==void 0&&(Hn[Gn.mesh].isSkinnedMesh=!0)),Gn.camera!==void 0&&this._addNodeRef(this.cameraCache,Gn.camera)}}_addNodeRef(Mn,bn){bn!==void 0&&(Mn.refs[bn]===void 0&&(Mn.refs[bn]=Mn.uses[bn]=0),Mn.refs[bn]++)}_getNodeRef(Mn,bn,Hn){if(Mn.refs[bn]<=1)return Hn;const Dn=Hn.clone(),Un=(Gn,un)=>{const Wt=this.associations.get(Gn);Wt!=null&&this.associations.set(un,Wt);for(const[jt,yn]of Gn.children.entries())Un(yn,un.children[jt])};return Un(Hn,Dn),Dn.name+="_instance_"+Mn.uses[bn]++,Dn}_invokeOne(Mn){const bn=Object.values(this.plugins);bn.push(this);for(let Hn=0;Hn<bn.length;Hn++){const Dn=Mn(bn[Hn]);if(Dn)return Dn}return null}_invokeAll(Mn){const bn=Object.values(this.plugins);bn.unshift(this);const Hn=[];for(let Dn=0;Dn<bn.length;Dn++){const Un=Mn(bn[Dn]);Un&&Hn.push(Un)}return Hn}getDependency(Mn,bn){const Hn=Mn+":"+bn;let Dn=this.cache.get(Hn);if(!Dn){switch(Mn){case"scene":Dn=this.loadScene(bn);break;case"node":Dn=this._invokeOne(function(Un){return Un.loadNode&&Un.loadNode(bn)});break;case"mesh":Dn=this._invokeOne(function(Un){return Un.loadMesh&&Un.loadMesh(bn)});break;case"accessor":Dn=this.loadAccessor(bn);break;case"bufferView":Dn=this._invokeOne(function(Un){return Un.loadBufferView&&Un.loadBufferView(bn)});break;case"buffer":Dn=this.loadBuffer(bn);break;case"material":Dn=this._invokeOne(function(Un){return Un.loadMaterial&&Un.loadMaterial(bn)});break;case"texture":Dn=this._invokeOne(function(Un){return Un.loadTexture&&Un.loadTexture(bn)});break;case"skin":Dn=this.loadSkin(bn);break;case"animation":Dn=this._invokeOne(function(Un){return Un.loadAnimation&&Un.loadAnimation(bn)});break;case"camera":Dn=this.loadCamera(bn);break;default:if(Dn=this._invokeOne(function(Un){return Un!=this&&Un.getDependency&&Un.getDependency(Mn,bn)}),!Dn)throw new Error("Unknown type: "+Mn);break}this.cache.add(Hn,Dn)}return Dn}getDependencies(Mn){let bn=this.cache.get(Mn);if(!bn){const Hn=this,Dn=this.json[Mn+(Mn==="mesh"?"es":"s")]||[];bn=Promise.all(Dn.map(function(Un,Gn){return Hn.getDependency(Mn,Gn)})),this.cache.add(Mn,bn)}return bn}loadBuffer(Mn){const bn=this.json.buffers[Mn],Hn=this.fileLoader;if(bn.type&&bn.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+bn.type+" buffer type is not supported.");if(bn.uri===void 0&&Mn===0)return Promise.resolve(this.extensions[Et.KHR_BINARY_GLTF].body);const Dn=this.options;return new Promise(function(Un,Gn){Hn.load(it.LoaderUtils.resolveURL(bn.uri,Dn.path),Un,void 0,function(){Gn(new Error('THREE.GLTFLoader: Failed to load buffer "'+bn.uri+'".'))})})}loadBufferView(Mn){const bn=this.json.bufferViews[Mn];return this.getDependency("buffer",bn.buffer).then(function(Hn){const Dn=bn.byteLength||0,Un=bn.byteOffset||0;return Hn.slice(Un,Un+Dn)})}loadAccessor(Mn){const bn=this,Hn=this.json,Dn=this.json.accessors[Mn];if(Dn.bufferView===void 0&&Dn.sparse===void 0){const Gn=ms[Dn.type],un=Tr[Dn.componentType],Wt=Dn.normalized===!0,jt=new un(Dn.count*Gn);return Promise.resolve(new it.BufferAttribute(jt,Gn,Wt))}const Un=[];return Dn.bufferView!==void 0?Un.push(this.getDependency("bufferView",Dn.bufferView)):Un.push(null),Dn.sparse!==void 0&&(Un.push(this.getDependency("bufferView",Dn.sparse.indices.bufferView)),Un.push(this.getDependency("bufferView",Dn.sparse.values.bufferView))),Promise.all(Un).then(function(Gn){const un=Gn[0],Wt=ms[Dn.type],jt=Tr[Dn.componentType],yn=jt.BYTES_PER_ELEMENT,Rn=yn*Wt,Wn=Dn.byteOffset||0,rr=Dn.bufferView!==void 0?Hn.bufferViews[Dn.bufferView].byteStride:void 0,ns=Dn.normalized===!0;let ps,os;if(rr&&rr!==Rn){const as=Math.floor(Wn/rr),Cs="InterleavedBuffer:"+Dn.bufferView+":"+Dn.componentType+":"+as+":"+Dn.count;let U0=bn.cache.get(Cs);U0||(ps=new jt(un,as*rr,Dn.count*rr/yn),U0=new it.InterleavedBuffer(ps,rr/yn),bn.cache.add(Cs,U0)),os=new it.InterleavedBufferAttribute(U0,Wt,Wn%rr/yn,ns)}else un===null?ps=new jt(Dn.count*Wt):ps=new jt(un,Wn,Dn.count*Wt),os=new it.BufferAttribute(ps,Wt,ns);if(Dn.sparse!==void 0){const as=ms.SCALAR,Cs=Tr[Dn.sparse.indices.componentType],U0=Dn.sparse.indices.byteOffset||0,to=Dn.sparse.values.byteOffset||0,Cr=new Cs(Gn[1],U0,Dn.sparse.count*as),i0=new jt(Gn[2],to,Dn.sparse.count*Wt);un!==null&&(os=new it.BufferAttribute(os.array.slice(),os.itemSize,os.normalized));for(let o0=0,Q0=Cr.length;o0<Q0;o0++){const D0=Cr[o0];if(os.setX(D0,i0[o0*Wt]),Wt>=2&&os.setY(D0,i0[o0*Wt+1]),Wt>=3&&os.setZ(D0,i0[o0*Wt+2]),Wt>=4&&os.setW(D0,i0[o0*Wt+3]),Wt>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return os})}loadTexture(Mn){const bn=this.json,Hn=this.options,Un=bn.textures[Mn].source,Gn=bn.images[Un];let un=this.textureLoader;if(Gn.uri){const Wt=Hn.manager.getHandler(Gn.uri);Wt!==null&&(un=Wt)}return this.loadTextureImage(Mn,Un,un)}loadTextureImage(Mn,bn,Hn){const Dn=this,Un=this.json,Gn=Un.textures[Mn],un=Un.images[bn],Wt=(un.uri||un.bufferView)+":"+Gn.sampler;if(this.textureCache[Wt])return this.textureCache[Wt];const jt=this.loadImageSource(bn,Hn).then(function(yn){yn.flipY=!1,yn.name=Gn.name||un.name||"",yn.name===""&&typeof un.uri=="string"&&un.uri.startsWith("data:image/")===!1&&(yn.name=un.uri);const Wn=(Un.samplers||{})[Gn.sampler]||{};return yn.magFilter=As[Wn.magFilter]||it.LinearFilter,yn.minFilter=As[Wn.minFilter]||it.LinearMipmapLinearFilter,yn.wrapS=Yr[Wn.wrapS]||it.RepeatWrapping,yn.wrapT=Yr[Wn.wrapT]||it.RepeatWrapping,Dn.associations.set(yn,{textures:Mn}),yn}).catch(function(){return null});return this.textureCache[Wt]=jt,jt}loadImageSource(Mn,bn){const Hn=this,Dn=this.json,Un=this.options;if(this.sourceCache[Mn]!==void 0)return this.sourceCache[Mn].then(Rn=>Rn.clone());const Gn=Dn.images[Mn],un=self.URL||self.webkitURL;let Wt=Gn.uri||"",jt=!1;if(Gn.bufferView!==void 0)Wt=Hn.getDependency("bufferView",Gn.bufferView).then(function(Rn){jt=!0;const Wn=new Blob([Rn],{type:Gn.mimeType});return Wt=un.createObjectURL(Wn),Wt});else if(Gn.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+Mn+" is missing URI and bufferView");const yn=Promise.resolve(Wt).then(function(Rn){return new Promise(function(Wn,rr){let ns=Wn;bn.isImageBitmapLoader===!0&&(ns=function(ps){const os=new it.Texture(ps);os.needsUpdate=!0,Wn(os)}),bn.load(it.LoaderUtils.resolveURL(Rn,Un.path),ns,void 0,rr)})}).then(function(Rn){return jt===!0&&un.revokeObjectURL(Wt),Rn.userData.mimeType=Gn.mimeType||L0(Gn.uri),Rn}).catch(function(Rn){throw console.error("THREE.GLTFLoader: Couldn't load texture",Wt),Rn});return this.sourceCache[Mn]=yn,yn}assignTexture(Mn,bn,Hn,Dn){const Un=this;return this.getDependency("texture",Hn.index).then(function(Gn){if(!Gn)return null;if(Hn.texCoord!==void 0&&Hn.texCoord>0&&(Gn=Gn.clone(),Gn.channel=Hn.texCoord),Un.extensions[Et.KHR_TEXTURE_TRANSFORM]){const un=Hn.extensions!==void 0?Hn.extensions[Et.KHR_TEXTURE_TRANSFORM]:void 0;if(un){const Wt=Un.associations.get(Gn);Gn=Un.extensions[Et.KHR_TEXTURE_TRANSFORM].extendTexture(Gn,un),Un.associations.set(Gn,Wt)}}return Dn!==void 0&&(Gn.colorSpace=Dn),Mn[bn]=Gn,Gn})}assignFinalMaterial(Mn){const bn=Mn.geometry;let Hn=Mn.material;const Dn=bn.attributes.tangent===void 0,Un=bn.attributes.color!==void 0,Gn=bn.attributes.normal===void 0;if(Mn.isPoints){const un="PointsMaterial:"+Hn.uuid;let Wt=this.cache.get(un);Wt||(Wt=new it.PointsMaterial,it.Material.prototype.copy.call(Wt,Hn),Wt.color.copy(Hn.color),Wt.map=Hn.map,Wt.sizeAttenuation=!1,this.cache.add(un,Wt)),Hn=Wt}else if(Mn.isLine){const un="LineBasicMaterial:"+Hn.uuid;let Wt=this.cache.get(un);Wt||(Wt=new it.LineBasicMaterial,it.Material.prototype.copy.call(Wt,Hn),Wt.color.copy(Hn.color),Wt.map=Hn.map,this.cache.add(un,Wt)),Hn=Wt}if(Dn||Un||Gn){let un="ClonedMaterial:"+Hn.uuid+":";Dn&&(un+="derivative-tangents:"),Un&&(un+="vertex-colors:"),Gn&&(un+="flat-shading:");let Wt=this.cache.get(un);Wt||(Wt=Hn.clone(),Un&&(Wt.vertexColors=!0),Gn&&(Wt.flatShading=!0),Dn&&(Wt.normalScale&&(Wt.normalScale.y*=-1),Wt.clearcoatNormalScale&&(Wt.clearcoatNormalScale.y*=-1)),this.cache.add(un,Wt),this.associations.set(Wt,this.associations.get(Hn))),Hn=Wt}Mn.material=Hn}getMaterialType(){return it.MeshStandardMaterial}loadMaterial(Mn){const bn=this,Hn=this.json,Dn=this.extensions,Un=Hn.materials[Mn];let Gn;const un={},Wt=Un.extensions||{},jt=[];if(Wt[Et.KHR_MATERIALS_UNLIT]){const Rn=Dn[Et.KHR_MATERIALS_UNLIT];Gn=Rn.getMaterialType(),jt.push(Rn.extendParams(un,Un,bn))}else{const Rn=Un.pbrMetallicRoughness||{};if(un.color=new it.Color(1,1,1),un.opacity=1,Array.isArray(Rn.baseColorFactor)){const Wn=Rn.baseColorFactor;un.color.setRGB(Wn[0],Wn[1],Wn[2],it.LinearSRGBColorSpace),un.opacity=Wn[3]}Rn.baseColorTexture!==void 0&&jt.push(bn.assignTexture(un,"map",Rn.baseColorTexture,it.SRGBColorSpace)),un.metalness=Rn.metallicFactor!==void 0?Rn.metallicFactor:1,un.roughness=Rn.roughnessFactor!==void 0?Rn.roughnessFactor:1,Rn.metallicRoughnessTexture!==void 0&&(jt.push(bn.assignTexture(un,"metalnessMap",Rn.metallicRoughnessTexture)),jt.push(bn.assignTexture(un,"roughnessMap",Rn.metallicRoughnessTexture))),Gn=this._invokeOne(function(Wn){return Wn.getMaterialType&&Wn.getMaterialType(Mn)}),jt.push(Promise.all(this._invokeAll(function(Wn){return Wn.extendMaterialParams&&Wn.extendMaterialParams(Mn,un)})))}Un.doubleSided===!0&&(un.side=it.DoubleSide);const yn=Un.alphaMode||go.OPAQUE;if(yn===go.BLEND?(un.transparent=!0,un.depthWrite=!1):(un.transparent=!1,yn===go.MASK&&(un.alphaTest=Un.alphaCutoff!==void 0?Un.alphaCutoff:.5)),Un.normalTexture!==void 0&&Gn!==it.MeshBasicMaterial&&(jt.push(bn.assignTexture(un,"normalMap",Un.normalTexture)),un.normalScale=new it.Vector2(1,1),Un.normalTexture.scale!==void 0)){const Rn=Un.normalTexture.scale;un.normalScale.set(Rn,Rn)}if(Un.occlusionTexture!==void 0&&Gn!==it.MeshBasicMaterial&&(jt.push(bn.assignTexture(un,"aoMap",Un.occlusionTexture)),Un.occlusionTexture.strength!==void 0&&(un.aoMapIntensity=Un.occlusionTexture.strength)),Un.emissiveFactor!==void 0&&Gn!==it.MeshBasicMaterial){const Rn=Un.emissiveFactor;un.emissive=new it.Color().setRGB(Rn[0],Rn[1],Rn[2],it.LinearSRGBColorSpace)}return Un.emissiveTexture!==void 0&&Gn!==it.MeshBasicMaterial&&jt.push(bn.assignTexture(un,"emissiveMap",Un.emissiveTexture,it.SRGBColorSpace)),Promise.all(jt).then(function(){const Rn=new Gn(un);return Un.name&&(Rn.name=Un.name),xo(Rn,Un),bn.associations.set(Rn,{materials:Mn}),Un.extensions&&Ys(Dn,Rn,Un),Rn})}createUniqueName(Mn){const bn=it.PropertyBinding.sanitizeNodeName(Mn||"");return bn in this.nodeNamesUsed?bn+"_"+ ++this.nodeNamesUsed[bn]:(this.nodeNamesUsed[bn]=0,bn)}loadGeometries(Mn){const bn=this,Hn=this.extensions,Dn=this.primitiveCache;function Un(un){return Hn[Et.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(un,bn).then(function(Wt){return p0(Wt,un,bn)})}const Gn=[];for(let un=0,Wt=Mn.length;un<Wt;un++){const jt=Mn[un],yn=j0(jt),Rn=Dn[yn];if(Rn)Gn.push(Rn.promise);else{let Wn;jt.extensions&&jt.extensions[Et.KHR_DRACO_MESH_COMPRESSION]?Wn=Un(jt):Wn=p0(new it.BufferGeometry,jt,bn),Dn[yn]={primitive:jt,promise:Wn},Gn.push(Wn)}}return Promise.all(Gn)}loadMesh(Mn){const bn=this,Hn=this.json,Dn=this.extensions,Un=Hn.meshes[Mn],Gn=Un.primitives,un=[];for(let Wt=0,jt=Gn.length;Wt<jt;Wt++){const yn=Gn[Wt].material===void 0?ho(this.cache):this.getDependency("material",Gn[Wt].material);un.push(yn)}return un.push(bn.loadGeometries(Gn)),Promise.all(un).then(function(Wt){const jt=Wt.slice(0,Wt.length-1),yn=Wt[Wt.length-1],Rn=[];for(let rr=0,ns=yn.length;rr<ns;rr++){const ps=yn[rr],os=Gn[rr];let as;const Cs=jt[rr];if(os.mode===Lr.TRIANGLES||os.mode===Lr.TRIANGLE_STRIP||os.mode===Lr.TRIANGLE_FAN||os.mode===void 0)as=Un.isSkinnedMesh===!0?new it.SkinnedMesh(ps,Cs):new it.Mesh(ps,Cs),as.isSkinnedMesh===!0&&as.normalizeSkinWeights(),os.mode===Lr.TRIANGLE_STRIP?as.geometry=(0,dt.toTrianglesDrawMode)(as.geometry,it.TriangleStripDrawMode):os.mode===Lr.TRIANGLE_FAN&&(as.geometry=(0,dt.toTrianglesDrawMode)(as.geometry,it.TriangleFanDrawMode));else if(os.mode===Lr.LINES)as=new it.LineSegments(ps,Cs);else if(os.mode===Lr.LINE_STRIP)as=new it.Line(ps,Cs);else if(os.mode===Lr.LINE_LOOP)as=new it.LineLoop(ps,Cs);else if(os.mode===Lr.POINTS)as=new it.Points(ps,Cs);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+os.mode);Object.keys(as.geometry.morphAttributes).length>0&&Pn(as,Un),as.name=bn.createUniqueName(Un.name||"mesh_"+Mn),xo(as,Un),os.extensions&&Ys(Dn,as,os),bn.assignFinalMaterial(as),Rn.push(as)}for(let rr=0,ns=Rn.length;rr<ns;rr++)bn.associations.set(Rn[rr],{meshes:Mn,primitives:rr});if(Rn.length===1)return Un.extensions&&Ys(Dn,Rn[0],Un),Rn[0];const Wn=new it.Group;Un.extensions&&Ys(Dn,Wn,Un),bn.associations.set(Wn,{meshes:Mn});for(let rr=0,ns=Rn.length;rr<ns;rr++)Wn.add(Rn[rr]);return Wn})}loadCamera(Mn){let bn;const Hn=this.json.cameras[Mn],Dn=Hn[Hn.type];if(!Dn){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Hn.type==="perspective"?bn=new it.PerspectiveCamera(it.MathUtils.radToDeg(Dn.yfov),Dn.aspectRatio||1,Dn.znear||1,Dn.zfar||2e6):Hn.type==="orthographic"&&(bn=new it.OrthographicCamera(-Dn.xmag,Dn.xmag,Dn.ymag,-Dn.ymag,Dn.znear,Dn.zfar)),Hn.name&&(bn.name=this.createUniqueName(Hn.name)),xo(bn,Hn),Promise.resolve(bn)}loadSkin(Mn){const bn=this.json.skins[Mn],Hn=[];for(let Dn=0,Un=bn.joints.length;Dn<Un;Dn++)Hn.push(this._loadNodeShallow(bn.joints[Dn]));return bn.inverseBindMatrices!==void 0?Hn.push(this.getDependency("accessor",bn.inverseBindMatrices)):Hn.push(null),Promise.all(Hn).then(function(Dn){const Un=Dn.pop(),Gn=Dn,un=[],Wt=[];for(let jt=0,yn=Gn.length;jt<yn;jt++){const Rn=Gn[jt];if(Rn){un.push(Rn);const Wn=new it.Matrix4;Un!==null&&Wn.fromArray(Un.array,jt*16),Wt.push(Wn)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',bn.joints[jt])}return new it.Skeleton(un,Wt)})}loadAnimation(Mn){const bn=this.json,Hn=this,Dn=bn.animations[Mn],Un=Dn.name?Dn.name:"animation_"+Mn,Gn=[],un=[],Wt=[],jt=[],yn=[];for(let Rn=0,Wn=Dn.channels.length;Rn<Wn;Rn++){const rr=Dn.channels[Rn],ns=Dn.samplers[rr.sampler],ps=rr.target,os=ps.node,as=Dn.parameters!==void 0?Dn.parameters[ns.input]:ns.input,Cs=Dn.parameters!==void 0?Dn.parameters[ns.output]:ns.output;ps.node!==void 0&&(Gn.push(this.getDependency("node",os)),un.push(this.getDependency("accessor",as)),Wt.push(this.getDependency("accessor",Cs)),jt.push(ns),yn.push(ps))}return Promise.all([Promise.all(Gn),Promise.all(un),Promise.all(Wt),Promise.all(jt),Promise.all(yn)]).then(function(Rn){const Wn=Rn[0],rr=Rn[1],ns=Rn[2],ps=Rn[3],os=Rn[4],as=[];for(let Cs=0,U0=Wn.length;Cs<U0;Cs++){const to=Wn[Cs],Cr=rr[Cs],i0=ns[Cs],o0=ps[Cs],Q0=os[Cs];if(to===void 0)continue;to.updateMatrix&&to.updateMatrix();const D0=Hn._createAnimationTracks(to,Cr,i0,o0,Q0);if(D0)for(let u1=0;u1<D0.length;u1++)as.push(D0[u1])}return new it.AnimationClip(Un,void 0,as)})}createNodeMesh(Mn){const bn=this.json,Hn=this,Dn=bn.nodes[Mn];return Dn.mesh===void 0?null:Hn.getDependency("mesh",Dn.mesh).then(function(Un){const Gn=Hn._getNodeRef(Hn.meshCache,Dn.mesh,Un);return Dn.weights!==void 0&&Gn.traverse(function(un){if(un.isMesh)for(let Wt=0,jt=Dn.weights.length;Wt<jt;Wt++)un.morphTargetInfluences[Wt]=Dn.weights[Wt]}),Gn})}loadNode(Mn){const bn=this.json,Hn=this,Dn=bn.nodes[Mn],Un=Hn._loadNodeShallow(Mn),Gn=[],un=Dn.children||[];for(let jt=0,yn=un.length;jt<yn;jt++)Gn.push(Hn.getDependency("node",un[jt]));const Wt=Dn.skin===void 0?Promise.resolve(null):Hn.getDependency("skin",Dn.skin);return Promise.all([Un,Promise.all(Gn),Wt]).then(function(jt){const yn=jt[0],Rn=jt[1],Wn=jt[2];Wn!==null&&yn.traverse(function(rr){rr.isSkinnedMesh&&rr.bind(Wn,f0)});for(let rr=0,ns=Rn.length;rr<ns;rr++)yn.add(Rn[rr]);return yn})}_loadNodeShallow(Mn){const bn=this.json,Hn=this.extensions,Dn=this;if(this.nodeCache[Mn]!==void 0)return this.nodeCache[Mn];const Un=bn.nodes[Mn],Gn=Un.name?Dn.createUniqueName(Un.name):"",un=[],Wt=Dn._invokeOne(function(jt){return jt.createNodeMesh&&jt.createNodeMesh(Mn)});return Wt&&un.push(Wt),Un.camera!==void 0&&un.push(Dn.getDependency("camera",Un.camera).then(function(jt){return Dn._getNodeRef(Dn.cameraCache,Un.camera,jt)})),Dn._invokeAll(function(jt){return jt.createNodeAttachment&&jt.createNodeAttachment(Mn)}).forEach(function(jt){un.push(jt)}),this.nodeCache[Mn]=Promise.all(un).then(function(jt){let yn;if(Un.isBone===!0?yn=new it.Bone:jt.length>1?yn=new it.Group:jt.length===1?yn=jt[0]:yn=new it.Object3D,yn!==jt[0])for(let Rn=0,Wn=jt.length;Rn<Wn;Rn++)yn.add(jt[Rn]);if(Un.name&&(yn.userData.name=Un.name,yn.name=Gn),xo(yn,Un),Un.extensions&&Ys(Hn,yn,Un),Un.matrix!==void 0){const Rn=new it.Matrix4;Rn.fromArray(Un.matrix),yn.applyMatrix4(Rn)}else Un.translation!==void 0&&yn.position.fromArray(Un.translation),Un.rotation!==void 0&&yn.quaternion.fromArray(Un.rotation),Un.scale!==void 0&&yn.scale.fromArray(Un.scale);return Dn.associations.has(yn)||Dn.associations.set(yn,{}),Dn.associations.get(yn).nodes=Mn,yn}),this.nodeCache[Mn]}loadScene(Mn){const bn=this.extensions,Hn=this.json.scenes[Mn],Dn=this,Un=new it.Group;Hn.name&&(Un.name=Dn.createUniqueName(Hn.name)),xo(Un,Hn),Hn.extensions&&Ys(bn,Un,Hn);const Gn=Hn.nodes||[],un=[];for(let Wt=0,jt=Gn.length;Wt<jt;Wt++)un.push(Dn.getDependency("node",Gn[Wt]));return Promise.all(un).then(function(Wt){for(let yn=0,Rn=Wt.length;yn<Rn;yn++)Un.add(Wt[yn]);const jt=yn=>{const Rn=new Map;for(const[Wn,rr]of Dn.associations)(Wn instanceof it.Material||Wn instanceof it.Texture)&&Rn.set(Wn,rr);return yn.traverse(Wn=>{const rr=Dn.associations.get(Wn);rr!=null&&Rn.set(Wn,rr)}),Rn};return Dn.associations=jt(Un),Un})}_createAnimationTracks(Mn,bn,Hn,Dn,Un){const Gn=[],un=Mn.name?Mn.name:Mn.uuid,Wt=[];Zs[Un.path]===Zs.weights?Mn.traverse(function(Wn){Wn.morphTargetInfluences&&Wt.push(Wn.name?Wn.name:Wn.uuid)}):Wt.push(un);let jt;switch(Zs[Un.path]){case Zs.weights:jt=it.NumberKeyframeTrack;break;case Zs.rotation:jt=it.QuaternionKeyframeTrack;break;case Zs.position:case Zs.scale:jt=it.VectorKeyframeTrack;break;default:switch(Hn.itemSize){case 1:jt=it.NumberKeyframeTrack;break;case 2:case 3:default:jt=it.VectorKeyframeTrack;break}break}const yn=Dn.interpolation!==void 0?ao[Dn.interpolation]:it.InterpolateLinear,Rn=this._getArrayFromAccessor(Hn);for(let Wn=0,rr=Wt.length;Wn<rr;Wn++){const ns=new jt(Wt[Wn]+"."+Zs[Un.path],bn.array,Rn,yn);Dn.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(ns),Gn.push(ns)}return Gn}_getArrayFromAccessor(Mn){let bn=Mn.array;if(Mn.normalized){const Hn=oo(bn.constructor),Dn=new Float32Array(bn.length);for(let Un=0,Gn=bn.length;Un<Gn;Un++)Dn[Un]=bn[Un]*Hn;bn=Dn}return bn}_createCubicSplineTrackInterpolant(Mn){Mn.createInterpolant=function(Hn){const Dn=this instanceof it.QuaternionKeyframeTrack?hr:Zn;return new Dn(this.times,this.values,this.getValueSize()/3,Hn)},Mn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function na(es,Mn,bn){const Hn=Mn.attributes,Dn=new it.Box3;if(Hn.POSITION!==void 0){const un=bn.json.accessors[Hn.POSITION],Wt=un.min,jt=un.max;if(Wt!==void 0&&jt!==void 0){if(Dn.set(new it.Vector3(Wt[0],Wt[1],Wt[2]),new it.Vector3(jt[0],jt[1],jt[2])),un.normalized){const yn=oo(Tr[un.componentType]);Dn.min.multiplyScalar(yn),Dn.max.multiplyScalar(yn)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Un=Mn.targets;if(Un!==void 0){const un=new it.Vector3,Wt=new it.Vector3;for(let jt=0,yn=Un.length;jt<yn;jt++){const Rn=Un[jt];if(Rn.POSITION!==void 0){const Wn=bn.json.accessors[Rn.POSITION],rr=Wn.min,ns=Wn.max;if(rr!==void 0&&ns!==void 0){if(Wt.setX(Math.max(Math.abs(rr[0]),Math.abs(ns[0]))),Wt.setY(Math.max(Math.abs(rr[1]),Math.abs(ns[1]))),Wt.setZ(Math.max(Math.abs(rr[2]),Math.abs(ns[2]))),Wn.normalized){const ps=oo(Tr[Wn.componentType]);Wt.multiplyScalar(ps)}un.max(Wt)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Dn.expandByVector(un)}es.boundingBox=Dn;const Gn=new it.Sphere;Dn.getCenter(Gn.center),Gn.radius=Dn.min.distanceTo(Dn.max)/2,es.boundingSphere=Gn}function p0(es,Mn,bn){const Hn=Mn.attributes,Dn=[];function Un(Gn,un){return bn.getDependency("accessor",Gn).then(function(Wt){es.setAttribute(un,Wt)})}for(const Gn in Hn){const un=Rs[Gn]||Gn.toLowerCase();un in es.attributes||Dn.push(Un(Hn[Gn],un))}if(Mn.indices!==void 0&&!es.index){const Gn=bn.getDependency("accessor",Mn.indices).then(function(un){es.setIndex(un)});Dn.push(Gn)}return it.ColorManagement.workingColorSpace!==it.LinearSRGBColorSpace&&"COLOR_0"in Hn&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${it.ColorManagement.workingColorSpace}" not supported.`),xo(es,Mn),na(es,Mn,bn),Promise.all(Dn).then(function(){return Mn.targets!==void 0?$o(es,Mn.targets,bn):es})}},"./node_modules/three/examples/jsm/loaders/KTX2Loader.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{KTX2Loader:()=>pt});var it=vt("./node_modules/three/build/three.module.js"),dt=vt("./node_modules/three/examples/jsm/utils/WorkerPool.js"),bt=vt("./node_modules/three/examples/jsm/libs/ktx-parse.module.js"),Tt=vt("./node_modules/three/examples/jsm/libs/zstddec.module.js");const Et=new WeakMap;let Mt=0,Rt;class pt extends it.Loader{constructor(Ut){super(Ut),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new dt.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(Ut){return this.transcoderPath=Ut,this}setWorkerLimit(Ut){return this.workerPool.setWorkerLimit(Ut),this}async detectSupportAsync(Ut){return this.workerConfig={astcSupported:await Ut.hasFeatureAsync("texture-compression-astc"),etc1Supported:await Ut.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await Ut.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await Ut.hasFeatureAsync("texture-compression-bc"),bptcSupported:await Ut.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await Ut.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(Ut){return Ut.isWebGPURenderer===!0?this.workerConfig={astcSupported:Ut.hasFeature("texture-compression-astc"),etc1Supported:Ut.hasFeature("texture-compression-etc1"),etc2Supported:Ut.hasFeature("texture-compression-etc2"),dxtSupported:Ut.hasFeature("texture-compression-bc"),bptcSupported:Ut.hasFeature("texture-compression-bptc"),pvrtcSupported:Ut.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:Ut.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:Ut.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:Ut.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:Ut.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:Ut.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:Ut.extensions.has("WEBGL_compressed_texture_pvrtc")||Ut.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const Ut=new it.FileLoader(this.manager);Ut.setPath(this.transcoderPath),Ut.setWithCredentials(this.withCredentials);const Xt=Ut.loadAsync("basis_transcoder.js"),Qt=new it.FileLoader(this.manager);Qt.setPath(this.transcoderPath),Qt.setResponseType("arraybuffer"),Qt.setWithCredentials(this.withCredentials);const tn=Qt.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([Xt,tn]).then(([on,vn])=>{const fn=pt.BasisWorker.toString(),Cn=["/* constants */","let _EngineFormat = "+JSON.stringify(pt.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(pt.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(pt.BasisFormat),"/* basis_transcoder.js */",on,"/* worker */",fn.substring(fn.indexOf("{")+1,fn.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Cn])),this.transcoderBinary=vn,this.workerPool.setWorkerCreator(()=>{const dn=new Worker(this.workerSourceURL),An=this.transcoderBinary.slice(0);return dn.postMessage({type:"init",config:this.workerConfig,transcoderBinary:An},[An]),dn})}),Mt>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Mt++}return this.transcoderPending}load(Ut,Xt,Qt,tn){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const on=new it.FileLoader(this.manager);on.setResponseType("arraybuffer"),on.setWithCredentials(this.withCredentials),on.load(Ut,vn=>{if(Et.has(vn))return Et.get(vn).promise.then(Xt).catch(tn);this._createTexture(vn).then(fn=>Xt?Xt(fn):null).catch(tn)},Qt,tn)}_createTextureFrom(Ut,Xt){const{faces:Qt,width:tn,height:on,format:vn,type:fn,error:Cn,dfdFlags:dn}=Ut;if(fn==="error")return Promise.reject(Cn);let An;if(Xt.faceCount===6)An=new it.CompressedCubeTexture(Qt,vn,it.UnsignedByteType);else{const nn=Qt[0].mipmaps;An=Xt.layerCount>1?new it.CompressedArrayTexture(nn,tn,on,Xt.layerCount,vn,it.UnsignedByteType):new it.CompressedTexture(nn,tn,on,vn,it.UnsignedByteType)}return An.minFilter=Qt[0].mipmaps.length===1?it.LinearFilter:it.LinearMipmapLinearFilter,An.magFilter=it.LinearFilter,An.generateMipmaps=!1,An.needsUpdate=!0,An.colorSpace=Dt(Xt),An.premultiplyAlpha=!!(dn&bt.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),An}async _createTexture(Ut,Xt={}){const Qt=(0,bt.read)(new Uint8Array(Ut));if(Qt.vkFormat!==bt.VK_FORMAT_UNDEFINED)return xt(Qt);const tn=Xt,on=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:Ut,taskConfig:tn},[Ut])).then(vn=>this._createTextureFrom(vn.data,Qt));return Et.set(Ut,{promise:on}),on}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Mt--,this}}pt.BasisFormat={ETC1S:0,UASTC_4x4:1},pt.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},pt.EngineFormat={RGBAFormat:it.RGBAFormat,RGBA_ASTC_4x4_Format:it.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:it.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:it.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:it.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:it.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:it.RGB_ETC1_Format,RGB_ETC2_Format:it.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:it.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:it.RGBA_S3TC_DXT1_Format},pt.BasisWorker=function(){let Ht,Ut,Xt;const Qt=_EngineFormat,tn=_TranscoderFormat,on=_BasisFormat;self.addEventListener("message",function(gn){const In=gn.data;switch(In.type){case"init":Ht=In.config,vn(In.transcoderBinary);break;case"transcode":Ut.then(()=>{try{const{faces:Vn,buffers:Zn,width:lr,height:hr,hasAlpha:Lr,format:Tr,dfdFlags:As}=fn(In.buffer);self.postMessage({type:"transcode",id:In.id,faces:Vn,width:lr,height:hr,hasAlpha:Lr,format:Tr,dfdFlags:As},Zn)}catch(Vn){console.error(Vn),self.postMessage({type:"error",id:In.id,error:Vn.message})}});break}});function vn(gn){Ut=new Promise(In=>{Xt={wasmBinary:gn,onRuntimeInitialized:In},BASIS(Xt)}).then(()=>{Xt.initializeBasis(),Xt.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function fn(gn){const In=new Xt.KTX2File(new Uint8Array(gn));function Vn(){In.close(),In.delete()}if(!In.isValid())throw Vn(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Zn=In.isUASTC()?on.UASTC_4x4:on.ETC1S,lr=In.getWidth(),hr=In.getHeight(),Lr=In.getLayers()||1,Tr=In.getLevels(),As=In.getFaces(),Yr=In.getHasAlpha(),ms=In.getDFDFlags(),{transcoderFormat:Rs,engineFormat:Zs}=nn(Zn,lr,hr,Yr);if(!lr||!hr||!Tr)throw Vn(),new Error("THREE.KTX2Loader:	Invalid texture");if(!In.startTranscoding())throw Vn(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ao=[],go=[];for(let ho=0;ho<As;ho++){const Ys=[];for(let xo=0;xo<Tr;xo++){const $o=[];let Pn,j0;for(let oo=0;oo<Lr;oo++){const L0=In.getImageLevelInfo(xo,oo,ho);ho===0&&xo===0&&oo===0&&(L0.origWidth%4!==0||L0.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),Tr>1?(Pn=L0.origWidth,j0=L0.origHeight):(Pn=L0.width,j0=L0.height);const f0=new Uint8Array(In.getImageTranscodedSizeInBytes(xo,oo,0,Rs));if(!In.transcodeImage(f0,xo,oo,ho,Rs,0,-1,-1))throw Vn(),new Error("THREE.KTX2Loader: .transcodeImage failed.");$o.push(f0)}const Ho=mn($o);Ys.push({data:Ho,width:Pn,height:j0}),go.push(Ho.buffer)}ao.push({mipmaps:Ys,width:lr,height:hr,format:Zs})}return Vn(),{faces:ao,buffers:go,width:lr,height:hr,hasAlpha:Yr,format:Zs,dfdFlags:ms}}const Cn=[{if:"astcSupported",basisFormat:[on.UASTC_4x4],transcoderFormat:[tn.ASTC_4x4,tn.ASTC_4x4],engineFormat:[Qt.RGBA_ASTC_4x4_Format,Qt.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[on.ETC1S,on.UASTC_4x4],transcoderFormat:[tn.BC7_M5,tn.BC7_M5],engineFormat:[Qt.RGBA_BPTC_Format,Qt.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[on.ETC1S,on.UASTC_4x4],transcoderFormat:[tn.BC1,tn.BC3],engineFormat:[Qt.RGBA_S3TC_DXT1_Format,Qt.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[on.ETC1S,on.UASTC_4x4],transcoderFormat:[tn.ETC1,tn.ETC2],engineFormat:[Qt.RGB_ETC2_Format,Qt.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[on.ETC1S,on.UASTC_4x4],transcoderFormat:[tn.ETC1],engineFormat:[Qt.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[on.ETC1S,on.UASTC_4x4],transcoderFormat:[tn.PVRTC1_4_RGB,tn.PVRTC1_4_RGBA],engineFormat:[Qt.RGB_PVRTC_4BPPV1_Format,Qt.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],dn=Cn.sort(function(gn,In){return gn.priorityETC1S-In.priorityETC1S}),An=Cn.sort(function(gn,In){return gn.priorityUASTC-In.priorityUASTC});function nn(gn,In,Vn,Zn){let lr,hr;const Lr=gn===on.ETC1S?dn:An;for(let Tr=0;Tr<Lr.length;Tr++){const As=Lr[Tr];if(Ht[As.if]&&As.basisFormat.includes(gn)&&!(Zn&&As.transcoderFormat.length<2)&&!(As.needsPowerOfTwo&&!(Zt(In)&&Zt(Vn))))return lr=As.transcoderFormat[Zn?1:0],hr=As.engineFormat[Zn?1:0],{transcoderFormat:lr,engineFormat:hr}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),lr=tn.RGBA32,hr=Qt.RGBAFormat,{transcoderFormat:lr,engineFormat:hr}}function Zt(gn){return gn<=2?!0:(gn&gn-1)===0&&gn!==0}function mn(gn){if(gn.length===1)return gn[0];let In=0;for(let lr=0;lr<gn.length;lr++){const hr=gn[lr];In+=hr.byteLength}const Vn=new Uint8Array(In);let Zn=0;for(let lr=0;lr<gn.length;lr++){const hr=gn[lr];Vn.set(hr,Zn),Zn+=hr.byteLength}return Vn}};const mt=new Set([it.RGBAFormat,it.RGFormat,it.RedFormat]),gt={[bt.VK_FORMAT_R32G32B32A32_SFLOAT]:it.RGBAFormat,[bt.VK_FORMAT_R16G16B16A16_SFLOAT]:it.RGBAFormat,[bt.VK_FORMAT_R8G8B8A8_UNORM]:it.RGBAFormat,[bt.VK_FORMAT_R8G8B8A8_SRGB]:it.RGBAFormat,[bt.VK_FORMAT_R32G32_SFLOAT]:it.RGFormat,[bt.VK_FORMAT_R16G16_SFLOAT]:it.RGFormat,[bt.VK_FORMAT_R8G8_UNORM]:it.RGFormat,[bt.VK_FORMAT_R8G8_SRGB]:it.RGFormat,[bt.VK_FORMAT_R32_SFLOAT]:it.RedFormat,[bt.VK_FORMAT_R16_SFLOAT]:it.RedFormat,[bt.VK_FORMAT_R8_SRGB]:it.RedFormat,[bt.VK_FORMAT_R8_UNORM]:it.RedFormat,[bt.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:it.RGBA_ASTC_6x6_Format,[bt.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:it.RGBA_ASTC_6x6_Format},Ct={[bt.VK_FORMAT_R32G32B32A32_SFLOAT]:it.FloatType,[bt.VK_FORMAT_R16G16B16A16_SFLOAT]:it.HalfFloatType,[bt.VK_FORMAT_R8G8B8A8_UNORM]:it.UnsignedByteType,[bt.VK_FORMAT_R8G8B8A8_SRGB]:it.UnsignedByteType,[bt.VK_FORMAT_R32G32_SFLOAT]:it.FloatType,[bt.VK_FORMAT_R16G16_SFLOAT]:it.HalfFloatType,[bt.VK_FORMAT_R8G8_UNORM]:it.UnsignedByteType,[bt.VK_FORMAT_R8G8_SRGB]:it.UnsignedByteType,[bt.VK_FORMAT_R32_SFLOAT]:it.FloatType,[bt.VK_FORMAT_R16_SFLOAT]:it.HalfFloatType,[bt.VK_FORMAT_R8_SRGB]:it.UnsignedByteType,[bt.VK_FORMAT_R8_UNORM]:it.UnsignedByteType,[bt.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:it.UnsignedByteType,[bt.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:it.UnsignedByteType};async function xt(Ht){const{vkFormat:Ut}=Ht;if(gt[Ut]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let Xt;Ht.supercompressionScheme===bt.KHR_SUPERCOMPRESSION_ZSTD&&(Rt||(Rt=new Promise(async on=>{const vn=new Tt.ZSTDDecoder;await vn.init(),on(vn)})),Xt=await Rt);const Qt=[];for(let on=0;on<Ht.levels.length;on++){const vn=Math.max(1,Ht.pixelWidth>>on),fn=Math.max(1,Ht.pixelHeight>>on),Cn=Ht.pixelDepth?Math.max(1,Ht.pixelDepth>>on):0,dn=Ht.levels[on];let An;if(Ht.supercompressionScheme===bt.KHR_SUPERCOMPRESSION_NONE)An=dn.levelData;else if(Ht.supercompressionScheme===bt.KHR_SUPERCOMPRESSION_ZSTD)An=Xt.decode(dn.levelData,dn.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let nn;Ct[Ut]===it.FloatType?nn=new Float32Array(An.buffer,An.byteOffset,An.byteLength/Float32Array.BYTES_PER_ELEMENT):Ct[Ut]===it.HalfFloatType?nn=new Uint16Array(An.buffer,An.byteOffset,An.byteLength/Uint16Array.BYTES_PER_ELEMENT):nn=An,Qt.push({data:nn,width:vn,height:fn,depth:Cn})}let tn;if(mt.has(gt[Ut]))tn=Ht.pixelDepth===0?new it.DataTexture(Qt[0].data,Ht.pixelWidth,Ht.pixelHeight):new it.Data3DTexture(Qt[0].data,Ht.pixelWidth,Ht.pixelHeight,Ht.pixelDepth);else{if(Ht.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");tn=new it.CompressedTexture(Qt,Ht.pixelWidth,Ht.pixelHeight)}return tn.mipmaps=Qt,tn.type=Ct[Ut],tn.format=gt[Ut],tn.colorSpace=Dt(Ht),tn.needsUpdate=!0,Promise.resolve(tn)}function Dt(Ht){const Ut=Ht.dataFormatDescriptor[0];return Ut.colorPrimaries===bt.KHR_DF_PRIMARIES_BT709?Ut.transferFunction===bt.KHR_DF_TRANSFER_SRGB?it.SRGBColorSpace:it.LinearSRGBColorSpace:Ut.colorPrimaries===bt.KHR_DF_PRIMARIES_DISPLAYP3?Ut.transferFunction===bt.KHR_DF_TRANSFER_SRGB?it.DisplayP3ColorSpace:it.LinearDisplayP3ColorSpace:(Ut.colorPrimaries===bt.KHR_DF_PRIMARIES_UNSPECIFIED||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${Ut.colorPrimaries}"`),it.NoColorSpace)}},"./node_modules/three/examples/jsm/loaders/MTLLoader.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{MTLLoader:()=>dt});var it=vt("./node_modules/three/build/three.module.js");class dt extends it.Loader{constructor(Et){super(Et)}load(Et,Mt,Rt,pt){const mt=this,gt=this.path===""?it.LoaderUtils.extractUrlBase(Et):this.path,Ct=new it.FileLoader(this.manager);Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load(Et,function(xt){try{Mt(mt.parse(xt,gt))}catch(Dt){pt?pt(Dt):console.error(Dt),mt.manager.itemError(Et)}},Rt,pt)}setMaterialOptions(Et){return this.materialOptions=Et,this}parse(Et,Mt){const Rt=Et.split(`
`);let pt={};const mt=/\s+/,gt={};for(let xt=0;xt<Rt.length;xt++){let Dt=Rt[xt];if(Dt=Dt.trim(),Dt.length===0||Dt.charAt(0)==="#")continue;const Ht=Dt.indexOf(" ");let Ut=Ht>=0?Dt.substring(0,Ht):Dt;Ut=Ut.toLowerCase();let Xt=Ht>=0?Dt.substring(Ht+1):"";if(Xt=Xt.trim(),Ut==="newmtl")pt={name:Xt},gt[Xt]=pt;else if(Ut==="ka"||Ut==="kd"||Ut==="ks"||Ut==="ke"){const Qt=Xt.split(mt,3);pt[Ut]=[parseFloat(Qt[0]),parseFloat(Qt[1]),parseFloat(Qt[2])]}else pt[Ut]=Xt}const Ct=new bt(this.resourcePath||Mt,this.materialOptions);return Ct.setCrossOrigin(this.crossOrigin),Ct.setManager(this.manager),Ct.setMaterials(gt),Ct}}class bt{constructor(Et="",Mt={}){this.baseUrl=Et,this.options=Mt,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:it.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:it.RepeatWrapping}setCrossOrigin(Et){return this.crossOrigin=Et,this}setManager(Et){this.manager=Et}setMaterials(Et){this.materialsInfo=this.convert(Et),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(Et){if(!this.options)return Et;const Mt={};for(const Rt in Et){const pt=Et[Rt],mt={};Mt[Rt]=mt;for(const gt in pt){let Ct=!0,xt=pt[gt];const Dt=gt.toLowerCase();switch(Dt){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(xt=[xt[0]/255,xt[1]/255,xt[2]/255]),this.options&&this.options.ignoreZeroRGBs&&xt[0]===0&&xt[1]===0&&xt[2]===0&&(Ct=!1);break}Ct&&(mt[Dt]=xt)}}return Mt}preload(){for(const Et in this.materialsInfo)this.create(Et)}getIndex(Et){return this.nameLookup[Et]}getAsArray(){let Et=0;for(const Mt in this.materialsInfo)this.materialsArray[Et]=this.create(Mt),this.nameLookup[Mt]=Et,Et++;return this.materialsArray}create(Et){return this.materials[Et]===void 0&&this.createMaterial_(Et),this.materials[Et]}createMaterial_(Et){const Mt=this,Rt=this.materialsInfo[Et],pt={name:Et,side:this.side};function mt(Ct,xt){return typeof xt!="string"||xt===""?"":/^https?:\/\//i.test(xt)?xt:Ct+xt}function gt(Ct,xt){if(pt[Ct])return;const Dt=Mt.getTextureParams(xt,pt),Ht=Mt.loadTexture(mt(Mt.baseUrl,Dt.url));Ht.repeat.copy(Dt.scale),Ht.offset.copy(Dt.offset),Ht.wrapS=Mt.wrap,Ht.wrapT=Mt.wrap,(Ct==="map"||Ct==="emissiveMap")&&(Ht.colorSpace=it.SRGBColorSpace),pt[Ct]=Ht}for(const Ct in Rt){const xt=Rt[Ct];let Dt;if(xt!=="")switch(Ct.toLowerCase()){case"kd":pt.color=new it.Color().fromArray(xt).convertSRGBToLinear();break;case"ks":pt.specular=new it.Color().fromArray(xt).convertSRGBToLinear();break;case"ke":pt.emissive=new it.Color().fromArray(xt).convertSRGBToLinear();break;case"map_kd":gt("map",xt);break;case"map_ks":gt("specularMap",xt);break;case"map_ke":gt("emissiveMap",xt);break;case"norm":gt("normalMap",xt);break;case"map_bump":case"bump":gt("bumpMap",xt);break;case"map_d":gt("alphaMap",xt),pt.transparent=!0;break;case"ns":pt.shininess=parseFloat(xt);break;case"d":Dt=parseFloat(xt),Dt<1&&(pt.opacity=Dt,pt.transparent=!0);break;case"tr":Dt=parseFloat(xt),this.options&&this.options.invertTrProperty&&(Dt=1-Dt),Dt>0&&(pt.opacity=1-Dt,pt.transparent=!0);break}}return this.materials[Et]=new it.MeshPhongMaterial(pt),this.materials[Et]}getTextureParams(Et,Mt){const Rt={scale:new it.Vector2(1,1),offset:new it.Vector2(0,0)},pt=Et.split(/\s+/);let mt;return mt=pt.indexOf("-bm"),mt>=0&&(Mt.bumpScale=parseFloat(pt[mt+1]),pt.splice(mt,2)),mt=pt.indexOf("-s"),mt>=0&&(Rt.scale.set(parseFloat(pt[mt+1]),parseFloat(pt[mt+2])),pt.splice(mt,4)),mt=pt.indexOf("-o"),mt>=0&&(Rt.offset.set(parseFloat(pt[mt+1]),parseFloat(pt[mt+2])),pt.splice(mt,4)),Rt.url=pt.join(" ").trim(),Rt}loadTexture(Et,Mt,Rt,pt,mt){const gt=this.manager!==void 0?this.manager:it.DefaultLoadingManager;let Ct=gt.getHandler(Et);Ct===null&&(Ct=new it.TextureLoader(gt)),Ct.setCrossOrigin&&Ct.setCrossOrigin(this.crossOrigin);const xt=Ct.load(Et,Rt,pt,mt);return Mt!==void 0&&(xt.mapping=Mt),xt}}},"./node_modules/three/examples/jsm/loaders/OBJLoader.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{OBJLoader:()=>Ht});var it=vt("./node_modules/three/build/three.module.js");const dt=/^[og]\s*(.+)?/,bt=/^mtllib /,Tt=/^usemtl /,Et=/^usemap /,Mt=/\s+/,Rt=new it.Vector3,pt=new it.Vector3,mt=new it.Vector3,gt=new it.Vector3,Ct=new it.Vector3,xt=new it.Color;function Dt(){const Ut={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(Xt,Qt){if(this.object&&this.object.fromDeclaration===!1){this.object.name=Xt,this.object.fromDeclaration=Qt!==!1;return}const tn=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:Xt||"",fromDeclaration:Qt!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(on,vn){const fn=this._finalize(!1);fn&&(fn.inherited||fn.groupCount<=0)&&this.materials.splice(fn.index,1);const Cn={index:this.materials.length,name:on||"",mtllib:Array.isArray(vn)&&vn.length>0?vn[vn.length-1]:"",smooth:fn!==void 0?fn.smooth:this.smooth,groupStart:fn!==void 0?fn.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(dn){const An={index:typeof dn=="number"?dn:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return An.clone=this.clone.bind(An),An}};return this.materials.push(Cn),Cn},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(on){const vn=this.currentMaterial();if(vn&&vn.groupEnd===-1&&(vn.groupEnd=this.geometry.vertices.length/3,vn.groupCount=vn.groupEnd-vn.groupStart,vn.inherited=!1),on&&this.materials.length>1)for(let fn=this.materials.length-1;fn>=0;fn--)this.materials[fn].groupCount<=0&&this.materials.splice(fn,1);return on&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),vn}},tn&&tn.name&&typeof tn.clone=="function"){const on=tn.clone(0);on.inherited=!0,this.object.materials.push(on)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(Xt,Qt){const tn=parseInt(Xt,10);return(tn>=0?tn-1:tn+Qt/3)*3},parseNormalIndex:function(Xt,Qt){const tn=parseInt(Xt,10);return(tn>=0?tn-1:tn+Qt/3)*3},parseUVIndex:function(Xt,Qt){const tn=parseInt(Xt,10);return(tn>=0?tn-1:tn+Qt/2)*2},addVertex:function(Xt,Qt,tn){const on=this.vertices,vn=this.object.geometry.vertices;vn.push(on[Xt+0],on[Xt+1],on[Xt+2]),vn.push(on[Qt+0],on[Qt+1],on[Qt+2]),vn.push(on[tn+0],on[tn+1],on[tn+2])},addVertexPoint:function(Xt){const Qt=this.vertices;this.object.geometry.vertices.push(Qt[Xt+0],Qt[Xt+1],Qt[Xt+2])},addVertexLine:function(Xt){const Qt=this.vertices;this.object.geometry.vertices.push(Qt[Xt+0],Qt[Xt+1],Qt[Xt+2])},addNormal:function(Xt,Qt,tn){const on=this.normals,vn=this.object.geometry.normals;vn.push(on[Xt+0],on[Xt+1],on[Xt+2]),vn.push(on[Qt+0],on[Qt+1],on[Qt+2]),vn.push(on[tn+0],on[tn+1],on[tn+2])},addFaceNormal:function(Xt,Qt,tn){const on=this.vertices,vn=this.object.geometry.normals;Rt.fromArray(on,Xt),pt.fromArray(on,Qt),mt.fromArray(on,tn),Ct.subVectors(mt,pt),gt.subVectors(Rt,pt),Ct.cross(gt),Ct.normalize(),vn.push(Ct.x,Ct.y,Ct.z),vn.push(Ct.x,Ct.y,Ct.z),vn.push(Ct.x,Ct.y,Ct.z)},addColor:function(Xt,Qt,tn){const on=this.colors,vn=this.object.geometry.colors;on[Xt]!==void 0&&vn.push(on[Xt+0],on[Xt+1],on[Xt+2]),on[Qt]!==void 0&&vn.push(on[Qt+0],on[Qt+1],on[Qt+2]),on[tn]!==void 0&&vn.push(on[tn+0],on[tn+1],on[tn+2])},addUV:function(Xt,Qt,tn){const on=this.uvs,vn=this.object.geometry.uvs;vn.push(on[Xt+0],on[Xt+1]),vn.push(on[Qt+0],on[Qt+1]),vn.push(on[tn+0],on[tn+1])},addDefaultUV:function(){const Xt=this.object.geometry.uvs;Xt.push(0,0),Xt.push(0,0),Xt.push(0,0)},addUVLine:function(Xt){const Qt=this.uvs;this.object.geometry.uvs.push(Qt[Xt+0],Qt[Xt+1])},addFace:function(Xt,Qt,tn,on,vn,fn,Cn,dn,An){const nn=this.vertices.length;let Zt=this.parseVertexIndex(Xt,nn),mn=this.parseVertexIndex(Qt,nn),gn=this.parseVertexIndex(tn,nn);if(this.addVertex(Zt,mn,gn),this.addColor(Zt,mn,gn),Cn!==void 0&&Cn!==""){const In=this.normals.length;Zt=this.parseNormalIndex(Cn,In),mn=this.parseNormalIndex(dn,In),gn=this.parseNormalIndex(An,In),this.addNormal(Zt,mn,gn)}else this.addFaceNormal(Zt,mn,gn);if(on!==void 0&&on!==""){const In=this.uvs.length;Zt=this.parseUVIndex(on,In),mn=this.parseUVIndex(vn,In),gn=this.parseUVIndex(fn,In),this.addUV(Zt,mn,gn),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(Xt){this.object.geometry.type="Points";const Qt=this.vertices.length;for(let tn=0,on=Xt.length;tn<on;tn++){const vn=this.parseVertexIndex(Xt[tn],Qt);this.addVertexPoint(vn),this.addColor(vn)}},addLineGeometry:function(Xt,Qt){this.object.geometry.type="Line";const tn=this.vertices.length,on=this.uvs.length;for(let vn=0,fn=Xt.length;vn<fn;vn++)this.addVertexLine(this.parseVertexIndex(Xt[vn],tn));for(let vn=0,fn=Qt.length;vn<fn;vn++)this.addUVLine(this.parseUVIndex(Qt[vn],on))}};return Ut.startObject("",!1),Ut}class Ht extends it.Loader{constructor(Xt){super(Xt),this.materials=null}load(Xt,Qt,tn,on){const vn=this,fn=new it.FileLoader(this.manager);fn.setPath(this.path),fn.setRequestHeader(this.requestHeader),fn.setWithCredentials(this.withCredentials),fn.load(Xt,function(Cn){try{Qt(vn.parse(Cn))}catch(dn){on?on(dn):console.error(dn),vn.manager.itemError(Xt)}},tn,on)}setMaterials(Xt){return this.materials=Xt,this}parse(Xt){const Qt=new Dt;Xt.indexOf(`\r
`)!==-1&&(Xt=Xt.replace(/\r\n/g,`
`)),Xt.indexOf(`\\
`)!==-1&&(Xt=Xt.replace(/\\\n/g,""));const tn=Xt.split(`
`);let on=[];for(let Cn=0,dn=tn.length;Cn<dn;Cn++){const An=tn[Cn].trimStart();if(An.length===0)continue;const nn=An.charAt(0);if(nn!=="#")if(nn==="v"){const Zt=An.split(Mt);switch(Zt[0]){case"v":Qt.vertices.push(parseFloat(Zt[1]),parseFloat(Zt[2]),parseFloat(Zt[3])),Zt.length>=7?(xt.setRGB(parseFloat(Zt[4]),parseFloat(Zt[5]),parseFloat(Zt[6])).convertSRGBToLinear(),Qt.colors.push(xt.r,xt.g,xt.b)):Qt.colors.push(void 0,void 0,void 0);break;case"vn":Qt.normals.push(parseFloat(Zt[1]),parseFloat(Zt[2]),parseFloat(Zt[3]));break;case"vt":Qt.uvs.push(parseFloat(Zt[1]),parseFloat(Zt[2]));break}}else if(nn==="f"){const mn=An.slice(1).trim().split(Mt),gn=[];for(let Vn=0,Zn=mn.length;Vn<Zn;Vn++){const lr=mn[Vn];if(lr.length>0){const hr=lr.split("/");gn.push(hr)}}const In=gn[0];for(let Vn=1,Zn=gn.length-1;Vn<Zn;Vn++){const lr=gn[Vn],hr=gn[Vn+1];Qt.addFace(In[0],lr[0],hr[0],In[1],lr[1],hr[1],In[2],lr[2],hr[2])}}else if(nn==="l"){const Zt=An.substring(1).trim().split(" ");let mn=[];const gn=[];if(An.indexOf("/")===-1)mn=Zt;else for(let In=0,Vn=Zt.length;In<Vn;In++){const Zn=Zt[In].split("/");Zn[0]!==""&&mn.push(Zn[0]),Zn[1]!==""&&gn.push(Zn[1])}Qt.addLineGeometry(mn,gn)}else if(nn==="p"){const mn=An.slice(1).trim().split(" ");Qt.addPointGeometry(mn)}else if((on=dt.exec(An))!==null){const Zt=(" "+on[0].slice(1).trim()).slice(1);Qt.startObject(Zt)}else if(Tt.test(An))Qt.object.startMaterial(An.substring(7).trim(),Qt.materialLibraries);else if(bt.test(An))Qt.materialLibraries.push(An.substring(7).trim());else if(Et.test(An))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(nn==="s"){if(on=An.split(" "),on.length>1){const mn=on[1].trim().toLowerCase();Qt.object.smooth=mn!=="0"&&mn!=="off"}else Qt.object.smooth=!0;const Zt=Qt.object.currentMaterial();Zt&&(Zt.smooth=Qt.object.smooth)}else{if(An==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+An+'"')}}Qt.finalize();const vn=new it.Group;if(vn.materialLibraries=[].concat(Qt.materialLibraries),!(Qt.objects.length===1&&Qt.objects[0].geometry.vertices.length===0)===!0)for(let Cn=0,dn=Qt.objects.length;Cn<dn;Cn++){const An=Qt.objects[Cn],nn=An.geometry,Zt=An.materials,mn=nn.type==="Line",gn=nn.type==="Points";let In=!1;if(nn.vertices.length===0)continue;const Vn=new it.BufferGeometry;Vn.setAttribute("position",new it.Float32BufferAttribute(nn.vertices,3)),nn.normals.length>0&&Vn.setAttribute("normal",new it.Float32BufferAttribute(nn.normals,3)),nn.colors.length>0&&(In=!0,Vn.setAttribute("color",new it.Float32BufferAttribute(nn.colors,3))),nn.hasUVIndices===!0&&Vn.setAttribute("uv",new it.Float32BufferAttribute(nn.uvs,2));const Zn=[];for(let hr=0,Lr=Zt.length;hr<Lr;hr++){const Tr=Zt[hr],As=Tr.name+"_"+Tr.smooth+"_"+In;let Yr=Qt.materials[As];if(this.materials!==null){if(Yr=this.materials.create(Tr.name),mn&&Yr&&!(Yr instanceof it.LineBasicMaterial)){const ms=new it.LineBasicMaterial;it.Material.prototype.copy.call(ms,Yr),ms.color.copy(Yr.color),Yr=ms}else if(gn&&Yr&&!(Yr instanceof it.PointsMaterial)){const ms=new it.PointsMaterial({size:10,sizeAttenuation:!1});it.Material.prototype.copy.call(ms,Yr),ms.color.copy(Yr.color),ms.map=Yr.map,Yr=ms}}Yr===void 0&&(mn?Yr=new it.LineBasicMaterial:gn?Yr=new it.PointsMaterial({size:1,sizeAttenuation:!1}):Yr=new it.MeshPhongMaterial,Yr.name=Tr.name,Yr.flatShading=!Tr.smooth,Yr.vertexColors=In,Qt.materials[As]=Yr),Zn.push(Yr)}let lr;if(Zn.length>1){for(let hr=0,Lr=Zt.length;hr<Lr;hr++){const Tr=Zt[hr];Vn.addGroup(Tr.groupStart,Tr.groupCount,hr)}mn?lr=new it.LineSegments(Vn,Zn):gn?lr=new it.Points(Vn,Zn):lr=new it.Mesh(Vn,Zn)}else mn?lr=new it.LineSegments(Vn,Zn[0]):gn?lr=new it.Points(Vn,Zn[0]):lr=new it.Mesh(Vn,Zn[0]);lr.name=An.name,vn.add(lr)}else if(Qt.vertices.length>0){const Cn=new it.PointsMaterial({size:1,sizeAttenuation:!1}),dn=new it.BufferGeometry;dn.setAttribute("position",new it.Float32BufferAttribute(Qt.vertices,3)),Qt.colors.length>0&&Qt.colors[0]!==void 0&&(dn.setAttribute("color",new it.Float32BufferAttribute(Qt.colors,3)),Cn.vertexColors=!0);const An=new it.Points(dn,Cn);vn.add(An)}return vn}}},"./node_modules/three/examples/jsm/math/OBB.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{OBB:()=>tn});var it=vt("./node_modules/three/build/three.module.js");const dt={c:null,u:[new it.Vector3,new it.Vector3,new it.Vector3],e:[]},bt={c:null,u:[new it.Vector3,new it.Vector3,new it.Vector3],e:[]},Tt=[[],[],[]],Et=[[],[],[]],Mt=[],Rt=new it.Vector3,pt=new it.Vector3,mt=new it.Vector3,gt=new it.Vector3,Ct=new it.Vector3,xt=new it.Vector3,Dt=new it.Matrix3,Ht=new it.Box3,Ut=new it.Matrix4,Xt=new it.Matrix4,Qt=new it.Ray;class tn{constructor(fn=new it.Vector3,Cn=new it.Vector3,dn=new it.Matrix3){this.center=fn,this.halfSize=Cn,this.rotation=dn}set(fn,Cn,dn){return this.center=fn,this.halfSize=Cn,this.rotation=dn,this}copy(fn){return this.center.copy(fn.center),this.halfSize.copy(fn.halfSize),this.rotation.copy(fn.rotation),this}clone(){return new this.constructor().copy(this)}getSize(fn){return fn.copy(this.halfSize).multiplyScalar(2)}clampPoint(fn,Cn){const dn=this.halfSize;gt.subVectors(fn,this.center),this.rotation.extractBasis(Rt,pt,mt),Cn.copy(this.center);const An=it.MathUtils.clamp(gt.dot(Rt),-dn.x,dn.x);Cn.add(Rt.multiplyScalar(An));const nn=it.MathUtils.clamp(gt.dot(pt),-dn.y,dn.y);Cn.add(pt.multiplyScalar(nn));const Zt=it.MathUtils.clamp(gt.dot(mt),-dn.z,dn.z);return Cn.add(mt.multiplyScalar(Zt)),Cn}containsPoint(fn){return gt.subVectors(fn,this.center),this.rotation.extractBasis(Rt,pt,mt),Math.abs(gt.dot(Rt))<=this.halfSize.x&&Math.abs(gt.dot(pt))<=this.halfSize.y&&Math.abs(gt.dot(mt))<=this.halfSize.z}intersectsBox3(fn){return this.intersectsOBB(on.fromBox3(fn))}intersectsSphere(fn){return this.clampPoint(fn.center,xt),xt.distanceToSquared(fn.center)<=fn.radius*fn.radius}intersectsOBB(fn,Cn=Number.EPSILON){dt.c=this.center,dt.e[0]=this.halfSize.x,dt.e[1]=this.halfSize.y,dt.e[2]=this.halfSize.z,this.rotation.extractBasis(dt.u[0],dt.u[1],dt.u[2]),bt.c=fn.center,bt.e[0]=fn.halfSize.x,bt.e[1]=fn.halfSize.y,bt.e[2]=fn.halfSize.z,fn.rotation.extractBasis(bt.u[0],bt.u[1],bt.u[2]);for(let nn=0;nn<3;nn++)for(let Zt=0;Zt<3;Zt++)Tt[nn][Zt]=dt.u[nn].dot(bt.u[Zt]);gt.subVectors(bt.c,dt.c),Mt[0]=gt.dot(dt.u[0]),Mt[1]=gt.dot(dt.u[1]),Mt[2]=gt.dot(dt.u[2]);for(let nn=0;nn<3;nn++)for(let Zt=0;Zt<3;Zt++)Et[nn][Zt]=Math.abs(Tt[nn][Zt])+Cn;let dn,An;for(let nn=0;nn<3;nn++)if(dn=dt.e[nn],An=bt.e[0]*Et[nn][0]+bt.e[1]*Et[nn][1]+bt.e[2]*Et[nn][2],Math.abs(Mt[nn])>dn+An)return!1;for(let nn=0;nn<3;nn++)if(dn=dt.e[0]*Et[0][nn]+dt.e[1]*Et[1][nn]+dt.e[2]*Et[2][nn],An=bt.e[nn],Math.abs(Mt[0]*Tt[0][nn]+Mt[1]*Tt[1][nn]+Mt[2]*Tt[2][nn])>dn+An)return!1;return dn=dt.e[1]*Et[2][0]+dt.e[2]*Et[1][0],An=bt.e[1]*Et[0][2]+bt.e[2]*Et[0][1],!(Math.abs(Mt[2]*Tt[1][0]-Mt[1]*Tt[2][0])>dn+An||(dn=dt.e[1]*Et[2][1]+dt.e[2]*Et[1][1],An=bt.e[0]*Et[0][2]+bt.e[2]*Et[0][0],Math.abs(Mt[2]*Tt[1][1]-Mt[1]*Tt[2][1])>dn+An)||(dn=dt.e[1]*Et[2][2]+dt.e[2]*Et[1][2],An=bt.e[0]*Et[0][1]+bt.e[1]*Et[0][0],Math.abs(Mt[2]*Tt[1][2]-Mt[1]*Tt[2][2])>dn+An)||(dn=dt.e[0]*Et[2][0]+dt.e[2]*Et[0][0],An=bt.e[1]*Et[1][2]+bt.e[2]*Et[1][1],Math.abs(Mt[0]*Tt[2][0]-Mt[2]*Tt[0][0])>dn+An)||(dn=dt.e[0]*Et[2][1]+dt.e[2]*Et[0][1],An=bt.e[0]*Et[1][2]+bt.e[2]*Et[1][0],Math.abs(Mt[0]*Tt[2][1]-Mt[2]*Tt[0][1])>dn+An)||(dn=dt.e[0]*Et[2][2]+dt.e[2]*Et[0][2],An=bt.e[0]*Et[1][1]+bt.e[1]*Et[1][0],Math.abs(Mt[0]*Tt[2][2]-Mt[2]*Tt[0][2])>dn+An)||(dn=dt.e[0]*Et[1][0]+dt.e[1]*Et[0][0],An=bt.e[1]*Et[2][2]+bt.e[2]*Et[2][1],Math.abs(Mt[1]*Tt[0][0]-Mt[0]*Tt[1][0])>dn+An)||(dn=dt.e[0]*Et[1][1]+dt.e[1]*Et[0][1],An=bt.e[0]*Et[2][2]+bt.e[2]*Et[2][0],Math.abs(Mt[1]*Tt[0][1]-Mt[0]*Tt[1][1])>dn+An)||(dn=dt.e[0]*Et[1][2]+dt.e[1]*Et[0][2],An=bt.e[0]*Et[2][1]+bt.e[1]*Et[2][0],Math.abs(Mt[1]*Tt[0][2]-Mt[0]*Tt[1][2])>dn+An))}intersectsPlane(fn){this.rotation.extractBasis(Rt,pt,mt);const Cn=this.halfSize.x*Math.abs(fn.normal.dot(Rt))+this.halfSize.y*Math.abs(fn.normal.dot(pt))+this.halfSize.z*Math.abs(fn.normal.dot(mt)),dn=fn.normal.dot(this.center)-fn.constant;return Math.abs(dn)<=Cn}intersectRay(fn,Cn){return this.getSize(Ct),Ht.setFromCenterAndSize(gt.set(0,0,0),Ct),Ut.setFromMatrix3(this.rotation),Ut.setPosition(this.center),Xt.copy(Ut).invert(),Qt.copy(fn).applyMatrix4(Xt),Qt.intersectBox(Ht,Cn)?Cn.applyMatrix4(Ut):null}intersectsRay(fn){return this.intersectRay(fn,gt)!==null}fromBox3(fn){return fn.getCenter(this.center),fn.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(fn){return fn.center.equals(this.center)&&fn.halfSize.equals(this.halfSize)&&fn.rotation.equals(this.rotation)}applyMatrix4(fn){const Cn=fn.elements;let dn=gt.set(Cn[0],Cn[1],Cn[2]).length();const An=gt.set(Cn[4],Cn[5],Cn[6]).length(),nn=gt.set(Cn[8],Cn[9],Cn[10]).length();fn.determinant()<0&&(dn=-dn),Dt.setFromMatrix4(fn);const mn=1/dn,gn=1/An,In=1/nn;return Dt.elements[0]*=mn,Dt.elements[1]*=mn,Dt.elements[2]*=mn,Dt.elements[3]*=gn,Dt.elements[4]*=gn,Dt.elements[5]*=gn,Dt.elements[6]*=In,Dt.elements[7]*=In,Dt.elements[8]*=In,this.rotation.multiply(Dt),this.halfSize.x*=dn,this.halfSize.y*=An,this.halfSize.z*=nn,gt.setFromMatrixPosition(fn),this.center.add(gt),this}}const on=new tn},"./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{computeMikkTSpaceTangents:()=>dt,computeMorphedAttributes:()=>xt,deepCloneAttribute:()=>Et,deinterleaveAttribute:()=>Rt,deinterleaveGeometry:()=>pt,estimateBytesUsed:()=>mt,interleaveAttributes:()=>Mt,mergeAttributes:()=>Tt,mergeGeometries:()=>bt,mergeGroups:()=>Dt,mergeVertices:()=>gt,toCreasedNormals:()=>Ht,toTrianglesDrawMode:()=>Ct});var it=vt("./node_modules/three/build/three.module.js");function dt(Ut,Xt,Qt=!0){if(!Xt||!Xt.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!Ut.hasAttribute("position")||!Ut.hasAttribute("normal")||!Ut.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function tn(fn){if(fn.normalized||fn.isInterleavedBufferAttribute){const Cn=new Float32Array(fn.count*fn.itemSize);for(let dn=0,An=0;dn<fn.count;dn++)Cn[An++]=fn.getX(dn),Cn[An++]=fn.getY(dn),fn.itemSize>2&&(Cn[An++]=fn.getZ(dn));return Cn}return fn.array instanceof Float32Array?fn.array:new Float32Array(fn.array)}const on=Ut.index?Ut.toNonIndexed():Ut,vn=Xt.generateTangents(tn(on.attributes.position),tn(on.attributes.normal),tn(on.attributes.uv));if(Qt)for(let fn=3;fn<vn.length;fn+=4)vn[fn]*=-1;return on.setAttribute("tangent",new it.BufferAttribute(vn,4)),Ut!==on&&Ut.copy(on),Ut}function bt(Ut,Xt=!1){const Qt=Ut[0].index!==null,tn=new Set(Object.keys(Ut[0].attributes)),on=new Set(Object.keys(Ut[0].morphAttributes)),vn={},fn={},Cn=Ut[0].morphTargetsRelative,dn=new it.BufferGeometry;let An=0;for(let nn=0;nn<Ut.length;++nn){const Zt=Ut[nn];let mn=0;if(Qt!==(Zt.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const gn in Zt.attributes){if(!tn.has(gn))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+'. All geometries must have compatible attributes; make sure "'+gn+'" attribute exists among all geometries, or in none of them.'),null;vn[gn]===void 0&&(vn[gn]=[]),vn[gn].push(Zt.attributes[gn]),mn++}if(mn!==tn.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+". Make sure all geometries have the same number of attributes."),null;if(Cn!==Zt.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const gn in Zt.morphAttributes){if(!on.has(gn))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+".  .morphAttributes must be consistent throughout all geometries."),null;fn[gn]===void 0&&(fn[gn]=[]),fn[gn].push(Zt.morphAttributes[gn])}if(Xt){let gn;if(Qt)gn=Zt.index.count;else if(Zt.attributes.position!==void 0)gn=Zt.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+nn+". The geometry must have either an index or a position attribute"),null;dn.addGroup(An,gn,nn),An+=gn}}if(Qt){let nn=0;const Zt=[];for(let mn=0;mn<Ut.length;++mn){const gn=Ut[mn].index;for(let In=0;In<gn.count;++In)Zt.push(gn.getX(In)+nn);nn+=Ut[mn].attributes.position.count}dn.setIndex(Zt)}for(const nn in vn){const Zt=Tt(vn[nn]);if(!Zt)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+nn+" attribute."),null;dn.setAttribute(nn,Zt)}for(const nn in fn){const Zt=fn[nn][0].length;if(Zt===0)break;dn.morphAttributes=dn.morphAttributes||{},dn.morphAttributes[nn]=[];for(let mn=0;mn<Zt;++mn){const gn=[];for(let Vn=0;Vn<fn[nn].length;++Vn)gn.push(fn[nn][Vn][mn]);const In=Tt(gn);if(!In)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+nn+" morphAttribute."),null;dn.morphAttributes[nn].push(In)}}return dn}function Tt(Ut){let Xt,Qt,tn,on=-1,vn=0;for(let An=0;An<Ut.length;++An){const nn=Ut[An];if(Xt===void 0&&(Xt=nn.array.constructor),Xt!==nn.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(Qt===void 0&&(Qt=nn.itemSize),Qt!==nn.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(tn===void 0&&(tn=nn.normalized),tn!==nn.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(on===-1&&(on=nn.gpuType),on!==nn.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;vn+=nn.count*Qt}const fn=new Xt(vn),Cn=new it.BufferAttribute(fn,Qt,tn);let dn=0;for(let An=0;An<Ut.length;++An){const nn=Ut[An];if(nn.isInterleavedBufferAttribute){const Zt=dn/Qt;for(let mn=0,gn=nn.count;mn<gn;mn++)for(let In=0;In<Qt;In++){const Vn=nn.getComponent(mn,In);Cn.setComponent(mn+Zt,In,Vn)}}else fn.set(nn.array,dn);dn+=nn.count*Qt}return on!==void 0&&(Cn.gpuType=on),Cn}function Et(Ut){return Ut.isInstancedInterleavedBufferAttribute||Ut.isInterleavedBufferAttribute?Rt(Ut):Ut.isInstancedBufferAttribute?new it.InstancedBufferAttribute().copy(Ut):new it.BufferAttribute().copy(Ut)}function Mt(Ut){let Xt,Qt=0,tn=0;for(let An=0,nn=Ut.length;An<nn;++An){const Zt=Ut[An];if(Xt===void 0&&(Xt=Zt.array.constructor),Xt!==Zt.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;Qt+=Zt.array.length,tn+=Zt.itemSize}const on=new it.InterleavedBuffer(new Xt(Qt),tn);let vn=0;const fn=[],Cn=["getX","getY","getZ","getW"],dn=["setX","setY","setZ","setW"];for(let An=0,nn=Ut.length;An<nn;An++){const Zt=Ut[An],mn=Zt.itemSize,gn=Zt.count,In=new it.InterleavedBufferAttribute(on,mn,vn,Zt.normalized);fn.push(In),vn+=mn;for(let Vn=0;Vn<gn;Vn++)for(let Zn=0;Zn<mn;Zn++)In[dn[Zn]](Vn,Zt[Cn[Zn]](Vn))}return fn}function Rt(Ut){const Xt=Ut.data.array.constructor,Qt=Ut.count,tn=Ut.itemSize,on=Ut.normalized,vn=new Xt(Qt*tn);let fn;Ut.isInstancedInterleavedBufferAttribute?fn=new it.InstancedBufferAttribute(vn,tn,on,Ut.meshPerAttribute):fn=new it.BufferAttribute(vn,tn,on);for(let Cn=0;Cn<Qt;Cn++)fn.setX(Cn,Ut.getX(Cn)),tn>=2&&fn.setY(Cn,Ut.getY(Cn)),tn>=3&&fn.setZ(Cn,Ut.getZ(Cn)),tn>=4&&fn.setW(Cn,Ut.getW(Cn));return fn}function pt(Ut){const Xt=Ut.attributes,Qt=Ut.morphTargets,tn=new Map;for(const on in Xt){const vn=Xt[on];vn.isInterleavedBufferAttribute&&(tn.has(vn)||tn.set(vn,Rt(vn)),Xt[on]=tn.get(vn))}for(const on in Qt){const vn=Qt[on];vn.isInterleavedBufferAttribute&&(tn.has(vn)||tn.set(vn,Rt(vn)),Qt[on]=tn.get(vn))}}function mt(Ut){let Xt=0;for(const tn in Ut.attributes){const on=Ut.getAttribute(tn);Xt+=on.count*on.itemSize*on.array.BYTES_PER_ELEMENT}const Qt=Ut.getIndex();return Xt+=Qt?Qt.count*Qt.itemSize*Qt.array.BYTES_PER_ELEMENT:0,Xt}function gt(Ut,Xt=1e-4){Xt=Math.max(Xt,Number.EPSILON);const Qt={},tn=Ut.getIndex(),on=Ut.getAttribute("position"),vn=tn?tn.count:on.count;let fn=0;const Cn=Object.keys(Ut.attributes),dn={},An={},nn=[],Zt=["getX","getY","getZ","getW"],mn=["setX","setY","setZ","setW"];for(let hr=0,Lr=Cn.length;hr<Lr;hr++){const Tr=Cn[hr],As=Ut.attributes[Tr];dn[Tr]=new it.BufferAttribute(new As.array.constructor(As.count*As.itemSize),As.itemSize,As.normalized);const Yr=Ut.morphAttributes[Tr];Yr&&(An[Tr]=new it.BufferAttribute(new Yr.array.constructor(Yr.count*Yr.itemSize),Yr.itemSize,Yr.normalized))}const gn=Xt*.5,In=Math.log10(1/Xt),Vn=Math.pow(10,In),Zn=gn*Vn;for(let hr=0;hr<vn;hr++){const Lr=tn?tn.getX(hr):hr;let Tr="";for(let As=0,Yr=Cn.length;As<Yr;As++){const ms=Cn[As],Rs=Ut.getAttribute(ms),Zs=Rs.itemSize;for(let ao=0;ao<Zs;ao++)Tr+=`${~~(Rs[Zt[ao]](Lr)*Vn+Zn)},`}if(Tr in Qt)nn.push(Qt[Tr]);else{for(let As=0,Yr=Cn.length;As<Yr;As++){const ms=Cn[As],Rs=Ut.getAttribute(ms),Zs=Ut.morphAttributes[ms],ao=Rs.itemSize,go=dn[ms],ho=An[ms];for(let Ys=0;Ys<ao;Ys++){const xo=Zt[Ys],$o=mn[Ys];if(go[$o](fn,Rs[xo](Lr)),Zs)for(let Pn=0,j0=Zs.length;Pn<j0;Pn++)ho[Pn][$o](fn,Zs[Pn][xo](Lr))}}Qt[Tr]=fn,nn.push(fn),fn++}}const lr=Ut.clone();for(const hr in Ut.attributes){const Lr=dn[hr];if(lr.setAttribute(hr,new it.BufferAttribute(Lr.array.slice(0,fn*Lr.itemSize),Lr.itemSize,Lr.normalized)),hr in An)for(let Tr=0;Tr<An[hr].length;Tr++){const As=An[hr][Tr];lr.morphAttributes[hr][Tr]=new it.BufferAttribute(As.array.slice(0,fn*As.itemSize),As.itemSize,As.normalized)}}return lr.setIndex(nn),lr}function Ct(Ut,Xt){if(Xt===it.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),Ut;if(Xt===it.TriangleFanDrawMode||Xt===it.TriangleStripDrawMode){let Qt=Ut.getIndex();if(Qt===null){const fn=[],Cn=Ut.getAttribute("position");if(Cn!==void 0){for(let dn=0;dn<Cn.count;dn++)fn.push(dn);Ut.setIndex(fn),Qt=Ut.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),Ut}const tn=Qt.count-2,on=[];if(Xt===it.TriangleFanDrawMode)for(let fn=1;fn<=tn;fn++)on.push(Qt.getX(0)),on.push(Qt.getX(fn)),on.push(Qt.getX(fn+1));else for(let fn=0;fn<tn;fn++)fn%2===0?(on.push(Qt.getX(fn)),on.push(Qt.getX(fn+1)),on.push(Qt.getX(fn+2))):(on.push(Qt.getX(fn+2)),on.push(Qt.getX(fn+1)),on.push(Qt.getX(fn)));on.length/3!==tn&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const vn=Ut.clone();return vn.setIndex(on),vn.clearGroups(),vn}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",Xt),Ut}function xt(Ut){const Xt=new it.Vector3,Qt=new it.Vector3,tn=new it.Vector3,on=new it.Vector3,vn=new it.Vector3,fn=new it.Vector3,Cn=new it.Vector3,dn=new it.Vector3,An=new it.Vector3;function nn(oo,L0,f0,Pl,na,p0,es,Mn){Xt.fromBufferAttribute(L0,na),Qt.fromBufferAttribute(L0,p0),tn.fromBufferAttribute(L0,es);const bn=oo.morphTargetInfluences;if(f0&&bn){Cn.set(0,0,0),dn.set(0,0,0),An.set(0,0,0);for(let Hn=0,Dn=f0.length;Hn<Dn;Hn++){const Un=bn[Hn],Gn=f0[Hn];Un!==0&&(on.fromBufferAttribute(Gn,na),vn.fromBufferAttribute(Gn,p0),fn.fromBufferAttribute(Gn,es),Pl?(Cn.addScaledVector(on,Un),dn.addScaledVector(vn,Un),An.addScaledVector(fn,Un)):(Cn.addScaledVector(on.sub(Xt),Un),dn.addScaledVector(vn.sub(Qt),Un),An.addScaledVector(fn.sub(tn),Un)))}Xt.add(Cn),Qt.add(dn),tn.add(An)}oo.isSkinnedMesh&&(oo.applyBoneTransform(na,Xt),oo.applyBoneTransform(p0,Qt),oo.applyBoneTransform(es,tn)),Mn[na*3+0]=Xt.x,Mn[na*3+1]=Xt.y,Mn[na*3+2]=Xt.z,Mn[p0*3+0]=Qt.x,Mn[p0*3+1]=Qt.y,Mn[p0*3+2]=Qt.z,Mn[es*3+0]=tn.x,Mn[es*3+1]=tn.y,Mn[es*3+2]=tn.z}const Zt=Ut.geometry,mn=Ut.material;let gn,In,Vn;const Zn=Zt.index,lr=Zt.attributes.position,hr=Zt.morphAttributes.position,Lr=Zt.morphTargetsRelative,Tr=Zt.attributes.normal,As=Zt.morphAttributes.position,Yr=Zt.groups,ms=Zt.drawRange;let Rs,Zs,ao,go,ho,Ys,xo;const $o=new Float32Array(lr.count*lr.itemSize),Pn=new Float32Array(Tr.count*Tr.itemSize);if(Zn!==null)if(Array.isArray(mn))for(Rs=0,ao=Yr.length;Rs<ao;Rs++)for(ho=Yr[Rs],Ys=Math.max(ho.start,ms.start),xo=Math.min(ho.start+ho.count,ms.start+ms.count),Zs=Ys,go=xo;Zs<go;Zs+=3)gn=Zn.getX(Zs),In=Zn.getX(Zs+1),Vn=Zn.getX(Zs+2),nn(Ut,lr,hr,Lr,gn,In,Vn,$o),nn(Ut,Tr,As,Lr,gn,In,Vn,Pn);else for(Ys=Math.max(0,ms.start),xo=Math.min(Zn.count,ms.start+ms.count),Rs=Ys,ao=xo;Rs<ao;Rs+=3)gn=Zn.getX(Rs),In=Zn.getX(Rs+1),Vn=Zn.getX(Rs+2),nn(Ut,lr,hr,Lr,gn,In,Vn,$o),nn(Ut,Tr,As,Lr,gn,In,Vn,Pn);else if(Array.isArray(mn))for(Rs=0,ao=Yr.length;Rs<ao;Rs++)for(ho=Yr[Rs],Ys=Math.max(ho.start,ms.start),xo=Math.min(ho.start+ho.count,ms.start+ms.count),Zs=Ys,go=xo;Zs<go;Zs+=3)gn=Zs,In=Zs+1,Vn=Zs+2,nn(Ut,lr,hr,Lr,gn,In,Vn,$o),nn(Ut,Tr,As,Lr,gn,In,Vn,Pn);else for(Ys=Math.max(0,ms.start),xo=Math.min(lr.count,ms.start+ms.count),Rs=Ys,ao=xo;Rs<ao;Rs+=3)gn=Rs,In=Rs+1,Vn=Rs+2,nn(Ut,lr,hr,Lr,gn,In,Vn,$o),nn(Ut,Tr,As,Lr,gn,In,Vn,Pn);const j0=new it.Float32BufferAttribute($o,3),Ho=new it.Float32BufferAttribute(Pn,3);return{positionAttribute:lr,normalAttribute:Tr,morphedPositionAttribute:j0,morphedNormalAttribute:Ho}}function Dt(Ut){if(Ut.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),Ut;let Xt=Ut.groups;if(Xt=Xt.sort((fn,Cn)=>fn.materialIndex!==Cn.materialIndex?fn.materialIndex-Cn.materialIndex:fn.start-Cn.start),Ut.getIndex()===null){const fn=Ut.getAttribute("position"),Cn=[];for(let dn=0;dn<fn.count;dn+=3)Cn.push(dn,dn+1,dn+2);Ut.setIndex(Cn)}const Qt=Ut.getIndex(),tn=[];for(let fn=0;fn<Xt.length;fn++){const Cn=Xt[fn],dn=Cn.start,An=dn+Cn.count;for(let nn=dn;nn<An;nn++)tn.push(Qt.getX(nn))}Ut.dispose(),Ut.setIndex(tn);let on=0;for(let fn=0;fn<Xt.length;fn++){const Cn=Xt[fn];Cn.start=on,on+=Cn.count}let vn=Xt[0];Ut.groups=[vn];for(let fn=1;fn<Xt.length;fn++){const Cn=Xt[fn];vn.materialIndex===Cn.materialIndex?vn.count+=Cn.count:(vn=Cn,Ut.groups.push(vn))}return Ut}function Ht(Ut,Xt=Math.PI/3){const Qt=Math.cos(Xt),tn=(1+1e-10)*100,on=[new it.Vector3,new it.Vector3,new it.Vector3],vn=new it.Vector3,fn=new it.Vector3,Cn=new it.Vector3,dn=new it.Vector3;function An(Vn){const Zn=~~(Vn.x*tn),lr=~~(Vn.y*tn),hr=~~(Vn.z*tn);return`${Zn},${lr},${hr}`}const nn=Ut.index?Ut.toNonIndexed():Ut,Zt=nn.attributes.position,mn={};for(let Vn=0,Zn=Zt.count/3;Vn<Zn;Vn++){const lr=3*Vn,hr=on[0].fromBufferAttribute(Zt,lr+0),Lr=on[1].fromBufferAttribute(Zt,lr+1),Tr=on[2].fromBufferAttribute(Zt,lr+2);vn.subVectors(Tr,Lr),fn.subVectors(hr,Lr);const As=new it.Vector3().crossVectors(vn,fn).normalize();for(let Yr=0;Yr<3;Yr++){const ms=on[Yr],Rs=An(ms);Rs in mn||(mn[Rs]=[]),mn[Rs].push(As)}}const gn=new Float32Array(Zt.count*3),In=new it.BufferAttribute(gn,3,!1);for(let Vn=0,Zn=Zt.count/3;Vn<Zn;Vn++){const lr=3*Vn,hr=on[0].fromBufferAttribute(Zt,lr+0),Lr=on[1].fromBufferAttribute(Zt,lr+1),Tr=on[2].fromBufferAttribute(Zt,lr+2);vn.subVectors(Tr,Lr),fn.subVectors(hr,Lr),Cn.crossVectors(vn,fn).normalize();for(let As=0;As<3;As++){const Yr=on[As],ms=An(Yr),Rs=mn[ms];dn.set(0,0,0);for(let Zs=0,ao=Rs.length;Zs<ao;Zs++){const go=Rs[Zs];Cn.dot(go)>Qt&&dn.add(go)}dn.normalize(),In.setXYZ(lr+As,dn.x,dn.y,dn.z)}}return nn.setAttribute("normal",In),nn}},"./node_modules/three/examples/jsm/utils/WorkerPool.js":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{WorkerPool:()=>it});class it{constructor(bt=4){this.pool=bt,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(bt){if(!this.workers[bt]){const Tt=this.workerCreator();Tt.addEventListener("message",this._onMessage.bind(this,bt)),this.workers[bt]=Tt}}_getIdleWorker(){for(let bt=0;bt<this.pool;bt++)if(!(this.workerStatus&1<<bt))return bt;return-1}_onMessage(bt,Tt){const Et=this.workersResolve[bt];if(Et&&Et(Tt),this.queue.length){const{resolve:Mt,msg:Rt,transfer:pt}=this.queue.shift();this.workersResolve[bt]=Mt,this.workers[bt].postMessage(Rt,pt)}else this.workerStatus^=1<<bt}setWorkerCreator(bt){this.workerCreator=bt}setWorkerLimit(bt){this.pool=bt}postMessage(bt,Tt){return new Promise(Et=>{const Mt=this._getIdleWorker();Mt!==-1?(this._initWorker(Mt),this.workerStatus|=1<<Mt,this.workersResolve[Mt]=Et,this.workers[Mt].postMessage(bt,Tt)):this.queue.push({resolve:Et,msg:bt,transfer:Tt})})}dispose(){this.workers.forEach(bt=>bt.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./src/lib/three.mjs":(St,Gt,vt)=>{vt.r(Gt),vt.d(Gt,{default:()=>Ct});var it=vt("./node_modules/three/build/three.module.js"),dt=vt("./node_modules/three/examples/jsm/loaders/DRACOLoader.js"),bt=vt("./node_modules/three/examples/jsm/loaders/GLTFLoader.js"),Tt=vt("./node_modules/three/examples/jsm/loaders/KTX2Loader.js"),Et=vt("./node_modules/three/examples/jsm/math/OBB.js"),Mt=vt("./node_modules/three/examples/jsm/loaders/OBJLoader.js"),Rt=vt("./node_modules/three/examples/jsm/loaders/MTLLoader.js"),pt=vt("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js"),mt=vt("./node_modules/three/examples/jsm/lights/LightProbeGenerator.js"),gt={...it};gt.DRACOLoader=dt.DRACOLoader,gt.GLTFLoader=bt.GLTFLoader,gt.KTX2Loader=Tt.KTX2Loader,gt.OBJLoader=Mt.OBJLoader,gt.MTLLoader=Rt.MTLLoader,gt.OBB=Et.OBB,gt.BufferGeometryUtils=pt,gt.LightProbeGenerator=mt.LightProbeGenerator;const Ct=gt},"./package.json":St=>{St.exports=JSON.parse('{"name":"aframe","version":"1.6.0","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"standardx -v | snazzy","lint:fix":"standardx --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.5.0 1.6.0","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"node --experimental-require-module ./node_modules/mocha/bin/mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","debug":"^4.3.4","deep-assign":"^2.0.0","load-bmfont":"^1.2.3","super-animejs":"^3.1.0","three":"npm:super-three@0.164.0","three-bmfont-text":"dmarcos/three-bmfont-text#eed4878795be9b3e38cf6aec6b903f56acd1f695","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","eslint":"^8.45.0","eslint-config-semistandard":"^17.0.0","eslint-config-standard-jsx":"^11.0.0","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^24.0.0","jsdom-global":"^3.0.2","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","standardx":"^7.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"standardx":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},st={};function e(St){var Gt=st[St];if(Gt!==void 0)return Gt.exports;var vt=st[St]={id:St,exports:{}};return ct[St].call(vt.exports,vt,vt.exports,e),vt.exports}e.m=ct,e.n=St=>{var Gt=St&&St.__esModule?()=>St.default:()=>St;return e.d(Gt,{a:Gt}),Gt},e.d=(St,Gt)=>{for(var vt in Gt)e.o(Gt,vt)&&!e.o(St,vt)&&Object.defineProperty(St,vt,{enumerable:!0,get:Gt[vt]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(St,Gt)=>Object.prototype.hasOwnProperty.call(St,Gt),e.r=St=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(St,"__esModule",{value:!0})},e.b=document.baseURI||self.location.href,e.nc=void 0;var It=e("./src/index.js");return It})())})(aframeMaster);function commonjsRequire($){throw new Error('Could not dynamically require "'+$+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aframeAr_min={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(__viteBrowserExternal$1);aframeAr_min.exports;(function(module){(function(){var $=function(pt,mt,gt){var Ct=pt,xt=mt;if(this.orientation="landscape",this.listeners={},typeof pt!="number"){var Dt=pt;gt=mt,Ct=Dt.videoWidth||Dt.width,xt=Dt.videoHeight||Dt.height,this.image=Dt}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=Ct,this.canvas.height=xt,this.ctx=this.canvas.getContext("2d"),this.videoWidth=Ct,this.videoHeight=xt,typeof gt=="string"){var Ht=this;this.cameraParam=new et(gt,function(){Ht._initialize()},function(Ut){console.error("ARController: Failed to load ARCameraParam",Ut)})}else this.cameraParam=gt,this._initialize()};$.prototype.dispose=function(){ot.teardown(this.id);for(var pt in this)this[pt]=null},$.prototype.process=function(pt){this.detectMarker(pt);var mt=this.getMarkerNum(),gt,Ct;for(gt in this.patternMarkers)Ct=this.patternMarkers[gt],Ct.inPrevious=Ct.inCurrent,Ct.inCurrent=!1;for(gt in this.barcodeMarkers)Ct=this.barcodeMarkers[gt],Ct.inPrevious=Ct.inCurrent,Ct.inCurrent=!1;for(var xt=0;xt<mt;xt++){var Dt=this.getMarker(xt),Ht=ot.UNKNOWN_MARKER,Ut=this.trackPatternMarkerId(-1);Dt.idPatt>-1&&(Dt.id===Dt.idPatt||Dt.idMatrix===-1)?(Ut=this.trackPatternMarkerId(Dt.idPatt),Ht=ot.PATTERN_MARKER,Dt.dir!==Dt.dirPatt&&this.setMarkerInfoDir(xt,Dt.dirPatt)):Dt.idMatrix>-1&&(Ut=this.trackBarcodeMarkerId(Dt.idMatrix),Ht=ot.BARCODE_MARKER,Dt.dir!==Dt.dirMatrix&&this.setMarkerInfoDir(xt,Dt.dirMatrix)),Ht!==ot.UNKNOWN_MARKER&&Ut.inPrevious?this.getTransMatSquareCont(xt,Ut.markerWidth,Ut.matrix,Ut.matrix):this.getTransMatSquare(xt,Ut.markerWidth,Ut.matrix),Ut.inCurrent=!0,this.transMatToGLMat(Ut.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:xt,type:Ht,marker:Dt,matrix:this.transform_mat}})}for(var Xt=this.getMultiMarkerCount(),xt=0;xt<Xt;xt++){var Qt=this.getMultiMarkerPatternCount(xt),Ut=!1;ot.getTransMatMultiSquareRobust(this.id,xt),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var tn=0;tn<Qt;tn++){var on=this.getMultiEachMarker(xt,tn);if(on.visible>=0){Ut=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:xt,matrix:this.transform_mat}});break}}if(Ut)for(var tn=0;tn<Qt;tn++){var on=this.getMultiEachMarker(xt,tn);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:xt,markerIndex:tn,marker:on,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},$.prototype.trackPatternMarkerId=function(pt,mt){var gt=this.patternMarkers[pt];return gt||(this.patternMarkers[pt]=gt={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:mt||this.defaultMarkerWidth}),mt&&(gt.markerWidth=mt),gt},$.prototype.trackBarcodeMarkerId=function(pt,mt){var gt=this.barcodeMarkers[pt];return gt||(this.barcodeMarkers[pt]=gt={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:mt||this.defaultMarkerWidth}),mt&&(gt.markerWidth=mt),gt},$.prototype.getMultiMarkerCount=function(){return ot.getMultiMarkerCount(this.id)},$.prototype.getMultiMarkerPatternCount=function(pt){return ot.getMultiMarkerNum(this.id,pt)},$.prototype.addEventListener=function(pt,mt){this.listeners[pt]||(this.listeners[pt]=[]),this.listeners[pt].push(mt)},$.prototype.removeEventListener=function(pt,mt){if(this.listeners[pt]){var gt=this.listeners[pt].indexOf(mt);gt>-1&&this.listeners[pt].splice(gt,1)}},$.prototype.dispatchEvent=function(pt){var mt=this.listeners[pt.name];if(mt)for(var gt=0;gt<mt.length;gt++)mt[gt].call(this,pt)},$.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},$.prototype.loadMarker=function(pt,mt,gt){return ot.addMarker(this.id,pt,mt,gt)},$.prototype.loadMultiMarker=function(pt,mt,gt){return ot.addMultiMarker(this.id,pt,mt,gt)},$.prototype.getTransMatSquare=function(pt,mt,gt){return ot.getTransMatSquare(this.id,pt,mt),gt.set(this.marker_transform_mat),gt},$.prototype.getTransMatSquareCont=function(pt,mt,gt,Ct){return this.marker_transform_mat.set(gt),ot.getTransMatSquareCont(this.id,pt,mt),Ct.set(this.marker_transform_mat),Ct},$.prototype.getTransMatMultiSquare=function(pt,mt){return ot.getTransMatMultiSquare(this.id,pt),mt.set(this.marker_transform_mat),mt},$.prototype.getTransMatMultiSquareRobust=function(pt,mt){return ot.getTransMatMultiSquare(this.id,pt),mt.set(this.marker_transform_mat),mt},$.prototype.transMatToGLMat=function(pt,mt,gt){return mt[0+0*4]=pt[0],mt[0+1*4]=pt[1],mt[0+2*4]=pt[2],mt[0+3*4]=pt[3],mt[1+0*4]=pt[4],mt[1+1*4]=pt[5],mt[1+2*4]=pt[6],mt[1+3*4]=pt[7],mt[2+0*4]=pt[8],mt[2+1*4]=pt[9],mt[2+2*4]=pt[10],mt[2+3*4]=pt[11],mt[3+0*4]=0,mt[3+1*4]=0,mt[3+2*4]=0,mt[3+3*4]=1,gt!=null&&gt!==0&&(mt[12]*=gt,mt[13]*=gt,mt[14]*=gt),mt},$.prototype.detectMarker=function(pt){return this._copyImageToHeap(pt)?ot.detectMarker(this.id):-99},$.prototype.getMarkerNum=function(){return ot.getMarkerNum(this.id)},$.prototype.getMarker=function(pt){if(ot.getMarker(this.id,pt)===0)return ot.markerInfo},$.prototype.setMarkerInfoVertex=function(pt,mt){for(var gt=0;gt<mt.length;gt++)this.marker_transform_mat[gt*2+0]=mt[gt][0],this.marker_transform_mat[gt*2+1]=mt[gt][1];return ot.setMarkerInfoVertex(this.id,pt)},$.prototype.cloneMarkerInfo=function(pt){return JSON.parse(JSON.stringify(pt))},$.prototype.getMultiEachMarker=function(pt,mt){if(ot.getMultiEachMarker(this.id,pt,mt)===0)return ot.multiEachMarkerInfo},$.prototype.getTransformationMatrix=function(){return this.transform_mat},$.prototype.getCameraMatrix=function(){return this.camera_mat},$.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},$.prototype.setDebugMode=function(pt){return ot.setDebugMode(this.id,pt)},$.prototype.getDebugMode=function(){return ot.getDebugMode(this.id)},$.prototype.getProcessingImage=function(){return ot.getProcessingImage(this.id)},$.prototype.setLogLevel=function(pt){return ot.setLogLevel(pt)},$.prototype.getLogLevel=function(){return ot.getLogLevel()},$.prototype.setMarkerInfoDir=function(pt,mt){return ot.setMarkerInfoDir(this.id,pt,mt)},$.prototype.setProjectionNearPlane=function(pt){return ot.setProjectionNearPlane(this.id,pt)},$.prototype.getProjectionNearPlane=function(){return ot.getProjectionNearPlane(this.id)},$.prototype.setProjectionFarPlane=function(pt){return ot.setProjectionFarPlane(this.id,pt)},$.prototype.getProjectionFarPlane=function(){return ot.getProjectionFarPlane(this.id)},$.prototype.setThresholdMode=function(pt){return ot.setThresholdMode(this.id,pt)},$.prototype.getThresholdMode=function(){return ot.getThresholdMode(this.id)},$.prototype.setThreshold=function(pt){return ot.setThreshold(this.id,pt)},$.prototype.getThreshold=function(){return ot.getThreshold(this.id)},$.prototype.setPatternDetectionMode=function(pt){return ot.setPatternDetectionMode(this.id,pt)},$.prototype.getPatternDetectionMode=function(){return ot.getPatternDetectionMode(this.id)},$.prototype.setMatrixCodeType=function(pt){return ot.setMatrixCodeType(this.id,pt)},$.prototype.getMatrixCodeType=function(){return ot.getMatrixCodeType(this.id)},$.prototype.setLabelingMode=function(pt){return ot.setLabelingMode(this.id,pt)},$.prototype.getLabelingMode=function(){return ot.getLabelingMode(this.id)},$.prototype.setPattRatio=function(pt){return ot.setPattRatio(this.id,pt)},$.prototype.getPattRatio=function(){return ot.getPattRatio(this.id)},$.prototype.setImageProcMode=function(pt){return ot.setImageProcMode(this.id,pt)},$.prototype.getImageProcMode=function(){return ot.getImageProcMode(this.id)},$.prototype.debugDraw=function(){var pt=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),mt=new ImageData(pt,this.canvas.width,this.canvas.height);this.ctx.putImageData(mt,0,0);for(var gt=this.getMarkerNum(),Ct=0;Ct<gt;Ct++)this._debugMarker(this.getMarker(Ct))},$.prototype._initialize=function(){this.id=ot.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var pt=ot.frameMalloc;this.framepointer=pt.framepointer,this.framesize=pt.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,pt.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,pt.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var mt=this;setTimeout(function(){mt.onload&&mt.onload(),mt.dispatchEvent({name:"load",target:mt})},1)},$.prototype._copyImageToHeap=function(pt){pt||(pt=this.image),this.ctx.save(),this.orientation==="portrait"?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(pt,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(pt,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var mt=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),gt=mt.data;return this.dataHeap?(this.dataHeap.set(gt),!0):!1},$.prototype._debugMarker=function(pt){var mt,gt;mt=pt.vertex;var Ct=this.ctx;Ct.strokeStyle="red",Ct.beginPath(),Ct.moveTo(mt[0][0],mt[0][1]),Ct.lineTo(mt[1][0],mt[1][1]),Ct.stroke(),Ct.beginPath(),Ct.moveTo(mt[2][0],mt[2][1]),Ct.lineTo(mt[3][0],mt[3][1]),Ct.stroke(),Ct.strokeStyle="green",Ct.beginPath(),Ct.lineTo(mt[1][0],mt[1][1]),Ct.lineTo(mt[2][0],mt[2][1]),Ct.stroke(),Ct.beginPath(),Ct.moveTo(mt[3][0],mt[3][1]),Ct.lineTo(mt[0][0],mt[0][1]),Ct.stroke(),gt=pt.pos,Ct.beginPath(),Ct.arc(gt[0],gt[1],8,0,Math.PI*2),Ct.fillStyle="red",Ct.fill()},$.getUserMedia=function(pt){pt.facingMode;var mt=pt.onSuccess,gt=pt.onError||function(on){console.error("ARController.getUserMedia",on)},Ct=document.createElement("video"),xt=function(){this.videoWidth!==0&&mt(Ct)},Dt=!1,Ht=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],Ut=function(on){Dt&&(Ct.play(),Ct.paused||Ht.forEach(function(vn){window.removeEventListener(vn,Ut,!0)}))};Ht.forEach(function(on){window.addEventListener(on,Ut,!0)});var Xt=function(on){Ct.addEventListener("loadedmetadata",xt,!1),Ct.src=window.URL.createObjectURL(on),Dt=!0,Ut()},Qt={};pt.width&&(pt.width,typeof pt.width=="object"?(pt.width.max&&(Qt.maxWidth=pt.width.max),pt.width.min&&(Qt.minWidth=pt.width.max)):Qt.maxWidth=pt.width),pt.height&&(pt.height,typeof pt.height=="object"?(pt.height.max&&(Qt.maxHeight=pt.height.max),pt.height.min&&(Qt.minHeight=pt.height.max)):Qt.maxHeight=pt.height),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var tn={audio:!1,video:{mandatory:Qt}};return navigator.getUserMedia?navigator.getUserMedia(tn,Xt,gt):gt("navigator.getUserMedia is not supported on your browser"),Ct},$.getUserMediaARController=function(pt){var mt={};for(var gt in pt)mt[gt]=pt[gt];var Ct=pt.onSuccess,xt=pt.cameraParam;mt.onSuccess=function(){new et(xt,function(){var Ht=this,Ut=pt.maxARVideoSize||Math.max(Dt.videoWidth,Dt.videoHeight),Xt=Ut/Math.max(Dt.videoWidth,Dt.videoHeight),Qt=Xt*Dt.videoWidth,tn=Xt*Dt.videoHeight;if(Dt.videoWidth<Dt.videoHeight){var on=Qt;Qt=tn,tn=on}var vn=new $(Qt,tn,Ht);vn.image=Dt,Dt.videoWidth<Dt.videoHeight?(vn.orientation="portrait",vn.videoWidth=Dt.videoHeight,vn.videoHeight=Dt.videoWidth):(vn.orientation="landscape",vn.videoWidth=Dt.videoWidth,vn.videoHeight=Dt.videoHeight),Ct(vn,Ht)},function(Ht){console.error("ARController: Failed to load ARCameraParam",Ht)})};var Dt=this.getUserMedia(mt);return Dt};var et=function(pt,mt,gt){this.id=-1,this._src="",this.complete=!1,this.onload=mt,this.onerror=gt,pt&&this.load(pt)};et.prototype.load=function(pt){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=pt,pt){var mt=this;ot.loadCamera(pt,function(gt){mt.id=gt,mt.complete=!0,mt.onload()},function(gt){mt.onerror(gt)})}},Object.defineProperty(et.prototype,"src",{set:function(pt){this.load(pt)},get:function(){return this._src}}),et.prototype.dispose=function(){this.id!==-1&&ot.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var ot={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:bt,addMarker:It,addMultiMarker:it},ct=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function st(){ct.forEach(function(mt){ot[mt]=Module[mt]});for(var pt in Module)pt.match(/^AR/)&&(ot[pt]=Module[pt])}var e=0;function It(pt,mt,gt){var Ct="/marker_"+e++;Mt(mt,Ct,function(){var xt=Module._addMarker(pt,Ct);gt&&gt(xt)})}function St(pt){return String.fromCharCode.apply(String,pt)}function Gt(pt){var mt=St(pt),gt=mt.split(`
`),Ct=[],xt=0;return gt.forEach(function(Dt){if(Dt=Dt.trim(),!(!Dt||Dt.startsWith("#")))switch(xt){case 0:xt=1;return;case 1:Dt.match(/^\d+$/)||Ct.push(Dt);case 2:case 3:case 4:xt++;return;case 5:xt=1;return}}),Ct}var vt=0;function it(pt,mt,gt){var Ct="/multi_marker_"+vt++;Mt(mt,Ct,function(xt){var Dt=Gt(xt);function Ht(){var Xt=Module._addMultiMarker(pt,Ct),Qt=Module.getMultiMarkerNum(pt,Xt);gt&&gt(Xt,Qt)}if(!Dt.length)return Ht();var Ut=mt.split("/").slice(0,-1).join("/");Dt=Dt.map(function(Xt){return[Ut+"/"+Xt,Xt]}),Rt(Dt,Ht)})}var dt=0;function bt(pt,mt){var gt="/camera_param_"+dt++,Ct=function(){var xt=Module._loadCamera(gt);mt&&mt(xt)};typeof pt=="object"?Et(gt,pt,Ct):pt.indexOf(`
`)>-1?Tt(gt,pt,Ct):Mt(pt,gt,Ct)}function Tt(pt,mt,gt){for(var Ct=new Uint8Array(mt.length),xt=0;xt<Ct.length;xt++)Ct[xt]=mt.charCodeAt(xt)&255;Et(pt,Ct,gt)}function Et(pt,mt,gt){FS.writeFile(pt,mt,{encoding:"binary"}),gt(mt)}function Mt(pt,mt,gt){var Ct=new XMLHttpRequest;Ct.open("GET",pt,!0),Ct.responseType="arraybuffer",Ct.onload=function(xt){var Dt=Ct.response,Ht=new Uint8Array(Dt);Et(mt,Ht,gt)},Ct.send()}function Rt(pt,mt){var gt=pt.pop();gt?Mt(gt[0],gt[1],function(){Rt(pt,mt)}):mt()}window.artoolkit=ot,window.ARController=$,window.ARCameraParam=et,window.Module?st():window.Module={onRuntimeInitialized:function(){st()}}})();var Module;Module||(Module=(typeof Module<"u"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof commonjsRequire=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=function(et){process.stdout.write(et+`
`)}),Module.printErr||(Module.printErr=function(et){process.stderr.write(et+`
`)});var nodeFS=require$$1,nodePath=require$$1;Module.read=function(et,ot){et=nodePath.normalize(et);var ct=nodeFS.readFileSync(et);return!ct&&et!=nodePath.resolve(et)&&(et=path.join(__dirname,"..","src",et),ct=nodeFS.readFileSync(et)),ct&&!ot&&(ct=ct.toString()),ct},Module.readBinary=function(et){var ot=Module.read(et,!0);return ot.buffer||(ot=new Uint8Array(ot)),assert(ot.buffer),ot},Module.load=function(et){globalEval(read(et))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),module.exports=Module,process.on("uncaughtException",function($){if(!($ instanceof ExitStatus))throw $}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr<"u"&&(Module.printErr=printErr),typeof read<"u"?Module.read=read:Module.read=function(){throw"no read() available (jsc?)"},Module.readBinary=function(et){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(et));var ot=read(et,"binary");return assert(typeof ot=="object"),ot},typeof scriptArgs<"u"?Module.arguments=scriptArgs:typeof arguments<"u"&&(Module.arguments=arguments);else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(et){var ot=new XMLHttpRequest;return ot.open("GET",et,!1),ot.send(null),ot.responseText},typeof arguments<"u"&&(Module.arguments=arguments),typeof console<"u")Module.print||(Module.print=function(et){console.log(et)}),Module.printErr||(Module.printErr=function(et){console.log(et)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump<"u"?function($){dump($)}:function($){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle>"u"&&(Module.setWindowTitle=function($){document.title=$})}else throw"Unknown runtime environment. Where are we?";function globalEval($){eval.call(null,$)}!Module.load&&Module.read&&(Module.load=function(et){globalEval(Module.read(et))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function($){tempRet0=$},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function($){STACKTOP=$},getNativeTypeSize:function($){switch($){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if($[$.length-1]==="*")return Runtime.QUANTUM_SIZE;if($[0]==="i"){var et=parseInt($.substr(1));return assert(et%8===0),et/8}else return 0}}},getNativeFieldSize:function($){return Math.max(Runtime.getNativeTypeSize($),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function($,et){return et==="double"||et==="i64"?$&7&&(assert(($&7)===4),$+=4):assert(($&3)===0),$},getAlignSize:function($,et,ot){return!ot&&($=="i64"||$=="double")?8:$?Math.min(et||($?Runtime.getNativeFieldSize($):0),Runtime.QUANTUM_SIZE):Math.min(et,8)},dynCall:function($,et,ot){return ot&&ot.length?(ot.splice||(ot=Array.prototype.slice.call(ot)),ot.splice(0,0,et),Module["dynCall_"+$].apply(null,ot)):Module["dynCall_"+$].call(null,et)},functionPointers:[],addFunction:function($){for(var et=0;et<Runtime.functionPointers.length;et++)if(!Runtime.functionPointers[et])return Runtime.functionPointers[et]=$,2*(1+et);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function($){Runtime.functionPointers[($-2)/2]=null},warnOnce:function($){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[$]||(Runtime.warnOnce.shown[$]=1,Module.printErr($))},funcWrappers:{},getFuncWrapper:function($,et){assert(et),Runtime.funcWrappers[et]||(Runtime.funcWrappers[et]={});var ot=Runtime.funcWrappers[et];return ot[$]||(ot[$]=function(){return Runtime.dynCall(et,$,arguments)}),ot[$]},getCompilerSetting:function($){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function($){var et=STACKTOP;return STACKTOP=STACKTOP+$|0,STACKTOP=STACKTOP+15&-16,et},staticAlloc:function($){var et=STATICTOP;return STATICTOP=STATICTOP+$|0,STATICTOP=STATICTOP+15&-16,et},dynamicAlloc:function($){var et=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+$|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var ot=enlargeMemory();if(!ot)return DYNAMICTOP=et,0}return et},alignMemory:function($,et){var ot=$=Math.ceil($/(et||16))*(et||16);return ot},makeBigInt:function($,et,ot){var ct=ot?+($>>>0)+ +(et>>>0)*4294967296:+($>>>0)+ +(et|0)*4294967296;return ct},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=!1,tempDouble,tempI64,tempRet0;function assert($,et){$||abort("Assertion failed: "+et)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch($){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function($){var et=Runtime.stackAlloc($.length);return writeArrayToMemory($,et),et},stringToC:function($){var et=0;return $!=null&&$!==0&&(et=Runtime.stackAlloc(($.length<<2)+1),writeStringToMemory($,et)),et}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(et,ot,ct,st,e){var It=getCFunc(et),St=[],Gt=0;if(st)for(var vt=0;vt<st.length;vt++){var it=toC[ct[vt]];it?(Gt===0&&(Gt=Runtime.stackSave()),St[vt]=it(st[vt])):St[vt]=st[vt]}var dt=It.apply(null,St);if(ot==="string"&&(dt=Pointer_stringify(dt)),Gt!==0){if(e&&e.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(Gt)});return}Runtime.stackRestore(Gt)}return dt};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc($){var et=$.toString().match(sourceRegex).slice(1);return{arguments:et[0],body:et[1],returnValue:et[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function($){return $==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function($,et){return"$"+et}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue($,et,ot,ct){switch(ot=ot||"i8",ot.charAt(ot.length-1)==="*"&&(ot="i32"),ot){case"i1":HEAP8[$>>0]=et;break;case"i8":HEAP8[$>>0]=et;break;case"i16":HEAP16[$>>1]=et;break;case"i32":HEAP32[$>>2]=et;break;case"i64":tempI64=[et>>>0,(tempDouble=et,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[$>>2]=tempI64[0],HEAP32[$+4>>2]=tempI64[1];break;case"float":HEAPF32[$>>2]=et;break;case"double":HEAPF64[$>>3]=et;break;default:abort("invalid type for setValue: "+ot)}}Module.setValue=setValue;function getValue($,et,ot){switch(et=et||"i8",et.charAt(et.length-1)==="*"&&(et="i32"),et){case"i1":return HEAP8[$>>0];case"i8":return HEAP8[$>>0];case"i16":return HEAP16[$>>1];case"i32":return HEAP32[$>>2];case"i64":return HEAP32[$>>2];case"float":return HEAPF32[$>>2];case"double":return HEAPF64[$>>3];default:abort("invalid type for setValue: "+et)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate($,et,ot,ct){var st,e;typeof $=="number"?(st=!0,e=$):(st=!1,e=$.length);var It=typeof et=="string"?et:null,St;if(ot==ALLOC_NONE?St=ct:St=[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][ot===void 0?ALLOC_STATIC:ot](Math.max(e,It?1:et.length)),st){var ct=St,Gt;for(assert((St&3)==0),Gt=St+(e&-4);ct<Gt;ct+=4)HEAP32[ct>>2]=0;for(Gt=St+e;ct<Gt;)HEAP8[ct++>>0]=0;return St}if(It==="i8")return $.subarray||$.slice?HEAPU8.set($,St):HEAPU8.set(new Uint8Array($),St),St;for(var vt=0,it,dt,bt;vt<e;){var Tt=$[vt];if(typeof Tt=="function"&&(Tt=Runtime.getFunctionIndex(Tt)),it=It||et[vt],it===0){vt++;continue}it=="i64"&&(it="i32"),setValue(St+vt,Tt,it),bt!==it&&(dt=Runtime.getNativeTypeSize(it),bt=it),vt+=dt}return St}Module.allocate=allocate;function getMemory($){return staticSealed?typeof _sbrk<"u"&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc($):_malloc($):Runtime.staticAlloc($)}Module.getMemory=getMemory;function Pointer_stringify($,et){if(et===0||!$)return"";for(var ot=0,ct,st=0;ct=HEAPU8[$+st>>0],ot|=ct,!(ct==0&&!et||(st++,et&&st==et)););et||(et=st);var e="";if(ot<128){for(var It=1024,St;et>0;)St=String.fromCharCode.apply(String,HEAPU8.subarray($,$+Math.min(et,It))),e=e?e+St:St,$+=It,et-=It;return e}return Module.UTF8ToString($)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString($){for(var et="";;){var ot=HEAP8[$++>>0];if(!ot)return et;et+=String.fromCharCode(ot)}}Module.AsciiToString=AsciiToString;function stringToAscii($,et){return writeAsciiToMemory($,et,!1)}Module.stringToAscii=stringToAscii;function UTF8ArrayToString($,et){for(var ot,ct,st,e,It,St,Gt="";;){if(ot=$[et++],!ot)return Gt;if(!(ot&128)){Gt+=String.fromCharCode(ot);continue}if(ct=$[et++]&63,(ot&224)==192){Gt+=String.fromCharCode((ot&31)<<6|ct);continue}if(st=$[et++]&63,(ot&240)==224?ot=(ot&15)<<12|ct<<6|st:(e=$[et++]&63,(ot&248)==240?ot=(ot&7)<<18|ct<<12|st<<6|e:(It=$[et++]&63,(ot&252)==248?ot=(ot&3)<<24|ct<<18|st<<12|e<<6|It:(St=$[et++]&63,ot=(ot&1)<<30|ct<<24|st<<18|e<<12|It<<6|St))),ot<65536)Gt+=String.fromCharCode(ot);else{var vt=ot-65536;Gt+=String.fromCharCode(55296|vt>>10,56320|vt&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString($){return UTF8ArrayToString(HEAPU8,$)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array($,et,ot,ct){if(!(ct>0))return 0;for(var st=ot,e=ot+ct-1,It=0;It<$.length;++It){var St=$.charCodeAt(It);if(St>=55296&&St<=57343&&(St=65536+((St&1023)<<10)|$.charCodeAt(++It)&1023),St<=127){if(ot>=e)break;et[ot++]=St}else if(St<=2047){if(ot+1>=e)break;et[ot++]=192|St>>6,et[ot++]=128|St&63}else if(St<=65535){if(ot+2>=e)break;et[ot++]=224|St>>12,et[ot++]=128|St>>6&63,et[ot++]=128|St&63}else if(St<=2097151){if(ot+3>=e)break;et[ot++]=240|St>>18,et[ot++]=128|St>>12&63,et[ot++]=128|St>>6&63,et[ot++]=128|St&63}else if(St<=67108863){if(ot+4>=e)break;et[ot++]=248|St>>24,et[ot++]=128|St>>18&63,et[ot++]=128|St>>12&63,et[ot++]=128|St>>6&63,et[ot++]=128|St&63}else{if(ot+5>=e)break;et[ot++]=252|St>>30,et[ot++]=128|St>>24&63,et[ot++]=128|St>>18&63,et[ot++]=128|St>>12&63,et[ot++]=128|St>>6&63,et[ot++]=128|St&63}}return et[ot]=0,ot-st}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8($,et,ot){return stringToUTF8Array($,HEAPU8,et,ot)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8($){for(var et=0,ot=0;ot<$.length;++ot){var ct=$.charCodeAt(ot);ct>=55296&&ct<=57343&&(ct=65536+((ct&1023)<<10)|$.charCodeAt(++ot)&1023),ct<=127?++et:ct<=2047?et+=2:ct<=65535?et+=3:ct<=2097151?et+=4:ct<=67108863?et+=5:et+=6}return et}Module.lengthBytesUTF8=lengthBytesUTF8;function UTF16ToString($){for(var et=0,ot="";;){var ct=HEAP16[$+et*2>>1];if(ct==0)return ot;++et,ot+=String.fromCharCode(ct)}}Module.UTF16ToString=UTF16ToString;function stringToUTF16($,et,ot){if(ot===void 0&&(ot=2147483647),ot<2)return 0;ot-=2;for(var ct=et,st=ot<$.length*2?ot/2:$.length,e=0;e<st;++e){var It=$.charCodeAt(e);HEAP16[et>>1]=It,et+=2}return HEAP16[et>>1]=0,et-ct}Module.stringToUTF16=stringToUTF16;function lengthBytesUTF16($){return $.length*2}Module.lengthBytesUTF16=lengthBytesUTF16;function UTF32ToString($){for(var et=0,ot="";;){var ct=HEAP32[$+et*4>>2];if(ct==0)return ot;if(++et,ct>=65536){var st=ct-65536;ot+=String.fromCharCode(55296|st>>10,56320|st&1023)}else ot+=String.fromCharCode(ct)}}Module.UTF32ToString=UTF32ToString;function stringToUTF32($,et,ot){if(ot===void 0&&(ot=2147483647),ot<4)return 0;for(var ct=et,st=ct+ot-4,e=0;e<$.length;++e){var It=$.charCodeAt(e);if(It>=55296&&It<=57343){var St=$.charCodeAt(++e);It=65536+((It&1023)<<10)|St&1023}if(HEAP32[et>>2]=It,et+=4,et+4>st)break}return HEAP32[et>>2]=0,et-ct}Module.stringToUTF32=stringToUTF32;function lengthBytesUTF32($){for(var et=0,ot=0;ot<$.length;++ot){var ct=$.charCodeAt(ot);ct>=55296&&ct<=57343&&++ot,et+=4}return et}Module.lengthBytesUTF32=lengthBytesUTF32;function demangle($){var et=!!Module.___cxa_demangle;if(et)try{var ot=_malloc($.length);writeStringToMemory($.substr(1),ot);var ct=_malloc(4),st=Module.___cxa_demangle(ot,0,0,ct);if(getValue(ct,"i32")===0&&st)return Pointer_stringify(st)}catch{}finally{ot&&_free(ot),ct&&_free(ct),st&&_free(st)}var e=3,It={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},St=[],Gt=!0;function vt(){e++,$[e]==="K"&&e++;for(var bt=[];$[e]!=="E";){if($[e]==="S"){e++;var Tt=$.indexOf("_",e),Et=$.substring(e,Tt)||0;bt.push(St[Et]||"?"),e=Tt+1;continue}if($[e]==="C"){bt.push(bt[bt.length-1]),e+=2;continue}var Mt=parseInt($.substr(e)),Rt=Mt.toString().length;if(!Mt||!Rt){e--;break}var pt=$.substr(e+Rt,Mt);bt.push(pt),St.push(pt),e+=Rt+Mt}return e++,bt}function it(bt,Tt,Et){Tt=Tt||1/0;var Mt="",Rt=[];function pt(){return"("+Rt.join(", ")+")"}var mt;if($[e]==="N"){if(mt=vt().join("::"),Tt--,Tt===0)return bt?[mt]:mt}else{($[e]==="K"||Gt&&$[e]==="L")&&e++;var gt=parseInt($.substr(e));if(gt){var Ct=gt.toString().length;mt=$.substr(e+Ct,gt),e+=Ct+gt}}if(Gt=!1,$[e]==="I"){e++;var xt=it(!0),Dt=it(!0,1,!0);Mt+=Dt[0]+" "+mt+"<"+xt.join(", ")+">"}else Mt=mt;e:for(;e<$.length&&Tt-- >0;){var Ht=$[e++];if(Ht in It)Rt.push(It[Ht]);else switch(Ht){case"P":Rt.push(it(!0,1,!0)[0]+"*");break;case"R":Rt.push(it(!0,1,!0)[0]+"&");break;case"L":{e++;var Ut=$.indexOf("E",e),gt=Ut-e;Rt.push($.substr(e,gt)),e+=gt+2;break}case"A":{var gt=parseInt($.substr(e));if(e+=gt.toString().length,$[e]!=="_")throw"?";e++,Rt.push(it(!0,1,!0)[0]+" ["+gt+"]");break}case"E":break e;default:Mt+="?"+Ht;break e}}return!Et&&Rt.length===1&&Rt[0]==="void"&&(Rt=[]),bt?(Mt&&Rt.push(Mt+"?"),Rt):Mt+pt()}var dt=$;try{if($=="Object._main"||$=="_main")return"main()";if(typeof $=="number"&&($=Pointer_stringify($)),$[0]!=="_"||$[1]!=="_"||$[2]!=="Z")return $;switch($[3]){case"n":return"operator new()";case"d":return"operator delete()"}dt=it()}catch{dt+="?"}return dt.indexOf("?")>=0&&!et&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),dt}function demangleAll($){return $.replace(/__Z[\w\d_]+/g,function(et){var ot=demangle(et);return et===ot?et:et+" ["+ot+"]"})}function jsStackTrace(){var $=new Error;if(!$.stack){try{throw new Error(0)}catch(et){$=et}if(!$.stack)return"(no stack trace available)"}return $.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module.stackTrace=stackTrace;var PAGE_SIZE=4096;function alignMemoryPage($){return $%4096>0&&($+=4096-$%4096),$}var HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}for(var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456,totalMemory=64*1024;totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK;)totalMemory<16*1024*1024?totalMemory*=2:totalMemory+=16*1024*1024;totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert(typeof Int32Array<"u"&&typeof Float64Array<"u"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer;buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(HEAPU8[0]===255&&HEAPU8[3]===0,"Typed arrays 2 must be run on a little-endian system"),Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks($){for(;$.length>0;){var et=$.shift();if(typeof et=="function"){et();continue}var ot=et.func;typeof ot=="number"?et.arg===void 0?Runtime.dynCall("v",ot):Runtime.dynCall("vi",ot,[et.arg]):ot(et.arg===void 0?null:et.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun($){__ATPRERUN__.unshift($)}Module.addOnPreRun=addOnPreRun;function addOnInit($){__ATINIT__.unshift($)}Module.addOnInit=addOnInit;function addOnPreMain($){__ATMAIN__.unshift($)}Module.addOnPreMain=addOnPreMain;function addOnExit($){__ATEXIT__.unshift($)}Module.addOnExit=addOnExit;function addOnPostRun($){__ATPOSTRUN__.unshift($)}Module.addOnPostRun=addOnPostRun;function intArrayFromString($,et,ot){var ct=ot>0?ot:lengthBytesUTF8($)+1,st=new Array(ct),e=stringToUTF8Array($,st,0,st.length);return et&&(st.length=e),st}Module.intArrayFromString=intArrayFromString;function intArrayToString($){for(var et=[],ot=0;ot<$.length;ot++){var ct=$[ot];ct>255&&(ct&=255),et.push(String.fromCharCode(ct))}return et.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory($,et,ot){for(var ct=intArrayFromString($,ot),st=0;st<ct.length;){var e=ct[st];HEAP8[et+st>>0]=e,st=st+1}}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory($,et){for(var ot=0;ot<$.length;ot++)HEAP8[et++>>0]=$[ot]}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory($,et,ot){for(var ct=0;ct<$.length;++ct)HEAP8[et++>>0]=$.charCodeAt(ct);ot||(HEAP8[et>>0]=0)}Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function $(et,ot){var ct=et>>>16,st=et&65535,e=ot>>>16,It=ot&65535;return st*It+(ct*It+st*e<<16)|0}),Math.imul=Math.imul,Math.clz32||(Math.clz32=function($){$=$>>>0;for(var et=0;et<32;et++)if($&1<<31-et)return et;return 32}),Math.clz32=Math.clz32;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency($){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency($){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var et=dependenciesFulfilled;dependenciesFulfilled=null,et()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var ASM_CONSTS=[function($,et,ot,ct){{artoolkit.multiEachMarkerInfo||(artoolkit.multiEachMarkerInfo={});var st=artoolkit.multiEachMarkerInfo;st.visible=$,st.pattId=et,st.pattType=ot,st.width=ct}},function($,et,ot,ct,st,e,It,St,Gt,vt,it,dt,bt,Tt,Et,Mt,Rt,pt,mt,gt,Ct,xt,Dt,Ht,Ut,Xt,Qt,tn,on,vn,fn,Cn,dn){{var An=arguments,nn=12;artoolkit.markerInfo||(artoolkit.markerInfo={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var Zt=artoolkit.markerInfo;Zt.area=$,Zt.id=et,Zt.idPatt=ot,Zt.idMatrix=ct,Zt.dir=st,Zt.dirPatt=e,Zt.dirMatrix=It,Zt.cf=St,Zt.cfPatt=Gt,Zt.cfMatrix=vt,Zt.pos[0]=it,Zt.pos[1]=dt,Zt.line[0][0]=An[nn++],Zt.line[0][1]=An[nn++],Zt.line[0][2]=An[nn++],Zt.line[1][0]=An[nn++],Zt.line[1][1]=An[nn++],Zt.line[1][2]=An[nn++],Zt.line[2][0]=An[nn++],Zt.line[2][1]=An[nn++],Zt.line[2][2]=An[nn++],Zt.line[3][0]=An[nn++],Zt.line[3][1]=An[nn++],Zt.line[3][2]=An[nn++],Zt.vertex[0][0]=An[nn++],Zt.vertex[0][1]=An[nn++],Zt.vertex[1][0]=An[nn++],Zt.vertex[1][1]=An[nn++],Zt.vertex[2][0]=An[nn++],Zt.vertex[2][1]=An[nn++],Zt.vertex[3][0]=An[nn++],Zt.vertex[3][1]=An[nn++],Zt.errorCorrected=An[nn++]}},function($,et,ot,ct,st){{artoolkit.frameMalloc||(artoolkit.frameMalloc={});var e=artoolkit.frameMalloc;e.framepointer=et,e.framesize=ot,e.camera=ct,e.transform=st}}];function _emscripten_asm_const_33($,et,ot,ct,st,e,It,St,Gt,vt,it,dt,bt,Tt,Et,Mt,Rt,pt,mt,gt,Ct,xt,Dt,Ht,Ut,Xt,Qt,tn,on,vn,fn,Cn,dn,An){return ASM_CONSTS[$](et,ot,ct,st,e,It,St,Gt,vt,it,dt,bt,Tt,Et,Mt,Rt,pt,mt,gt,Ct,xt,Dt,Ht,Ut,Xt,Qt,tn,on,vn,fn,Cn,dn,An)}function _emscripten_asm_const_4($,et,ot,ct,st){return ASM_CONSTS[$](et,ot,ct,st)}function _emscripten_asm_const_5($,et,ot,ct,st,e){return ASM_CONSTS[$](et,ot,ct,st,e)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);assert(tempDoublePtr%8==0);function _atexit($,et){__ATEXIT__.unshift({func:$,arg:et})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}Module._i64Subtract=_i64Subtract;function ___assert_fail($,et,ot,ct){throw ABORT=!0,"Assertion failed: "+Pointer_stringify($)+", at: "+[et?Pointer_stringify(et):"unknown filename",ot,ct?Pointer_stringify(ct):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var $=new Array(256),et=0;et<256;++et)$[et]=String.fromCharCode(et);embind_charCodes=$}var embind_charCodes=void 0;function readLatin1String($){for(var et="",ot=$;HEAPU8[ot];)et+=embind_charCodes[HEAPU8[ot++]];return et}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName($){if($===void 0)return"_unknown";$=$.replace(/[^a-zA-Z0-9_]/g,"$");var et=$.charCodeAt(0);return et>=char_0&&et<=char_9?"_"+$:$}function createNamedFunction($,et){return $=makeLegalFunctionName($),new Function("body","return function "+$+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(et)}function extendError($,et){var ot=createNamedFunction(et,function(ct){this.name=et,this.message=ct;var st=new Error(ct).stack;st!==void 0&&(this.stack=this.toString()+`
`+st.replace(/^Error(:[^\n]*)?\n/,""))});return ot.prototype=Object.create($.prototype),ot.prototype.constructor=ot,ot.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},ot}var BindingError=void 0;function throwBindingError($){throw new BindingError($)}var InternalError=void 0;function throwInternalError($){throw new InternalError($)}function whenDependentTypesAreResolved($,et,ot){$.forEach(function(St){typeDependencies[St]=et});function ct(St){var Gt=ot(St);Gt.length!==$.length&&throwInternalError("Mismatched type converter count");for(var vt=0;vt<$.length;++vt)registerType($[vt],Gt[vt])}var st=new Array(et.length),e=[],It=0;et.forEach(function(St,Gt){registeredTypes.hasOwnProperty(St)?st[Gt]=registeredTypes[St]:(e.push(St),awaitingDependencies.hasOwnProperty(St)||(awaitingDependencies[St]=[]),awaitingDependencies[St].push(function(){st[Gt]=registeredTypes[St],++It,It===e.length&&ct(st)}))}),e.length===0&&ct(st)}function registerType($,et,ot){if(ot=ot||{},!("argPackAdvance"in et))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ct=et.name;if($||throwBindingError('type "'+ct+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty($)){if(ot.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+ct+"' twice")}if(registeredTypes[$]=et,delete typeDependencies[$],awaitingDependencies.hasOwnProperty($)){var st=awaitingDependencies[$];delete awaitingDependencies[$],st.forEach(function(e){e()})}}function __embind_register_void($,et){et=readLatin1String(et),registerType($,{isVoid:!0,name:et,argPackAdvance:0,fromWireType:function(){},toWireType:function(ot,ct){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function($){if(!$||EXCEPTIONS.infos[$])return $;for(var et in EXCEPTIONS.infos){var ot=EXCEPTIONS.infos[et];if(ot.adjusted===$)return et}return $},addRef:function($){if($){var et=EXCEPTIONS.infos[$];et.refcount++}},decRef:function($){if($){var et=EXCEPTIONS.infos[$];assert(et.refcount>0),et.refcount--,et.refcount===0&&(et.destructor&&Runtime.dynCall("vi",et.destructor,[$]),delete EXCEPTIONS.infos[$],___cxa_free_exception($))}},clearRef:function($){if($){var et=EXCEPTIONS.infos[$];et.refcount=0}}};function ___resumeException($){throw EXCEPTIONS.last||(EXCEPTIONS.last=$),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust($)),$+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var $=EXCEPTIONS.last;if(!$)return asm.setTempRet0(0),0|0;var et=EXCEPTIONS.infos[$],ot=et.type;if(!ot)return asm.setTempRet0(0),$|0;var ct=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(ot),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=$,$=___cxa_find_matching_catch.buffer;for(var st=0;st<ct.length;st++)if(ct[st]&&Module.___cxa_can_catch(ct[st],ot,$))return $=HEAP32[$>>2],et.adjusted=$,asm.setTempRet0(ct[st]),$|0;return $=HEAP32[$>>2],asm.setTempRet0(ot),$|0}function ___cxa_throw($,et,ot){throw EXCEPTIONS.infos[$]={ptr:$,adjusted:$,type:et,destructor:ot,refcount:0},EXCEPTIONS.last=$,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,$+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module._memset=_memset;function getShiftFromSize($){switch($){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+$)}}function __embind_register_bool($,et,ot,ct,st){var e=getShiftFromSize(ot);et=readLatin1String(et),registerType($,{name:et,fromWireType:function(It){return!!It},toWireType:function(It,St){return St?ct:st},argPackAdvance:8,readValueFromPointer:function(It){var St;if(ot===1)St=HEAP8;else if(ot===2)St=HEAP16;else if(ot===4)St=HEAP32;else throw new TypeError("Unknown boolean type size: "+et);return this.fromWireType(St[It>>e])},destructorFunction:null})}Module._bitshift64Shl=_bitshift64Shl;function _abort(){Module.abort()}function _free(){}Module._free=_free;function _malloc($){var et=Runtime.dynamicAlloc($+8);return et+8&4294967288}Module._malloc=_malloc;function simpleReadValueFromPointer($){return this.fromWireType(HEAPU32[$>>2])}function __embind_register_std_string($,et){et=readLatin1String(et),registerType($,{name:et,fromWireType:function(ot){for(var ct=HEAPU32[ot>>2],st=new Array(ct),e=0;e<ct;++e)st[e]=String.fromCharCode(HEAPU8[ot+4+e]);return _free(ot),st.join("")},toWireType:function(ot,ct){ct instanceof ArrayBuffer&&(ct=new Uint8Array(ct));function st(dt,bt){return dt[bt]}function e(dt,bt){return dt.charCodeAt(bt)}var It;ct instanceof Uint8Array||ct instanceof Int8Array?It=st:typeof ct=="string"?It=e:throwBindingError("Cannot pass non-string to std::string");var St=ct.length,Gt=_malloc(4+St);HEAPU32[Gt>>2]=St;for(var vt=0;vt<St;++vt){var it=It(ct,vt);it>255&&(_free(Gt),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[Gt+4+vt]=it}return ot!==null&&ot.push(_free,Gt),Gt},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(ot){_free(ot)}})}function __embind_register_std_wstring($,et,ot){ot=readLatin1String(ot);var ct,st;et===2?(ct=function(){return HEAPU16},st=1):et===4&&(ct=function(){return HEAPU32},st=2),registerType($,{name:ot,fromWireType:function(e){for(var It=ct(),St=HEAPU32[e>>2],Gt=new Array(St),vt=e+4>>st,it=0;it<St;++it)Gt[it]=String.fromCharCode(It[vt+it]);return _free(e),Gt.join("")},toWireType:function(e,It){var St=ct(),Gt=It.length,vt=_malloc(4+Gt*et);HEAPU32[vt>>2]=Gt;for(var it=vt+4>>st,dt=0;dt<Gt;++dt)St[it+dt]=It.charCodeAt(dt);return e!==null&&e.push(_free,vt),vt},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}Module._i64Add=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr($){if($===null)return"null";var et=typeof $;return et==="object"||et==="array"||et==="function"?$.toString():""+$}function integerReadValueFromPointer($,et,ot){switch(et){case 0:return ot?function(st){return HEAP8[st]}:function(st){return HEAPU8[st]};case 1:return ot?function(st){return HEAP16[st>>1]}:function(st){return HEAPU16[st>>1]};case 2:return ot?function(st){return HEAP32[st>>2]}:function(st){return HEAPU32[st>>2]};default:throw new TypeError("Unknown integer type: "+$)}}function __embind_register_integer($,et,ot,ct,st){et=readLatin1String(et),st===-1&&(st=4294967295);var e=getShiftFromSize(ot),It=function(Gt){return Gt};if(ct===0){var St=32-8*ot;It=function(Gt){return Gt<<St>>>St}}registerType($,{name:et,fromWireType:It,toWireType:function(Gt,vt){if(typeof vt!="number"&&typeof vt!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(vt)+'" to '+this.name);if(vt<ct||vt>st)throw new TypeError('Passing a number "'+_embind_repr(vt)+'" from JS side to C/C++ side to an argument of type "'+et+'", which is outside the valid range ['+ct+", "+st+"]!");return vt|0},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(et,e,ct!==0),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref($){$>4&&--emval_handle_array[$].refcount===0&&(emval_handle_array[$]=void 0,emval_free_list.push($))}function count_emval_handles(){for(var $=0,et=5;et<emval_handle_array.length;++et)emval_handle_array[et]!==void 0&&++$;return $}function get_first_emval(){for(var $=5;$<emval_handle_array.length;++$)if(emval_handle_array[$]!==void 0)return emval_handle_array[$];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register($){switch($){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var et=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[et]={refcount:1,value:$},et}}}function __embind_register_emval($,et){et=readLatin1String(et),registerType($,{name:et,fromWireType:function(ot){var ct=emval_handle_array[ot].value;return __emval_decref(ot),ct},toWireType:function(ot,ct){return __emval_register(ct)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception($){return _malloc($)}var _sin=Math_sin;function ___setErrNo($){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=$),$}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf($){switch($){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}Module._bitshift64Lshr=_bitshift64Lshr;function __exit($){Module.exit($)}function _exit($){__exit($)}function floatReadValueFromPointer($,et){switch(et){case 2:return function(ot){return this.fromWireType(HEAPF32[ot>>2])};case 3:return function(ot){return this.fromWireType(HEAPF64[ot>>3])};default:throw new TypeError("Unknown float type: "+$)}}function __embind_register_float($,et,ot){var ct=getShiftFromSize(ot);et=readLatin1String(et),registerType($,{name:et,fromWireType:function(st){return st},toWireType:function(st,e){if(typeof e!="number"&&typeof e!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(et,ct),destructorFunction:null})}function _pthread_cleanup_push($,et){__ATEXIT__.push(function(){Runtime.dynCall("vi",$,[et])}),_pthread_cleanup_push.level=__ATEXIT__.length}function new_($,et){if(!($ instanceof Function))throw new TypeError("new_ called with constructor type "+typeof $+" which is not a function");var ot=createNamedFunction($.name||"unknownFunctionName",function(){});ot.prototype=$.prototype;var ct=new ot,st=$.apply(ct,et);return st instanceof Object?st:ct}function runDestructors($){for(;$.length;){var et=$.pop(),ot=$.pop();ot(et)}}function craftInvokerFunction($,et,ot,ct,st){var e=et.length;e<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var It=et[1]!==null&&ot!==null,St="",Gt="",vt=0;vt<e-2;++vt)St+=(vt!==0?", ":"")+"arg"+vt,Gt+=(vt!==0?", ":"")+"arg"+vt+"Wired";for(var it="return function "+makeLegalFunctionName($)+"("+St+`) {
if (arguments.length !== `+(e-2)+`) {
throwBindingError('function `+$+" called with ' + arguments.length + ' arguments, expected "+(e-2)+` args!');
}
`,dt=!1,vt=1;vt<et.length;++vt)if(et[vt]!==null&&et[vt].destructorFunction===void 0){dt=!0;break}dt&&(it+=`var destructors = [];
`);var bt=dt?"destructors":"null",Tt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Et=[throwBindingError,ct,st,runDestructors,et[0],et[1]];It&&(it+="var thisWired = classParam.toWireType("+bt+`, this);
`);for(var vt=0;vt<e-2;++vt)it+="var arg"+vt+"Wired = argType"+vt+".toWireType("+bt+", arg"+vt+"); // "+et[vt+2].name+`
`,Tt.push("argType"+vt),Et.push(et[vt+2]);It&&(Gt="thisWired"+(Gt.length>0?", ":"")+Gt);var Mt=et[0].name!=="void";if(it+=(Mt?"var rv = ":"")+"invoker(fn"+(Gt.length>0?", ":"")+Gt+`);
`,dt)it+=`runDestructors(destructors);
`;else for(var vt=It?1:2;vt<et.length;++vt){var Rt=vt===1?"thisWired":"arg"+(vt-2)+"Wired";et[vt].destructorFunction!==null&&(it+=Rt+"_dtor("+Rt+"); // "+et[vt].name+`
`,Tt.push(Rt+"_dtor"),Et.push(et[vt].destructorFunction))}Mt&&(it+=`var ret = retType.fromWireType(rv);
return ret;
`),it+=`}
`,Tt.push(it);var pt=new_(Function,Tt).apply(null,Et);return pt}function ensureOverloadTable($,et,ot){if($[et].overloadTable===void 0){var ct=$[et];$[et]=function(){return $[et].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+ot+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+$[et].overloadTable+")!"),$[et].overloadTable[arguments.length].apply(this,arguments)},$[et].overloadTable=[],$[et].overloadTable[ct.argCount]=ct}}function exposePublicSymbol($,et,ot){Module.hasOwnProperty($)?((ot===void 0||Module[$].overloadTable!==void 0&&Module[$].overloadTable[ot]!==void 0)&&throwBindingError("Cannot register public name '"+$+"' twice"),ensureOverloadTable(Module,$,$),Module.hasOwnProperty(ot)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+ot+")!"),Module[$].overloadTable[ot]=et):(Module[$]=et,ot!==void 0&&(Module[$].numArguments=ot))}function heap32VectorToArray($,et){for(var ot=[],ct=0;ct<$;ct++)ot.push(HEAP32[(et>>2)+ct]);return ot}function replacePublicSymbol($,et,ot){Module.hasOwnProperty($)||throwInternalError("Replacing nonexistant public symbol"),Module[$].overloadTable!==void 0&&ot!==void 0?Module[$].overloadTable[ot]=et:Module[$]=et}function requireFunction($,et){$=readLatin1String($);function ot(e){for(var It=[],St=1;St<$.length;++St)It.push("a"+St);var Gt="dynCall_"+$+"_"+et,vt="return function "+Gt+"("+It.join(", ")+`) {
`;return vt+="    return dynCall(rawFunction"+(It.length?", ":"")+It.join(", ")+`);
`,vt+=`};
`,new Function("dynCall","rawFunction",vt)(e,et)}var ct;if(Module["FUNCTION_TABLE_"+$]!==void 0)ct=Module["FUNCTION_TABLE_"+$][et];else if(typeof FUNCTION_TABLE<"u")ct=FUNCTION_TABLE[et];else{var st=asm["dynCall_"+$];st===void 0&&(st=asm["dynCall_"+$.replace(/f/g,"d")],st===void 0&&throwBindingError("No dynCall invoker for signature: "+$)),ct=ot(st)}return typeof ct!="function"&&throwBindingError("unknown function pointer with signature "+$+": "+et),ct}var UnboundTypeError=void 0;function getTypeName($){var et=___getTypeName($),ot=readLatin1String(et);return _free(et),ot}function throwUnboundTypeError($,et){var ot=[],ct={};function st(e){if(!ct[e]&&!registeredTypes[e]){if(typeDependencies[e]){typeDependencies[e].forEach(st);return}ot.push(e),ct[e]=!0}}throw et.forEach(st),new UnboundTypeError($+": "+ot.map(getTypeName).join([", "]))}function __embind_register_function($,et,ot,ct,st,e){var It=heap32VectorToArray(et,ot);$=readLatin1String($),st=requireFunction(ct,st),exposePublicSymbol($,function(){throwUnboundTypeError("Cannot call "+$+" due to unbound types",It)},et-1),whenDependentTypesAreResolved([],It,function(St){var Gt=[St[0],null].concat(St.slice(1));return replacePublicSymbol($,craftInvokerFunction($,Gt,null,st,e),et-1),[]})}function __embind_register_constant($,et,ot){$=readLatin1String($),whenDependentTypesAreResolved([],[et],function(ct){return ct=ct[0],Module[$]=ct.fromWireType(ot),[]})}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function($){var et=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return et.exec($).slice(1)},normalizeArray:function($,et){for(var ot=0,ct=$.length-1;ct>=0;ct--){var st=$[ct];st==="."?$.splice(ct,1):st===".."?($.splice(ct,1),ot++):ot&&($.splice(ct,1),ot--)}if(et)for(;ot--;ot)$.unshift("..");return $},normalize:function($){var et=$.charAt(0)==="/",ot=$.substr(-1)==="/";return $=PATH.normalizeArray($.split("/").filter(function(ct){return!!ct}),!et).join("/"),!$&&!et&&($="."),$&&ot&&($+="/"),(et?"/":"")+$},dirname:function($){var et=PATH.splitPath($),ot=et[0],ct=et[1];return!ot&&!ct?".":(ct&&(ct=ct.substr(0,ct.length-1)),ot+ct)},basename:function($){if($==="/")return"/";var et=$.lastIndexOf("/");return et===-1?$:$.substr(et+1)},extname:function($){return PATH.splitPath($)[3]},join:function(){var $=Array.prototype.slice.call(arguments,0);return PATH.normalize($.join("/"))},join2:function($,et){return PATH.normalize($+"/"+et)},resolve:function(){for(var $="",et=!1,ot=arguments.length-1;ot>=-1&&!et;ot--){var ct=ot>=0?arguments[ot]:FS.cwd();if(typeof ct!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!ct)return"";$=ct+"/"+$,et=ct.charAt(0)==="/"}return $=PATH.normalizeArray($.split("/").filter(function(st){return!!st}),!et).join("/"),(et?"/":"")+$||"."},relative:function($,et){$=PATH.resolve($).substr(1),et=PATH.resolve(et).substr(1);function ot(vt){for(var it=0;it<vt.length&&vt[it]==="";it++);for(var dt=vt.length-1;dt>=0&&vt[dt]==="";dt--);return it>dt?[]:vt.slice(it,dt-it+1)}for(var ct=ot($.split("/")),st=ot(et.split("/")),e=Math.min(ct.length,st.length),It=e,St=0;St<e;St++)if(ct[St]!==st[St]){It=St;break}for(var Gt=[],St=It;St<ct.length;St++)Gt.push("..");return Gt=Gt.concat(st.slice(It)),Gt.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function($,et){TTY.ttys[$]={input:[],output:[],ops:et},FS.registerDevice($,TTY.stream_ops)},stream_ops:{open:function($){var et=TTY.ttys[$.node.rdev];if(!et)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);$.tty=et,$.seekable=!1},close:function($){$.tty.ops.flush($.tty)},flush:function($){$.tty.ops.flush($.tty)},read:function($,et,ot,ct,st){if(!$.tty||!$.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0,It=0;It<ct;It++){var St;try{St=$.tty.ops.get_char($.tty)}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(St===void 0&&e===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(St==null)break;e++,et[ot+It]=St}return e&&($.node.timestamp=Date.now()),e},write:function($,et,ot,ct,st){if(!$.tty||!$.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0;e<ct;e++)try{$.tty.ops.put_char($.tty,et[ot+e])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return ct&&($.node.timestamp=Date.now()),e}},default_tty_ops:{get_char:function($){if(!$.input.length){var et=null;if(ENVIRONMENT_IS_NODE){var ot=256,ct=new Buffer(ot),st=0,e=process.stdin.fd,It=!1;try{e=fs.openSync("/dev/stdin","r"),It=!0}catch{}st=fs.readSync(e,ct,0,ot,null),It&&fs.closeSync(e),st>0?et=ct.slice(0,st).toString("utf-8"):et=null}else typeof window<"u"&&typeof window.prompt=="function"?(et=window.prompt("Input: "),et!==null&&(et+=`
`)):typeof readline=="function"&&(et=readline(),et!==null&&(et+=`
`));if(!et)return null;$.input=intArrayFromString(et,!0)}return $.input.shift()},put_char:function($,et){et===null||et===10?(Module.print(UTF8ArrayToString($.output,0)),$.output=[]):et!=0&&$.output.push(et)},flush:function($){$.output&&$.output.length>0&&(Module.print(UTF8ArrayToString($.output,0)),$.output=[])}},default_tty1_ops:{put_char:function($,et){et===null||et===10?(Module.printErr(UTF8ArrayToString($.output,0)),$.output=[]):et!=0&&$.output.push(et)},flush:function($){$.output&&$.output.length>0&&(Module.printErr(UTF8ArrayToString($.output,0)),$.output=[])}}},MEMFS={ops_table:null,mount:function($){return MEMFS.createNode(null,"/",16895,0)},createNode:function($,et,ot,ct){if(FS.isBlkdev(ot)||FS.isFIFO(ot))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var st=FS.createNode($,et,ot,ct);return FS.isDir(st.mode)?(st.node_ops=MEMFS.ops_table.dir.node,st.stream_ops=MEMFS.ops_table.dir.stream,st.contents={}):FS.isFile(st.mode)?(st.node_ops=MEMFS.ops_table.file.node,st.stream_ops=MEMFS.ops_table.file.stream,st.usedBytes=0,st.contents=null):FS.isLink(st.mode)?(st.node_ops=MEMFS.ops_table.link.node,st.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(st.mode)&&(st.node_ops=MEMFS.ops_table.chrdev.node,st.stream_ops=MEMFS.ops_table.chrdev.stream),st.timestamp=Date.now(),$&&($.contents[et]=st),st},getFileDataAsRegularArray:function($){if($.contents&&$.contents.subarray){for(var et=[],ot=0;ot<$.usedBytes;++ot)et.push($.contents[ot]);return et}return $.contents},getFileDataAsTypedArray:function($){return $.contents?$.contents.subarray?$.contents.subarray(0,$.usedBytes):new Uint8Array($.contents):new Uint8Array},expandFileStorage:function($,et){if($.contents&&$.contents.subarray&&et>$.contents.length&&($.contents=MEMFS.getFileDataAsRegularArray($),$.usedBytes=$.contents.length),!$.contents||$.contents.subarray){var ot=$.contents?$.contents.buffer.byteLength:0;if(ot>=et)return;var ct=1024*1024;et=Math.max(et,ot*(ot<ct?2:1.125)|0),ot!=0&&(et=Math.max(et,256));var st=$.contents;$.contents=new Uint8Array(et),$.usedBytes>0&&$.contents.set(st.subarray(0,$.usedBytes),0);return}for(!$.contents&&et>0&&($.contents=[]);$.contents.length<et;)$.contents.push(0)},resizeFileStorage:function($,et){if($.usedBytes!=et){if(et==0){$.contents=null,$.usedBytes=0;return}if(!$.contents||$.contents.subarray){var ot=$.contents;$.contents=new Uint8Array(new ArrayBuffer(et)),ot&&$.contents.set(ot.subarray(0,Math.min(et,$.usedBytes))),$.usedBytes=et;return}if($.contents||($.contents=[]),$.contents.length>et)$.contents.length=et;else for(;$.contents.length<et;)$.contents.push(0);$.usedBytes=et}},node_ops:{getattr:function($){var et={};return et.dev=FS.isChrdev($.mode)?$.id:1,et.ino=$.id,et.mode=$.mode,et.nlink=1,et.uid=0,et.gid=0,et.rdev=$.rdev,FS.isDir($.mode)?et.size=4096:FS.isFile($.mode)?et.size=$.usedBytes:FS.isLink($.mode)?et.size=$.link.length:et.size=0,et.atime=new Date($.timestamp),et.mtime=new Date($.timestamp),et.ctime=new Date($.timestamp),et.blksize=4096,et.blocks=Math.ceil(et.size/et.blksize),et},setattr:function($,et){et.mode!==void 0&&($.mode=et.mode),et.timestamp!==void 0&&($.timestamp=et.timestamp),et.size!==void 0&&MEMFS.resizeFileStorage($,et.size)},lookup:function($,et){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function($,et,ot,ct){return MEMFS.createNode($,et,ot,ct)},rename:function($,et,ot){if(FS.isDir($.mode)){var ct;try{ct=FS.lookupNode(et,ot)}catch{}if(ct)for(var st in ct.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete $.parent.contents[$.name],$.name=ot,et.contents[ot]=$,$.parent=et},unlink:function($,et){delete $.contents[et]},rmdir:function($,et){var ot=FS.lookupNode($,et);for(var ct in ot.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete $.contents[et]},readdir:function($){var et=[".",".."];for(var ot in $.contents)$.contents.hasOwnProperty(ot)&&et.push(ot);return et},symlink:function($,et,ot){var ct=MEMFS.createNode($,et,41471,0);return ct.link=ot,ct},readlink:function($){if(!FS.isLink($.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return $.link}},stream_ops:{read:function($,et,ot,ct,st){var e=$.node.contents;if(st>=$.node.usedBytes)return 0;var It=Math.min($.node.usedBytes-st,ct);if(assert(It>=0),It>8&&e.subarray)et.set(e.subarray(st,st+It),ot);else for(var St=0;St<It;St++)et[ot+St]=e[st+St];return It},write:function($,et,ot,ct,st,e){if(!ct)return 0;var It=$.node;if(It.timestamp=Date.now(),et.subarray&&(!It.contents||It.contents.subarray)){if(e)return It.contents=et.subarray(ot,ot+ct),It.usedBytes=ct,ct;if(It.usedBytes===0&&st===0)return It.contents=new Uint8Array(et.subarray(ot,ot+ct)),It.usedBytes=ct,ct;if(st+ct<=It.usedBytes)return It.contents.set(et.subarray(ot,ot+ct),st),ct}if(MEMFS.expandFileStorage(It,st+ct),It.contents.subarray&&et.subarray)It.contents.set(et.subarray(ot,ot+ct),st);else for(var St=0;St<ct;St++)It.contents[st+St]=et[ot+St];return It.usedBytes=Math.max(It.usedBytes,st+ct),ct},llseek:function($,et,ot){var ct=et;if(ot===1?ct+=$.position:ot===2&&FS.isFile($.node.mode)&&(ct+=$.node.usedBytes),ct<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return ct},allocate:function($,et,ot){MEMFS.expandFileStorage($.node,et+ot),$.node.usedBytes=Math.max($.node.usedBytes,et+ot)},mmap:function($,et,ot,ct,st,e,It){if(!FS.isFile($.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var St,Gt,vt=$.node.contents;if(!(It&2)&&(vt.buffer===et||vt.buffer===et.buffer))Gt=!1,St=vt.byteOffset;else{if((st>0||st+ct<$.node.usedBytes)&&(vt.subarray?vt=vt.subarray(st,st+ct):vt=Array.prototype.slice.call(vt,st,st+ct)),Gt=!0,St=_malloc(ct),!St)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);et.set(vt,St)}return{ptr:St,allocated:Gt}},msync:function($,et,ot,ct,st){if(!FS.isFile($.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return st&2||MEMFS.stream_ops.write($,et,0,ct,ot,!1),0}}},IDBFS={dbs:{},indexedDB:function(){if(typeof indexedDB<"u")return indexedDB;var $=null;return typeof window=="object"&&($=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert($,"IDBFS used, but indexedDB not supported"),$},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function($){return MEMFS.mount.apply(null,arguments)},syncfs:function($,et,ot){IDBFS.getLocalSet($,function(ct,st){if(ct)return ot(ct);IDBFS.getRemoteSet($,function(e,It){if(e)return ot(e);var St=et?It:st,Gt=et?st:It;IDBFS.reconcile(St,Gt,ot)})})},getDB:function($,et){var ot=IDBFS.dbs[$];if(ot)return et(null,ot);var ct;try{ct=IDBFS.indexedDB().open($,IDBFS.DB_VERSION)}catch(st){return et(st)}ct.onupgradeneeded=function(st){var e=st.target.result,It=st.target.transaction,St;e.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?St=It.objectStore(IDBFS.DB_STORE_NAME):St=e.createObjectStore(IDBFS.DB_STORE_NAME),St.indexNames.contains("timestamp")||St.createIndex("timestamp","timestamp",{unique:!1})},ct.onsuccess=function(){ot=ct.result,IDBFS.dbs[$]=ot,et(null,ot)},ct.onerror=function(st){et(this.error),st.preventDefault()}},getLocalSet:function($,et){var ot={};function ct(Gt){return Gt!=="."&&Gt!==".."}function st(Gt){return function(vt){return PATH.join2(Gt,vt)}}for(var e=FS.readdir($.mountpoint).filter(ct).map(st($.mountpoint));e.length;){var It=e.pop(),St;try{St=FS.stat(It)}catch(Gt){return et(Gt)}FS.isDir(St.mode)&&e.push.apply(e,FS.readdir(It).filter(ct).map(st(It))),ot[It]={timestamp:St.mtime}}return et(null,{type:"local",entries:ot})},getRemoteSet:function($,et){var ot={};IDBFS.getDB($.mountpoint,function(ct,st){if(ct)return et(ct);var e=st.transaction([IDBFS.DB_STORE_NAME],"readonly");e.onerror=function(Gt){et(this.error),Gt.preventDefault()};var It=e.objectStore(IDBFS.DB_STORE_NAME),St=It.index("timestamp");St.openKeyCursor().onsuccess=function(Gt){var vt=Gt.target.result;if(!vt)return et(null,{type:"remote",db:st,entries:ot});ot[vt.primaryKey]={timestamp:vt.key},vt.continue()}})},loadLocalEntry:function($,et){var ot,ct;try{var st=FS.lookupPath($);ct=st.node,ot=FS.stat($)}catch(e){return et(e)}return FS.isDir(ot.mode)?et(null,{timestamp:ot.mtime,mode:ot.mode}):FS.isFile(ot.mode)?(ct.contents=MEMFS.getFileDataAsTypedArray(ct),et(null,{timestamp:ot.mtime,mode:ot.mode,contents:ct.contents})):et(new Error("node type not supported"))},storeLocalEntry:function($,et,ot){try{if(FS.isDir(et.mode))FS.mkdir($,et.mode);else if(FS.isFile(et.mode))FS.writeFile($,et.contents,{encoding:"binary",canOwn:!0});else return ot(new Error("node type not supported"));FS.chmod($,et.mode),FS.utime($,et.timestamp,et.timestamp)}catch(ct){return ot(ct)}ot(null)},removeLocalEntry:function($,et){try{var ot=FS.lookupPath($),ct=FS.stat($);FS.isDir(ct.mode)?FS.rmdir($):FS.isFile(ct.mode)&&FS.unlink($)}catch(st){return et(st)}et(null)},loadRemoteEntry:function($,et,ot){var ct=$.get(et);ct.onsuccess=function(st){ot(null,st.target.result)},ct.onerror=function(st){ot(this.error),st.preventDefault()}},storeRemoteEntry:function($,et,ot,ct){var st=$.put(ot,et);st.onsuccess=function(){ct(null)},st.onerror=function(e){ct(this.error),e.preventDefault()}},removeRemoteEntry:function($,et,ot){var ct=$.delete(et);ct.onsuccess=function(){ot(null)},ct.onerror=function(st){ot(this.error),st.preventDefault()}},reconcile:function($,et,ot){var ct=0,st=[];Object.keys($.entries).forEach(function(dt){var bt=$.entries[dt],Tt=et.entries[dt];(!Tt||bt.timestamp>Tt.timestamp)&&(st.push(dt),ct++)});var e=[];if(Object.keys(et.entries).forEach(function(dt){et.entries[dt];var bt=$.entries[dt];bt||(e.push(dt),ct++)}),!ct)return ot(null);var It=0,St=$.type==="remote"?$.db:et.db,Gt=St.transaction([IDBFS.DB_STORE_NAME],"readwrite"),vt=Gt.objectStore(IDBFS.DB_STORE_NAME);function it(dt){if(dt)return it.errored?void 0:(it.errored=!0,ot(dt));if(++It>=ct)return ot(null)}Gt.onerror=function(dt){it(this.error),dt.preventDefault()},st.sort().forEach(function(dt){et.type==="local"?IDBFS.loadRemoteEntry(vt,dt,function(bt,Tt){if(bt)return it(bt);IDBFS.storeLocalEntry(dt,Tt,it)}):IDBFS.loadLocalEntry(dt,function(bt,Tt){if(bt)return it(bt);IDBFS.storeRemoteEntry(vt,dt,Tt,it)})}),e.sort().reverse().forEach(function(dt){et.type==="local"?IDBFS.removeLocalEntry(dt,it):IDBFS.removeRemoteEntry(vt,dt,it)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function($){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode($.opts.root),0)},createNode:function($,et,ot,ct){if(!FS.isDir(ot)&&!FS.isFile(ot)&&!FS.isLink(ot))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var st=FS.createNode($,et,ot);return st.node_ops=NODEFS.node_ops,st.stream_ops=NODEFS.stream_ops,st},getMode:function($){var et;try{et=fs.lstatSync($),NODEFS.isWindows&&(et.mode=et.mode|(et.mode&146)>>1)}catch(ot){throw ot.code?new FS.ErrnoError(ERRNO_CODES[ot.code]):ot}return et.mode},realPath:function($){for(var et=[];$.parent!==$;)et.push($.name),$=$.parent;return et.push($.mount.opts.root),et.reverse(),PATH.join.apply(null,et)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function($){if($&=-32769,$ in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[$];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function($){var et=NODEFS.realPath($),ot;try{ot=fs.lstatSync(et)}catch(ct){throw ct.code?new FS.ErrnoError(ERRNO_CODES[ct.code]):ct}return NODEFS.isWindows&&!ot.blksize&&(ot.blksize=4096),NODEFS.isWindows&&!ot.blocks&&(ot.blocks=(ot.size+ot.blksize-1)/ot.blksize|0),{dev:ot.dev,ino:ot.ino,mode:ot.mode,nlink:ot.nlink,uid:ot.uid,gid:ot.gid,rdev:ot.rdev,size:ot.size,atime:ot.atime,mtime:ot.mtime,ctime:ot.ctime,blksize:ot.blksize,blocks:ot.blocks}},setattr:function($,et){var ot=NODEFS.realPath($);try{if(et.mode!==void 0&&(fs.chmodSync(ot,et.mode),$.mode=et.mode),et.timestamp!==void 0){var ct=new Date(et.timestamp);fs.utimesSync(ot,ct,ct)}et.size!==void 0&&fs.truncateSync(ot,et.size)}catch(st){throw st.code?new FS.ErrnoError(ERRNO_CODES[st.code]):st}},lookup:function($,et){var ot=PATH.join2(NODEFS.realPath($),et),ct=NODEFS.getMode(ot);return NODEFS.createNode($,et,ct)},mknod:function($,et,ot,ct){var st=NODEFS.createNode($,et,ot,ct),e=NODEFS.realPath(st);try{FS.isDir(st.mode)?fs.mkdirSync(e,st.mode):fs.writeFileSync(e,"",{mode:st.mode})}catch(It){throw It.code?new FS.ErrnoError(ERRNO_CODES[It.code]):It}return st},rename:function($,et,ot){var ct=NODEFS.realPath($),st=PATH.join2(NODEFS.realPath(et),ot);try{fs.renameSync(ct,st)}catch(e){throw e.code?new FS.ErrnoError(ERRNO_CODES[e.code]):e}},unlink:function($,et){var ot=PATH.join2(NODEFS.realPath($),et);try{fs.unlinkSync(ot)}catch(ct){throw ct.code?new FS.ErrnoError(ERRNO_CODES[ct.code]):ct}},rmdir:function($,et){var ot=PATH.join2(NODEFS.realPath($),et);try{fs.rmdirSync(ot)}catch(ct){throw ct.code?new FS.ErrnoError(ERRNO_CODES[ct.code]):ct}},readdir:function($){var et=NODEFS.realPath($);try{return fs.readdirSync(et)}catch(ot){throw ot.code?new FS.ErrnoError(ERRNO_CODES[ot.code]):ot}},symlink:function($,et,ot){var ct=PATH.join2(NODEFS.realPath($),et);try{fs.symlinkSync(ot,ct)}catch(st){throw st.code?new FS.ErrnoError(ERRNO_CODES[st.code]):st}},readlink:function($){var et=NODEFS.realPath($);try{return et=fs.readlinkSync(et),et=NODEJS_PATH.relative(NODEJS_PATH.resolve($.mount.opts.root),et),et}catch(ot){throw ot.code?new FS.ErrnoError(ERRNO_CODES[ot.code]):ot}}},stream_ops:{open:function($){var et=NODEFS.realPath($.node);try{FS.isFile($.node.mode)&&($.nfd=fs.openSync(et,NODEFS.flagsToPermissionString($.flags)))}catch(ot){throw ot.code?new FS.ErrnoError(ERRNO_CODES[ot.code]):ot}},close:function($){try{FS.isFile($.node.mode)&&$.nfd&&fs.closeSync($.nfd)}catch(et){throw et.code?new FS.ErrnoError(ERRNO_CODES[et.code]):et}},read:function($,et,ot,ct,st){if(ct===0)return 0;var e=new Buffer(ct),It;try{It=fs.readSync($.nfd,e,0,ct,st)}catch(Gt){throw new FS.ErrnoError(ERRNO_CODES[Gt.code])}if(It>0)for(var St=0;St<It;St++)et[ot+St]=e[St];return It},write:function($,et,ot,ct,st){var e=new Buffer(et.subarray(ot,ot+ct)),It;try{It=fs.writeSync($.nfd,e,0,ct,st)}catch(St){throw new FS.ErrnoError(ERRNO_CODES[St.code])}return It},llseek:function($,et,ot){var ct=et;if(ot===1)ct+=$.position;else if(ot===2&&FS.isFile($.node.mode))try{var st=fs.fstatSync($.nfd);ct+=st.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(ct<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return ct}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function($){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var et=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),ot={};function ct(e){for(var It=e.split("/"),St=et,Gt=0;Gt<It.length-1;Gt++){var vt=It.slice(0,Gt+1).join("/");ot[vt]||(ot[vt]=WORKERFS.createNode(St,vt,WORKERFS.DIR_MODE,0)),St=ot[vt]}return St}function st(e){var It=e.split("/");return It[It.length-1]}return Array.prototype.forEach.call($.opts.files||[],function(e){WORKERFS.createNode(ct(e.name),st(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),($.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(ct(e.name),st(e.name),WORKERFS.FILE_MODE,0,e.data)}),($.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(It){var St=It.filename.substr(1);WORKERFS.createNode(ct(St),st(St),WORKERFS.FILE_MODE,0,e.blob.slice(It.start,It.end))})}),et},createNode:function($,et,ot,ct,st,e){var It=FS.createNode($,et,ot);return It.mode=ot,It.node_ops=WORKERFS.node_ops,It.stream_ops=WORKERFS.stream_ops,It.timestamp=(e||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),ot===WORKERFS.FILE_MODE?(It.size=st.size,It.contents=st):(It.size=4096,It.contents={}),$&&($.contents[et]=It),It},node_ops:{getattr:function($){return{dev:1,ino:void 0,mode:$.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:$.size,atime:new Date($.timestamp),mtime:new Date($.timestamp),ctime:new Date($.timestamp),blksize:4096,blocks:Math.ceil($.size/4096)}},setattr:function($,et){et.mode!==void 0&&($.mode=et.mode),et.timestamp!==void 0&&($.timestamp=et.timestamp)},lookup:function($,et){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function($,et,ot,ct){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function($,et,ot){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function($,et){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function($,et){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function($){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function($,et,ot){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function($){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function($,et,ot,ct,st){if(st>=$.node.size)return 0;var e=$.node.contents.slice(st,st+ct),It=WORKERFS.reader.readAsArrayBuffer(e);return et.set(new Uint8Array(It),ot),e.size},write:function($,et,ot,ct,st){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function($,et,ot){var ct=et;if(ot===1?ct+=$.position:ot===2&&FS.isFile($.node.mode)&&(ct+=$.node.size),ct<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return ct}}};allocate(1,"i32*",ALLOC_STATIC),allocate(1,"i32*",ALLOC_STATIC),allocate(1,"i32*",ALLOC_STATIC);var FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function($){if(!($ instanceof FS.ErrnoError))throw $+" : "+stackTrace();return ___setErrNo($.errno)},lookupPath:function($,et){if($=PATH.resolve(FS.cwd(),$),et=et||{},!$)return{path:"",node:null};var ot={follow_mount:!0,recurse_count:0};for(var ct in ot)et[ct]===void 0&&(et[ct]=ot[ct]);if(et.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var st=PATH.normalizeArray($.split("/").filter(function(bt){return!!bt}),!1),e=FS.root,It="/",St=0;St<st.length;St++){var Gt=St===st.length-1;if(Gt&&et.parent)break;if(e=FS.lookupNode(e,st[St]),It=PATH.join2(It,st[St]),FS.isMountpoint(e)&&(!Gt||Gt&&et.follow_mount)&&(e=e.mounted.root),!Gt||et.follow)for(var vt=0;FS.isLink(e.mode);){var it=FS.readlink(It);It=PATH.resolve(PATH.dirname(It),it);var dt=FS.lookupPath(It,{recurse_count:et.recurse_count});if(e=dt.node,vt++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}return{path:It,node:e}},getPath:function($){for(var et;;){if(FS.isRoot($)){var ot=$.mount.mountpoint;return et?ot[ot.length-1]!=="/"?ot+"/"+et:ot+et:ot}et=et?$.name+"/"+et:$.name,$=$.parent}},hashName:function($,et){for(var ot=0,ct=0;ct<et.length;ct++)ot=(ot<<5)-ot+et.charCodeAt(ct)|0;return($+ot>>>0)%FS.nameTable.length},hashAddNode:function($){var et=FS.hashName($.parent.id,$.name);$.name_next=FS.nameTable[et],FS.nameTable[et]=$},hashRemoveNode:function($){var et=FS.hashName($.parent.id,$.name);if(FS.nameTable[et]===$)FS.nameTable[et]=$.name_next;else for(var ot=FS.nameTable[et];ot;){if(ot.name_next===$){ot.name_next=$.name_next;break}ot=ot.name_next}},lookupNode:function($,et){var ot=FS.mayLookup($);if(ot)throw new FS.ErrnoError(ot,$);for(var ct=FS.hashName($.id,et),st=FS.nameTable[ct];st;st=st.name_next){var e=st.name;if(st.parent.id===$.id&&e===et)return st}return FS.lookup($,et)},createNode:function($,et,ot,ct){if(!FS.FSNode){FS.FSNode=function(St,Gt,vt,it){St||(St=this),this.parent=St,this.mount=St.mount,this.mounted=null,this.id=FS.nextInode++,this.name=Gt,this.mode=vt,this.node_ops={},this.stream_ops={},this.rdev=it},FS.FSNode.prototype={};var st=365,e=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&st)===st},set:function(St){St?this.mode|=st:this.mode&=~st}},write:{get:function(){return(this.mode&e)===e},set:function(St){St?this.mode|=e:this.mode&=~e}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var It=new FS.FSNode($,et,ot,ct);return FS.hashAddNode(It),It},destroyNode:function($){FS.hashRemoveNode($)},isRoot:function($){return $===$.parent},isMountpoint:function($){return!!$.mounted},isFile:function($){return($&61440)===32768},isDir:function($){return($&61440)===16384},isLink:function($){return($&61440)===40960},isChrdev:function($){return($&61440)===8192},isBlkdev:function($){return($&61440)===24576},isFIFO:function($){return($&61440)===4096},isSocket:function($){return($&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function($){var et=FS.flagModes[$];if(typeof et>"u")throw new Error("Unknown file open mode: "+$);return et},flagsToPermissionString:function($){var et=["r","w","rw"][$&3];return $&512&&(et+="w"),et},nodePermissions:function($,et){return FS.ignorePermissions?0:et.indexOf("r")!==-1&&!($.mode&292)||et.indexOf("w")!==-1&&!($.mode&146)||et.indexOf("x")!==-1&&!($.mode&73)?ERRNO_CODES.EACCES:0},mayLookup:function($){var et=FS.nodePermissions($,"x");return et||($.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function($,et){try{var ot=FS.lookupNode($,et);return ERRNO_CODES.EEXIST}catch{}return FS.nodePermissions($,"wx")},mayDelete:function($,et,ot){var ct;try{ct=FS.lookupNode($,et)}catch(e){return e.errno}var st=FS.nodePermissions($,"wx");if(st)return st;if(ot){if(!FS.isDir(ct.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(ct)||FS.getPath(ct)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(ct.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function($,et){return $?FS.isLink($.mode)?ERRNO_CODES.ELOOP:FS.isDir($.mode)&&(et&2097155||et&512)?ERRNO_CODES.EISDIR:FS.nodePermissions($,FS.flagsToPermissionString(et)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function($,et){$=$||0,et=et||FS.MAX_OPEN_FDS;for(var ot=$;ot<=et;ot++)if(!FS.streams[ot])return ot;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function($){return FS.streams[$]},createStream:function($,et,ot){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(It){this.node=It}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var ct=new FS.FSStream;for(var st in $)ct[st]=$[st];$=ct;var e=FS.nextfd(et,ot);return $.fd=e,FS.streams[e]=$,$},closeStream:function($){FS.streams[$]=null},chrdev_stream_ops:{open:function($){var et=FS.getDevice($.node.rdev);$.stream_ops=et.stream_ops,$.stream_ops.open&&$.stream_ops.open($)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function($){return $>>8},minor:function($){return $&255},makedev:function($,et){return $<<8|et},registerDevice:function($,et){FS.devices[$]={stream_ops:et}},getDevice:function($){return FS.devices[$]},getMounts:function($){for(var et=[],ot=[$];ot.length;){var ct=ot.pop();et.push(ct),ot.push.apply(ot,ct.mounts)}return et},syncfs:function($,et){typeof $=="function"&&(et=$,$=!1);var ot=FS.getMounts(FS.root.mount),ct=0;function st(e){if(e)return st.errored?void 0:(st.errored=!0,et(e));++ct>=ot.length&&et(null)}ot.forEach(function(e){if(!e.type.syncfs)return st(null);e.type.syncfs(e,$,st)})},mount:function($,et,ot){var ct=ot==="/",st=!ot,e;if(ct&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!ct&&!st){var It=FS.lookupPath(ot,{follow_mount:!1});if(ot=It.path,e=It.node,FS.isMountpoint(e))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var St={type:$,opts:et,mountpoint:ot,mounts:[]},Gt=$.mount(St);return Gt.mount=St,St.root=Gt,ct?FS.root=Gt:e&&(e.mounted=St,e.mount&&e.mount.mounts.push(St)),Gt},unmount:function($){var et=FS.lookupPath($,{follow_mount:!1});if(!FS.isMountpoint(et.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var ot=et.node,ct=ot.mounted,st=FS.getMounts(ct);Object.keys(FS.nameTable).forEach(function(It){for(var St=FS.nameTable[It];St;){var Gt=St.name_next;st.indexOf(St.mount)!==-1&&FS.destroyNode(St),St=Gt}}),ot.mounted=null;var e=ot.mount.mounts.indexOf(ct);assert(e!==-1),ot.mount.mounts.splice(e,1)},lookup:function($,et){return $.node_ops.lookup($,et)},mknod:function($,et,ot){var ct=FS.lookupPath($,{parent:!0}),st=ct.node,e=PATH.basename($);if(!e||e==="."||e==="..")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var It=FS.mayCreate(st,e);if(It)throw new FS.ErrnoError(It);if(!st.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return st.node_ops.mknod(st,e,et,ot)},create:function($,et){return et=et!==void 0?et:438,et&=4095,et|=32768,FS.mknod($,et,0)},mkdir:function($,et){return et=et!==void 0?et:511,et&=1023,et|=16384,FS.mknod($,et,0)},mkdev:function($,et,ot){return typeof ot>"u"&&(ot=et,et=438),et|=8192,FS.mknod($,et,ot)},symlink:function($,et){if(!PATH.resolve($))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var ot=FS.lookupPath(et,{parent:!0}),ct=ot.node;if(!ct)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var st=PATH.basename(et),e=FS.mayCreate(ct,st);if(e)throw new FS.ErrnoError(e);if(!ct.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return ct.node_ops.symlink(ct,st,$)},rename:function($,et){var ot=PATH.dirname($),ct=PATH.dirname(et),st=PATH.basename($),e=PATH.basename(et),It,St,Gt;try{It=FS.lookupPath($,{parent:!0}),St=It.node,It=FS.lookupPath(et,{parent:!0}),Gt=It.node}catch{throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!St||!Gt)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(St.mount!==Gt.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var vt=FS.lookupNode(St,st),it=PATH.relative($,ct);if(it.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(it=PATH.relative(et,ot),it.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);var dt;try{dt=FS.lookupNode(Gt,e)}catch{}if(vt!==dt){var bt=FS.isDir(vt.mode),Tt=FS.mayDelete(St,st,bt);if(Tt)throw new FS.ErrnoError(Tt);if(Tt=dt?FS.mayDelete(Gt,e,bt):FS.mayCreate(Gt,e),Tt)throw new FS.ErrnoError(Tt);if(!St.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(vt)||dt&&FS.isMountpoint(dt))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(Gt!==St&&(Tt=FS.nodePermissions(St,"w"),Tt))throw new FS.ErrnoError(Tt);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath($,et)}catch(Et){console.log("FS.trackingDelegate['willMovePath']('"+$+"', '"+et+"') threw an exception: "+Et.message)}FS.hashRemoveNode(vt);try{St.node_ops.rename(vt,Gt,e)}catch(Et){throw Et}finally{FS.hashAddNode(vt)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath($,et)}catch(Et){console.log("FS.trackingDelegate['onMovePath']('"+$+"', '"+et+"') threw an exception: "+Et.message)}}},rmdir:function($){var et=FS.lookupPath($,{parent:!0}),ot=et.node,ct=PATH.basename($),st=FS.lookupNode(ot,ct),e=FS.mayDelete(ot,ct,!0);if(e)throw new FS.ErrnoError(e);if(!ot.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(st))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath($)}catch(It){console.log("FS.trackingDelegate['willDeletePath']('"+$+"') threw an exception: "+It.message)}ot.node_ops.rmdir(ot,ct),FS.destroyNode(st);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath($)}catch(It){console.log("FS.trackingDelegate['onDeletePath']('"+$+"') threw an exception: "+It.message)}},readdir:function($){var et=FS.lookupPath($,{follow:!0}),ot=et.node;if(!ot.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return ot.node_ops.readdir(ot)},unlink:function($){var et=FS.lookupPath($,{parent:!0}),ot=et.node,ct=PATH.basename($),st=FS.lookupNode(ot,ct),e=FS.mayDelete(ot,ct,!1);if(e)throw e===ERRNO_CODES.EISDIR&&(e=ERRNO_CODES.EPERM),new FS.ErrnoError(e);if(!ot.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(st))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath($)}catch(It){console.log("FS.trackingDelegate['willDeletePath']('"+$+"') threw an exception: "+It.message)}ot.node_ops.unlink(ot,ct),FS.destroyNode(st);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath($)}catch(It){console.log("FS.trackingDelegate['onDeletePath']('"+$+"') threw an exception: "+It.message)}},readlink:function($){var et=FS.lookupPath($),ot=et.node;if(!ot)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!ot.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(ot.parent),ot.node_ops.readlink(ot))},stat:function($,et){var ot=FS.lookupPath($,{follow:!et}),ct=ot.node;if(!ct)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!ct.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return ct.node_ops.getattr(ct)},lstat:function($){return FS.stat($,!0)},chmod:function($,et,ot){var ct;if(typeof $=="string"){var st=FS.lookupPath($,{follow:!ot});ct=st.node}else ct=$;if(!ct.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);ct.node_ops.setattr(ct,{mode:et&4095|ct.mode&-4096,timestamp:Date.now()})},lchmod:function($,et){FS.chmod($,et,!0)},fchmod:function($,et){var ot=FS.getStream($);if(!ot)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(ot.node,et)},chown:function($,et,ot,ct){var st;if(typeof $=="string"){var e=FS.lookupPath($,{follow:!ct});st=e.node}else st=$;if(!st.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);st.node_ops.setattr(st,{timestamp:Date.now()})},lchown:function($,et,ot){FS.chown($,et,ot,!0)},fchown:function($,et,ot){var ct=FS.getStream($);if(!ct)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(ct.node,et,ot)},truncate:function($,et){if(et<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var ot;if(typeof $=="string"){var ct=FS.lookupPath($,{follow:!0});ot=ct.node}else ot=$;if(!ot.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(ot.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(ot.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var st=FS.nodePermissions(ot,"w");if(st)throw new FS.ErrnoError(st);ot.node_ops.setattr(ot,{size:et,timestamp:Date.now()})},ftruncate:function($,et){var ot=FS.getStream($);if(!ot)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!(ot.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(ot.node,et)},utime:function($,et,ot){var ct=FS.lookupPath($,{follow:!0}),st=ct.node;st.node_ops.setattr(st,{timestamp:Math.max(et,ot)})},open:function($,et,ot,ct,st){if($==="")throw new FS.ErrnoError(ERRNO_CODES.ENOENT);et=typeof et=="string"?FS.modeStringToFlags(et):et,ot=typeof ot>"u"?438:ot,et&64?ot=ot&4095|32768:ot=0;var e;if(typeof $=="object")e=$;else{$=PATH.normalize($);try{var It=FS.lookupPath($,{follow:!(et&131072)});e=It.node}catch{}}var St=!1;if(et&64)if(e){if(et&128)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else e=FS.mknod($,ot,0),St=!0;if(!e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(e.mode)&&(et&=-513),et&65536&&!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!St){var Gt=FS.mayOpen(e,et);if(Gt)throw new FS.ErrnoError(Gt)}et&512&&FS.truncate(e,0),et&=-641;var vt=FS.createStream({node:e,path:FS.getPath(e),flags:et,seekable:!0,position:0,stream_ops:e.stream_ops,ungotten:[],error:!1},ct,st);vt.stream_ops.open&&vt.stream_ops.open(vt),Module.logReadFiles&&!(et&1)&&(FS.readFiles||(FS.readFiles={}),$ in FS.readFiles||(FS.readFiles[$]=1,Module.printErr("read file: "+$)));try{if(FS.trackingDelegate.onOpenFile){var it=0;(et&2097155)!==1&&(it|=FS.tracking.openFlags.READ),et&2097155&&(it|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile($,it)}}catch(dt){console.log("FS.trackingDelegate['onOpenFile']('"+$+"', flags) threw an exception: "+dt.message)}return vt},close:function($){$.getdents&&($.getdents=null);try{$.stream_ops.close&&$.stream_ops.close($)}catch(et){throw et}finally{FS.closeStream($.fd)}},llseek:function($,et,ot){if(!$.seekable||!$.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return $.position=$.stream_ops.llseek($,et,ot),$.ungotten=[],$.position},read:function($,et,ot,ct,st){if(ct<0||st<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(($.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir($.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!$.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var e=!0;if(typeof st>"u")st=$.position,e=!1;else if(!$.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var It=$.stream_ops.read($,et,ot,ct,st);return e||($.position+=It),It},write:function($,et,ot,ct,st,e){if(ct<0||st<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!($.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir($.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!$.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);$.flags&1024&&FS.llseek($,0,2);var It=!0;if(typeof st>"u")st=$.position,It=!1;else if(!$.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var St=$.stream_ops.write($,et,ot,ct,st,e);It||($.position+=St);try{$.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile($.path)}catch(Gt){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+Gt.message)}return St},allocate:function($,et,ot){if(et<0||ot<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!($.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile($.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!$.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);$.stream_ops.allocate($,et,ot)},mmap:function($,et,ot,ct,st,e,It){if(($.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!$.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return $.stream_ops.mmap($,et,ot,ct,st,e,It)},msync:function($,et,ot,ct,st){return!$||!$.stream_ops.msync?0:$.stream_ops.msync($,et,ot,ct,st)},munmap:function($){return 0},ioctl:function($,et,ot){if(!$.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return $.stream_ops.ioctl($,et,ot)},readFile:function($,et){if(et=et||{},et.flags=et.flags||"r",et.encoding=et.encoding||"binary",et.encoding!=="utf8"&&et.encoding!=="binary")throw new Error('Invalid encoding type "'+et.encoding+'"');var ot,ct=FS.open($,et.flags),st=FS.stat($),e=st.size,It=new Uint8Array(e);return FS.read(ct,It,0,e,0),et.encoding==="utf8"?ot=UTF8ArrayToString(It,0):et.encoding==="binary"&&(ot=It),FS.close(ct),ot},writeFile:function($,et,ot){if(ot=ot||{},ot.flags=ot.flags||"w",ot.encoding=ot.encoding||"utf8",ot.encoding!=="utf8"&&ot.encoding!=="binary")throw new Error('Invalid encoding type "'+ot.encoding+'"');var ct=FS.open($,ot.flags,ot.mode);if(ot.encoding==="utf8"){var st=new Uint8Array(lengthBytesUTF8(et)+1),e=stringToUTF8Array(et,st,0,st.length);FS.write(ct,st,0,e,0,ot.canOwn)}else ot.encoding==="binary"&&FS.write(ct,et,0,et.length,0,ot.canOwn);FS.close(ct)},cwd:function(){return FS.currentPath},chdir:function($){var et=FS.lookupPath($,{follow:!0});if(!FS.isDir(et.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var ot=FS.nodePermissions(et.node,"x");if(ot)throw new FS.ErrnoError(ot);FS.currentPath=et.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(ot,ct,st,e,It){return e}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var $;if(typeof crypto<"u"){var et=new Uint8Array(1);$=function(){return crypto.getRandomValues(et),et[0]}}else ENVIRONMENT_IS_NODE?$=function(){return require$$1.randomBytes(1)[0]}:$=function(){return Math.random()*256|0};FS.createDevice("/dev","random",$),FS.createDevice("/dev","urandom",$),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var $=FS.createNode("/proc/self","fd",16895,73);return $.node_ops={lookup:function(et,ot){var ct=+ot,st=FS.getStream(ct);if(!st)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var e={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return st.path}}};return e.parent=e,e}},$}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var $=FS.open("/dev/stdin","r");assert($.fd===0,"invalid handle for stdin ("+$.fd+")");var et=FS.open("/dev/stdout","w");assert(et.fd===1,"invalid handle for stdout ("+et.fd+")");var ot=FS.open("/dev/stderr","w");assert(ot.fd===2,"invalid handle for stderr ("+ot.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(et,ot){this.node=ot,this.setErrno=function(ct){this.errno=ct;for(var st in ERRNO_CODES)if(ERRNO_CODES[st]===ct){this.code=st;break}},this.setErrno(et),this.message=ERRNO_MESSAGES[et]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach(function($){FS.genericErrors[$]=new FS.ErrnoError($),FS.genericErrors[$].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS,IDBFS,NODEFS,WORKERFS}},init:function($,et,ot){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=$||Module.stdin,Module.stdout=et||Module.stdout,Module.stderr=ot||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var $=Module._fflush;$&&$(0);for(var et=0;et<FS.streams.length;et++){var ot=FS.streams[et];ot&&FS.close(ot)}},getMode:function($,et){var ot=0;return $&&(ot|=365),et&&(ot|=146),ot},joinPath:function($,et){var ot=PATH.join.apply(null,$);return et&&ot[0]=="/"&&(ot=ot.substr(1)),ot},absolutePath:function($,et){return PATH.resolve(et,$)},standardizePath:function($){return PATH.normalize($)},findObject:function($,et){var ot=FS.analyzePath($,et);return ot.exists?ot.object:(___setErrNo(ot.error),null)},analyzePath:function($,et){try{var ot=FS.lookupPath($,{follow:!et});$=ot.path}catch{}var ct={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ot=FS.lookupPath($,{parent:!0});ct.parentExists=!0,ct.parentPath=ot.path,ct.parentObject=ot.node,ct.name=PATH.basename($),ot=FS.lookupPath($,{follow:!et}),ct.exists=!0,ct.path=ot.path,ct.object=ot.node,ct.name=ot.node.name,ct.isRoot=ot.path==="/"}catch(st){ct.error=st.errno}return ct},createFolder:function($,et,ot,ct){var st=PATH.join2(typeof $=="string"?$:FS.getPath($),et),e=FS.getMode(ot,ct);return FS.mkdir(st,e)},createPath:function($,et,ot,ct){$=typeof $=="string"?$:FS.getPath($);for(var st=et.split("/").reverse();st.length;){var e=st.pop();if(e){var It=PATH.join2($,e);try{FS.mkdir(It)}catch{}$=It}}return It},createFile:function($,et,ot,ct,st){var e=PATH.join2(typeof $=="string"?$:FS.getPath($),et),It=FS.getMode(ct,st);return FS.create(e,It)},createDataFile:function($,et,ot,ct,st,e){var It=et?PATH.join2(typeof $=="string"?$:FS.getPath($),et):$,St=FS.getMode(ct,st),Gt=FS.create(It,St);if(ot){if(typeof ot=="string"){for(var vt=new Array(ot.length),it=0,dt=ot.length;it<dt;++it)vt[it]=ot.charCodeAt(it);ot=vt}FS.chmod(Gt,St|146);var bt=FS.open(Gt,"w");FS.write(bt,ot,0,ot.length,0,e),FS.close(bt),FS.chmod(Gt,St)}return Gt},createDevice:function($,et,ot,ct){var st=PATH.join2(typeof $=="string"?$:FS.getPath($),et),e=FS.getMode(!!ot,!!ct);FS.createDevice.major||(FS.createDevice.major=64);var It=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(It,{open:function(St){St.seekable=!1},close:function(St){ct&&ct.buffer&&ct.buffer.length&&ct(10)},read:function(St,Gt,vt,it,dt){for(var bt=0,Tt=0;Tt<it;Tt++){var Et;try{Et=ot()}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(Et===void 0&&bt===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(Et==null)break;bt++,Gt[vt+Tt]=Et}return bt&&(St.node.timestamp=Date.now()),bt},write:function(St,Gt,vt,it,dt){for(var bt=0;bt<it;bt++)try{ct(Gt[vt+bt])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return it&&(St.node.timestamp=Date.now()),bt}}),FS.mkdev(st,e,It)},createLink:function($,et,ot,ct,st){var e=PATH.join2(typeof $=="string"?$:FS.getPath($),et);return FS.symlink(ot,e)},forceLoadFile:function($){if($.isDevice||$.isFolder||$.link||$.contents)return!0;var et=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Module.read)try{$.contents=intArrayFromString(Module.read($.url),!0),$.usedBytes=$.contents.length}catch{et=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return et||___setErrNo(ERRNO_CODES.EIO),et},createLazyFile:function($,et,ot,ct,st){function e(){this.lengthKnown=!1,this.chunks=[]}if(e.prototype.get=function(bt){if(!(bt>this.length-1||bt<0)){var Tt=bt%this.chunkSize,Et=bt/this.chunkSize|0;return this.getter(Et)[Tt]}},e.prototype.setDataGetter=function(bt){this.getter=bt},e.prototype.cacheLength=function(){var bt=new XMLHttpRequest;if(bt.open("HEAD",ot,!1),bt.send(null),!(bt.status>=200&&bt.status<300||bt.status===304))throw new Error("Couldn't load "+ot+". Status: "+bt.status);var Tt=Number(bt.getResponseHeader("Content-length")),Et,Mt=(Et=bt.getResponseHeader("Accept-Ranges"))&&Et==="bytes",Rt=1024*1024;Mt||(Rt=Tt);var pt=function(gt,Ct){if(gt>Ct)throw new Error("invalid range ("+gt+", "+Ct+") or no bytes requested!");if(Ct>Tt-1)throw new Error("only "+Tt+" bytes available! programmer error!");var xt=new XMLHttpRequest;if(xt.open("GET",ot,!1),Tt!==Rt&&xt.setRequestHeader("Range","bytes="+gt+"-"+Ct),typeof Uint8Array<"u"&&(xt.responseType="arraybuffer"),xt.overrideMimeType&&xt.overrideMimeType("text/plain; charset=x-user-defined"),xt.send(null),!(xt.status>=200&&xt.status<300||xt.status===304))throw new Error("Couldn't load "+ot+". Status: "+xt.status);return xt.response!==void 0?new Uint8Array(xt.response||[]):intArrayFromString(xt.responseText||"",!0)},mt=this;mt.setDataGetter(function(gt){var Ct=gt*Rt,xt=(gt+1)*Rt-1;if(xt=Math.min(xt,Tt-1),typeof mt.chunks[gt]>"u"&&(mt.chunks[gt]=pt(Ct,xt)),typeof mt.chunks[gt]>"u")throw new Error("doXHR failed!");return mt.chunks[gt]}),this._length=Tt,this._chunkSize=Rt,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var It=new e;Object.defineProperty(It,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(It,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var St={isDevice:!1,contents:It}}else var St={isDevice:!1,url:ot};var Gt=FS.createFile($,et,St,ct,st);St.contents?Gt.contents=St.contents:St.url&&(Gt.contents=null,Gt.url=St.url),Object.defineProperty(Gt,"usedBytes",{get:function(){return this.contents.length}});var vt={},it=Object.keys(Gt.stream_ops);return it.forEach(function(dt){var bt=Gt.stream_ops[dt];vt[dt]=function(){if(!FS.forceLoadFile(Gt))throw new FS.ErrnoError(ERRNO_CODES.EIO);return bt.apply(null,arguments)}}),vt.read=function(bt,Tt,Et,Mt,Rt){if(!FS.forceLoadFile(Gt))throw new FS.ErrnoError(ERRNO_CODES.EIO);var pt=bt.node.contents;if(Rt>=pt.length)return 0;var mt=Math.min(pt.length-Rt,Mt);if(assert(mt>=0),pt.slice)for(var gt=0;gt<mt;gt++)Tt[Et+gt]=pt[Rt+gt];else for(var gt=0;gt<mt;gt++)Tt[Et+gt]=pt.get(Rt+gt);return mt},Gt.stream_ops=vt,Gt},createPreloadedFile:function($,et,ot,ct,st,e,It,St,Gt,vt){Browser.init();var it=et?PATH.resolve(PATH.join2($,et)):$;function dt(bt){function Tt(Mt){vt&&vt(),St||FS.createDataFile($,et,Mt,ct,st,Gt),e&&e(),removeRunDependency()}var Et=!1;Module.preloadPlugins.forEach(function(Mt){Et||Mt.canHandle(it)&&(Mt.handle(bt,it,Tt,function(){It&&It(),removeRunDependency()}),Et=!0)}),Et||Tt(bt)}addRunDependency(),typeof ot=="string"?Browser.asyncLoad(ot,function(bt){dt(bt)},It):dt(ot)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function($,et,ot){et=et||function(){},ot=ot||function(){};var ct=FS.indexedDB();try{var st=ct.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return ot(e)}st.onupgradeneeded=function(){console.log("creating db");var It=st.result;It.createObjectStore(FS.DB_STORE_NAME)},st.onsuccess=function(){var It=st.result,St=It.transaction([FS.DB_STORE_NAME],"readwrite"),Gt=St.objectStore(FS.DB_STORE_NAME),vt=0,it=0,dt=$.length;function bt(){it==0?et():ot()}$.forEach(function(Tt){var Et=Gt.put(FS.analyzePath(Tt).object.contents,Tt);Et.onsuccess=function(){vt++,vt+it==dt&&bt()},Et.onerror=function(){it++,vt+it==dt&&bt()}}),St.onerror=ot},st.onerror=ot},loadFilesFromDB:function($,et,ot){et=et||function(){},ot=ot||function(){};var ct=FS.indexedDB();try{var st=ct.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return ot(e)}st.onupgradeneeded=ot,st.onsuccess=function(){var It=st.result;try{var St=It.transaction([FS.DB_STORE_NAME],"readonly")}catch(Tt){ot(Tt);return}var Gt=St.objectStore(FS.DB_STORE_NAME),vt=0,it=0,dt=$.length;function bt(){it==0?et():ot()}$.forEach(function(Tt){var Et=Gt.get(Tt);Et.onsuccess=function(){FS.analyzePath(Tt).exists&&FS.unlink(Tt),FS.createDataFile(PATH.dirname(Tt),PATH.basename(Tt),Et.result,!0,!0,!0),vt++,vt+it==dt&&bt()},Et.onerror=function(){it++,vt+it==dt&&bt()}}),St.onerror=ot},st.onerror=ot}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function($,et){if(et[0]!=="/"){var ot;if($===-100)ot=FS.cwd();else{var ct=FS.getStream($);if(!ct)throw new FS.ErrnoError(ERRNO_CODES.EBADF);ot=ct.path}et=PATH.join2(ot,et)}return et},doStat:function($,et,ot){try{var ct=$(et)}catch(st){if(st&&st.node&&PATH.normalize(et)!==PATH.normalize(FS.getPath(st.node)))return-ERRNO_CODES.ENOTDIR;throw st}return HEAP32[ot>>2]=ct.dev,HEAP32[ot+4>>2]=0,HEAP32[ot+8>>2]=ct.ino,HEAP32[ot+12>>2]=ct.mode,HEAP32[ot+16>>2]=ct.nlink,HEAP32[ot+20>>2]=ct.uid,HEAP32[ot+24>>2]=ct.gid,HEAP32[ot+28>>2]=ct.rdev,HEAP32[ot+32>>2]=0,HEAP32[ot+36>>2]=ct.size,HEAP32[ot+40>>2]=4096,HEAP32[ot+44>>2]=ct.blocks,HEAP32[ot+48>>2]=ct.atime.getTime()/1e3|0,HEAP32[ot+52>>2]=0,HEAP32[ot+56>>2]=ct.mtime.getTime()/1e3|0,HEAP32[ot+60>>2]=0,HEAP32[ot+64>>2]=ct.ctime.getTime()/1e3|0,HEAP32[ot+68>>2]=0,HEAP32[ot+72>>2]=ct.ino,0},doMsync:function($,et,ot,ct){var st=new Uint8Array(HEAPU8.subarray($,$+ot));FS.msync(et,st,0,ot,ct)},doMkdir:function($,et){return $=PATH.normalize($),$[$.length-1]==="/"&&($=$.substr(0,$.length-1)),FS.mkdir($,et,0),0},doMknod:function($,et,ot){switch(et&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod($,et,ot),0},doReadlink:function($,et,ot){if(ot<=0)return-ERRNO_CODES.EINVAL;var ct=FS.readlink($);return ct=ct.slice(0,Math.max(0,ot)),writeStringToMemory(ct,et,!0),ct.length},doAccess:function($,et){if(et&-8)return-ERRNO_CODES.EINVAL;var ot,ct=FS.lookupPath($,{follow:!0});ot=ct.node;var st="";return et&4&&(st+="r"),et&2&&(st+="w"),et&1&&(st+="x"),st&&FS.nodePermissions(ot,st)?-ERRNO_CODES.EACCES:0},doDup:function($,et,ot){var ct=FS.getStream(ot);return ct&&FS.close(ct),FS.open($,et,0,ot,ot).fd},doReadv:function($,et,ot,ct){for(var st=0,e=0;e<ot;e++){var It=HEAP32[et+e*8>>2],St=HEAP32[et+(e*8+4)>>2],Gt=FS.read($,HEAP8,It,St,ct);if(Gt<0)return-1;if(st+=Gt,Gt<St)break}return st},doWritev:function($,et,ot,ct){for(var st=0,e=0;e<ot;e++){var It=HEAP32[et+e*8>>2],St=HEAP32[et+(e*8+4)>>2],Gt=FS.write($,HEAP8,It,St,ct);if(Gt<0)return-1;st+=Gt}return st},varargs:0,get:function($){SYSCALLS.varargs+=4;var et=HEAP32[SYSCALLS.varargs-4>>2];return et},getStr:function(){var $=Pointer_stringify(SYSCALLS.get());return $},getStreamFromFD:function(){var $=FS.getStream(SYSCALLS.get());if(!$)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return $},getSocketFromFD:function(){var $=SOCKFS.getSocket(SYSCALLS.get());if(!$)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return $},getSocketAddress:function($){var et=SYSCALLS.get(),ot=SYSCALLS.get();if($&&et===0)return null;var ct=__read_sockaddr(et,ot);if(ct.errno)throw new FS.ErrnoError(ct.errno);return ct.addr=DNS.lookup_addr(ct.addr)||ct.addr,ct},get64:function(){var $=SYSCALLS.get(),et=SYSCALLS.get();return $>=0?assert(et===0):assert(et===-1),$},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall5($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStr(),ct=SYSCALLS.get(),st=SYSCALLS.get(),e=FS.open(ot,ct,st);return e.fd}catch(It){return(typeof FS>"u"||!(It instanceof FS.ErrnoError))&&abort(It),-It.errno}}function _emscripten_memcpy_big($,et,ot){return HEAPU8.set(HEAPU8.subarray(et,et+ot),$),$}Module._memcpy=_memcpy;function ___syscall6($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD();return FS.close(ot),0}catch(ct){return(typeof FS>"u"||!(ct instanceof FS.ErrnoError))&&abort(ct),-ct.errno}}var _cos=Math_cos;function _sbrk($){var et=_sbrk;et.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),et.called=!0,assert(Runtime.dynamicAlloc),et.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var ot=DYNAMICTOP;if($!=0){var ct=et.alloc($);if(!ct)return-1>>>0}return ot}function ___syscall54($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD(),ct=SYSCALLS.get();switch(ct){case 21505:return ot.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return ot.tty?0:-ERRNO_CODES.ENOTTY;case 21519:{if(!ot.tty)return-ERRNO_CODES.ENOTTY;var st=SYSCALLS.get();return HEAP32[st>>2]=0,0}case 21520:return ot.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:{var st=SYSCALLS.get();return FS.ioctl(ot,ct,st)}default:abort("bad ioctl syscall "+ct)}}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view($,et,ot){var ct=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],st=ct[et];function e(It){It=It>>2;var St=HEAPU32,Gt=St[It],vt=St[It+1];return new st(St.buffer,vt,Gt)}ot=readLatin1String(ot),registerType($,{name:ot,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{ignoreDuplicateRegistrations:!0})}function _time($){var et=Date.now()/1e3|0;return $&&(HEAP32[$>>2]=et),et}function _pthread_self(){return 0}function ___syscall140($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD(),ct=SYSCALLS.get(),st=SYSCALLS.get(),e=SYSCALLS.get(),It=SYSCALLS.get(),St=st;return assert(ct===0),FS.llseek(ot,St,It),HEAP32[e>>2]=ot.position,ot.getdents&&St===0&&It===0&&(ot.getdents=null),0}catch(Gt){return(typeof FS>"u"||!(Gt instanceof FS.ErrnoError))&&abort(Gt),-Gt.errno}}function ___syscall146($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD(),ct=SYSCALLS.get(),st=SYSCALLS.get();return SYSCALLS.doWritev(ot,ct,st)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}function ___syscall221($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD(),ct=SYSCALLS.get();switch(ct){case 0:{var st=SYSCALLS.get();if(st<0)return-ERRNO_CODES.EINVAL;var e;return e=FS.open(ot.path,ot.flags,0,st),e.fd}case 1:case 2:return 0;case 3:return ot.flags;case 4:{var st=SYSCALLS.get();return ot.flags|=st,0}case 12:case 12:{var st=SYSCALLS.get(),It=0;return HEAP16[st+It>>1]=2,0}case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(St){return(typeof FS>"u"||!(St instanceof FS.ErrnoError))&&abort(St),-St.errno}}function ___syscall145($,et){SYSCALLS.varargs=et;try{var ot=SYSCALLS.getStreamFromFD(),ct=SYSCALLS.get(),st=SYSCALLS.get();return SYSCALLS.doReadv(ot,ct,st)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift(function(){!Module.noFSInit&&!FS.init.initialized&&FS.init()}),__ATMAIN__.push(function(){FS.ignorePermissions=!1}),__ATEXIT__.push(function(){FS.quit()}),Module.FS_createFolder=FS.createFolder,Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createLink=FS.createLink,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink,__ATINIT__.unshift(function(){}),__ATEXIT__.push(function(){}),ENVIRONMENT_IS_NODE){var fs=require$$1,NODEJS_PATH=require$$1;NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii($,et,ot,ct){try{return Module.dynCall_iiii($,et,ot,ct)}catch(st){if(typeof st!="number"&&st!=="longjmp")throw st;asm.setThrew(1,0)}}function invoke_viiiii($,et,ot,ct,st,e){try{Module.dynCall_viiiii($,et,ot,ct,st,e)}catch(It){if(typeof It!="number"&&It!=="longjmp")throw It;asm.setThrew(1,0)}}function invoke_dii($,et,ot){try{return Module.dynCall_dii($,et,ot)}catch(ct){if(typeof ct!="number"&&ct!=="longjmp")throw ct;asm.setThrew(1,0)}}function invoke_vid($,et,ot){try{Module.dynCall_vid($,et,ot)}catch(ct){if(typeof ct!="number"&&ct!=="longjmp")throw ct;asm.setThrew(1,0)}}function invoke_di($,et){try{return Module.dynCall_di($,et)}catch(ot){if(typeof ot!="number"&&ot!=="longjmp")throw ot;asm.setThrew(1,0)}}function invoke_i($){try{return Module.dynCall_i($)}catch(et){if(typeof et!="number"&&et!=="longjmp")throw et;asm.setThrew(1,0)}}function invoke_vi($,et){try{Module.dynCall_vi($,et)}catch(ot){if(typeof ot!="number"&&ot!=="longjmp")throw ot;asm.setThrew(1,0)}}function invoke_vii($,et,ot){try{Module.dynCall_vii($,et,ot)}catch(ct){if(typeof ct!="number"&&ct!=="longjmp")throw ct;asm.setThrew(1,0)}}function invoke_ii($,et){try{return Module.dynCall_ii($,et)}catch(ot){if(typeof ot!="number"&&ot!=="longjmp")throw ot;asm.setThrew(1,0)}}function invoke_viii($,et,ot,ct){try{Module.dynCall_viii($,et,ot,ct)}catch(st){if(typeof st!="number"&&st!=="longjmp")throw st;asm.setThrew(1,0)}}function invoke_v($){try{Module.dynCall_v($)}catch(et){if(typeof et!="number"&&et!=="longjmp")throw et;asm.setThrew(1,0)}}function invoke_viid($,et,ot,ct){try{Module.dynCall_viid($,et,ot,ct)}catch(st){if(typeof st!="number"&&st!=="longjmp")throw st;asm.setThrew(1,0)}}function invoke_iiiii($,et,ot,ct,st){try{return Module.dynCall_iiiii($,et,ot,ct,st)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}function invoke_viiiiii($,et,ot,ct,st,e,It){try{Module.dynCall_viiiiii($,et,ot,ct,st,e,It)}catch(St){if(typeof St!="number"&&St!=="longjmp")throw St;asm.setThrew(1,0)}}function invoke_iii($,et,ot){try{return Module.dynCall_iii($,et,ot)}catch(ct){if(typeof ct!="number"&&ct!=="longjmp")throw ct;asm.setThrew(1,0)}}function invoke_viiii($,et,ot,ct,st){try{Module.dynCall_viiii($,et,ot,ct,st)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,invoke_iiii,invoke_viiiii,invoke_dii,invoke_vid,invoke_di,invoke_i,invoke_vi,invoke_vii,invoke_ii,invoke_viii,invoke_v,invoke_viid,invoke_iiiii,invoke_viiiiii,invoke_iii,invoke_viiii,_fabs,___syscall221,_sin,floatReadValueFromPointer,simpleReadValueFromPointer,integerReadValueFromPointer,__embind_register_memory_view,throwInternalError,get_first_emval,_abort,count_emval_handles,_pthread_cleanup_push,__embind_register_integer,extendError,___assert_fail,init_emval,__embind_register_void,___cxa_find_matching_catch,_ceilf,getShiftFromSize,__embind_register_function,embind_init_charCodes,_emscripten_asm_const_33,throwBindingError,___setErrNo,__emval_register,_sbrk,readLatin1String,___cxa_allocate_exception,_emscripten_memcpy_big,__embind_register_bool,___resumeException,__ZSt18uncaught_exceptionv,_sysconf,_embind_repr,__embind_register_std_wstring,createNamedFunction,__embind_register_emval,_cos,throwUnboundTypeError,_pthread_self,craftInvokerFunction,__emval_decref,_sqrt,__embind_register_float,makeLegalFunctionName,___syscall54,___unlock,heap32VectorToArray,_pthread_cleanup_pop,whenDependentTypesAreResolved,_exit,__embind_register_std_string,new_,___cxa_atexit,registerType,___cxa_throw,__exit,___lock,___syscall6,___syscall5,ensureOverloadTable,__embind_register_constant,_time,requireFunction,runDestructors,getTypeName,_atexit,___syscall140,exposePublicSymbol,_emscripten_asm_const_5,_emscripten_asm_const_4,replacePublicSymbol,___syscall145,___syscall146,STACKTOP,STACK_MAX,tempDoublePtr,ABORT,cttz_i8,___dso_handle};var asm=function($,et,ot){var ct=new $.Int8Array(ot),st=new $.Int16Array(ot),e=new $.Int32Array(ot),It=new $.Uint8Array(ot),St=new $.Uint16Array(ot),Gt=new $.Uint32Array(ot),vt=new $.Float32Array(ot),it=new $.Float64Array(ot),dt=et.STACKTOP|0,bt=et.STACK_MAX|0,Tt=et.tempDoublePtr|0,Et=et.ABORT|0,Mt=et.cttz_i8|0,Rt=et.___dso_handle|0,pt=0,mt=0,gt=0,Ct=0,xt=$.NaN,Dt=$.Infinity,Ht=0,Ut=0,Xt=0,Qt=0,tn=0,on=0,vn=0,fn=0,Cn=0,dn=0,An=0,nn=0,Zt=0,mn=0,gn=0,In=0,Vn=0,Zn=0,lr=0,hr=$.Math.floor,Lr=$.Math.abs,Tr=$.Math.sqrt,As=$.Math.pow,Yr=$.Math.cos,ms=$.Math.sin,Rs=$.Math.tan,Zs=$.Math.acos,ao=$.Math.asin,go=$.Math.atan,ho=$.Math.atan2,Ys=$.Math.exp,xo=$.Math.log,$o=$.Math.ceil,Pn=$.Math.imul,j0=$.Math.min,Ho=$.Math.clz32,oo=et.abort,L0=et.assert,f0=et.invoke_iiii,Pl=et.invoke_viiiii,na=et.invoke_dii,p0=et.invoke_vid,es=et.invoke_di,Mn=et.invoke_i,bn=et.invoke_vi,Hn=et.invoke_vii,Dn=et.invoke_ii,Un=et.invoke_viii,Gn=et.invoke_v,un=et.invoke_viid,Wt=et.invoke_iiiii,jt=et.invoke_viiiiii,yn=et.invoke_iii,Rn=et.invoke_viiii,Wn=et._fabs,rr=et.___syscall221,ns=et._sin,ps=et.floatReadValueFromPointer,os=et.simpleReadValueFromPointer,as=et.integerReadValueFromPointer,Cs=et.__embind_register_memory_view,U0=et.throwInternalError,to=et.get_first_emval,Cr=et._abort,i0=et.count_emval_handles,o0=et._pthread_cleanup_push,Q0=et.__embind_register_integer,D0=et.extendError,u1=et.___assert_fail,ga=et.init_emval,Yl=et.__embind_register_void,R1=et.___cxa_find_matching_catch,Ql=et._ceilf,P0=et.getShiftFromSize,Lo=et.__embind_register_function,_a=et.embind_init_charCodes,X1=et._emscripten_asm_const_33,y1=et.throwBindingError,Tu=et.___setErrNo,Y1=et.__emval_register,Bn=et._sbrk,Xn=et.readLatin1String,cr=et.___cxa_allocate_exception,Rr=et._emscripten_memcpy_big,yr=et.__embind_register_bool,Nr=et.___resumeException,is=et.__ZSt18uncaught_exceptionv,Ns=et._sysconf,Ss=et._embind_repr,kr=et.__embind_register_std_wstring,Ks=et.createNamedFunction,$s=et.__embind_register_emval,lo=et._cos,A0=et.throwUnboundTypeError,bo=et._pthread_self,Eo=et.craftInvokerFunction,zo=et.__emval_decref,_0=et._sqrt,V0=et.__embind_register_float,Ts=et.makeLegalFunctionName,Mo=et.___syscall54,T0=et.___unlock,Jo=et.heap32VectorToArray,rn=et._pthread_cleanup_pop,ln=et.whenDependentTypesAreResolved,pn=et._exit,_n=et.__embind_register_std_string,On=et.new_,tr=et.___cxa_atexit,ar=et.registerType,Gr=et.___cxa_throw,Ur=et.__exit,pr=et.___lock,Ir=et.___syscall6,ts=et.___syscall5,Ls=et.ensureOverloadTable,zr=et.__embind_register_constant,io=et._time,So=et.requireFunction,co=et.runDestructors,so=et.getTypeName,n0=et._atexit,c0=et.___syscall140,O0=et.exposePublicSymbol,w0=et._emscripten_asm_const_5,Y0=et._emscripten_asm_const_4,xa=et.replacePublicSymbol,z0=et.___syscall145,q0=et.___syscall146,W0=0;function Ml(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=d+4|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<1)+2)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt>>0]|0|0)>(h|0))st[a>>1]=0,ct[s>>0]=0,b=nt;else{if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}while(!1);if(ft=ft+1|0,_=lt+2|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function h1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=(d<<1)+8|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<2)+4)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt+1>>0]|0|0)>(h|0))st[a>>1]=0,ct[s>>0]=0,b=nt;else{if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}while(!1);if(ft=ft+1|0,_=lt+4|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function w1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=(d<<1)+8|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<2)+4)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt>>0]|0|0)>(h|0))st[a>>1]=0,ct[s>>0]=0,b=nt;else{if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}while(!1);if(ft=ft+1|0,_=lt+4|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function I1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s*3|0)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+1>>0]|0)+(It[ft>>0]|0)+(It[ft+2>>0]|0)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+3|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+6|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function q1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){tt=It[ft>>0]|0,nt=It[ft+1>>0]|0;do if(((tt&248)+10+(tt<<5&224)+(nt>>>3&28)+(nt<<3&248)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function J1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<2)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+1>>0]|0)+(It[ft>>0]|0)+(It[ft+2>>0]|0)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+4|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+8|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Z1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){nt=It[ft>>0]|0;do if(((nt&240)+24+(nt<<4&240)+((It[ft+1>>0]|0)&240)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function F1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){tt=It[ft>>0]|0,nt=It[ft+1>>0]|0;do if(((tt&248)+12+(tt<<5&224)+(nt>>>3&24)+(nt<<2&248)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function k1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<2)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+2>>0]|0)+(It[ft+1>>0]|0)+(It[ft+3>>0]|0)|0)>($t|0))st[a>>1]=0,ct[s>>0]=0,h=lt;else{if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}while(!1);if(yt=yt+1|0,g=ft+4|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+8|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Vl(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+s|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0|0)>(h|0))st[_e>>1]=0,ct[s>>0]=0,b=ft;else{if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}while(!1);if(_t=_t+1|0,a=yt+1|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+2|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function N1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+(s<<1)|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt+1>>0]|0|0)>(h|0))st[_e>>1]=0,ct[s>>0]=0,b=ft;else{if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}while(!1);if(_t=_t+1|0,a=yt+2|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+4|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Ol(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+(s<<1)|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0|0)>(h|0))st[_e>>1]=0,ct[s>>0]=0,b=ft;else{if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}while(!1);if(_t=_t+1|0,a=yt+2|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+4|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function jo(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,b=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,s=(e[o+4>>2]|0)+b|0,zt=1,a=a+b|0,_e=_e+(b<<1)|0,h=h+b|0,b=0;t:for(;;){if(Ot)for(_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0)>(It[h>>0]|0))st[_e>>1]=0,ct[s>>0]=0,b=ft;else{if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}while(!1);if(_t=_t+1|0,a=yt+1|0,h=h+1|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}if(zt=zt+1|0,(zt|0)>=(Yt|0)){tt=b,Lt=52;break e}else s=s+2|0,a=a+2|0,_e=_e+4|0,h=h+2|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(tt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(tt|0);)a=a+1|0,g=g+4|0;if(h=o+8|0,s=b+-1|0,e[h>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[h>>2]|0))}if((tt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(tt|0))}if((e[h>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[h>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function B1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d*3|0)+12|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d*6|0)+6)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+1>>0]|0)+(It[nt>>0]|0)+(It[nt+2>>0]|0)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+6|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function ju(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){d=It[nt>>0]|0,_e=It[nt+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(_e>>>3&28)+(_e<<3&248)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function Ru(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<2)+16|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<3)+8)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+1>>0]|0)+(It[nt>>0]|0)+(It[nt+2>>0]|0)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+8|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function Iu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){_e=It[nt>>0]|0;do if(((_e&240)+24+(_e<<4&240)+((It[nt+1>>0]|0)&240)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function g0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){d=It[nt>>0]|0,_e=It[nt+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(_e>>>3&24)+(_e<<2&248)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function Bu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<2)+16|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<3)+8)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+2>>0]|0)+(It[nt+1>>0]|0)+(It[nt+3>>0]|0)|0)>(Ot|0)){if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}else st[_>>1]=0,ct[s>>0]=0,h=tt;while(!1);if(lt=lt+1|0,g=nt+8|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function Lu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=d+4|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<1)+2)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}else st[a>>1]=0,ct[s>>0]=0,b=nt;while(!1);if(ft=ft+1|0,_=lt+2|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function iA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=(d<<1)+8|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<2)+4)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt+1>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}else st[a>>1]=0,ct[s>>0]=0,b=nt;while(!1);if(ft=ft+1|0,_=lt+4|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function $1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(zt=Lt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)b=b+(Lt<<1)|0,g=g+(Lt<<1)|0;g=o+1179664|0,b=Lt+1|0,Nt=0-Lt|0,_t=1-Lt|0,Kt=~Lt,yt=(d<<1)+8|0;e:do if(($t|0)>1){Pt=(zt|0)>1,s=(e[o+4>>2]|0)+b|0,Ot=1,_=a+((d<<2)+4)|0,a=_e+(b<<1)|0,b=0;t:for(;;){if(Pt)for(ft=1,lt=_,nt=b;;){do if((It[lt>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[a+(Nt<<1)>>1]|0,b<<16>>16>0){st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(d=st[a+(_t<<1)>>1]|0,_e=d<<16>>16,b=st[a+(Kt<<1)>>1]|0,tt=b<<16>>16,_=b<<16>>16>0,d<<16>>16<=0){if(_){st[a>>1]=b,b=tt*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-3<<2)|0,(e[_>>2]|0)<(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=st[a+-2>>1]|0,b<<16>>16>0){if(st[a>>1]=b,b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(ft|0)){b=nt;break}e[b>>2]=ft,b=nt;break}else{if(b=nt+1|0,(nt|0)>32767)break t;st[a>>1]=b,e[o+1179664+(nt<<2)>>2]=b<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Ot,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Ot,e[o+1310736+(nt+6<<2)>>2]=Ot;break}}if(_){if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(b+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Ot,e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(_=st[a+-2>>1]|0,_<<16>>16<=0){st[a>>1]=d,b=_e*7|0,_=o+1310736+(b+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(b+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+ft,_=o+1310736+(b+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Ot,_=o+1310736+(b+-4<<2)|0,(e[_>>2]|0)>(ft|0)&&(e[_>>2]=ft),e[o+1310736+(b+-1<<2)>>2]=Ot,b=nt;break}if(b=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(b|0)>(_e|0))if(st[a>>1]=_e,(nt|0)>0)for(_=0,d=g;;)if((e[d>>2]|0)==(b|0)&&(e[d>>2]=_e),_=_+1|0,(_|0)>=(nt|0)){b=_e;break}else d=d+4|0;else b=_e;else if(st[a>>1]=b,(b|0)<(_e|0)&(nt|0)>0)for(_=0,d=g;(e[d>>2]|0)==(_e|0)&&(e[d>>2]=b),_=_+1|0,!((_|0)>=(nt|0));)d=d+4|0;b=(b<<16>>16)*7|0,tt=o+1310736+(b+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(b+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=nt}else st[a>>1]=0,ct[s>>0]=0,b=nt;while(!1);if(ft=ft+1|0,_=lt+4|0,a=a+2|0,s=s+1|0,(ft|0)>=(zt|0))break;lt=_,nt=b}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){_e=b,kt=52;break e}else s=s+2|0,_=_+yt|0,a=a+4|0}fr(3,3904,Yt),s=-1}else _e=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function nA(a){a=a|0;var d=0;return d=dt,dt=dt+a|0,dt=dt+15&-16,d|0}function rA(){return dt|0}function sA(a){a=a|0,dt=a}function oA(a,d){a=a|0,d=d|0,dt=a,bt=d}function aA(a,d){a=a|0,d=d|0,pt||(pt=a,mt=d)}function Pm(a){a=a|0,ct[Tt>>0]=ct[a>>0],ct[Tt+1>>0]=ct[a+1>>0],ct[Tt+2>>0]=ct[a+2>>0],ct[Tt+3>>0]=ct[a+3>>0]}function Om(a){a=a|0,ct[Tt>>0]=ct[a>>0],ct[Tt+1>>0]=ct[a+1>>0],ct[Tt+2>>0]=ct[a+2>>0],ct[Tt+3>>0]=ct[a+3>>0],ct[Tt+4>>0]=ct[a+4>>0],ct[Tt+5>>0]=ct[a+5>>0],ct[Tt+6>>0]=ct[a+6>>0],ct[Tt+7>>0]=ct[a+7>>0]}function lA(a){a=a|0,dn=a}function cA(){return dn|0}function uA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d*3|0)+12|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d*6|0)+6)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+6|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function hA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){a=It[h>>0]|0,d=It[h+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function dA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<2)+16|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<3)+8)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+8|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function fA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){d=It[h>>0]|0;do if(((d&240)+24+(d<<4&240)+((It[h+1>>0]|0)&240)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function S2(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){a=It[h>>0]|0,d=It[h+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function lp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<2)+16|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<3)+8)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+2>>0]|0)+(It[h+1>>0]|0)+(It[h+3>>0]|0)|0)>(Pt|0))st[tt>>1]=0,s=_e;else{if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}while(!1);if(nt=nt+1|0,h=h+8|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function cp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=d+4|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<1)+2)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b>>0]|0|0)>(h|0))st[nt>>1]=0,s=tt;else{if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}while(!1);if(lt=lt+1|0,b=b+2|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function up(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=(d<<1)+8|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<2)+4)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b+1>>0]|0|0)>(h|0))st[nt>>1]=0,s=tt;else{if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}while(!1);if(lt=lt+1|0,b=b+4|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function T2(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=(d<<1)+8|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<2)+4)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b>>0]|0|0)>(h|0))st[nt>>1]=0,s=tt;else{if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}while(!1);if(lt=lt+1|0,b=b+4|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function hp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s*3|0)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+3|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+6|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function dp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){_e=It[h>>0]|0,tt=It[h+1>>0]|0;do if(((_e&248)+10+(_e<<5&224)+(tt>>>3&28)+(tt<<3&248)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function fp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<2)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+4|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+8|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function pp(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){tt=It[h>>0]|0;do if(((tt&240)+24+(tt<<4&240)+((It[h+1>>0]|0)&240)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function Du(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){_e=It[h>>0]|0,tt=It[h+1>>0]|0;do if(((_e&248)+12+(_e<<5&224)+(tt>>>3&24)+(tt<<2&248)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function pA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<2)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+2>>0]|0)+(It[h+1>>0]|0)+(It[h+3>>0]|0)|0)>(zt|0))st[lt>>1]=0,s=nt;else{if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}while(!1);if(ft=ft+1|0,h=h+4|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+8|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function AA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+s|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b>>0]|0|0)>(h|0))st[ft>>1]=0,s=lt;else{if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[ft>>1]=s,(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0}else if(st[ft>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}while(!1);if(yt=yt+1|0,b=b+1|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+2|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function mA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+(s<<1)|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b+1>>0]|0|0)>(h|0))st[ft>>1]=0,s=lt;else{if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(a=st[ft+-2>>1]|0,a<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}while(!1);if(yt=yt+1|0,b=b+2|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+4|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function vA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+(s<<1)|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b>>0]|0|0)>(h|0))st[ft>>1]=0,s=lt;else{if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[ft>>1]=s,(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0}else if(st[ft>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}while(!1);if(yt=yt+1|0,b=b+2|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+4|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function gA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+s|0,a=_e+(s<<1)|0,_e=h+s|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=b,lt=s;;){do if((It[ft>>0]|0)>(It[_e>>0]|0))st[a>>1]=0,s=lt;else{if(s=st[a+(Nt<<1)>>1]|0,s<<16>>16>0){st[a>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(h=st[a+(_t<<1)>>1]|0,tt=h<<16>>16,s=st[a+(Kt<<1)>>1]|0,nt=s<<16>>16,b=s<<16>>16>0,h<<16>>16<=0){if(b){st[a>>1]=s,s=nt*7|0,b=o+1310736+(s+-7<<2)|0,e[b>>2]=(e[b>>2]|0)+1,b=o+1310736+(s+-6<<2)|0,e[b>>2]=(e[b>>2]|0)+yt,b=o+1310736+(s+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=o+1310736+(s+-3<<2)|0,(e[b>>2]|0)<(yt|0)&&(e[b>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[a+-2>>1]|0,s<<16>>16>0){if(st[a>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[a>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(b){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(b=0,h=g;;)if((e[h>>2]|0)==(s|0)&&(e[h>>2]=tt),b=b+1|0,(b|0)>=(lt|0)){s=tt;break}else h=h+4|0;else s=tt;else if(st[a>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(b=0,h=g;(e[h>>2]|0)==(tt|0)&&(e[h>>2]=s),b=b+1|0,!((b|0)>=(lt|0));)h=h+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[a+-2>>1]|0,s<<16>>16<=0){st[a>>1]=h,s=tt*7|0,b=o+1310736+(s+-7<<2)|0,e[b>>2]=(e[b>>2]|0)+1,b=o+1310736+(s+-6<<2)|0,e[b>>2]=(e[b>>2]|0)+yt,b=o+1310736+(s+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=o+1310736+(s+-4<<2)|0,(e[b>>2]|0)>(yt|0)&&(e[b>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[a>>1]=s,(lt|0)>0)for(b=0,h=g;(e[h>>2]|0)==(tt|0)&&(e[h>>2]=s),b=b+1|0,!((b|0)>=(lt|0));)h=h+4|0}else if(st[a>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(b=0,h=g;;)if((e[h>>2]|0)==(s|0)&&(e[h>>2]=tt),b=b+1|0,(b|0)>=(lt|0)){s=tt;break}else h=h+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}while(!1);if(yt=yt+1|0,b=ft+1|0,_e=_e+1|0,a=a+2|0,(yt|0)>=(zt|0))break;ft=b,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){tt=s,kt=52;break e}else b=b+2|0,a=a+4|0,_e=_e+2|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(tt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(tt|0);)a=a+1|0,g=g+4|0;if(h=o+8|0,s=b+-1|0,e[h>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[h>>2]|0))}if((tt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(tt|0))}if((e[h>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[h>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function EA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d*3|0)+12|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d*6|0)+6)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+6|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function yA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){a=It[h>>0]|0,d=It[h+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function wA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<2)+16|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<3)+8)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+8|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function CA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){d=It[h>>0]|0;do if(((d&240)+24+(d<<4&240)+((It[h+1>>0]|0)&240)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function R2(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<1)+8|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<2)+4)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){a=It[h>>0]|0,d=It[h+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+4|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function C1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Pt=h*3|0,Ot=kt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)h=h+(kt<<1)|0,b=b+(kt<<1)|0;b=o+1179664|0,_t=0-kt|0,ft=1-kt|0,yt=~kt,lt=(d<<2)+16|0;e:do if((zt|0)>1){Kt=(Ot|0)>1,Nt=1,h=a+((d<<3)+8)|0,g=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Kt)for(nt=1,tt=g,_e=s;;){do if(((It[h+2>>0]|0)+(It[h+1>>0]|0)+(It[h+3>>0]|0)|0)>(Pt|0)){if(s=st[tt+(_t<<1)>>1]|0,s<<16>>16>0){st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(_=st[tt+(ft<<1)>>1]|0,a=_<<16>>16,s=st[tt+(yt<<1)>>1]|0,d=s<<16>>16,g=s<<16>>16>0,_<<16>>16<=0){if(g){st[tt>>1]=s,s=d*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=st[tt+-2>>1]|0,s<<16>>16>0){if(st[tt>>1]=s,s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(nt|0)){s=_e;break}e[s>>2]=nt,s=_e;break}else{if(s=_e+1|0,(_e|0)>32767)break t;st[tt>>1]=s,e[o+1179664+(_e<<2)>>2]=s<<16>>16,_e=_e*7|0,e[o+1310736+(_e<<2)>>2]=1,e[o+1310736+(_e+1<<2)>>2]=nt,e[o+1310736+(_e+2<<2)>>2]=Nt,e[o+1310736+(_e+3<<2)>>2]=nt,e[o+1310736+(_e+4<<2)>>2]=nt,e[o+1310736+(_e+5<<2)>>2]=Nt,e[o+1310736+(_e+6<<2)>>2]=Nt;break}}if(g){if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,d=o+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Nt,e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(g=st[tt+-2>>1]|0,g<<16>>16<=0){st[tt>>1]=_,s=a*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+nt,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Nt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(nt|0)&&(e[g>>2]=nt),e[o+1310736+(s+-1<<2)>>2]=Nt,s=_e;break}if(s=e[o+1179664+(a+-1<<2)>>2]|0,a=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(st[tt>>1]=a,(_e|0)>0)for(g=0,_=b;;)if((e[_>>2]|0)==(s|0)&&(e[_>>2]=a),g=g+1|0,(g|0)>=(_e|0)){s=a;break}else _=_+4|0;else s=a;else if(st[tt>>1]=s,(s|0)<(a|0)&(_e|0)>0)for(g=0,_=b;(e[_>>2]|0)==(a|0)&&(e[_>>2]=s),g=g+1|0,!((g|0)>=(_e|0));)_=_+4|0;s=(s<<16>>16)*7|0,d=o+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=o+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+nt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Nt,s=_e}else st[tt>>1]=0,s=_e;while(!1);if(nt=nt+1|0,h=h+8|0,g=tt+2|0,(nt|0)>=(Ot|0))break;tt=g,_e=s}if(Nt=Nt+1|0,(Nt|0)>=(zt|0)){d=s,Yt=52;break e}else h=h+lt|0,g=g+4|0}fr(3,3904,$t),s=-1}else d=0,Yt=52;while(!1);if((Yt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Pu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=d+4|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<1)+2)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b>>0]|0|0)>(h|0)){if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}else st[nt>>1]=0,s=tt;while(!1);if(lt=lt+1|0,b=b+2|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Jl(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=(d<<1)+8|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<2)+4)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b+1>>0]|0|0)>(h|0)){if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}else st[nt>>1]=0,s=tt;while(!1);if(lt=lt+1|0,b=b+4|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Sl(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,$t=cn,kt=(d|0)/2|0,Lt=(_|0)/2|0,_e=e[o>>2]|0,zt=Lt+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn(zt,kt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(kt|0));)b=b+2|0,g=g+2|0;if(Ot=kt+-1|0,(_|0)>1)for(s=0,b=_e,g=_e+(Ot<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+(kt<<1)|0,g=g+(kt<<1)|0;g=o+1179664|0,Kt=0-kt|0,yt=1-kt|0,_t=~kt,ft=(d<<1)+8|0;e:do if((zt|0)>1){Nt=(Ot|0)>1,Pt=1,b=a+((d<<2)+4)|0,_=_e+(kt+1<<1)|0,s=0;t:for(;;){if(Nt)for(lt=1,nt=_,tt=s;;){do if((It[b>>0]|0|0)>(h|0)){if(s=st[nt+(Kt<<1)>>1]|0,s<<16>>16>0){st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(a=st[nt+(yt<<1)>>1]|0,d=a<<16>>16,s=st[nt+(_t<<1)>>1]|0,_e=s<<16>>16,_=s<<16>>16>0,a<<16>>16<=0){if(_){st[nt>>1]=s,s=_e*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-3<<2)|0,(e[_>>2]|0)<(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=st[nt+-2>>1]|0,s<<16>>16>0){if(st[nt>>1]=s,s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(lt|0)){s=tt;break}e[s>>2]=lt,s=tt;break}else{if(s=tt+1|0,(tt|0)>32767)break t;st[nt>>1]=s,e[o+1179664+(tt<<2)>>2]=s<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(_){if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(s+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(_=st[nt+-2>>1]|0,_<<16>>16<=0){st[nt>>1]=a,s=d*7|0,_=o+1310736+(s+-7<<2)|0,e[_>>2]=(e[_>>2]|0)+1,_=o+1310736+(s+-6<<2)|0,e[_>>2]=(e[_>>2]|0)+lt,_=o+1310736+(s+-5<<2)|0,e[_>>2]=(e[_>>2]|0)+Pt,_=o+1310736+(s+-4<<2)|0,(e[_>>2]|0)>(lt|0)&&(e[_>>2]=lt),e[o+1310736+(s+-1<<2)>>2]=Pt,s=tt;break}if(s=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((_<<16>>16)+-1<<2)>>2]|0,(s|0)>(d|0))if(st[nt>>1]=d,(tt|0)>0)for(_=0,a=g;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=d),_=_+1|0,(_|0)>=(tt|0)){s=d;break}else a=a+4|0;else s=d;else if(st[nt>>1]=s,(s|0)<(d|0)&(tt|0)>0)for(_=0,a=g;(e[a>>2]|0)==(d|0)&&(e[a>>2]=s),_=_+1|0,!((_|0)>=(tt|0));)a=a+4|0;s=(s<<16>>16)*7|0,_e=o+1310736+(s+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(s+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=tt}else st[nt>>1]=0,s=tt;while(!1);if(lt=lt+1|0,b=b+4|0,_=nt+2|0,(lt|0)>=(Ot|0))break;nt=_,tt=s}if(Pt=Pt+1|0,(Pt|0)>=(zt|0)){_e=s,Yt=52;break e}else b=b+ft|0,_=_+4|0}fr(3,3904,$t),s=-1}else _e=0,Yt=52;while(!1);if((Yt|0)==52){if(a=o+12|0,(_e|0)<1)b=1;else for(_=1,b=1;s=e[g>>2]|0,(s|0)==(_|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(_|0)<(_e|0);)_=_+1|0,g=g+4|0;if(d=o+8|0,s=b+-1|0,e[d>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Yt=s<<2,e[o+131084+(Yt<<2)>>2]=kt,e[o+131084+((Yt|1)<<2)>>2]=0,e[o+131084+((Yt|2)<<2)>>2]=Lt,e[o+131084+((Yt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[d>>2]|0))}if((_e|0)>0){a=0;do g=(e[o+1179664+(a<<2)>>2]|0)+-1|0,_=a*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(_<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(_+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(_+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(_+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(_+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(_+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(_+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),a=a+1|0;while((a|0)<(_e|0))}if((e[d>>2]|0)>0){s=0;do kt=o+12+(s<<2)|0,Lt=s<<1,Yt=o+655376+(Lt<<3)|0,it[Yt>>3]=+it[Yt>>3]/+(e[kt>>2]|0),Lt=o+655376+((Lt|1)<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[kt>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Ap(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s*3|0)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+3|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+6|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function j1(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){_e=It[h>>0]|0,tt=It[h+1>>0]|0;do if(((_e&248)+10+(_e<<5&224)+(tt>>>3&28)+(tt<<3&248)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function hu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<2)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+1>>0]|0)+(It[h>>0]|0)+(It[h+2>>0]|0)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+4|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+8|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function Zl(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){tt=It[h>>0]|0;do if(((tt&240)+24+(tt<<4&240)+((It[h+1>>0]|0)&240)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function F0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<1)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){_e=It[h>>0]|0,tt=It[h+1>>0]|0;do if(((_e&248)+12+(_e<<5&224)+(tt>>>3&24)+(tt<<2&248)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+2|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+4|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function I2(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=h*3|0,Ot=d+-1|0,(_|0)>0)for(s=0,h=_e,b=_e+(Ot<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Kt=0-d|0,yt=1-d|0,_t=~d;e:do if(($t|0)>1){Nt=(Ot|0)>1,Pt=1,h=a+(s<<2)|0,g=_e+(s<<1)|0,s=0;t:for(;;){if(Nt)for(ft=1,lt=g,nt=s;;){do if(((It[h+2>>0]|0)+(It[h+1>>0]|0)+(It[h+3>>0]|0)|0)>(zt|0)){if(s=st[lt+(Kt<<1)>>1]|0,s<<16>>16>0){st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(a=st[lt+(yt<<1)>>1]|0,_e=a<<16>>16,s=st[lt+(_t<<1)>>1]|0,tt=s<<16>>16,g=s<<16>>16>0,a<<16>>16<=0){if(g){st[lt>>1]=s,s=tt*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-3<<2)|0,(e[g>>2]|0)<(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=st[lt+-2>>1]|0,s<<16>>16>0){if(st[lt>>1]=s,s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(ft|0)){s=nt;break}e[s>>2]=ft,s=nt;break}else{if(s=nt+1|0,(nt|0)>32767)break t;st[lt>>1]=s,e[o+1179664+(nt<<2)>>2]=s<<16>>16,nt=nt*7|0,e[o+1310736+(nt<<2)>>2]=1,e[o+1310736+(nt+1<<2)>>2]=ft,e[o+1310736+(nt+2<<2)>>2]=Pt,e[o+1310736+(nt+3<<2)>>2]=ft,e[o+1310736+(nt+4<<2)>>2]=ft,e[o+1310736+(nt+5<<2)>>2]=Pt,e[o+1310736+(nt+6<<2)>>2]=Pt;break}}if(g){if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+(tt+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,tt=o+1310736+(s+-5<<2)|0,e[tt>>2]=(e[tt>>2]|0)+Pt,e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(g=st[lt+-2>>1]|0,g<<16>>16<=0){st[lt>>1]=a,s=_e*7|0,g=o+1310736+(s+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(s+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+ft,g=o+1310736+(s+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(s+-4<<2)|0,(e[g>>2]|0)>(ft|0)&&(e[g>>2]=ft),e[o+1310736+(s+-1<<2)>>2]=Pt,s=nt;break}if(s=e[o+1179664+(_e+-1<<2)>>2]|0,_e=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(s|0)>(_e|0))if(st[lt>>1]=_e,(nt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(s|0)&&(e[a>>2]=_e),g=g+1|0,(g|0)>=(nt|0)){s=_e;break}else a=a+4|0;else s=_e;else if(st[lt>>1]=s,(s|0)<(_e|0)&(nt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(_e|0)&&(e[a>>2]=s),g=g+1|0,!((g|0)>=(nt|0));)a=a+4|0;s=(s<<16>>16)*7|0,tt=o+1310736+(s+-7<<2)|0,e[tt>>2]=(e[tt>>2]|0)+1,tt=o+1310736+(s+-6<<2)|0,e[tt>>2]=(e[tt>>2]|0)+ft,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Pt,s=nt}else st[lt>>1]=0,s=nt;while(!1);if(ft=ft+1|0,h=h+4|0,g=lt+2|0,(ft|0)>=(Ot|0))break;lt=g,nt=s}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){tt=s,kt=52;break e}else h=h+8|0,g=g+4|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function _A(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+s|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b>>0]|0|0)>(h|0)){if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[ft>>1]=s,(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0}else if(st[ft>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}else st[ft>>1]=0,s=lt;while(!1);if(yt=yt+1|0,b=b+1|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+2|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function xA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+(s<<1)|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b+1>>0]|0|0)>(h|0)){if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(a=st[ft+-2>>1]|0,a<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}else st[ft>>1]=0,s=lt;while(!1);if(yt=yt+1|0,b=b+2|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+4|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function Ou(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+(s<<1)|0,a=_e+(s<<1)|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=a,lt=s;;){do if((It[b>>0]|0|0)>(h|0)){if(s=st[ft+(Nt<<1)>>1]|0,s<<16>>16>0){st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(_e=st[ft+(_t<<1)>>1]|0,tt=_e<<16>>16,s=st[ft+(Kt<<1)>>1]|0,nt=s<<16>>16,a=s<<16>>16>0,_e<<16>>16<=0){if(a){st[ft>>1]=s,s=nt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-3<<2)|0,(e[a>>2]|0)<(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16>0){if(st[ft>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[ft>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(a){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[ft>>1]=tt,(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;else if(st[ft>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[ft+-2>>1]|0,s<<16>>16<=0){st[ft>>1]=_e,s=tt*7|0,a=o+1310736+(s+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(s+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+yt,a=o+1310736+(s+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+Ot,a=o+1310736+(s+-4<<2)|0,(e[a>>2]|0)>(yt|0)&&(e[a>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[ft>>1]=s,(lt|0)>0)for(a=0,_e=g;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=s),a=a+1|0,!((a|0)>=(lt|0));)_e=_e+4|0}else if(st[ft>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(a=0,_e=g;;)if((e[_e>>2]|0)==(s|0)&&(e[_e>>2]=tt),a=a+1|0,(a|0)>=(lt|0)){s=tt;break}else _e=_e+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}else st[ft>>1]=0,s=lt;while(!1);if(yt=yt+1|0,b=b+2|0,a=ft+2|0,(yt|0)>=(zt|0))break;ft=a,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){nt=s,kt=52;break e}else b=b+4|0,a=a+4|0}fr(3,3904,Yt),s=-1}else nt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function bA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;if(Lt=dt,dt=dt+16|0,Yt=Lt,_e=e[o>>2]|0,$t=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn($t,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if(zt=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+(zt<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if(($t|0)>1){Pt=(zt|0)>1,Ot=1,b=a+s|0,a=_e+(s<<1)|0,_e=h+s|0,s=0;t:for(;;){if(Pt)for(yt=1,ft=b,lt=s;;){do if((It[ft>>0]|0)>(It[_e>>0]|0)){if(s=st[a+(Nt<<1)>>1]|0,s<<16>>16>0){st[a>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(h=st[a+(_t<<1)>>1]|0,tt=h<<16>>16,s=st[a+(Kt<<1)>>1]|0,nt=s<<16>>16,b=s<<16>>16>0,h<<16>>16<=0){if(b){st[a>>1]=s,s=nt*7|0,b=o+1310736+(s+-7<<2)|0,e[b>>2]=(e[b>>2]|0)+1,b=o+1310736+(s+-6<<2)|0,e[b>>2]=(e[b>>2]|0)+yt,b=o+1310736+(s+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=o+1310736+(s+-3<<2)|0,(e[b>>2]|0)<(yt|0)&&(e[b>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[a+-2>>1]|0,s<<16>>16>0){if(st[a>>1]=s,s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,s=o+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(yt|0)){s=lt;break}e[s>>2]=yt,s=lt;break}else{if(s=lt+1|0,(lt|0)>32767)break t;st[a>>1]=s,e[o+1179664+(lt<<2)>>2]=s<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(b){if(s=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(s|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(b=0,h=g;;)if((e[h>>2]|0)==(s|0)&&(e[h>>2]=tt),b=b+1|0,(b|0)>=(lt|0)){s=tt;break}else h=h+4|0;else s=tt;else if(st[a>>1]=s,(s|0)<(tt|0)&(lt|0)>0)for(b=0,h=g;(e[h>>2]|0)==(tt|0)&&(e[h>>2]=s),b=b+1|0,!((b|0)>=(lt|0));)h=h+4|0;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(s+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(s=st[a+-2>>1]|0,s<<16>>16<=0){st[a>>1]=h,s=tt*7|0,b=o+1310736+(s+-7<<2)|0,e[b>>2]=(e[b>>2]|0)+1,b=o+1310736+(s+-6<<2)|0,e[b>>2]=(e[b>>2]|0)+yt,b=o+1310736+(s+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+Ot,b=o+1310736+(s+-4<<2)|0,(e[b>>2]|0)>(yt|0)&&(e[b>>2]=yt),e[o+1310736+(s+-1<<2)>>2]=Ot,s=lt;break}if(tt=e[o+1179664+(tt+-1<<2)>>2]|0,s=e[o+1179664+((s<<16>>16)+-1<<2)>>2]|0,(tt|0)>(s|0)){if(st[a>>1]=s,(lt|0)>0)for(b=0,h=g;(e[h>>2]|0)==(tt|0)&&(e[h>>2]=s),b=b+1|0,!((b|0)>=(lt|0));)h=h+4|0}else if(st[a>>1]=tt,(tt|0)<(s|0)&(lt|0)>0)for(b=0,h=g;;)if((e[h>>2]|0)==(s|0)&&(e[h>>2]=tt),b=b+1|0,(b|0)>=(lt|0)){s=tt;break}else h=h+4|0;else s=tt;s=(s<<16>>16)*7|0,nt=o+1310736+(s+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(s+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,s=o+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Ot,s=lt}else st[a>>1]=0,s=lt;while(!1);if(yt=yt+1|0,b=ft+1|0,_e=_e+1|0,a=a+2|0,(yt|0)>=(zt|0))break;ft=b,lt=s}if(Ot=Ot+1|0,(Ot|0)>=($t|0)){tt=s,kt=52;break e}else b=b+2|0,a=a+4|0,_e=_e+2|0}fr(3,3904,Yt),s=-1}else tt=0,kt=52;while(!1);if((kt|0)==52){if(_e=o+12|0,(tt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(tt|0);)a=a+1|0,g=g+4|0;if(h=o+8|0,s=b+-1|0,e[h>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=d,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=_,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[h>>2]|0))}if((tt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(tt|0))}if((e[h>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,kt=o+655376+(_<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[h>>2]|0));s=0}else s=0}else s=0}return dt=Lt,s|0}function MA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d*3|0)+12|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d*6|0)+6)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+1>>0]|0)+(It[nt>>0]|0)+(It[nt+2>>0]|0)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+6|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function SA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){d=It[nt>>0]|0,_e=It[nt+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(_e>>>3&28)+(_e<<3&248)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function TA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<2)+16|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<3)+8)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+1>>0]|0)+(It[nt>>0]|0)+(It[nt+2>>0]|0)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+8|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function RA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){_e=It[nt>>0]|0;do if(((_e&240)+24+(_e<<4&240)+((It[nt+1>>0]|0)&240)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function IA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<1)+8|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<2)+4)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){d=It[nt>>0]|0,_e=It[nt+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(_e>>>3&24)+(_e<<2&248)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+4|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function BA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;if(Yn=dt,dt=dt+16|0,Yt=Yn,Lt=(d|0)/2|0,cn=(_|0)/2|0,_e=e[o>>2]|0,$t=cn+-1|0,(d|0)>1)for(s=0,b=_e,g=_e+((Pn($t,Lt)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(Lt|0));)b=b+2|0,g=g+2|0;if(Ot=h*3|0,zt=Lt+-1|0,(_|0)>1)for(s=0,h=_e,b=_e+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(cn|0));)h=h+(Lt<<1)|0,b=b+(Lt<<1)|0;b=o+1179664|0,h=Lt+1|0,Kt=0-Lt|0,yt=1-Lt|0,_t=~Lt,ft=(d<<2)+16|0;e:do if(($t|0)>1){Nt=(zt|0)>1,s=(e[o+4>>2]|0)+h|0,Pt=1,g=a+((d<<3)+8)|0,_=_e+(h<<1)|0,h=0;t:for(;;){if(Nt)for(lt=1,nt=g,tt=h;;){do if(((It[nt+2>>0]|0)+(It[nt+1>>0]|0)+(It[nt+3>>0]|0)|0)>(Ot|0))st[_>>1]=0,ct[s>>0]=0,h=tt;else{if(ct[s>>0]=-1,h=st[_+(Kt<<1)>>1]|0,h<<16>>16>0){st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(a=st[_+(yt<<1)>>1]|0,d=a<<16>>16,h=st[_+(_t<<1)>>1]|0,_e=h<<16>>16,g=h<<16>>16>0,a<<16>>16<=0){if(g){st[_>>1]=h,h=_e*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=st[_+-2>>1]|0,h<<16>>16>0){if(st[_>>1]=h,h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(lt|0)){h=tt;break}e[h>>2]=lt,h=tt;break}else{if(h=tt+1|0,(tt|0)>32767)break t;st[_>>1]=h,e[o+1179664+(tt<<2)>>2]=h<<16>>16,tt=tt*7|0,e[o+1310736+(tt<<2)>>2]=1,e[o+1310736+(tt+1<<2)>>2]=lt,e[o+1310736+(tt+2<<2)>>2]=Pt,e[o+1310736+(tt+3<<2)>>2]=lt,e[o+1310736+(tt+4<<2)>>2]=lt,e[o+1310736+(tt+5<<2)>>2]=Pt,e[o+1310736+(tt+6<<2)>>2]=Pt;break}}if(g){if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+(_e+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,_e=o+1310736+(h+-5<<2)|0,e[_e>>2]=(e[_e>>2]|0)+Pt,e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(g=st[_+-2>>1]|0,g<<16>>16<=0){st[_>>1]=a,h=d*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+lt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Pt,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(lt|0)&&(e[g>>2]=lt),e[o+1310736+(h+-1<<2)>>2]=Pt,h=tt;break}if(h=e[o+1179664+(d+-1<<2)>>2]|0,d=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(st[_>>1]=d,(tt|0)>0)for(g=0,a=b;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),g=g+1|0,(g|0)>=(tt|0)){h=d;break}else a=a+4|0;else h=d;else if(st[_>>1]=h,(h|0)<(d|0)&(tt|0)>0)for(g=0,a=b;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),g=g+1|0,!((g|0)>=(tt|0));)a=a+4|0;h=(h<<16>>16)*7|0,_e=o+1310736+(h+-7<<2)|0,e[_e>>2]=(e[_e>>2]|0)+1,_e=o+1310736+(h+-6<<2)|0,e[_e>>2]=(e[_e>>2]|0)+lt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Pt,h=tt}while(!1);if(lt=lt+1|0,g=nt+8|0,_=_+2|0,s=s+1|0,(lt|0)>=(zt|0))break;nt=g,tt=h}if(Pt=Pt+1|0,(Pt|0)>=($t|0)){d=h,kt=52;break e}else s=s+2|0,g=g+ft|0,_=_+4|0}fr(3,3904,Yt),s=-1}else d=0,kt=52;while(!1);if((kt|0)==52){if(_=o+12|0,(d|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(d|0);)g=g+1|0,b=b+4|0;if(a=o+8|0,s=h+-1|0,e[a>>2]=s,s){if(Er(_|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do kt=s<<2,e[o+131084+(kt<<2)>>2]=Lt,e[o+131084+((kt|1)<<2)>>2]=0,e[o+131084+((kt|2)<<2)>>2]=cn,e[o+131084+((kt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[a>>2]|0))}if((d|0)>0){_=0;do b=(e[o+1179664+(_<<2)>>2]|0)+-1|0,g=_*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),_=_+1|0;while((_|0)<(d|0))}if((e[a>>2]|0)>0){s=0;do Lt=o+12+(s<<2)|0,cn=s<<1,kt=o+655376+(cn<<3)|0,it[kt>>3]=+it[kt>>3]/+(e[Lt>>2]|0),cn=o+655376+((cn|1)<<3)|0,it[cn>>3]=+it[cn>>3]/+(e[Lt>>2]|0),s=s+1|0;while((s|0)<(e[a>>2]|0));s=0}else s=0}else s=0}return dt=Yn,s|0}function LA(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;(d|0)!=1?d+-1&d&&(d=Q1(d)|0):d=2,o=e[a+4>>2]|0,d>>>0<=o>>>0?d>>>0<o>>>0&&(o>>>0>2?h=(o+-1&o|0)==0:h=0,_=~~+$o(+(+((e[a+12>>2]|0)>>>0)/+vt[a+16>>2]))>>>0,h?_=1<<32-(Ho(_+-1|0)|0):_=Q1(_)|0,d=d>>>0<_>>>0?_:d,d>>>0<o>>>0&&mp(a,d)):mp(a,d)}function mp(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0;h=a+4|0;e:do if(d){if(lt=eu(d<<2)|0,_=e[a>>2]|0,e[a>>2]=lt,_&&K0(_),e[h>>2]=d,d){_=0;do e[(e[a>>2]|0)+(_<<2)>>2]=0,_=_+1|0;while((_|0)!=(d|0))}if(h=a+8|0,o=e[h>>2]|0,o&&(_=e[o+4>>2]|0,nt=d+-1|0,lt=(nt&d|0)==0,lt?b=_&nt:b=(_>>>0)%(d>>>0)|0,e[(e[a>>2]|0)+(b<<2)>>2]=h,_=e[o>>2]|0,_))for(s=o,h=o;;){tt=h;t:for(;;){for(;;){if(h=e[_+4>>2]|0,lt?_e=h&nt:_e=(h>>>0)%(d>>>0)|0,(_e|0)==(b|0)){h=_;break}if(h=(e[a>>2]|0)+(_e<<2)|0,!(e[h>>2]|0)){b=_e,o=_;break t}for(g=_+8|0,h=_;o=e[h>>2]|0,!!o;)if((e[g>>2]|0)==(e[o+8>>2]|0))h=o;else break;if(e[s>>2]=o,e[h>>2]=e[e[(e[a>>2]|0)+(_e<<2)>>2]>>2],e[e[(e[a>>2]|0)+(_e<<2)>>2]>>2]=_,_=e[tt>>2]|0,!_)break e}if(_=e[h>>2]|0,_)s=h,tt=h;else break e}if(e[h>>2]=s,_=e[o>>2]|0,_)s=o,h=o;else break}}else _=e[a>>2]|0,e[a>>2]=0,_&&K0(_),e[h>>2]=0;while(!1)}function DA(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0;return o=dt,dt=dt+32|0,s=o+16|0,h=o+4|0,b=o,d=e[d>>2]|0,_=e[d>>2]|0,e[b>>2]=d,e[s>>2]=e[b>>2],PA(h,a,s),d=e[h>>2]|0,e[h>>2]=0,d&&(ct[h+8>>0]|0&&Dp(d+264|0),K0(d)),dt=o,_|0}function PA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0;for(ft=e[_>>2]|0,tt=e[d+4>>2]|0,_=e[ft+4>>2]|0,nt=tt+-1|0,lt=(nt&tt|0)==0,lt?_e=nt&_:_e=(_>>>0)%(tt>>>0)|0,o=(e[d>>2]|0)+(_e<<2)|0,h=e[o>>2]|0;;)if(_=e[h>>2]|0,(_|0)==(ft|0)){g=h;break}else h=_;b=d+8|0,(g|0)!=(b|0)?(_=e[g+4>>2]|0,lt?_=_&nt:_=(_>>>0)%(tt>>>0)|0,(_|0)==(_e|0)?o=ft:s=12):s=12;do if((s|0)==12){if(_=e[ft>>2]|0,_&&(_=e[_+4>>2]|0,lt?_=_&nt:_=(_>>>0)%(tt>>>0)|0,(_|0)==(_e|0))){o=ft;break}e[o>>2]=0,o=ft}while(!1);h=e[o>>2]|0,_=h,h&&(h=e[h+4>>2]|0,lt?h=h&nt:h=(h>>>0)%(tt>>>0)|0,(h|0)!=(_e|0)&&(e[(e[d>>2]|0)+(h<<2)>>2]=g,_=e[ft>>2]|0)),e[g>>2]=_,e[o>>2]=0,d=d+12|0,e[d>>2]=(e[d>>2]|0)+-1,e[a>>2]=ft,e[a+4>>2]=b,ct[a+8>>0]=1}function OA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;h=eu(408)|0,e[h+8>>2]=e[_>>2],Er(h+16|0,0,392)|0,it[h+248>>3]=1e-4,it[h+256>>3]=1e3,_=h+264|0,e[_>>2]=0,e[_+4>>2]=0,e[_+8>>2]=0,e[_+12>>2]=0,e[a>>2]=h,a=a+4|0,e[a>>2]=d+8,e[a+4>>2]=257}function FA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;tt=e[_+8>>2]|0,Kt=_+4|0,e[Kt>>2]=tt,_t=d+4|0,_e=e[_t>>2]|0,yt=(_e|0)==0;e:do if(yt)o=0,ft=12;else if(nt=_e+-1|0,lt=(nt&_e|0)==0,lt?o=nt&tt:o=(tt>>>0)%(_e>>>0)|0,h=e[(e[d>>2]|0)+(o<<2)>>2]|0,!h)ft=12;else for(;;){if(s=e[h>>2]|0,!s){ft=12;break e}if(h=e[s+4>>2]|0,lt?h=h&nt:h=(h>>>0)%(_e>>>0)|0,(h|0)!=(o|0)){ft=12;break e}if((e[s+8>>2]|0)==(tt|0)){h=0,_=s;break}else h=s}while(!1);if((ft|0)==12){tt=d+12|0,b=+(((e[tt>>2]|0)+1|0)>>>0),g=+vt[d+16>>2];do if(yt|b>+(_e>>>0)*g)if(_e>>>0>2?h=(_e+-1&_e|0)==0:h=0,s=(h&1|_e<<1)^1,h=~~+$o(+(b/g))>>>0,kA(d,s>>>0<h>>>0?h:s),s=e[_t>>2]|0,h=e[Kt>>2]|0,o=s+-1|0,o&s){_e=s,o=(h>>>0)%(s>>>0)|0;break}else{_e=s,o=o&h;break}while(!1);h=e[(e[d>>2]|0)+(o<<2)>>2]|0,h?(e[_>>2]=e[h>>2],e[h>>2]=_):(h=d+8|0,e[_>>2]=e[h>>2],e[h>>2]=_,e[(e[d>>2]|0)+(o<<2)>>2]=h,h=e[_>>2]|0,h&&(h=e[h+4>>2]|0,o=_e+-1|0,o&_e?h=(h>>>0)%(_e>>>0)|0:h=h&o,e[(e[d>>2]|0)+(h<<2)>>2]=_)),e[tt>>2]=(e[tt>>2]|0)+1,h=1}e[a>>2]=_,ct[a+4>>0]=h}function kA(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;(d|0)!=1?d+-1&d&&(d=Q1(d)|0):d=2,o=e[a+4>>2]|0,d>>>0<=o>>>0?d>>>0<o>>>0&&(o>>>0>2?h=(o+-1&o|0)==0:h=0,_=~~+$o(+(+((e[a+12>>2]|0)>>>0)/+vt[a+16>>2]))>>>0,h?_=1<<32-(Ho(_+-1|0)|0):_=Q1(_)|0,d=d>>>0<_>>>0?_:d,d>>>0<o>>>0&&Tl(a,d)):Tl(a,d)}function Tl(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0;h=a+4|0;e:do if(d){if(lt=eu(d<<2)|0,_=e[a>>2]|0,e[a>>2]=lt,_&&K0(_),e[h>>2]=d,d){_=0;do e[(e[a>>2]|0)+(_<<2)>>2]=0,_=_+1|0;while((_|0)!=(d|0))}if(h=a+8|0,o=e[h>>2]|0,o&&(_=e[o+4>>2]|0,nt=d+-1|0,lt=(nt&d|0)==0,lt?b=_&nt:b=(_>>>0)%(d>>>0)|0,e[(e[a>>2]|0)+(b<<2)>>2]=h,_=e[o>>2]|0,_))for(s=o,h=o;;){tt=h;t:for(;;){for(;;){if(h=e[_+4>>2]|0,lt?_e=h&nt:_e=(h>>>0)%(d>>>0)|0,(_e|0)==(b|0)){h=_;break}if(h=(e[a>>2]|0)+(_e<<2)|0,!(e[h>>2]|0)){b=_e,o=_;break t}for(g=_+8|0,h=_;o=e[h>>2]|0,!!o;)if((e[g>>2]|0)==(e[o+8>>2]|0))h=o;else break;if(e[s>>2]=o,e[h>>2]=e[e[(e[a>>2]|0)+(_e<<2)>>2]>>2],e[e[(e[a>>2]|0)+(_e<<2)>>2]>>2]=_,_=e[tt>>2]|0,!_)break e}if(_=e[h>>2]|0,_)s=h,tt=h;else break e}if(e[h>>2]=s,_=e[o>>2]|0,_)s=o,h=o;else break}}else _=e[a>>2]|0,e[a>>2]=0,_&&K0(_),e[h>>2]=0;while(!1)}function Co(a){return a=a|0,Nl(e[a+4>>2]|0)|0}function NA(a){a=a|0,Yl(624,10917),yr(632,10922,1,1,0),Q0(640,10927,1,-128,127),Q0(656,10932,1,-128,127),Q0(648,10944,1,0,255),Q0(664,10958,2,-32768,32767),Q0(672,10964,2,0,65535),Q0(680,10979,4,-2147483648,2147483647),Q0(688,10983,4,0,-1),Q0(696,10996,4,-2147483648,2147483647),Q0(704,11001,4,0,-1),V0(712,11015,4),V0(720,11021,8),_n(360,11028),_n(392,11040),kr(416,4,11073),$s(440,11086),Cs(448,0,11102),Ao(11132),_h(11169),B2(11208),vp(11239),_c(11279),du(11308),Cs(456,4,11346),Cs(464,5,11376),Ao(11415),_h(11447),B2(11480),vp(11513),_c(11547),du(11580),Cs(472,6,11614),Cs(480,7,11645),Cs(488,7,11677)}function Wr(){NA(0)}function Ao(a){a=a|0,Cs(536,0,a|0)}function _h(a){a=a|0,Cs(528,1,a|0)}function B2(a){a=a|0,Cs(520,2,a|0)}function vp(a){a=a|0,Cs(512,3,a|0)}function _c(a){a=a|0,Cs(504,4,a|0)}function du(a){a=a|0,Cs(496,5,a|0)}function gp(a){a=a|0,u1(12478,12501,303,12589)}function eu(a){a=a|0;var d=0;d=a|0?a:1,a=Qr(d)|0;e:do if(!a){for(;a=UA()|0,!!a;)if(_3[a&0](),a=Qr(d)|0,a)break e;d=cr(4)|0,e[d>>2]=2224,Gr(d|0,544,1)}while(!1);return a|0}function K0(a){a=a|0,xs(a)}function Ep(a){a=a|0}function yp(a){a=a|0,K0(a)}function _d(a){return a=a|0,12610}function UA(){var a=0;return a=e[559]|0,e[559]=a+0,a|0}function u0(a){a=a|0}function Fu(a){a=a|0}function L2(a){a=a|0}function tu(a){a=a|0}function fu(a){a=a|0}function wp(a){a=a|0,K0(a)}function R0(a){a=a|0,K0(a)}function e2(a){a=a|0,K0(a)}function Cp(a){a=a|0,K0(a)}function C0(a,d,_){return a=a|0,d=d|0,_=_|0,(a|0)==(d|0)|0}function r0(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;if(b=dt,dt=dt+64|0,s=b,(a|0)!=(d|0))if(d|0&&(o=Zo(d,576,592,0)|0,(o|0)!=0)){d=s,h=d+56|0;do e[d>>2]=0,d=d+4|0;while((d|0)<(h|0));e[s>>2]=o,e[s+8>>2]=a,e[s+12>>2]=-1,e[s+48>>2]=1,Vp[e[(e[o>>2]|0)+28>>2]&3](o,s,e[_>>2]|0,1),(e[s+24>>2]|0)==1?(e[_>>2]=e[s+16>>2],d=1):d=0}else d=0;else d=1;return dt=b,d|0}function pu(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0;a=d+16|0,o=e[a>>2]|0;do if(o){if((o|0)!=(_|0)){h=d+36|0,e[h>>2]=(e[h>>2]|0)+1,e[d+24>>2]=2,ct[d+54>>0]=1;break}a=d+24|0,(e[a>>2]|0)==2&&(e[a>>2]=h)}else e[a>>2]=_,e[d+24>>2]=h,e[d+36>>2]=1;while(!1)}function r1(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,(a|0)==(e[d+8>>2]|0)&&pu(0,d,_,h)}function t2(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,(a|0)==(e[d+8>>2]|0)?pu(0,d,_,h):(a=e[a+8>>2]|0,Vp[e[(e[a>>2]|0)+28>>2]&3](a,d,_,h))}function Us(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;s=e[a+4>>2]|0,o=s>>8,s&1&&(o=e[(e[_>>2]|0)+o>>2]|0),a=e[a>>2]|0,Vp[e[(e[a>>2]|0)+28>>2]&3](a,d,_+o|0,s&2|0?h:2)}function yo(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;e:do if((a|0)!=(e[d+8>>2]|0)){if(s=e[a+12>>2]|0,o=a+16+(s<<3)|0,Us(a+16|0,d,_,h),(s|0)>1){s=d+54|0,a=a+24|0;do{if(Us(a,d,_,h),ct[s>>0]|0)break e;a=a+8|0}while(a>>>0<o>>>0)}}else pu(0,d,_,h);while(!1)}function Zo(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;yt=dt,dt=dt+64|0,ft=yt,lt=e[a>>2]|0,nt=a+(e[lt+-8>>2]|0)|0,lt=e[lt+-4>>2]|0,e[ft>>2]=_,e[ft+4>>2]=a,e[ft+8>>2]=d,e[ft+12>>2]=h,h=ft+16|0,a=ft+20|0,d=ft+24|0,o=ft+28|0,s=ft+32|0,b=ft+40|0,g=(lt|0)==(_|0),_e=h,tt=_e+36|0;do e[_e>>2]=0,_e=_e+4|0;while((_e|0)<(tt|0));st[h+36>>1]=0,ct[h+38>>0]=0;e:do if(g)e[ft+48>>2]=1,X2[e[(e[_>>2]|0)+20>>2]&3](_,ft,nt,nt,1,0),h=(e[d>>2]|0)==1?nt:0;else{switch(Gp[e[(e[lt>>2]|0)+24>>2]&3](lt,ft,nt,1,0),e[ft+36>>2]|0){case 0:{h=(e[b>>2]|0)==1&(e[o>>2]|0)==1&(e[s>>2]|0)==1?e[a>>2]|0:0;break e}case 1:break;default:{h=0;break e}}if((e[d>>2]|0)!=1&&!((e[b>>2]|0)==0&(e[o>>2]|0)==1&(e[s>>2]|0)==1)){h=0;break}h=e[h>>2]|0}while(!1);return dt=yt,h|0}function e0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,ct[d+53>>0]=1;do if((e[d+4>>2]|0)==(h|0)){if(ct[d+52>>0]=1,h=d+16|0,a=e[h>>2]|0,!a){if(e[h>>2]=_,e[d+24>>2]=o,e[d+36>>2]=1,!((o|0)==1&&(e[d+48>>2]|0)==1))break;ct[d+54>>0]=1;break}if((a|0)!=(_|0)){o=d+36|0,e[o>>2]=(e[o>>2]|0)+1,ct[d+54>>0]=1;break}a=d+24|0,h=e[a>>2]|0,(h|0)==2&&(e[a>>2]=o,h=o),(h|0)==1&&(e[d+48>>2]|0)==1&&(ct[d+54>>0]=1)}while(!1)}function kn(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;e:do if((a|0)==(e[d+8>>2]|0))(e[d+4>>2]|0)==(_|0)&&(s=d+28|0,(e[s>>2]|0)!=1)&&(e[s>>2]=h);else{if((a|0)!=(e[d>>2]|0)){if(_t=e[a+12>>2]|0,g=a+16+(_t<<3)|0,I0(a+16|0,d,_,h,o),s=a+24|0,(_t|0)<=1)break;if(b=e[a+8>>2]|0,!(b&2|0)&&(_e=d+36|0,(e[_e>>2]|0)!=1)){if(!(b&1)){for(b=d+54|0;;)if(ct[b>>0]|0||(e[_e>>2]|0)==1||(I0(s,d,_,h,o),s=s+8|0,s>>>0>=g>>>0))break e}for(b=d+24|0,a=d+54|0;;)if(ct[a>>0]|0||(e[_e>>2]|0)==1&&(e[b>>2]|0)==1||(I0(s,d,_,h,o),s=s+8|0,s>>>0>=g>>>0))break e}for(b=d+54|0;;)if(ct[b>>0]|0||(I0(s,d,_,h,o),s=s+8|0,s>>>0>=g>>>0))break e}if((e[d+16>>2]|0)!=(_|0)&&(yt=d+20|0,(e[yt>>2]|0)!=(_|0))){if(e[d+32>>2]=h,nt=d+44|0,(e[nt>>2]|0)==4)break;b=e[a+12>>2]|0,g=a+16+(b<<3)|0,_e=d+52|0,h=d+53|0,lt=d+54|0,tt=a+8|0,ft=d+24|0;t:do if((b|0)>0)for(b=0,s=0,a=a+16|0;;){if(ct[_e>>0]=0,ct[h>>0]=0,$l(a,d,_,_,1,o),ct[lt>>0]|0){_t=20;break t}do if(ct[h>>0]|0){if(!(ct[_e>>0]|0))if(e[tt>>2]&1){s=1;break}else{s=1,_t=20;break t}if((e[ft>>2]|0)==1)break t;if(e[tt>>2]&2)b=1,s=1;else break t}while(!1);if(a=a+8|0,a>>>0>=g>>>0){_t=20;break}}else b=0,s=0,_t=20;while(!1);do if((_t|0)==20){if(!b&&(e[yt>>2]=_,_=d+40|0,e[_>>2]=(e[_>>2]|0)+1,(e[d+36>>2]|0)==1)&&(e[ft>>2]|0)==2){if(ct[lt>>0]=1,s)break}else _t=24;if((_t|0)==24&&s)break;e[nt>>2]=4;break e}while(!1);e[nt>>2]=3;break}(h|0)==1&&(e[d+32>>2]=1)}while(!1)}function $l(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0;var b=0,g=0;g=e[a+4>>2]|0,b=g>>8,g&1&&(b=e[(e[h>>2]|0)+b>>2]|0),a=e[a>>2]|0,X2[e[(e[a>>2]|0)+20>>2]&3](a,d,_,h+b|0,g&2|0?o:2,s)}function I0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0;b=e[a+4>>2]|0,s=b>>8,b&1&&(s=e[(e[_>>2]|0)+s>>2]|0),a=e[a>>2]|0,Gp[e[(e[a>>2]|0)+24>>2]&3](a,d,_+s|0,b&2|0?h:2,o)}function H0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0;e:do if((a|0)==(e[d+8>>2]|0))(e[d+4>>2]|0)==(_|0)&&(s=d+28|0,(e[s>>2]|0)!=1)&&(e[s>>2]=h);else{if((a|0)!=(e[d>>2]|0)){g=e[a+8>>2]|0,Gp[e[(e[g>>2]|0)+24>>2]&3](g,d,_,h,o);break}if((e[d+16>>2]|0)!=(_|0)&&(b=d+20|0,(e[b>>2]|0)!=(_|0))){if(e[d+32>>2]=h,h=d+44|0,(e[h>>2]|0)==4)break;s=d+52|0,ct[s>>0]=0,_e=d+53|0,ct[_e>>0]=0,a=e[a+8>>2]|0,X2[e[(e[a>>2]|0)+20>>2]&3](a,d,_,_,1,o),ct[_e>>0]|0?ct[s>>0]|0||(s=1,g=13):(s=0,g=13);do if((g|0)==13){if(e[b>>2]=_,_e=d+40|0,e[_e>>2]=(e[_e>>2]|0)+1,(e[d+36>>2]|0)==1&&(e[d+24>>2]|0)==2){if(ct[d+54>>0]=1,s)break}else g=16;if((g|0)==16&&s)break;e[h>>2]=4;break e}while(!1);e[h>>2]=3;break}(h|0)==1&&(e[d+32>>2]=1)}while(!1)}function Wo(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0;do if((a|0)==(e[d+8>>2]|0))(e[d+4>>2]|0)==(_|0)&&(b=d+28|0,(e[b>>2]|0)!=1)&&(e[b>>2]=h);else if((a|0)==(e[d>>2]|0)){if((e[d+16>>2]|0)!=(_|0)&&(s=d+20|0,(e[s>>2]|0)!=(_|0))){e[d+32>>2]=h,e[s>>2]=_,o=d+40|0,e[o>>2]=(e[o>>2]|0)+1,(e[d+36>>2]|0)==1&&(e[d+24>>2]|0)==2&&(ct[d+54>>0]=1),e[d+44>>2]=4;break}(h|0)==1&&(e[d+32>>2]=1)}while(!1)}function zl(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0;var b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;if((a|0)==(e[d+8>>2]|0))e0(0,d,_,h,o);else{nt=d+52|0,lt=ct[nt>>0]|0,ft=d+53|0,yt=ct[ft>>0]|0,tt=e[a+12>>2]|0,b=a+16+(tt<<3)|0,ct[nt>>0]=0,ct[ft>>0]=0,$l(a+16|0,d,_,h,o,s);e:do if((tt|0)>1){g=d+24|0,_e=a+8|0,tt=d+54|0,a=a+24|0;do{if(ct[tt>>0]|0)break e;if(ct[nt>>0]|0){if((e[g>>2]|0)==1||!(e[_e>>2]&2))break e}else if(ct[ft>>0]|0&&!(e[_e>>2]&1|0))break e;ct[nt>>0]=0,ct[ft>>0]=0,$l(a,d,_,h,o,s),a=a+8|0}while(a>>>0<b>>>0)}while(!1);ct[nt>>0]=lt,ct[ft>>0]=yt}}function U1(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,(a|0)==(e[d+8>>2]|0)?e0(0,d,_,h,o):(a=e[a+8>>2]|0,X2[e[(e[a>>2]|0)+20>>2]&3](a,d,_,h,o,s))}function s1(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,(a|0)==(e[d+8>>2]|0)&&e0(0,d,_,h,o)}function Rl(a){a=a|0,u1(12625,12654,1164,12589)}function fo(a){return a=a|0,((a|0)==32|(a+-9|0)>>>0<5)&1|0}function wo(){var a=0;return e[597]|0?a=e[(bo()|0)+60>>2]|0:a=2644,a|0}function Fl(a){a=a|0;var d=0,_=0;for(d=0;;){if((It[12742+d>>0]|0)==(a|0)){_=2;break}if(d=d+1|0,(d|0)==87){d=87,a=12830,_=5;break}}if((_|0)==2&&(d?(a=12830,_=5):a=12830),(_|0)==5)for(;;){for(_=a;a=_+1|0,ct[_>>0]|0;)_=a;if(d=d+-1|0,d)_=5;else break}return a|0}function Il(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0;switch(Hr=dt,dt=dt+512|0,ir=Hr,d|0){case 0:{Jn=24,dr=-149,$t=4;break}case 1:{Jn=53,dr=-1074,$t=4;break}case 2:{Jn=53,dr=-1074,$t=4;break}default:h=0}e:do if(($t|0)==4){Lt=a+4|0,kt=a+100|0;do d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0;while(fo(d)|0);t:do switch(d|0){case 43:case 45:if(o=1-(((d|0)==45&1)<<1)|0,d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=d+1,d=It[d>>0]|0,sr=o;break t}else{d=_s(a)|0,sr=o;break t}default:sr=1}while(!1);o=d,d=0;do{if((o|32|0)!=(ct[14634+d>>0]|0))break;do if(d>>>0<7)if(o=e[Lt>>2]|0,o>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=o+1,o=It[o>>0]|0;break}else{o=_s(a)|0;break}while(!1);d=d+1|0}while(d>>>0<8);t:do switch(d|0){case 8:break;case 3:{$t=23;break}default:{if(b=(_|0)!=0,b&d>>>0>3){if((d|0)==8)break t;$t=23;break t}i:do if(!d){d=0;do{if((o|32|0)!=(ct[16477+d>>0]|0))break i;do if(d>>>0<2)if(o=e[Lt>>2]|0,o>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=o+1,o=It[o>>0]|0;break}else{o=_s(a)|0;break}while(!1);d=d+1|0}while(d>>>0<3)}while(!1);switch(d|0){case 3:{if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,(d|0)==40)d=1;else{if(!(e[kt>>2]|0)){h=xt;break e}e[Lt>>2]=(e[Lt>>2]|0)+-1,h=xt;break e}for(;o=e[Lt>>2]|0,o>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=o+1,o=It[o>>0]|0):o=_s(a)|0,!(!((o+-48|0)>>>0<10|(o+-65|0)>>>0<26)&&!((o|0)==95|(o+-97|0)>>>0<26));)d=d+1|0;if((o|0)==41){h=xt;break e}if(o=(e[kt>>2]|0)==0,o||(e[Lt>>2]=(e[Lt>>2]|0)+-1),!b){e[(wo()|0)>>2]=22,Do(a,0),h=0;break e}if(!d){h=xt;break e}for(;;)if(d=d+-1|0,o||(e[Lt>>2]=(e[Lt>>2]|0)+-1),!d){h=xt;break e}}case 0:{do if((o|0)==48){if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,(d|32|0)!=120){if(!(e[kt>>2]|0)){d=48;break}e[Lt>>2]=(e[Lt>>2]|0)+-1,d=48;break}d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0,b=0):(d=_s(a)|0,b=0);i:for(;;){switch(d|0){case 46:{$t=74;break i}case 48:break;default:{Ot=0,g=0,Pt=0,o=0,tt=b,nt=0,Nt=0,_e=1,b=0,h=0;break i}}if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=d+1,d=It[d>>0]|0,b=1;continue}else{d=_s(a)|0,b=1;continue}}if(($t|0)==74)if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,(d|0)==48){b=0,o=0;do d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,b=M0(b|0,o|0,-1,-1)|0,o=dn;while((d|0)==48);Ot=0,g=0,Pt=b,tt=1,nt=1,Nt=0,_e=1,b=0,h=0}else Ot=0,g=0,Pt=0,o=0,tt=b,nt=1,Nt=0,_e=1,b=0,h=0;for(;;){if(_t=d+-48|0,lt=d|32,_t>>>0>=10){if(Kt=(d|0)==46,!(Kt|(lt+-97|0)>>>0<6)){lt=Pt,_t=Ot;break}if(Kt)if(!nt)Kt=g,o=Ot,_t=Ot,nt=1,lt=Nt,s=_e;else{lt=Pt,_t=Ot,d=46;break}else $t=86}else $t=86;if(($t|0)==86){$t=0,d=(d|0)>57?lt+-87|0:_t;do if((Ot|0)<0|(Ot|0)==0&g>>>0<8)lt=Nt,s=_e,b=d+(b<<4)|0;else{if((Ot|0)<0|(Ot|0)==0&g>>>0<14){yt=_e*.0625,lt=Nt,s=yt,h=h+yt*+(d|0);break}(Nt|0)!=0|(d|0)==0?(lt=Nt,s=_e):(lt=1,s=_e,h=h+_e*.5)}while(!1);g=M0(g|0,Ot|0,1,0)|0,Kt=Pt,_t=dn,tt=1}if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=d+1,Ot=_t,Pt=Kt,d=It[d>>0]|0,Nt=lt,_e=s;continue}else{Ot=_t,Pt=Kt,d=_s(a)|0,Nt=lt,_e=s;continue}}if(!tt){d=(e[kt>>2]|0)==0,d||(e[Lt>>2]=(e[Lt>>2]|0)+-1),_?!d&&(zt=e[Lt>>2]|0,e[Lt>>2]=zt+-1,(nt|0)!=0)&&(e[Lt>>2]=zt+-2):Do(a,0),h=+(sr|0)*0;break e}if(tt=(nt|0)==0,nt=tt?g:lt,tt=tt?_t:o,(_t|0)<0|(_t|0)==0&g>>>0<8){o=_t;do b=b<<4,g=M0(g|0,o|0,1,0)|0,o=dn;while((o|0)<0|(o|0)==0&g>>>0<8)}if((d|32|0)==112){if(o=a2(a,_)|0,d=dn,(o|0)==0&(d|0)==-2147483648){if(!_){Do(a,0),h=0;break e}e[kt>>2]|0?(e[Lt>>2]=(e[Lt>>2]|0)+-1,o=0,d=0):(o=0,d=0)}}else e[kt>>2]|0?(e[Lt>>2]=(e[Lt>>2]|0)+-1,o=0,d=0):(o=0,d=0);if(ir=E0(nt|0,tt|0,2)|0,ir=M0(ir|0,dn|0,-32,-1)|0,d=M0(ir|0,dn|0,o|0,d|0)|0,o=dn,!b){h=+(sr|0)*0;break e}if((o|0)>0|(o|0)==0&d>>>0>(0-dr|0)>>>0){e[(wo()|0)>>2]=34,h=+(sr|0)*17976931348623157e292*17976931348623157e292;break e}if(ir=dr+-106|0,Yn=((ir|0)<0)<<31>>31,(o|0)<(Yn|0)|(o|0)==(Yn|0)&d>>>0<ir>>>0){e[(wo()|0)>>2]=34,h=+(sr|0)*22250738585072014e-324*22250738585072014e-324;break e}if((b|0)>-1){do Yn=!(h>=.5),ir=Yn&1|b<<1,b=ir^1,h=h+(Yn?h:h+-1),d=M0(d|0,o|0,-1,-1)|0,o=dn;while((ir|0)>-1);g=d,_e=h}else g=d,_e=h;d=Ul(32,0,dr|0,((dr|0)<0)<<31>>31|0)|0,d=M0(g|0,o|0,d|0,dn|0)|0,dr=dn,0>(dr|0)|(dr|0)==0&Jn>>>0>d>>>0?(d|0)<0?(d=0,$t=127):$t=125:(d=Jn,$t=125),($t|0)==125&&((d|0)<53?$t=127:(o=d,s=+(sr|0),h=0)),($t|0)==127&&(h=+(sr|0),o=d,s=h,h=+iu(+ru(1,84-d|0),h)),Jn=(b&1|0)==0&(_e!=0&(o|0)<32),h=s*(Jn?0:_e)+(h+s*+(((Jn&1)+b|0)>>>0))-h,h==0&&(e[(wo()|0)>>2]=34),h=+Nu(h,g);break e}else d=o;while(!1);cn=dr+Jn|0,Yn=0-cn|0,b=0;i:for(;;){switch(d|0){case 46:{$t=138;break i}case 48:break;default:{o=0,lt=0,nt=0;break i}}if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0){e[Lt>>2]=d+1,d=It[d>>0]|0,b=1;continue}else{d=_s(a)|0,b=1;continue}}if(($t|0)==138)if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,(d|0)==48)for(o=0,d=0;;)if(o=M0(o|0,d|0,-1,-1)|0,b=dn,d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,(d|0)==48)d=b;else{lt=b,b=1,nt=1;break}else o=0,lt=0,nt=1;e[ir>>2]=0,tt=d+-48|0,g=(d|0)==46;i:do if(g|tt>>>0<10){Yt=ir+496|0,Ot=0,Kt=0,Nt=g,$t=lt,_t=b,zt=nt,b=0,g=0,nt=0;s:for(;;){do if(Nt)if(!zt)o=Ot,lt=Kt,zt=1;else{lt=$t,d=Ot,tt=Kt;break s}else{if(Nt=M0(Ot|0,Kt|0,1,0)|0,Kt=dn,Pt=(d|0)!=48,(g|0)>=125){if(!Pt){lt=$t,Ot=Nt;break}e[Yt>>2]=e[Yt>>2]|1,lt=$t,Ot=Nt;break}lt=ir+(g<<2)|0,b&&(tt=d+-48+((e[lt>>2]|0)*10|0)|0),e[lt>>2]=tt,b=b+1|0,tt=(b|0)==9,lt=$t,Ot=Nt,_t=1,b=tt?0:b,g=(tt&1)+g|0,nt=Pt?Nt:nt}while(!1);if(d=e[Lt>>2]|0,d>>>0<(e[kt>>2]|0)>>>0?(e[Lt>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,tt=d+-48|0,Nt=(d|0)==46,Nt|tt>>>0<10)$t=lt;else{tt=zt,$t=161;break i}}_t=(_t|0)!=0,$t=169}else Ot=0,Kt=0,_t=b,tt=nt,b=0,g=0,nt=0,$t=161;while(!1);do if(($t|0)==161){if(Yt=(tt|0)==0,o=Yt?Ot:o,lt=Yt?Kt:lt,_t=(_t|0)!=0,!((d|32|0)==101&_t))if((d|0)>-1){d=Ot,tt=Kt,$t=169;break}else{d=Ot,tt=Kt,$t=171;break}if(tt=a2(a,_)|0,d=dn,(tt|0)==0&(d|0)==-2147483648){if(!_){Do(a,0),h=0;break}e[kt>>2]|0?(e[Lt>>2]=(e[Lt>>2]|0)+-1,tt=0,d=0):(tt=0,d=0)}o=M0(tt|0,d|0,o|0,lt|0)|0,_t=Ot,lt=dn,tt=Kt,$t=173}while(!1);($t|0)==169&&(e[kt>>2]|0?(e[Lt>>2]=(e[Lt>>2]|0)+-1,_t?(_t=d,$t=173):$t=172):$t=171),($t|0)==171&&(_t?(_t=d,$t=173):$t=172);do if(($t|0)==172)e[(wo()|0)>>2]=22,Do(a,0),h=0;else if(($t|0)==173){if(d=e[ir>>2]|0,!d){h=+(sr|0)*0;break}if(((tt|0)<0|(tt|0)==0&_t>>>0<10)&((o|0)==(_t|0)&(lt|0)==(tt|0))&&Jn>>>0>30|(d>>>Jn|0)==0){h=+(sr|0)*+(d>>>0);break}if(a=(dr|0)/-2|0,Lt=((a|0)<0)<<31>>31,(lt|0)>(Lt|0)|(lt|0)==(Lt|0)&o>>>0>a>>>0){e[(wo()|0)>>2]=34,h=+(sr|0)*17976931348623157e292*17976931348623157e292;break}if(a=dr+-106|0,Lt=((a|0)<0)<<31>>31,(lt|0)<(Lt|0)|(lt|0)==(Lt|0)&o>>>0<a>>>0){e[(wo()|0)>>2]=34,h=+(sr|0)*22250738585072014e-324*22250738585072014e-324;break}if(b){if((b|0)<9){tt=ir+(g<<2)|0,d=e[tt>>2]|0;do d=d*10|0,b=b+1|0;while((b|0)!=9);e[tt>>2]=d}g=g+1|0}if((nt|0)<9&&(nt|0)<=(o|0)&(o|0)<18){if((o|0)==9){h=+(sr|0)*+((e[ir>>2]|0)>>>0);break}if((o|0)<9){h=+(sr|0)*+((e[ir>>2]|0)>>>0)/+(e[2648+(8-o<<2)>>2]|0);break}if(a=Jn+27+(Pn(o,-3)|0)|0,d=e[ir>>2]|0,(a|0)>30|(d>>>a|0)==0){h=+(sr|0)*+(d>>>0)*+(e[2648+(o+-10<<2)>>2]|0);break}}if(d=(o|0)%9|0,!d)b=0,d=0;else{if(_t=(o|0)>-1?d:d+9|0,tt=e[2648+(8-_t<<2)>>2]|0,g){nt=1e9/(tt|0)|0,b=0,d=0,lt=0;do kt=ir+(lt<<2)|0,Lt=e[kt>>2]|0,a=((Lt>>>0)/(tt>>>0)|0)+d|0,e[kt>>2]=a,d=Pn((Lt>>>0)%(tt>>>0)|0,nt)|0,a=(lt|0)==(b|0)&(a|0)==0,lt=lt+1|0,o=a?o+-9|0:o,b=a?lt&127:b;while((lt|0)!=(g|0));d&&(e[ir+(g<<2)>>2]=d,g=g+1|0)}else b=0,g=0;d=0,o=9-_t+o|0}i:for(;;){Kt=(o|0)<18,Nt=(o|0)==18,Pt=ir+(b<<2)|0;do{if(!Kt){if(!Nt)break i;if((e[Pt>>2]|0)>>>0>=9007199){o=18;break i}}for(tt=0,nt=g+127|0;_t=nt&127,lt=ir+(_t<<2)|0,nt=E0(e[lt>>2]|0,0,29)|0,nt=M0(nt|0,dn|0,tt|0,0)|0,tt=dn,tt>>>0>0|(tt|0)==0&nt>>>0>1e9?(a=v2(nt|0,tt|0,1e9,0)|0,nt=lm(nt|0,tt|0,1e9,0)|0,tt=a):tt=0,e[lt>>2]=nt,a=(_t|0)==(b|0),g=(_t|0)!=(g+127&127|0)|a||nt|0?g:_t,!a;)nt=_t+-1|0;d=d+-29|0}while(!(tt|0));b=b+127&127,(b|0)==(g|0)&&(a=g+127&127,g=ir+((g+126&127)<<2)|0,e[g>>2]=e[g>>2]|e[ir+(a<<2)>>2],g=a),e[ir+(b<<2)>>2]=tt,o=o+9|0}i:for(;;){for(Ot=g+1&127,Pt=ir+((g+127&127)<<2)|0;;){for(Kt=(o|0)==18,Nt=(o|0)>27?9:1,_t=Kt^1;;){nt=b&127,lt=(nt|0)==(g|0);do if(lt)$t=219;else{if(tt=e[ir+(nt<<2)>>2]|0,tt>>>0<9007199){$t=219;break}if(tt>>>0>9007199)break;if(tt=b+1&127,(tt|0)==(g|0)){$t=219;break}if(tt=e[ir+(tt<<2)>>2]|0,tt>>>0<254740991){$t=219;break}if(!(tt>>>0>254740991|_t)){o=nt;break i}}while(!1);if(($t|0)==219&&($t=0,Kt)){$t=220;break i}if(d=d+Nt|0,(b|0)==(g|0))b=g;else break}for(_t=(1<<Nt)+-1|0,Kt=1e9>>>Nt,nt=b,tt=0,lt=b;Lt=ir+(lt<<2)|0,a=e[Lt>>2]|0,b=(a>>>Nt)+tt|0,e[Lt>>2]=b,tt=Pn(a&_t,Kt)|0,b=(lt|0)==(nt|0)&(b|0)==0,lt=lt+1&127,o=b?o+-9|0:o,b=b?lt:nt,(lt|0)!=(g|0);)nt=b;if(tt){if((Ot|0)!=(b|0))break;e[Pt>>2]=e[Pt>>2]|1}}e[ir+(g<<2)>>2]=tt,g=Ot}($t|0)==220&&(lt?(e[ir+(Ot+-1<<2)>>2]=0,o=g,g=Ot):o=nt),h=+((e[ir+(o<<2)>>2]|0)>>>0),o=b+1&127,(o|0)==(g|0)&&(g=b+2&127,e[ir+(g+-1<<2)>>2]=0),yt=+(sr|0),s=yt*(h*1e9+ +((e[ir+(o<<2)>>2]|0)>>>0)),Kt=d+53|0,lt=Kt-dr|0,_t=(lt|0)<(Jn|0),o=_t&1,nt=_t?(lt|0)<0?0:lt:Jn,(nt|0)<53?(wr=+iu(+ru(1,105-nt|0),s),_e=+ku(s,+ru(1,53-nt|0)),ft=wr,h=_e,_e=wr+(s-_e)):(ft=0,h=0,_e=s),tt=b+2&127;do if((tt|0)==(g|0))s=h;else{tt=e[ir+(tt<<2)>>2]|0;do if(tt>>>0>=5e8){if(tt>>>0>5e8){h=yt*.75+h;break}if((b+3&127|0)==(g|0)){h=yt*.5+h;break}else{h=yt*.75+h;break}}else{if(!(tt|0)&&(b+3&127|0)==(g|0))break;h=yt*.25+h}while(!1);if((53-nt|0)<=1){s=h;break}if(+ku(h,1)!=0){s=h;break}s=h+1}while(!1);h=_e+s-ft;do if((Kt&2147483647|0)>(-2-cn|0)){if(+Lr(+h)>=9007199254740992&&(o=_t&(nt|0)==(lt|0)?0:o,d=d+1|0,h=h*.5),(d+50|0)<=(Yn|0)&&!(s!=0&(o|0)!=0))break;e[(wo()|0)>>2]=34}while(!1);h=+Nu(h,d)}while(!1);break e}default:{e[kt>>2]|0&&(e[Lt>>2]=(e[Lt>>2]|0)+-1),e[(wo()|0)>>2]=22,Do(a,0),h=0;break e}}}}while(!1);if(($t|0)==23&&(o=(e[kt>>2]|0)==0,o||(e[Lt>>2]=(e[Lt>>2]|0)+-1),(_|0)!=0&d>>>0>3))do o||(e[Lt>>2]=(e[Lt>>2]|0)+-1),d=d+-1|0;while(d>>>0>3);h=+(sr|0)*Dt}while(!1);return dt=Hr,+h}function t0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;e:do if(d>>>0>36)e[(wo()|0)>>2]=22,o=0,h=0;else{_t=a+4|0,yt=a+100|0;do s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0;while(fo(s)|0);t:do switch(s|0){case 43:case 45:if(b=((s|0)==45)<<31>>31,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0){e[_t>>2]=s+1,s=It[s>>0]|0,ft=b;break t}else{s=_s(a)|0,ft=b;break t}default:ft=0}while(!1);b=(d|0)==0;do if((d&-17|0)==0&(s|0)==48){if(s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,(s|32|0)!=120)if(b){d=8,nt=46;break}else{nt=32;break}if(d=e[_t>>2]|0,d>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=d+1,s=It[d>>0]|0):s=_s(a)|0,(It[14643+(s+1)>>0]|0)>15){if(h=(e[yt>>2]|0)==0,h||(e[_t>>2]=(e[_t>>2]|0)+-1),!_){Do(a,0),o=0,h=0;break e}if(h){o=0,h=0;break e}e[_t>>2]=(e[_t>>2]|0)+-1,o=0,h=0;break e}else d=16,nt=46}else if(d=b?10:d,(It[14643+(s+1)>>0]|0)>>>0<d>>>0)nt=32;else{e[yt>>2]|0&&(e[_t>>2]=(e[_t>>2]|0)+-1),Do(a,0),e[(wo()|0)>>2]=22,o=0,h=0;break e}while(!1);if((nt|0)==32)if((d|0)==10){if(d=s+-48|0,d>>>0<10){for(s=0;;)if(b=(s*10|0)+d|0,d=e[_t>>2]|0,d>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=d+1,s=It[d>>0]|0):s=_s(a)|0,d=s+-48|0,d>>>0<10&b>>>0<429496729)s=b;else{d=b;break}b=0}else d=0,b=0;if(_=s+-48|0,_>>>0<10){for(;;){if(g=z2(d|0,b|0,10,0)|0,_e=dn,tt=((_|0)<0)<<31>>31,lt=~tt,_e>>>0>lt>>>0|(_e|0)==(lt|0)&g>>>0>~_>>>0){g=d;break}if(d=M0(g|0,_e|0,_|0,tt|0)|0,b=dn,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,_=s+-48|0,!(_>>>0<10&(b>>>0<429496729|(b|0)==429496729&d>>>0<2576980378))){g=d;break}}_>>>0>9?(s=g,d=ft):(d=10,nt=72)}else s=d,d=ft}else nt=46;t:do if((nt|0)==46){if(!(d+-1&d)){if(nt=ct[14900+((d*23|0)>>>5&7)>>0]|0,b=ct[14643+(s+1)>>0]|0,_=b&255,_>>>0<d>>>0){for(s=0;g=_|s<<nt,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,b=ct[14643+(s+1)>>0]|0,_=b&255,g>>>0<134217728&_>>>0<d>>>0;)s=g;_=0}else _=0,g=0;if(_e=V1(-1,-1,nt|0)|0,tt=dn,(b&255)>>>0>=d>>>0|(_>>>0>tt>>>0|(_|0)==(tt|0)&g>>>0>_e>>>0)){b=_,nt=72;break}else s=_;for(;;)if(g=E0(g|0,s|0,nt|0)|0,_=dn,g=b&255|g,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,b=ct[14643+(s+1)>>0]|0,(b&255)>>>0>=d>>>0|(_>>>0>tt>>>0|(_|0)==(tt|0)&g>>>0>_e>>>0)){b=_,nt=72;break t}else s=_}if(b=ct[14643+(s+1)>>0]|0,_=b&255,_>>>0<d>>>0){for(s=0;g=_+(Pn(s,d)|0)|0,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,b=ct[14643+(s+1)>>0]|0,_=b&255,g>>>0<119304647&_>>>0<d>>>0;)s=g;_=0}else g=0,_=0;if((b&255)>>>0<d>>>0)for(nt=v2(-1,-1,d|0,0)|0,lt=dn,tt=_;;){if(tt>>>0>lt>>>0|(tt|0)==(lt|0)&g>>>0>nt>>>0){b=tt,nt=72;break t}if(_=z2(g|0,tt|0,d|0,0)|0,_e=dn,b=b&255,_e>>>0>4294967295|(_e|0)==-1&_>>>0>~b>>>0){b=tt,nt=72;break t}if(g=M0(b|0,0,_|0,_e|0)|0,_=dn,s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,b=ct[14643+(s+1)>>0]|0,(b&255)>>>0>=d>>>0){b=_,nt=72;break}else tt=_}else b=_,nt=72}while(!1);if((nt|0)==72)if((It[14643+(s+1)>>0]|0)>>>0<d>>>0){do s=e[_t>>2]|0,s>>>0<(e[yt>>2]|0)>>>0?(e[_t>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0;while((It[14643+(s+1)>>0]|0)>>>0<d>>>0);e[(wo()|0)>>2]=34,b=o,s=h,d=(h&1|0)==0&!0?ft:0}else s=g,d=ft;if(e[yt>>2]|0&&(e[_t>>2]=(e[_t>>2]|0)+-1),!(b>>>0<o>>>0|(b|0)==(o|0)&s>>>0<h>>>0)){if(!((h&1|0)!=0|!1|(d|0)!=0)){e[(wo()|0)>>2]=34,h=M0(h|0,o|0,-1,-1)|0,o=dn;break}if(b>>>0>o>>>0|(b|0)==(o|0)&s>>>0>h>>>0){e[(wo()|0)>>2]=34;break}}h=((d|0)<0)<<31>>31,h=Ul(s^d|0,b^h|0,d|0,h|0)|0,o=dn}while(!1);return dn=o,h|0}function Do(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;e[a+104>>2]=d,_=e[a+4>>2]|0,h=e[a+8>>2]|0,o=h-_|0,e[a+108>>2]=o,(d|0)!=0&(o|0)>(d|0)?e[a+100>>2]=_+d:e[a+100>>2]=h}function _s(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0;return _=a+104|0,s=e[_>>2]|0,s|0&&(e[a+108>>2]|0)>=(s|0)?b=4:(d=O2(a)|0,(d|0)>=0?(o=e[_>>2]|0,_=a+8|0,o?(h=e[_>>2]|0,s=e[a+4>>2]|0,_=h,o=o-(e[a+108>>2]|0)+-1|0,(_-s|0)>(o|0)?e[a+100>>2]=s+o:b=9):(h=e[_>>2]|0,_=h,b=9),(b|0)==9&&(e[a+100>>2]=_),_=e[a+4>>2]|0,h&&(a=a+108|0,e[a>>2]=h+1-_+(e[a>>2]|0)),_=_+-1|0,(It[_>>0]|0|0)!=(d|0)&&(ct[_>>0]=d)):b=4),(b|0)==4&&(e[a+100>>2]=0,d=-1),d|0}function Po(a){return a=a|0,a>>>0>4294963200&&(e[(wo()|0)>>2]=0-a,a=-1),a|0}function e1(a,d){a=+a,d=+d;var _=0,h=0;return it[Tt>>3]=a,h=e[Tt>>2]|0,_=e[Tt+4>>2]|0,it[Tt>>3]=d,_=e[Tt+4>>2]&-2147483648|_&2147483647,e[Tt>>2]=h,e[Tt+4>>2]=_,+ +it[Tt>>3]}function iu(a,d){return a=+a,d=+d,+ +e1(a,d)}function nu(a,d){a=+a,d=+d;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;it[Tt>>3]=a,_=e[Tt>>2]|0,tt=e[Tt+4>>2]|0,it[Tt>>3]=d,nt=e[Tt>>2]|0,lt=e[Tt+4>>2]|0,h=V1(_|0,tt|0,52)|0,h=h&2047,g=V1(nt|0,lt|0,52)|0,g=g&2047,ft=tt&-2147483648,b=E0(nt|0,lt|0,1)|0,_e=dn;e:do if(!((b|0)==0&(_e|0)==0)&&(s=lt&2147483647,!(s>>>0>2146435072|(s|0)==2146435072&nt>>>0>0|(h|0)==2047))){if(o=E0(_|0,tt|0,1)|0,s=dn,!(s>>>0>_e>>>0|(s|0)==(_e|0)&o>>>0>b>>>0))return+((o|0)==(b|0)&(s|0)==(_e|0)?a*0:a);if(h)o=tt&1048575|1048576;else{if(h=E0(_|0,tt|0,12)|0,o=dn,(o|0)>-1|(o|0)==-1&h>>>0>4294967295){s=h,h=0;do h=h+-1|0,s=E0(s|0,o|0,1)|0,o=dn;while((o|0)>-1|(o|0)==-1&s>>>0>4294967295)}else h=0;_=E0(_|0,tt|0,1-h|0)|0,o=dn}if(g)tt=lt&1048575|1048576;else{if(s=E0(nt|0,lt|0,12)|0,b=dn,(b|0)>-1|(b|0)==-1&s>>>0>4294967295){g=0;do g=g+-1|0,s=E0(s|0,b|0,1)|0,b=dn;while((b|0)>-1|(b|0)==-1&s>>>0>4294967295)}else g=0;nt=E0(nt|0,lt|0,1-g|0)|0,tt=dn}_e=Ul(_|0,o|0,nt|0,tt|0)|0,b=dn,s=(b|0)>-1|(b|0)==-1&_e>>>0>4294967295;t:do if((h|0)>(g|0)){for(;;){if(s){if((_|0)==(nt|0)&(o|0)==(tt|0))break;_=_e,o=b}if(_=E0(_|0,o|0,1)|0,o=dn,h=h+-1|0,_e=Ul(_|0,o|0,nt|0,tt|0)|0,b=dn,s=(b|0)>-1|(b|0)==-1&_e>>>0>4294967295,(h|0)<=(g|0))break t}d=a*0;break e}while(!1);if(s)if((_|0)==(nt|0)&(o|0)==(tt|0)){d=a*0;break}else o=b,_=_e;if(o>>>0<1048576|(o|0)==1048576&_>>>0<0)do _=E0(_|0,o|0,1)|0,o=dn,h=h+-1|0;while(o>>>0<1048576|(o|0)==1048576&_>>>0<0);(h|0)>0?(lt=M0(_|0,o|0,0,-1048576)|0,_=dn,h=E0(h|0,0,52)|0,_=_|dn,h=lt|h):(h=V1(_|0,o|0,1-h|0)|0,_=dn),e[Tt>>2]=h,e[Tt+4>>2]=_|ft,d=+it[Tt>>3]}else yt=3;while(!1);return(yt|0)==3&&(d=a*d,d=d/d),+d}function ku(a,d){return a=+a,d=+d,+ +nu(a,d)}function ba(a,d){a=+a,d=d|0;var _=0,h=0,o=0;switch(it[Tt>>3]=a,_=e[Tt>>2]|0,h=e[Tt+4>>2]|0,o=V1(_|0,h|0,52)|0,o=o&2047,o|0){case 0:{a!=0?(a=+ba(a*18446744073709552e3,d),_=(e[d>>2]|0)+-64|0):_=0,e[d>>2]=_;break}case 2047:break;default:e[d>>2]=o+-1022,e[Tt>>2]=_,e[Tt+4>>2]=h&-2146435073|1071644672,a=+it[Tt>>3]}return+a}function _1(a,d){return a=+a,d=d|0,+ +ba(a,d)}function ru(a,d){a=+a,d=d|0;var _=0;return(d|0)>1023?(a=a*898846567431158e293,_=d+-1023|0,(_|0)>1023&&(_=d+-2046|0,_=(_|0)>1023?1023:_,a=a*898846567431158e293)):(d|0)<-1022?(a=a*22250738585072014e-324,_=d+1022|0,(_|0)<-1022&&(_=d+2044|0,_=(_|0)<-1022?-1022:_,a=a*22250738585072014e-324)):_=d,_=E0(_+1023|0,0,52)|0,d=dn,e[Tt>>2]=_,e[Tt+4>>2]=d,+(a*+it[Tt>>3])}function Nu(a,d){return a=+a,d=d|0,+ +ru(a,d)}function H1(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0;_e=dt,dt=dt+16|0,o=_e,b=h|0?h:2680,h=e[b>>2]|0;e:do if(!d)h?g=15:h=0;else if(s=a|0?a:o,!_)h=-2;else{if(h)o=_,g=9;else{if(h=ct[d>>0]|0,o=h&255,h<<24>>24>-1){e[s>>2]=o,h=h<<24>>24!=0&1;break}if(h=o+-194|0,h>>>0>50){g=15;break}h=e[2432+(h<<2)>>2]|0,o=_+-1|0,o&&(d=d+1|0,g=9)}t:do if((g|0)==9){if(a=ct[d>>0]|0,tt=(a&255)>>>3,(tt+-16|tt+(h>>26))>>>0>7){g=15;break e}for(;d=d+1|0,h=(a&255)+-128|h<<6,o=o+-1|0,!((h|0)>=0);){if(!o)break t;if(a=ct[d>>0]|0,(a&-64)<<24>>24!=-128){g=15;break e}}e[b>>2]=0,e[s>>2]=h,h=_-o|0;break e}while(!1);e[b>>2]=h,h=-2}while(!1);return(g|0)==15&&(e[b>>2]=0,e[(wo()|0)>>2]=84,h=-1),dt=_e,h|0}function D2(a){return a=a|0,a?a=(e[a>>2]|0)==0:a=1,a&1|0}function i2(a,d,_){a=a|0,d=d|0,_=_|0;do if(a){if(d>>>0<128){ct[a>>0]=d,a=1;break}if(d>>>0<2048){ct[a>>0]=d>>>6|192,ct[a+1>>0]=d&63|128,a=2;break}if(d>>>0<55296|(d&-8192|0)==57344){ct[a>>0]=d>>>12|224,ct[a+1>>0]=d>>>6&63|128,ct[a+2>>0]=d&63|128,a=3;break}if((d+-65536|0)>>>0<1048576){ct[a>>0]=d>>>18|240,ct[a+1>>0]=d>>>12&63|128,ct[a+2>>0]=d>>>6&63|128,ct[a+3>>0]=d&63|128,a=4;break}else{e[(wo()|0)>>2]=84,a=-1;break}}else a=1;while(!1);return a|0}function n2(a,d){return a=a|0,d=d|0,a?a=i2(a,d,0)|0:a=0,a|0}function yl(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0;if(lt=dt,dt=dt+112|0,nt=lt+40|0,_e=lt+24|0,g=lt+16|0,o=lt,tt=lt+52|0,h=ct[d>>0]|0,Hu(14909,h<<24>>24,4)|0)if(_=Qr(1144)|0,!_)_=0;else{s=_,b=s+112|0;do e[s>>2]=0,s=s+4|0;while((s|0)<(b|0));x1(d,43)|0||(e[_>>2]=h<<24>>24==114?8:4),x1(d,101)|0&&(e[o>>2]=a,e[o+4>>2]=2,e[o+8>>2]=1,rr(221,o|0)|0,h=ct[d>>0]|0),h<<24>>24==97?(e[g>>2]=a,e[g+4>>2]=3,h=rr(221,g|0)|0,h&1024||(e[_e>>2]=a,e[_e+4>>2]=4,e[_e+8>>2]=h|1024,rr(221,_e|0)|0),d=e[_>>2]|128,e[_>>2]=d):d=e[_>>2]|0,e[_+60>>2]=a,e[_+44>>2]=_+120,e[_+48>>2]=1024,h=_+75|0,ct[h>>0]=-1,!(d&8|0)&&(e[nt>>2]=a,e[nt+4>>2]=21505,e[nt+8>>2]=tt,(Mo(54,nt|0)|0)==0)&&(ct[h>>0]=10),e[_+32>>2]=14,e[_+36>>2]=4,e[_+40>>2]=5,e[_+12>>2]=2,e[598]|0||(e[_+76>>2]=-1),pr(2416),h=e[603]|0,e[_+56>>2]=h,h&&(e[h+52>>2]=_),e[603]=_,T0(2416)}else e[(wo()|0)>>2]=22,_=0;return dt=lt,_|0}function Vs(a){a=a|0;var d=0,_=0,h=0;return _=(x1(a,43)|0)==0,d=ct[a>>0]|0,_=_?d<<24>>24!=114&1:2,h=(x1(a,120)|0)==0,_=h?_:_|128,a=(x1(a,101)|0)==0,a=a?_:_|524288,a=d<<24>>24==114?a:a|64,a=d<<24>>24==119?a|512:a,(d<<24>>24==97?a|1024:a)|0}function wl(a){return a=a|0,0}function x0(a){a=a|0}function yv(a){a=a|0;var d=0,_=0;return d=dt,dt=dt+16|0,_=d,e[_>>2]=e[a+60>>2],a=Po(Ir(6,_|0)|0)|0,dt=d,a|0}function wv(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0;return tt=dt,dt=dt+48|0,s=tt+16|0,o=tt,h=tt+32|0,e[h>>2]=d,b=h+4|0,_e=a+48|0,nt=e[_e>>2]|0,e[b>>2]=_-((nt|0)!=0&1),g=a+44|0,e[h+8>>2]=e[g>>2],e[h+12>>2]=nt,e[597]|0?(o0(13,a|0),e[o>>2]=e[a+60>>2],e[o+4>>2]=h,e[o+8>>2]=2,h=Po(z0(145,o|0)|0)|0,rn(0)):(e[s>>2]=e[a+60>>2],e[s+4>>2]=h,e[s+8>>2]=2,h=Po(z0(145,s|0)|0)|0),(h|0)>=1?(b=e[b>>2]|0,h>>>0>b>>>0&&(s=e[g>>2]|0,o=a+4|0,e[o>>2]=s,e[a+8>>2]=s+(h-b),e[_e>>2]|0&&(e[o>>2]=s+1,ct[d+(_+-1)>>0]=ct[s>>0]|0),h=_)):(e[a>>2]=e[a>>2]|h&48^16,e[a+8>>2]=0,e[a+4>>2]=0),dt=tt,h|0}function Au(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0;return o=dt,dt=dt+32|0,s=o,h=o+20|0,e[s>>2]=e[a+60>>2],e[s+4>>2]=0,e[s+8>>2]=d,e[s+12>>2]=h,e[s+16>>2]=_,(Po(c0(140,s|0)|0)|0)<0?(e[h>>2]=-1,a=-1):a=e[h>>2]|0,dt=o,a|0}function P2(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;for(_t=dt,dt=dt+48|0,lt=_t+16|0,nt=_t,h=_t+32|0,ft=a+28|0,o=e[ft>>2]|0,e[h>>2]=o,yt=a+20|0,o=(e[yt>>2]|0)-o|0,e[h+4>>2]=o,e[h+8>>2]=d,e[h+12>>2]=_,_e=a+60|0,tt=a+44|0,d=2,o=o+_|0;;){if(e[597]|0?(o0(14,a|0),e[nt>>2]=e[_e>>2],e[nt+4>>2]=h,e[nt+8>>2]=d,b=Po(q0(146,nt|0)|0)|0,rn(0)):(e[lt>>2]=e[_e>>2],e[lt+4>>2]=h,e[lt+8>>2]=d,b=Po(q0(146,lt|0)|0)|0),(o|0)==(b|0)){o=6;break}if((b|0)<0){o=8;break}o=o-b|0,s=e[h+4>>2]|0,b>>>0<=s>>>0?(d|0)==2?(e[ft>>2]=(e[ft>>2]|0)+b,g=s,d=2):g=s:(g=e[tt>>2]|0,e[ft>>2]=g,e[yt>>2]=g,g=e[h+12>>2]|0,b=b-s|0,h=h+8|0,d=d+-1|0),e[h>>2]=(e[h>>2]|0)+b,e[h+4>>2]=g-b}return(o|0)==6?(lt=e[tt>>2]|0,e[a+16>>2]=lt+(e[a+48>>2]|0),a=lt,e[ft>>2]=a,e[yt>>2]=a):(o|0)==8&&(e[a+16>>2]=0,e[ft>>2]=0,e[yt>>2]=0,e[a>>2]=e[a>>2]|32,(d|0)==2?_=0:_=_-(e[h+4>>2]|0)|0),dt=_t,_|0}function d1(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;return o=dt,dt=dt+80|0,h=o,e[a+36>>2]=4,!(e[a>>2]&64|0)&&(e[h>>2]=e[a+60>>2],e[h+4>>2]=21505,e[h+8>>2]=o+12,(Mo(54,h|0)|0)!=0)&&(ct[a+75>>0]=-1),h=P2(a,d,_)|0,dt=o,h|0}function Fm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;return h=a+84|0,s=e[h>>2]|0,b=_+256|0,o=Hu(s,0,b)|0,o=o|0?o-s|0:b,_=o>>>0<_>>>0?o:_,B0(d|0,s|0,_|0)|0,e[a+4>>2]=s+_,d=s+o|0,e[a+8>>2]=d,e[h>>2]=d,_|0}function HA(a){a=a|0;var d=0,_=0;return d=a+74|0,_=ct[d>>0]|0,ct[d>>0]=_+255|_,d=a+20|0,_=a+44|0,(e[d>>2]|0)>>>0>(e[_>>2]|0)>>>0&&v1[e[a+36>>2]&15](a,0,0)|0,e[a+16>>2]=0,e[a+28>>2]=0,e[d>>2]=0,d=e[a>>2]|0,d&20?(d&4&&(e[a>>2]=d|32),d=-1):(d=e[_>>2]|0,e[a+8>>2]=d,e[a+4>>2]=d,d=0),d|0}function f1(a){a=a|0;var d=0,_=0;return d=a+74|0,_=ct[d>>0]|0,ct[d>>0]=_+255|_,d=e[a>>2]|0,d&8?(e[a>>2]=d|32,d=-1):(e[a+8>>2]=0,e[a+4>>2]=0,d=e[a+44>>2]|0,e[a+28>>2]=d,e[a+20>>2]=d,e[a+16>>2]=d+(e[a+48>>2]|0),d=0),d|0}function O2(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=_,!(e[a+8>>2]|0)&&HA(a)|0?d=-1:(v1[e[a+32>>2]&15](a,d,1)|0)==1?d=It[d>>0]|0:d=-1,dt=_,d|0}function r2(a){a=a|0;var d=0,_=0,h=0;return h=(e[a>>2]&1|0)!=0,h||(pr(2416),_=e[a+52>>2]|0,d=a+56|0,_&&(e[_+56>>2]=e[d>>2]),d=e[d>>2]|0,d&&(e[d+52>>2]=_),(e[603]|0)==(a|0)&&(e[603]=d),T0(2416)),d=mu(a)|0,d=Qp[e[a+12>>2]&31](a)|0|d,_=e[a+92>>2]|0,_&&xs(_),h||xs(a),d|0}function km(a){a=a|0;var d=0;return(e[a+76>>2]|0)>-1&&(d=(wl(a)|0)==0),a=(e[a>>2]|0)>>>5&1,a|0}function mu(a){a=a|0;var d=0,_=0;do if(a){if((e[a+76>>2]|0)<=-1){d=l2(a)|0;break}_=(wl(a)|0)==0,d=l2(a)|0,_||x0(a)}else{if(e[660]|0?d=mu(e[660]|0)|0:d=0,pr(2416),a=e[603]|0,a)do(e[a+76>>2]|0)>-1?_=wl(a)|0:_=0,(e[a+20>>2]|0)>>>0>(e[a+28>>2]|0)>>>0&&(d=l2(a)|0|d),_&&x0(a),a=e[a+56>>2]|0;while(a|0);T0(2416)}while(!1);return d|0}function G1(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;if((e[_+76>>2]|0)>-1?lt=wl(_)|0:lt=0,h=d+-1|0,(d|0)<2)ft=_+74|0,nt=ct[ft>>0]|0,ct[ft>>0]=nt+255|nt,lt&&x0(_),h?a=0:ct[a>>0]=0;else{e:do if(h){for(tt=_+4|0,nt=_+8|0,o=a;;){if(s=e[tt>>2]|0,yt=s,g=(e[nt>>2]|0)-yt|0,b=Hu(s,10,g)|0,_t=(b|0)==0,b=_t?g:1-yt+b|0,yt=b>>>0<h>>>0,b=yt?b:h,B0(o|0,s|0,b|0)|0,s=e[tt>>2]|0,g=s+b|0,e[tt>>2]=g,d=o+b|0,_e=h-b|0,!(_t&yt)){ft=18;break e}if(g>>>0<(e[nt>>2]|0)>>>0)b=b+1|0,e[tt>>2]=s+b,s=It[g>>0]|0;else{if(h=O2(_)|0,(h|0)<0)break;b=b+1|0,s=h}if(h=_e+-1|0,o=o+b|0,ct[d>>0]=s,!((h|0)!=0&(s&255|0)!=10)){d=o,ft=18;break e}}(d|0)!=(a|0)&&e[_>>2]&16|0?ft=18:a=0}else d=a,ft=18;while(!1);(ft|0)==18&&(a?ct[d>>0]=0:a=0),lt&&x0(_)}return a|0}function s2(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;return o=dt,dt=dt+32|0,h=o+16|0,_=o,Hu(14909,ct[d>>0]|0,4)|0?(s=Vs(d)|0|32768,e[_>>2]=a,e[_+4>>2]=s,e[_+8>>2]=438,_=Po(ts(5,_|0)|0)|0,(_|0)>=0?(a=yl(_,d)|0,a||(e[h>>2]=_,Ir(6,h|0)|0,a=0)):a=0):(e[(wo()|0)>>2]=22,a=0),dt=o,a|0}function F2(a,d){return a=a|0,d=d|0,(VA(a,Gu(a)|0,1,d)|0)+-1|0}function GA(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0;g=Pn(_,d)|0,(e[h+76>>2]|0)>-1?_e=wl(h)|0:_e=0,o=h+74|0,s=ct[o>>0]|0,ct[o>>0]=s+255|s,o=h+4|0,s=e[o>>2]|0,b=(e[h+8>>2]|0)-s|0,(b|0)>0?(b=b>>>0<g>>>0?b:g,B0(a|0,s|0,b|0)|0,e[o>>2]=s+b,a=a+b|0,o=g-b|0):o=g;e:do if(!o)tt=13;else{for(b=h+32|0,s=o;;){if(HA(h)|0){_=s;break}if(o=v1[e[b>>2]&15](h,a,s)|0,(o+1|0)>>>0<2){_=s;break}if((s|0)==(o|0)){tt=13;break e}else a=a+o|0,s=s-o|0}_e&&x0(h),_=((g-_|0)>>>0)/(d>>>0)|0}while(!1);return(tt|0)==13&&_e&&x0(h),_|0}function _p(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;return(_|0)==1&&(d=d-(e[a+8>>2]|0)+(e[a+4>>2]|0)|0),o=a+20|0,h=a+28|0,(e[o>>2]|0)>>>0>(e[h>>2]|0)>>>0&&(v1[e[a+36>>2]&15](a,0,0)|0,(e[o>>2]|0)==0)?d=-1:(e[a+16>>2]=0,e[h>>2]=0,e[o>>2]=0,(v1[e[a+40>>2]&15](a,d,_)|0)<0?d=-1:(e[a+8>>2]=0,e[a+4>>2]=0,e[a>>2]=e[a>>2]&-17,d=0)),d|0}function Nm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;return(e[a+76>>2]|0)>-1?(h=(wl(a)|0)==0,d=_p(a,d,_)|0,h||x0(a)):d=_p(a,d,_)|0,d|0}function xp(a,d,_){return a=a|0,d=d|0,_=_|0,Nm(a,d,_)|0}function QA(a){a=a|0;var d=0;return e[a>>2]&128?d=(e[a+20>>2]|0)>>>0>(e[a+28>>2]|0)>>>0?2:1:d=1,d=v1[e[a+40>>2]&15](a,0,d)|0,(d|0)>=0&&(d=d-(e[a+8>>2]|0)+(e[a+4>>2]|0)+(e[a+20>>2]|0)-(e[a+28>>2]|0)|0),d|0}function Um(a){a=a|0;var d=0;return(e[a+76>>2]|0)>-1&&(d=(wl(a)|0)==0),a=QA(a)|0,a|0}function Hm(a){return a=a|0,Um(a)|0}function b0(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;h=_+16|0,o=e[h>>2]|0,o?s=4:f1(_)|0?h=0:(o=e[h>>2]|0,s=4);e:do if((s|0)==4){if(b=_+20|0,s=e[b>>2]|0,(o-s|0)>>>0<d>>>0){h=v1[e[_+36>>2]&15](_,a,d)|0;break}t:do if((ct[_+75>>0]|0)>-1){for(h=d;;){if(!h){o=s,h=0;break t}if(o=h+-1|0,(ct[a+o>>0]|0)==10)break;h=o}if((v1[e[_+36>>2]&15](_,a,h)|0)>>>0<h>>>0)break e;d=d-h|0,a=a+h|0,o=e[b>>2]|0}else o=s,h=0;while(!1);B0(o|0,a|0,d|0)|0,e[b>>2]=(e[b>>2]|0)+d,h=h+d|0}while(!1);return h|0}function VA(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;return o=Pn(_,d)|0,(e[h+76>>2]|0)>-1?(s=(wl(h)|0)==0,a=b0(a,o,h)|0,s||x0(h)):a=b0(a,o,h)|0,(a|0)!=(o|0)&&(_=(a>>>0)/(d>>>0)|0),_|0}function s0(a){a=a|0;var d=0;(e[a+76>>2]|0)>-1?(d=(wl(a)|0)==0,_p(a,0,0)|0,e[a>>2]=e[a>>2]&-33,d||x0(a)):(_p(a,0,0)|0,e[a>>2]=e[a>>2]&-33)}function Wl(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;return h=dt,dt=dt+16|0,o=h,e[o>>2]=_,_=o2(a,d,o)|0,dt=h,_|0}function su(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0;g=dt,dt=dt+16|0,h=g,o=Qr(240)|0;do if(o){if(e[h>>2]=e[_>>2],h=Uu(o,240,d,h)|0,h>>>0<240){d=N2(o,h+1|0)|0,e[a>>2]=d|0?d:o;break}xs(o),(h|0)>=0&&(b=h+1|0,s=Qr(b)|0,e[a>>2]=s,(s|0)!=0)?h=Uu(s,b,d,_)|0:h=-1}else h=-1;while(!1);return dt=g,h|0}function zA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;Kt=dt,dt=dt+224|0,lt=Kt+80|0,_t=Kt+96|0,yt=Kt,ft=Kt+136|0,h=_t,o=h+40|0;do e[h>>2]=0,h=h+4|0;while((h|0)<(o|0));return e[lt>>2]=e[_>>2],(a0(0,d,lt,yt,_t)|0)<0?_=-1:((e[a+76>>2]|0)>-1?tt=wl(a)|0:tt=0,_=e[a>>2]|0,nt=_&32,(ct[a+74>>0]|0)<1&&(e[a>>2]=_&-33),_=a+48|0,e[_>>2]|0?h=a0(a,d,lt,yt,_t)|0:(o=a+44|0,s=e[o>>2]|0,e[o>>2]=ft,b=a+28|0,e[b>>2]=ft,g=a+20|0,e[g>>2]=ft,e[_>>2]=80,_e=a+16|0,e[_e>>2]=ft+80,h=a0(a,d,lt,yt,_t)|0,s&&(v1[e[a+36>>2]&15](a,0,0)|0,h=e[g>>2]|0?h:-1,e[o>>2]=s,e[_>>2]=0,e[_e>>2]=0,e[b>>2]=0,e[g>>2]=0)),_=e[a>>2]|0,e[a>>2]=_|nt,tt&&x0(a),_=_&32|0?-1:h),dt=Kt,_|0}function ou(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0;Kr=dt,dt=dt+304|0,Yn=Kr+16|0,sr=Kr+8|0,ir=Kr+33|0,dr=Kr,Pt=Kr+32|0,(e[a+76>>2]|0)>-1?Or=wl(a)|0:Or=0,h=ct[d>>0]|0;e:do if(h<<24>>24){Jn=a+4|0,Hr=a+100|0,cn=a+108|0,Ot=a+8|0,zt=ir+10|0,$t=ir+33|0,Yt=sr+4|0,kt=ir+46|0,Lt=ir+94|0,s=h,h=0,b=d,lt=0,o=0,d=0;t:for(;;){i:do if(fo(s&255)|0){for(;s=b+1|0,fo(It[s>>0]|0)|0;)b=s;Do(a,0);do s=e[Jn>>2]|0,s>>>0<(e[Hr>>2]|0)>>>0?(e[Jn>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0;while(fo(s)|0);s=e[Jn>>2]|0,e[Hr>>2]|0&&(s=s+-1|0,e[Jn>>2]=s),g=(e[cn>>2]|0)+lt+s-(e[Ot>>2]|0)|0}else{s=(ct[b>>0]|0)==37;s:do if(s){tt=b+1|0,g=ct[tt>>0]|0;n:do switch(g<<24>>24){case 37:break s;case 42:{Nt=0,g=b+2|0;break}default:{if(g=(g&255)+-48|0,g>>>0<10&&(ct[b+2>>0]|0)==36){for(e[Yn>>2]=e[_>>2];Nt=(e[Yn>>2]|0)+3&-4,s=e[Nt>>2]|0,e[Yn>>2]=Nt+4,g>>>0>1;)g=g+-1|0;Nt=s,g=b+3|0;break n}g=(e[_>>2]|0)+3&-4,Nt=e[g>>2]|0,e[_>>2]=g+4,g=tt}}while(!1);if(s=ct[g>>0]|0,b=s&255,(b+-48|0)>>>0<10)for(s=0;tt=(s*10|0)+-48+b|0,g=g+1|0,s=ct[g>>0]|0,b=s&255,!((b+-48|0)>>>0>=10);)s=tt;else tt=0;switch(s<<24>>24==109?(g=g+1|0,nt=ct[g>>0]|0,s=(Nt|0)!=0&1,o=0,d=0):(nt=s,s=0),b=g+1|0,nt&255|0){case 104:{Kt=(ct[b>>0]|0)==104,b=Kt?g+2|0:b,g=Kt?-2:-1;break}case 108:{Kt=(ct[b>>0]|0)==108,b=Kt?g+2|0:b,g=Kt?3:1;break}case 106:{g=3;break}case 116:case 122:{g=1;break}case 76:{g=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{b=g,g=0;break}default:{wr=152;break t}}switch(nt=It[b>>0]|0,ft=(nt&47|0)==3,nt=ft?nt|32:nt,ft=ft?1:g,nt|0){case 99:{Kt=lt,_t=(tt|0)<1?1:tt;break}case 91:{Kt=lt,_t=tt;break}case 110:{if(!Nt){g=lt;break i}switch(ft|0){case-2:{ct[Nt>>0]=lt,g=lt;break i}case-1:{st[Nt>>1]=lt,g=lt;break i}case 0:{e[Nt>>2]=lt,g=lt;break i}case 1:{e[Nt>>2]=lt,g=lt;break i}case 3:{g=Nt,e[g>>2]=lt,e[g+4>>2]=((lt|0)<0)<<31>>31,g=lt;break i}default:{g=lt;break i}}}default:{Do(a,0);do g=e[Jn>>2]|0,g>>>0<(e[Hr>>2]|0)>>>0?(e[Jn>>2]=g+1,g=It[g>>0]|0):g=_s(a)|0;while(fo(g)|0);g=e[Jn>>2]|0,e[Hr>>2]|0&&(g=g+-1|0,e[Jn>>2]=g),Kt=(e[cn>>2]|0)+lt+g-(e[Ot>>2]|0)|0,_t=tt}}if(Do(a,_t),g=e[Jn>>2]|0,tt=e[Hr>>2]|0,g>>>0<tt>>>0)e[Jn>>2]=g+1;else{if((_s(a)|0)<0){wr=152;break t}tt=e[Hr>>2]|0}tt&&(e[Jn>>2]=(e[Jn>>2]|0)+-1);n:do switch(nt|0){case 91:case 99:case 115:{yt=(nt|0)==99;r:do if((nt&239|0)==99)Er(ir|0,-1,257)|0,ct[ir>>0]=0,(nt|0)==115&&(ct[$t>>0]=0,ct[zt>>0]=0,ct[zt+1>>0]=0,ct[zt+2>>0]=0,ct[zt+3>>0]=0,ct[zt+4>>0]=0);else{switch(Br=b+1|0,lt=(ct[Br>>0]|0)==94,g=lt&1,nt=lt?Br:b,b=lt?b+2|0:Br,Er(ir|0,lt&1|0,257)|0,ct[ir>>0]=0,ct[b>>0]|0){case 45:{lt=(g^1)&255,ct[kt>>0]=lt,b=nt+2|0;break}case 93:{lt=(g^1)&255,ct[Lt>>0]=lt,b=nt+2|0;break}default:lt=(g^1)&255}for(;;){g=ct[b>>0]|0;o:do switch(g<<24>>24){case 0:{wr=152;break t}case 93:break r;case 45:{switch(nt=b+1|0,g=ct[nt>>0]|0,g<<24>>24){case 93:case 0:{g=45;break o}default:}if(b=ct[b+-1>>0]|0,(b&255)<(g&255)){b=b&255;do b=b+1|0,ct[ir+b>>0]=lt,g=ct[nt>>0]|0;while((b|0)<(g&255|0));b=nt}else b=nt;break}default:}while(!1);ct[ir+((g&255)+1)>>0]=lt,b=b+1|0}}while(!1);nt=yt?_t+1|0:31,lt=(ft|0)==1,ft=(s|0)!=0;r:do if(lt){if(ft){if(d=Qr(nt<<2)|0,!d){o=0,wr=152;break t}}else d=Nt;e[sr>>2]=0,e[Yt>>2]=0,o=0;o:for(;;){tt=(d|0)==0;do{a:for(;;){if(g=e[Jn>>2]|0,g>>>0<(e[Hr>>2]|0)>>>0?(e[Jn>>2]=g+1,g=It[g>>0]|0):g=_s(a)|0,!(ct[ir+(g+1)>>0]|0))break o;switch(ct[Pt>>0]=g,H1(dr,Pt,1,sr)|0){case-1:{o=0,wr=152;break t}case-2:break;default:break a}}tt||(e[d+(o<<2)>>2]=e[dr>>2],o=o+1|0)}while(!(ft&(o|0)==(nt|0)));if(o=nt<<1|1,g=N2(d,o<<2)|0,!g){o=0,wr=152;break t}Br=nt,nt=o,d=g,o=Br}if(D2(sr)|0)tt=o,o=0;else{o=0,wr=152;break t}}else{if(ft){if(o=Qr(nt)|0,o)g=0;else{o=0,d=0,wr=152;break t}for(;;){do{if(d=e[Jn>>2]|0,d>>>0<(e[Hr>>2]|0)>>>0?(e[Jn>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,!(ct[ir+(d+1)>>0]|0)){tt=g,d=0;break r}ct[o+g>>0]=d,g=g+1|0}while((g|0)!=(nt|0));if(d=nt<<1|1,g=N2(o,d)|0,g)Br=nt,nt=d,o=g,g=Br;else{d=0,wr=152;break t}}}if(Nt)for(o=0;;){if(d=e[Jn>>2]|0,d>>>0<tt>>>0?(e[Jn>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,!(ct[ir+(d+1)>>0]|0)){tt=o,o=Nt,d=0;break r}ct[Nt+o>>0]=d,tt=e[Hr>>2]|0,o=o+1|0}else for(o=tt;;){if(d=e[Jn>>2]|0,d>>>0<o>>>0?(e[Jn>>2]=d+1,d=It[d>>0]|0):d=_s(a)|0,!(ct[ir+(d+1)>>0]|0)){tt=0,o=0,d=0;break r}o=e[Hr>>2]|0}}while(!1);if(g=e[Jn>>2]|0,e[Hr>>2]|0&&(g=g+-1|0,e[Jn>>2]=g),g=g-(e[Ot>>2]|0)+(e[cn>>2]|0)|0,!g||!((g|0)==(_t|0)|yt^1))break t;do if(ft)if(lt){e[Nt>>2]=d;break}else{e[Nt>>2]=o;break}while(!1);if(!yt){if(d&&(e[d+(tt<<2)>>2]=0),!o){o=0;break n}ct[o+tt>>0]=0}break}case 120:case 88:case 112:{g=16,wr=134;break}case 111:{g=8,wr=134;break}case 117:case 100:{g=10,wr=134;break}case 105:{g=0,wr=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{if(_e=+Il(a,ft,0),(e[cn>>2]|0)==((e[Ot>>2]|0)-(e[Jn>>2]|0)|0))break t;if(Nt)switch(ft|0){case 0:{vt[Nt>>2]=_e;break n}case 1:{it[Nt>>3]=_e;break n}case 2:{it[Nt>>3]=_e;break n}default:break n}break}default:}while(!1);n:do if((wr|0)==134){if(wr=0,g=t0(a,g,0,-1,-1)|0,(e[cn>>2]|0)==((e[Ot>>2]|0)-(e[Jn>>2]|0)|0))break t;if((Nt|0)!=0&(nt|0)==112){e[Nt>>2]=g;break}if(Nt)switch(ft|0){case-2:{ct[Nt>>0]=g;break n}case-1:{st[Nt>>1]=g;break n}case 0:{e[Nt>>2]=g;break n}case 1:{e[Nt>>2]=g;break n}case 3:{Br=Nt,e[Br>>2]=g,e[Br+4>>2]=dn;break n}default:break n}}while(!1);h=((Nt|0)!=0&1)+h|0,g=(e[cn>>2]|0)+Kt+(e[Jn>>2]|0)-(e[Ot>>2]|0)|0;break i}while(!1);if(b=b+(s&1)|0,Do(a,0),s=e[Jn>>2]|0,s>>>0<(e[Hr>>2]|0)>>>0?(e[Jn>>2]=s+1,s=It[s>>0]|0):s=_s(a)|0,(s|0)!=(It[b>>0]|0)){wr=21;break t}g=lt+1|0}while(!1);if(b=b+1|0,s=ct[b>>0]|0,s<<24>>24)lt=g;else break e}if((wr|0)==21){if(e[Hr>>2]|0&&(e[Jn>>2]=(e[Jn>>2]|0)+-1),(h|0)!=0|(s|0)>-1)break;h=0,wr=153}else(wr|0)==152&&(h||(h=s,wr=153));(wr|0)==153&&(s=h,h=-1),s&&(xs(o),xs(d))}else h=0;while(!1);return Or&&x0(a),dt=Kr,h|0}function Uu(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0;nt=dt,dt=dt+128|0,o=nt+112|0,tt=nt,s=tt,b=2684,g=s+112|0;do e[s>>2]=e[b>>2],s=s+4|0,b=b+4|0;while((s|0)<(g|0));return(d+-1|0)>>>0>2147483646?d?(e[(wo()|0)>>2]=75,d=-1):(d=1,_e=4):(o=a,_e=4),(_e|0)==4&&(_e=-2-o|0,_e=d>>>0>_e>>>0?_e:d,e[tt+48>>2]=_e,a=tt+20|0,e[a>>2]=o,e[tt+44>>2]=o,d=o+_e|0,o=tt+16|0,e[o>>2]=d,e[tt+28>>2]=d,d=zA(tt,_,h)|0,_e&&(_=e[a>>2]|0,ct[_+(((_|0)==(e[o>>2]|0))<<31>>31)>>0]=0)),dt=nt,d|0}function o2(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;s=dt,dt=dt+112|0,h=s,o=h,b=o+112|0;do e[o>>2]=0,o=o+4|0;while((o|0)<(b|0));return e[h+32>>2]=15,e[h+44>>2]=a,e[h+76>>2]=-1,e[h+84>>2]=a,b=ou(h,d,_)|0,dt=s,b|0}function Gm(a){a=a|0;for(var d=0,_=0,h=0,o=0;d=a+1|0,fo(ct[a>>0]|0)|0;)a=d;switch(_=ct[a>>0]|0,_<<24>>24|0){case 45:{h=1,o=5;break}case 43:{h=0,o=5;break}default:h=0}if((o|0)==5&&(a=d,_=ct[d>>0]|0),d=(_<<24>>24)+-48|0,d>>>0<10){_=a,a=0;do _=_+1|0,a=(a*10|0)-d|0,d=(ct[_>>0]|0)+-48|0;while(d>>>0<10)}else a=0;return(h|0?a:0-a|0)|0}function WA(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;if(Kt=dt,dt=dt+208|0,ft=Kt+8|0,yt=Kt,o=Pn(_,d)|0,lt=yt,e[lt>>2]=1,e[lt+4>>2]=0,o){for(g=o-_|0,e[ft+4>>2]=_,e[ft>>2]=_,s=_,d=_,b=2;d=d+_+s|0,e[ft+(b<<2)>>2]=d,d>>>0<o>>>0;)lt=s,s=d,b=b+1|0,d=lt;if(lt=0-_|0,_e=a+g|0,nt=yt+4|0,(g|0)>0)for(g=_e,o=1,b=1;;){do if((o&3|0)==3)YA(a,_,h,b,ft),tt=e[nt>>2]|0,d=tt<<30|(e[yt>>2]|0)>>>2,e[yt>>2]=d,e[nt>>2]=tt>>>2,b=b+2|0;else{if(d=b+-1|0,(e[ft+(d<<2)>>2]|0)>>>0<(g-a|0)>>>0?YA(a,_,h,b,ft):bp(a,_,h,yt,b,0,ft),(b|0)==1){d=e[yt>>2]|0,e[nt>>2]=d>>>31|e[nt>>2]<<1,d=d<<1,e[yt>>2]=d,b=0;break}d>>>0>31?(o=e[yt>>2]|0,e[nt>>2]=o,e[yt>>2]=0,d=b+-33|0,s=0):(o=e[nt>>2]|0,s=e[yt>>2]|0),e[nt>>2]=s>>>(32-d|0)|o<<d,d=s<<d,e[yt>>2]=d,b=1}while(!1);if(o=d|1,e[yt>>2]=o,d=a+_|0,d>>>0>=_e>>>0){o=d;break}else a=d}else o=a,b=1;if(bp(o,_,h,yt,b,0,ft),tt=yt+4|0,d=e[yt>>2]|0,!((b|0)==1&(d|0)==1&(e[tt>>2]|0)==0))for(s=o;;){if((b|0)<2){o=d+-1|0;do if(o){if(o&1)_t=24;else{g=o,o=0;do o=o+1|0,g=g>>>1;while(!(g&1|0));o||(_t=24)}if((_t|0)==24){if(_t=0,_e=e[nt>>2]|0,!_e){o=64,_t=30;break}if(!(_e&1))g=_e,o=0;else{a=0,g=_e,o=0;break}for(;;)if(a=o+1|0,g=g>>>1,g&1){g=a;break}else o=a;if(g)o=o+33|0;else{a=0,g=_e,o=0;break}}o>>>0>31?_t=30:(a=o,g=e[nt>>2]|0)}else o=32,_t=30;while(!1);(_t|0)==30&&(_t=0,d=e[nt>>2]|0,e[yt>>2]=d,e[nt>>2]=0,a=o+-32|0,g=0),e[yt>>2]=g<<32-a|d>>>a,e[nt>>2]=g>>>a,s=s+lt|0,o=o+b|0}else a=d>>>30,_e=a|e[nt>>2]<<2,o=b+-2|0,e[yt>>2]=(d<<1&2147483646|a<<31)^3,e[nt>>2]=_e>>>1,bp(s+(0-((e[ft+(o<<2)>>2]|0)+_))|0,_,h,yt,b+-1|0,1,ft),_e=e[yt>>2]|0,e[nt>>2]=_e>>>31|e[nt>>2]<<1,e[yt>>2]=_e<<1|1,s=s+lt|0,bp(s,_,h,yt,o,1,ft);if(d=e[yt>>2]|0,(o|0)==1&(d|0)==1&(e[tt>>2]|0)==0)break;b=o}}dt=Kt}function Hu(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;s=d&255,h=(_|0)!=0;e:do if(h&(a&3|0)!=0)for(o=d&255;;){if((ct[a>>0]|0)==o<<24>>24){b=6;break e}if(a=a+1|0,_=_+-1|0,h=(_|0)!=0,!(h&(a&3|0)!=0)){b=5;break}}else b=5;while(!1);(b|0)==5&&(h?b=6:_=0);e:do if((b|0)==6&&(o=d&255,(ct[a>>0]|0)!=o<<24>>24)){h=Pn(s,16843009)|0;t:do if(_>>>0>3){for(;s=e[a>>2]^h,!((s&-2139062144^-2139062144)&s+-16843009);)if(a=a+4|0,_=_+-4|0,_>>>0<=3){b=11;break t}}else b=11;while(!1);if((b|0)==11&&!_){_=0;break}for(;;){if((ct[a>>0]|0)==o<<24>>24)break e;if(a=a+1|0,_=_+-1|0,!_){_=0;break}}}while(!1);return(_|0?a:0)|0}function KA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;h=d&255;do{if(!_){d=0;break}_=_+-1|0,d=a+_|0}while((ct[d>>0]|0)!=h<<24>>24);return d|0}function p1(a,d){a=a|0,d=d|0;var _=0,h=0;_=d;e:do if((_^a)&3)h=8;else{if(_&3)do{if(_=ct[d>>0]|0,ct[a>>0]=_,!(_<<24>>24))break e;d=d+1|0,a=a+1|0}while(d&3|0);if(_=e[d>>2]|0,!((_&-2139062144^-2139062144)&_+-16843009))for(h=a;d=d+4|0,a=h+4|0,e[h>>2]=_,_=e[d>>2]|0,!((_&-2139062144^-2139062144)&_+-16843009);)h=a;h=8}while(!1);if((h|0)==8&&(h=ct[d>>0]|0,ct[a>>0]=h,h<<24>>24))do d=d+1|0,a=a+1|0,h=ct[d>>0]|0,ct[a>>0]=h;while(h<<24>>24);return a|0}function Qm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0;o=d;do if((o^a)&3)s=11;else{h=(_|0)!=0;e:do if(h&(o&3|0)!=0)for(;;){if(o=ct[d>>0]|0,ct[a>>0]=o,!(o<<24>>24))break e;if(_=_+-1|0,d=d+1|0,a=a+1|0,h=(_|0)!=0,!(h&(d&3|0)!=0)){s=5;break}}else s=5;while(!1);if((s|0)==5&&!h){_=0;break}if(ct[d>>0]|0){e:do if(_>>>0>3)do{if(h=e[d>>2]|0,(h&-2139062144^-2139062144)&h+-16843009)break e;e[a>>2]=h,_=_+-4|0,d=d+4|0,a=a+4|0}while(_>>>0>3);while(!1);s=11}}while(!1);e:do if((s|0)==11)if(!_)_=0;else for(;;){if(s=ct[d>>0]|0,ct[a>>0]=s,!(s<<24>>24))break e;if(_=_+-1|0,a=a+1|0,_)d=d+1|0;else{_=0;break}}while(!1);return Er(a|0,0,_|0)|0,a|0}function x1(a,d){return a=a|0,d=d|0,a=k2(a,d)|0,((ct[a>>0]|0)==(d&255)<<24>>24?a:0)|0}function k2(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;h=d&255;e:do if(!h)a=a+(Gu(a)|0)|0;else{if(a&3){_=d&255;do{if(o=ct[a>>0]|0,!(o<<24>>24)||o<<24>>24==_<<24>>24)break e;a=a+1|0}while(a&3|0)}h=Pn(h,16843009)|0,_=e[a>>2]|0;t:do if(!((_&-2139062144^-2139062144)&_+-16843009))do{if(o=_^h,(o&-2139062144^-2139062144)&o+-16843009)break t;a=a+4|0,_=e[a>>2]|0}while(!((_&-2139062144^-2139062144)&_+-16843009|0));while(!1);for(_=d&255;o=ct[a>>0]|0,!(!(o<<24>>24)||o<<24>>24==_<<24>>24);)a=a+1|0}while(!1);return a|0}function XA(a,d){return a=a|0,d=d|0,p1(a,d)|0,a|0}function Os(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;if(o=dt,dt=dt+32|0,h=o,_=ct[d>>0]|0,_<<24>>24&&ct[d+1>>0]|0){e[h>>2]=0,e[h+4>>2]=0,e[h+8>>2]=0,e[h+12>>2]=0,e[h+16>>2]=0,e[h+20>>2]=0,e[h+24>>2]=0,e[h+28>>2]=0;do s=h+(((_&255)>>>5&255)<<2)|0,e[s>>2]=e[s>>2]|1<<(_&31),d=d+1|0,_=ct[d>>0]|0;while(_<<24>>24);d=ct[a>>0]|0;e:do if(!(d<<24>>24))_=a;else{_=a;do{if(e[h+(((d&255)>>>5&255)<<2)>>2]&1<<(d&31))break e;_=_+1|0,d=ct[_>>0]|0}while(d<<24>>24)}while(!1);_=_-a|0}else _=(k2(a,_<<24>>24)|0)-a|0;return dt=o,_|0}function Nl(a){a=a|0;var d=0,_=0;return _=(Gu(a)|0)+1|0,d=Qr(_)|0,d?B0(d|0,a|0,_|0)|0:d=0,d|0}function Gu(a){a=a|0;var d=0,_=0,h=0;h=a;e:do if(!(h&3))_=4;else for(d=a,a=h;;){if(!(ct[d>>0]|0))break e;if(d=d+1|0,a=d,!(a&3)){a=d,_=4;break}}while(!1);if((_|0)==4){for(;d=e[a>>2]|0,!((d&-2139062144^-2139062144)&d+-16843009);)a=a+4|0;if((d&255)<<24>>24)do a=a+1|0;while(ct[a>>0]|0)}return a-h|0}function Kl(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0;h=a+(Gu(a)|0)|0;e:do if(_)for(;;){if(o=ct[d>>0]|0,!(o<<24>>24))break e;if(_=_+-1|0,s=h+1|0,ct[h>>0]=o,_)d=d+1|0,h=s;else{h=s;break}}while(!1);return ct[h>>0]=0,a|0}function vu(a,d,_){return a=a|0,d=d|0,_=_|0,Qm(a,d,_)|0,a|0}function au(a,d){return a=a|0,d=d|0,KA(a,d,(Gu(a)|0)+1|0)|0}function Cv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;s=dt,dt=dt+32|0,o=s,e[o>>2]=0,e[o+4>>2]=0,e[o+8>>2]=0,e[o+12>>2]=0,e[o+16>>2]=0,e[o+20>>2]=0,e[o+24>>2]=0,e[o+28>>2]=0,h=ct[d>>0]|0;do if(!(h<<24>>24))d=0;else{if(ct[d+1>>0]|0)_=d,d=h;else{for(d=a;(ct[d>>0]|0)==h<<24>>24;)d=d+1|0;d=d-a|0;break}do h=o+(((d&255)>>>5&255)<<2)|0,e[h>>2]=e[h>>2]|1<<(d&31),_=_+1|0,d=ct[_>>0]|0;while(d<<24>>24);_=ct[a>>0]|0;e:do if(!(_<<24>>24))d=a;else{d=a;do{if(!(e[o+(((_&255)>>>5&255)<<2)>>2]&1<<(_&31)))break e;d=d+1|0,_=ct[d>>0]|0}while(_<<24>>24)}while(!1);d=d-a|0}while(!1);return dt=s,d|0}function t1(a,d){a=a|0,d=d|0;var _=0,h=0;a?(h=a,_=3):(a=e[699]|0,a?(h=a,_=3):a=0);do if((_|0)==3){if(_=Cv(h,d)|0,a=h+_|0,!(ct[a>>0]|0)){e[699]=0,a=0;break}if(_=(Os(a,d)|0)+_|0,d=h+_|0,e[699]=d,ct[d>>0]|0){e[699]=h+(_+1),ct[d>>0]=0;break}else{e[699]=0;break}}while(!1);return a|0}function a2(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0;switch(b=a+4|0,_=e[b>>2]|0,g=a+100|0,_>>>0<(e[g>>2]|0)>>>0?(e[b>>2]=_+1,_=It[_>>0]|0):_=_s(a)|0,_|0){case 43:case 45:{h=(_|0)==45&1,_=e[b>>2]|0,_>>>0<(e[g>>2]|0)>>>0?(e[b>>2]=_+1,_=It[_>>0]|0):_=_s(a)|0,(d|0)!=0&(_+-48|0)>>>0>9&&e[g>>2]|0&&(e[b>>2]=(e[b>>2]|0)+-1),s=h;break}default:s=0}if((_+-48|0)>>>0>9)e[g>>2]|0?(e[b>>2]=(e[b>>2]|0)+-1,h=-2147483648,_=0):(h=-2147483648,_=0);else{h=0;do h=_+-48+(h*10|0)|0,_=e[b>>2]|0,_>>>0<(e[g>>2]|0)>>>0?(e[b>>2]=_+1,_=It[_>>0]|0):_=_s(a)|0;while((_+-48|0)>>>0<10&(h|0)<214748364);if(d=((h|0)<0)<<31>>31,(_+-48|0)>>>0<10){do d=z2(h|0,d|0,10,0)|0,h=dn,_=M0(_|0,((_|0)<0)<<31>>31|0,-48,-1)|0,h=M0(_|0,dn|0,d|0,h|0)|0,d=dn,_=e[b>>2]|0,_>>>0<(e[g>>2]|0)>>>0?(e[b>>2]=_+1,_=It[_>>0]|0):_=_s(a)|0;while((_+-48|0)>>>0<10&((d|0)<21474836|(d|0)==21474836&h>>>0<2061584302));o=h}else o=h;if((_+-48|0)>>>0<10)do _=e[b>>2]|0,_>>>0<(e[g>>2]|0)>>>0?(e[b>>2]=_+1,_=It[_>>0]|0):_=_s(a)|0;while((_+-48|0)>>>0<10);e[g>>2]|0&&(e[b>>2]=(e[b>>2]|0)+-1),a=(s|0)!=0,_=Ul(0,0,o|0,d|0)|0,h=a?dn:d,_=a?_:o}return dn=h,_|0}function _v(a){a=a|0,e[a+68>>2]|0||x0(a)}function $a(a){a=a|0,e[a+68>>2]|0||x0(a)}function l2(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0;return d=a+20|0,s=a+28|0,(e[d>>2]|0)>>>0>(e[s>>2]|0)>>>0&&(v1[e[a+36>>2]&15](a,0,0)|0,(e[d>>2]|0)==0)?d=-1:(b=a+4|0,_=e[b>>2]|0,h=a+8|0,o=e[h>>2]|0,_>>>0<o>>>0&&v1[e[a+40>>2]&15](a,_-o|0,1)|0,e[a+16>>2]=0,e[s>>2]=0,e[d>>2]=0,e[h>>2]=0,e[b>>2]=0,d=0),d|0}function a0(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0,Ko=0,Ro=0,Dr=0,Zr=0,us=0,Oo=0,Xs=0,S1=0,a1=0,zp=0,Wp=0,W1=0;W1=dt,dt=dt+624|0,Xs=W1+24|0,a1=W1+16|0,S1=W1+588|0,Ro=W1+576|0,Oo=W1,ds=W1+536|0,Wp=W1+8|0,zp=W1+528|0,Hr=(a|0)!=0,wr=ds+40|0,Ps=wr,ds=ds+39|0,mo=Wp+4|0,Ko=Ro+12|0,Ro=Ro+11|0,Dr=S1,Zr=Ko,us=Zr-Dr|0,Or=-2-Dr|0,Kr=Zr+2|0,Br=Xs+288|0,Qn=S1+9|0,gr=Qn,Kn=S1+8|0,s=0,Kt=d,b=0,d=0;e:for(;;){do if((s|0)>-1)if((b|0)>(2147483647-s|0)){e[(wo()|0)>>2]=75,s=-1;break}else{s=b+s|0;break}while(!1);if(b=ct[Kt>>0]|0,b<<24>>24)g=Kt;else{Jn=245;break}t:for(;;){switch(b<<24>>24){case 37:{b=g,Jn=9;break t}case 0:{b=g;break t}default:}dr=g+1|0,b=ct[dr>>0]|0,g=dr}t:do if((Jn|0)==9)for(;;){if(Jn=0,(ct[b+1>>0]|0)!=37)break t;if(g=g+1|0,b=b+2|0,(ct[b>>0]|0)==37)Jn=9;else break}while(!1);if(Pt=g-Kt|0,Hr&&!(e[a>>2]&32|0)&&b0(Kt,Pt,a)|0,(g|0)!=(Kt|0)){Kt=b,b=Pt;continue}nt=b+1|0,g=ct[nt>>0]|0,_e=(g<<24>>24)+-48|0,_e>>>0<10?(dr=(ct[b+2>>0]|0)==36,nt=dr?b+3|0:nt,g=ct[nt>>0]|0,yt=dr?_e:-1,d=dr?1:d):yt=-1,b=g<<24>>24;t:do if((b&-32|0)==32)for(_e=0;;){if(!(1<<b+-32&75913)){lt=_e,b=nt;break t}if(_e=1<<(g<<24>>24)+-32|_e,nt=nt+1|0,g=ct[nt>>0]|0,b=g<<24>>24,(b&-32|0)!=32){lt=_e,b=nt;break}}else lt=0,b=nt;while(!1);do if(g<<24>>24==42){if(_e=b+1|0,g=(ct[_e>>0]|0)+-48|0,g>>>0<10&&(ct[b+2>>0]|0)==36)e[o+(g<<2)>>2]=10,d=1,b=b+3|0,g=e[h+((ct[_e>>0]|0)+-48<<3)>>2]|0;else{if(d){s=-1;break e}if(!Hr){Nt=lt,b=_e,d=0,dr=0;break}d=(e[_>>2]|0)+3&-4,g=e[d>>2]|0,e[_>>2]=d+4,d=0,b=_e}(g|0)<0?(Nt=lt|8192,dr=0-g|0):(Nt=lt,dr=g)}else if(_e=(g<<24>>24)+-48|0,_e>>>0<10){g=0;do g=(g*10|0)+_e|0,b=b+1|0,_e=(ct[b>>0]|0)+-48|0;while(_e>>>0<10);if((g|0)<0){s=-1;break e}else Nt=lt,dr=g}else Nt=lt,dr=0;while(!1);t:do if((ct[b>>0]|0)==46){if(_e=b+1|0,g=ct[_e>>0]|0,g<<24>>24!=42){if(nt=(g<<24>>24)+-48|0,nt>>>0<10)b=_e,g=0;else{b=_e,nt=0;break}for(;;)if(g=(g*10|0)+nt|0,b=b+1|0,nt=(ct[b>>0]|0)+-48|0,nt>>>0>=10){nt=g;break t}}if(_e=b+2|0,g=(ct[_e>>0]|0)+-48|0,g>>>0<10&&(ct[b+3>>0]|0)==36){e[o+(g<<2)>>2]=10,b=b+4|0,nt=e[h+((ct[_e>>0]|0)+-48<<3)>>2]|0;break}if(d){s=-1;break e}Hr?(b=(e[_>>2]|0)+3&-4,nt=e[b>>2]|0,e[_>>2]=b+4,b=_e):(b=_e,nt=0)}else nt=-1;while(!1);for(ft=0;;){if(g=(ct[b>>0]|0)+-65|0,g>>>0>57){s=-1;break e}if(_e=b+1|0,g=ct[15953+(ft*58|0)+g>>0]|0,lt=g&255,(lt+-1|0)>>>0<8)b=_e,ft=lt;else{sr=_e;break}}if(!(g<<24>>24)){s=-1;break}_e=(yt|0)>-1;do if(g<<24>>24==19)if(_e){s=-1;break e}else Jn=52;else{if(_e){e[o+(yt<<2)>>2]=lt,Yn=h+(yt<<3)|0,ir=e[Yn+4>>2]|0,Jn=Oo,e[Jn>>2]=e[Yn>>2],e[Jn+4>>2]=ir,Jn=52;break}if(!Hr){s=0;break e}zm(Oo,lt,_)}while(!1);if((Jn|0)==52&&(Jn=0,!Hr)){Kt=sr,b=Pt;continue}yt=ct[b>>0]|0,yt=(ft|0)!=0&(yt&15|0)==3?yt&-33:yt,_e=Nt&-65537,ir=Nt&8192|0?_e:Nt;t:do switch(yt|0){case 110:switch(ft|0){case 0:{e[e[Oo>>2]>>2]=s,Kt=sr,b=Pt;continue e}case 1:{e[e[Oo>>2]>>2]=s,Kt=sr,b=Pt;continue e}case 2:{Kt=e[Oo>>2]|0,e[Kt>>2]=s,e[Kt+4>>2]=((s|0)<0)<<31>>31,Kt=sr,b=Pt;continue e}case 3:{st[e[Oo>>2]>>1]=s,Kt=sr,b=Pt;continue e}case 4:{ct[e[Oo>>2]>>0]=s,Kt=sr,b=Pt;continue e}case 6:{e[e[Oo>>2]>>2]=s,Kt=sr,b=Pt;continue e}case 7:{Kt=e[Oo>>2]|0,e[Kt>>2]=s,e[Kt+4>>2]=((s|0)<0)<<31>>31,Kt=sr,b=Pt;continue e}default:{Kt=sr,b=Pt;continue e}}case 112:{ft=ir|8,nt=nt>>>0>8?nt:8,yt=120,Jn=64;break}case 88:case 120:{ft=ir,Jn=64;break}case 111:{if(_e=Oo,g=e[_e>>2]|0,_e=e[_e+4>>2]|0,(g|0)==0&(_e|0)==0)b=wr;else{b=wr;do b=b+-1|0,ct[b>>0]=g&7|48,g=V1(g|0,_e|0,3)|0,_e=dn;while(!((g|0)==0&(_e|0)==0))}ir&8?(ft=Ps-b+1|0,g=ir,nt=(nt|0)<(ft|0)?ft:nt,ft=0,lt=16433,Jn=77):(g=ir,ft=0,lt=16433,Jn=77);break}case 105:case 100:{if(g=Oo,b=e[g>>2]|0,g=e[g+4>>2]|0,(g|0)<0){b=Ul(0,0,b|0,g|0)|0,g=dn,_e=Oo,e[_e>>2]=b,e[_e+4>>2]=g,_e=1,lt=16433,Jn=76;break t}ir&2048?(_e=1,lt=16434,Jn=76):(lt=ir&1,_e=lt,lt=lt|0?16435:16433,Jn=76);break}case 117:{g=Oo,b=e[g>>2]|0,g=e[g+4>>2]|0,_e=0,lt=16433,Jn=76;break}case 99:{ct[ds>>0]=e[Oo>>2],Kt=ds,g=1,ft=0,yt=16433,b=wr;break}case 109:{b=Fl(e[(wo()|0)>>2]|0)|0,Jn=82;break}case 115:{b=e[Oo>>2]|0,b=b|0?b:16443,Jn=82;break}case 67:{e[Wp>>2]=e[Oo>>2],e[mo>>2]=0,e[Oo>>2]=Wp,nt=-1,Jn=86;break}case 83:{nt?Jn=86:(Bl(a,32,dr,0,ir),b=0,Jn=98);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{tt=+it[Oo>>3],e[a1>>2]=0,it[Tt>>3]=tt,(e[Tt+4>>2]|0)>=0?ir&2048?(cn=1,Yn=16453):(Yn=ir&1,cn=Yn,Yn=Yn|0?16456:16451):(tt=-tt,cn=1,Yn=16450),it[Tt>>3]=tt,Lt=e[Tt+4>>2]&2146435072;do if(Lt>>>0<2146435072|(Lt|0)==2146435072&!1){if(_t=+_1(tt,a1)*2,g=_t!=0,g&&(e[a1>>2]=(e[a1>>2]|0)+-1),Yt=yt|32,(Yt|0)==97){Kt=yt&32,Pt=Kt|0?Yn+9|0:Yn,Nt=cn|2,b=12-nt|0;do if(nt>>>0>11|(b|0)==0)tt=_t;else{tt=8;do b=b+-1|0,tt=tt*16;while(b|0);if((ct[Pt>>0]|0)==45){tt=-(tt+(-_t-tt));break}else{tt=_t+tt-tt;break}}while(!1);for(g=e[a1>>2]|0,b=(g|0)<0?0-g|0:g,b=gu(b,((b|0)<0)<<31>>31,Ko)|0,(b|0)==(Ko|0)&&(ct[Ro>>0]=48,b=Ro),ct[b+-1>>0]=(g>>31&2)+43,ft=b+-2|0,ct[ft>>0]=yt+15,lt=(nt|0)<1,_e=(ir&8|0)==0,g=S1;;){Yn=~~tt,b=g+1|0,ct[g>>0]=It[16417+Yn>>0]|Kt,tt=(tt-+(Yn|0))*16;do if((b-Dr|0)==1){if(_e&(lt&tt==0))break;ct[b>>0]=46,b=g+2|0}while(!1);if(tt==0)break;g=b}nt=(nt|0)!=0&(Or+b|0)<(nt|0)?Kr+nt-ft|0:us-ft+b|0,_e=nt+Nt|0,Bl(a,32,dr,_e,ir),e[a>>2]&32||b0(Pt,Nt,a)|0,Bl(a,48,dr,_e,ir^65536),b=b-Dr|0,e[a>>2]&32||b0(S1,b,a)|0,g=Zr-ft|0,Bl(a,48,nt-(b+g)|0,0,0),e[a>>2]&32||b0(ft,g,a)|0,Bl(a,32,dr,_e,ir^8192),b=(_e|0)<(dr|0)?dr:_e;break}b=(nt|0)<0?6:nt,g?(g=(e[a1>>2]|0)+-28|0,e[a1>>2]=g,tt=_t*268435456):(tt=_t,g=e[a1>>2]|0),Lt=(g|0)<0?Xs:Br,kt=Lt,g=Lt;do $t=~~tt>>>0,e[g>>2]=$t,g=g+4|0,tt=(tt-+($t>>>0))*1e9;while(tt!=0);if(_e=g,g=e[a1>>2]|0,(g|0)>0)for(lt=Lt;;){ft=(g|0)>29?29:g,nt=_e+-4|0;do if(nt>>>0<lt>>>0)nt=lt;else{g=0;do $t=E0(e[nt>>2]|0,0,ft|0)|0,$t=M0($t|0,dn|0,g|0,0)|0,g=dn,zt=lm($t|0,g|0,1e9,0)|0,e[nt>>2]=zt,g=v2($t|0,g|0,1e9,0)|0,nt=nt+-4|0;while(nt>>>0>=lt>>>0);if(!g){nt=lt;break}nt=lt+-4|0,e[nt>>2]=g}while(!1);for(;!(_e>>>0<=nt>>>0);)if(g=_e+-4|0,!(e[g>>2]|0))_e=g;else break;if(g=(e[a1>>2]|0)-ft|0,e[a1>>2]=g,(g|0)>0)lt=nt;else break}else nt=Lt;if((g|0)<0)for(Pt=((b+25|0)/9|0)+1|0,Ot=(Yt|0)==102,Kt=nt;;){Nt=0-g|0,Nt=(Nt|0)>9?9:Nt;do if(Kt>>>0<_e>>>0){g=(1<<Nt)+-1|0,lt=1e9>>>Nt,nt=0,ft=Kt;do $t=e[ft>>2]|0,e[ft>>2]=($t>>>Nt)+nt,nt=Pn($t&g,lt)|0,ft=ft+4|0;while(ft>>>0<_e>>>0);if(g=e[Kt>>2]|0?Kt:Kt+4|0,!nt){nt=g;break}e[_e>>2]=nt,nt=g,_e=_e+4|0}else nt=e[Kt>>2]|0?Kt:Kt+4|0;while(!1);if(g=Ot?Lt:nt,_e=(_e-g>>2|0)>(Pt|0)?g+(Pt<<2)|0:_e,g=(e[a1>>2]|0)+Nt|0,e[a1>>2]=g,(g|0)>=0){Kt=nt;break}else Kt=nt}else Kt=nt;do if(Kt>>>0<_e>>>0){if(g=(kt-Kt>>2)*9|0,lt=e[Kt>>2]|0,lt>>>0<10)break;nt=10;do nt=nt*10|0,g=g+1|0;while(lt>>>0>=nt>>>0)}else g=0;while(!1);if(zt=(Yt|0)==103,$t=(b|0)!=0,nt=b-((Yt|0)!=102?g:0)+(($t&zt)<<31>>31)|0,(nt|0)<(((_e-kt>>2)*9|0)+-9|0)){if(ft=nt+9216|0,Ot=(ft|0)/9|0,nt=Lt+(Ot+-1023<<2)|0,ft=((ft|0)%9|0)+1|0,(ft|0)<9){lt=10;do lt=lt*10|0,ft=ft+1|0;while((ft|0)!=9)}else lt=10;Nt=e[nt>>2]|0,Pt=(Nt>>>0)%(lt>>>0)|0,!(Pt|0)&&(Lt+(Ot+-1022<<2)|0)==(_e|0)?lt=Kt:Jn=163;do if((Jn|0)==163){Jn=0,_t=((Nt>>>0)/(lt>>>0)|0)&1|0?9007199254740994:9007199254740992,ft=(lt|0)/2|0;do if(Pt>>>0<ft>>>0)tt=.5;else{if((Pt|0)==(ft|0)&&(Lt+(Ot+-1022<<2)|0)==(_e|0)){tt=1;break}tt=1.5}while(!1);do if(cn){if((ct[Yn>>0]|0)!=45)break;_t=-_t,tt=-tt}while(!1);if(ft=Nt-Pt|0,e[nt>>2]=ft,_t+tt==_t){lt=Kt;break}if(Yt=ft+lt|0,e[nt>>2]=Yt,Yt>>>0>999999999)for(g=Kt;;)if(lt=nt+-4|0,e[nt>>2]=0,lt>>>0<g>>>0&&(g=g+-4|0,e[g>>2]=0),Yt=(e[lt>>2]|0)+1|0,e[lt>>2]=Yt,Yt>>>0>999999999)nt=lt;else{Kt=g,nt=lt;break}if(g=(kt-Kt>>2)*9|0,ft=e[Kt>>2]|0,ft>>>0<10){lt=Kt;break}else lt=10;do lt=lt*10|0,g=g+1|0;while(ft>>>0>=lt>>>0);lt=Kt}while(!1);Yt=nt+4|0,Kt=lt,_e=_e>>>0>Yt>>>0?Yt:_e}for(Pt=0-g|0;;){if(_e>>>0<=Kt>>>0){Ot=0,Yt=_e;break}if(nt=_e+-4|0,!(e[nt>>2]|0))_e=nt;else{Ot=1,Yt=_e;break}}do if(zt){if(b=($t&1^1)+b|0,(b|0)>(g|0)&(g|0)>-5?(yt=yt+-1|0,b=b+-1-g|0):(yt=yt+-2|0,b=b+-1|0),_e=ir&8,_e)break;do if(Ot){if(_e=e[Yt+-4>>2]|0,!_e){nt=9;break}if(!((_e>>>0)%10|0))lt=10,nt=0;else{nt=0;break}do lt=lt*10|0,nt=nt+1|0;while(!((_e>>>0)%(lt>>>0)|0|0))}else nt=9;while(!1);if(_e=((Yt-kt>>2)*9|0)+-9|0,(yt|32|0)==102){_e=_e-nt|0,_e=(_e|0)<0?0:_e,b=(b|0)<(_e|0)?b:_e,_e=0;break}else{_e=_e+g-nt|0,_e=(_e|0)<0?0:_e,b=(b|0)<(_e|0)?b:_e,_e=0;break}}else _e=ir&8;while(!1);if(Nt=b|_e,lt=(Nt|0)!=0&1,ft=(yt|32|0)==102,ft)g=(g|0)>0?g:0,yt=0;else{if(nt=(g|0)<0?Pt:g,nt=gu(nt,((nt|0)<0)<<31>>31,Ko)|0,(Zr-nt|0)<2)do nt=nt+-1|0,ct[nt>>0]=48;while((Zr-nt|0)<2);ct[nt+-1>>0]=(g>>31&2)+43,kt=nt+-2|0,ct[kt>>0]=yt,g=Zr-kt|0,yt=kt}Pt=cn+1+b+lt+g|0,Bl(a,32,dr,Pt,ir),e[a>>2]&32||b0(Yn,cn,a)|0,Bl(a,48,dr,Pt,ir^65536);do if(ft){nt=Kt>>>0>Lt>>>0?Lt:Kt,g=nt;do{_e=gu(e[g>>2]|0,0,Qn)|0;do if((g|0)==(nt|0)){if((_e|0)!=(Qn|0))break;ct[Kn>>0]=48,_e=Kn}else{if(_e>>>0<=S1>>>0)break;do _e=_e+-1|0,ct[_e>>0]=48;while(_e>>>0>S1>>>0)}while(!1);e[a>>2]&32||b0(_e,gr-_e|0,a)|0,g=g+4|0}while(g>>>0<=Lt>>>0);do if(Nt){if(e[a>>2]&32)break;b0(16485,1,a)|0}while(!1);if((b|0)>0&g>>>0<Yt>>>0)for(_e=g;;){if(g=gu(e[_e>>2]|0,0,Qn)|0,g>>>0>S1>>>0)do g=g+-1|0,ct[g>>0]=48;while(g>>>0>S1>>>0);if(e[a>>2]&32||b0(g,(b|0)>9?9:b,a)|0,_e=_e+4|0,g=b+-9|0,(b|0)>9&_e>>>0<Yt>>>0)b=g;else{b=g;break}}Bl(a,48,b+9|0,9,0)}else{if(ft=Ot?Yt:Kt+4|0,(b|0)>-1){lt=(_e|0)==0,nt=Kt;do{g=gu(e[nt>>2]|0,0,Qn)|0,(g|0)==(Qn|0)&&(ct[Kn>>0]=48,g=Kn);do if((nt|0)==(Kt|0)){if(_e=g+1|0,e[a>>2]&32||b0(g,1,a)|0,lt&(b|0)<1){g=_e;break}if(e[a>>2]&32){g=_e;break}b0(16485,1,a)|0,g=_e}else{if(g>>>0<=S1>>>0)break;do g=g+-1|0,ct[g>>0]=48;while(g>>>0>S1>>>0)}while(!1);_e=gr-g|0,e[a>>2]&32||b0(g,(b|0)>(_e|0)?_e:b,a)|0,b=b-_e|0,nt=nt+4|0}while(nt>>>0<ft>>>0&(b|0)>-1)}if(Bl(a,48,b+18|0,18,0),e[a>>2]&32)break;b0(yt,Zr-yt|0,a)|0}while(!1);Bl(a,32,dr,Pt,ir^8192),b=(Pt|0)<(dr|0)?dr:Pt}else ft=(yt&32|0)!=0,lt=tt!=tt|!1,g=lt?0:cn,nt=g+3|0,Bl(a,32,dr,nt,_e),b=e[a>>2]|0,b&32||(b0(Yn,g,a)|0,b=e[a>>2]|0),b&32||b0(lt?ft?16477:16481:ft?16469:16473,3,a)|0,Bl(a,32,dr,nt,ir^8192),b=(nt|0)<(dr|0)?dr:nt;while(!1);Kt=sr;continue e}default:_e=ir,g=nt,ft=0,yt=16433,b=wr}while(!1);t:do if((Jn|0)==64)if(_e=Oo,g=e[_e>>2]|0,_e=e[_e+4>>2]|0,lt=yt&32,(g|0)==0&(_e|0)==0)b=wr,g=ft,ft=0,lt=16433,Jn=77;else{b=wr;do b=b+-1|0,ct[b>>0]=It[16417+(g&15)>>0]|lt,g=V1(g|0,_e|0,4)|0,_e=dn;while(!((g|0)==0&(_e|0)==0));Jn=Oo,(ft&8|0)==0|(e[Jn>>2]|0)==0&(e[Jn+4>>2]|0)==0?(g=ft,ft=0,lt=16433,Jn=77):(g=ft,ft=2,lt=16433+(yt>>4)|0,Jn=77)}else if((Jn|0)==76)b=gu(b,g,wr)|0,g=ir,ft=_e,Jn=77;else if((Jn|0)==82)Jn=0,ir=Hu(b,0,nt)|0,Yn=(ir|0)==0,Kt=b,g=Yn?nt:ir-b|0,ft=0,yt=16433,b=Yn?b+nt|0:ir;else if((Jn|0)==86){for(Jn=0,g=0,b=0,lt=e[Oo>>2]|0;_e=e[lt>>2]|0,!(!_e||(b=n2(zp,_e)|0,(b|0)<0|b>>>0>(nt-g|0)>>>0));)if(g=b+g|0,nt>>>0>g>>>0)lt=lt+4|0;else break;if((b|0)<0){s=-1;break e}if(Bl(a,32,dr,g,ir),!g)b=0,Jn=98;else for(_e=0,nt=e[Oo>>2]|0;;){if(b=e[nt>>2]|0,!b){b=g,Jn=98;break t}if(b=n2(zp,b)|0,_e=b+_e|0,(_e|0)>(g|0)){b=g,Jn=98;break t}if(e[a>>2]&32||b0(zp,b,a)|0,_e>>>0>=g>>>0){b=g,Jn=98;break}else nt=nt+4|0}}while(!1);if((Jn|0)==98){Jn=0,Bl(a,32,dr,b,ir^8192),Kt=sr,b=(dr|0)>(b|0)?dr:b;continue}(Jn|0)==77&&(Jn=0,_e=(nt|0)>-1?g&-65537:g,g=Oo,g=(e[g>>2]|0)!=0|(e[g+4>>2]|0)!=0,(nt|0)!=0|g?(g=(g&1^1)+(Ps-b)|0,Kt=b,g=(nt|0)>(g|0)?nt:g,yt=lt,b=wr):(Kt=wr,g=0,yt=lt,b=wr)),lt=b-Kt|0,g=(g|0)<(lt|0)?lt:g,nt=ft+g|0,b=(dr|0)<(nt|0)?nt:dr,Bl(a,32,b,nt,_e),e[a>>2]&32||b0(yt,ft,a)|0,Bl(a,48,b,nt,_e^65536),Bl(a,48,g,lt,0),e[a>>2]&32||b0(Kt,lt,a)|0,Bl(a,32,b,nt,_e^8192),Kt=sr}e:do if((Jn|0)==245&&!a)if(d){for(s=1;d=e[o+(s<<2)>>2]|0,!!d;)if(zm(h+(s<<3)|0,d,_),s=s+1|0,(s|0)>=10){s=1;break e}if((s|0)<10)for(;;){if(e[o+(s<<2)>>2]|0){s=-1;break e}if(s=s+1|0,(s|0)>=10){s=1;break}}else s=1}else s=0;while(!1);return dt=W1,s|0}function xv(a,d,_){return a=a|0,d=d|0,_=_|0,Fm(a,d,_)|0}function YA(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;yt=dt,dt=dt+240|0,ft=yt,e[ft>>2]=a;e:do if((h|0)>1)for(lt=0-d|0,s=h,b=a,_e=a,tt=1;;){if(a=b+lt|0,nt=s+-2|0,g=b+(0-((e[o+(nt<<2)>>2]|0)+d))|0,(z1[_&15](_e,g)|0)>-1&&(z1[_&15](_e,a)|0)>-1){h=tt;break e}if(h=tt+1|0,b=ft+(tt<<2)|0,(z1[_&15](g,a)|0)>-1?(e[b>>2]=g,a=g,s=s+-1|0):(e[b>>2]=a,s=nt),(s|0)<=1)break e;b=a,_e=e[ft>>2]|0,tt=h}else h=1;while(!1);Vm(d,ft,h),dt=yt}function bp(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;Kt=dt,dt=dt+240|0,yt=Kt,_e=e[h>>2]|0,h=e[h+4>>2]|0,e[yt>>2]=a,ft=0-d|0;e:do if((h|0)!=0|(_e|0)!=1&&(g=a+(0-(e[b+(o<<2)>>2]|0))|0,(z1[_&15](g,a)|0)>=1))for(s=(s|0)==0,lt=g,tt=_e,nt=h,g=1;;){if(s&(o|0)>1){if(h=e[b+(o+-2<<2)>>2]|0,(z1[_&15](a+ft|0,lt)|0)>-1){s=o,h=g,_t=20;break e}if((z1[_&15](a+(0-(h+d))|0,lt)|0)>-1){s=o,h=g,_t=20;break e}}h=g+1|0,e[yt+(g<<2)>>2]=lt,s=tt+-1|0;do if(s){if(s&1)_t=11;else{a=s,s=0;do s=s+1|0,a=a>>>1;while(!(a&1|0));s||(_t=11)}if((_t|0)==11){if(_t=0,!nt){s=64,_t=16;break}if(!(nt&1))a=nt,s=0;else{_e=0,a=tt,g=nt,s=0;break}for(;;)if(g=s+1|0,a=a>>>1,a&1){a=g;break}else s=g;if(a)s=s+33|0;else{_e=0,a=tt,g=nt,s=0;break}}s>>>0>31?_t=16:(_e=s,a=tt,g=nt)}else s=32,_t=16;while(!1);if((_t|0)==16&&(_t=0,_e=s+-32|0,a=nt,g=0),tt=g<<32-_e|a>>>_e,nt=g>>>_e,s=s+o|0,!((nt|0)!=0|(tt|0)!=1)){a=lt,_t=20;break e}if(a=lt+(0-(e[b+(s<<2)>>2]|0))|0,(z1[_&15](a,e[yt>>2]|0)|0)<1){a=lt,o=s,s=0,_t=19;break}else _e=lt,o=s,s=1,lt=a,g=h,a=_e}else h=1,_t=19;while(!1);(_t|0)==19&&!(s|0)&&(s=o,_t=20),(_t|0)==20&&(Vm(d,yt,h),YA(a,d,_,s,b)),dt=Kt}function Vm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0;b=dt,dt=dt+256|0,h=b;e:do if((_|0)>=2&&(s=d+(_<<2)|0,e[s>>2]=h,(a|0)!=0))for(;;){o=a>>>0>256?256:a,B0(h|0,e[d>>2]|0,o|0)|0,h=0;do g=d+(h<<2)|0,h=h+1|0,B0(e[g>>2]|0,e[d+(h<<2)>>2]|0,o|0)|0,e[g>>2]=(e[g>>2]|0)+o;while((h|0)!=(_|0));if((a|0)==(o|0))break e;a=a-o|0,h=e[s>>2]|0}while(!1);dt=b}function qA(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;return h=a+20|0,o=e[h>>2]|0,a=(e[a+16>>2]|0)-o|0,a=a>>>0>_>>>0?_:a,B0(o|0,d|0,a|0)|0,e[h>>2]=(e[h>>2]|0)+a,_|0}function zm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0;e:do if(d>>>0<=20)do switch(d|0){case 9:{h=(e[_>>2]|0)+3&-4,d=e[h>>2]|0,e[_>>2]=h+4,e[a>>2]=d;break e}case 10:{h=(e[_>>2]|0)+3&-4,d=e[h>>2]|0,e[_>>2]=h+4,h=a,e[h>>2]=d,e[h+4>>2]=((d|0)<0)<<31>>31;break e}case 11:{h=(e[_>>2]|0)+3&-4,d=e[h>>2]|0,e[_>>2]=h+4,h=a,e[h>>2]=d,e[h+4>>2]=0;break e}case 12:{h=(e[_>>2]|0)+7&-8,d=h,o=e[d>>2]|0,d=e[d+4>>2]|0,e[_>>2]=h+8,h=a,e[h>>2]=o,e[h+4>>2]=d;break e}case 13:{o=(e[_>>2]|0)+3&-4,h=e[o>>2]|0,e[_>>2]=o+4,h=(h&65535)<<16>>16,o=a,e[o>>2]=h,e[o+4>>2]=((h|0)<0)<<31>>31;break e}case 14:{o=(e[_>>2]|0)+3&-4,h=e[o>>2]|0,e[_>>2]=o+4,o=a,e[o>>2]=h&65535,e[o+4>>2]=0;break e}case 15:{o=(e[_>>2]|0)+3&-4,h=e[o>>2]|0,e[_>>2]=o+4,h=(h&255)<<24>>24,o=a,e[o>>2]=h,e[o+4>>2]=((h|0)<0)<<31>>31;break e}case 16:{o=(e[_>>2]|0)+3&-4,h=e[o>>2]|0,e[_>>2]=o+4,o=a,e[o>>2]=h&255,e[o+4>>2]=0;break e}case 17:{o=(e[_>>2]|0)+7&-8,s=+it[o>>3],e[_>>2]=o+8,it[a>>3]=s;break e}case 18:{o=(e[_>>2]|0)+7&-8,s=+it[o>>3],e[_>>2]=o+8,it[a>>3]=s;break e}default:break e}while(!1);while(!1)}function gu(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;if(d>>>0>0|(d|0)==0&a>>>0>4294967295)for(;;)if(h=lm(a|0,d|0,10,0)|0,_=_+-1|0,ct[_>>0]=h|48,h=v2(a|0,d|0,10,0)|0,d>>>0>9|(d|0)==9&a>>>0>4294967295)a=h,d=dn;else{a=h;break}if(a)for(;_=_+-1|0,ct[_>>0]=(a>>>0)%10|0|48,!(a>>>0<10);)a=(a>>>0)/10|0;return _|0}function Bl(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0;g=dt,dt=dt+256|0,b=g;do if((_|0)>(h|0)&(o&73728|0)==0){if(o=_-h|0,Er(b|0,d|0,(o>>>0>256?256:o)|0)|0,d=e[a>>2]|0,s=(d&32|0)==0,o>>>0>255){h=_-h|0;do s&&(b0(b,256,a)|0,d=e[a>>2]|0),o=o+-256|0,s=(d&32|0)==0;while(o>>>0>255);if(s)o=h&255;else break}else if(!s)break;b0(b,o,a)|0}while(!1);dt=g}function Qr(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0;do if(a>>>0<245){if(yt=a>>>0<11?16:a+11&-8,a=yt>>>3,g=e[756]|0,_=g>>>a,_&3){a=(_&1^1)+a|0,h=a<<1,_=3064+(h<<2)|0,h=3064+(h+2<<2)|0,o=e[h>>2]|0,s=o+8|0,b=e[s>>2]|0;do if((_|0)!=(b|0))if(b>>>0<(e[760]|0)>>>0&&Cr(),d=b+12|0,(e[d>>2]|0)==(o|0)){e[d>>2]=_,e[h>>2]=b;break}else Cr();else e[756]=g&~(1<<a);while(!1);return Kn=a<<3,e[o+4>>2]=Kn|3,Kn=o+(Kn|4)|0,e[Kn>>2]=e[Kn>>2]|1,Kn=s,Kn|0}if(b=e[758]|0,yt>>>0>b>>>0){if(_){h=2<<a,h=_<<a&(h|0-h),h=(h&0-h)+-1|0,_e=h>>>12&16,h=h>>>_e,o=h>>>5&8,h=h>>>o,s=h>>>2&4,h=h>>>s,_=h>>>1&2,h=h>>>_,a=h>>>1&1,a=(o|_e|s|_|a)+(h>>>a)|0,h=a<<1,_=3064+(h<<2)|0,h=3064+(h+2<<2)|0,s=e[h>>2]|0,_e=s+8|0,o=e[_e>>2]|0;do if((_|0)!=(o|0))if(o>>>0<(e[760]|0)>>>0&&Cr(),d=o+12|0,(e[d>>2]|0)==(s|0)){e[d>>2]=_,e[h>>2]=o,tt=e[758]|0;break}else Cr();else e[756]=g&~(1<<a),tt=b;while(!1);return Kn=a<<3,b=Kn-yt|0,e[s+4>>2]=yt|3,g=s+yt|0,e[s+(yt|4)>>2]=b|1,e[s+Kn>>2]=b,tt&&(o=e[761]|0,_=tt>>>3,d=_<<1,h=3064+(d<<2)|0,a=e[756]|0,_=1<<_,a&_?(a=3064+(d+2<<2)|0,d=e[a>>2]|0,d>>>0<(e[760]|0)>>>0?Cr():(nt=a,lt=d)):(e[756]=a|_,nt=3064+(d+2<<2)|0,lt=h),e[nt>>2]=o,e[lt+12>>2]=o,e[o+8>>2]=lt,e[o+12>>2]=h),e[758]=b,e[761]=g,Kn=_e,Kn|0}if(a=e[757]|0,a){for(_=(a&0-a)+-1|0,gr=_>>>12&16,_=_>>>gr,Qn=_>>>5&8,_=_>>>Qn,Kn=_>>>2&4,_=_>>>Kn,a=_>>>1&2,_=_>>>a,h=_>>>1&1,h=e[3328+((Qn|gr|Kn|a|h)+(_>>>h)<<2)>>2]|0,_=(e[h+4>>2]&-8)-yt|0,a=h;;){if(d=e[a+16>>2]|0,!d&&(d=e[a+20>>2]|0,!d)){_e=_;break}a=(e[d+4>>2]&-8)-yt|0,Kn=a>>>0<_>>>0,_=Kn?a:_,a=d,h=Kn?d:h}s=e[760]|0,h>>>0<s>>>0&&Cr(),g=h+yt|0,h>>>0>=g>>>0&&Cr(),b=e[h+24>>2]|0,_=e[h+12>>2]|0;do if((_|0)==(h|0)){if(a=h+20|0,d=e[a>>2]|0,!d&&(a=h+16|0,d=e[a>>2]|0,!d)){ft=0;break}for(;;){if(_=d+20|0,o=e[_>>2]|0,o){d=o,a=_;continue}if(_=d+16|0,o=e[_>>2]|0,o)d=o,a=_;else break}if(a>>>0<s>>>0)Cr();else{e[a>>2]=0,ft=d;break}}else if(o=e[h+8>>2]|0,o>>>0<s>>>0&&Cr(),d=o+12|0,(e[d>>2]|0)!=(h|0)&&Cr(),a=_+8|0,(e[a>>2]|0)==(h|0)){e[d>>2]=_,e[a>>2]=o,ft=_;break}else Cr();while(!1);do if(b){if(d=e[h+28>>2]|0,a=3328+(d<<2)|0,(h|0)==(e[a>>2]|0)){if(e[a>>2]=ft,!ft){e[757]=e[757]&~(1<<d);break}}else if(b>>>0<(e[760]|0)>>>0&&Cr(),d=b+16|0,(e[d>>2]|0)==(h|0)?e[d>>2]=ft:e[b+20>>2]=ft,!ft)break;a=e[760]|0,ft>>>0<a>>>0&&Cr(),e[ft+24>>2]=b,d=e[h+16>>2]|0;do if(d)if(d>>>0<a>>>0)Cr();else{e[ft+16>>2]=d,e[d+24>>2]=ft;break}while(!1);if(d=e[h+20>>2]|0,d)if(d>>>0<(e[760]|0)>>>0)Cr();else{e[ft+20>>2]=d,e[d+24>>2]=ft;break}}while(!1);return _e>>>0<16?(Kn=_e+yt|0,e[h+4>>2]=Kn|3,Kn=h+(Kn+4)|0,e[Kn>>2]=e[Kn>>2]|1):(e[h+4>>2]=yt|3,e[h+(yt|4)>>2]=_e|1,e[h+(_e+yt)>>2]=_e,d=e[758]|0,d&&(s=e[761]|0,_=d>>>3,d=_<<1,o=3064+(d<<2)|0,a=e[756]|0,_=1<<_,a&_?(d=3064+(d+2<<2)|0,a=e[d>>2]|0,a>>>0<(e[760]|0)>>>0?Cr():(_t=d,Kt=a)):(e[756]=a|_,_t=3064+(d+2<<2)|0,Kt=o),e[_t>>2]=s,e[Kt+12>>2]=s,e[s+8>>2]=Kt,e[s+12>>2]=o),e[758]=_e,e[761]=g),Kn=h+8|0,Kn|0}else Kt=yt}else Kt=yt}else if(a>>>0<=4294967231)if(a=a+11|0,lt=a&-8,nt=e[757]|0,nt){_=0-lt|0,a=a>>>8,a?lt>>>0>16777215?tt=31:(Kt=(a+1048320|0)>>>16&8,$t=a<<Kt,_t=($t+520192|0)>>>16&4,$t=$t<<_t,tt=($t+245760|0)>>>16&2,tt=14-(_t|Kt|tt)+($t<<tt>>>15)|0,tt=lt>>>(tt+7|0)&1|tt<<1):tt=0,a=e[3328+(tt<<2)>>2]|0;e:do if(!a)o=0,a=0,$t=86;else for(b=_,o=0,g=lt<<((tt|0)==31?0:25-(tt>>>1)|0),_e=a,a=0;;){if(s=e[_e+4>>2]&-8,_=s-lt|0,_>>>0<b>>>0)if((s|0)==(lt|0)){s=_e,a=_e,$t=90;break e}else a=_e;else _=b;if($t=e[_e+20>>2]|0,_e=e[_e+16+(g>>>31<<2)>>2]|0,o=($t|0)==0|($t|0)==(_e|0)?o:$t,_e)b=_,g=g<<1;else{$t=86;break}}while(!1);if(($t|0)==86){if((o|0)==0&(a|0)==0){if(a=2<<tt,a=nt&(a|0-a),!a){Kt=lt;break}a=(a&0-a)+-1|0,ft=a>>>12&16,a=a>>>ft,nt=a>>>5&8,a=a>>>nt,_t=a>>>2&4,a=a>>>_t,Kt=a>>>1&2,a=a>>>Kt,o=a>>>1&1,o=e[3328+((nt|ft|_t|Kt|o)+(a>>>o)<<2)>>2]|0,a=0}o?(s=o,$t=90):(g=_,_e=a)}if(($t|0)==90)for(;;){if($t=0,Kt=(e[s+4>>2]&-8)-lt|0,o=Kt>>>0<_>>>0,_=o?Kt:_,a=o?s:a,o=e[s+16>>2]|0,o){s=o,$t=90;continue}if(s=e[s+20>>2]|0,s)$t=90;else{g=_,_e=a;break}}if(_e|0&&g>>>0<((e[758]|0)-lt|0)>>>0){o=e[760]|0,_e>>>0<o>>>0&&Cr(),b=_e+lt|0,_e>>>0>=b>>>0&&Cr(),s=e[_e+24>>2]|0,_=e[_e+12>>2]|0;do if((_|0)==(_e|0)){if(a=_e+20|0,d=e[a>>2]|0,!d&&(a=_e+16|0,d=e[a>>2]|0,!d)){yt=0;break}for(;;){if(_=d+20|0,h=e[_>>2]|0,h){d=h,a=_;continue}if(_=d+16|0,h=e[_>>2]|0,h)d=h,a=_;else break}if(a>>>0<o>>>0)Cr();else{e[a>>2]=0,yt=d;break}}else if(h=e[_e+8>>2]|0,h>>>0<o>>>0&&Cr(),d=h+12|0,(e[d>>2]|0)!=(_e|0)&&Cr(),a=_+8|0,(e[a>>2]|0)==(_e|0)){e[d>>2]=_,e[a>>2]=h,yt=_;break}else Cr();while(!1);do if(s){if(d=e[_e+28>>2]|0,a=3328+(d<<2)|0,(_e|0)==(e[a>>2]|0)){if(e[a>>2]=yt,!yt){e[757]=e[757]&~(1<<d);break}}else if(s>>>0<(e[760]|0)>>>0&&Cr(),d=s+16|0,(e[d>>2]|0)==(_e|0)?e[d>>2]=yt:e[s+20>>2]=yt,!yt)break;a=e[760]|0,yt>>>0<a>>>0&&Cr(),e[yt+24>>2]=s,d=e[_e+16>>2]|0;do if(d)if(d>>>0<a>>>0)Cr();else{e[yt+16>>2]=d,e[d+24>>2]=yt;break}while(!1);if(d=e[_e+20>>2]|0,d)if(d>>>0<(e[760]|0)>>>0)Cr();else{e[yt+20>>2]=d,e[d+24>>2]=yt;break}}while(!1);e:do if(g>>>0>=16){if(e[_e+4>>2]=lt|3,e[_e+(lt|4)>>2]=g|1,e[_e+(g+lt)>>2]=g,d=g>>>3,g>>>0<256){a=d<<1,h=3064+(a<<2)|0,_=e[756]|0,d=1<<d,_&d?(d=3064+(a+2<<2)|0,a=e[d>>2]|0,a>>>0<(e[760]|0)>>>0?Cr():(Pt=d,Ot=a)):(e[756]=_|d,Pt=3064+(a+2<<2)|0,Ot=h),e[Pt>>2]=b,e[Ot+12>>2]=b,e[_e+(lt+8)>>2]=Ot,e[_e+(lt+12)>>2]=h;break}if(d=g>>>8,d?g>>>0>16777215?h=31:(gr=(d+1048320|0)>>>16&8,Kn=d<<gr,Qn=(Kn+520192|0)>>>16&4,Kn=Kn<<Qn,h=(Kn+245760|0)>>>16&2,h=14-(Qn|gr|h)+(Kn<<h>>>15)|0,h=g>>>(h+7|0)&1|h<<1):h=0,d=3328+(h<<2)|0,e[_e+(lt+28)>>2]=h,e[_e+(lt+20)>>2]=0,e[_e+(lt+16)>>2]=0,a=e[757]|0,_=1<<h,!(a&_)){e[757]=a|_,e[d>>2]=b,e[_e+(lt+24)>>2]=d,e[_e+(lt+12)>>2]=b,e[_e+(lt+8)>>2]=b;break}d=e[d>>2]|0;t:do if((e[d+4>>2]&-8|0)!=(g|0)){for(h=g<<((h|0)==31?0:25-(h>>>1)|0);a=d+16+(h>>>31<<2)|0,_=e[a>>2]|0,!!_;)if((e[_+4>>2]&-8|0)==(g|0)){Lt=_;break t}else h=h<<1,d=_;if(a>>>0<(e[760]|0)>>>0)Cr();else{e[a>>2]=b,e[_e+(lt+24)>>2]=d,e[_e+(lt+12)>>2]=b,e[_e+(lt+8)>>2]=b;break e}}else Lt=d;while(!1);if(d=Lt+8|0,a=e[d>>2]|0,Kn=e[760]|0,a>>>0>=Kn>>>0&Lt>>>0>=Kn>>>0){e[a+12>>2]=b,e[d>>2]=b,e[_e+(lt+8)>>2]=a,e[_e+(lt+12)>>2]=Lt,e[_e+(lt+24)>>2]=0;break}else Cr()}else Kn=g+lt|0,e[_e+4>>2]=Kn|3,Kn=_e+(Kn+4)|0,e[Kn>>2]=e[Kn>>2]|1;while(!1);return Kn=_e+8|0,Kn|0}else Kt=lt}else Kt=lt;else Kt=-1;while(!1);if(_=e[758]|0,_>>>0>=Kt>>>0)return d=_-Kt|0,a=e[761]|0,d>>>0>15?(e[761]=a+Kt,e[758]=d,e[a+(Kt+4)>>2]=d|1,e[a+_>>2]=d,e[a+4>>2]=Kt|3):(e[758]=0,e[761]=0,e[a+4>>2]=_|3,Kn=a+(_+4)|0,e[Kn>>2]=e[Kn>>2]|1),Kn=a+8|0,Kn|0;if(a=e[759]|0,a>>>0>Kt>>>0)return gr=a-Kt|0,e[759]=gr,Kn=e[762]|0,e[762]=Kn+Kt,e[Kn+(Kt+4)>>2]=gr|1,e[Kn+4>>2]=Kt|3,Kn=Kn+8|0,Kn|0;do if(!(e[874]|0))if(a=Ns(30)|0,a+-1&a)Cr();else{e[876]=a,e[875]=a,e[877]=-1,e[878]=-1,e[879]=0,e[867]=0,e[874]=(io(0)|0)&-16^1431655768;break}while(!1);if(_e=Kt+48|0,g=e[876]|0,tt=Kt+47|0,b=g+tt|0,g=0-g|0,nt=b&g,nt>>>0<=Kt>>>0||(a=e[866]|0,a|0&&(Ot=e[864]|0,Lt=Ot+nt|0,Lt>>>0<=Ot>>>0|Lt>>>0>a>>>0)))return Kn=0,Kn|0;e:do if(e[867]&4)a=0,$t=191;else{a=e[762]|0;t:do if(a){for(o=3472;;){if(_=e[o>>2]|0,_>>>0<=a>>>0&&(Nt=o+4|0,(_+(e[Nt>>2]|0)|0)>>>0>a>>>0)){s=o,a=Nt;break}if(o=e[o+8>>2]|0,!o){$t=174;break t}}if(_=b-(e[759]|0)&g,_>>>0<2147483647)if(o=Bn(_|0)|0,Lt=(o|0)==((e[s>>2]|0)+(e[a>>2]|0)|0),a=Lt?_:0,Lt){if((o|0)!=-1){Yt=o,_t=a,$t=194;break e}}else $t=184;else a=0}else $t=174;while(!1);do if(($t|0)==174)if(s=Bn(0)|0,(s|0)!=-1)if(a=s,_=e[875]|0,o=_+-1|0,o&a?_=nt-a+(o+a&0-_)|0:_=nt,a=e[864]|0,o=a+_|0,_>>>0>Kt>>>0&_>>>0<2147483647){if(Lt=e[866]|0,Lt|0&&o>>>0<=a>>>0|o>>>0>Lt>>>0){a=0;break}if(o=Bn(_|0)|0,Lt=(o|0)==(s|0),a=Lt?_:0,Lt){Yt=s,_t=a,$t=194;break e}else $t=184}else a=0;else a=0;while(!1);t:do if(($t|0)==184){s=0-_|0;do if(_e>>>0>_>>>0&(_>>>0<2147483647&(o|0)!=-1)&&(zt=e[876]|0,zt=tt-_+zt&0-zt,zt>>>0<2147483647))if((Bn(zt|0)|0)==-1){Bn(s|0)|0;break t}else{_=zt+_|0;break}while(!1);if((o|0)!=-1){Yt=o,_t=_,$t=194;break e}}while(!1);e[867]=e[867]|4,$t=191}while(!1);if(($t|0)==191&&nt>>>0<2147483647&&(Yt=Bn(nt|0)|0,kt=Bn(0)|0,Yt>>>0<kt>>>0&((Yt|0)!=-1&(kt|0)!=-1))&&(cn=kt-Yt|0,Yn=cn>>>0>(Kt+40|0)>>>0,Yn)&&(_t=Yn?cn:a,$t=194),($t|0)==194){a=(e[864]|0)+_t|0,e[864]=a,a>>>0>(e[865]|0)>>>0&&(e[865]=a),b=e[762]|0;e:do if(b){s=3472;do{if(a=e[s>>2]|0,_=s+4|0,o=e[_>>2]|0,(Yt|0)==(a+o|0)){ir=a,sr=_,dr=o,Jn=s,$t=204;break}s=e[s+8>>2]|0}while(s|0);if(($t|0)==204&&!(e[Jn+12>>2]&8|0)&&b>>>0<Yt>>>0&b>>>0>=ir>>>0){e[sr>>2]=dr+_t,Kn=(e[759]|0)+_t|0,gr=b+8|0,gr=gr&7|0?0-gr&7:0,Qn=Kn-gr|0,e[762]=b+gr,e[759]=Qn,e[b+(gr+4)>>2]=Qn|1,e[b+(Kn+4)>>2]=40,e[763]=e[878];break}for(a=e[760]|0,Yt>>>0<a>>>0&&(e[760]=Yt,a=Yt),_=Yt+_t|0,s=3472;;){if((e[s>>2]|0)==(_|0)){o=s,_=s,$t=212;break}if(s=e[s+8>>2]|0,!s){_=3472;break}}if(($t|0)==212)if(e[_+12>>2]&8)_=3472;else{e[o>>2]=Yt,ft=_+4|0,e[ft>>2]=(e[ft>>2]|0)+_t,ft=Yt+8|0,ft=ft&7|0?0-ft&7:0,tt=Yt+(_t+8)|0,tt=tt&7|0?0-tt&7:0,d=Yt+(tt+_t)|0,lt=ft+Kt|0,yt=Yt+lt|0,nt=d-(Yt+ft)-Kt|0,e[Yt+(ft+4)>>2]=Kt|3;t:do if((d|0)!=(b|0)){if((d|0)==(e[761]|0)){Kn=(e[758]|0)+nt|0,e[758]=Kn,e[761]=yt,e[Yt+(lt+4)>>2]=Kn|1,e[Yt+(Kn+lt)>>2]=Kn;break}if(g=_t+4|0,_=e[Yt+(g+tt)>>2]|0,(_&3|0)==1){_e=_&-8,s=_>>>3;i:do if(_>>>0>=256){b=e[Yt+((tt|24)+_t)>>2]|0,h=e[Yt+(_t+12+tt)>>2]|0;do if((h|0)==(d|0)){if(o=tt|16,h=Yt+(g+o)|0,_=e[h>>2]|0,!_&&(h=Yt+(o+_t)|0,_=e[h>>2]|0,!_)){Br=0;break}for(;;){if(o=_+20|0,s=e[o>>2]|0,s){_=s,h=o;continue}if(o=_+16|0,s=e[o>>2]|0,s)_=s,h=o;else break}if(h>>>0<a>>>0)Cr();else{e[h>>2]=0,Br=_;break}}else if(o=e[Yt+((tt|8)+_t)>>2]|0,o>>>0<a>>>0&&Cr(),a=o+12|0,(e[a>>2]|0)!=(d|0)&&Cr(),_=h+8|0,(e[_>>2]|0)==(d|0)){e[a>>2]=h,e[_>>2]=o,Br=h;break}else Cr();while(!1);if(!b)break;a=e[Yt+(_t+28+tt)>>2]|0,_=3328+(a<<2)|0;do if((d|0)!=(e[_>>2]|0)){if(b>>>0<(e[760]|0)>>>0&&Cr(),a=b+16|0,(e[a>>2]|0)==(d|0)?e[a>>2]=Br:e[b+20>>2]=Br,!Br)break i}else{if(e[_>>2]=Br,Br)break;e[757]=e[757]&~(1<<a);break i}while(!1);_=e[760]|0,Br>>>0<_>>>0&&Cr(),e[Br+24>>2]=b,d=tt|16,a=e[Yt+(d+_t)>>2]|0;do if(a)if(a>>>0<_>>>0)Cr();else{e[Br+16>>2]=a,e[a+24>>2]=Br;break}while(!1);if(d=e[Yt+(g+d)>>2]|0,!d)break;if(d>>>0<(e[760]|0)>>>0)Cr();else{e[Br+20>>2]=d,e[d+24>>2]=Br;break}}else{h=e[Yt+((tt|8)+_t)>>2]|0,o=e[Yt+(_t+12+tt)>>2]|0,_=3064+(s<<1<<2)|0;do if((h|0)!=(_|0)){if(h>>>0<a>>>0&&Cr(),(e[h+12>>2]|0)==(d|0))break;Cr()}while(!1);if((o|0)==(h|0)){e[756]=e[756]&~(1<<s);break}do if((o|0)==(_|0))Hr=o+8|0;else{if(o>>>0<a>>>0&&Cr(),a=o+8|0,(e[a>>2]|0)==(d|0)){Hr=a;break}Cr()}while(!1);e[h+12>>2]=o,e[Hr>>2]=h}while(!1);d=Yt+((_e|tt)+_t)|0,o=_e+nt|0}else o=nt;if(d=d+4|0,e[d>>2]=e[d>>2]&-2,e[Yt+(lt+4)>>2]=o|1,e[Yt+(o+lt)>>2]=o,d=o>>>3,o>>>0<256){a=d<<1,h=3064+(a<<2)|0,_=e[756]|0,d=1<<d;do if(!(_&d))e[756]=_|d,Qn=3064+(a+2<<2)|0,gr=h;else{if(d=3064+(a+2<<2)|0,a=e[d>>2]|0,a>>>0>=(e[760]|0)>>>0){Qn=d,gr=a;break}Cr()}while(!1);e[Qn>>2]=yt,e[gr+12>>2]=yt,e[Yt+(lt+8)>>2]=gr,e[Yt+(lt+12)>>2]=h;break}d=o>>>8;do if(!d)h=0;else{if(o>>>0>16777215){h=31;break}Qn=(d+1048320|0)>>>16&8,gr=d<<Qn,Br=(gr+520192|0)>>>16&4,gr=gr<<Br,h=(gr+245760|0)>>>16&2,h=14-(Br|Qn|h)+(gr<<h>>>15)|0,h=o>>>(h+7|0)&1|h<<1}while(!1);if(d=3328+(h<<2)|0,e[Yt+(lt+28)>>2]=h,e[Yt+(lt+20)>>2]=0,e[Yt+(lt+16)>>2]=0,a=e[757]|0,_=1<<h,!(a&_)){e[757]=a|_,e[d>>2]=yt,e[Yt+(lt+24)>>2]=d,e[Yt+(lt+12)>>2]=yt,e[Yt+(lt+8)>>2]=yt;break}d=e[d>>2]|0;i:do if((e[d+4>>2]&-8|0)!=(o|0)){for(h=o<<((h|0)==31?0:25-(h>>>1)|0);a=d+16+(h>>>31<<2)|0,_=e[a>>2]|0,!!_;)if((e[_+4>>2]&-8|0)==(o|0)){Kn=_;break i}else h=h<<1,d=_;if(a>>>0<(e[760]|0)>>>0)Cr();else{e[a>>2]=yt,e[Yt+(lt+24)>>2]=d,e[Yt+(lt+12)>>2]=yt,e[Yt+(lt+8)>>2]=yt;break t}}else Kn=d;while(!1);if(d=Kn+8|0,a=e[d>>2]|0,gr=e[760]|0,a>>>0>=gr>>>0&Kn>>>0>=gr>>>0){e[a+12>>2]=yt,e[d>>2]=yt,e[Yt+(lt+8)>>2]=a,e[Yt+(lt+12)>>2]=Kn,e[Yt+(lt+24)>>2]=0;break}else Cr()}else Kn=(e[759]|0)+nt|0,e[759]=Kn,e[762]=yt,e[Yt+(lt+4)>>2]=Kn|1;while(!1);return Kn=Yt+(ft|8)|0,Kn|0}for(;a=e[_>>2]|0,!(a>>>0<=b>>>0&&(d=e[_+4>>2]|0,h=a+d|0,h>>>0>b>>>0));)_=e[_+8>>2]|0;if(o=a+(d+-39)|0,a=a+(d+-47+(o&7|0?0-o&7:0))|0,o=b+16|0,a=a>>>0<o>>>0?b:a,d=a+8|0,_=Yt+8|0,_=_&7|0?0-_&7:0,Kn=_t+-40-_|0,e[762]=Yt+_,e[759]=Kn,e[Yt+(_+4)>>2]=Kn|1,e[Yt+(_t+-36)>>2]=40,e[763]=e[878],_=a+4|0,e[_>>2]=27,e[d>>2]=e[868],e[d+4>>2]=e[869],e[d+8>>2]=e[870],e[d+12>>2]=e[871],e[868]=Yt,e[869]=_t,e[871]=0,e[870]=d,d=a+28|0,e[d>>2]=7,(a+32|0)>>>0<h>>>0)do Kn=d,d=d+4|0,e[d>>2]=7;while((Kn+8|0)>>>0<h>>>0);if((a|0)!=(b|0)){if(s=a-b|0,e[_>>2]=e[_>>2]&-2,e[b+4>>2]=s|1,e[a>>2]=s,d=s>>>3,s>>>0<256){a=d<<1,h=3064+(a<<2)|0,_=e[756]|0,d=1<<d,_&d?(d=3064+(a+2<<2)|0,a=e[d>>2]|0,a>>>0<(e[760]|0)>>>0?Cr():(wr=d,Or=a)):(e[756]=_|d,wr=3064+(a+2<<2)|0,Or=h),e[wr>>2]=b,e[Or+12>>2]=b,e[b+8>>2]=Or,e[b+12>>2]=h;break}if(d=s>>>8,d?s>>>0>16777215?h=31:(gr=(d+1048320|0)>>>16&8,Kn=d<<gr,Qn=(Kn+520192|0)>>>16&4,Kn=Kn<<Qn,h=(Kn+245760|0)>>>16&2,h=14-(Qn|gr|h)+(Kn<<h>>>15)|0,h=s>>>(h+7|0)&1|h<<1):h=0,_=3328+(h<<2)|0,e[b+28>>2]=h,e[b+20>>2]=0,e[o>>2]=0,d=e[757]|0,a=1<<h,!(d&a)){e[757]=d|a,e[_>>2]=b,e[b+24>>2]=_,e[b+12>>2]=b,e[b+8>>2]=b;break}d=e[_>>2]|0;t:do if((e[d+4>>2]&-8|0)!=(s|0)){for(h=s<<((h|0)==31?0:25-(h>>>1)|0);a=d+16+(h>>>31<<2)|0,_=e[a>>2]|0,!!_;)if((e[_+4>>2]&-8|0)==(s|0)){Kr=_;break t}else h=h<<1,d=_;if(a>>>0<(e[760]|0)>>>0)Cr();else{e[a>>2]=b,e[b+24>>2]=d,e[b+12>>2]=b,e[b+8>>2]=b;break e}}else Kr=d;while(!1);if(d=Kr+8|0,a=e[d>>2]|0,Kn=e[760]|0,a>>>0>=Kn>>>0&Kr>>>0>=Kn>>>0){e[a+12>>2]=b,e[d>>2]=b,e[b+8>>2]=a,e[b+12>>2]=Kr,e[b+24>>2]=0;break}else Cr()}}else{Kn=e[760]|0,(Kn|0)==0|Yt>>>0<Kn>>>0&&(e[760]=Yt),e[868]=Yt,e[869]=_t,e[871]=0,e[765]=e[874],e[764]=-1,d=0;do Kn=d<<1,gr=3064+(Kn<<2)|0,e[3064+(Kn+3<<2)>>2]=gr,e[3064+(Kn+2<<2)>>2]=gr,d=d+1|0;while((d|0)!=32);Kn=Yt+8|0,Kn=Kn&7|0?0-Kn&7:0,gr=_t+-40-Kn|0,e[762]=Yt+Kn,e[759]=gr,e[Yt+(Kn+4)>>2]=gr|1,e[Yt+(_t+-36)>>2]=40,e[763]=e[878]}while(!1);if(d=e[759]|0,d>>>0>Kt>>>0)return gr=d-Kt|0,e[759]=gr,Kn=e[762]|0,e[762]=Kn+Kt,e[Kn+(Kt+4)>>2]=gr|1,e[Kn+4>>2]=Kt|3,Kn=Kn+8|0,Kn|0}return e[(wo()|0)>>2]=12,Kn=0,Kn|0}function xs(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0;if(a){d=a+-8|0,g=e[760]|0,d>>>0<g>>>0&&Cr(),_=e[a+-4>>2]|0,h=_&3,(h|0)==1&&Cr(),yt=_&-8,Kt=a+(yt+-8)|0;do if(_&1)zt=d,s=yt;else{if(d=e[d>>2]|0,!h)return;if(_e=-8-d|0,nt=a+_e|0,lt=d+yt|0,nt>>>0<g>>>0&&Cr(),(nt|0)==(e[761]|0)){if(d=a+(yt+-4)|0,_=e[d>>2]|0,(_&3|0)!=3){zt=nt,s=lt;break}e[758]=lt,e[d>>2]=_&-2,e[a+(_e+4)>>2]=lt|1,e[Kt>>2]=lt;return}if(o=d>>>3,d>>>0<256){if(h=e[a+(_e+8)>>2]|0,_=e[a+(_e+12)>>2]|0,d=3064+(o<<1<<2)|0,(h|0)!=(d|0)&&(h>>>0<g>>>0&&Cr(),(e[h+12>>2]|0)!=(nt|0)&&Cr()),(_|0)==(h|0)){e[756]=e[756]&~(1<<o),zt=nt,s=lt;break}(_|0)!=(d|0)?(_>>>0<g>>>0&&Cr(),d=_+8|0,(e[d>>2]|0)==(nt|0)?b=d:Cr()):b=_+8|0,e[h+12>>2]=_,e[b>>2]=h,zt=nt,s=lt;break}b=e[a+(_e+24)>>2]|0,h=e[a+(_e+12)>>2]|0;do if((h|0)==(nt|0)){if(_=a+(_e+20)|0,d=e[_>>2]|0,!d&&(_=a+(_e+16)|0,d=e[_>>2]|0,!d)){tt=0;break}for(;;){if(h=d+20|0,o=e[h>>2]|0,o){d=o,_=h;continue}if(h=d+16|0,o=e[h>>2]|0,o)d=o,_=h;else break}if(_>>>0<g>>>0)Cr();else{e[_>>2]=0,tt=d;break}}else if(o=e[a+(_e+8)>>2]|0,o>>>0<g>>>0&&Cr(),d=o+12|0,(e[d>>2]|0)!=(nt|0)&&Cr(),_=h+8|0,(e[_>>2]|0)==(nt|0)){e[d>>2]=h,e[_>>2]=o,tt=h;break}else Cr();while(!1);if(b){if(d=e[a+(_e+28)>>2]|0,_=3328+(d<<2)|0,(nt|0)==(e[_>>2]|0)){if(e[_>>2]=tt,!tt){e[757]=e[757]&~(1<<d),zt=nt,s=lt;break}}else if(b>>>0<(e[760]|0)>>>0&&Cr(),d=b+16|0,(e[d>>2]|0)==(nt|0)?e[d>>2]=tt:e[b+20>>2]=tt,!tt){zt=nt,s=lt;break}_=e[760]|0,tt>>>0<_>>>0&&Cr(),e[tt+24>>2]=b,d=e[a+(_e+16)>>2]|0;do if(d)if(d>>>0<_>>>0)Cr();else{e[tt+16>>2]=d,e[d+24>>2]=tt;break}while(!1);if(d=e[a+(_e+20)>>2]|0,d)if(d>>>0<(e[760]|0)>>>0)Cr();else{e[tt+20>>2]=d,e[d+24>>2]=tt,zt=nt,s=lt;break}else zt=nt,s=lt}else zt=nt,s=lt}while(!1);if(zt>>>0>=Kt>>>0&&Cr(),d=a+(yt+-4)|0,_=e[d>>2]|0,_&1||Cr(),_&2)e[d>>2]=_&-2,e[zt+4>>2]=s|1,e[zt+s>>2]=s;else{if((Kt|0)==(e[762]|0)){if(Ot=(e[759]|0)+s|0,e[759]=Ot,e[762]=zt,e[zt+4>>2]=Ot|1,(zt|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((Kt|0)==(e[761]|0)){Ot=(e[758]|0)+s|0,e[758]=Ot,e[761]=zt,e[zt+4>>2]=Ot|1,e[zt+Ot>>2]=Ot;return}s=(_&-8)+s|0,o=_>>>3;do if(_>>>0>=256){b=e[a+(yt+16)>>2]|0,d=e[a+(yt|4)>>2]|0;do if((d|0)==(Kt|0)){if(_=a+(yt+12)|0,d=e[_>>2]|0,!d&&(_=a+(yt+8)|0,d=e[_>>2]|0,!d)){_t=0;break}for(;;){if(h=d+20|0,o=e[h>>2]|0,o){d=o,_=h;continue}if(h=d+16|0,o=e[h>>2]|0,o)d=o,_=h;else break}if(_>>>0<(e[760]|0)>>>0)Cr();else{e[_>>2]=0,_t=d;break}}else if(_=e[a+yt>>2]|0,_>>>0<(e[760]|0)>>>0&&Cr(),h=_+12|0,(e[h>>2]|0)!=(Kt|0)&&Cr(),o=d+8|0,(e[o>>2]|0)==(Kt|0)){e[h>>2]=d,e[o>>2]=_,_t=d;break}else Cr();while(!1);if(b){if(d=e[a+(yt+20)>>2]|0,_=3328+(d<<2)|0,(Kt|0)==(e[_>>2]|0)){if(e[_>>2]=_t,!_t){e[757]=e[757]&~(1<<d);break}}else if(b>>>0<(e[760]|0)>>>0&&Cr(),d=b+16|0,(e[d>>2]|0)==(Kt|0)?e[d>>2]=_t:e[b+20>>2]=_t,!_t)break;_=e[760]|0,_t>>>0<_>>>0&&Cr(),e[_t+24>>2]=b,d=e[a+(yt+8)>>2]|0;do if(d)if(d>>>0<_>>>0)Cr();else{e[_t+16>>2]=d,e[d+24>>2]=_t;break}while(!1);if(d=e[a+(yt+12)>>2]|0,d)if(d>>>0<(e[760]|0)>>>0)Cr();else{e[_t+20>>2]=d,e[d+24>>2]=_t;break}}}else{if(h=e[a+yt>>2]|0,_=e[a+(yt|4)>>2]|0,d=3064+(o<<1<<2)|0,(h|0)!=(d|0)&&(h>>>0<(e[760]|0)>>>0&&Cr(),(e[h+12>>2]|0)!=(Kt|0)&&Cr()),(_|0)==(h|0)){e[756]=e[756]&~(1<<o);break}(_|0)!=(d|0)?(_>>>0<(e[760]|0)>>>0&&Cr(),d=_+8|0,(e[d>>2]|0)==(Kt|0)?ft=d:Cr()):ft=_+8|0,e[h+12>>2]=_,e[ft>>2]=h}while(!1);if(e[zt+4>>2]=s|1,e[zt+s>>2]=s,(zt|0)==(e[761]|0)){e[758]=s;return}}if(d=s>>>3,s>>>0<256){_=d<<1,o=3064+(_<<2)|0,h=e[756]|0,d=1<<d,h&d?(d=3064+(_+2<<2)|0,_=e[d>>2]|0,_>>>0<(e[760]|0)>>>0?Cr():(Nt=d,Pt=_)):(e[756]=h|d,Nt=3064+(_+2<<2)|0,Pt=o),e[Nt>>2]=zt,e[Pt+12>>2]=zt,e[zt+8>>2]=Pt,e[zt+12>>2]=o;return}d=s>>>8,d?s>>>0>16777215?o=31:(Nt=(d+1048320|0)>>>16&8,Pt=d<<Nt,Kt=(Pt+520192|0)>>>16&4,Pt=Pt<<Kt,o=(Pt+245760|0)>>>16&2,o=14-(Kt|Nt|o)+(Pt<<o>>>15)|0,o=s>>>(o+7|0)&1|o<<1):o=0,d=3328+(o<<2)|0,e[zt+28>>2]=o,e[zt+20>>2]=0,e[zt+16>>2]=0,_=e[757]|0,h=1<<o;e:do if(_&h){d=e[d>>2]|0;t:do if((e[d+4>>2]&-8|0)!=(s|0)){for(o=s<<((o|0)==31?0:25-(o>>>1)|0);_=d+16+(o>>>31<<2)|0,h=e[_>>2]|0,!!h;)if((e[h+4>>2]&-8|0)==(s|0)){Ot=h;break t}else o=o<<1,d=h;if(_>>>0<(e[760]|0)>>>0)Cr();else{e[_>>2]=zt,e[zt+24>>2]=d,e[zt+12>>2]=zt,e[zt+8>>2]=zt;break e}}else Ot=d;while(!1);if(d=Ot+8|0,_=e[d>>2]|0,Pt=e[760]|0,_>>>0>=Pt>>>0&Ot>>>0>=Pt>>>0){e[_+12>>2]=zt,e[d>>2]=zt,e[zt+8>>2]=_,e[zt+12>>2]=Ot,e[zt+24>>2]=0;break}else Cr()}else e[757]=_|h,e[d>>2]=zt,e[zt+24>>2]=d,e[zt+12>>2]=zt,e[zt+8>>2]=zt;while(!1);if(zt=(e[764]|0)+-1|0,e[764]=zt,!zt)d=3480;else return;for(;d=e[d>>2]|0,d;)d=d+8|0;e[764]=-1}}function A1(a,d){a=a|0,d=d|0;var _=0;return a?(_=Pn(d,a)|0,(d|a)>>>0>65535&&(_=((_>>>0)/(a>>>0)|0|0)==(d|0)?_:-1)):_=0,d=Qr(_)|0,!d||!(e[d+-4>>2]&3)||Er(d|0,0,_|0)|0,d|0}function N2(a,d){a=a|0,d=d|0;var _=0,h=0;return a?d>>>0>4294967231?(e[(wo()|0)>>2]=12,a=0,a|0):(_=c2(a+-8|0,d>>>0<11?16:d+11&-8)|0,_?(a=_+8|0,a|0):(_=Qr(d)|0,_?(h=e[a+-4>>2]|0,h=(h&-8)-(h&3|0?4:8)|0,B0(_|0,a|0,(h>>>0<d>>>0?h:d)|0)|0,xs(a),a=_,a|0):(a=0,a|0))):(a=Qr(d)|0,a|0)}function c2(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;if(yt=a+4|0,_t=e[yt>>2]|0,_e=_t&-8,nt=a+_e|0,g=e[760]|0,_=_t&3,(_|0)!=1&a>>>0>=g>>>0&a>>>0<nt>>>0||Cr(),h=a+(_e|4)|0,o=e[h>>2]|0,o&1||Cr(),!_)return d>>>0<256?(a=0,a|0):(_e>>>0>=(d+4|0)>>>0&&(_e-d|0)>>>0<=e[876]<<1>>>0||(a=0),a|0);if(_e>>>0>=d>>>0)return _=_e-d|0,_>>>0<=15||(e[yt>>2]=_t&1|d|2,e[a+(d+4)>>2]=_|3,e[h>>2]=e[h>>2]|1,o1(a+d|0,_)),a|0;if((nt|0)==(e[762]|0))return _=(e[759]|0)+_e|0,_>>>0<=d>>>0?(a=0,a|0):(ft=_-d|0,e[yt>>2]=_t&1|d|2,e[a+(d+4)>>2]=ft|1,e[762]=a+d,e[759]=ft,a|0);if((nt|0)==(e[761]|0))return h=(e[758]|0)+_e|0,h>>>0<d>>>0?(a=0,a|0):(_=h-d|0,_>>>0>15?(e[yt>>2]=_t&1|d|2,e[a+(d+4)>>2]=_|1,e[a+h>>2]=_,h=a+(h+4)|0,e[h>>2]=e[h>>2]&-2,h=a+d|0):(e[yt>>2]=_t&1|h|2,h=a+(h+4)|0,e[h>>2]=e[h>>2]|1,h=0,_=0),e[758]=_,e[761]=h,a|0);if(o&2||(lt=(o&-8)+_e|0,lt>>>0<d>>>0))return a=0,a|0;ft=lt-d|0,s=o>>>3;do if(o>>>0>=256){b=e[a+(_e+24)>>2]|0,s=e[a+(_e+12)>>2]|0;do if((s|0)==(nt|0)){if(h=a+(_e+20)|0,_=e[h>>2]|0,!_&&(h=a+(_e+16)|0,_=e[h>>2]|0,!_)){tt=0;break}for(;;){if(o=_+20|0,s=e[o>>2]|0,s){_=s,h=o;continue}if(o=_+16|0,s=e[o>>2]|0,s)_=s,h=o;else break}if(h>>>0<g>>>0)Cr();else{e[h>>2]=0,tt=_;break}}else if(o=e[a+(_e+8)>>2]|0,o>>>0<g>>>0&&Cr(),_=o+12|0,(e[_>>2]|0)!=(nt|0)&&Cr(),h=s+8|0,(e[h>>2]|0)==(nt|0)){e[_>>2]=s,e[h>>2]=o,tt=s;break}else Cr();while(!1);if(b){if(_=e[a+(_e+28)>>2]|0,h=3328+(_<<2)|0,(nt|0)==(e[h>>2]|0)){if(e[h>>2]=tt,!tt){e[757]=e[757]&~(1<<_);break}}else if(b>>>0<(e[760]|0)>>>0&&Cr(),_=b+16|0,(e[_>>2]|0)==(nt|0)?e[_>>2]=tt:e[b+20>>2]=tt,!tt)break;h=e[760]|0,tt>>>0<h>>>0&&Cr(),e[tt+24>>2]=b,_=e[a+(_e+16)>>2]|0;do if(_)if(_>>>0<h>>>0)Cr();else{e[tt+16>>2]=_,e[_+24>>2]=tt;break}while(!1);if(_=e[a+(_e+20)>>2]|0,_)if(_>>>0<(e[760]|0)>>>0)Cr();else{e[tt+20>>2]=_,e[_+24>>2]=tt;break}}}else{if(o=e[a+(_e+8)>>2]|0,h=e[a+(_e+12)>>2]|0,_=3064+(s<<1<<2)|0,(o|0)!=(_|0)&&(o>>>0<g>>>0&&Cr(),(e[o+12>>2]|0)!=(nt|0)&&Cr()),(h|0)==(o|0)){e[756]=e[756]&~(1<<s);break}(h|0)!=(_|0)?(h>>>0<g>>>0&&Cr(),_=h+8|0,(e[_>>2]|0)==(nt|0)?b=_:Cr()):b=h+8|0,e[o+12>>2]=h,e[b>>2]=o}while(!1);return ft>>>0<16?(e[yt>>2]=lt|_t&1|2,d=a+(lt|4)|0,e[d>>2]=e[d>>2]|1,a|0):(e[yt>>2]=_t&1|d|2,e[a+(d+4)>>2]=ft|3,_t=a+(lt|4)|0,e[_t>>2]=e[_t>>2]|1,o1(a+d|0,ft),a|0)}function o1(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0;Kt=a+d|0,_=e[a+4>>2]|0;do if(_&1)Ot=a,b=d;else{if(tt=e[a>>2]|0,!(_&3))return;if(ft=a+(0-tt)|0,lt=tt+d|0,_e=e[760]|0,ft>>>0<_e>>>0&&Cr(),(ft|0)==(e[761]|0)){if(h=a+(d+4)|0,_=e[h>>2]|0,(_&3|0)!=3){Ot=ft,b=lt;break}e[758]=lt,e[h>>2]=_&-2,e[a+(4-tt)>>2]=lt|1,e[Kt>>2]=lt;return}if(s=tt>>>3,tt>>>0<256){if(o=e[a+(8-tt)>>2]|0,h=e[a+(12-tt)>>2]|0,_=3064+(s<<1<<2)|0,(o|0)!=(_|0)&&(o>>>0<_e>>>0&&Cr(),(e[o+12>>2]|0)!=(ft|0)&&Cr()),(h|0)==(o|0)){e[756]=e[756]&~(1<<s),Ot=ft,b=lt;break}(h|0)!=(_|0)?(h>>>0<_e>>>0&&Cr(),_=h+8|0,(e[_>>2]|0)==(ft|0)?g=_:Cr()):g=h+8|0,e[o+12>>2]=h,e[g>>2]=o,Ot=ft,b=lt;break}g=e[a+(24-tt)>>2]|0,o=e[a+(12-tt)>>2]|0;do if((o|0)==(ft|0)){if(o=16-tt|0,h=a+(o+4)|0,_=e[h>>2]|0,!_&&(h=a+o|0,_=e[h>>2]|0,!_)){nt=0;break}for(;;){if(o=_+20|0,s=e[o>>2]|0,s){_=s,h=o;continue}if(o=_+16|0,s=e[o>>2]|0,s)_=s,h=o;else break}if(h>>>0<_e>>>0)Cr();else{e[h>>2]=0,nt=_;break}}else if(s=e[a+(8-tt)>>2]|0,s>>>0<_e>>>0&&Cr(),_=s+12|0,(e[_>>2]|0)!=(ft|0)&&Cr(),h=o+8|0,(e[h>>2]|0)==(ft|0)){e[_>>2]=o,e[h>>2]=s,nt=o;break}else Cr();while(!1);if(g){if(_=e[a+(28-tt)>>2]|0,h=3328+(_<<2)|0,(ft|0)==(e[h>>2]|0)){if(e[h>>2]=nt,!nt){e[757]=e[757]&~(1<<_),Ot=ft,b=lt;break}}else if(g>>>0<(e[760]|0)>>>0&&Cr(),_=g+16|0,(e[_>>2]|0)==(ft|0)?e[_>>2]=nt:e[g+20>>2]=nt,!nt){Ot=ft,b=lt;break}o=e[760]|0,nt>>>0<o>>>0&&Cr(),e[nt+24>>2]=g,_=16-tt|0,h=e[a+_>>2]|0;do if(h)if(h>>>0<o>>>0)Cr();else{e[nt+16>>2]=h,e[h+24>>2]=nt;break}while(!1);if(_=e[a+(_+4)>>2]|0,_)if(_>>>0<(e[760]|0)>>>0)Cr();else{e[nt+20>>2]=_,e[_+24>>2]=nt,Ot=ft,b=lt;break}else Ot=ft,b=lt}else Ot=ft,b=lt}while(!1);if(_e=e[760]|0,Kt>>>0<_e>>>0&&Cr(),_=a+(d+4)|0,h=e[_>>2]|0,h&2)e[_>>2]=h&-2,e[Ot+4>>2]=b|1,e[Ot+b>>2]=b;else{if((Kt|0)==(e[762]|0)){if(Pt=(e[759]|0)+b|0,e[759]=Pt,e[762]=Ot,e[Ot+4>>2]=Pt|1,(Ot|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((Kt|0)==(e[761]|0)){Pt=(e[758]|0)+b|0,e[758]=Pt,e[761]=Ot,e[Ot+4>>2]=Pt|1,e[Ot+Pt>>2]=Pt;return}b=(h&-8)+b|0,s=h>>>3;do if(h>>>0>=256){g=e[a+(d+24)>>2]|0,o=e[a+(d+12)>>2]|0;do if((o|0)==(Kt|0)){if(h=a+(d+20)|0,_=e[h>>2]|0,!_&&(h=a+(d+16)|0,_=e[h>>2]|0,!_)){_t=0;break}for(;;){if(o=_+20|0,s=e[o>>2]|0,s){_=s,h=o;continue}if(o=_+16|0,s=e[o>>2]|0,s)_=s,h=o;else break}if(h>>>0<_e>>>0)Cr();else{e[h>>2]=0,_t=_;break}}else if(s=e[a+(d+8)>>2]|0,s>>>0<_e>>>0&&Cr(),_=s+12|0,(e[_>>2]|0)!=(Kt|0)&&Cr(),h=o+8|0,(e[h>>2]|0)==(Kt|0)){e[_>>2]=o,e[h>>2]=s,_t=o;break}else Cr();while(!1);if(g){if(_=e[a+(d+28)>>2]|0,h=3328+(_<<2)|0,(Kt|0)==(e[h>>2]|0)){if(e[h>>2]=_t,!_t){e[757]=e[757]&~(1<<_);break}}else if(g>>>0<(e[760]|0)>>>0&&Cr(),_=g+16|0,(e[_>>2]|0)==(Kt|0)?e[_>>2]=_t:e[g+20>>2]=_t,!_t)break;h=e[760]|0,_t>>>0<h>>>0&&Cr(),e[_t+24>>2]=g,_=e[a+(d+16)>>2]|0;do if(_)if(_>>>0<h>>>0)Cr();else{e[_t+16>>2]=_,e[_+24>>2]=_t;break}while(!1);if(_=e[a+(d+20)>>2]|0,_)if(_>>>0<(e[760]|0)>>>0)Cr();else{e[_t+20>>2]=_,e[_+24>>2]=_t;break}}}else{if(o=e[a+(d+8)>>2]|0,h=e[a+(d+12)>>2]|0,_=3064+(s<<1<<2)|0,(o|0)!=(_|0)&&(o>>>0<_e>>>0&&Cr(),(e[o+12>>2]|0)!=(Kt|0)&&Cr()),(h|0)==(o|0)){e[756]=e[756]&~(1<<s);break}(h|0)!=(_|0)?(h>>>0<_e>>>0&&Cr(),_=h+8|0,(e[_>>2]|0)==(Kt|0)?yt=_:Cr()):yt=h+8|0,e[o+12>>2]=h,e[yt>>2]=o}while(!1);if(e[Ot+4>>2]=b|1,e[Ot+b>>2]=b,(Ot|0)==(e[761]|0)){e[758]=b;return}}if(_=b>>>3,b>>>0<256){h=_<<1,s=3064+(h<<2)|0,o=e[756]|0,_=1<<_,o&_?(_=3064+(h+2<<2)|0,h=e[_>>2]|0,h>>>0<(e[760]|0)>>>0?Cr():(Nt=_,Pt=h)):(e[756]=o|_,Nt=3064+(h+2<<2)|0,Pt=s),e[Nt>>2]=Ot,e[Pt+12>>2]=Ot,e[Ot+8>>2]=Pt,e[Ot+12>>2]=s;return}if(_=b>>>8,_?b>>>0>16777215?s=31:(Nt=(_+1048320|0)>>>16&8,Pt=_<<Nt,Kt=(Pt+520192|0)>>>16&4,Pt=Pt<<Kt,s=(Pt+245760|0)>>>16&2,s=14-(Kt|Nt|s)+(Pt<<s>>>15)|0,s=b>>>(s+7|0)&1|s<<1):s=0,_=3328+(s<<2)|0,e[Ot+28>>2]=s,e[Ot+20>>2]=0,e[Ot+16>>2]=0,h=e[757]|0,o=1<<s,!(h&o)){e[757]=h|o,e[_>>2]=Ot,e[Ot+24>>2]=_,e[Ot+12>>2]=Ot,e[Ot+8>>2]=Ot;return}_=e[_>>2]|0;e:do if((e[_+4>>2]&-8|0)!=(b|0)){for(s=b<<((s|0)==31?0:25-(s>>>1)|0);h=_+16+(s>>>31<<2)|0,o=e[h>>2]|0,!!o;)if((e[o+4>>2]&-8|0)==(b|0)){_=o;break e}else s=s<<1,_=o;h>>>0<(e[760]|0)>>>0&&Cr(),e[h>>2]=Ot,e[Ot+24>>2]=_,e[Ot+12>>2]=Ot,e[Ot+8>>2]=Ot;return}while(!1);h=_+8|0,o=e[h>>2]|0,Pt=e[760]|0,o>>>0>=Pt>>>0&_>>>0>=Pt>>>0||Cr(),e[o+12>>2]=Ot,e[h>>2]=Ot,e[Ot+8>>2]=o,e[Ot+12>>2]=_,e[Ot+24>>2]=0}function Eu(a,d,_,h,o,s,b,g,_e,tt,nt,lt){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0,g=g|0,_e=_e|0,tt=tt|0,nt=+nt,lt=lt|0;var ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0,Ko=0,Ro=0,Dr=0,Zr=0,us=0;if(ds=dt,dt=dt+240|0,Pt=ds+224|0,Nt=ds+216|0,kt=ds+208|0,Yt=ds+200|0,ft=ds+136|0,Kr=ds+72|0,Qn=ds,gr=ds+232|0,Kn=ds+228|0,it[ft>>3]=100,it[ft+8>>3]=100,it[ft+16>>3]=110,it[ft+24>>3]=100,it[ft+32>>3]=110,it[ft+40>>3]=110,it[ft+48>>3]=100,it[ft+56>>3]=110,it[Kr>>3]=+it[tt>>3],it[Kr+8>>3]=+it[tt+8>>3],it[Kr+16>>3]=+it[tt+16>>3],it[Kr+24>>3]=+it[tt+24>>3],it[Kr+32>>3]=+it[tt+32>>3],it[Kr+40>>3]=+it[tt+40>>3],it[Kr+48>>3]=+it[tt+48>>3],it[Kr+56>>3]=+it[tt+56>>3],Wm(ft,Kr,Qn),$t=+it[Kr>>3],Ko=+it[Kr+16>>3],Ot=$t-Ko,Jn=+it[Kr+8>>3],mo=+it[Kr+24>>3],_t=Jn-mo,ft=~~(Ot*Ot+_t*_t),_t=+it[Kr+32>>3],Ot=+it[Kr+48>>3],Dr=_t-Ot,Kt=+it[Kr+40>>3],zt=+it[Kr+56>>3],Ro=Kt-zt,Kr=~~(Dr*Dr+Ro*Ro),_t=Ko-_t,Kt=mo-Kt,yt=~~(_t*_t+Kt*Kt),$t=Ot-$t,Jn=zt-Jn,Br=~~($t*$t+Jn*Jn),ft=~~(+(((Kr|0)>(ft|0)?Kr:ft)|0)*nt*nt),yt=~~(+(((Br|0)>(yt|0)?Br:yt)|0)*nt*nt),a){for(tt=_;(tt|0)<(h|0)&(Pn(tt<<2,tt)|0)<(ft|0);)tt=tt<<1;for(ft=_;(ft|0)<(h|0)&(Pn(ft<<2,ft)|0)<(yt|0);)ft=ft<<1}else{for(tt=_;(tt|0)<(h|0)&(Pn(tt,tt)|0)<(ft|0);)tt=tt<<1;for(ft=_;(ft|0)<(h|0)&(Pn(ft,ft)|0)<(yt|0);)ft=ft<<1}Br=(tt|0)>(h|0)?h:tt,Or=(ft|0)>(h|0)?h:ft,wr=(Br|0)/(_|0)|0,Hr=(Or|0)/(_|0)|0,_t=(1-nt)*.5*10,Jn=nt*10,Kr=Pn(_,_)|0;e:do if(d){tt=A1(Kr,4)|0,tt||(fr(3,5472,Nt),pn(1));t:do if(g>>>0<2){if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=((Pn(yt,s)|0)+ft|0)*3|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((It[o+(Zr+1)>>0]|0)+(It[o+Zr>>0]|0)+(It[o+(Zr+2)>>0]|0)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}}else{if((g&-2|0)==2){if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break;for(d=(Br|0)>0,Pt=0;;){if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<2,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((It[o+(Zr|1)>>0]|0)+(It[o+Zr>>0]|0)+(It[o+(Zr|2)>>0]|0)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}if(Pt=Pt+1|0,(Pt|0)>=(Or|0))break t}}if((g&-3|0)==4){if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break;for(d=(Br|0)>0,Pt=0;;){if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<2,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((It[o+(Zr|2)>>0]|0)+(It[o+(Zr|1)>>0]|0)+(It[o+(Zr|3)>>0]|0)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}if(Pt=Pt+1|0,(Pt|0)>=(Or|0))break t}}switch(g|0){case 5:case 12:case 13:case 14:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=It[o+((Pn(yt,s)|0)+ft)>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+Zr),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}case 7:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=It[o+((Pn(yt,s)|0)+ft<<1|1)>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+Zr),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}case 8:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=It[o+((Pn(yt,s)|0)+ft<<1)>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+Zr),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}case 9:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,dr=It[o+Zr>>0]|0,Zr=It[o+(Zr|1)>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((Zr<<3&248|4)+(dr&248|4)+(dr<<5&224|Zr>>>3&28|2)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}case 10:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,dr=It[o+Zr>>0]|0,Zr=It[o+(Zr|1)>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((Zr<<2&248|4)+(dr&248|4)+(dr<<5&224|Zr>>>3&24|4)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}case 11:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)<=0)break t;d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,dr=It[o+Zr>>0]|0,us=tt+((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)<<2)|0,e[us>>2]=(e[us>>2]|0)+((((dr<<4&240|8)+(dr&240|8)+((It[o+(Zr|1)>>0]|0)&240|8)|0)>>>0)/3|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0));break}default:{fr(3,4615,Pt),Ps=278;break e}}}while(!1);if(ft=Pn(Hr,wr)|0,Kr){yt=0;do ct[lt+yt>>0]=((e[tt+(yt<<2)>>2]|0)>>>0)/(ft>>>0)|0,yt=yt+1|0;while((yt|0)<(Kr|0))}xs(tt),tt=0}else{dr=Kr*3|0,tt=A1(dr,4)|0,tt||(fr(3,5472,Yt),pn(1));do switch(g|0){case 0:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=((Pn(yt,s)|0)+ft|0)*3|0,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt+2)>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt+1)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+yt>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 1:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=((Pn(yt,s)|0)+ft|0)*3|0,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+yt>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt+1)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+(yt+2)>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 2:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=(Pn(yt,s)|0)+ft<<2,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|2)>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|1)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+yt>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 3:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=(Pn(yt,s)|0)+ft<<2,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+yt>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|1)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+(yt|2)>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 4:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=(Pn(yt,s)|0)+ft<<2,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|1)>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|2)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+(yt|3)>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 5:case 12:case 13:case 14:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=It[o+((Pn(yt,s)|0)+ft)>>0]|0,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+yt,ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+yt,a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+yt),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 6:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=(Pn(yt,s)|0)+ft<<2,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|3)>>0]|0),ft=tt+(a+1<<2)|0,e[ft>>2]=(e[ft>>2]|0)+(It[o+(yt|2)>>0]|0),a=tt+(a+2<<2)|0,e[a>>2]=(e[a>>2]|0)+(It[o+(yt|1)>>0]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 7:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(us=Pn(yt,s)|0,Zr=(ft&65534)+us<<1,Ko=+((It[o+Zr>>0]|0)+-128|0),Dr=+((It[o+(Zr+2)>>0]|0)+-128|0),Ro=+((It[o+(us+ft<<1|1)>>0]|0)+-16|0)*298.0820007324219,us=~~(Ko*516.4110107421875+Ro)>>8,Zr=~~(Ro-Ko*100.29100036621094-Dr*208.1199951171875)>>8,yt=~~(Ro+Dr*408.5830078125)>>8,us=(us|0)>0?us:0,a=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,ft=tt+(a<<2)|0,e[ft>>2]=((us|0)<255?us:255)+(e[ft>>2]|0),Zr=(Zr|0)>0?Zr:0,ft=tt+(a+1<<2)|0,e[ft>>2]=((Zr|0)<255?Zr:255)+(e[ft>>2]|0),yt=(yt|0)>0?yt:0,a=tt+(a+2<<2)|0,e[a>>2]=((yt|0)<255?yt:255)+(e[a>>2]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 8:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(yt=Pn(yt,s)|0,Zr=(ft&65534)+yt<<1,Ko=+((It[o+(Zr|1)>>0]|0)+-128|0),Dr=+((It[o+(Zr+3)>>0]|0)+-128|0),Ro=+((It[o+(yt+ft<<1)>>0]|0)+-16|0)*298.0820007324219,ft=~~(Ro+Ko*516.4110107421875)>>8,yt=~~(Ro-Ko*100.29100036621094-Dr*208.1199951171875)>>8,Zr=~~(Ro+Dr*408.5830078125)>>8,ft=(ft|0)>0?ft:0,us=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,a=tt+(us<<2)|0,e[a>>2]=((ft|0)<255?ft:255)+(e[a>>2]|0),yt=(yt|0)>0?yt:0,a=tt+(us+1<<2)|0,e[a>>2]=((yt|0)<255?yt:255)+(e[a>>2]|0),Zr=(Zr|0)>0?Zr:0,us=tt+(us+2<<2)|0,e[us>>2]=((Zr|0)<255?Zr:255)+(e[us>>2]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 9:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,yt=It[o+(Zr|1)>>0]|0,us=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,a=tt+(us<<2)|0,e[a>>2]=(yt<<3&248|4)+(e[a>>2]|0),Zr=It[o+Zr>>0]|0,a=tt+(us+1<<2)|0,e[a>>2]=(Zr<<5&224|yt>>>3&28|2)+(e[a>>2]|0),us=tt+(us+2<<2)|0,e[us>>2]=(Zr&248|4)+(e[us>>2]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 10:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,yt=It[o+(Zr|1)>>0]|0,us=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,a=tt+(us<<2)|0,e[a>>2]=(yt<<2&248|4)+(e[a>>2]|0),Zr=It[o+Zr>>0]|0,a=tt+(us+1<<2)|0,e[a>>2]=(Zr<<5&224|yt>>>3&24|4)+(e[a>>2]|0),us=tt+(us+2<<2)|0,e[us>>2]=(Zr&248|4)+(e[us>>2]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}case 11:{if(Ot=_t+100,zt=+(Or|0),$t=+(Br|0),Yt=Qn+48|0,kt=Qn+56|0,g=Qn+64|0,Lt=Qn+8|0,cn=Qn+16|0,Yn=Qn+24|0,ir=Qn+32|0,sr=Qn+40|0,h=(a|0)==1,(Or|0)>0){d=(Br|0)>0,Pt=0;do{if(Kt=Ot+Jn*(+(Pt|0)+.5)/zt,d){Nt=0;do{if(_t=Ot+Jn*(+(Nt|0)+.5)/$t,nt=+it[g>>3]+(+it[Yt>>3]*_t+Kt*+it[kt>>3]),nt==0){Ps=278;break e}Dr=(+it[cn>>3]+(_t*+it[Qn>>3]+Kt*+it[Lt>>3]))/nt,vt[gr>>2]=Dr,_t=(+it[sr>>3]+(_t*+it[Yn>>3]+Kt*+it[ir>>3]))/nt,vt[Kn>>2]=_t,X0(_e,Dr,_t,gr,Kn)|0,_t=+vt[gr>>2],h?(ft=((~~(_t+1)|0)/2|0)<<1,yt=((~~(+vt[Kn>>2]+1)|0)/2|0)<<1):(ft=~~(_t+.5),yt=~~(+vt[Kn>>2]+.5)),(ft|0)>-1&&(yt|0)<(b|0)&((yt|0)>-1&(ft|0)<(s|0))&&(Zr=(Pn(yt,s)|0)+ft<<1,us=((Pn((Pt|0)/(Hr|0)|0,_)|0)+((Nt|0)/(wr|0)|0)|0)*3|0,a=tt+(us<<2)|0,e[a>>2]=(e[a>>2]|0)+((It[o+(Zr|1)>>0]|0)&240|8),Zr=It[o+Zr>>0]|0,a=tt+(us+1<<2)|0,e[a>>2]=(Zr<<4&240|8)+(e[a>>2]|0),us=tt+(us+2<<2)|0,e[us>>2]=(Zr&240|8)+(e[us>>2]|0)),Nt=Nt+1|0}while((Nt|0)<(Br|0))}Pt=Pt+1|0}while((Pt|0)<(Or|0))}break}default:{fr(3,4615,kt),Ps=278;break e}}while(!1);if(yt=Pn(Hr,wr)|0,Kr){ft=0;do ct[lt+ft>>0]=((e[tt+(ft<<2)>>2]|0)>>>0)/(yt>>>0)|0,ft=ft+1|0;while((ft|0)<(dr|0))}xs(tt),tt=0}while(!1);return(Ps|0)==278&&(xs(tt),tt=-1),dt=ds,tt|0}function Ll(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0;Nt=dt,dt=dt+32|0,nt=Nt+24|0,tt=Nt+8|0,Kt=Nt;e:do if((d+-3|0)>>>0>5)e[_>>2]=-1,e[h>>2]=0,it[o>>3]=-1,g=-1;else{if(e[tt>>2]=0,_t=d+-1|0,e[tt+4>>2]=Pn(_t,d)|0,ft=Pn(d,d)|0,e[tt+8>>2]=ft+-1,e[tt+12>>2]=_t,_e=ct[a+(e[tt>>2]|0)>>0]|0,g=(_e&255)>0?_e:0,_e=(_e&255)<255?_e:-1,yt=ct[a+(e[tt+4>>2]|0)>>0]|0,g=(yt&255)>(g&255)?yt:g,_e=(yt&255)<(_e&255)?yt:_e,yt=ct[a+(e[tt+8>>2]|0)>>0]|0,g=(yt&255)>(g&255)?yt:g,_e=(yt&255)<(_e&255)?yt:_e,yt=ct[a+(e[tt+12>>2]|0)>>0]|0,g=((yt&255)>(g&255)?yt:g)&255,_e=((yt&255)<(_e&255)?yt:_e)&255,(g-_e|0)<30){e[_>>2]=-1,e[h>>2]=0,it[o>>3]=-1,g=-2;break}for(lt=(g+_e|0)>>>1,ct[nt>>0]=(It[a+(e[tt>>2]|0)>>0]|0)>>>0<lt>>>0&1,ct[nt+1>>0]=(It[a+(e[tt+4>>2]|0)>>0]|0)>>>0<lt>>>0&1,ct[nt+2>>0]=(It[a+(e[tt+8>>2]|0)>>0]|0)>>>0<lt>>>0&1,ct[nt+3>>0]=(It[a+(e[tt+12>>2]|0)>>0]|0)>>>0<lt>>>0&1,_e=0;;){if(g=_e+1|0,(ct[nt+_e>>0]|0)==1&&(ct[nt+((g|0)%4|0)>>0]|0)==1&&!(ct[nt+((_e+2|0)%4|0)>>0]|0)){g=_e,_e=10;break}if((g|0)<4)_e=g;else{_e=12;break}}if((_e|0)==10)e[h>>2]=g;else if((_e|0)==12&&(g|0)==4){e[_>>2]=-1,e[h>>2]=0,it[o>>3]=-1,g=-3;break}if(!ft)yt=255;else{g=255,_e=0;do yt=a+_e|0,nt=It[yt>>0]|0,tt=nt-lt|0,tt=(tt|0)<0?0-tt|0:tt,g=(tt|0)<(g|0)?tt:g,ct[yt>>0]=nt>>>0<lt>>>0&1,_e=_e+1|0;while((_e|0)<(ft|0));yt=g}switch(e[h>>2]|0){case 0:{if((d|0)>0){ft=(d|0)==0,_e=0,g=0,h=0;do{if(nt=(h|0)==(_t|0),lt=Pn(h,d)|0,!ft){tt=0;do tt|h|0&&!(nt&((tt|0)==0|(tt|0)==(_t|0)))&&(_e=E0(_e|0,g|0,1)|0,_e=(ct[a+(tt+lt)>>0]|0)!=0|_e,g=dn),tt=tt+1|0;while((tt|0)!=(d|0))}h=h+1|0}while((h|0)<(d|0))}else _e=0,g=0;break}case 1:{if((d|0)>0){ft=(d|0)>0,_e=0,g=0,h=0;do{if(nt=(h|0)==0,lt=(h|0)==(_t|0),ft)for(tt=_t;Pt=(tt|0)==(_t|0),!(nt&Pt)&&!(lt&(Pt|(tt|0)==0))&&(_e=E0(_e|0,g|0,1)|0,_e=(ct[a+((Pn(tt,d)|0)+h)>>0]|0)!=0|_e,g=dn),(tt|0)>0;)tt=tt+-1|0;h=h+1|0}while((h|0)<(d|0))}else _e=0,g=0;break}case 2:{if((d|0)>0)for(ft=(d|0)>0,_e=0,g=0,h=_t;;){if(lt=(h|0)==(_t|0)|(h|0)==0,nt=Pn(h,d)|0,ft)for(tt=_t;lt&(tt|0)==(_t|0)|(tt|h|0)==0||(_e=E0(_e|0,g|0,1)|0,_e=(ct[a+(tt+nt)>>0]|0)!=0|_e,g=dn),(tt|0)>0;)tt=tt+-1|0;if((h|0)>0)h=h+-1|0;else break}else _e=0,g=0;break}case 3:{if((d|0)>0)for(ft=(d|0)>0,_e=0,g=0,h=_t;;){if(nt=(h|0)==(_t|0),lt=(h|0)==0,ft){tt=0;do nt&(tt|0)==0|(tt|h|0)==0|lt&(tt|0)==(_t|0)||(_e=E0(_e|0,g|0,1)|0,_e=(ct[a+((Pn(tt,d)|0)+h)>>0]|0)!=0|_e,g=dn),tt=tt+1|0;while((tt|0)<(d|0))}if((h|0)>0)h=h+-1|0;else break}else _e=0,g=0;break}default:_e=0,g=0}switch(it[o>>3]=(yt|0)>30?1:+(yt|0)/30,s|0){case 259:{if(Pt=ct[4551+_e>>0]|0,s=Pt<<24>>24,b=Kt,e[b>>2]=s,e[b+4>>2]=((s|0)<0)<<31>>31,Pt<<24>>24<0){e[_>>2]=-1,it[o>>3]=-1,g=-4;break e}break}case 515:{if(g=ct[4423+_e>>0]|0,s=g<<24>>24,Pt=Kt,e[Pt>>2]=s,e[Pt+4>>2]=((s|0)<0)<<31>>31,b&&(e[b>>2]=It[4487+_e>>0]),g<<24>>24<0){e[_>>2]=-1,it[o>>3]=-1,g=-4;break e}break}case 772:case 1028:{if(g=yu(s,_e,g,0,Kt)|0,(g|0)<0){e[_>>2]=-1,it[o>>3]=-1,g=-4;break e}(b|0)!=0&(g|0)>0&&(e[b>>2]=g);break}default:Pt=Kt,e[Pt>>2]=_e,e[Pt+4>>2]=g}e[_>>2]=e[Kt>>2],g=0}while(!1);return dt=Nt,g|0}function Bo(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0;cn=dt,dt=dt+16|0,g=cn+8|0,tt=cn;e:do if(!a)e[o>>2]=0,e[s>>2]=0,it[b>>3]=-1,d=-1;else switch(d|0){case 0:{if(nt=Pn(h,h)|0,Yt=nt*3|0,kt=Qr(nt*12|0)|0,kt||(fr(3,5472,tt),pn(1)),!nt)d=0;else{d=0,g=0;do d=((It[_+g>>0]|0)^255)+d|0,g=g+1|0;while((g|0)<(Yt|0))}if(g=(d|0)/(Yt|0)|0,!nt)_e=0;else{tt=0,d=0;do zt=((It[_+tt>>0]|0)^255)-g|0,e[kt+(tt<<2)>>2]=zt,d=(Pn(zt,zt)|0)+d|0,tt=tt+1|0;while((tt|0)<(Yt|0));_e=+(d|0)}if($t=+Tr(+_e),$t/(+(h|0)*1.7320508)<15){e[o>>2]=0,e[s>>2]=0,it[b>>3]=-1,xs(kt),d=-2;break e}if(Pt=e[a>>2]|0,Ot=a+12|0,zt=a+16|0,(Pt|0)>0){Nt=e[a+8>>2]|0,_t=(nt|0)==0,tt=-1,Kt=0,_e=0,g=-1,d=-1;do{t:for(;;)switch(tt=tt+1|0,e[Nt+(tt<<2)>>2]|0){case 0:break;case 2:break t;default:{Lt=17;break t}}if((Lt|0)==17){Lt=0,lt=tt<<2,ft=e[zt>>2]|0,yt=0;do{if(a=yt+lt|0,_t)nt=0;else{_=e[(e[Ot>>2]|0)+(a<<2)>>2]|0,h=0,nt=0;do nt=(Pn(e[_+(h<<2)>>2]|0,e[kt+(h<<2)>>2]|0)|0)+nt|0,h=h+1|0;while((h|0)<(Yt|0))}Yn=+(nt|0)/+it[ft+(a<<3)>>3]/$t,a=Yn>_e,g=a?yt:g,d=a?tt:d,_e=a?Yn:_e,yt=yt+1|0}while((yt|0)!=4)}Kt=Kt+1|0}while((Kt|0)<(Pt|0))}else _e=0,g=-1,d=-1;e[s>>2]=g,e[o>>2]=d,it[b>>3]=_e,xs(kt),d=0;break e}case 1:{if(Yt=Pn(h,h)|0,kt=Qr(Yt<<2)|0,kt||(fr(3,5472,g),pn(1)),!Yt)d=0;else{d=0,g=0;do d=((It[_+g>>0]|0)^255)+d|0,g=g+1|0;while((g|0)<(Yt|0))}if(g=(d|0)/(Yt|0)|0,!Yt)_e=0;else{tt=0,d=0;do zt=((It[_+tt>>0]|0)^255)-g|0,e[kt+(tt<<2)>>2]=zt,d=(Pn(zt,zt)|0)+d|0,tt=tt+1|0;while((tt|0)<(Yt|0));_e=+(d|0)}if($t=+Tr(+_e),$t/+(h|0)<15){e[o>>2]=0,e[s>>2]=0,it[b>>3]=-1,xs(kt),d=-2;break e}if(Pt=e[a>>2]|0,Ot=a+20|0,zt=a+24|0,(Pt|0)>0){_t=e[a+8>>2]|0,Kt=(Yt|0)==0,tt=-1,Nt=0,_e=0,g=-1,d=-1;do{t:for(;;)switch(tt=tt+1|0,e[_t+(tt<<2)>>2]|0){case 0:break;case 2:break t;default:{Lt=37;break t}}if((Lt|0)==37){Lt=0,lt=tt<<2,ft=e[zt>>2]|0,yt=0;do{if(a=yt+lt|0,Kt)nt=0;else{_=e[(e[Ot>>2]|0)+(a<<2)>>2]|0,h=0,nt=0;do nt=(Pn(e[_+(h<<2)>>2]|0,e[kt+(h<<2)>>2]|0)|0)+nt|0,h=h+1|0;while((h|0)<(Yt|0))}Yn=+(nt|0)/+it[ft+(a<<3)>>3]/$t,a=Yn>_e,g=a?yt:g,d=a?tt:d,_e=a?Yn:_e,yt=yt+1|0}while((yt|0)!=4)}Nt=Nt+1|0}while((Nt|0)<(Pt|0))}else _e=0,g=-1,d=-1;e[s>>2]=g,e[o>>2]=d,it[b>>3]=_e,xs(kt),d=0;break e}default:{d=-1;break e}}while(!1);return dt=cn,d|0}function Wm(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;h=i1(8,8)|0,o=i1(8,1)|0,s=i1(8,1)|0,b=e[h>>2]|0,g=e[o>>2]|0,_e=0;do yt=a+(_e<<4)|0,tt=_e<<4,it[b+(tt<<3)>>3]=+it[yt>>3],ft=a+(_e<<4)+8|0,it[b+((tt|1)<<3)>>3]=+it[ft>>3],it[b+((tt|2)<<3)>>3]=1,it[b+((tt|3)<<3)>>3]=0,it[b+((tt|4)<<3)>>3]=0,it[b+((tt|5)<<3)>>3]=0,lt=d+(_e<<4)|0,it[b+((tt|6)<<3)>>3]=-(+it[yt>>3]*+it[lt>>3]),it[b+((tt|7)<<3)>>3]=-(+it[ft>>3]*+it[lt>>3]),it[b+((tt|8)<<3)>>3]=0,it[b+((tt|9)<<3)>>3]=0,it[b+((tt|10)<<3)>>3]=0,it[b+((tt|11)<<3)>>3]=+it[yt>>3],it[b+((tt|12)<<3)>>3]=+it[ft>>3],it[b+((tt|13)<<3)>>3]=1,nt=d+(_e<<4)+8|0,it[b+((tt|14)<<3)>>3]=-(+it[yt>>3]*+it[nt>>3]),it[b+((tt|15)<<3)>>3]=-(+it[ft>>3]*+it[nt>>3]),tt=_e<<1,it[g+(tt<<3)>>3]=+it[lt>>3],it[g+((tt|1)<<3)>>3]=+it[nt>>3],_e=_e+1|0;while((_e|0)!=4);Qu(h)|0,d2(s,h,o)|0,yt=e[s>>2]|0,it[_>>3]=+it[yt>>3],it[_+8>>3]=+it[yt+8>>3],it[_+16>>3]=+it[yt+16>>3],yt=e[s>>2]|0,it[_+24>>3]=+it[yt+24>>3],it[_+32>>3]=+it[yt+32>>3],it[_+40>>3]=+it[yt+40>>3],yt=e[s>>2]|0,it[_+48>>3]=+it[yt+48>>3],it[_+56>>3]=+it[yt+56>>3],it[_+64>>3]=1,js(h)|0,js(o)|0,js(s)|0}function yu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0;switch(Jn=dt,dt=dt+2320|0,b=Jn+2304|0,$t=Jn+864|0,Nt=Jn+784|0,dr=Jn+704|0,Ot=Jn+624|0,Pt=Jn+548|0,sr=Jn+40|0,Yn=Jn,a|0){case 772:{h=9,s=1,g=3;break}case 1028:{h=5,s=2,g=3;break}case 2830:{kt=900,_t=1472,cn=64,ir=120,Yt=127,Lt=h,s=9,g=6;break}default:_=-1}if((g|0)==3){for(a=0;ct[b+a>>0]=d&1,d=V1(d|0,_|0,1)|0,a=a+1|0,(a|0)!=13;)_=dn;kt=840,_t=1408,cn=h,ir=13,Yt=15,Lt=b,g=6}do if((g|0)==6){for(yt=s<<1,b=1,_=0;;){h=Pt+(b<<2)|0,e[h>>2]=0,a=0,d=0;do ct[Lt+d>>0]|0&&(a=a^e[kt+(((Pn(d,b)|0)%(Yt|0)|0)<<2)>>2],e[h>>2]=a),d=d+1|0;while((d|0)<(ir|0));if(_=a|0?1:_,e[h>>2]=e[_t+(a<<2)>>2],(b|0)<(yt|0))b=b+1|0;else break}if(zt=(_|0)!=0,zt){if(e[Nt>>2]=0,_=e[Pt+4>>2]|0,e[Nt+4>>2]=_,e[$t>>2]=0,e[$t+72>>2]=1,(yt|0)>1){a=1;do e[$t+(a<<2)>>2]=-1,e[$t+72+(a<<2)>>2]=0,a=a+1|0;while((a|0)<(yt|0))}for(e[dr>>2]=0,e[dr+4>>2]=0,e[Ot>>2]=-1,e[Ot+4>>2]=0,lt=0,ft=0;;){if(h=ft,ft=ft+1|0,nt=Nt+(ft<<2)|0,(_|0)==-1)if(b=h+2|0,e[dr+(b<<2)>>2]=lt,(lt|0)<0)tt=lt;else for(_=0;;)if(nt=$t+(ft*72|0)+(_<<2)|0,tt=e[nt>>2]|0,e[$t+(b*72|0)+(_<<2)>>2]=tt,e[nt>>2]=e[_t+(tt<<2)>>2],(_|0)<(lt|0))_=_+1|0;else{tt=lt;break}else{for(a=h;_=(a|0)>0,_&(e[Nt+(a<<2)>>2]|0)==-1;)a=a+-1|0;if(_){d=a;do _=d,d=d+-1|0,(e[Nt+(d<<2)>>2]|0)!=-1&&(a=(e[Ot+(a<<2)>>2]|0)<(e[Ot+(d<<2)>>2]|0)?d:a);while((_|0)>1)}d=dr+(a<<2)|0,_e=ft-a|0,tt=_e+(e[d>>2]|0)|0,b=h+2|0,tt=(lt|0)>(tt|0)?lt:tt,e[dr+(b<<2)>>2]=tt,_=0;do e[$t+(b*72|0)+(_<<2)>>2]=0,_=_+1|0;while((_|0)<(yt|0));if(_=e[d>>2]|0,d=Nt+(a<<2)|0,(_|0)>=0)for(g=0;h=e[$t+(a*72|0)+(g<<2)>>2]|0,(h|0)!=-1&&(e[$t+(b*72|0)+(_e+g<<2)>>2]=e[kt+(((h+Yt+(e[nt>>2]|0)-(e[d>>2]|0)|0)%(Yt|0)|0)<<2)>>2]),(g|0)<(_|0);)g=g+1|0;if((lt|0)>=0)for(_=0;nt=$t+(ft*72|0)+(_<<2)|0,_e=e[nt>>2]|0,g=$t+(b*72|0)+(_<<2)|0,e[g>>2]=e[g>>2]^_e,e[nt>>2]=e[_t+(_e<<2)>>2],(_|0)<(lt|0);)_=_+1|0}if(e[Ot+(b<<2)>>2]=ft-tt,(ft|0)>=(yt|0))break;if(_=e[Pt+(b<<2)>>2]|0,(_|0)==-1?_=0:_=e[kt+(_<<2)>>2]|0,h=Nt+(b<<2)|0,e[h>>2]=_,(tt|0)>=1)for(d=1;a=e[Pt+(b-d<<2)>>2]|0,(a|0)!=-1&&(Kt=e[$t+(b*72|0)+(d<<2)>>2]|0,(Kt|0)!=0)&&(_=_^e[kt+((((e[_t+(Kt<<2)>>2]|0)+a|0)%(Yt|0)|0)<<2)>>2],e[h>>2]=_),(d|0)<(tt|0);)d=d+1|0;if(_=e[_t+(_<<2)>>2]|0,e[h>>2]=_,(tt|0)>(s|0))break;lt=tt}if((tt|0)>(s|0)){_=-1;break}if((tt|0)>=0)for(_=0;Ot=$t+(b*72|0)+(_<<2)|0,e[Ot>>2]=e[_t+(e[Ot>>2]<<2)>>2],(_|0)<(tt|0);)_=_+1|0;if((tt|0)>=1)for(_=1;e[Yn+(_<<2)>>2]=e[$t+(b*72|0)+(_<<2)>>2],(_|0)<(tt|0);)_=_+1|0;g=(tt|0)<1,_=0,_e=1;do{if(g)a=1;else for(s=1,a=1;d=Yn+(s<<2)|0,h=e[d>>2]|0,(h|0)!=-1&&($t=(h+s|0)%(Yt|0)|0,e[d>>2]=$t,a=e[kt+($t<<2)>>2]^a),(s|0)<(tt|0);)s=s+1|0;a||(e[sr+(_<<2)>>2]=Yt-_e,_=_+1|0),_e=_e+1|0}while((Yt|0)>=(_e|0));if((_|0)!=(tt|0)){_=-1;break}if((tt|0)>0){_=0;do Yn=Lt+(e[sr+(_<<2)>>2]|0)|0,ct[Yn>>0]=It[Yn>>0]^1,_=_+1|0;while((_|0)<(tt|0))}}else b=0;for(a=o,e[a>>2]=0,e[a+4>>2]=0,a=1,d=0,h=0,s=0,_=ir-cn|0;sr=z2(It[Lt+_>>0]|0,0,a|0,d|0)|0,h=M0(sr|0,dn|0,h|0,s|0)|0,s=dn,sr=o,e[sr>>2]=h,e[sr+4>>2]=s,a=E0(a|0,d|0,1)|0,_=_+1|0,!((_|0)>=(ir|0));)d=dn;zt?_=e[dr+(b<<2)>>2]|0:_=0}while(!1);return dt=Jn,_|0}function Mp(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;Lt=dt,dt=dt+32|0,kt=Lt+24|0,s=Lt+16|0,_=Lt+8|0;do if(a){if(!d){fr(3,4674,_),_=-1;break}Yt=a+8|0,o=e[a+4>>2]|0;e:do if((o|0)>0){h=e[Yt>>2]|0,_=0;do{if(!(e[h+(_<<2)>>2]|0))break e;_=_+1|0}while((_|0)<(o|0))}else _=0;while(!1);if((_|0)!=(o|0)){if($t=Nl(d)|0,!$t){fr(3,4719,s),_=-1;break}_t=a+28|0,Kt=_<<2,Nt=a+12|0,Pt=a+20|0,Ot=a+16|0,zt=a+24|0,o=t1($t,4742)|0,h=0;e:for(;;){yt=h+Kt|0,ft=0,d=0;do{if(nt=(ft|0)==0,lt=(ft|0)==2,s=e[_t>>2]|0,(s|0)>0){tt=0;do{if((s|0)>0){_e=0;do{if(!o){h=17;break e}s=Gm(o)|0,o=t1(0,4742)|0,s=255-s|0,g=(((Pn(e[_t>>2]|0,tt)|0)+_e|0)*3|0)+ft|0,e[(e[(e[Nt>>2]|0)+(yt<<2)>>2]|0)+(g<<2)>>2]=s,g=(Pn(e[_t>>2]|0,tt)|0)+_e|0,b=e[(e[Pt>>2]|0)+(yt<<2)>>2]|0,g=b+(g<<2)|0,nt?e[g>>2]=s:(e[g>>2]=(e[g>>2]|0)+s,lt&&(g=b+((Pn(e[_t>>2]|0,tt)|0)+_e<<2)|0,e[g>>2]=(e[g>>2]|0)/3|0)),d=s+d|0,_e=_e+1|0,s=e[_t>>2]|0}while((_e|0)<(s|0))}tt=tt+1|0}while((tt|0)<(s|0))}ft=ft+1|0}while((ft|0)<3);if(s=e[_t>>2]|0,_e=(d|0)/(Pn(s*3|0,s)|0)|0,(Pn(s*3|0,s)|0)>0){b=e[(e[Nt>>2]|0)+(yt<<2)>>2]|0,g=0,d=0;do ft=b+(g<<2)|0,s=(e[ft>>2]|0)-_e|0,e[ft>>2]=s,d=(Pn(s,s)|0)+d|0,g=g+1|0,s=e[_t>>2]|0;while((g|0)<(Pn(s*3|0,s)|0))}else d=0;if(cn=+Tr(+ +(d|0)),it[(e[Ot>>2]|0)+(yt<<3)>>3]=cn==0?1e-7:cn,!(Pn(s,s)|0))d=0;else{s=e[(e[Pt>>2]|0)+(yt<<2)>>2]|0,b=0,d=0;do lt=s+(b<<2)|0,ft=(e[lt>>2]|0)-_e|0,e[lt>>2]=ft,d=(Pn(ft,ft)|0)+d|0,b=b+1|0,ft=e[_t>>2]|0;while((b|0)<(Pn(ft,ft)|0))}if(cn=+Tr(+ +(d|0)),it[(e[zt>>2]|0)+(yt<<3)>>3]=cn==0?1e-7:cn,h=h+1|0,(h|0)>=4){h=32;break}}if((h|0)==17){fr(3,4747,kt),xs($t),_=-1;break}else if((h|0)==32){xs($t),e[(e[Yt>>2]|0)+(_<<2)>>2]=1,e[a>>2]=(e[a>>2]|0)+1;break}}else _=-1}else fr(3,4649,Lt),_=-1;while(!1);return dt=Lt,_|0}function JA(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0;g=dt,dt=dt+32|0,b=g+16|0,s=g+8|0,_=g,o=s2(d,4854)|0;do if(o){if(xp(o,0,2)|0,_=Hm(o)|0,xp(o,0,0)|0,h=Qr(_+1|0)|0,!h){fr(3,5472,s),r2(o)|0,_=-1;break}if(s=GA(h,_,1,o)|0,r2(o)|0,s){ct[h+_>>0]=0,_=Mp(a,h)|0,xs(h);break}else{e[b>>2]=d,fr(3,4820,b),xs(h),_=-1;break}}else e[_>>2]=d,fr(3,4774,_),_=-1;while(!1);return dt=g,_|0}function u2(a,d){return a=a|0,d=d|0,d=(e[a+8>>2]|0)+(d<<2)|0,e[d>>2]|0?(e[d>>2]=0,e[a>>2]=(e[a>>2]|0)+-1,d=1):d=-1,d|0}function fr(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;if(b=dt,dt=dt+32|0,s=b+16|0,h=b,e[s>>2]=0,(d|0)!=0&(e[496]|0)<=(a|0)&&ct[d>>0]|0&&(e[h>>2]=_,o=su(s,d,h)|0,(o|0)>-1)){h=e[497]|0;do if(h){if(!(e[498]|0)){K2[h&15](e[s>>2]|0);break}if(_=bo()|0,a=e[500]|0,(_|0)==(e[499]|0)){(a|0)>0&&(K2[h&15](e[502]|0),e[500]=0,h=e[497]|0),K2[h&15](e[s>>2]|0);break}if(h=e[501]|0,(a|0)<(h|0))if(d=(e[502]|0)+a|0,(o|0)<(-3-a+h|0)){XA(d,e[s>>2]|0)|0,e[500]=(e[500]|0)+o;break}else{ct[d>>0]=46,ct[d+1>>0]=46,ct[d+2>>0]=46,ct[d+3>>0]=0,e[500]=e[501];break}}else F2(e[s>>2]|0,e[659]|0)|0;while(!1);xs(e[s>>2]|0)}dt=b}function wu(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0;g=0;do{h=a+(g<<5)|0,o=a+(g<<5)+8|0,s=a+(g<<5)+16|0,b=0;do it[_+(g<<5)+(b<<3)>>3]=+it[h>>3]*+it[d+(b<<3)>>3]+ +it[o>>3]*+it[d+32+(b<<3)>>3]+ +it[s>>3]*+it[d+64+(b<<3)>>3],b=b+1|0;while((b|0)!=4);b=_+(g<<5)+24|0,it[b>>3]=+it[a+(g<<5)+24>>3]+ +it[b>>3],g=g+1|0}while((g|0)!=3);return 0}function ZA(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0;g=i1(4,4)|0,_=e[g>>2]|0,h=e[g>>2]|0,o=e[g>>2]|0,s=e[g>>2]|0,b=0;do _e=b<<2,it[_+(_e<<3)>>3]=+it[a+(b<<5)>>3],it[h+(1+_e<<3)>>3]=+it[a+(b<<5)+8>>3],it[o+(2+_e<<3)>>3]=+it[a+(b<<5)+16>>3],it[s+(3+_e<<3)>>3]=+it[a+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3);_=e[g>>2]|0,h=_+96|0,e[h>>2]=0,e[h+4>>2]=0,e[h+8>>2]=0,e[h+12>>2]=0,e[h+16>>2]=0,e[h+20>>2]=0,it[_+120>>3]=1,Qu(g)|0,_=e[g>>2]|0,h=e[g>>2]|0,o=e[g>>2]|0,s=e[g>>2]|0,b=0;do _e=b<<2,it[d+(b<<5)>>3]=+it[_+(_e<<3)>>3],it[d+(b<<5)+8>>3]=+it[h+(1+_e<<3)>>3],it[d+(b<<5)+16>>3]=+it[o+(2+_e<<3)>>3],it[d+(b<<5)+24>>3]=+it[s+(3+_e<<3)>>3],b=b+1|0;while((b|0)!=3);return js(g)|0,0}function Sp(a){switch(a=a|0,a|0){case 1:case 0:{a=3;break}case 6:case 4:case 3:case 2:{a=4;break}case 14:case 13:case 12:case 5:{a=1;break}case 11:case 10:case 9:case 8:case 7:{a=2;break}default:a=0}return a|0}function Tp(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0;do if((a|0)!=0&(d|0)!=0&(_|0)!=0){if(o=au(d,47)|0,!o){ct[a>>0]=0;break}o=o+((h|0)!=0&1)-d|0,(o+1|0)>>>0<=_>>>0?(vu(a,d,o)|0,ct[a+o>>0]=0):a=0}else a=0;while(!1);return a|0}function i1(a,d){a=a|0,d=d|0;var _=0,h=0;_=Qr(12)|0;do if(_)if(h=Qr(Pn(a<<3,d)|0)|0,e[_>>2]=h,h){e[_+4>>2]=a,e[_+8>>2]=d;break}else{xs(_),_=0;break}else _=0;while(!1);return _|0}function Rp(a){a=a|0;var d=0;return d=i1(e[a+4>>2]|0,e[a+8>>2]|0)|0,d?(Km(d,a)|0)<0&&(js(d)|0,d=0):d=0,d|0}function h2(a,d){a=a|0,d=d|0;var _=0;return _=i1(e[a+4>>2]|0,e[d+8>>2]|0)|0,_?(d2(_,a,d)|0)<0&&(js(_)|0,_=0):_=0,_|0}function $A(a){a=a|0;var d=0;return d=i1(e[a+8>>2]|0,e[a+4>>2]|0)|0,d?(Vu(d,a)|0)<0&&(js(d)|0,d=0):d=0,d|0}function Km(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0;if(_=e[a+4>>2]|0,(_|0)==(e[d+4>>2]|0)&&(g=e[a+8>>2]|0,(g|0)==(e[d+8>>2]|0)))if((_|0)>0){h=(g|0)>0,tt=0;do{if(o=Pn(g,tt)|0,h){s=e[d>>2]|0,b=e[a>>2]|0,_e=0;do nt=o+_e|0,it[b+(nt<<3)>>3]=+it[s+(nt<<3)>>3],_e=_e+1|0;while((_e|0)<(g|0))}tt=tt+1|0}while((tt|0)<(_|0));_=0}else _=0;else _=-1;return _|0}function js(a){return a=a|0,a&&(xs(e[a>>2]|0),xs(a)),0}function d2(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0;if(lt=e[d+8>>2]|0,(lt|0)==(e[_+4>>2]|0)&&(Kt=e[a+4>>2]|0,(Kt|0)==(e[d+4>>2]|0))&&(ft=e[a+8>>2]|0,(ft|0)==(e[_+8>>2]|0)))if(Nt=(ft|0)>0?ft:0,(Kt|0)>0)for(yt=(ft|0)>0,_t=(lt|0)>0,_e=e[a>>2]|0,nt=0;;){if(a=Pn(lt,nt)|0,yt)for(o=0,tt=_e;;){if(it[tt>>3]=0,_t)for(h=0,s=0,b=(e[d>>2]|0)+(a<<3)|0,g=(e[_>>2]|0)+(o<<3)|0;h=h+ +it[b>>3]*+it[g>>3],it[tt>>3]=h,s=s+1|0,!((s|0)>=(lt|0));)b=b+8|0,g=g+(ft<<3)|0;if(o=o+1|0,(o|0)>=(ft|0))break;tt=tt+8|0}if(nt=nt+1|0,(nt|0)>=(Kt|0)){a=0;break}else _e=_e+(Nt<<3)|0}else a=0;else a=-1;return a|0}function Al(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0;_t=e[a+4>>2]|0,Nt=e[a+8>>2]|0,o=(_t|0)<(Nt|0)?_t:Nt;e:do if(!((_t|0)<2|(Nt|0)<2)&&(e[d+8>>2]|0)==(Nt|0)&&(e[d+4>>2]|0)==(o|0)&&(Pt=_+4|0,(e[Pt>>2]|0)==(o|0))&&(s=h+4|0,(e[s>>2]|0)==(Nt|0))&&(Ot=Rp(a)|0,(Ot|0)!=0)){if(Kt=+Tr(+ +(_t|0)),ft=e[Ot+4>>2]|0,yt=e[Ot+8>>2]|0,!((ft|0)<1|(yt|0)<1)&&(e[s>>2]|0)==(yt|0)){if(yt){o=e[h>>2]|0,a=0;do it[o+(a<<3)>>3]=0,a=a+1|0;while((a|0)!=(yt|0))}if(lt=e[Ot>>2]|0,ft)for(o=(yt|0)==0,a=0,g=lt;;){if(!o)for(s=0,_e=g,tt=e[h>>2]|0;it[tt>>3]=+it[_e>>3]+ +it[tt>>3],s=s+1|0,(s|0)!=(yt|0);)_e=_e+8|0,tt=tt+8|0;if(a=a+1|0,(a|0)==(ft|0))break;g=g+(yt<<3)|0}if(b=+(ft|0),yt){o=e[h>>2]|0,a=0;do nt=o+(a<<3)|0,it[nt>>3]=+it[nt>>3]/b,a=a+1|0;while((a|0)!=(yt|0))}if(tt=(yt|0)>0?yt:0,(ft|0)>0)for(o=(yt|0)>0,a=0,g=lt;;){if(o)for(s=0,_e=g,nt=e[h>>2]|0;it[_e>>3]=+it[_e>>3]-+it[nt>>3],s=s+1|0,!((s|0)>=(yt|0));)_e=_e+8|0,nt=nt+8|0;if(a=a+1|0,(a|0)>=(ft|0))break;g=g+(tt<<3)|0}if(o=Pn(Nt,_t)|0,(o|0)>0){a=0;do h=lt+(a<<3)|0,it[h>>3]=+it[h>>3]/Kt,a=a+1|0;while((a|0)<(o|0))}if(o=bv(Ot,d,_)|0,js(Ot)|0,g=e[Pt>>2]|0,(g|0)>0){a=e[_>>2]|0,s=0,b=0;do b=b+ +it[a+(s<<3)>>3],s=s+1|0;while((s|0)<(g|0))}else b=0;if((g|0)<=0)break;for(a=e[_>>2]|0,s=0;;)if(_=a+(s<<3)|0,it[_>>3]=+it[_>>3]/b,s=s+1|0,(s|0)>=(g|0))break e}js(Ot)|0,o=-1}else o=-1;while(!1);return o|0}function bv(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0,Ko=0,Ro=0,Dr=0,Zr=0,us=0,Oo=0;Ko=dt,dt=dt+16|0,zt=Ko,dr=a+4|0,wr=e[dr>>2]|0,Or=a+8|0,Kr=e[Or>>2]|0,ds=(Kr|0)<(wr|0)?Kr:wr;e:do if(!((wr|0)<2|(Kr|0)<2)&&(Ps=d+8|0,(e[Ps>>2]|0)==(Kr|0))&&(Br=d+4|0,(e[Br>>2]|0)==(ds|0))&&(Qn=_+4|0,(e[Qn>>2]|0)==(ds|0))){if(mo=i1(ds,ds)|0,gr=mo+4|0,(e[gr>>2]|0)==(ds|0)&&(Kn=mo+8|0,(e[Kn>>2]|0)==(ds|0))){if(Jn=(wr|0)<(Kr|0),Kt=e[dr>>2]|0,Nt=e[Or>>2]|0,Jn){if((ds|0)!=(Kt|0)){js(mo)|0,h=-1;break}if(s=e[mo>>2]|0,(ds|0)>0)for(tt=(ds|0)==0,b=(Nt|0)>0,nt=0,_t=s;;){if(_e=Pn(nt,Nt)|0,!tt)for(ft=0,Kt=_t;;){if((ft|0)>=(nt|0)){if(h=e[a>>2]|0,it[Kt>>3]=0,b)for(g=0,lt=h+(_e<<3)|0,h=h+((Pn(ft,Nt)|0)<<3)|0,o=0;g=g+ +it[lt>>3]*+it[h>>3],it[Kt>>3]=g,o=o+1|0,!((o|0)>=(Nt|0));)lt=lt+8|0,h=h+8|0}else it[Kt>>3]=+it[s+((Pn(ft,ds)|0)+nt<<3)>>3];if(ft=ft+1|0,(ft|0)==(ds|0))break;Kt=Kt+8|0}if(nt=nt+1|0,(nt|0)>=(ds|0))break;_t=_t+(ds<<3)|0}}else{if((ds|0)!=(Nt|0)){js(mo)|0,h=-1;break}if(s=e[mo>>2]|0,(ds|0)>0)for(_e=(ds|0)==0,b=(Kt|0)>0,tt=0,ft=s;;){if(!_e)for(lt=0,_t=ft;;){if((lt|0)>=(tt|0)){if(h=e[a>>2]|0,it[_t>>3]=0,b)for(g=0,nt=h+(tt<<3)|0,h=h+(lt<<3)|0,o=0;g=g+ +it[nt>>3]*+it[h>>3],it[_t>>3]=g,o=o+1|0,!((o|0)>=(Kt|0));)nt=nt+(ds<<3)|0,h=h+(ds<<3)|0}else it[_t>>3]=+it[s+((Pn(lt,ds)|0)+tt<<3)>>3];if(lt=lt+1|0,(lt|0)==(ds|0))break;_t=_t+8|0}if(tt=tt+1|0,(tt|0)>=(ds|0))break;ft=ft+(ds<<3)|0}}do if((ds|0)>=2&&(e[Qn>>2]|0)==(ds|0)&&(Hr=J0(ds)|0,(Hr|0)!=0)){if(sr=ds+-1|0,e[zt+4>>2]=sr,e[zt>>2]=(e[Hr>>2]|0)+8,(H2(mo,_,zt)|0)<0){L1(Hr)|0;break}if(cn=e[Hr>>2]|0,it[cn>>3]=0,(sr|0)>0){Yn=(ds|0)==0,ir=sr;do{for(o=ir;!((o|0)<=0);)if(Ot=+Lr(+ +it[cn+(o<<3)>>3]),h=o+-1|0,Lt=e[_>>2]|0,$t=+Lr(+ +it[Lt+(h<<3)>>3]),Ot>($t+ +Lr(+ +it[Lt+(o<<3)>>3]))*1e-6)o=h;else break;Yt=ir,ir=ir+-1|0;t:do if((o|0)!=(Yt|0)){lt=cn+(Yt<<3)|0,ft=cn+(o+1<<3)|0,_t=(o|0)<(Yt|0),kt=0;do{if((kt|0)>99)break t;if(kt=kt+1|0,Kt=e[_>>2]|0,Nt=Kt+(ir<<3)|0,zt=Kt+(Yt<<3)|0,g=+it[zt>>3],yt=(+it[Nt>>3]-g)*.5,Pt=+it[lt>>3],Pt=Pt*Pt,Ot=+Tr(+(Pt+yt*yt)),_t)for(Lt=o,yt=+it[Kt+(o<<3)>>3]-g+Pt/(yt+(yt<0?-Ot:Ot)),Pt=+it[ft>>3];;){g=+Lr(+yt);do if(!(g>=+Lr(+Pt)))Ot=-yt/Pt,$t=1/+Tr(+(Ot*Ot+1)),Ot=Ot*$t;else{if(!(g>1e-16)){Ot=1,$t=0;break}g=-Pt/yt,$t=1/+Tr(+(g*g+1)),Ot=$t,$t=g*$t}while(!1);if(b=Kt+(Lt<<3)|0,Zr=+it[b>>3],nt=Lt,Lt=Lt+1|0,_e=Kt+(Lt<<3)|0,Dr=+it[_e>>3],g=Zr-Dr,tt=cn+(Lt<<3)|0,Ro=$t*($t*g+Ot*2*+it[tt>>3]),it[b>>3]=Zr-Ro,it[_e>>3]=Dr+Ro,(nt|0)>(o|0)&&(_e=cn+(nt<<3)|0,it[_e>>3]=Ot*+it[_e>>3]-Pt*$t),Zr=+it[tt>>3],it[tt>>3]=Zr+$t*(Ot*g-$t*2*Zr),b=Pn(nt,ds)|0,_e=Pn(Lt,ds)|0,Yn)g=Pt;else{h=e[mo>>2]|0,s=0;do Oo=h+(s+b<<3)|0,yt=+it[Oo>>3],us=h+(s+_e<<3)|0,g=+it[us>>3],it[Oo>>3]=Ot*yt-$t*g,it[us>>3]=$t*yt+Ot*g,s=s+1|0;while((s|0)!=(ds|0))}if((nt|0)<(ir|0)&&(yt=+it[tt>>3],Oo=cn+(nt+2<<3)|0,g=+it[Oo>>3],it[Oo>>3]=Ot*g,g=-($t*g)),(Lt|0)>=(Yt|0))break;Pt=g}Dr=+Lr(+ +it[lt>>3]),Zr=+Lr(+ +it[Nt>>3])}while(Dr>(Zr+ +Lr(+ +it[zt>>3]))*1e-6)}while(!1)}while((Yt|0)>1)}if(sr){_e=e[_>>2]|0,tt=e[mo>>2]|0,nt=(ds|0)==0,lt=0;do{if(s=_e+(lt<<3)|0,yt=+it[s>>3],b=lt,lt=lt+1|0,(lt|0)<(ds|0)){h=b,o=lt,g=yt;do Zr=+it[_e+(o<<3)>>3],Oo=Zr>g,g=Oo?Zr:g,h=Oo?o:h,o=o+1|0;while((o|0)<(ds|0))}else h=b,g=yt;if(it[_e+(h<<3)>>3]=yt,it[s>>3]=g,!nt)for(s=0,o=tt+((Pn(h,ds)|0)<<3)|0,h=tt+((Pn(b,ds)|0)<<3)|0;Zr=+it[o>>3],it[o>>3]=+it[h>>3],it[h>>3]=Zr,s=s+1|0,(s|0)!=(ds|0);)o=o+8|0,h=h+8|0}while((lt|0)!=(sr|0))}L1(Hr)|0;t:do if(Jn){zt=e[dr>>2]|0,Nt=e[Or>>2]|0;do if(!((zt|0)<1|(Nt|0)<1)){if((e[gr>>2]|0)!=(zt|0)||(e[Kn>>2]|0)!=(zt|0)||(e[Br>>2]|0)!=(zt|0)||(e[Ps>>2]|0)!=(Nt|0)||(e[Qn>>2]|0)!=(zt|0))break;o=e[d>>2]|0;i:do if((zt|0)>0){ft=e[_>>2]|0,Kt=(Nt|0)==0,_t=(zt|0)==0,h=0;do{if(g=+it[ft+(h<<3)>>3],g<1e-16)break i;if(yt=1/+Tr(+ +Lr(+g)),tt=Pn(h,zt)|0,!Kt)for(nt=0,lt=o;;){if(_t)g=0;else for(s=0,b=(e[mo>>2]|0)+(tt<<3)|0,_e=(e[a>>2]|0)+(nt<<3)|0,g=0;g=g+ +it[b>>3]*+it[_e>>3],s=s+1|0,(s|0)!=(zt|0);)b=b+8|0,_e=_e+(Nt<<3)|0;if(it[lt>>3]=yt*g,nt=nt+1|0,(nt|0)==(Nt|0))break;lt=lt+8|0}o=o+(Nt<<3)|0,h=h+1|0}while((h|0)<(zt|0))}else h=0;while(!1);if(nt=(Nt|0)>0?Nt:0,(h|0)>=(zt|0))break t;for(_e=e[_>>2]|0,tt=(Nt|0)>0,s=o;;){if(it[_e+(h<<3)>>3]=0,tt)for(o=0,b=s;it[b>>3]=0,o=o+1|0,!((o|0)>=(Nt|0));)b=b+8|0;if(h=h+1|0,(h|0)>=(zt|0))break t;s=s+(nt<<3)|0}}while(!1);js(mo)|0,h=-1;break e}else{s=e[d>>2]|0,ft=(wr|0)>(Kr|0)?Kr:wr;i:do if((ds|0)>0){tt=e[_>>2]|0,nt=(ft|0)==0,h=0,lt=e[mo>>2]|0;do{if(+it[tt+(h<<3)>>3]<1e-16)break i;if(!nt)for(o=0,b=lt,_e=s;it[_e>>3]=+it[b>>3],o=o+1|0,(o|0)!=(ft|0);)b=b+8|0,_e=_e+8|0;lt=lt+(ft<<3)|0,s=s+(ft<<3)|0,h=h+1|0}while((h|0)<(ds|0))}else h=0;while(!1);if(nt=(ft|0)>0?ft:0,(h|0)<(ds|0))for(_e=e[_>>2]|0,tt=(ds|0)>0;;){if(it[_e+(h<<3)>>3]=0,tt)for(o=0,b=s;it[b>>3]=0,o=o+1|0,!((o|0)>=(ds|0));)b=b+8|0;if(h=h+1|0,(h|0)>=(ds|0))break;s=s+(nt<<3)|0}}while(!1);js(mo)|0,h=0;break e}while(!1);js(mo)|0,h=-1;break}js(mo)|0,h=-1}else h=-1;while(!1);return dt=Ko,h|0}function Qu(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0;Ot=dt,dt=dt+2e3|0,Pt=Ot,d=e[a>>2]|0,Nt=e[a+4>>2]|0;e:do if((Nt|0)<=500){switch(Nt|0){case 0:{d=0;break e}case 1:{it[d>>3]=1/+it[d>>3];break e}default:}if((Nt|0)>0){a=0;do e[Pt+(a<<2)>>2]=a,a=a+1|0;while((a|0)<(Nt|0))}if(Kt=d+(Nt+-1<<3)|0,(Nt|0)>0)for(tt=(Nt|0)==0,ft=(Nt|0)==1,lt=(Nt|0)==0,nt=(Nt|0)==1,yt=Kt,a=0,_t=0;;){if(_e=d+((Pn(_t,Nt)|0)<<3)|0,(_t|0)<(Nt|0))for(h=_t,o=0,_=_e;zt=+Lr(+ +it[_>>3]),g=o<zt,a=g?h:a,o=g?zt:o,h=h+1|0,!((h|0)>=(Nt|0));)_=_+(Nt<<3)|0;else o=0;if(o<=1e-10){d=0;break e}if(s=Pt+(a<<2)|0,b=e[s>>2]|0,g=Pt+(_t<<2)|0,e[s>>2]=e[g>>2],e[g>>2]=b,!tt)for(_=0,h=d+((Pn(a,Nt)|0)<<3)|0,s=_e;zt=+it[h>>3],it[h>>3]=+it[s>>3],it[s>>3]=zt,_=_+1|0,(_|0)!=(Nt|0);)h=h+8|0,s=s+8|0;if(o=+it[_e>>3],!ft){_=1,h=_e;do g=h,h=h+8|0,it[g>>3]=+it[h>>3]/o,_=_+1|0;while((_|0)!=(Nt|0))}if(it[yt>>3]=1/o,!lt)for(s=0,b=Kt;;){if((s|0)!=(_t|0)){if(_=d+((Pn(s,Nt)|0)<<3)|0,o=+it[_>>3],!nt)for(g=1,h=_e;$t=_,_=_+8|0,it[$t>>3]=+it[_>>3]-o*+it[h>>3],g=g+1|0,(g|0)!=(Nt|0);)h=h+8|0;it[b>>3]=-(o*+it[yt>>3])}if(s=s+1|0,(s|0)==(Nt|0))break;b=b+(Nt<<3)|0}if(_t=_t+1|0,(_t|0)>=(Nt|0))break;yt=yt+(Nt<<3)|0}if((Nt|0)>0){s=(Nt|0)>0,b=0;do{a=Pt+(b<<2)|0;t:do if((b|0)<(Nt|0)){_=b;do{if((e[a>>2]|0)==(b|0))break t;_=_+1|0,a=Pt+(_<<2)|0}while((_|0)<(Nt|0))}else _=b;while(!1);if(e[a>>2]=e[Pt+(b<<2)>>2],s)for(h=0,a=d+(_<<3)|0,_=d+(b<<3)|0;zt=+it[a>>3],it[a>>3]=+it[_>>3],it[_>>3]=zt,h=h+1|0,!((h|0)>=(Nt|0));)a=a+(Nt<<3)|0,_=_+(Nt<<3)|0;b=b+1|0}while((b|0)<(Nt|0))}}else d=0;while(!1);return dt=Ot,((d|0)==0)<<31>>31|0}function Vu(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0;if(b=e[a+4>>2]|0,(b|0)==(e[d+8>>2]|0)&&(_e=e[a+8>>2]|0,(_e|0)==(e[d+4>>2]|0)))if(tt=(_e|0)>0?_e:0,(b|0)>0)for(g=(_e|0)>0,h=e[a>>2]|0,s=0;;){if(g)for(a=0,_=(e[d>>2]|0)+(s<<3)|0,o=h;it[o>>3]=+it[_>>3],a=a+1|0,!((a|0)>=(_e|0));)_=_+(b<<3)|0,o=o+8|0;if(s=s+1|0,(s|0)>=(b|0)){a=0;break}else h=h+(tt<<3)|0}else a=0;else a=-1;return a|0}function f2(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0;o=+(d|0)/+(e[a>>2]|0),s=+(_|0)/+(e[a+4>>2]|0),e[h>>2]=d,e[h+4>>2]=_,d=0;do it[h+8+(d<<3)>>3]=o*+it[a+8+(d<<3)>>3],it[h+40+(d<<3)>>3]=s*+it[a+40+(d<<3)>>3],it[h+72+(d<<3)>>3]=+it[a+72+(d<<3)>>3],d=d+1|0;while((d|0)!=4);switch(d=e[a+176>>2]|0,d|0){case 4:{it[h+104>>3]=+it[a+104>>3],it[h+112>>3]=+it[a+112>>3],it[h+120>>3]=+it[a+120>>3],it[h+128>>3]=+it[a+128>>3],it[h+136>>3]=o*+it[a+136>>3],it[h+144>>3]=s*+it[a+144>>3],it[h+152>>3]=o*+it[a+152>>3],it[h+160>>3]=s*+it[a+160>>3],it[h+168>>3]=+it[a+168>>3],b=8;break}case 3:{it[h+104>>3]=o*+it[a+104>>3],it[h+112>>3]=s*+it[a+112>>3],it[h+120>>3]=+it[a+120>>3],it[h+128>>3]=+it[a+128>>3],it[h+136>>3]=+it[a+136>>3]/(o*s),it[h+144>>3]=+it[a+144>>3]/(s*(o*o*s)),b=8;break}case 2:{it[h+104>>3]=o*+it[a+104>>3],it[h+112>>3]=s*+it[a+112>>3],it[h+120>>3]=+it[a+120>>3],it[h+128>>3]=+it[a+128>>3]/(o*s),it[h+136>>3]=+it[a+136>>3]/(s*(o*o*s)),b=8;break}case 1:{it[h+104>>3]=o*+it[a+104>>3],it[h+112>>3]=s*+it[a+112>>3],it[h+120>>3]=+it[a+120>>3],it[h+128>>3]=+it[a+128>>3]/(o*s),b=8;break}default:d=-1}return(b|0)==8&&(e[h+176>>2]=d,d=0),d|0}function n1(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0;if(s=dt,dt=dt+96|0,o=s,+it[a+88>>3]>=0){h=0;do it[o+(h<<5)>>3]=+it[a+(h<<5)>>3],it[o+(h<<5)+8>>3]=+it[a+(h<<5)+8>>3],it[o+(h<<5)+16>>3]=+it[a+(h<<5)+16>>3],it[o+(h<<5)+24>>3]=+it[a+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else{h=0;do it[o+(h<<5)>>3]=-+it[a+(h<<5)>>3],it[o+(h<<5)+8>>3]=-+it[a+(h<<5)+8>>3],it[o+(h<<5)+16>>3]=-+it[a+(h<<5)+16>>3],it[o+(h<<5)+24>>3]=-+it[a+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}it[d>>3]=0,it[d+8>>3]=0,it[d+16>>3]=0,it[d+24>>3]=0,it[d+32>>3]=0,it[d+40>>3]=0,it[d+48>>3]=0,it[d+56>>3]=0,it[d+64>>3]=0,it[d+72>>3]=0,it[d+80>>3]=0,it[d+88>>3]=0,b=+it[o+64>>3],ft=+it[o+72>>3],yt=+it[o+80>>3],Yt=+Tr(+(b*b+ft*ft+yt*yt)),a=d+80|0,it[a>>3]=Yt,Yt=b/Yt,zt=_+64|0,it[zt>>3]=Yt,ft=ft/+it[a>>3],Pt=_+72|0,it[Pt>>3]=ft,yt=yt/+it[a>>3],_t=_+80|0,it[_t>>3]=yt,lt=_+88|0,it[lt>>3]=+it[o+88>>3]/+it[a>>3],b=+it[o+32>>3],_e=+it[o+40>>3],Nt=+it[o+48>>3],yt=Yt*b+ft*_e+yt*Nt,nt=d+48|0,it[nt>>3]=yt,b=b-yt*+it[zt>>3],_e=_e-yt*+it[Pt>>3],yt=Nt-yt*+it[_t>>3],Nt=+Tr(+(b*b+_e*_e+yt*yt)),tt=d+40|0,it[tt>>3]=Nt,$t=_+32|0,it[$t>>3]=b/Nt,Ot=_+40|0,it[Ot>>3]=_e/+it[tt>>3],Kt=_+48|0,it[Kt>>3]=yt/+it[tt>>3],yt=+it[o>>3],_e=+it[o+8>>3],Nt=+it[o+16>>3],b=+it[zt>>3]*yt+ +it[Pt>>3]*_e+ +it[_t>>3]*Nt,h=d+16|0,it[h>>3]=b,ft=+it[$t>>3]*yt+ +it[Ot>>3]*_e+ +it[Kt>>3]*Nt,g=d+8|0,it[g>>3]=ft,yt=yt-ft*+it[$t>>3]-b*+it[zt>>3],_e=_e-ft*+it[Ot>>3]-b*+it[Pt>>3],b=Nt-ft*+it[Kt>>3]-b*+it[_t>>3],ft=+Tr(+(yt*yt+_e*_e+b*b)),it[d>>3]=ft,it[_>>3]=yt/ft,it[_+8>>3]=_e/+it[d>>3],it[_+16>>3]=b/+it[d>>3],b=+it[lt>>3],_e=(+it[o+56>>3]-+it[nt>>3]*b)/+it[tt>>3],it[_+56>>3]=_e,it[_+24>>3]=(+it[o+24>>3]-_e*+it[g>>3]-+it[h>>3]*b)/+it[d>>3],h=0;do $t=d+(h<<5)|0,it[$t>>3]=+it[$t>>3]/+it[a>>3],$t=d+(h<<5)+8|0,it[$t>>3]=+it[$t>>3]/+it[a>>3],$t=d+(h<<5)+16|0,it[$t>>3]=+it[$t>>3]/+it[a>>3],h=h+1|0;while((h|0)!=3);return dt=s,0}function Mv(a,d,_,h,o,s){a=a|0,d=+d,_=+_,h=h|0,o=o|0,s=s|0;var b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0;switch(s|0){case 4:{Kt=+it[a>>3],Nt=+it[a+8>>3],Pt=+it[a+16>>3],Ot=+it[a+24>>3],Lt=+it[a+32>>3],$t=+it[a+40>>3],Yt=+it[a+48>>3],kt=+it[a+56>>3],zt=+it[a+64>>3],_t=(d-Yt)/Lt,_e=(_-kt)/$t,_=_t*_t,g=_e*_e,tt=Pt*2,nt=Ot*6,lt=Ot*2,ft=Pt*6;e:do if(g!=0|_!=0)for(s=1,b=_t,d=_e;;){if(sr=g+_,ir=Kt*sr+1+sr*(Nt*sr),cn=_*3,Yn=g*cn,b=b-(Ot*(sr+_*2)+(d*(tt*b)+b*ir)-_t)/(nt*b+(tt*d+(Kt*(g+cn)+1+Nt*(g*g+(_*(_*5)+Yn))))),cn=lt*b,d=d-(Pt*(g*2+sr)+d*ir+d*cn-_e)/(ft*d+(Kt*(_+g*3)+1+Nt*(g*(g*5)+(_*_+Yn)))+cn),(s|0)==4)break e;if(_=b*b,g=d*d,g!=0|_!=0)s=s+1|0;else{b=0,d=0;break}}else b=0,d=0;while(!1);it[h>>3]=Yt+Lt*b/zt,it[o>>3]=kt+$t*d/zt,s=0;break}case 3:{_t=+it[a>>3],b=(d-_t)/+it[a+24>>3],yt=a+8|0,d=_-+it[yt>>3],_e=+it[a+32>>3]/1e8,tt=+it[a+40>>3]/1e8/1e5,_=b*b+d*d,nt=+Tr(+_),lt=_e*3,ft=tt*5;e:do if(nt!=0)for(s=1,g=nt;;){if(sr=g-(g*(1-_e*_-_*(tt*_))-nt)/(1-lt*_-_*(ft*_)),b=b*sr/g,d=d*sr/g,(s|0)==3)break e;if(_=b*b+d*d,g=+Tr(+_),g==0){b=0,d=0;break}else s=s+1|0}else b=0,d=0;while(!1);s=a+16|0,it[h>>3]=b/+it[s>>3]+_t,it[o>>3]=d/+it[s>>3]+ +it[yt>>3],s=0;break}case 2:{_t=+it[a>>3],b=d-_t,yt=a+8|0,d=_-+it[yt>>3],_e=+it[a+24>>3]/1e8,tt=+it[a+32>>3]/1e8/1e5,_=b*b+d*d,nt=+Tr(+_),lt=_e*3,ft=tt*5;e:do if(nt!=0)for(s=1,g=nt;;){if(sr=g-(g*(1-_e*_-_*(tt*_))-nt)/(1-lt*_-_*(ft*_)),b=b*sr/g,d=d*sr/g,(s|0)==3)break e;if(_=b*b+d*d,g=+Tr(+_),g==0){b=0,d=0;break}else s=s+1|0}else b=0,d=0;while(!1);s=a+16|0,it[h>>3]=b/+it[s>>3]+_t,it[o>>3]=d/+it[s>>3]+ +it[yt>>3],s=0;break}case 1:{lt=+it[a>>3],b=d-lt,yt=a+8|0,d=_-+it[yt>>3],_e=+it[a+24>>3]/1e8,_=b*b+d*d,tt=+Tr(+_),nt=_e*3;e:do if(tt!=0)for(s=1,g=tt;;){if(sr=g-(g*(1-_e*_)-tt)/(1-nt*_),b=b*sr/g,d=d*sr/g,(s|0)==3)break e;if(_=b*b+d*d,g=+Tr(+_),g==0){b=0,d=0;break}else s=s+1|0}else b=0,d=0;while(!1);s=a+16|0,it[h>>3]=b/+it[s>>3]+lt,it[o>>3]=d/+it[s>>3]+ +it[yt>>3],s=0;break}default:s=-1}return s|0}function Xm(a,d,_,h,o,s){a=a|0,d=+d,_=+_,h=h|0,o=o|0,s=s|0;var b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0;switch(s|0){case 4:{_e=+it[a+16>>3],tt=+it[a+24>>3],ft=+it[a+32>>3],nt=+it[a+40>>3],yt=+it[a+48>>3],lt=+it[a+56>>3],g=+it[a+64>>3],d=(d-yt)*g/ft,g=(_-lt)*g/nt,b=d*d+g*g,_=+it[a>>3]*b+1+b*(+it[a+8>>3]*b),it[h>>3]=yt+ft*(tt*(d*(d*2)+b)+(_e*2*d*g+d*_)),it[o>>3]=lt+nt*(tt*2*d*g+(_e*(b+g*(g*2))+g*_)),s=0;break}case 3:{g=+it[a>>3],yt=+it[a+16>>3],b=(d-g)*yt,s=a+8|0,d=yt*(_-+it[s>>3]),b==0&d==0?(it[h>>3]=g,d=+it[s>>3]):(yt=b*b+d*d,yt=1-yt*(+it[a+32>>3]/1e8)-yt*(yt*(+it[a+40>>3]/1e8/1e5)),it[h>>3]=g+ +it[a+24>>3]*(b*yt),d=+it[s>>3]+d*yt),it[o>>3]=d,s=0;break}case 2:{g=+it[a>>3],yt=+it[a+16>>3],b=(d-g)*yt,s=a+8|0,d=yt*(_-+it[s>>3]),b==0&d==0?(it[h>>3]=g,d=+it[s>>3]):(yt=b*b+d*d,yt=1-yt*(+it[a+24>>3]/1e8)-yt*(yt*(+it[a+32>>3]/1e8/1e5)),it[h>>3]=g+b*yt,d=+it[s>>3]+d*yt),it[o>>3]=d,s=0;break}case 1:{g=+it[a>>3],yt=+it[a+16>>3],b=(d-g)*yt,s=a+8|0,d=yt*(_-+it[s>>3]),b==0&d==0?(it[h>>3]=g,d=+it[s>>3]):(yt=1-(b*b+d*d)*(+it[a+24>>3]/1e8),it[h>>3]=g+b*yt,d=+it[s>>3]+d*yt),it[o>>3]=d,s=0;break}default:s=-1}return s|0}function Ym(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0;Kt=dt,dt=dt+256|0,nt=Kt+232|0,tt=Kt+224|0,_e=Kt+216|0,g=Kt+208|0,b=Kt+200|0,s=Kt+192|0,o=Kt+184|0,ft=Kt+240|0,yt=Kt;do if((a|0)!=0&(d|0)>0&(_|0)!=0){if(_t=s2(a,4854)|0,!_t){_t=wo()|0,e[o>>2]=e[_t>>2],e[o+4>>2]=a,fr(3,4857,o),a=Fl(e[_t>>2]|0)|0,e[s>>2]=5367,e[s+4>>2]=a,fr(3,5361,s),a=-1;break}xp(_t,0,2)|0;e:do if(km(_t)|0)a=wo()|0,e[b>>2]=e[a>>2],fr(3,4926,b),a=Fl(e[a>>2]|0)|0,e[g>>2]=5367,e[g+4>>2]=a,fr(3,5361,g),a=-1;else{s=Hm(_t)|0,s0(_t),a=0;do{if((a|0)>=4){lt=9;break}o=e[2012+(a<<3)+4>>2]|0,a=a+1|0}while((s|0)%(o|0)|0|0);do if((lt|0)==9)if((a|0)==4){fr(3,4971,_e),a=-1;break e}else{o=e[504]|0,a=0;break}while(!1);if((GA(yt,o,1,_t)|0)!=1){a=wo()|0,e[tt>>2]=e[a>>2],fr(3,5051,tt),a=Fl(e[a>>2]|0)|0,e[nt>>2]=5367,e[nt+4>>2]=a,fr(3,5361,nt),a=-1;break}if(_e=yt+176|0,e[_e>>2]=a,qm(yt),tt=(a|0)==1,nt=yt+120|0,tt?(Nt=+it[nt>>3],g=yt+128|0,it[nt>>3]=+it[g>>3],it[g>>3]=Nt):g=yt+128|0,B0(_|0,yt|0,184)|0,e[ft>>2]=h,o=_+176|0,(d|0)>1)for(b=1;;){if(h=(e[ft>>2]|0)+3&-4,s=e[h>>2]|0,e[ft>>2]=h+4,e[s+176>>2]=e[o>>2],(GA(yt,e[2012+((e[o>>2]|0)+-1<<3)+4>>2]|0,1,_t)|0)!=1){a=-1;break e}if(e[_e>>2]=a,qm(yt),tt&&(Nt=+it[nt>>3],it[nt>>3]=+it[g>>3],it[g>>3]=Nt),B0(s|0,yt|0,184)|0,b=b+1|0,(b|0)>=(d|0)){a=0;break}}else a=0}while(!1);r2(_t)|0}else a=-1;while(!1);return dt=Kt,a|0}function qm(a){a=a|0;var d=0,_=0,h=0,o=0,s=0;s=dt,dt=dt+192|0,o=s,b1(a,o),b1(a+4|0,o+4|0),d=0;do U2(a+8+(d<<5)|0,o+8+(d<<5)|0),U2(a+8+(d<<5)+8|0,o+8+(d<<5)+8|0),U2(a+8+(d<<5)+16|0,o+8+(d<<5)+16|0),U2(a+8+(d<<5)+24|0,o+8+(d<<5)+24|0),d=d+1|0;while((d|0)!=3);_=a+176|0,h=0;do U2(a+104+(h<<3)|0,o+104+(h<<3)|0),h=h+1|0,d=e[_>>2]|0;while((h|0)<(e[2012+(d+-1<<3)>>2]|0));e[o+176>>2]=d,B0(a|0,o|0,184)|0,dt=s}function U2(a,d){a=a|0,d=d|0,ct[d>>0]=ct[a+7>>0]|0,ct[d+1>>0]=ct[a+6>>0]|0,ct[d+2>>0]=ct[a+5>>0]|0,ct[d+3>>0]=ct[a+4>>0]|0,ct[d+4>>0]=ct[a+3>>0]|0,ct[d+5>>0]=ct[a+2>>0]|0,ct[d+6>>0]=ct[a+1>>0]|0,ct[d+7>>0]=ct[a>>0]|0}function b1(a,d){a=a|0,d=d|0,ct[d>>0]=ct[a+3>>0]|0,ct[d+1>>0]=ct[a+2>>0]|0,ct[d+2>>0]=ct[a+1>>0]|0,ct[d+3>>0]=ct[a>>0]|0}function Ip(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0;if(zt=dt,dt=dt+64|0,Kt=zt+24|0,Nt=zt+16|0,Pt=zt+8|0,Ot=zt,ft=Qr(208)|0,ft||(fr(3,5472,zt+32|0),pn(1)),B0(ft|0,a|0,184)|0,_t=d<<1,yt=(e[a>>2]|0)+_t|0,e[ft+192>>2]=yt,_t=(e[a+4>>2]|0)+_t|0,e[ft+196>>2]=_t,e[ft+200>>2]=d,e[ft+204>>2]=d,_=Pn(yt<<3,_t)|0,h=Qr(_)|0,e[ft+184>>2]=h,h||(fr(3,5472,zt+40|0),pn(1)),_=Qr(_)|0,e[ft+188>>2]=_,_||(fr(3,5472,zt+48|0),pn(1)),lt=a+104|0,_e=e[a+176>>2]|0,tt=(yt|0)>0?yt<<1:0,(_t|0)>0)for(nt=(yt|0)>0,g=0;;){if(o=+(g-d|0),nt)for(a=0,s=h,b=_;$t=+(a-d|0),Xm(lt,$t,o,Pt,Ot,_e)|0,vt[s>>2]=+it[Pt>>3],vt[s+4>>2]=+it[Ot>>3],Mv(lt,$t,o,Kt,Nt,_e)|0,vt[b>>2]=+it[Kt>>3],vt[b+4>>2]=+it[Nt>>3],a=a+1|0,!((a|0)>=(yt|0));)s=s+8|0,b=b+8|0;if(_=_+(tt<<2)|0,g=g+1|0,(g|0)>=(_t|0))break;h=h+(tt<<2)|0}return dt=zt,ft|0}function Cu(a){a=a|0;var d=0;return a|0&&(d=e[a>>2]|0,(d|0)!=0)?(xs(e[d+184>>2]|0),xs(e[(e[a>>2]|0)+188>>2]|0),xs(e[a>>2]|0),e[a>>2]=0,d=0):d=-1,d|0}function X0(a,d,_,h,o){a=a|0,d=+d,_=+_,h=h|0,o=o|0;var s=0,b=0,g=0;return b=(e[a+16>>2]|0)+~~(d+.5)|0,s=(e[a+20>>2]|0)+~~(_+.5)|0,(b|0)>=0&&(g=e[a+8>>2]|0,!((s|0)<0|(b|0)>=(g|0)))&&(s|0)<(e[a+12>>2]|0)?(a=e[a>>2]|0,s=(Pn(g,s)|0)+b<<1,e[h>>2]=e[a+(s<<2)>>2],e[o>>2]=e[a+((s|1)<<2)>>2],s=0):s=-1,s|0}function jA(a,d,_,h,o){a=a|0,d=+d,_=+_,h=h|0,o=o|0;var s=0,b=0,g=0;return b=(e[a+16>>2]|0)+~~(d+.5)|0,s=(e[a+20>>2]|0)+~~(_+.5)|0,(b|0)>=0&&(g=e[a+8>>2]|0,!((s|0)<0|(b|0)>=(g|0)))&&(s|0)<(e[a+12>>2]|0)?(a=e[a+4>>2]|0,s=(Pn(g,s)|0)+b<<1,e[h>>2]=e[a+(s<<2)>>2],e[o>>2]=e[a+((s|1)<<2)>>2],s=0):s=-1,s|0}function J0(a){a=a|0;var d=0,_=0;d=Qr(8)|0;do if(d)if(_=Qr(a<<3)|0,e[d>>2]=_,_){e[d+4>>2]=a;break}else{xs(d),d=0;break}else d=0;while(!1);return d|0}function L1(a){return a=a|0,xs(e[a>>2]|0),xs(a),0}function p2(a){a=a|0;var d=0,_=0,h=0,o=0,s=0;if(d=+Tr(+ +Bp(a,a)),d!=0&&(o=e[a>>2]|0,h=+it[o>>3],d=h<0?-d:d,h=h+d,it[o>>3]=h,h=1/+Tr(+(h*d)),a=e[a+4>>2]|0,(a|0)>0)){_=0;do s=o+(_<<3)|0,it[s>>3]=h*+it[s>>3],_=_+1|0;while((_|0)<(a|0))}return+-d}function Bp(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;if(o=e[a+4>>2]|0,(o|0)!=(e[d+4>>2]|0)&&pn(0),(o|0)>0){h=e[a>>2]|0,a=e[d>>2]|0,d=0,_=0;do _=_+ +it[h+(d<<3)>>3]*+it[a+(d<<3)>>3],d=d+1|0;while((d|0)<(o|0))}else _=0;return+_}function H2(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0;if(sr=dt,dt=dt+16|0,Yn=sr+8|0,ir=sr,zt=e[a+8>>2]|0,(zt|0)==(e[a+4>>2]|0)&&(zt|0)==(e[d+4>>2]|0)&&(zt|0)==((e[_+4>>2]|0)+1|0)){if(kt=zt+-2|0,Lt=Yn+4|0,cn=ir+4|0,(zt|0)>2){Kt=zt+-1|0,Nt=0;do if(lt=Pn(Nt,zt)|0,ft=e[a>>2]|0,it[(e[d>>2]|0)+(Nt<<3)>>3]=+it[ft+(lt+Nt<<3)>>3],g=zt-Nt+-1|0,e[Lt>>2]=g,Pt=Nt,Nt=Nt+1|0,_e=ft+(lt+Nt<<3)|0,e[Yn>>2]=_e,_t=+p2(Yn),it[(e[_>>2]|0)+(Pt<<3)>>3]=_t,_t!=0){if((Nt|0)<(zt|0)){tt=e[d>>2]|0,nt=Nt;do{if((Nt|0)<(nt|0)){h=e[a>>2]|0,o=Nt,b=0;do _t=+it[h+((Pn(o,zt)|0)+nt<<3)>>3],b=b+_t*+it[ft+(o+lt<<3)>>3],o=o+1|0;while((o|0)<(nt|0))}else b=0;if(h=Pn(nt,zt)|0,(nt|0)<(zt|0)){o=e[a>>2]|0,s=nt;do b=b+ +it[o+(s+h<<3)>>3]*+it[ft+(s+lt<<3)>>3],s=s+1|0;while((s|0)<(zt|0))}it[tt+(nt<<3)>>3]=b,nt=nt+1|0}while((nt|0)<(zt|0))}if(e[cn>>2]=g,e[Lt>>2]=g,e[Yn>>2]=_e,e[ir>>2]=(e[d>>2]|0)+(Nt<<3),b=+Bp(Yn,ir)*.5,(Kt|0)>(Pt|0)){h=e[d>>2]|0,g=Kt;do{if(yt=+it[ft+(g+lt<<3)>>3],o=h+(g<<3)|0,_t=+it[o>>3]-b*yt,it[o>>3]=_t,o=Pn(g,zt)|0,(g|0)<(zt|0)){s=e[a>>2]|0,_e=g;do nt=s+(_e+o<<3)|0,it[nt>>3]=+it[nt>>3]-(yt*+it[h+(_e<<3)>>3]+_t*+it[ft+(_e+lt<<3)>>3]),_e=_e+1|0;while((_e|0)<(zt|0))}g=g+-1|0}while((g|0)>(Pt|0))}}while((Nt|0)<(kt|0))}if((zt|0)<=1?(zt|0)>0&&(o=0,s=e[a>>2]|0,h=e[d>>2]|0,Ot=27):(Ot=Pn(kt,zt)|0,s=e[a>>2]|0,h=e[d>>2]|0,it[h+(kt<<3)>>3]=+it[s+(Ot+kt<<3)>>3],o=zt+-1|0,it[(e[_>>2]|0)+(kt<<3)>>3]=+it[s+(o+Ot<<3)>>3],Ot=27),(Ot|0)==27&&(it[h+(o<<3)>>3]=+it[s+((Pn(o,zt)|0)+o<<3)>>3]),(zt|0)>0){tt=(zt|0)>0,ft=zt;do{if(_=ft,ft=ft+-1|0,nt=Pn(ft,zt)|0,lt=e[a>>2]|0,(_|0)<=(kt|0)&&($t=zt-ft+-1|0,Yt=lt+(nt+_<<3)|0,(_|0)<(zt|0))){h=(_|0)<(zt|0),g=_;do{if(e[cn>>2]=$t,e[Lt>>2]=$t,e[Yn>>2]=Yt,o=Pn(g,zt)|0,e[ir>>2]=(e[a>>2]|0)+(o+_<<3),b=+Bp(Yn,ir),h){s=e[a>>2]|0,_e=_;do Ot=s+(_e+o<<3)|0,it[Ot>>3]=+it[Ot>>3]-b*+it[lt+(_e+nt<<3)>>3],_e=_e+1|0;while((_e|0)<(zt|0))}g=g+1|0}while((g|0)<(zt|0))}if(tt){h=0;do it[lt+(h+nt<<3)>>3]=0,h=h+1|0;while((h|0)<(zt|0))}it[lt+(nt+ft<<3)>>3]=1}while((_|0)>1);h=0}else h=0}else h=-1;return dt=sr,h|0}function em(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0;return s=+it[_>>3],b=+it[_+8>>3],o=+it[_+16>>3],h=+it[d+88>>3]+(s*+it[d+64>>3]+b*+it[d+72>>3]+o*+it[d+80>>3]),h==0?_=-1:(g=+it[d+56>>3]+(s*+it[d+32>>3]+b*+it[d+40>>3]+o*+it[d+48>>3]),it[a>>3]=(+it[d+24>>3]+(s*+it[d>>3]+b*+it[d+8>>3]+o*+it[d+16>>3]))/h,it[a+8>>3]=g/h,_=0),_|0}function Lp(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0;cn=dt,dt=dt+1072|0,Yt=cn+1056|0,$t=cn+768|0,zt=cn+192|0,Lt=cn+48|0,kt=cn,Kr=+it[_>>3],dr=+it[h>>3],Kt=Kr*dr,Or=+it[_+8>>3],Nt=h+8|0,sr=+it[Nt>>3],Ot=Or*sr,b=+it[_+16>>3],Jn=+it[h+16>>3],_e=b*Jn,tt=+it[_+24>>3],wr=+it[_+32>>3],Hr=+it[_+40>>3],nt=sr*Hr,g=+it[_+48>>3],lt=Jn*g,ft=+it[_+56>>3],ir=+it[_+64>>3],Yn=+it[_+72>>3],yt=sr*Yn,o=+it[_+80>>3],_t=Jn*o,s=+it[_+88>>3],it[$t>>3]=Kt,it[$t+8>>3]=Kr*sr,it[$t+16>>3]=Kr*Jn,it[$t+24>>3]=dr*Or,it[$t+32>>3]=Ot,it[$t+40>>3]=Jn*Or,it[$t+48>>3]=dr*b,it[$t+56>>3]=sr*b,it[$t+64>>3]=_e,it[$t+72>>3]=Kr,it[$t+80>>3]=Or,it[$t+88>>3]=b,b=dr*wr,it[$t+96>>3]=b,it[$t+104>>3]=sr*wr,it[$t+112>>3]=Jn*wr,it[$t+120>>3]=dr*Hr,it[$t+128>>3]=nt,it[$t+136>>3]=Jn*Hr,it[$t+144>>3]=dr*g,it[$t+152>>3]=sr*g,it[$t+160>>3]=lt,it[$t+168>>3]=wr,it[$t+176>>3]=Hr,it[$t+184>>3]=g,g=ir*dr,it[$t+192>>3]=g,it[$t+200>>3]=sr*ir,it[$t+208>>3]=Jn*ir,it[$t+216>>3]=dr*Yn,sr=+it[Nt>>3],it[$t+224>>3]=Yn*sr,it[$t+232>>3]=Jn*Yn,it[$t+240>>3]=dr*o,it[$t+248>>3]=sr*o,it[$t+256>>3]=_t,it[$t+264>>3]=ir,it[$t+272>>3]=Yn,it[$t+280>>3]=o,h=zt+64|0,_=zt,Nt=_+64|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=-1,h=zt+72|0,e[h>>2]=0,e[h+4>>2]=0,e[h+8>>2]=0,e[h+12>>2]=0,e[h+16>>2]=0,e[h+20>>2]=0,e[h+24>>2]=0,e[h+28>>2]=0,it[zt+104>>3]=1,h=zt+160|0,_=zt+112|0,Nt=_+48|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=1,h=zt+240|0,_=zt+168|0,Nt=_+72|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=-1,h=zt+296|0,_=zt+248|0,Nt=_+48|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=-1,h=zt+304|0,e[h>>2]=0,e[h+4>>2]=0,e[h+8>>2]=0,e[h+12>>2]=0,e[h+16>>2]=0,e[h+20>>2]=0,e[h+24>>2]=0,e[h+28>>2]=0,it[zt+336>>3]=1,h=zt+456|0,_=zt+344|0,Nt=_+112|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=1,h=zt+512|0,_=zt+464|0,Nt=_+48|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=1,h=zt+568|0,_=zt+520|0,Nt=_+48|0;do e[_>>2]=0,_=_+4|0;while((_|0)<(Nt|0));it[h>>3]=1,Pt=0;do{Nt=0;do{_=Lt+(Pt*48|0)+(Nt<<3)|0,it[_>>3]=0,o=0,h=0;do o=o+ +it[$t+(Pt*96|0)+(h<<3)>>3]*+it[zt+(h*48|0)+(Nt<<3)>>3],h=h+1|0;while((h|0)!=12);it[_>>3]=o,Nt=Nt+1|0}while((Nt|0)!=6);Pt=Pt+1|0}while((Pt|0)!=3);if(Or=tt+(Kt+Ot+_e),Kr=ft+(b+nt+lt),o=s+(g+yt+_t),s=+it[d>>3],b=+it[d+8>>3],g=+it[d+16>>3],_e=+it[d+24>>3]+(Or*s+Kr*b+o*g),tt=+it[d+32>>3],nt=+it[d+40>>3],lt=+it[d+48>>3],ft=+it[d+56>>3]+(Or*tt+Kr*nt+o*lt),yt=+it[d+64>>3],_t=+it[d+72>>3],Kt=+it[d+80>>3],o=+it[d+88>>3]+(Or*yt+Kr*_t+o*Kt),o==0)fr(3,5089,Yt),h=-1;else{Kr=o*o,it[kt>>3]=(s*o-_e*yt)/Kr,it[kt+8>>3]=(o*b-_e*_t)/Kr,it[kt+16>>3]=(o*g-_e*Kt)/Kr,it[kt+24>>3]=(o*tt-ft*yt)/Kr,it[kt+32>>3]=(o*nt-ft*_t)/Kr,it[kt+40>>3]=(o*lt-ft*Kt)/Kr,_=0;do{o=+it[kt+(_*24|0)>>3],s=+it[kt+(_*24|0)+8>>3],b=+it[kt+(_*24|0)+16>>3],h=0;do Yt=a+(_*48|0)+(h<<3)|0,it[Yt>>3]=0,Kr=o*+it[Lt+(h<<3)>>3]+0,it[Yt>>3]=Kr,Kr=Kr+s*+it[Lt+48+(h<<3)>>3],it[Yt>>3]=Kr,it[Yt>>3]=Kr+b*+it[Lt+96+(h<<3)>>3],h=h+1|0;while((h|0)!=6);_=_+1|0}while((_|0)!=2);h=0}return dt=cn,h|0}function Jm(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0;g=dt,dt=dt+48|0,b=g+24|0,s=g+12|0,o=g,e[b+4>>2]=6,e[b+8>>2]=1,e[b>>2]=a,e[s+4>>2]=h,e[s+8>>2]=1,e[s>>2]=d,e[o+4>>2]=h,e[o+8>>2]=6,e[o>>2]=_,d=$A(o)|0;do if(d){if(a=h2(d,o)|0,!a){js(d)|0,_=-1;break}if(_=h2(d,s)|0,!_){js(d)|0,js(a)|0,_=-1;break}if((Qu(a)|0)<0){js(d)|0,js(a)|0,js(_)|0,_=-1;break}else{d2(b,a,_)|0,js(d)|0,js(a)|0,js(_)|0,_=0;break}}else _=-1;while(!1);return dt=g,_|0}function Zm(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0;lt=dt,dt=dt+192|0,tt=lt+96|0,nt=lt,b=+it[d>>3],_e=+it[d+8>>3],h=+it[d+16>>3],_=b*b+_e*_e+h*h,_==0?(g=0,o=0,h=1,_=0):(_=+Tr(+_),g=_,o=h/_,h=b/_,_=_e/_),Ot=+it[d+24>>3],Kt=+it[d+32>>3],_e=+it[d+40>>3],ft=+Yr(+g),b=1-ft,g=+ms(+g),it[tt>>3]=ft+h*h*b,Pt=_*h*b,Nt=o*g,it[tt+8>>3]=Pt-Nt,_t=h*o*b,yt=_*g,it[tt+16>>3]=_t+yt,it[tt+24>>3]=Ot,it[tt+32>>3]=Pt+Nt,it[tt+40>>3]=ft+_*_*b,_=_*o*b,g=h*g,it[tt+48>>3]=_-g,it[tt+56>>3]=Kt,it[tt+64>>3]=_t-yt,it[tt+72>>3]=_+g,it[tt+80>>3]=ft+o*o*b,it[tt+88>>3]=_e,s=0;do{_=+it[a+(s<<5)>>3],h=+it[a+(s<<5)+8>>3],o=+it[a+(s<<5)+16>>3],d=0;do it[nt+(s<<5)+(d<<3)>>3]=_*+it[tt+(d<<3)>>3]+h*+it[tt+32+(d<<3)>>3]+o*+it[tt+64+(d<<3)>>3],d=d+1|0;while((d|0)!=4);d=nt+(s<<5)+24|0,it[d>>3]=+it[a+(s<<5)+24>>3]+ +it[d>>3],s=s+1|0}while((s|0)!=3);d=0;do it[a+(d<<5)>>3]=+it[nt+(d<<5)>>3],it[a+(d<<5)+8>>3]=+it[nt+(d<<5)+8>>3],it[a+(d<<5)+16>>3]=+it[nt+(d<<5)+16>>3],it[a+(d<<5)+24>>3]=+it[nt+(d<<5)+24>>3],d=d+1|0;while((d|0)!=3);return dt=lt,0}function _u(a){a=a|0;var d=0,_=0;if(d=Qr(136)|0,!d)d=0;else{_=0;do it[d+(_<<5)>>3]=+it[a+(_<<5)>>3],it[d+(_<<5)+8>>3]=+it[a+(_<<5)+8>>3],it[d+(_<<5)+16>>3]=+it[a+(_<<5)+16>>3],it[d+(_<<5)+24>>3]=+it[a+(_<<5)+24>>3],_=_+1|0;while((_|0)!=3);e[d+96>>2]=10,it[d+104>>3]=.10000000149011612,it[d+112>>3]=.9900000095367432,it[d+120>>3]=4,it[d+128>>3]=.5}return d|0}function zu(a){a=a|0;var d=0;return d=e[a>>2]|0,d?(xs(d),e[a>>2]=0,d=0):d=-1,d|0}function D1(a,d){return a=a|0,d=+d,a?(it[a+128>>3]=d,a=0):a=-1,a|0}function Wu(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0;Yt=dt,dt=dt+176|0,_e=Yt+168|0,g=Yt+160|0,Pt=Yt+48|0,zt=Yt+64|0,Ot=Yt,Kt=d+8|0,s=e[Kt>>2]|0;do if((s|0)>=3){if($t=Qr(s*96|0)|0,!$t){fr(3,5109,g),s=-1;break}if(Nt=Qr(s<<4)|0,Nt)s=0;else{fr(3,5109,_e),xs($t),s=-1;break}do it[h+(s<<5)>>3]=+it[_+(s<<5)>>3],it[h+(s<<5)+8>>3]=+it[_+(s<<5)+8>>3],it[h+(s<<5)+16>>3]=+it[_+(s<<5)+16>>3],it[h+(s<<5)+24>>3]=+it[_+(s<<5)+24>>3],s=s+1|0;while((s|0)!=3);yt=d+4|0,_e=Pt+8|0,_=a+104|0,nt=a+120|0,lt=a+112|0,ft=a+96|0,tt=0,_t=0;e:for(;;){if(wu(a,h,zt)|0,s=e[Kt>>2]|0,(s|0)>0){b=0,g=0;do{if((em(Pt,zt,(e[yt>>2]|0)+(g*24|0)|0)|0)<0){g=10;break e}s=e[d>>2]|0,Lt=+it[s+(g<<4)>>3]-+it[Pt>>3],kt=+it[s+(g<<4)+8>>3]-+it[_e>>3],b=b+(Lt*Lt+kt*kt),s=g<<1,it[Nt+(s<<3)>>3]=Lt,it[Nt+((s|1)<<3)>>3]=kt,g=g+1|0,s=e[Kt>>2]|0}while((g|0)<(s|0))}else b=0;if(b=b/+(s|0),b<+it[_>>3]){g=24;break}if((_t|0)>0&&b<+it[nt>>3]&&b/tt>+it[lt>>3]){g=24;break}if((_t|0)==(e[ft>>2]|0)){g=24;break}if((s|0)>0){g=0;do{if((Lp($t+(g*12<<3)|0,a,h,(e[yt>>2]|0)+(g*24|0)|0)|0)<0){g=20;break e}g=g+1|0,s=e[Kt>>2]|0}while((g|0)<(s|0))}if((Jm(Ot,Nt,$t,s<<1)|0)<0){g=22;break}Zm(h,Ot)|0,tt=b,_t=_t+1|0}if((g|0)==10){G2($t,Nt),s=-1;break}else if((g|0)==20){G2($t,Nt),s=-1;break}else if((g|0)==22){G2($t,Nt),s=-1;break}else if((g|0)==24){it[o>>3]=b,xs($t),xs(Nt),s=0;break}}else s=-1;while(!1);return dt=Yt,s|0}function G2(a,d){a=a|0,d=d|0,xs(a),xs(d)}function Sv(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0;Jn=dt,dt=dt+192|0,nt=Jn+184|0,tt=Jn+176|0,_e=Jn+168|0,s=Jn+160|0,cn=Jn+48|0,ir=Jn+64|0,Yn=Jn,Lt=d+8|0,g=e[Lt>>2]|0;do if((g|0)>=4){if(lt=~~(+(g|0)*+it[a+128>>3])+-1|0,lt=(lt|0)<3?3:lt,dr=Qr(g*96|0)|0,!dr){fr(3,5109,s),s=-1;break}if(sr=Qr(g<<4)|0,!sr){fr(3,5109,_e),xs(dr),s=-1;break}if(s=g<<3,kt=Qr(s)|0,!kt){fr(3,5109,tt),xs(dr),xs(sr),s=-1;break}if(Yt=Qr(s)|0,Yt)s=0;else{fr(3,5109,nt),xs(dr),xs(sr),xs(kt),s=-1;break}do it[h+(s<<5)>>3]=+it[_+(s<<5)>>3],it[h+(s<<5)+8>>3]=+it[_+(s<<5)+8>>3],it[h+(s<<5)+16>>3]=+it[_+(s<<5)+16>>3],it[h+(s<<5)+24>>3]=+it[_+(s<<5)+24>>3],s=s+1|0;while((s|0)!=3);zt=d+4|0,$t=cn+8|0,nt=Yt+(lt<<3)|0,_=a+104|0,lt=a+120|0,Nt=a+112|0,Pt=a+96|0,_t=0,Ot=0;e:for(;;){if(wu(a,h,ir)|0,s=e[Lt>>2]|0,(s|0)>0){g=0;do{if((em(cn,ir,(e[zt>>2]|0)+(g*24|0)|0)|0)<0){g=14;break e}s=e[d>>2]|0,yt=+it[s+(g<<4)>>3]-+it[cn>>3],Kt=+it[s+(g<<4)+8>>3]-+it[$t>>3],s=g<<1,it[sr+(s<<3)>>3]=yt,it[sr+((s|1)<<3)>>3]=Kt,Kt=yt*yt+Kt*Kt,it[Yt+(g<<3)>>3]=Kt,it[kt+(g<<3)>>3]=Kt,g=g+1|0,s=e[Lt>>2]|0}while((g|0)<(s|0))}if(WA(Yt,s,8,1),Kt=+it[nt>>3]*4,Kt=Kt<16?16:Kt,g=e[Lt>>2]|0,yt=Kt/6,(g|0)>0){b=0,s=0;do ft=+it[Yt+(s<<3)>>3],ft>Kt?ft=yt:(ft=1-ft/Kt,ft=yt*(1-ft*(ft*ft))),b=b+ft,s=s+1|0;while((s|0)<(g|0))}else b=0;if(b=b/+(g|0),b<+it[_>>3]){g=36;break}if((Ot|0)>0&&b<+it[lt>>3]&&b/_t>+it[Nt>>3]){g=36;break}if((Ot|0)==(e[Pt>>2]|0)){g=36;break}if((g|0)>0){tt=0,s=0;do{if(ft=+it[kt+(tt<<3)>>3],ft<=Kt){if(g=s*6|0,_e=dr+(g<<3)|0,(Lp(_e,a,h,(e[zt>>2]|0)+(tt*24|0)|0)|0)<0){g=28;break e}_t=1-ft/Kt,_t=_t*_t,it[_e>>3]=+it[_e>>3]*_t,_e=dr+((g|1)<<3)|0,it[_e>>3]=+it[_e>>3]*_t,_e=dr+(g+2<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+3<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+4<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+5<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+6<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+7<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+8<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+9<<3)|0,it[_e>>3]=_t*+it[_e>>3],_e=dr+(g+10<<3)|0,it[_e>>3]=_t*+it[_e>>3],g=dr+(g+11<<3)|0,it[g>>3]=_t*+it[g>>3],g=tt<<1,it[sr+(s<<3)>>3]=_t*+it[sr+(g<<3)>>3],it[sr+(s+1<<3)>>3]=_t*+it[sr+((g|1)<<3)>>3],g=e[Lt>>2]|0,s=s+2|0}tt=tt+1|0}while((tt|0)<(g|0))}else s=0;if((s|0)<6){g=32;break}if((Jm(Yn,sr,dr,s)|0)<0){g=34;break}Zm(h,Yn)|0,_t=b,Ot=Ot+1|0}if((g|0)==14){lu(dr,sr,kt,Yt),s=-1;break}else if((g|0)==28){lu(dr,sr,kt,Yt),s=-1;break}else if((g|0)==32){lu(dr,sr,kt,Yt),s=-1;break}else if((g|0)==34){lu(dr,sr,kt,Yt),s=-1;break}else if((g|0)==36){it[o>>3]=b,xs(dr),xs(sr),xs(kt),xs(Yt),s=0;break}}else s=-1;while(!1);return dt=Jn,s|0}function lu(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,xs(a),xs(d),xs(_),xs(h)}function Tv(a,d){a=a|0,d=d|0;var _=0;return _=+it[a>>3]-+it[d>>3],(_<0?-1:_>0&1)|0}function Rv(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0,Ko=0,Ro=0,Dr=0,Zr=0,us=0,Oo=0,Xs=0;Ro=dt,dt=dt+64|0,ir=Ro+48|0,kt=Ro+40|0,Yt=Ro+32|0,$t=Ro+24|0,Pt=Ro+16|0,lt=Ro+8|0,_e=Ro;e:do if((h|0)>=4){for(s=0;!((s|0)>=(h|0));)if(+it[_+(s*24|0)+16>>3]!=0){s=-1;break e}else s=s+1|0;if(+it[a>>3]!=0&&+it[a+32>>3]==0&&(cn=a+40|0,+it[cn>>3]!=0)&&+it[a+64>>3]==0&&+it[a+72>>3]==0&&+it[a+80>>3]==1&&+it[a+24>>3]==0&&+it[a+56>>3]==0&&+it[a+88>>3]==0){if(s=h<<1,Yn=i1(s,8)|0,!Yn){fr(3,5124,_e),s=-1;break}if(zt=i1(s,1)|0,!zt){js(Yn)|0,fr(3,5150,lt),s=-1;break}if(h){s=e[Yn>>2]|0,_e=e[zt>>2]|0,lt=0;do Xs=_+(lt*24|0)|0,Dr=lt<<4,it[s+(Dr<<3)>>3]=+it[Xs>>3],Oo=_+(lt*24|0)+8|0,it[s+((Dr|1)<<3)>>3]=+it[Oo>>3],it[s+((Dr|2)<<3)>>3]=1,it[s+((Dr|3)<<3)>>3]=0,it[s+((Dr|4)<<3)>>3]=0,it[s+((Dr|5)<<3)>>3]=0,us=d+(lt<<4)|0,it[s+((Dr|6)<<3)>>3]=-(+it[Xs>>3]*+it[us>>3]),it[s+((Dr|7)<<3)>>3]=-(+it[Oo>>3]*+it[us>>3]),it[s+((Dr|8)<<3)>>3]=0,it[s+((Dr|9)<<3)>>3]=0,it[s+((Dr|10)<<3)>>3]=0,it[s+((Dr|11)<<3)>>3]=+it[Xs>>3],it[s+((Dr|12)<<3)>>3]=+it[Oo>>3],it[s+((Dr|13)<<3)>>3]=1,Zr=d+(lt<<4)+8|0,it[s+((Dr|14)<<3)>>3]=-(+it[Xs>>3]*+it[Zr>>3]),it[s+((Dr|15)<<3)>>3]=-(+it[Oo>>3]*+it[Zr>>3]),Dr=lt<<1,it[_e+(Dr<<3)>>3]=+it[us>>3],it[_e+((Dr|1)<<3)>>3]=+it[Zr>>3],lt=lt+1|0;while((lt|0)!=(h|0))}if(h=$A(Yn)|0,!h){js(Yn)|0,js(zt)|0,fr(3,5176,Pt),s=-1;break}if(lt=h2(h,Yn)|0,!lt){js(Yn)|0,js(zt)|0,js(h)|0,fr(3,5202,$t),s=-1;break}if(_e=h2(h,zt)|0,!_e){js(Yn)|0,js(zt)|0,js(h)|0,js(lt)|0,fr(3,5228,Yt),s=-1;break}if((Qu(lt)|0)<0){js(Yn)|0,js(zt)|0,js(h)|0,js(lt)|0,js(_e)|0,fr(3,5254,kt),s=-1;break}if(s=h2(lt,_e)|0,!s){js(Yn)|0,js(zt)|0,js(h)|0,js(lt)|0,js(_e)|0,fr(3,5280,ir),s=-1;break}Xs=e[s>>2]|0,ft=+it[Xs+48>>3],mo=+it[a+48>>3],Nt=+it[cn>>3],b=(+it[Xs+24>>3]-ft*mo)/Nt,Kt=+it[a+16>>3],Ko=+it[a+8>>3],_t=+it[a>>3],yt=(+it[Xs>>3]-ft*Kt-b*Ko)/_t,g=+it[Xs+56>>3],tt=(+it[Xs+32>>3]-mo*g)/Nt,nt=(+it[Xs+8>>3]-Kt*g-Ko*tt)/_t,Nt=(+it[Xs+40>>3]-mo)/Nt,_t=(+it[Xs+16>>3]-Kt-Ko*Nt)/_t,js(Yn)|0,js(zt)|0,js(h)|0,js(lt)|0,js(_e)|0,js(s)|0,Ko=+Tr(+(ft*ft+(b*b+yt*yt))),Kt=+Tr(+(g*g+(tt*tt+nt*nt))),yt=yt/Ko,b=b/Ko,ft=ft/Ko,nt=nt/Kt,tt=tt/Kt,g=g/Kt,Kt=(Ko+Kt)*.5,_t=_t/Kt,Ko=1/Kt,Ko<0?(Kn=-b,g=-g,tt=-tt,ft=-ft,nt=-nt,Ps=-yt,mo=-_t,ds=-Ko):(Kn=b,Ps=yt,mo=_t,ds=Nt/Kt),b=g*Kn-tt*ft,yt=nt*ft-g*Ps,_t=tt*Ps-nt*Kn,Kt=+Tr(+(_t*_t+(b*b+yt*yt)));do if(Kt!=0){if(Nt=b/Kt,yt=yt/Kt,b=_t/Kt,gr=g*ft+(tt*Kn+nt*Ps),gr=gr<0?-gr:gr,gr=(+Tr(+(gr+1))+ +Tr(+(1-gr)))*.5,Ps*yt-Kn*Nt!=0?(s=0,sr=Ps,Ot=Kn,dr=ft,wr=Nt,Hr=yt):(Xs=Ps*b-ft*Nt!=0,s=Xs?1:2,sr=Xs?Ps:ft,Ot=Xs?ft:Kn,dr=Xs?Kn:Ps,wr=Xs?Nt:b,Hr=Xs?b:yt,b=Xs?yt:Nt),_t=sr*Hr,Kt=Ot*wr,yt=_t-Kt,yt==0){yt=Kn,b=Ps;break}if(Jn=(Ot*b-dr*Hr)/yt,Lt=gr*Hr/yt,_t=Kt-_t,yt=(sr*b-dr*wr)/_t,_t=gr*wr/_t,Kt=Jn*Jn+yt*yt+1,Nt=Jn*Lt+yt*_t,Ot=Nt*Nt-Kt*(Lt*Lt+_t*_t+-1),Ot<0){yt=Kn,b=Ps;break}if(Qn=+Tr(+Ot),Br=(Qn-Nt)/Kt,dr=Lt+Jn*Br,Kr=_t+yt*Br,Qn=(-Nt-Qn)/Kt,Jn=Lt+Jn*Qn,_t=_t+yt*Qn,Xs=(s|0)==1,yt=Xs?Hr:b,Kt=Xs?b:Hr,Or=Xs?Br:Kr,Br=Xs?Kr:Br,Kr=Xs?Qn:_t,Hr=Xs?_t:Qn,Xs=(s|0)==2&(Xs^1),_t=Xs?wr:yt,yt=Xs?yt:wr,Qn=Xs?Br:dr,Br=Xs?dr:Br,b=Xs?Hr:Jn,wr=Xs?Jn:Hr,nt*Kt-tt*yt!=0?(s=0,sr=nt,Ot=tt,dr=g,Hr=yt,Lt=Kt):(Xs=nt*_t-g*yt!=0,s=Xs?1:2,sr=Xs?nt:g,Ot=Xs?g:tt,dr=Xs?tt:nt,Hr=Xs?yt:_t,Lt=Xs?_t:Kt,_t=Xs?Kt:yt),Kt=sr*Lt,Nt=Ot*Hr,yt=Kt-Nt,yt==0){yt=Kn,b=Ps;break}if(Jn=(Ot*_t-dr*Lt)/yt,Lt=gr*Lt/yt,yt=Nt-Kt,Ot=(sr*_t-dr*Hr)/yt,yt=gr*Hr/yt,_t=Jn*Jn+Ot*Ot+1,Kt=Jn*Lt+Ot*yt,Nt=Kt*Kt-_t*(Lt*Lt+yt*yt+-1),Nt<0){yt=Kn,b=Ps;break}if(Nt=+Tr(+Nt),g=(Nt-Kt)/_t,Ps=Lt+Jn*g,Kn=yt+Ot*g,Nt=(-Kt-Nt)/_t,ft=Lt+Jn*Nt,nt=yt+Ot*Nt,Xs=(s|0)==1,tt=Xs?g:Kn,g=Xs?Kn:g,Ot=Xs?Nt:nt,Nt=Xs?nt:Nt,Xs=(s|0)==2&(Xs^1),nt=Xs?g:Ps,g=Xs?Ps:g,Lt=Xs?Nt:ft,Nt=Xs?ft:Nt,ft=Br*g+(Or*tt+Qn*nt),ft=ft<0?-ft:ft,yt=Br*Nt+(Or*Ot+Qn*Lt),yt=yt<0?-yt:yt,_t=wr*g+(Kr*tt+b*nt),_t=_t<0?-_t:_t,Kt=wr*Nt+(Kr*Ot+b*Lt),Kt=Kt<0?-Kt:Kt,ft<yt)if(ft<_t){if(ft<Kt){yt=Or,ft=Br,b=Qn;break}yt=Kr,g=Nt,tt=Ot,ft=wr,nt=Lt;break}else{if(_t<Kt){yt=Kr,ft=wr;break}yt=Kr,g=Nt,tt=Ot,ft=wr,nt=Lt;break}else if(yt<_t){if(yt<Kt){yt=Or,g=Nt,tt=Ot,ft=Br,nt=Lt,b=Qn;break}yt=Kr,g=Nt,tt=Ot,ft=wr,nt=Lt;break}else{if(_t<Kt){yt=Kr,ft=wr;break}yt=Kr,g=Nt,tt=Ot,ft=wr,nt=Lt;break}}else yt=Kn,b=Ps;while(!1);Qn=g*yt-tt*ft,gr=nt*ft-g*b,Kn=tt*b-nt*yt,Ps=+Tr(+(Kn*Kn+(Qn*Qn+gr*gr))),it[o>>3]=b,it[o+32>>3]=yt,it[o+64>>3]=ft,it[o+8>>3]=nt,it[o+40>>3]=tt,it[o+72>>3]=g,it[o+16>>3]=Qn/Ps,it[o+48>>3]=gr/Ps,it[o+80>>3]=Kn/Ps,it[o+24>>3]=mo,it[o+56>>3]=ds,it[o+88>>3]=Ko,s=0}else s=-1}else s=-1;while(!1);return dt=Ro,s|0}function Iv(a){return a=a|0,xs(e[a>>2]|0),xs(a),0}function Bv(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,+ +$m(a,d,_,h,0)}function Lv(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,+ +$m(a,d,_,h,1)}function $m(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0;if(dr=dt,dt=dt+208|0,kt=dr+200|0,Yt=dr+192|0,Lt=dr+96|0,cn=dr,Yn=h+4|0,ft=e[Yn>>2]|0,yt=h+112|0,_t=h+120|0,(ft|0)>0){Pt=e[h>>2]|0,Ot=(_|0)>0,zt=(_|0)>0,$t=0;do{if(e[Pt+($t*320|0)+4>>2]|0){if(_e=Pt+($t*320|0)+312|0,tt=Pt+($t*320|0)|0,zt){lt=0,b=-1;do g=e[d+(lt<<8)+12>>2]|0,!(g|0)&&(Nt=d+(lt<<8)+248|0,Kt=e[Nt>>2]|0,Nt=e[Nt+4>>2]|0,!((Kt|0)==0&(Nt|0)==0))?(g=_e,(Kt|0)==(e[g>>2]|0)&&(Nt|0)==(e[g+4>>2]|0)&&(sr=20)):(g|0)==(e[tt>>2]|0)&&(sr=20),(sr|0)==20&&(sr=0,s=+it[d+(lt<<8)+48>>3],s<+it[_t>>3]||(b|0)!=-1&&!(+it[d+(b<<8)+48>>3]<s)||(b=lt)),lt=lt+1|0;while((lt|0)<(_|0))}else b=-1;e[Pt+($t*320|0)+304>>2]=b,(b|0)>-1&&(e[d+(b<<8)+16>>2]=e[d+(b<<8)+24>>2])}else{if(Ot){g=e[Pt+($t*320|0)>>2]|0,_e=0,b=-1;do(e[d+(_e<<8)+8>>2]|0)==(g|0)&&(nt=+it[d+(_e<<8)+40>>3],!(nt<+it[yt>>3]))&&((b|0)!=-1&&!(+it[d+(b<<8)+40>>3]<nt)||(b=_e)),_e=_e+1|0;while((_e|0)<(_|0))}else b=-1;e[Pt+($t*320|0)+304>>2]=b,(b|0)>-1&&(e[d+(b<<8)+16>>2]=e[d+(b<<8)+20>>2])}$t=$t+1|0}while(($t|0)<(ft|0))}if((ft|0)>0)for(yt=0,b=0,ft=0,g=0;;){_e=e[h>>2]|0,tt=e[_e+(yt*320|0)+304>>2]|0;do if((tt|0)<0)_e=ft;else{if(lt=d+(tt<<8)|0,+pE(a,lt,+it[_e+(yt*320|0)+8>>3],cn)>4){if(e[(e[h>>2]|0)+(yt*320|0)+304>>2]=-1,_e=d+(tt<<8)+236|0,e[_e>>2]|0){_e=ft;break}e[_e>>2]=7,_e=ft;break}if(_e=e[lt>>2]|0,(g|0)==0|(ft|0)<(_e|0)){b=0;do it[Lt+(b<<5)>>3]=+it[cn+(b<<5)>>3],it[Lt+(b<<5)+8>>3]=+it[cn+(b<<5)+8>>3],it[Lt+(b<<5)+16>>3]=+it[cn+(b<<5)+16>>3],it[Lt+(b<<5)+24>>3]=+it[cn+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3);b=yt}else _e=ft;g=g+1|0}while(!1);if(yt=yt+1|0,(yt|0)>=(e[Yn>>2]|0))break;ft=_e}else b=0,g=0;do if(g|0&&(g|0)>=(e[h+128>>2]|0)){if(wu(Lt,(e[h>>2]|0)+(b*320|0)+112|0,cn)|0,ft=g<<2,_t=Qr(g<<6)|0,_t||(fr(3,5472,Yt),pn(1)),yt=Qr(g*96|0)|0,yt||(fr(3,5472,kt),pn(1)),_e=e[Yn>>2]|0,(_e|0)>0){tt=e[h>>2]|0,lt=0,b=0;do g=e[tt+(lt*320|0)+304>>2]|0,(g|0)>=0&&(Yt=e[d+(g<<8)+16>>2]|0,_=(4-Yt|0)%4|0,kt=b<<3,it[_t+(kt<<3)>>3]=+it[d+(g<<8)+168+(_<<4)>>3],it[_t+((kt|1)<<3)>>3]=+it[d+(g<<8)+168+(_<<4)+8>>3],_=(5-Yt|0)%4|0,it[_t+((kt|2)<<3)>>3]=+it[d+(g<<8)+168+(_<<4)>>3],it[_t+((kt|3)<<3)>>3]=+it[d+(g<<8)+168+(_<<4)+8>>3],_=(6-Yt|0)%4|0,it[_t+((kt|4)<<3)>>3]=+it[d+(g<<8)+168+(_<<4)>>3],it[_t+((kt|5)<<3)>>3]=+it[d+(g<<8)+168+(_<<4)+8>>3],Yt=(7-Yt|0)%4|0,it[_t+((kt|6)<<3)>>3]=+it[d+(g<<8)+168+(Yt<<4)>>3],it[_t+((kt|7)<<3)>>3]=+it[d+(g<<8)+168+(Yt<<4)+8>>3],kt=b*12|0,it[yt+(kt<<3)>>3]=+it[tt+(lt*320|0)+208>>3],it[yt+((kt|1)<<3)>>3]=+it[tt+(lt*320|0)+216>>3],it[yt+((kt|2)<<3)>>3]=+it[tt+(lt*320|0)+224>>3],it[yt+((kt|3)<<3)>>3]=+it[tt+(lt*320|0)+232>>3],it[yt+(kt+4<<3)>>3]=+it[tt+(lt*320|0)+240>>3],it[yt+(kt+5<<3)>>3]=+it[tt+(lt*320|0)+248>>3],it[yt+(kt+6<<3)>>3]=+it[tt+(lt*320|0)+256>>3],it[yt+(kt+7<<3)>>3]=+it[tt+(lt*320|0)+264>>3],it[yt+(kt+8<<3)>>3]=+it[tt+(lt*320|0)+272>>3],it[yt+(kt+9<<3)>>3]=+it[tt+(lt*320|0)+280>>3],Yt=e[h>>2]|0,it[yt+(kt+10<<3)>>3]=+it[Yt+(lt*320|0)+288>>3],it[yt+(kt+11<<3)>>3]=+it[Yt+(lt*320|0)+296>>3],b=b+1|0),lt=lt+1|0;while((lt|0)<(_e|0))}if(tt=h+104|0,g=(o|0)!=0,!(e[tt>>2]|0))b=h+8|0,s=+s3(a,cn,_t,yt,ft,b),g&s>=20&&(D1(e[a>>2]|0,.8)|0,s=+P1(a,cn,_t,yt,ft,b),s>=20&&(D1(e[a>>2]|0,.6)|0,s=+P1(a,cn,_t,yt,ft,b),s>=20&&(D1(e[a>>2]|0,.4)|0,s=+P1(a,cn,_t,yt,ft,b),s>=20&&(D1(e[a>>2]|0,0)|0,s=+P1(a,cn,_t,yt,ft,b))))),xs(yt),xs(_t);else{s=+s3(a,cn,_t,yt,ft,Lt),_e=h+8|0,nt=+s3(a,_e,_t,yt,ft,_e),b=s<nt;do if(g){if(b){b=0;do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}else s=nt;if(s>=20){if(D1(e[a>>2]|0,.8)|0,s=+P1(a,cn,_t,yt,ft,Lt),nt=+P1(a,_e,_t,yt,ft,_e),s<nt){b=0;do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}else s=nt;if(s>=20){if(D1(e[a>>2]|0,.6)|0,s=+P1(a,cn,_t,yt,ft,Lt),nt=+P1(a,_e,_t,yt,ft,_e),s<nt){b=0;do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}else s=nt;if(s>=20){if(D1(e[a>>2]|0,.4)|0,s=+P1(a,cn,_t,yt,ft,Lt),nt=+P1(a,_e,_t,yt,ft,_e),s<nt){b=0;do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}else s=nt;if(s>=20){if(D1(e[a>>2]|0,0)|0,s=+P1(a,cn,_t,yt,ft,Lt),nt=+P1(a,_e,_t,yt,ft,_e),s<nt)b=0;else{s=nt;break}do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}}}}}else if(b){b=0;do it[h+8+(b<<5)>>3]=+it[Lt+(b<<5)>>3],it[h+8+(b<<5)+8>>3]=+it[Lt+(b<<5)+8>>3],it[h+8+(b<<5)+16>>3]=+it[Lt+(b<<5)+16>>3],it[h+8+(b<<5)+24>>3]=+it[Lt+(b<<5)+24>>3],b=b+1|0;while((b|0)!=3)}else s=nt;while(!1);xs(yt),xs(_t)}if(s<20){e[tt>>2]=1;break}if(e[tt>>2]=0,tt=e[Yn>>2]|0,(tt|0)>0){b=e[h>>2]|0,_e=0;do g=e[b+(_e*320|0)+304>>2]|0,(g|0)>=0&&(ir=d+(g<<8)+236|0,(e[ir>>2]|0)==0)&&(e[ir>>2]=8),_e=_e+1|0;while((_e|0)<(tt|0))}}else sr=38;while(!1);return(sr|0)==38&&(e[h+104>>2]=0,s=-1),dt=dr,+s}function Dv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0,Ko=0,Ro=0,Dr=0,Zr=0,us=0;Dr=dt,dt=dt+2544|0,Ko=Dr+208|0,mo=Dr+200|0,Jn=Dr+184|0,ds=Dr+176|0,dr=Dr+168|0,sr=Dr+152|0,Ps=Dr+144|0,ir=Dr+136|0,Qn=Dr+128|0,Br=Dr+120|0,Kr=Dr+112|0,Yn=Dr+104|0,b=Dr+96|0,s=Dr+88|0,o=Dr+80|0,h=Dr+72|0,_=Dr+64|0,Hr=Dr,wr=Dr+2280|0,Or=Dr+232|0,kt=Dr+224|0,Kn=Dr+220|0,Lt=Dr+216|0,cn=Dr+212|0,Ro=s2(a,5306)|0;e:do if(!Ro)e[_>>2]=a,fr(3,5308,_),_=Fl(e[(wo()|0)>>2]|0)|0,e[h>>2]=5367,e[h+4>>2]=_,fr(3,5361,h),_=0;else{if(Q2(wr,Ro),e[o>>2]=Kn,(Wl(wr,5368,o)|0)!=1){e[s>>2]=a,fr(3,5371,s),r2(Ro)|0,_=0;break}_=e[Kn>>2]|0,gr=Qr(_*320|0)|0,gr||(fr(3,5472,b),pn(1)),_t=Hr+8|0,Kt=Hr+16|0,Nt=Hr+24|0,Pt=Hr+32|0,Ot=Hr+40|0,zt=Hr+48|0,$t=Hr+56|0,Yt=(d|0)==0;t:do if((_|0)>0){_=0,o=0;i:for(;;){if(Q2(wr,Ro),h=gr+(_*320|0)|0,s=gr+(_*320|0)+312|0,e[Yn>>2]=s,e[Yn+4>>2]=kt,(Wl(wr,5489,Yn)|0)==1)yt=e[s>>2]|0,e[h>>2]=(yt&-32768|0)==0&!0?yt&32767:0,e[gr+(_*320|0)+4>>2]=1,o=o|2;else{if(Yt){h=10;break}if(!(Tp(Or,a,2048,1)|0)){h=12;break}if(Kl(Or,wr,2047-(Gu(Or)|0)|0)|0,yt=JA(d,Or)|0,e[h>>2]=yt,(yt|0)<0){h=14;break}e[gr+(_*320|0)+4>>2]=0,o=o|1}if(Q2(wr,Ro),h=gr+(_*320|0)+8|0,e[ir>>2]=h,(Wl(wr,5785,ir)|0)!=1){h=18;break}if(Q2(wr,Ro),lt=gr+(_*320|0)+16|0,ft=gr+(_*320|0)+24|0,yt=gr+(_*320|0)+40|0,e[sr>>2]=lt,e[sr+4>>2]=ft,e[sr+8>>2]=gr+(_*320|0)+32,e[sr+12>>2]=yt,(Wl(wr,5894,sr)|0)!=4)if(e[dr>>2]=Lt,e[dr+4>>2]=cn,(Wl(wr,5910,dr)|0)==2)s=0;else{h=21;break}else s=1;do{if(Q2(wr,Ro),e[Jn>>2]=gr+(_*320|0)+16+(s<<5),e[Jn+4>>2]=gr+(_*320|0)+16+(s<<5)+8,e[Jn+8>>2]=gr+(_*320|0)+16+(s<<5)+16,e[Jn+12>>2]=gr+(_*320|0)+16+(s<<5)+24,(Wl(wr,5894,Jn)|0)!=4){h=23;break i}s=s+1|0}while((s|0)<3);ZA(lt,gr+(_*320|0)+112|0)|0,us=+it[h>>3],Zr=us*-.5,it[Hr>>3]=Zr,us=us*.5,it[_t>>3]=us,it[Kt>>3]=us,it[Nt>>3]=us,it[Pt>>3]=us,it[Ot>>3]=Zr,it[zt>>3]=Zr,it[$t>>3]=Zr,h=gr+(_*320|0)+48|0,s=gr+(_*320|0)+56|0,b=gr+(_*320|0)+72|0,g=gr+(_*320|0)+80|0,_e=gr+(_*320|0)+88|0,tt=gr+(_*320|0)+104|0,nt=0;do Zr=+it[Hr+(nt<<4)>>3],us=+it[Hr+(nt<<4)+8>>3],it[gr+(_*320|0)+208+(nt*24|0)>>3]=+it[yt>>3]+(+it[lt>>3]*Zr+ +it[ft>>3]*us),it[gr+(_*320|0)+208+(nt*24|0)+8>>3]=+it[b>>3]+(+it[h>>3]*Zr+ +it[s>>3]*us),it[gr+(_*320|0)+208+(nt*24|0)+16>>3]=+it[tt>>3]+(+it[g>>3]*Zr+ +it[_e>>3]*us),nt=nt+1|0;while((nt|0)!=4);if(_=_+1|0,(_|0)>=(e[Kn>>2]|0))break t}(h|0)==10?(e[Kr>>2]=a,e[Kr+4>>2]=wr,fr(3,5496,Kr)):(h|0)==12?(e[Br>>2]=a,fr(3,5624,Br)):(h|0)==14?(e[Qn>>2]=a,e[Qn+4>>2]=Or,fr(3,5708,Qn)):(h|0)==18?(e[Ps>>2]=a,e[Ps+4>>2]=_+1,fr(3,5789,Ps)):(h|0)==21?(e[ds>>2]=a,e[ds+4>>2]=_+1,fr(3,5916,ds)):(h|0)==23&&(e[mo>>2]=a,e[mo+4>>2]=_+1,fr(3,5916,mo)),r2(Ro)|0,xs(gr),_=0;break e}else o=0;while(!1);r2(Ro)|0,_=Qr(136)|0,_||(fr(3,5472,Ko),pn(1)),e[_>>2]=gr,e[_+4>>2]=e[Kn>>2],e[_+104>>2]=0;do if((o&3|0)!=3)if(h=_+108|0,o&1){e[h>>2]=0;break}else{e[h>>2]=1;break}else e[_+108>>2]=2;while(!1);it[_+112>>3]=.5,it[_+120>>3]=.5}while(!1);return dt=Dr,_|0}function Q2(a,d){a=a|0,d=d|0;var _=0,h=0;e:do if(G1(a,256,d)|0)for(;;){_=Gu(a)|0;t:do if(_)for(;;){switch(_=_+-1|0,h=a+_|0,ct[h>>0]|0){case 13:case 10:break;default:break t}if(ct[h>>0]=0,!_)break t}while(!1);switch(ct[a>>0]|0){case 0:case 35:break;default:break e}if(!(G1(a,256,d)|0))break e}while(!1)}function Pv(a,d,_,h){a=a|0,d=+d,_=+_,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;if(_t=dt,dt=dt+400|0,nt=_t+296|0,yt=_t+200|0,lt=_t+128|0,ft=_t,g=e[a>>2]|0,o=e[a+4>>2]|0,!((n1(a+8|0,nt,yt)|0)<0)){b=+(o+-1|0),o=nt+32|0,it[o>>3]=b*+it[nt+64>>3]-+it[o>>3],o=nt+40|0,it[o>>3]=b*+it[nt+72>>3]-+it[o>>3],o=nt+48|0,it[o>>3]=b*+it[nt+80>>3]-+it[o>>3],o=nt+56|0,it[o>>3]=b*+it[nt+88>>3]-+it[o>>3],s=+it[nt+80>>3],o=0;do it[lt+(o*24|0)>>3]=+it[nt+(o<<5)>>3]/s,it[lt+(o*24|0)+8>>3]=+it[nt+(o<<5)+8>>3]/s,it[lt+(o*24|0)+16>>3]=+it[nt+(o<<5)+16>>3]/s,o=o+1|0;while((o|0)!=3);s=+(g+-1|0),it[ft>>3]=+it[lt>>3]*2/s,it[ft+8>>3]=+it[lt+8>>3]*2/s,it[ft+16>>3]=+it[lt+16>>3]*2/s+-1,g=ft+24|0,e[g>>2]=0,e[g+4>>2]=0,e[g+8>>2]=0,e[g+12>>2]=0,it[ft+40>>3]=+it[lt+32>>3]*2/b,it[ft+48>>3]=+it[lt+40>>3]*2/b+-1,g=ft+56|0,s=_-d,e[g>>2]=0,e[g+4>>2]=0,e[g+8>>2]=0,e[g+12>>2]=0,e[g+16>>2]=0,e[g+20>>2]=0,it[ft+80>>3]=(d+_)/s,it[ft+88>>3]=_*-2*d/s,g=ft+96|0,e[g>>2]=0,e[g+4>>2]=0,e[g+8>>2]=0,e[g+12>>2]=0,it[ft+112>>3]=1,it[ft+120>>3]=0,s=+it[yt+24>>3],b=+it[yt+56>>3],_=+it[yt+88>>3],g=0;do{d=+it[ft+(g<<5)>>3],o=ft+(g<<5)+8|0,a=ft+(g<<5)+16|0,_e=+it[o>>3],tt=+it[a>>3],nt=0;do it[h+((nt<<2)+g<<3)>>3]=d*+it[yt+(nt<<3)>>3]+_e*+it[yt+32+(nt<<3)>>3]+tt*+it[yt+64+(nt<<3)>>3],nt=nt+1|0;while((nt|0)!=3);it[h+(g+12<<3)>>3]=+it[ft+(g<<5)+24>>3]+(d*s+ +it[o>>3]*b+ +it[a>>3]*_),g=g+1|0}while((g|0)!=4)}dt=_t}function Ov(a){a=a|0,e[496]=a}function Fv(){return e[496]|0}function jm(a){a=a|0;var d=0,_=0;d=a+212|0,_=e[d>>2]|0,_&&(yE(_)|0,ky(e[d>>2]|0)|0,e[d>>2]=0),d=a+224|0,e[d>>2]|0&&(Oy(d)|0,e[d>>2]=0),d=a+192|0,e[d>>2]|0&&(Cu(d)|0,e[d>>2]=0)}function kv(a){a=a|0;var d=0,_=0,h=0,o=0,s=0;if(s=dt,dt=dt+16|0,_=s,e[_>>2]=a,!(ko(2044,_)|0))a=-1;else{if(o=Go(2044,_)|0,a=o+196|0,d=e[a>>2]|0,d&&(xs(d),e[a>>2]=0,e[o+200>>2]=0),jm(o),xu(e[o+216>>2]|0)|0,C6(2044,_)|0,_=o+248|0,h=o+252|0,a=e[_>>2]|0,(e[h>>2]|0)!=(a|0)){d=0;do Iv(e[a+(d<<3)+4>>2]|0)|0,d=d+1|0,a=e[_>>2]|0;while(d>>>0<(e[h>>2]|0)-a>>3>>>0)}Dp(_),K0(_),Dp(o+248|0),K0(o),a=0}return dt=s,a|0}function Nv(a){a=a|0;var d=0,_=0,h=0,o=0,s=0;return s=dt,dt=dt+208|0,o=s+192|0,h=s,_=s+196|0,ct[a>>0]&1?d=e[a+8>>2]|0:d=a+1|0,(Ym(d,1,h,s+184|0)|0)<0?(ct[a>>0]&1?d=e[a+8>>2]|0:d=a+1|0,e[o>>2]=d,fr(3,6093,o),d=-1):(d=e[521]|0,e[521]=d+1,e[_>>2]=d,B0(e3(2064,_)|0,h|0,184)|0),dt=s,d|0}function Uv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0;nt=dt,dt=dt+48|0,tt=nt+24|0,_e=nt+16|0,b=nt+8|0,o=nt,_=nt+32|0,h=nt+28|0,e[_>>2]=a,e[h>>2]=d;do if(ko(2044,_)|0&&(g=Go(2044,_)|0,(t3(2064,h)|0)!=0)){if(s=g+8|0,B0(s|0,e3(2064,h)|0,184)|0,h=e[s>>2]|0,_=g+204|0,d=e[g+12>>2]|0,a=g+208|0,(h|0)==(e[_>>2]|0)&&(d|0)==(e[a>>2]|0)||(e[o>>2]=h,e[o+4>>2]=d,fr(2,6152,o),f2(s,e[_>>2]|0,e[a>>2]|0,s)|0),jm(g),_=Ip(s,15)|0,a=g+192|0,e[a>>2]=_,!_){fr(3,6199,b),_=-1;break}if(_=Fy(_)|0,d=g+212|0,e[d>>2]=_,!_){fr(3,6237,_e),_=-1;break}if(lE(_,2)|0,_e=Dy(s)|0,e[g+224>>2]=_e,_e){EE(e[d>>2]|0,e[g+216>>2]|0)|0,Pv(e[a>>2]|0,+it[g+232>>3],+it[g+240>>3],g+264|0),_=0;break}else{fr(3,6274,tt),_=-1;break}}else _=-1;while(!1);return dt=nt,_|0}function Hv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0;return b=dt,dt=dt+16|0,s=b+8|0,o=b,_=b+12|0,e[_>>2]=a,ko(2044,_)|0?(h=Go(2044,_)|0,ct[d>>0]&1?d=e[d+8>>2]|0:d=d+1|0,a=h+216|0,_=JA(e[a>>2]|0,d)|0,e[h+260>>2]=_,(_|0)<0&&(e[o>>2]=d,fr(3,6312,o),xu(e[a>>2]|0)|0,fr(3,6358,s),_=-1)):_=-1,dt=b,_|0}function Gv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0;_e=dt,dt=dt+32|0,o=_e+16|0,h=_e+8|0,_=_e+20|0,g=_e,e[_>>2]=a;do if(ko(2044,_)|0){if(b=Go(2044,_)|0,ct[d>>0]&1?_=e[d+8>>2]|0:_=d+1|0,a=e[b+212>>2]|0,d=b+216|0,s=b+220|0,_=Dv(_,e[d>>2]|0)|0,e[s>>2]=_,!_){fr(3,6402,h),xu(e[d>>2]|0)|0,fr(3,6429,o),_=-1;break}switch(e[_+108>>2]|0){case 0:{rm(a,0)|0;break}case 1:{rm(a,2)|0;break}default:rm(a,3)|0}if(a=b+248|0,d=b+252|0,h=e[d>>2]|0,_=h-(e[a>>2]|0)>>3,o=g,e[o>>2]=0,e[o+4>>2]=0,e[g>>2]=_,e[g+4>>2]=e[s>>2],(h|0)==(e[b+256>>2]|0)){_6(a,g);break}else{b=g,_=e[b>>2]|0,b=e[b+4>>2]|0,g=h,e[g>>2]=_,e[g+4>>2]=b,e[d>>2]=(e[d>>2]|0)+8;break}}else _=-1;while(!1);return dt=_e,_|0}function Qv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;return s=dt,dt=dt+16|0,_=s,e[_>>2]=a,ko(2044,_)|0&&(h=Go(2044,_)|0,(d|0)>=0)&&(o=e[h+248>>2]|0,(e[h+252>>2]|0)-o>>3>>>0>d>>>0)?_=e[(e[o+(d<<3)+4>>2]|0)+4>>2]|0:_=-1,dt=s,_|0}function Vv(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=_,e[d>>2]=a,ko(2044,d)|0?(d=Go(2044,d)|0,d=(e[d+252>>2]|0)-(e[d+248>>2]|0)>>3):d=-1,dt=_,d|0}function zv(a,d){a=a|0,d=+d;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a,ko(2044,_)|0&&(it[(Go(2044,_)|0)+232>>3]=d),dt=h}function Wv(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,_=h,e[_>>2]=a,ko(2044,_)|0?d=+it[(Go(2044,_)|0)+232>>3]:d=-1,dt=h,+d}function Kv(a,d){a=a|0,d=+d;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a,ko(2044,_)|0&&(it[(Go(2044,_)|0)+240>>3]=d),dt=h}function Xv(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,_=h,e[_>>2]=a,ko(2044,_)|0?d=+it[(Go(2044,_)|0)+240>>3]:d=-1,dt=h,+d}function Yv(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;o=dt,dt=dt+16|0,h=o,_=o+4|0,e[_>>2]=a,ko(2044,_)|0&&!(rm(e[(Go(2044,_)|0)+212>>2]|0,d)|0)&&(e[h>>2]=d,fr(1,6478,h)),dt=o}function qv(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(a=(Yy(e[(Go(2044,d)|0)+212>>2]|0,_)|0)==0,dt=h,(a?e[_>>2]|0:-1)|0):(dt=h,-1)}function Jv(a,d){a=a|0,d=+d;var _=0,h=0,o=0,s=0,b=0,g=0;g=dt,dt=dt+16|0,b=g,_=g+8|0,e[_>>2]=a,ko(2044,_)|0&&(h=Go(2044,_)|0,!(d<=0|d>=1))&&(o=d,s=e[h+212>>2]|0,(s|0)!=0)&&!(qy(s,o)|0)&&(it[b>>3]=o,fr(1,6513,b)),dt=g}function Zv(a){a=a|0;var d=0,_=0,h=0,o=0;return o=dt,dt=dt+16|0,d=o+8|0,h=o,e[d>>2]=a,ko(2044,d)|0&&(_=e[(Go(2044,d)|0)+212>>2]|0,(_|0)!=0)?(a=(Jy(_,h)|0)==0,dt=o,+(a?+it[h>>3]:-1)):(dt=o,-1)}function $v(a,d){a=a|0,d=d|0;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a,ko(2044,_)|0&&Ky(e[(Go(2044,_)|0)+212>>2]|0,d)|0,dt=h}function jv(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(Xy(e[(Go(2044,d)|0)+212>>2]|0,_)|0,d=e[_>>2]|0):d=-1,dt=h,d|0}function _g(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;o=dt,dt=dt+16|0,h=o,_=o+4|0,e[_>>2]=a,ko(2044,_)|0&&!(Uy(e[(Go(2044,_)|0)+212>>2]|0,d)|0)&&(e[h>>2]=d,fr(1,6544,h)),dt=o}function e6(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(a=(Hy(e[(Go(2044,d)|0)+212>>2]|0,_)|0)==0,dt=h,(a?e[_>>2]|0:-1)|0):(dt=h,-1)}function t6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;s=dt,dt=dt+16|0,o=s,_=s+4|0,e[_>>2]=a,ko(2044,_)|0&&(h=Go(2044,_)|0,d>>>0<=255)&&!(Gy(e[h+212>>2]|0,d)|0)&&(e[o>>2]=d,fr(1,6569,o)),dt=s}function i6(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(a=(Qy(e[(Go(2044,d)|0)+212>>2]|0,_)|0)==0,dt=h,(a?e[_>>2]|0:-1)|0):(dt=h,-1)}function n6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;o=dt,dt=dt+16|0,h=o,_=o+4|0,e[_>>2]=a,ko(2044,_)|0&&!(uE(e[(Go(2044,_)|0)+212>>2]|0,d)|0)&&(e[h>>2]=d,fr(1,6590,h)),dt=o}function r6(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(a=(Vy(e[(Go(2044,d)|0)+212>>2]|0,_)|0)==0,dt=h,(a?e[_>>2]|0:-1)|0):(dt=h,-1)}function s6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;return o=dt,dt=dt+16|0,h=o,_=o+4|0,e[_>>2]=a,ko(2044,_)|0?(a=(d|0)!=0,cE(e[(Go(2044,_)|0)+212>>2]|0,a&1)|0,e[h>>2]=a?6616:6620,fr(1,6625,h)):d=0,dt=o,d|0}function o6(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=_,e[d>>2]=a,ko(2044,d)|0?d=e[(e[(Go(2044,d)|0)+212>>2]|0)+4834148>>2]|0:d=0,dt=_,d|0}function a6(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(Ny(e[(Go(2044,d)|0)+212>>2]|0,_)|0,d=e[_>>2]|0):d=0,dt=h,d|0}function l6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;o=dt,dt=dt+16|0,h=o,_=o+4|0,e[_>>2]=a,ko(2044,_)|0&&!(zy(e[(Go(2044,_)|0)+212>>2]|0,d)|0)&&(e[h>>2]=d,fr(1,6647,h)),dt=o}function c6(a){a=a|0;var d=0,_=0,h=0;return h=dt,dt=dt+16|0,d=h+4|0,_=h,e[d>>2]=a,ko(2044,d)|0?(a=(Wy(e[(Go(2044,d)|0)+212>>2]|0,_)|0)==0,dt=h,(a?e[_>>2]|0:-1)|0):(dt=h,-1)}function tm(a,d){a=a|0,d=d|0;var _=0;_=0;do it[d+(_<<5)>>3]=+it[a+(_<<5)>>3],it[d+(_<<5)+8>>3]=+it[a+(_<<5)+8>>3],it[d+(_<<5)+16>>3]=+it[a+(_<<5)+16>>3],it[d+(_<<5)+24>>3]=+it[a+(_<<5)+24>>3],_=_+1|0;while((_|0)!=3)}function u6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;o=dt,dt=dt+16|0,h=o,e[h>>2]=a;do if(ko(2044,h)|0)if(h=Go(2044,h)|0,a=e[h+212>>2]|0,(e[a+44>>2]|0)>(d|0)){+pE(e[h+224>>2]|0,(d|0)<0?8:a+48+(d<<8)|0,+(_|0),264),h=0;break}else{h=e[523]|0;break}else h=e[522]|0;while(!1);return dt=o,h|0}function h6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;o=dt,dt=dt+16|0,h=o,e[h>>2]=a;do if(ko(2044,h)|0)if(h=Go(2044,h)|0,a=e[h+212>>2]|0,(e[a+44>>2]|0)>(d|0)){+e4(e[h+224>>2]|0,(d|0)<0?8:a+48+(d<<8)|0,264,+(_|0),264),h=0;break}else{h=e[523]|0;break}else h=e[522]|0;while(!1);return dt=o,h|0}function d6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;o=dt,dt=dt+16|0,h=o,e[h>>2]=a;do if(ko(2044,h)|0)if(h=e[(Go(2044,h)|0)+212>>2]|0,(e[h+44>>2]|0)>(d|0)){e[((d|0)<0?8:h+48+(d<<8)|0)+16>>2]=_,h=0;break}else{h=e[523]|0;break}else h=e[522]|0;while(!1);return dt=o,h|0}function f6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a;do if(ko(2044,_)|0)if(_=e[(Go(2044,_)|0)+212>>2]|0,(e[_+44>>2]|0)>(d|0)){_=(d|0)<0?8:_+48+(d<<8)|0,lt=+it[33],it[_+168>>3]=lt,g=+it[34],it[_+176>>3]=g,nt=+it[35],it[_+184>>3]=nt,b=+it[36],it[_+192>>3]=b,tt=+it[37],it[_+200>>3]=tt,s=+it[38],it[_+208>>3]=s,_e=+it[39],it[_+216>>3]=_e,o=+it[40],it[_+224>>3]=o,it[_+56>>3]=(lt+nt+tt+_e)*.25,it[_+64>>3]=(g+b+s+o)*.25,_=0;break}else{_=e[523]|0;break}else _=e[522]|0;while(!1);return dt=h,_|0}function p6(a,d){a=a|0,d=d|0;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a;do if(ko(2044,_)|0)if(_=Go(2044,_)|0,a=e[_+248>>2]|0,(d|0)<0||(e[_+252>>2]|0)-a>>3>>>0<=d>>>0){_=e[524]|0;break}else{d=e[a+(d<<3)+4>>2]|0,a=e[_+212>>2]|0,+Lv(e[_+224>>2]|0,a+48|0,e[a+44>>2]|0,d),tm(d+8|0,264),_=0;break}else _=e[522]|0;while(!1);return dt=h,_|0}function A6(a,d){a=a|0,d=d|0;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a;do if(ko(2044,_)|0)if(_=Go(2044,_)|0,a=e[_+248>>2]|0,(d|0)<0||(e[_+252>>2]|0)-a>>3>>>0<=d>>>0){_=e[524]|0;break}else{d=e[a+(d<<3)+4>>2]|0,a=e[_+212>>2]|0,+Bv(e[_+224>>2]|0,a+48|0,e[a+44>>2]|0,d),tm(d+8|0,264),_=0;break}else _=e[522]|0;while(!1);return dt=h,_|0}function m6(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=_,e[d>>2]=a,ko(2044,d)|0?(d=Go(2044,d)|0,d=Zy(e[d+212>>2]|0,e[d+196>>2]|0)|0):d=e[522]|0,dt=_,d|0}function v6(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=_,e[d>>2]=a,ko(2044,d)|0?d=(e[(Go(2044,d)|0)+212>>2]|0)+44|0:d=2088,dt=_,e[d>>2]|0}function g6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;o=dt,dt=dt+16|0,h=o,e[h>>2]=a;do if(ko(2044,h)|0){if(a=Go(2044,h)|0,h=e[a+248>>2]|0,(d|0)<0||(e[a+252>>2]|0)-h>>3>>>0<=d>>>0){h=e[524]|0;break}if(h=e[h+(d<<3)+4>>2]|0,(_|0)<0||(e[h+4>>2]|0)<=(_|0)){h=e[523]|0;break}else{h=e[h>>2]|0,tm(h+(_*320|0)+16|0,264),Y0(0,e[h+(_*320|0)+304>>2]|0,e[h+(_*320|0)>>2]|0,e[h+(_*320|0)+4>>2]|0,+ +it[h+(_*320|0)+8>>3])|0,h=0;break}}else h=e[522]|0;while(!1);return dt=o,h|0}function E6(a,d){a=a|0,d=d|0;var _=0,h=0;h=dt,dt=dt+16|0,_=h,e[_>>2]=a;do if(ko(2044,_)|0)if(_=e[(Go(2044,_)|0)+212>>2]|0,(e[_+44>>2]|0)>(d|0)){_=(d|0)<0?8:_+48+(d<<8)|0,X1(1,e[_>>2]|0,e[_+4>>2]|0,e[_+8>>2]|0,e[_+12>>2]|0,e[_+16>>2]|0,e[_+20>>2]|0,e[_+24>>2]|0,+ +it[_+32>>3],+ +it[_+40>>3],+ +it[_+48>>3],+ +it[_+56>>3],+ +it[_+64>>3],+ +it[_+72>>3],+ +it[_+80>>3],+ +it[_+88>>3],+ +it[_+96>>3],+ +it[_+104>>3],+ +it[_+112>>3],+ +it[_+120>>3],+ +it[_+128>>3],+ +it[_+136>>3],+ +it[_+144>>3],+ +it[_+152>>3],+ +it[_+160>>3],+ +it[_+168>>3],+ +it[_+176>>3],+ +it[_+184>>3],+ +it[_+192>>3],+ +it[_+200>>3],+ +it[_+208>>3],+ +it[_+216>>3],+ +it[_+224>>3],e[_+240>>2]|0)|0,_=0;break}else{_=e[523]|0;break}else _=e[522]|0;while(!1);return dt=h,_|0}function y6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0;return b=dt,dt=dt+16|0,s=b+8|0,o=b+12|0,h=e[525]|0,e[525]=h+1,e[o>>2]=h,o=Go(2044,o)|0,e[o>>2]=h,e[o+204>>2]=a,e[o+208>>2]=d,g=Pn(a<<2,d)|0,d=o+200|0,e[d>>2]=g,a=o+196|0,e[a>>2]=Qr(g)|0,g=wE()|0,e[o+216>>2]=g,g||fr(3,8285,b),Uv(h,_)|0,e[s>>2]=e[d>>2],fr(1,8322,s),w0(2,e[o>>2]|0,e[a>>2]|0,e[d>>2]|0,o+264|0,264)|0,dt=b,e[o>>2]|0}function w6(a){a=a|0;var d=0;a=dt,dt=dt+16|0,d=a,V2(8591,7),M1(8597,3),i3(8606,2),i3(8617,3),A2(8633,4),M1(8651,4),x6(8671,5),V2(8683,8),A2(8700,5),V2(8720,9),V2(8738,10),A2(8760,6),A2(8783,7),M1(8812,6),M1(8825,7),V2(8838,11),A2(8857,8),A2(8867,9),M1(8880,8),M1(8893,9),b6(8912,10),M6(8924,1),n3(8936,1),im(8959,1),n3(8982,2),im(9004,2),m2(9026,1),M1(9043,10),m2(9060,2),M1(9073,11),m2(9086,3),M1(9110,12),S6(9134,3),im(9147,3),m2(9160,4),M1(9178,13),m2(9196,5),M1(9212,14),m2(9228,6),M1(9245,15),nm(9262,2088),nm(9291,2096),nm(9319,2092),zr(9352,680,0),zr(9369,680,1),zr(9385,680,0),zr(9407,680,0),zr(9432,680,1),zr(9457,680,1),zr(9482,680,100),zr(9509,680,0),zr(9535,680,1),zr(9561,680,0),zr(9588,680,0),zr(9615,680,1),zr(9641,680,2),zr(9666,680,3),zr(9704,680,4),zr(9741,680,0),zr(9775,680,0),zr(9799,680,1),zr(9825,680,2),zr(9852,680,2),zr(9886,680,5),it[d>>3]=.5,T6(9904,d),zr(9925,680,0),zr(9944,680,1),zr(9962,680,2),zr(9980,680,3),zr(9999,680,4),zr(10021,680,3),zr(10040,680,515),zr(10069,680,259),zr(10097,680,4),zr(10116,680,772),zr(10146,680,1028),zr(10176,680,0),zr(10207,680,1),zr(10243,680,2),zr(10277,680,3),zr(10315,680,0),zr(10348,680,1),zr(10395,680,2),zr(10437,680,3),zr(10480,680,4),zr(10532,680,5),zr(10583,680,6),zr(10628,680,7),zr(10667,680,8),zr(10712,680,9),dt=a}function ko(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0;_=e[d>>2]|0,o=e[a+4>>2]|0;e:do if(o)if(s=o+-1|0,b=(s&o|0)==0,b?h=s&_:h=(_>>>0)%(o>>>0)|0,d=e[(e[a>>2]|0)+(h<<2)>>2]|0,d)do{if(d=e[d>>2]|0,!d){d=0;break e}if(a=e[d+4>>2]|0,b?a=a&s:a=(a>>>0)%(o>>>0)|0,(a|0)!=(h|0)){d=0;break e}}while((e[d+8>>2]|0)!=(_|0));else d=0;else d=0;while(!1);return d|0}function Go(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;return s=dt,dt=dt+32|0,o=s+8|0,h=s,_=ko(a,d)|0,_||(OA(o,a,d),FA(h,a,e[o>>2]|0),_=e[h>>2]|0,e[o>>2]=0),dt=s,_+16|0}function C6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;return o=dt,dt=dt+16|0,_=o+4|0,h=o,d=ko(a,d)|0,d?(e[h>>2]=d,e[_>>2]=e[h>>2],DA(a,_)|0,d=1):d=0,dt=o,d|0}function Dp(a){a=a|0;var d=0,_=0;if(_=e[a>>2]|0,_){if(d=a+4|0,a=e[d>>2]|0,(a|0)!=(_|0)){do a=a+-8|0;while((a|0)!=(_|0));e[d>>2]=a}K0(_)}}function e3(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;return s=dt,dt=dt+32|0,o=s+8|0,h=s,_=t3(a,d)|0,_||(J6(o,a,d),Z6(h,a,e[o>>2]|0),_=e[h>>2]|0,e[o>>2]=0),dt=s,_+16|0}function t3(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0;_=e[d>>2]|0,o=e[a+4>>2]|0;e:do if(o)if(s=o+-1|0,b=(s&o|0)==0,b?h=s&_:h=(_>>>0)%(o>>>0)|0,d=e[(e[a>>2]|0)+(h<<2)>>2]|0,d)do{if(d=e[d>>2]|0,!d){d=0;break e}if(a=e[d+4>>2]|0,b?a=a&s:a=(a>>>0)%(o>>>0)|0,(a|0)!=(h|0)){d=0;break e}}while((e[d+8>>2]|0)!=(_|0));else d=0;else d=0;while(!1);return d|0}function _6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0;g=dt,dt=dt+32|0,b=g,s=a+4|0,_=e[a>>2]|0,o=((e[s>>2]|0)-_>>3)+1|0,o>>>0>536870911&&gp(a),h=_,_=(e[a+8>>2]|0)-h|0,_>>3>>>0<268435455?(_=_>>2,_=_>>>0<o>>>0?o:_):_=536870911,X6(b,_,(e[s>>2]|0)-h>>3,a+8|0),s=b+8|0,o=e[s>>2]|0,_=d,h=e[_+4>>2]|0,d=o,e[d>>2]=e[_>>2],e[d+4>>2]=h,e[s>>2]=o+8,Y6(a,b),q6(b),dt=g}function V2(a,d){a=a|0,d=d|0,Lo(a|0,4,2200,10911,1,d|0)}function M1(a,d){a=a|0,d=d|0,Lo(a|0,2,2192,10801,10,d|0)}function i3(a,d){a=a|0,d=d|0,Lo(a|0,3,2180,10906,12,d|0)}function A2(a,d){a=a|0,d=d|0,Lo(a|0,3,2168,10906,13,d|0)}function x6(a,d){a=a|0,d=d|0,Lo(a|0,2,2160,10801,11,d|0)}function b6(a,d){a=a|0,d=d|0,Lo(a|0,2,2152,10797,7,d|0)}function M6(a,d){a=a|0,d=d|0,Lo(a|0,1,2148,10794,16,d|0)}function n3(a,d){a=a|0,d=d|0,Lo(a|0,3,2136,10789,1,d|0)}function im(a,d){a=a|0,d=d|0,Lo(a|0,2,2128,10785,1,d|0)}function m2(a,d){a=a|0,d=d|0,Lo(a|0,3,2116,10780,1,d|0)}function S6(a,d){a=a|0,d=d|0,Lo(a|0,3,2104,10775,2,d|0)}function nm(a,d){a=a|0,d=d|0,zr(a|0,680,e[d>>2]|0)}function T6(a,d){a=a|0,d=d|0,zr(a|0,720,~~+it[d>>3]>>>0|0)}function R6(){e[511]=0,e[512]=0,e[513]=0,e[514]=0,vt[515]=1,tr(11,2044,Rt|0)|0,e[516]=0,e[517]=0,e[518]=0,e[519]=0,vt[520]=1,tr(12,2064,Rt|0)|0,w6(0)}function I6(a){a=a|0,P6(a)}function B6(a){a=a|0,L6(a)}function L6(a){a=a|0;var d=0;D6(a,e[a+8>>2]|0),d=e[a>>2]|0,e[a>>2]=0,d&&K0(d)}function D6(a,d){if(a=a|0,d=d|0,d)do a=d,d=e[d>>2]|0,K0(a);while(d|0)}function P6(a){a=a|0;var d=0;O6(a,e[a+8>>2]|0),d=e[a>>2]|0,e[a>>2]=0,d&&K0(d)}function O6(a,d){if(a=a|0,d=d|0,d)do a=d,d=e[d>>2]|0,Dp(a+264|0),K0(a);while(d|0)}function F6(a,d,_){a=a|0,d=d|0,_=+_,um[a&3](d,_)}function k6(a,d,_){a=a|0,d=d|0,_=_|0,C3[a&7](d,_)}function N6(a,d){return a=a|0,d=d|0,+ +y3[a&3](d)}function U6(a,d,_){a=a|0,d=d|0,_=+_,um[a&3](d,_)}function H6(a){return a=a|0,w3[a&1]()|0}function G6(a,d){a=a|0,d=d|0,K2[a&15](d)}function Q6(a,d){a=a|0,d=d|0;var _=0,h=0;return _=dt,dt=dt+16|0,h=_,r3(h,d),a=Qp[a&31](h)|0,kp(h),dt=_,a|0}function r3(a,d){a=a|0,d=d|0,a3(a,d+4|0,e[d>>2]|0)}function V6(a,d,_){return a=a|0,d=d|0,_=_|0,z1[a&15](d,_)|0}function z6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;return h=dt,dt=dt+16|0,o=h,r3(o,_),a=z1[a&15](d,o)|0,kp(o),dt=h,a|0}function W6(a,d){return a=a|0,d=d|0,Qp[a&31](d)|0}function K6(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,v1[a&15](d,_,h)|0}function X6(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,e[a+12>>2]=0,e[a+16>>2]=h,d?h=eu(d<<3)|0:h=0,e[a>>2]=h,_=h+(_<<3)|0,e[a+8>>2]=_,e[a+4>>2]=_,e[a+12>>2]=h+(d<<3)}function Y6(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0;h=e[a>>2]|0,s=a+4|0,_=d+4|0,o=(e[s>>2]|0)-h|0,b=(e[_>>2]|0)+(0-(o>>3)<<3)|0,e[_>>2]=b,B0(b|0,h|0,o|0)|0,o=e[a>>2]|0,e[a>>2]=e[_>>2],e[_>>2]=o,o=d+8|0,h=e[s>>2]|0,e[s>>2]=e[o>>2],e[o>>2]=h,o=a+8|0,a=d+12|0,h=e[o>>2]|0,e[o>>2]=e[a>>2],e[a>>2]=h,e[d>>2]=e[_>>2]}function q6(a){a=a|0;var d=0,_=0,h=0;if(_=e[a+4>>2]|0,h=a+8|0,d=e[h>>2]|0,(d|0)!=(_|0)){do d=d+-8|0;while((d|0)!=(_|0));e[h>>2]=d}d=e[a>>2]|0,d&&K0(d)}function J6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;h=eu(200)|0,e[h+8>>2]=e[_>>2],Er(h+16|0,0,184)|0,e[a>>2]=h,a=a+4|0,e[a>>2]=d+8,e[a+4>>2]=257}function Z6(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;tt=e[_+8>>2]|0,Kt=_+4|0,e[Kt>>2]=tt,_t=d+4|0,_e=e[_t>>2]|0,yt=(_e|0)==0;e:do if(yt)o=0,ft=12;else if(nt=_e+-1|0,lt=(nt&_e|0)==0,lt?o=nt&tt:o=(tt>>>0)%(_e>>>0)|0,h=e[(e[d>>2]|0)+(o<<2)>>2]|0,!h)ft=12;else for(;;){if(s=e[h>>2]|0,!s){ft=12;break e}if(h=e[s+4>>2]|0,lt?h=h&nt:h=(h>>>0)%(_e>>>0)|0,(h|0)!=(o|0)){ft=12;break e}if((e[s+8>>2]|0)==(tt|0)){h=0,_=s;break}else h=s}while(!1);if((ft|0)==12){tt=d+12|0,b=+(((e[tt>>2]|0)+1|0)>>>0),g=+vt[d+16>>2];do if(yt|b>+(_e>>>0)*g)if(_e>>>0>2?h=(_e+-1&_e|0)==0:h=0,s=(h&1|_e<<1)^1,h=~~+$o(+(b/g))>>>0,LA(d,s>>>0<h>>>0?h:s),s=e[_t>>2]|0,h=e[Kt>>2]|0,o=s+-1|0,o&s){_e=s,o=(h>>>0)%(s>>>0)|0;break}else{_e=s,o=o&h;break}while(!1);h=e[(e[d>>2]|0)+(o<<2)>>2]|0,h?(e[_>>2]=e[h>>2],e[h>>2]=_):(h=d+8|0,e[_>>2]=e[h>>2],e[h>>2]=_,e[(e[d>>2]|0)+(o<<2)>>2]=h,h=e[_>>2]|0,h&&(h=e[h+4>>2]|0,o=_e+-1|0,o&_e?h=(h>>>0)%(_e>>>0)|0:h=h&o,e[(e[d>>2]|0)+(h<<2)>>2]=_)),e[tt>>2]=(e[tt>>2]|0)+1,h=1}e[a>>2]=_,ct[a+4>>0]=h}function $6(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s*3|0)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+1>>0]|0)+(It[ft>>0]|0)+(It[ft+2>>0]|0)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+3|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+6|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function j6(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){tt=It[ft>>0]|0,nt=It[ft+1>>0]|0;do if(((tt&248)+10+(tt<<5&224)+(nt>>>3&28)+(nt<<3&248)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function eE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<2)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+1>>0]|0)+(It[ft>>0]|0)+(It[ft+2>>0]|0)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+4|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+8|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function tE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){nt=It[ft>>0]|0;do if(((nt&240)+24+(nt<<4&240)+((It[ft+1>>0]|0)&240)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function iE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<1)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){tt=It[ft>>0]|0,nt=It[ft+1>>0]|0;do if(((tt&248)+12+(tt<<5&224)+(nt>>>3&24)+(nt<<2&248)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+2|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+4|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function nE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,tt=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=tt,g=tt+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=h*3|0,zt=d+-1|0,(_|0)>0)for(s=0,h=tt,b=tt+(zt<<1)|0;st[b>>1]=0,st[h>>1]=0,s=s+1|0,!((s|0)>=(_|0));)h=h+(d<<1)|0,b=b+(d<<1)|0;b=o+1179664|0,s=d+1|0,Nt=0-d|0,_t=1-d|0,Kt=~d;e:do if((Yt|0)>1){Pt=(zt|0)>1,_e=(e[o+4>>2]|0)+s|0,Ot=1,g=a+(s<<2)|0,a=tt+(s<<1)|0,h=0;t:for(;;){if(Pt)for(s=_e,yt=1,ft=g,lt=h;;){do if(((It[ft+2>>0]|0)+(It[ft+1>>0]|0)+(It[ft+3>>0]|0)|0)>($t|0)){if(ct[s>>0]=-1,h=st[a+(Nt<<1)>>1]|0,h<<16>>16>0){st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(_e=st[a+(_t<<1)>>1]|0,tt=_e<<16>>16,h=st[a+(Kt<<1)>>1]|0,nt=h<<16>>16,g=h<<16>>16>0,_e<<16>>16<=0){if(g){st[a>>1]=h,h=nt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-3<<2)|0,(e[g>>2]|0)<(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=st[a+-2>>1]|0,h<<16>>16>0){if(st[a>>1]=h,h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,h=o+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(yt|0)){h=lt;break}e[h>>2]=yt,h=lt;break}else{if(h=lt+1|0,(lt|0)>32767)break t;st[a>>1]=h,e[o+1179664+(lt<<2)>>2]=h<<16>>16,lt=lt*7|0,e[o+1310736+(lt<<2)>>2]=1,e[o+1310736+(lt+1<<2)>>2]=yt,e[o+1310736+(lt+2<<2)>>2]=Ot,e[o+1310736+(lt+3<<2)>>2]=yt,e[o+1310736+(lt+4<<2)>>2]=yt,e[o+1310736+(lt+5<<2)>>2]=Ot,e[o+1310736+(lt+6<<2)>>2]=Ot;break}}if(g){if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+(nt+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,nt=o+1310736+(h+-5<<2)|0,e[nt>>2]=(e[nt>>2]|0)+Ot,e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(g=st[a+-2>>1]|0,g<<16>>16<=0){st[a>>1]=_e,h=tt*7|0,g=o+1310736+(h+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=o+1310736+(h+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+yt,g=o+1310736+(h+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+Ot,g=o+1310736+(h+-4<<2)|0,(e[g>>2]|0)>(yt|0)&&(e[g>>2]=yt),e[o+1310736+(h+-1<<2)>>2]=Ot,h=lt;break}if(h=e[o+1179664+(tt+-1<<2)>>2]|0,tt=e[o+1179664+((g<<16>>16)+-1<<2)>>2]|0,(h|0)>(tt|0))if(st[a>>1]=tt,(lt|0)>0)for(g=0,_e=b;;)if((e[_e>>2]|0)==(h|0)&&(e[_e>>2]=tt),g=g+1|0,(g|0)>=(lt|0)){h=tt;break}else _e=_e+4|0;else h=tt;else if(st[a>>1]=h,(h|0)<(tt|0)&(lt|0)>0)for(g=0,_e=b;(e[_e>>2]|0)==(tt|0)&&(e[_e>>2]=h),g=g+1|0,!((g|0)>=(lt|0));)_e=_e+4|0;h=(h<<16>>16)*7|0,nt=o+1310736+(h+-7<<2)|0,e[nt>>2]=(e[nt>>2]|0)+1,nt=o+1310736+(h+-6<<2)|0,e[nt>>2]=(e[nt>>2]|0)+yt,h=o+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+Ot,h=lt}else st[a>>1]=0,ct[s>>0]=0,h=lt;while(!1);if(yt=yt+1|0,g=ft+4|0,a=a+2|0,s=s+1|0,(yt|0)>=(zt|0))break;ft=g,lt=h}else s=_e;if(Ot=Ot+1|0,(Ot|0)>=(Yt|0)){tt=h,Lt=52;break e}else _e=s+2|0,g=g+8|0,a=a+4|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(a=o+12|0,(tt|0)<1)h=1;else for(g=1,h=1;s=e[b>>2]|0,(s|0)==(g|0)?(s=h,h=h+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[b>>2]=s,(g|0)<(tt|0);)g=g+1|0,b=b+4|0;if(_e=o+8|0,s=h+-1|0,e[_e>>2]=s,s){if(Er(a|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(h|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[_e>>2]|0))}if((tt|0)>0){a=0;do b=(e[o+1179664+(a<<2)>>2]|0)+-1|0,g=a*7|0,s=o+12+(b<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(g<<2)>>2]|0),s=b<<1,h=o+655376+(s<<3)|0,it[h>>3]=+it[h>>3]+ +(e[o+1310736+(g+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(g+2<<2)>>2]|0),b=b<<2,s=o+131084+(b<<2)|0,h=e[o+1310736+(g+3<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),s=o+131084+((b|1)<<2)|0,h=e[o+1310736+(g+4<<2)>>2]|0,(e[s>>2]|0)<(h|0)&&(e[s>>2]=h),s=o+131084+((b|2)<<2)|0,h=e[o+1310736+(g+5<<2)>>2]|0,(e[s>>2]|0)>(h|0)&&(e[s>>2]=h),h=o+131084+((b|3)<<2)|0,s=e[o+1310736+(g+6<<2)>>2]|0,(e[h>>2]|0)<(s|0)&&(e[h>>2]=s),a=a+1|0;while((a|0)<(tt|0))}if((e[_e>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[_e>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function rE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+s|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}else st[_e>>1]=0,ct[s>>0]=0,b=ft;while(!1);if(_t=_t+1|0,a=yt+1|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+2|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function sE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+(s<<1)|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt+1>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}else st[_e>>1]=0,ct[s>>0]=0,b=ft;while(!1);if(_t=_t+1|0,a=yt+2|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+4|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function oE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,s=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,tt=(e[o+4>>2]|0)+s|0,zt=1,a=a+(s<<1)|0,_e=_e+(s<<1)|0,b=0;t:for(;;){if(Ot)for(s=tt,_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0|0)>(h|0)){if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}else st[_e>>1]=0,ct[s>>0]=0,b=ft;while(!1);if(_t=_t+1|0,a=yt+2|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}else s=tt;if(zt=zt+1|0,(zt|0)>=(Yt|0)){nt=b,Lt=52;break e}else tt=s+2|0,a=a+4|0,_e=_e+4|0}fr(3,3904,kt),s=-1}else nt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(nt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(nt|0);)a=a+1|0,g=g+4|0;if(tt=o+8|0,s=b+-1|0,e[tt>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[tt>>2]|0))}if((nt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(nt|0))}if((e[tt>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[tt>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function aE(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0;if(cn=dt,dt=dt+16|0,kt=cn,_e=e[o>>2]|0,Yt=_+-1|0,(d|0)>0)for(s=0,b=_e,g=_e+((Pn(Yt,d)|0)<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(d|0));)b=b+2|0,g=g+2|0;if($t=d+-1|0,(_|0)>0)for(s=0,b=_e,g=_e+($t<<1)|0;st[g>>1]=0,st[b>>1]=0,s=s+1|0,!((s|0)>=(_|0));)b=b+(d<<1)|0,g=g+(d<<1)|0;g=o+1179664|0,b=d+1|0,Pt=0-d|0,Kt=1-d|0,Nt=~d;e:do if((Yt|0)>1){Ot=($t|0)>1,s=(e[o+4>>2]|0)+b|0,zt=1,a=a+b|0,_e=_e+(b<<1)|0,h=h+b|0,b=0;t:for(;;){if(Ot)for(_t=1,yt=a,ft=b;;){do if((It[yt>>0]|0)>(It[h>>0]|0)){if(ct[s>>0]=-1,b=st[_e+(Pt<<1)>>1]|0,b<<16>>16>0){st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(tt=st[_e+(Kt<<1)>>1]|0,nt=tt<<16>>16,b=st[_e+(Nt<<1)>>1]|0,lt=b<<16>>16,a=b<<16>>16>0,tt<<16>>16<=0){if(a){st[_e>>1]=b,b=lt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-3<<2)|0,(e[a>>2]|0)<(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=st[_e+-2>>1]|0,b<<16>>16>0){if(st[_e>>1]=b,b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,b=o+1310736+(b+-3<<2)|0,(e[b>>2]|0)>=(_t|0)){b=ft;break}e[b>>2]=_t,b=ft;break}else{if(b=ft+1|0,(ft|0)>32767)break t;st[_e>>1]=b,e[o+1179664+(ft<<2)>>2]=b<<16>>16,ft=ft*7|0,e[o+1310736+(ft<<2)>>2]=1,e[o+1310736+(ft+1<<2)>>2]=_t,e[o+1310736+(ft+2<<2)>>2]=zt,e[o+1310736+(ft+3<<2)>>2]=_t,e[o+1310736+(ft+4<<2)>>2]=_t,e[o+1310736+(ft+5<<2)>>2]=zt,e[o+1310736+(ft+6<<2)>>2]=zt;break}}if(a){if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+(lt+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,lt=o+1310736+(b+-5<<2)|0,e[lt>>2]=(e[lt>>2]|0)+zt,e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(a=st[_e+-2>>1]|0,a<<16>>16<=0){st[_e>>1]=tt,b=nt*7|0,a=o+1310736+(b+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=o+1310736+(b+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+_t,a=o+1310736+(b+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+zt,a=o+1310736+(b+-4<<2)|0,(e[a>>2]|0)>(_t|0)&&(e[a>>2]=_t),e[o+1310736+(b+-1<<2)>>2]=zt,b=ft;break}if(b=e[o+1179664+(nt+-1<<2)>>2]|0,nt=e[o+1179664+((a<<16>>16)+-1<<2)>>2]|0,(b|0)>(nt|0))if(st[_e>>1]=nt,(ft|0)>0)for(a=0,tt=g;;)if((e[tt>>2]|0)==(b|0)&&(e[tt>>2]=nt),a=a+1|0,(a|0)>=(ft|0)){b=nt;break}else tt=tt+4|0;else b=nt;else if(st[_e>>1]=b,(b|0)<(nt|0)&(ft|0)>0)for(a=0,tt=g;(e[tt>>2]|0)==(nt|0)&&(e[tt>>2]=b),a=a+1|0,!((a|0)>=(ft|0));)tt=tt+4|0;b=(b<<16>>16)*7|0,lt=o+1310736+(b+-7<<2)|0,e[lt>>2]=(e[lt>>2]|0)+1,lt=o+1310736+(b+-6<<2)|0,e[lt>>2]=(e[lt>>2]|0)+_t,b=o+1310736+(b+-5<<2)|0,e[b>>2]=(e[b>>2]|0)+zt,b=ft}else st[_e>>1]=0,ct[s>>0]=0,b=ft;while(!1);if(_t=_t+1|0,a=yt+1|0,h=h+1|0,_e=_e+2|0,s=s+1|0,(_t|0)>=($t|0))break;yt=a,ft=b}if(zt=zt+1|0,(zt|0)>=(Yt|0)){tt=b,Lt=52;break e}else s=s+2|0,a=a+2|0,_e=_e+4|0,h=h+2|0}fr(3,3904,kt),s=-1}else tt=0,Lt=52;while(!1);if((Lt|0)==52){if(_e=o+12|0,(tt|0)<1)b=1;else for(a=1,b=1;s=e[g>>2]|0,(s|0)==(a|0)?(s=b,b=b+1|0):s=e[o+1179664+(s+-1<<2)>>2]|0,e[g>>2]=s,(a|0)<(tt|0);)a=a+1|0,g=g+4|0;if(h=o+8|0,s=b+-1|0,e[h>>2]=s,s){if(Er(_e|0,0,s<<2|0)|0,Er(o+655376|0,0,s<<4|0)|0,(b|0)>1){s=0;do Lt=s<<2,e[o+131084+(Lt<<2)>>2]=d,e[o+131084+((Lt|1)<<2)>>2]=0,e[o+131084+((Lt|2)<<2)>>2]=_,e[o+131084+((Lt|3)<<2)>>2]=0,s=s+1|0;while((s|0)<(e[h>>2]|0))}if((tt|0)>0){_e=0;do g=(e[o+1179664+(_e<<2)>>2]|0)+-1|0,a=_e*7|0,s=o+12+(g<<2)|0,e[s>>2]=(e[s>>2]|0)+(e[o+1310736+(a<<2)>>2]|0),s=g<<1,b=o+655376+(s<<3)|0,it[b>>3]=+it[b>>3]+ +(e[o+1310736+(a+1<<2)>>2]|0),s=o+655376+((s|1)<<3)|0,it[s>>3]=+it[s>>3]+ +(e[o+1310736+(a+2<<2)>>2]|0),g=g<<2,s=o+131084+(g<<2)|0,b=e[o+1310736+(a+3<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),s=o+131084+((g|1)<<2)|0,b=e[o+1310736+(a+4<<2)>>2]|0,(e[s>>2]|0)<(b|0)&&(e[s>>2]=b),s=o+131084+((g|2)<<2)|0,b=e[o+1310736+(a+5<<2)>>2]|0,(e[s>>2]|0)>(b|0)&&(e[s>>2]=b),b=o+131084+((g|3)<<2)|0,s=e[o+1310736+(a+6<<2)>>2]|0,(e[b>>2]|0)<(s|0)&&(e[b>>2]=s),_e=_e+1|0;while((_e|0)<(tt|0))}if((e[h>>2]|0)>0){s=0;do d=o+12+(s<<2)|0,_=s<<1,Lt=o+655376+(_<<3)|0,it[Lt>>3]=+it[Lt>>3]/+(e[d>>2]|0),_=o+655376+((_|1)<<3)|0,it[_>>3]=+it[_>>3]/+(e[d>>2]|0),s=s+1|0;while((s|0)<(e[h>>2]|0));s=0}else s=0}else s=0}return dt=cn,s|0}function Dy(a){return a=a|0,Py(a+8|0)|0}function Py(a){a=a|0;var d=0,_=0;return _=dt,dt=dt+16|0,d=Qr(4)|0,d||(fr(3,5472,_),pn(1)),a=_u(a)|0,e[d>>2]=a,a||(xs(d),d=0),dt=_,d|0}function Oy(a){a=a|0;var d=0;return d=e[a>>2]|0,d?(zu(d)|0,xs(e[a>>2]|0),e[a>>2]=0,d=0):d=-1,d|0}function Fy(a){a=a|0;var d=0,_=0,h=0;if(_=dt,dt=dt+16|0,d=Qr(7062432)|0,d||(fr(3,5472,_),pn(1)),e[d>>2]=0,e[d+4834148>>2]=0,e[d+7062408>>2]=0,e[d+4>>2]=-1,e[d+8>>2]=0,e[d+12>>2]=1,e[d+16>>2]=100,e[d+20>>2]=0,e[d+24>>2]=0,e[d+28>>2]=2,it[d+7062416>>3]=.5,e[d+7062424>>2]=3,e[d+32>>2]=a,h=e[a>>2]|0,e[d+36>>2]=h,a=e[a+4>>2]|0,e[d+40>>2]=a,e[d+44>>2]=0,e[d+15408>>2]=0,e[d+4834152>>2]=0,e[d+4818296>>2]=0,a=Qr(Pn(h<<1,a)|0)|0,e[d+4834144>>2]=a,!a)fr(3,5472,_+8|0),pn(1);else return e[d+7062384>>2]=0,lE(d,2)|0,cE(d,0)|0,e[d+7062388>>2]=-1,uE(d,0)|0,e[d+7062392>>2]=7,e[d+7062396>>2]=0,dt=_,d|0;return 0}function lE(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;s=dt,dt=dt+16|0,_=s;e:do if(a)if(h=a+4|0,(e[h>>2]|0)!=(d|0)){switch(d|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{o=0;break}case 14:case 13:case 12:case 5:{o=1;break}default:{e[_>>2]=d,fr(3,3936,_),_=-1;break e}}if(e[h>>2]=d,e[a+8>>2]=Sp(d)|0,_=a+7062408|0,d=e[_>>2]|0,d&&(To(d),e[_>>2]=AE(e[a+36>>2]|0,e[a+40>>2]|0,e[h>>2]|0,0)|0),_=a+24|0,d=e[_>>2]|0,o)switch(d|0){case 0:{e[_>>2]=1,_=0;break e}case 3:{e[_>>2]=4,_=0;break e}default:{_=0;break e}}else switch(d|0){case 1:{e[_>>2]=4,_=0;break e}case 4:{e[_>>2]=3,_=0;break e}default:{_=0;break e}}}else _=0;else _=-1;while(!1);return dt=s,_|0}function cE(a,d){a=a|0,d=d|0;var _=0,h=0,o=0;o=dt,dt=dt+16|0,h=o;do if(a)if((e[a>>2]|0)!=(d|0)){if(e[a>>2]=d,!d){_=a+4834148|0,xs(e[_>>2]|0),e[_>>2]=0,_=0;break}d=Qr(Pn(e[a+40>>2]|0,e[a+36>>2]|0)|0)|0,e[a+4834148>>2]=d,d?_=0:(fr(3,5472,h),pn(1))}else _=0;else _=-1;while(!1);return dt=o,_|0}function uE(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0;if(g=dt,dt=dt+16|0,b=g+8|0,o=g,a)if(s=a+7062388|0,(e[s>>2]|0)!=(d|0)){switch(_=a+7062408|0,h=e[_>>2]|0,h&&(To(h),e[_>>2]=0),d|0){case 3:case 2:case 1:{e[_>>2]=AE(e[a+36>>2]|0,e[a+40>>2]|0,e[a+4>>2]|0,0)|0;break}case 4:{e[a+7062404>>2]=1,e[a+7062400>>2]=1,d=4;break}case 0:{d=0;break}default:fr(3,3985,o),d=0}e[s>>2]=d,(e[a>>2]|0)==1&&(e[b>>2]=e[760+(d<<2)>>2],fr(3,4059,b)),d=0}else d=0;else d=-1;return dt=g,d|0}function ky(a){a=a|0;var d=0,_=0;return a?(d=a+7062408|0,_=e[d>>2]|0,_&&(To(_),e[d>>2]=0),xs(e[a+4834144>>2]|0),xs(e[a+4834148>>2]|0),xs(a),d=0):d=-1,d|0}function Ny(a,d){return a=a|0,d=d|0,(a|0)!=0&(d|0)!=0?(e[d>>2]=e[a>>2],a=0):a=-1,a|0}function Uy(a,d){return a=a|0,d=d|0,(a|0)!=0&d>>>0<2?(e[a+12>>2]=d,a=0):a=-1,a|0}function Hy(a,d){return a=a|0,d=d|0,(a|0)!=0&(d|0)!=0?(e[d>>2]=e[a+12>>2],a=0):a=-1,a|0}function Gy(a,d){return a=a|0,d=d|0,(a|0)==0|d>>>0>255?a=-1:(e[a+16>>2]=d,a=0),a|0}function Qy(a,d){return a=a|0,d=d|0,(a|0)!=0&(d|0)!=0?(e[d>>2]=e[a+16>>2],a=0):a=-1,a|0}function Vy(a,d){return a=a|0,d=d|0,(a|0)!=0&(d|0)!=0?(e[d>>2]=e[a+7062388>>2],a=0):a=-1,a|0}function zy(a,d){return a=a|0,d=d|0,(a|0)!=0&d>>>0<2?(e[a+20>>2]=d,a=0):a=-1,a|0}function Wy(a,d){return a=a|0,d=d|0,a?(e[d>>2]=e[a+20>>2],a=0):a=-1,a|0}function rm(a,d){return a=a|0,d=d|0,(a|0)!=0&d>>>0<5?(e[a+24>>2]=d,a=0):a=-1,a|0}function Ky(a,d){return a=a|0,d=d|0,a?(e[a+7062424>>2]=d,a=0):a=-1,a|0}function Xy(a,d){return a=a|0,d=d|0,(a|0)!=0&(d|0)!=0?(e[d>>2]=e[a+7062424>>2],a=0):a=-1,a|0}function Yy(a,d){return a=a|0,d=d|0,a?(e[d>>2]=e[a+24>>2],a=0):a=-1,a|0}function qy(a,d){return a=a|0,d=+d,a|0&&!(d<=0|d>=1)?(it[a+7062416>>3]=d,a=0):a=-1,a|0}function Jy(a,d){return a=a|0,d=d|0,a?(it[d>>3]=+it[a+7062416>>3],a=0):a=-1,a|0}function Zy(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0,gr=0,Kn=0,Ps=0,ds=0,mo=0;Ps=dt,dt=dt+80|0,Br=Ps+32|0,dr=Ps+24|0,Yt=Ps,$t=Ps+52|0,Yn=Ps+40|0,Kr=Ps+64|0,Kn=a+44|0,e[Kn>>2]=0,wr=a+7062388|0,h=e[wr>>2]|0;e:do if((h|0)==4){Hr=a+7062396|0,_=e[Hr>>2]|0;do if((_|0)>0)h=4,_=_+-1|0;else{cn=a+16|0,sr=e[cn>>2]|0,ir=a+7062400|0,kt=(e[ir>>2]|0)+sr|0,kt=(kt|0)>255?255:kt,e[$t>>2]=kt,Jn=a+7062404|0,Lt=sr-(e[Jn>>2]|0)|0,Lt=(Lt|0)<0?0:Lt,e[$t+4>>2]=Lt,e[$t+8>>2]=sr,_=a+36|0,h=a+40|0,o=a+4|0,b=a+12|0,g=a+20|0,_e=a+4834144|0,lt=a+15416|0,ft=a+15408|0,yt=a+7062384|0,_t=a+24|0,Kt=a+32|0,Nt=a+7062416|0,Pt=a+48|0,Ot=a+7062424|0,zt=0;do{if((sm(d,e[_>>2]|0,e[h>>2]|0,e[o>>2]|0,e[a>>2]|0,e[b>>2]|0,e[$t+(zt<<2)>>2]|0,e[g>>2]|0,_e,0)|0)<0){_=-1;break e}(dE(e[_>>2]|0,e[h>>2]|0,_e,e[g>>2]|0,1e6,70,1,lt,ft)|0)<0,(fE(d,e[_>>2]|0,e[h>>2]|0,e[o>>2]|0,lt,e[ft>>2]|0,e[yt>>2]|0,e[g>>2]|0,e[_t>>2]|0,(e[Kt>>2]|0)+184|0,+it[Nt>>3],Pt,Kn,e[Ot>>2]|0)|0)<0,e[Yn+(zt<<2)>>2]=e[Kn>>2],zt=zt+1|0}while((zt|0)<3);if((e[a>>2]|0)==1?(Qn=e[Yn+4>>2]|0,o=e[Yn+8>>2]|0,h=e[Yn>>2]|0,e[Yt>>2]=Lt,e[Yt+4>>2]=Qn,e[Yt+8>>2]=sr,e[Yt+12>>2]=o,e[Yt+16>>2]=kt,e[Yt+20>>2]=h,fr(3,4153,Yt)):(h=e[Yn>>2]|0,o=e[Yn+8>>2]|0),_=e[Yn+4>>2]|0,(h|0)>(o|0)|(_|0)>(o|0)){h=(h|0)>=(_|0)?kt:Lt,e[cn>>2]=h,_=h-sr|0,(_|0)>0?(e[ir>>2]=_,_=1):(e[ir>>2]=1,_=0-_|0),e[Jn>>2]=_,(e[a>>2]|0)==1&&(e[dr>>2]=h,fr(3,4229,dr)),h=e[wr>>2]|0,_=e[a+7062392>>2]|0;break}_=e[ir>>2]|0,h=e[Jn>>2]|0;do if((_|0)>=(h|0))if((_|0)>(h|0)){e[Jn>>2]=h+1;break}else{_=_+1|0,e[ir>>2]=_,e[Jn>>2]=h+1;break}else _=_+1|0,e[ir>>2]=_;while(!1);(_+sr|0)>254&&(e[ir>>2]=1,_=1),(sr|0)<=(_|0)&&(e[Jn>>2]=1),e[Hr>>2]=e[a+7062392>>2],Qn=47;break e}while(!1);e[Hr>>2]=_,Qn=30}else Qn=30;while(!1);e:do if((Qn|0)==30){t:do switch(h|0){case 3:{if(h=a+7062408|0,_=gE(e[h>>2]|0,d,9,-7)|0,(_|0)<0||(_=e[h>>2]|0,h=a+4834144|0,_=sm(e[_>>2]|0,e[_+8>>2]|0,e[_+12>>2]|0,5,e[a>>2]|0,e[a+12>>2]|0,0,0,h,e[_+4>>2]|0)|0,(_|0)<0))break e;_=a+36|0,o=a+40|0,b=a+20|0;break}case 2:case 1:{if(o=a+7062396|0,_=e[o>>2]|0,(_|0)>0){e[o>>2]=_+-1,Qn=44;break t}if(_=e[a+7062408>>2]|0,(h|0)==1?_=mE(_,d,Kr)|0:_=vE(_,d,Kr)|0,(_|0)<0)break e;_=a+16|0,(e[a>>2]|0)==1&&(Or=It[Kr>>0]|0,(e[_>>2]|0)!=(Or|0))&&(e[Br>>2]=(e[wr>>2]|0)==1?4281:4288,e[Br+4>>2]=Or,fr(3,4293,Br)),e[_>>2]=It[Kr>>0],e[o>>2]=e[a+7062392>>2],Qn=44;break}default:Qn=44}while(!1);if((Qn|0)==44&&(_=a+36|0,o=a+40|0,b=a+20|0,h=a+4834144|0,(sm(d,e[_>>2]|0,e[o>>2]|0,e[a+4>>2]|0,e[a>>2]|0,e[a+12>>2]|0,e[a+16>>2]|0,e[b>>2]|0,h,0)|0)<0)){_=-1;break}g=a+15416|0,_e=a+15408|0,(dE(e[_>>2]|0,e[o>>2]|0,h,e[b>>2]|0,1e6,70,1,g,_e)|0)>=0&&(fE(d,e[_>>2]|0,e[o>>2]|0,e[a+4>>2]|0,g,e[_e>>2]|0,e[a+7062384>>2]|0,e[b>>2]|0,e[a+24>>2]|0,(e[a+32>>2]|0)+184|0,+it[a+7062416>>3],a+48|0,Kn,e[a+7062424>>2]|0)|0)>=0&&(Qn=47)}while(!1);e:do if((Qn|0)==47){if(Kt=a+28|0,(e[Kt>>2]|0)==1){hE(a),_=0;break}if(Nt=a+4818296|0,yt=a+24|0,ft=e[Nt>>2]|0,(ft|0)>0){_t=0;do{if(h=e[Kn>>2]|0,o=a+4818304+(_t*264|0)+56|0,b=a+4818304+(_t*264|0)+64|0,(h|0)>0)for(nt=+(e[a+4818304+(_t*264|0)>>2]|0),_=-1,g=0,tt=.5;;)if(s=+(e[a+48+(g<<8)>>2]|0),ds=nt/s,!(ds<.7|ds>1.43)&&(ds=+it[a+48+(g<<8)+56>>3]-+it[o>>3],gr=+it[a+48+(g<<8)+64>>3]-+it[b>>3],gr=(ds*ds+gr*gr)/s,gr<tt)?(_=g,s=gr):s=tt,g=g+1|0,(g|0)>=(h|0)){lt=_;break}else tt=s;else lt=-1;t:do if((lt|0)>-1){switch(_e=e[yt>>2]|0,_e|0){case 2:case 1:case 0:break;case 4:case 3:{if(o=a+48+(lt<<8)+40|0,s=+it[a+4818304+(_t*264|0)+40>>3],+it[o>>3]<s)h=a+4818304+(_t*264|0)+48|0,_=a+48+(lt<<8)+48|0;else if(_=a+48+(lt<<8)+48|0,h=a+4818304+(_t*264|0)+48|0,!(+it[_>>3]<+it[h>>3]))break t;for(it[o>>3]=s,e[a+48+(lt<<8)+8>>2]=e[a+4818304+(_t*264|0)+8>>2],it[_>>3]=+it[h>>3],e[a+48+(lt<<8)+12>>2]=e[a+4818304+(_t*264|0)+12>>2],_=-1,tt=1e8,o=0;;){s=0,h=0;do d=(h+o|0)%4|0,nt=+it[a+4818304+(_t*264|0)+168+(h<<4)>>3]-+it[a+48+(lt<<8)+168+(d<<4)>>3],ds=+it[a+4818304+(_t*264|0)+168+(h<<4)+8>>3]-+it[a+48+(lt<<8)+168+(d<<4)+8>>3],s=s+(nt*nt+ds*ds),h=h+1|0;while((h|0)!=4);if(h=s<tt,_=h?o:_,o=o+1|0,(o|0)==4)break;tt=h?s:tt}d=4-_|0,e[a+48+(lt<<8)+20>>2]=(d+(e[a+4818304+(_t*264|0)+20>>2]|0)|0)%4|0,e[a+48+(lt<<8)+24>>2]=(d+(e[a+4818304+(_t*264|0)+24>>2]|0)|0)%4|0;break t}default:{_=-1;break e}}if(_=a+48+(lt<<8)+32|0,nt=+it[a+4818304+(_t*264|0)+32>>3],+it[_>>3]<nt){for(it[_>>3]=nt,g=e[a+4818304+(_t*264|0)+4>>2]|0,e[a+48+(lt<<8)+4>>2]=g,o=a+4818304+(_t*264|0)+16|0,_=-1,tt=1e8,b=0;;){s=0,h=0;do d=(h+b|0)%4|0,mo=+it[a+4818304+(_t*264|0)+168+(h<<4)>>3]-+it[a+48+(lt<<8)+168+(d<<4)>>3],ds=+it[a+4818304+(_t*264|0)+168+(h<<4)+8>>3]-+it[a+48+(lt<<8)+168+(d<<4)+8>>3],s=s+(mo*mo+ds*ds),h=h+1|0;while((h|0)!=4);if(s<tt?_=(4-b+(e[o>>2]|0)|0)%4|0:s=tt,b=b+1|0,(b|0)==4)break;tt=s}if(e[a+48+(lt<<8)+16>>2]=_,_e>>>0<2){e[a+48+(lt<<8)+8>>2]=g,it[a+48+(lt<<8)+40>>3]=nt,e[a+48+(lt<<8)+20>>2]=_;break}else{e[a+48+(lt<<8)+12>>2]=g,it[a+48+(lt<<8)+48>>3]=nt,e[a+48+(lt<<8)+24>>2]=_;break}}}while(!1);_t=_t+1|0}while((_t|0)<(ft|0))}if(hE(a),(e[Nt>>2]|0)>0){o=0,_=0;do h=a+4818304+(o*264|0)|0,Qn=a+4818304+(o*264|0)+256|0,d=(e[Qn>>2]|0)+1|0,e[Qn>>2]=d,(d|0)<4&&((o|0)!=(_|0)&&B0(a+4818304+(_*264|0)|0,h|0,264)|0,_=_+1|0),o=o+1|0;while((o|0)<(e[Nt>>2]|0))}else _=0;e[Nt>>2]=_,_=e[Kn>>2]|0;t:do if((_|0)>0){_e=0;do{if(b=a+48+(_e<<8)|0,o=e[a+48+(_e<<8)+4>>2]|0,(o|0)>=0){g=e[Nt>>2]|0;i:do if((g|0)>0){h=0;do{if((e[a+4818304+(h*264|0)+4>>2]|0)==(o|0))break i;h=h+1|0}while((h|0)<(g|0))}else h=0;while(!1);if((h|0)==(g|0)){if((g|0)==60)break t;e[Nt>>2]=g+1}B0(a+4818304+(h*264|0)|0,b|0,256)|0,e[a+4818304+(h*264|0)+256>>2]=1}_e=_e+1|0,_=e[Kn>>2]|0}while((_e|0)<(_|0))}while(!1);if((e[Kt>>2]|0)!=2&&(e[Nt>>2]|0)>0)for(g=0;;){o=a+4818304+(g*264|0)+56|0,b=a+4818304+(g*264|0)+64|0;t:do if((_|0)>0){tt=+(e[a+4818304+(g*264|0)>>2]|0),h=0;do{if(s=+(e[a+48+(h<<8)>>2]|0),mo=tt/s,!(mo<.7|mo>1.43)&&(ds=+it[a+48+(h<<8)+56>>3]-+it[o>>3],mo=+it[a+48+(h<<8)+64>>3]-+it[b>>3],(ds*ds+mo*mo)/s<.5))break t;h=h+1|0}while((h|0)<(_|0))}else h=0;while(!1);if((h|0)==(_|0)&&(B0(a+48+(_<<8)|0,a+4818304+(g*264|0)|0,256)|0,_=(e[Kn>>2]|0)+1|0,e[Kn>>2]=_),g=g+1|0,(g|0)>=(e[Nt>>2]|0)){_=0;break}}else _=0}while(!1);return dt=Ps,_|0}function hE(a){a=a|0;var d=0,_=0,h=0,o=0;switch(e[a+24>>2]|0){case 1:case 0:{if(_=e[a+44>>2]|0,(_|0)>0){h=0;do d=a+48+(h<<8)+4|0,(e[d>>2]|0)>-1&&+it[a+48+(h<<8)+32>>3]<.5&&(e[a+48+(h<<8)+8>>2]=-1,e[d>>2]=-1,e[a+48+(h<<8)+236>>2]=6),h=h+1|0;while((h|0)<(_|0))}break}case 2:{if(_=e[a+44>>2]|0,(_|0)>0){h=0;do d=a+48+(h<<8)+4|0,(e[d>>2]|0)>-1&&+it[a+48+(h<<8)+32>>3]<.5&&(e[a+48+(h<<8)+12>>2]=-1,e[d>>2]=-1,e[a+48+(h<<8)+236>>2]=6),h=h+1|0;while((h|0)<(_|0))}break}default:if(h=e[a+44>>2]|0,(h|0)>0){o=0;do d=a+48+(o<<8)+8|0,(e[d>>2]|0)>-1&&+it[a+48+(o<<8)+40>>3]<.5?(e[d>>2]=-1,_=0):_=1,d=a+48+(o<<8)+12|0,(e[d>>2]|0)>-1&&+it[a+48+(o<<8)+48>>3]<.5&&(e[d>>2]=-1,(_|0)==0)&&(e[a+48+(o<<8)+236>>2]=6),o=o+1|0;while((o|0)<(h|0))}}}function dE(a,d,_,h,o,s,b,g,_e){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=+b,g=g|0,_e=_e|0;var tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0,Kr=0,Br=0,Qn=0;Br=dt,dt=dt+96|0,dr=Br+56|0,Hr=Br+48|0,Jn=Br+8|0,wr=Br,Kr=(h|0)==1,Kr&&(a=(a|0)/2|0,d=(d|0)/2|0,o=(o|0)/4|0,s=(s|0)/4|0),e[_e>>2]=0,Yn=_+8|0,ir=a+-2|0,kt=d+-2|0,Lt=_+1179664|0;e:do if((e[Yn>>2]|0)>0)for(cn=0;;){zt=_+12+(cn<<2)|0,Yt=e[zt>>2]|0;t:do if(!((Yt|0)<(s|0)|(Yt|0)>(o|0))&&(sr=_+131084+(cn<<4)|0,(e[sr>>2]|0)!=1)&&(e[_+131084+(cn<<4)+4>>2]|0)!=(ir|0)&&(e[_+131084+(cn<<4)+8>>2]|0)!=1&&(e[_+131084+(cn<<4)+12>>2]|0)!=(kt|0)&&($y(e[_>>2]|0,a,0,Lt,cn+1|0,sr,g+((e[_e>>2]|0)*80048|0)|0)|0)>=0){if(Nt=e[zt>>2]|0,$t=e[_e>>2]|0,Pt=g+($t*80048|0)+28|0,d=e[Pt>>2]|0,Ot=g+($t*80048|0)+40028|0,nt=e[Ot>>2]|0,Yt=g+($t*80048|0)+24|0,lt=(e[Yt>>2]|0)+-1|0,(lt|0)>1)for(_t=0,Kt=1,h=0;ft=(e[g+($t*80048|0)+28+(Kt<<2)>>2]|0)-d|0,ft=Pn(ft,ft)|0,yt=(e[g+($t*80048|0)+40028+(Kt<<2)>>2]|0)-nt|0,ft=(Pn(yt,yt)|0)+ft|0,yt=(ft|0)>(_t|0),h=yt?Kt:h,Kt=Kt+1|0,!((Kt|0)>=(lt|0));)_t=yt?ft:_t;else h=0;tt=+(Nt|0)/.75*.01*b,e[Hr>>2]=0,e[wr>>2]=0;i:do if((Ku(Pt,Ot,0,h,tt,dr,Hr)|0)>=0&&(Ku(Pt,Ot,h,(e[Yt>>2]|0)+-1|0,tt,Jn,wr)|0)>=0){d=e[Hr>>2]|0,nt=e[wr>>2]|0;do if((d|0)==1&(nt|0)==1)d=e[Jn>>2]|0,nt=e[dr>>2]|0;else{if((d|0)>1&(nt|0)==0){if(d=(h|0)/2|0,e[wr>>2]=0,e[Hr>>2]=0,(Ku(Pt,Ot,0,d,tt,dr,Hr)|0)<0||(Ku(Pt,Ot,d,h,tt,Jn,wr)|0)<0||!((e[Hr>>2]|0)==1&(e[wr>>2]|0)==1))break i;d=h,nt=e[dr>>2]|0,h=e[Jn>>2]|0;break}if(!((d|0)==0&(nt|0)>1)||(d=(h+-1+(e[Yt>>2]|0)|0)/2|0,e[wr>>2]=0,e[Hr>>2]=0,(Ku(Pt,Ot,h,d,tt,dr,Hr)|0)<0)||(Ku(Pt,Ot,d,(e[Yt>>2]|0)+-1|0,tt,Jn,wr)|0)<0||!((e[Hr>>2]|0)==1&(e[wr>>2]|0)==1))break i;d=e[Jn>>2]|0,nt=h,h=e[dr>>2]|0}while(!1);if(e[g+($t*80048|0)+80028>>2]=0,e[g+($t*80048|0)+80032>>2]=nt,e[g+($t*80048|0)+80036>>2]=h,e[g+($t*80048|0)+80040>>2]=d,e[g+($t*80048|0)+80044>>2]=(e[Yt>>2]|0)+-1,e[g+((e[_e>>2]|0)*80048|0)>>2]=e[zt>>2],Yt=e[_e>>2]|0,it[g+(Yt*80048|0)+8>>3]=+it[_+655376+(cn<<4)>>3],it[g+(Yt*80048|0)+16>>3]=+it[_+655376+(cn<<4)+8>>3],Yt=Yt+1|0,e[_e>>2]=Yt,(Yt|0)==60){h=60;break e}else break t}while(!1)}while(!1);if(cn=cn+1|0,(cn|0)>=(e[Yn>>2]|0)){Or=4;break}}else Or=4;while(!1);if((Or|0)==4&&(h=e[_e>>2]|0),(h|0)>0){lt=0;do if(a=lt,lt=lt+1|0,s=g+(a*80048|0)+16|0,nt=g+(a*80048|0)|0,(lt|0)<(h|0)){b=+it[g+(a*80048|0)+8>>3],o=lt;do Qn=b-+it[g+(o*80048|0)+8>>3],tt=+it[s>>3]-+it[g+(o*80048|0)+16>>3],tt=Qn*Qn+tt*tt,h=e[nt>>2]|0,a=g+(o*80048|0)|0,d=e[a>>2]|0,(h|0)>(d|0)?tt<+((h|0)/4|0|0)&&(e[a>>2]=0):tt<+((d|0)/4|0|0)&&(e[nt>>2]=0),o=o+1|0,h=e[_e>>2]|0;while((o|0)<(h|0))}while((lt|0)<(h|0))}if((h|0)>0){o=0;do{if(!(e[g+(o*80048|0)>>2]|0)){if(a=o+1|0,(a|0)<(h|0))for(h=o,d=a;B0(g+(h*80048|0)|0,g+(d*80048|0)|0,80048)|0,h=e[_e>>2]|0,a=d+1|0,(a|0)<(h|0);)h=d,d=a;h=h+-1|0,e[_e>>2]=h}o=o+1|0}while((o|0)<(h|0))}if(Kr&(h|0)>0)for(d=0;;){if(e[g>>2]=e[g>>2]<<2,h=g+8|0,it[h>>3]=+it[h>>3]*2,h=g+16|0,it[h>>3]=+it[h>>3]*2,h=g+24|0,(e[h>>2]|0)>0){a=0;do Kr=g+28+(a<<2)|0,e[Kr>>2]=e[Kr>>2]<<1,Kr=g+40028+(a<<2)|0,e[Kr>>2]=e[Kr>>2]<<1,a=a+1|0;while((a|0)<(e[h>>2]|0))}if(d=d+1|0,(d|0)>=(e[_e>>2]|0))break;g=g+80048|0}return dt=Br,0}function $y(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0;zt=dt,dt=dt+80032|0,ft=zt+16|0,lt=zt+8|0,_e=zt,Pt=zt+40024|0,Ot=zt+24|0,Nt=e[s+8>>2]|0,_=e[s>>2]|0,s=e[s+4>>2]|0;e:do if((_|0)<=(s|0)){for(g=_,_=a+((Pn(Nt,d)|0)+_<<1)|0;;){if(Kt=st[_>>1]|0,Kt<<16>>16>0&&(e[h+((Kt<<16>>16)+-1<<2)>>2]|0)==(o|0)){nt=g;break}if((g|0)<(s|0))g=g+1|0,_=_+2|0;else{$t=6;break e}}for(yt=b+24|0,e[yt>>2]=1,_t=b+28|0,e[_t>>2]=nt,Kt=b+40028|0,e[Kt>>2]=Nt,h=Nt,tt=nt,g=1,_=5;;){for(s=(_+5|0)%8|0,_=0;;){if(o=e[776+(s<<2)>>2]|0,_e=e[808+(s<<2)>>2]|0,(st[a+(_e+tt+(Pn(o+h|0,d)|0)<<1)>>1]|0)>0){_=o,o=s;break}if(_=_+1|0,s=(s+1|0)%8|0,(_|0)>=8){$t=11;break}}if(($t|0)==11){if($t=0,(_|0)==8){$t=13;break}_e=e[808+(s<<2)>>2]|0,_=e[776+(s<<2)>>2]|0,o=s}if(e[b+28+(g<<2)>>2]=_e+tt,s=e[yt>>2]|0,e[b+40028+(s<<2)>>2]=_+(e[b+40028+(s+-1<<2)>>2]|0),_=e[yt>>2]|0,s=b+28+(_<<2)|0,(e[s>>2]|0)==(nt|0)&&(e[b+40028+(_<<2)>>2]|0)==(Nt|0)){h=_,$t=16;break}if(g=_+1|0,e[yt>>2]=g,(g|0)==9999){$t=19;break}h=e[b+40028+(_<<2)>>2]|0,tt=e[s>>2]|0,_=o}if(($t|0)==13){fr(3,4347,lt),_=-1;break}else if(($t|0)==16){if((h|0)>1)for(_e=0,o=1,s=0;_=(e[b+28+(o<<2)>>2]|0)-nt|0,_=Pn(_,_)|0,g=(e[b+40028+(o<<2)>>2]|0)-Nt|0,_=(Pn(g,g)|0)+_|0,g=(_|0)>(_e|0),s=g?o:s,o=o+1|0,!((o|0)>=(h|0));)_e=g?_:_e;else s=0;if((s|0)>0){_=0;do e[Pt+(_<<2)>>2]=e[b+28+(_<<2)>>2],e[Ot+(_<<2)>>2]=e[b+40028+(_<<2)>>2],_=_+1|0;while((_|0)<(s|0))}if((s|0)<(h|0)){_=s;do Nt=_-s|0,e[b+28+(Nt<<2)>>2]=e[b+28+(_<<2)>>2],e[b+40028+(Nt<<2)>>2]=e[b+40028+(_<<2)>>2],_=_+1|0;while((_|0)<(e[yt>>2]|0))}if((s|0)>0){_=0;do Nt=_-s|0,e[b+28+((e[yt>>2]|0)+Nt<<2)>>2]=e[Pt+(_<<2)>>2],e[b+40028+((e[yt>>2]|0)+Nt<<2)>>2]=e[Ot+(_<<2)>>2],_=_+1|0;while((_|0)<(s|0))}e[b+28+(e[yt>>2]<<2)>>2]=e[_t>>2],e[b+40028+(e[yt>>2]<<2)>>2]=e[Kt>>2],e[yt>>2]=(e[yt>>2]|0)+1,_=0;break}else if(($t|0)==19){fr(3,4354,ft),_=-1;break}}else $t=6;while(!1);return($t|0)==6&&(fr(3,4340,_e),_=-1),dt=zt,_|0}function Ku(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=+o,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0;if(g=e[d+(h<<2)>>2]|0,Kt=e[d+(_<<2)>>2]|0,yt=+(g-Kt|0),nt=e[a+(_<<2)>>2]|0,Nt=e[a+(h<<2)>>2]|0,lt=+(nt-Nt|0),tt=+((Pn(Nt,Kt)|0)-(Pn(nt,g)|0)|0),g=_+1|0,(g|0)<(h|0)){_e=0,nt=g;do Pt=tt+(yt*+(e[a+(nt<<2)>>2]|0)+lt*+(e[d+(nt<<2)>>2]|0)),Pt=Pt*Pt,Nt=Pt>_e,_e=Nt?Pt:_e,g=Nt?nt:g,nt=nt+1|0;while((nt|0)<(h|0))}else _e=0;return _e/(yt*yt+lt*lt)>o?(Ku(a,d,_,g,o,s,b)|0)>=0&&(ft=e[b>>2]|0,(ft|0)<=5)&&(e[s+(ft<<2)>>2]=g,e[b>>2]=(e[b>>2]|0)+1,(Ku(a,d,g,h,o,s,b)|0)>=0)?_t=7:g=-1:_t=7,(_t|0)==7&&(g=0),g|0}function jy(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0;var g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0;$t=dt,dt=dt+16|0,Kt=$t+4|0,Nt=$t,Pt=J0(2)|0,Ot=J0(2)|0,zt=i1(2,2)|0,ft=0;e:for(;;){if(yt=ft,ft=ft+1|0,_t=e[h+(ft<<2)>>2]|0,g=e[h+(yt<<2)>>2]|0,lt=+(_t+1-g|0)*.05+.5,g=~~(+(g|0)+lt),_t=~~(+(_t|0)-lt)-g|0,tt=_t+1|0,_=i1(tt,2)|0,(_t|0)>-1){_t=0;do{if(Yt=_t+g|0,(jA(o,+(e[a+(Yt<<2)>>2]|0),+(e[d+(Yt<<2)>>2]|0),Kt,Nt)|0)<0){g=10;break e}Yt=_t<<1,kt=e[_>>2]|0,it[kt+(Yt<<3)>>3]=+vt[Kt>>2],it[kt+((Yt|1)<<3)>>3]=+vt[Nt>>2],_t=_t+1|0}while((_t|0)<(tt|0))}if((Al(_,zt,Pt,Ot)|0)<0){g=10;break}if(kt=e[zt>>2]|0,nt=+it[kt+8>>3],it[s+(yt*24|0)>>3]=nt,lt=-+it[kt>>3],it[s+(yt*24|0)+8>>3]=lt,kt=e[Ot>>2]|0,it[s+(yt*24|0)+16>>3]=-(nt*+it[kt>>3]+ +it[kt+8>>3]*lt),js(_)|0,(ft|0)>=4){g=7;break}}e:do if((g|0)==7)for(js(zt)|0,L1(Ot)|0,L1(Pt)|0,ft=0;;){if(_=(ft+3|0)%4|0,g=s+(_*24|0)|0,_e=+it[s+(ft*24|0)+8>>3],tt=s+(ft*24|0)|0,nt=+it[s+(_*24|0)+8>>3],lt=+it[g>>3]*_e-+it[tt>>3]*nt,+Lr(+lt)<1e-4){_=-1;break e}if(kt=s+(ft*24|0)+16|0,Yt=s+(_*24|0)+16|0,it[b+(ft<<4)>>3]=(nt*+it[kt>>3]-_e*+it[Yt>>3])/lt,it[b+(ft<<4)+8>>3]=(+it[tt>>3]*+it[Yt>>3]-+it[g>>3]*+it[kt>>3])/lt,ft=ft+1|0,(ft|0)>=4){_=0;break}}else(g|0)==10&&(js(_)|0,js(zt)|0,L1(Ot)|0,L1(Pt)|0,_=-1);while(!1);return dt=$t,_|0}function fE(a,d,_,h,o,s,b,g,_e,tt,nt,lt,ft,yt){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0,g=g|0,_e=_e|0,tt=tt|0,nt=+nt,lt=lt|0,ft=ft|0,yt=yt|0;var _t=0,Kt=0,Nt=0,Pt=0,Ot=0,zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0;if(sr=dt,dt=dt+16|0,Yn=sr+4|0,ir=sr,Yt=_e>>>0<2,kt=(_e|0)==2,(s|0)>0){cn=0,_t=0;do{if(e[lt+(_t<<8)>>2]=e[o+(cn*80048|0)>>2],(jA(tt,+it[o+(cn*80048|0)+8>>3],+it[o+(cn*80048|0)+16>>3],Yn,ir)|0)>=0&&(it[lt+(_t<<8)+56>>3]=+vt[Yn>>2],it[lt+(_t<<8)+64>>3]=+vt[ir>>2],Lt=lt+(_t<<8)+168|0,(jy(o+(cn*80048|0)+28|0,o+(cn*80048|0)+40028|0,e[o+(cn*80048|0)+24>>2]|0,o+(cn*80048|0)+80028|0,tt,lt+(_t<<8)+72|0,Lt)|0)>=0)){switch(Kt=lt+(_t<<8)+8|0,Nt=lt+(_t<<8)+20|0,Pt=lt+(_t<<8)+40|0,Ot=lt+(_t<<8)+12|0,zt=lt+(_t<<8)+24|0,$t=lt+(_t<<8)+48|0,o3(b,g,_e,a,d,_,h,tt,Lt,nt,Kt,Nt,Pt,Ot,zt,$t,yt,lt+(_t<<8)+240|0,lt+(_t<<8)+248|0)|0){case 0:{e[lt+(_t<<8)+236>>2]=0;break}case-1:{e[lt+(_t<<8)+236>>2]=2;break}case-2:{e[lt+(_t<<8)+236>>2]=3;break}case-3:{e[lt+(_t<<8)+236>>2]=4;break}case-4:{e[lt+(_t<<8)+236>>2]=5;break}case-5:{e[lt+(_t<<8)+236>>2]=9;break}case-6:{e[lt+(_t<<8)+236>>2]=1;break}default:}Yt?(e[lt+(_t<<8)+4>>2]=e[Kt>>2],e[lt+(_t<<8)+16>>2]=e[Nt>>2],it[lt+(_t<<8)+32>>3]=+it[Pt>>3]):kt&&(e[lt+(_t<<8)+4>>2]=e[Ot>>2],e[lt+(_t<<8)+16>>2]=e[zt>>2],it[lt+(_t<<8)+32>>3]=+it[$t>>3]),_t=_t+1|0}cn=cn+1|0}while((cn|0)<(s|0))}else _t=0;return e[ft>>2]=_t,dt=sr,0}function pE(a,d,_,h){a=a|0,d=d|0,_=+_,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0;return g=dt,dt=dt+288|0,tt=g+200|0,_e=g+104|0,o=g+264|0,b=g+8|0,s=g,lt=e[d+16>>2]|0,ft=(4-lt|0)%4|0,it[tt>>3]=+it[d+168+(ft<<4)>>3],it[tt+8>>3]=+it[d+168+(ft<<4)+8>>3],ft=(5-lt|0)%4|0,it[tt+16>>3]=+it[d+168+(ft<<4)>>3],it[tt+24>>3]=+it[d+168+(ft<<4)+8>>3],ft=(6-lt|0)%4|0,it[tt+32>>3]=+it[d+168+(ft<<4)>>3],it[tt+40>>3]=+it[d+168+(ft<<4)+8>>3],lt=(7-lt|0)%4|0,it[tt+48>>3]=+it[d+168+(lt<<4)>>3],it[tt+56>>3]=+it[d+168+(lt<<4)+8>>3],nt=_*-.5,it[_e>>3]=nt,_=_*.5,it[_e+8>>3]=_,it[_e+16>>3]=0,it[_e+24>>3]=_,it[_e+32>>3]=_,it[_e+40>>3]=0,it[_e+48>>3]=_,it[_e+56>>3]=nt,it[_e+64>>3]=0,it[_e+72>>3]=nt,it[_e+80>>3]=nt,it[_e+88>>3]=0,e[o>>2]=tt,e[o+4>>2]=_e,e[o+8>>2]=4,(Rv(e[a>>2]|0,tt,_e,4,b)|0)<0?_=1e8:(ft=(Wu(e[a>>2]|0,o,b,h,s)|0)<0,_=ft?1e8:+it[s>>3]),dt=g,+_}function e4(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=+h,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0;return b=dt,dt=dt+192|0,tt=b+104|0,_e=b+8|0,g=b+168|0,s=b,lt=e[d+16>>2]|0,ft=(4-lt|0)%4|0,it[tt>>3]=+it[d+168+(ft<<4)>>3],it[tt+8>>3]=+it[d+168+(ft<<4)+8>>3],ft=(5-lt|0)%4|0,it[tt+16>>3]=+it[d+168+(ft<<4)>>3],it[tt+24>>3]=+it[d+168+(ft<<4)+8>>3],ft=(6-lt|0)%4|0,it[tt+32>>3]=+it[d+168+(ft<<4)>>3],it[tt+40>>3]=+it[d+168+(ft<<4)+8>>3],lt=(7-lt|0)%4|0,it[tt+48>>3]=+it[d+168+(lt<<4)>>3],it[tt+56>>3]=+it[d+168+(lt<<4)+8>>3],nt=h*-.5,it[_e>>3]=nt,h=h*.5,it[_e+8>>3]=h,it[_e+16>>3]=0,it[_e+24>>3]=h,it[_e+32>>3]=h,it[_e+40>>3]=0,it[_e+48>>3]=h,it[_e+56>>3]=nt,it[_e+64>>3]=0,it[_e+72>>3]=nt,it[_e+80>>3]=nt,it[_e+88>>3]=0,e[g>>2]=tt,e[g+4>>2]=_e,e[g+8>>2]=4,d=(Wu(e[a>>2]|0,g,_,o,s)|0)<0,dt=b,+(d?1e8:+it[s>>3])}function s3(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0;var b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0;if(ft=dt,dt=dt+32|0,tt=ft+20|0,nt=ft,b=Qr(o<<4)|0,e[tt>>2]=b,b||(fr(3,5472,ft+8|0),pn(1)),g=Qr(o*24|0)|0,_e=tt+4|0,e[_e>>2]=g,g||(fr(3,5472,ft+16|0),pn(1)),(o|0)>0){lt=0;do it[b+(lt<<4)>>3]=+it[_+(lt<<4)>>3],it[b+(lt<<4)+8>>3]=+it[_+(lt<<4)+8>>3],it[g+(lt*24|0)>>3]=+it[h+(lt*24|0)>>3],it[g+(lt*24|0)+8>>3]=+it[h+(lt*24|0)+8>>3],it[g+(lt*24|0)+16>>3]=+it[h+(lt*24|0)+16>>3],lt=lt+1|0;while((lt|0)<(o|0))}return e[tt+8>>2]=o,(Wu(e[a>>2]|0,tt,d,s,nt)|0)<0&&(it[nt>>3]=1e8),xs(e[tt>>2]|0),xs(e[_e>>2]|0),dt=ft,+ +it[nt>>3]}function P1(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0;var b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0;if(ft=dt,dt=dt+32|0,tt=ft+20|0,nt=ft,b=Qr(o<<4)|0,e[tt>>2]=b,b||(fr(3,5472,ft+8|0),pn(1)),g=Qr(o*24|0)|0,_e=tt+4|0,e[_e>>2]=g,g||(fr(3,5472,ft+16|0),pn(1)),(o|0)>0){lt=0;do it[b+(lt<<4)>>3]=+it[_+(lt<<4)>>3],it[b+(lt<<4)+8>>3]=+it[_+(lt<<4)+8>>3],it[g+(lt*24|0)>>3]=+it[h+(lt*24|0)>>3],it[g+(lt*24|0)+8>>3]=+it[h+(lt*24|0)+8>>3],it[g+(lt*24|0)+16>>3]=+it[h+(lt*24|0)+16>>3],lt=lt+1|0;while((lt|0)<(o|0))}return e[tt+8>>2]=o,(Sv(e[a>>2]|0,tt,d,s,nt)|0)<0&&(it[nt>>3]=1e8),xs(e[tt>>2]|0),xs(e[_e>>2]|0),dt=ft,+ +it[nt>>3]}function AE(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;o=Qr(2080)|0;e:do if(o){e[o+2068>>2]=_;t:do if(h)s=4;else{switch(_|0){case 5:case 12:case 13:case 14:break;default:{s=4;break t}}e[o+2076>>2]=0}while(!1);do if((s|0)==4)if(s=Qr(Pn(d,a)|0)|0,e[o>>2]=s,s){e[o+2076>>2]=1;break}else{xs(o),o=0;break e}while(!1);e[o+2072>>2]=h,e[o+4>>2]=0,e[o+8>>2]=a,e[o+12>>2]=d}while(!1);return o|0}function To(a){a=a|0,a&&(e[a+2076>>2]|0&&xs(e[a>>2]|0),xs(e[a+4>>2]|0),xs(a))}function bs(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0;b=dt,dt=dt+16|0,h=b,_=e[a+2068>>2]|0;e:do switch(_|0){case 5:case 12:case 13:case 14:if(e[a+2072>>2]|0){B0(e[a>>2]|0,d|0,Pn(e[a+12>>2]|0,e[a+8>>2]|0)|0)|0,_=0;break e}else{e[a>>2]=d,_=0;break e}default:{if((_&-2|0)==2){if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(ct[(e[a>>2]|0)+o>>0]=(((It[d+(s|1)>>0]|0)+(It[d+s>>0]|0)+(It[d+(s|2)>>0]|0)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break e}else s=s+4|0}if((_&-3|0)==4){if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(ct[(e[a>>2]|0)+o>>0]=(((It[d+(s|2)>>0]|0)+(It[d+(s|1)>>0]|0)+(It[d+(s|3)>>0]|0)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break e}else s=s+4|0}if(_>>>0<2){if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(ct[(e[a>>2]|0)+o>>0]=(((It[d+(s+1)>>0]|0)+(It[d+s>>0]|0)+(It[d+(s+2)>>0]|0)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break e}else s=s+3|0}switch(_|0){case 8:{if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(ct[(e[a>>2]|0)+o>>0]=ct[d+s>>0]|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break}else s=s+2|0;break}case 7:{if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(ct[(e[a>>2]|0)+o>>0]=ct[d+(s|1)>>0]|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break}else s=s+2|0;break}case 9:{if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(_e=It[d+s>>0]|0,g=It[d+(s|1)>>0]|0,ct[(e[a>>2]|0)+o>>0]=(((_e&248)+10+(_e<<5&224)+(g>>>3&28)+(g<<3&248)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break}else s=s+2|0;break}case 10:{if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(g=It[d+s>>0]|0,_e=It[d+(s|1)>>0]|0,ct[(e[a>>2]|0)+o>>0]=(((g&248)+12+(g<<5&224)+(_e>>>3&24)+(_e<<2&248)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break}else s=s+2|0;break}case 11:{if(_=a+8|0,h=a+12|0,Pn(e[h>>2]|0,e[_>>2]|0)|0)o=0,s=0;else{_=0;break e}for(;;)if(_e=It[d+s>>0]|0,ct[(e[a>>2]|0)+o>>0]=(((_e&240)+24+(_e<<4&240)+((It[d+(s|1)>>0]|0)&240)|0)>>>0)/3|0,o=o+1|0,o>>>0>=(Pn(e[h>>2]|0,e[_>>2]|0)|0)>>>0){_=0;break}else s=s+2|0;break}default:{fr(3,4361,h),_=-1;break e}}}}while(!1);return dt=b,_|0}function m1(a,d){a=a|0,d=d|0;var _=0,h=0;if((a|0)!=0&(d|0)!=0&&(bs(a,d)|0)>=0)if(Er(a+16|0,0,1024)|0,d=e[a>>2]|0,h=Pn(e[a+12>>2]|0,e[a+8>>2]|0)|0,_=d+h|0,(h|0)>0){do h=a+16+((It[d>>0]|0)<<2)|0,e[h>>2]=(e[h>>2]|0)+1,d=d+1|0;while(d>>>0<_>>>0);d=0}else d=0;else d=-1;return d|0}function Pp(a,d){a=a|0,d=d|0;var _=0;if(d=m1(a,d)|0,(d|0)>=0){d=0,_=0;do d=(e[a+16+(_<<2)>>2]|0)+d|0,e[a+1040+(_<<2)>>2]=d,_=_+1|0;while((_|0)!=256);d=0}return d|0}function Xu(a,d,_,h){a=a|0,d=d|0,_=+_,h=h|0;var o=0,s=0,b=0;if(_<0|_>1)d=-1;else if(d=Pp(a,d)|0,(d|0)>=0){for(b=~~(+(Pn(e[a+12>>2]|0,e[a+8>>2]|0)|0)*_)>>>0,d=0;s=d&255,o=e[a+1040+(s<<2)>>2]|0,o>>>0<b>>>0;)d=d+1<<24>>24;if((o|0)==(b|0))do d=d+1<<24>>24;while((e[a+1040+((d&255)<<2)>>2]|0)==(b|0));ct[h>>0]=((d&255)+s|0)>>>1,d=0}return d|0}function mE(a,d,_){return a=a|0,d=d|0,_=_|0,Xu(a,d,.5,_)|0}function vE(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0;if(d=m1(a,d)|0,(d|0)>=0){d=1,h=0;do h=h+ +((Pn(e[a+16+(d<<2)>>2]|0,d)|0)>>>0),d=d+1|0;while((d|0)!=256);for(_e=+(Pn(e[a+12>>2]|0,e[a+8>>2]|0)|0),tt=0,s=0,d=0,g=0,nt=0;;){if(o=e[a+16+(tt<<2)>>2]|0,nt=nt+ +(o>>>0),nt!=0){if(b=_e-nt,b==0)break;s=s+ +((Pn(tt,o)|0)>>>0),lt=s/nt-(h-s)/b,b=lt*(nt*b*lt),b>g?d=tt&255:b=g}else b=g;if((tt&255)<<24>>24==-1)break;tt=tt+1|0,g=b}ct[_>>0]=d,d=0}return d|0}function gE(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0,Nt=0,Pt=0;d=m1(a,d)|0;do if((d|0)>=0){if(Nt=a+4|0,e[Nt>>2]|0)Kt=a+8|0,o=a+12|0;else if(d=a+8|0,o=a+12|0,Kt=Qr(Pn(e[o>>2]|0,e[d>>2]|0)|0)|0,e[Nt>>2]=Kt,Kt)Kt=d;else{d=-1;break}if(yt=_>>1,_t=0-yt|0,d=e[o>>2]|0,(d|0)>0){nt=(yt|0)<(_t|0),lt=(yt|0)<(_t|0),ft=0;do{if(d=e[Kt>>2]|0,(d|0)>0){tt=0;do{if(nt)s=0,_=0;else for(s=0,_e=_t,_=0;;){if(b=_e+ft|0,(b|0)>=0&&(b|0)<(e[o>>2]|0)&&(Pt=Pn(d,b)|0,!lt))for(g=_t;b=g+tt|0,(b|0)>-1&(b|0)<(d|0)&&(s=s+1|0,_=(It[(e[a>>2]|0)+(Pt+b)>>0]|0)+_|0),(g|0)<(yt|0);)g=g+1|0;if((_e|0)<(yt|0))_e=_e+1|0;else break}_e=(Pn(d,ft)|0)+tt|0,ct[(e[Nt>>2]|0)+_e>>0]=(_|0)/(s|0)|0,tt=tt+1|0,d=e[Kt>>2]|0}while((tt|0)<(d|0))}ft=ft+1|0,d=e[o>>2]|0}while((ft|0)<(d|0))}if(h|0&&(Pn(d,e[Kt>>2]|0)|0)>0){d=0;do a=(e[Nt>>2]|0)+d|0,ct[a>>0]=(It[a>>0]|0)+h,d=d+1|0;while((d|0)<(Pn(e[o>>2]|0,e[Kt>>2]|0)|0));d=0}else d=0}while(!1);return d|0}function sm(a,d,_,h,o,s,b,g,_e,tt){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0,g=g|0,_e=_e|0,tt=tt|0;var nt=0;e:do switch(o|0){case 0:{switch(s|0){case 1:{if(tt){nt=gA(a,d,_,tt,_e)|0;break e}switch(g|0){case 0:{if(h>>>0<2){nt=hp(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=fp(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=pA(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=AA(a,d,_,b,_e)|0;break e}case 8:{nt=vA(a,d,_,b,_e)|0;break e}case 7:{nt=mA(a,d,_,b,_e)|0;break e}case 9:{nt=dp(a,d,_,b,_e)|0;break e}case 10:{nt=Du(a,d,_,b,_e)|0;break e}case 11:{nt=pp(a,d,_,b,_e)|0;break e}default:pn(0)}break}case 1:{if(h>>>0<2){nt=uA(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=dA(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=lp(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=cp(a,d,_,b,_e)|0;break e}case 8:{nt=T2(a,d,_,b,_e)|0;break e}case 7:{nt=up(a,d,_,b,_e)|0;break e}case 9:{nt=hA(a,d,_,b,_e)|0;break e}case 10:{nt=S2(a,d,_,b,_e)|0;break e}case 11:{nt=fA(a,d,_,b,_e)|0;break e}default:pn(0)}break}default:pn(0)}break}case 0:{if(tt){nt=bA(a,d,_,tt,_e)|0;break e}switch(g|0){case 0:{if(h>>>0<2){nt=Ap(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=hu(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=I2(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=_A(a,d,_,b,_e)|0;break e}case 8:{nt=Ou(a,d,_,b,_e)|0;break e}case 7:{nt=xA(a,d,_,b,_e)|0;break e}case 9:{nt=j1(a,d,_,b,_e)|0;break e}case 10:{nt=F0(a,d,_,b,_e)|0;break e}case 11:{nt=Zl(a,d,_,b,_e)|0;break e}default:pn(0)}break}case 1:{if(h>>>0<2){nt=EA(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=wA(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=C1(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=Pu(a,d,_,b,_e)|0;break e}case 8:{nt=Sl(a,d,_,b,_e)|0;break e}case 7:{nt=Jl(a,d,_,b,_e)|0;break e}case 9:{nt=yA(a,d,_,b,_e)|0;break e}case 10:{nt=R2(a,d,_,b,_e)|0;break e}case 11:{nt=CA(a,d,_,b,_e)|0;break e}default:pn(0)}break}default:pn(0)}break}default:pn(0)}break}case 1:{switch(s|0){case 1:{if(tt){nt=jo(a,d,_,tt,_e)|0;break e}switch(g|0){case 0:{if(h>>>0<2){nt=I1(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=J1(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=k1(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=Vl(a,d,_,b,_e)|0;break e}case 8:{nt=Ol(a,d,_,b,_e)|0;break e}case 7:{nt=N1(a,d,_,b,_e)|0;break e}case 9:{nt=q1(a,d,_,b,_e)|0;break e}case 10:{nt=F1(a,d,_,b,_e)|0;break e}case 11:{nt=Z1(a,d,_,b,_e)|0;break e}default:pn(0)}break}case 1:{if(h>>>0<2){nt=MA(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=TA(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=BA(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=Ml(a,d,_,b,_e)|0;break e}case 8:{nt=w1(a,d,_,b,_e)|0;break e}case 7:{nt=h1(a,d,_,b,_e)|0;break e}case 9:{nt=SA(a,d,_,b,_e)|0;break e}case 10:{nt=IA(a,d,_,b,_e)|0;break e}case 11:{nt=RA(a,d,_,b,_e)|0;break e}default:pn(0)}break}default:pn(0)}break}case 0:{if(tt){nt=aE(a,d,_,tt,_e)|0;break e}switch(g|0){case 0:{if(h>>>0<2){nt=$6(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=eE(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=nE(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=rE(a,d,_,b,_e)|0;break e}case 8:{nt=oE(a,d,_,b,_e)|0;break e}case 7:{nt=sE(a,d,_,b,_e)|0;break e}case 9:{nt=j6(a,d,_,b,_e)|0;break e}case 10:{nt=iE(a,d,_,b,_e)|0;break e}case 11:{nt=tE(a,d,_,b,_e)|0;break e}default:pn(0)}break}case 1:{if(h>>>0<2){nt=B1(a,d,_,b,_e)|0;break e}if((h&-2|0)==2){nt=Ru(a,d,_,b,_e)|0;break e}if((h&-3|0)==4){nt=Bu(a,d,_,b,_e)|0;break e}switch(h|0){case 5:case 12:case 13:case 14:{nt=Lu(a,d,_,b,_e)|0;break e}case 8:{nt=$1(a,d,_,b,_e)|0;break e}case 7:{nt=iA(a,d,_,b,_e)|0;break e}case 9:{nt=ju(a,d,_,b,_e)|0;break e}case 10:{nt=g0(a,d,_,b,_e)|0;break e}case 11:{nt=Iu(a,d,_,b,_e)|0;break e}default:pn(0)}break}default:pn(0)}break}default:pn(0)}break}default:pn(0)}while(!1);return nt|0}function EE(a,d){a=a|0,d=d|0;var _=0;return a|0&&(_=a+7062384|0,(e[_>>2]|0)==0)?(e[_>>2]=d,_=0):_=-1,_|0}function yE(a){a=a|0;var d=0;return a|0&&(d=a+7062384|0,(e[d>>2]|0)!=0)?(e[d>>2]=0,d=0):d=-1,d|0}function wE(){return Op(16,50)|0}function Op(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0,Kt=0;Kt=dt,dt=dt+64|0,_t=Kt+56|0,yt=Kt+48|0,g=Kt+40|0,b=Kt+32|0,s=Kt+24|0,o=Kt+16|0,h=Kt+8|0,_=Kt;e:do if((a+-16|0)>>>0>48|(d|0)<1)ft=0;else if(lt=Qr(32)|0,lt||(fr(3,5472,_),pn(1)),e[lt>>2]=0,e[lt+4>>2]=d,e[lt+28>>2]=a,nt=Qr(d<<2)|0,e[lt+8>>2]=nt,nt||(fr(3,5472,h),pn(1)),_=d<<4,tt=Qr(_)|0,e[lt+12>>2]=tt,tt||(fr(3,5472,o),pn(1)),o=Qr(_)|0,_e=lt+20|0,e[_e>>2]=o,o||(fr(3,5472,s),pn(1)),_=d<<5,s=Qr(_)|0,e[lt+16>>2]=s,s||(fr(3,5472,b),pn(1)),b=Qr(_)|0,e[lt+24>>2]=b,b||(fr(3,5472,g),pn(1)),h=Pn(a,a)|0,_=h*12|0,h=h<<2,(d|0)>0){a=0;t:for(;;){for(e[nt+(a<<2)>>2]=0,o=a<<2,b=0;!((b|0)>=4);){if(g=Qr(_)|0,s=b+o|0,e[tt+(s<<2)>>2]=g,!g){_=18;break t}if(g=Qr(h)|0,e[(e[_e>>2]|0)+(s<<2)>>2]=g,g)b=b+1|0;else{_=20;break t}}if(a=a+1|0,(a|0)>=(d|0)){ft=lt;break e}}(_|0)==18?(fr(3,5472,yt),pn(1)):(_|0)==20&&(fr(3,5472,_t),pn(1))}else ft=lt;while(!1);return dt=Kt,ft|0}function xu(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0,g=0;if(!a)d=-1;else{if(d=a+4|0,_=a+8|0,h=a+12|0,o=a+20|0,(e[d>>2]|0)>0){s=0;do e[(e[_>>2]|0)+(s<<2)>>2]|0&&u2(a,s)|0,b=s<<2,xs(e[(e[h>>2]|0)+(b<<2)>>2]|0),xs(e[(e[o>>2]|0)+(b<<2)>>2]|0),g=1+b|0,xs(e[(e[h>>2]|0)+(g<<2)>>2]|0),xs(e[(e[o>>2]|0)+(g<<2)>>2]|0),g=2+b|0,xs(e[(e[h>>2]|0)+(g<<2)>>2]|0),xs(e[(e[o>>2]|0)+(g<<2)>>2]|0),b=3+b|0,xs(e[(e[h>>2]|0)+(b<<2)>>2]|0),xs(e[(e[o>>2]|0)+(b<<2)>>2]|0),s=s+1|0;while((s|0)<(e[d>>2]|0))}xs(a),d=0}return d|0}function o3(a,d,_,h,o,s,b,g,_e,tt,nt,lt,ft,yt,_t,Kt,Nt,Pt,Ot){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0,g=g|0,_e=_e|0,tt=+tt,nt=nt|0,lt=lt|0,ft=ft|0,yt=yt|0,_t=_t|0,Kt=Kt|0,Nt=Nt|0,Pt=Pt|0,Ot=Ot|0;var zt=0,$t=0,Yt=0,kt=0,Lt=0,cn=0,Yn=0,ir=0,sr=0,dr=0,Jn=0,Hr=0,wr=0,Or=0;Or=dt,dt=dt+12448|0,Yt=Or+12440|0,$t=Or+8|0,Hr=Or,Jn=Or+12312|0,wr=Or+24|0;do if((_+-2|0)>>>0<3){if((Nt|0)!=2830){if(zt=Nt&255,(Eu(d,2,zt,zt*3|0,h,o,s,b,g,_e,tt,wr)|0)<0){e[yt>>2]=-1,zt=-6;break}if(zt=Ll(wr,zt,yt,_t,Kt,Nt,Pt)|0,!Ot)break;e[Ot>>2]=0,e[Ot+4>>2]=0;break}if((Eu(d,2,14,42,h,o,s,b,g,_e,.875,wr)|0)<0){e[yt>>2]=-1,zt=-6;break}e[$t>>2]=0,e[$t+4>>2]=182,e[$t+8>>2]=195,e[$t+12>>2]=13,Nt=ct[wr+(e[$t>>2]|0)>>0]|0,zt=(Nt&255)>0?Nt:0,Nt=(Nt&255)<255?Nt:-1,dr=ct[wr+(e[$t+4>>2]|0)>>0]|0,zt=(dr&255)>(zt&255)?dr:zt,Nt=(dr&255)<(Nt&255)?dr:Nt,dr=ct[wr+(e[$t+8>>2]|0)>>0]|0,zt=(dr&255)>(zt&255)?dr:zt,Nt=(dr&255)<(Nt&255)?dr:Nt,dr=ct[wr+(e[$t+12>>2]|0)>>0]|0,zt=((dr&255)>(zt&255)?dr:zt)&255,Nt=((dr&255)<(Nt&255)?dr:Nt)&255;e:do if((zt-Nt|0)>=30){for(dr=(zt+Nt|0)>>>1,ct[Yt>>0]=(It[wr+(e[$t>>2]|0)>>0]|0)>>>0<dr>>>0&1,ct[Yt+1>>0]=(It[wr+(e[$t+4>>2]|0)>>0]|0)>>>0<dr>>>0&1,ct[Yt+2>>0]=(It[wr+(e[$t+8>>2]|0)>>0]|0)>>>0<dr>>>0&1,ct[Yt+3>>0]=(It[wr+(e[$t+12>>2]|0)>>0]|0)>>>0<dr>>>0&1,Nt=0;;){if(zt=Nt+1|0,(ct[Yt+Nt>>0]|0)==1&&(ct[Yt+((zt|0)%4|0)>>0]|0)==1&&!(ct[Yt+((Nt+2|0)%4|0)>>0]|0)){sr=Nt;break}if((zt|0)<4)Nt=zt;else{sr=zt;break}}switch(sr|0){case 4:{e[_t>>2]=0,it[Kt>>3]=-1,zt=-3,Nt=0,$t=0;break e}case 0:{$t=119,zt=255,Nt=0;do{cn=Nt+-3|0,kt=(Nt&-2|0)==12,Lt=Nt*14|0,Yt=0;do(Yt+-3|cn)>>>0>=8&&(ir=Yt&-2,(Yt|Nt)>>>0>=2)&&!(kt&((ir|0)==0|(ir|0)==12))&&(Yn=(It[wr+(Yt+Lt)>>0]|0)-dr|0,ct[Jn+$t>>0]=Yn>>>31,Yn=(Yn|0)>-1?Yn:0-Yn|0,$t=$t+-1|0,zt=(Yn|0)<(zt|0)?Yn:zt),Yt=Yt+1|0;while((Yt|0)!=14);Nt=Nt+1|0}while((Nt|0)!=14);break}case 1:{$t=119,zt=255,Nt=0;do{for(cn=Nt+-3|0,Lt=Nt&-2,kt=(Lt|0)==0,Lt=(Lt|0)==12,Yt=13;(Yt+-3|cn)>>>0>=8&&(Yn=(Yt&-2|0)==12,!(kt&Yn))&&!(Lt&(Yt>>>0<2|Yn))&&(ir=(It[wr+((Yt*14|0)+Nt)>>0]|0)-dr|0,ct[Jn+$t>>0]=ir>>>31,ir=(ir|0)>-1?ir:0-ir|0,$t=$t+-1|0,zt=(ir|0)<(zt|0)?ir:zt),(Yt|0)>0;)Yt=Yt+-1|0;Nt=Nt+1|0}while((Nt|0)!=14);break}case 2:{for(Nt=119,zt=255,cn=13;;){for(kt=cn+-3|0,Lt=cn>>>0<2|(cn&-2|0)==12,Yt=cn*14|0,$t=13;($t+-3|kt)>>>0>=8&&!(($t|cn)>>>0<2|Lt&($t&-2|0)==12)&&(ir=(It[wr+($t+Yt)>>0]|0)-dr|0,ct[Jn+Nt>>0]=ir>>>31,ir=(ir|0)>-1?ir:0-ir|0,Nt=Nt+-1|0,zt=(ir|0)<(zt|0)?ir:zt),($t|0)>0;)$t=$t+-1|0;if((cn|0)>0)cn=cn+-1|0;else break}break}case 3:{for(Nt=119,zt=255,cn=13;;){Lt=cn+-3|0,kt=cn&-2,Yt=(kt|0)==12,kt=(kt|0)==0,$t=0;do($t+-3|Lt)>>>0>=8&&!(Yt&$t>>>0<2|($t|cn)>>>0<2)&&!(kt&($t&-2|0)==12)&&(ir=(It[wr+(($t*14|0)+cn)>>0]|0)-dr|0,ct[Jn+Nt>>0]=ir>>>31,ir=(ir|0)>-1?ir:0-ir|0,Nt=Nt+-1|0,zt=(ir|0)<(zt|0)?ir:zt),$t=$t+1|0;while(($t|0)!=14);if((cn|0)>0)cn=cn+-1|0;else break}break}default:zt=255}e[_t>>2]=sr,it[Kt>>3]=(zt|0)>30?1:+(zt|0)/30,zt=yu(2830,0,0,Jn,Hr)|0,(zt|0)<0?(zt=-4,Nt=0,$t=0):(Pt&&(e[Pt>>2]=zt),$t=Hr,zt=0,Nt=e[$t>>2]|0,$t=e[$t+4>>2]|0)}else e[_t>>2]=0,it[Kt>>3]=-1,zt=-2,Nt=0,$t=0;while(!1);if((zt|0)<0){e[yt>>2]=-1;break}if((Nt|0)==-1&($t|0)==-1){e[yt>>2]=-1,zt=-5;break}e[yt>>2]=(Nt&-32768|0)==0&!0?Nt&32767:0,Ot&&(zt=Ot,e[zt>>2]=Nt,e[zt+4>>2]=$t),zt=0}else zt=1;while(!1);e:do switch(_|0){case 0:case 1:case 3:case 4:{if(!a){e[nt>>2]=-1,Nt=-1;break e}switch(Nt=a+28|0,$t=e[Nt>>2]|0,Yt=$t<<2,_|0){case 0:case 3:if((Eu(d,0,$t,Yt,h,o,s,b,g,_e,tt,wr)|0)<0){e[nt>>2]=-1,Nt=-6;break e}else{Nt=Bo(a,0,wr,e[Nt>>2]|0,nt,lt,ft)|0;break e}default:if((Eu(d,1,$t,Yt,h,o,s,b,g,_e,tt,wr)|0)<0){e[nt>>2]=-1,Nt=-6;break e}else{Nt=Bo(a,1,wr,e[Nt>>2]|0,nt,lt,ft)|0;break e}}}default:Nt=1}while(!1);return(zt|0)!=1?(Nt|0)!=1&&(zt=(Nt&zt|0)<0?Nt:0):zt=Nt,dt=Or,zt|0}function Q1(a){a=a|0;var d=0,_=0,h=0,o=0,s=0,b=0,g=0,_e=0;_e=dt,dt=dt+16|0,d=_e+8|0,b=_e+4|0,_=_e,e[b>>2]=a;do if(a>>>0>=212){s=(a>>>0)/210|0,h=s*210|0,e[_>>2]=a-h,d=(Fp(3712,3904,_,d)|0)-3712>>2,o=d,d=(e[3712+(d<<2)>>2]|0)+h|0;e:for(;;){for(h=5;;){if(h>>>0>=47){h=211,g=8;break}if(_=e[3520+(h<<2)>>2]|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=106;break e}if((d|0)==(Pn(a,_)|0))break;h=h+1|0}t:do if((g|0)==8)for(;;){if(g=0,_=(d>>>0)/(h>>>0)|0,_>>>0<h>>>0){g=105;break e}if((d|0)==(Pn(_,h)|0))break t;if(_=h+10|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+12|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+16|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+18|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+22|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+28|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+30|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+36|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+40|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+42|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+46|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+52|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+58|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+60|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+66|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+70|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+72|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+78|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+82|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+88|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+96|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+100|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+102|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+106|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+108|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+112|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+120|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+126|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+130|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+136|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+138|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+142|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+148|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+150|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+156|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+162|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+166|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+168|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+172|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+178|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+180|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+186|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+190|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+192|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+196|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+198|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break t;if(_=h+208|0,a=(d>>>0)/(_>>>0)|0,a>>>0<_>>>0){g=105;break e}if((d|0)==(Pn(a,_)|0))break;h=h+210|0,g=8}while(!1);h=o+1|0,d=(h|0)==48,h=d?0:h,d=(d&1)+s|0,o=h,s=d,d=(e[3712+(h<<2)>>2]|0)+(d*210|0)|0}if((g|0)==105){e[b>>2]=d;break}else if((g|0)==106){e[b>>2]=d;break}}else d=e[(Fp(3520,3712,b,d)|0)>>2]|0;while(!1);return dt=_e,d|0}function Fp(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0;o=e[_>>2]|0,h=a,_=d-a>>2;e:for(;;){for(;;){if(!_)break e;if(a=(_|0)/2|0,(e[h+(a<<2)>>2]|0)>>>0<o>>>0)break;_=a}h=h+(a+1<<2)|0,_=_+-1-a|0}return h|0}function a3(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0;_>>>0>4294967279&&Rl(a),_>>>0<11?(ct[a>>0]=_<<1,a=a+1|0):(o=_+16&-16,h=eu(o)|0,e[a+8>>2]=h,e[a>>2]=o|1,e[a+4>>2]=_,a=h),B0(a|0,d|0,_|0)|0,ct[a+_>>0]=0}function kp(a){a=a|0,ct[a>>0]&1&&K0(e[a+8>>2]|0)}function om(){}function Ul(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,h=d-h-(_>>>0>a>>>0|0)>>>0,dn=h,a-_>>>0|0|0}function Er(a,d,_){a=a|0,d=d|0,_=_|0;var h=0,o=0,s=0,b=0;if(h=a+_|0,(_|0)>=20){if(d=d&255,s=a&3,b=d|d<<8|d<<16|d<<24,o=h&-4,s)for(s=a+4-s|0;(a|0)<(s|0);)ct[a>>0]=d,a=a+1|0;for(;(a|0)<(o|0);)e[a>>2]=b,a=a+4|0}for(;(a|0)<(h|0);)ct[a>>0]=d,a=a+1|0;return a-_|0}function E0(a,d,_){return a=a|0,d=d|0,_=_|0,(_|0)<32?(dn=d<<_|(a&(1<<_)-1<<32-_)>>>32-_,a<<_):(dn=a<<_-32,0)}function M0(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,_=a+_>>>0,dn=d+h+(_>>>0<a>>>0|0)>>>0,_|0|0}function V1(a,d,_){return a=a|0,d=d|0,_=_|0,(_|0)<32?(dn=d>>>_,a>>>_|(d&(1<<_)-1)<<32-_):(dn=0,d>>>_-32|0)}function B0(a,d,_){a=a|0,d=d|0,_=_|0;var h=0;if((_|0)>=4096)return Rr(a|0,d|0,_|0)|0;if(h=a|0,(a&3)==(d&3)){for(;a&3;){if(!_)return h|0;ct[a>>0]=ct[d>>0]|0,a=a+1|0,d=d+1|0,_=_-1|0}for(;(_|0)>=4;)e[a>>2]=e[d>>2],a=a+4|0,d=d+4|0,_=_-4|0}for(;(_|0)>0;)ct[a>>0]=ct[d>>0]|0,a=a+1|0,d=d+1|0,_=_-1|0;return h|0}function t4(a,d,_){return a=a|0,d=d|0,_=_|0,(_|0)<32?(dn=d>>_,a>>>_|(d&(1<<_)-1)<<32-_):(dn=(d|0)<0?-1:0,d>>_-32|0)}function am(a){a=a|0;var d=0;return d=ct[Mt+(a&255)>>0]|0,(d|0)<8?d|0:(d=ct[Mt+(a>>8&255)>>0]|0,(d|0)<8?d+8|0:(d=ct[Mt+(a>>16&255)>>0]|0,(d|0)<8?d+16|0:(ct[Mt+(a>>>24)>>0]|0)+24|0))}function Np(a,d){a=a|0,d=d|0;var _=0,h=0,o=0,s=0;return s=a&65535,o=d&65535,_=Pn(o,s)|0,h=a>>>16,a=(_>>>16)+(Pn(o,h)|0)|0,o=d>>>16,d=Pn(o,s)|0,dn=(a>>>16)+(Pn(o,h)|0)+(((a&65535)+d|0)>>>16)|0,a+d<<16|_&65535|0|0}function i4(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0;return tt=d>>31|((d|0)<0?-1:0)<<1,_e=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,s=h>>31|((h|0)<0?-1:0)<<1,o=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,g=Ul(tt^a,_e^d,tt,_e)|0,b=dn,a=s^tt,d=o^_e,Ul((Up(g,b,Ul(s^_,o^h,s,o)|0,dn,0)|0)^a,dn^d,a,d)|0}function CE(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0,b=0,g=0,_e=0,tt=0;return o=dt,dt=dt+16|0,g=o|0,b=d>>31|((d|0)<0?-1:0)<<1,s=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,tt=h>>31|((h|0)<0?-1:0)<<1,_e=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,a=Ul(b^a,s^d,b,s)|0,d=dn,Up(a,d,Ul(tt^_,_e^h,tt,_e)|0,dn,g)|0,h=Ul(e[g>>2]^b,e[g+4>>2]^s,b,s)|0,_=dn,dt=o,dn=_,h|0}function z2(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;return o=a,s=_,_=Np(o,s)|0,a=dn,dn=(Pn(d,s)|0)+(Pn(h,o)|0)+a|a&0,_|0|0|0}function v2(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,Up(a,d,_,h,0)|0}function lm(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0;var o=0,s=0;return s=dt,dt=dt+16|0,o=s|0,Up(a,d,_,h,o)|0,dt=s,dn=e[o+4>>2]|0,e[o>>2]|0|0}function Up(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0;var s=0,b=0,g=0,_e=0,tt=0,nt=0,lt=0,ft=0,yt=0,_t=0;if(nt=a,_e=d,tt=_e,b=_,ft=h,g=ft,!tt)return s=(o|0)!=0,g?s?(e[o>>2]=a|0,e[o+4>>2]=d&0,ft=0,o=0,dn=ft,o|0):(ft=0,o=0,dn=ft,o|0):(s&&(e[o>>2]=(nt>>>0)%(b>>>0),e[o+4>>2]=0),ft=0,o=(nt>>>0)/(b>>>0)>>>0,dn=ft,o|0);s=(g|0)==0;do if(b){if(!s){if(s=(Ho(g|0)|0)-(Ho(tt|0)|0)|0,s>>>0<=31){lt=s+1|0,g=31-s|0,d=s-31>>31,b=lt,a=nt>>>(lt>>>0)&d|tt<<g,d=tt>>>(lt>>>0)&d,s=0,g=nt<<g;break}return o?(e[o>>2]=a|0,e[o+4>>2]=_e|d&0,ft=0,o=0,dn=ft,o|0):(ft=0,o=0,dn=ft,o|0)}if(s=b-1|0,s&b){g=(Ho(b|0)|0)+33-(Ho(tt|0)|0)|0,_t=64-g|0,lt=32-g|0,_e=lt>>31,yt=g-32|0,d=yt>>31,b=g,a=lt-1>>31&tt>>>(yt>>>0)|(tt<<lt|nt>>>(g>>>0))&d,d=d&tt>>>(g>>>0),s=nt<<_t&_e,g=(tt<<_t|nt>>>(yt>>>0))&_e|nt<<lt&g-33>>31;break}return o&&(e[o>>2]=s&nt,e[o+4>>2]=0),(b|0)==1?(yt=_e|d&0,_t=a|0|0,dn=yt,_t|0):(_t=am(b|0)|0,yt=tt>>>(_t>>>0)|0,_t=tt<<32-_t|nt>>>(_t>>>0)|0,dn=yt,_t|0)}else{if(s)return o&&(e[o>>2]=(tt>>>0)%(b>>>0),e[o+4>>2]=0),yt=0,_t=(tt>>>0)/(b>>>0)>>>0,dn=yt,_t|0;if(!nt)return o&&(e[o>>2]=0,e[o+4>>2]=(tt>>>0)%(g>>>0)),yt=0,_t=(tt>>>0)/(g>>>0)>>>0,dn=yt,_t|0;if(s=g-1|0,!(s&g))return o&&(e[o>>2]=a|0,e[o+4>>2]=s&tt|d&0),yt=0,_t=tt>>>((am(g|0)|0)>>>0),dn=yt,_t|0;if(s=(Ho(g|0)|0)-(Ho(tt|0)|0)|0,s>>>0<=30){d=s+1|0,g=31-s|0,b=d,a=tt<<g|nt>>>(d>>>0),d=tt>>>(d>>>0),s=0,g=nt<<g;break}return o?(e[o>>2]=a|0,e[o+4>>2]=_e|d&0,yt=0,_t=0,dn=yt,_t|0):(yt=0,_t=0,dn=yt,_t|0)}while(!1);if(!b)tt=g,_e=0,g=0;else{lt=_|0|0,nt=ft|h&0,tt=M0(lt|0,nt|0,-1,-1)|0,_=dn,_e=g,g=0;do h=_e,_e=s>>>31|_e<<1,s=g|s<<1,h=a<<1|h>>>31|0,ft=a>>>31|d<<1|0,Ul(tt,_,h,ft)|0,_t=dn,yt=_t>>31|((_t|0)<0?-1:0)<<1,g=yt&1,a=Ul(h,ft,yt&lt,(((_t|0)<0?-1:0)>>31|((_t|0)<0?-1:0)<<1)&nt)|0,d=dn,b=b-1|0;while(b|0);tt=_e,_e=0}return b=0,o&&(e[o>>2]=a,e[o+4>>2]=d),yt=(s|0)>>>31|(tt|b)<<1|(b<<1|s>>>31)&0|_e,_t=(s<<1|0)&-2|g,dn=yt,_t|0}function _E(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,v1[a&15](d|0,_|0,h|0)|0}function xE(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,Gp[a&3](d|0,_|0,h|0,o|0,s|0)}function bE(a,d,_){return a=a|0,d=d|0,_=_|0,+FE[a&1](d|0,_|0)}function ME(a,d,_){a=a|0,d=d|0,_=+_,um[a&3](d|0,+_)}function SE(a,d){return a=a|0,d=d|0,+y3[a&3](d|0)}function TE(a){return a=a|0,w3[a&1]()|0}function cm(a,d){a=a|0,d=d|0,K2[a&15](d|0)}function l3(a,d,_){a=a|0,d=d|0,_=_|0,C3[a&7](d|0,_|0)}function c3(a,d){return a=a|0,d=d|0,Qp[a&31](d|0)|0}function u3(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,kE[a&1](d|0,_|0,h|0)}function h3(a){a=a|0,_3[a&0]()}function d3(a,d,_,h){a=a|0,d=d|0,_=_|0,h=+h,NE[a&3](d|0,_|0,+h)}function f3(a,d,_,h,o){return a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,UE[a&1](d|0,_|0,h|0,o|0)|0}function p3(a,d,_,h,o,s,b){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,b=b|0,X2[a&3](d|0,_|0,h|0,o|0,s|0,b|0)}function A3(a,d,_){return a=a|0,d=d|0,_=_|0,z1[a&15](d|0,_|0)|0}function m3(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,Vp[a&3](d|0,_|0,h|0,o|0)}function v3(a,d,_){return a=a|0,d=d|0,_=_|0,oo(0),0}function g2(a,d,_,h,o){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,oo(1)}function Cl(a,d){return a=a|0,d=d|0,oo(2),0}function _l(a,d){a=a|0,d=+d,oo(3)}function Hp(a){return a=a|0,oo(4),0}function RE(){return oo(5),0}function g3(a){a=a|0,oo(6)}function IE(a,d){a=a|0,d=d|0,oo(7)}function Xl(a){return a=a|0,oo(8),0}function BE(a,d,_){a=a|0,d=d|0,_=_|0,oo(9)}function LE(){oo(10)}function E3(a,d,_){a=a|0,d=d|0,_=+_,oo(11)}function DE(a,d,_,h){return a=a|0,d=d|0,_=_|0,h=h|0,oo(12),0}function PE(a,d,_,h,o,s){a=a|0,d=d|0,_=_|0,h=h|0,o=o|0,s=s|0,oo(13)}function W2(a,d){return a=a|0,d=d|0,oo(14),0}function OE(a,d,_,h){a=a|0,d=d|0,_=_|0,h=h|0,oo(15)}var v1=[v3,C0,r0,qA,P2,Au,d1,y6,d6,u6,h6,g6,z6,V6,wv,xv],Gp=[g2,Wo,H0,kn],FE=[Cl,N6],um=[_l,zv,Kv,Jv],y3=[Hp,Wv,Xv,Zv],w3=[RE,Fv],K2=[g3,Ep,yp,L2,wp,tu,fu,R0,e2,Cp,Ov,I6,B6,_v,$a,g3],C3=[IE,n6,t6,Yv,$v,_g,l6,G6],Qp=[Xl,_d,yv,kv,Vv,Nv,m6,v6,a6,o6,r6,i6,qv,jv,e6,c6,H6,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl,Xl],kE=[BE,k6],_3=[LE],NE=[E3,U6,F6,E3],UE=[DE,K6],X2=[PE,s1,U1,zl],z1=[W2,Tv,Hv,Gv,Qv,f6,A6,p6,E6,s6,W6,Q6,W2,W2,W2,W2],Vp=[OE,r1,t2,yo];return{_i64Subtract:Ul,_fflush:mu,_i64Add:M0,_memset:Er,_malloc:Qr,_memcpy:B0,___getTypeName:Co,_bitshift64Lshr:V1,_free:xs,___errno_location:wo,_bitshift64Shl:E0,__GLOBAL__sub_I_ARToolKitJS_cpp:R6,__GLOBAL__sub_I_bind_cpp:Wr,runPostSets:om,stackAlloc:nA,stackSave:rA,stackRestore:sA,establishStackSpace:oA,setThrew:aA,setTempRet0:lA,getTempRet0:cA,dynCall_iiii:_E,dynCall_viiiii:xE,dynCall_dii:bE,dynCall_vid:ME,dynCall_di:SE,dynCall_i:TE,dynCall_vi:cm,dynCall_vii:l3,dynCall_ii:c3,dynCall_viii:u3,dynCall_v:h3,dynCall_viid:d3,dynCall_iiiii:f3,dynCall_viiiiii:p3,dynCall_iii:A3,dynCall_viiii:m3}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module._i64Subtract=asm._i64Subtract,__GLOBAL__sub_I_bind_cpp=Module.__GLOBAL__sub_I_bind_cpp=asm.__GLOBAL__sub_I_bind_cpp;Module._fflush=asm._fflush;var __GLOBAL__sub_I_ARToolKitJS_cpp=Module.__GLOBAL__sub_I_ARToolKitJS_cpp=asm.__GLOBAL__sub_I_ARToolKitJS_cpp,_i64Add=Module._i64Add=asm._i64Add,_memset=Module._memset=asm._memset;Module.runPostSets=asm.runPostSets;var _malloc=Module._malloc=asm._malloc,_memcpy=Module._memcpy=asm._memcpy,___getTypeName=Module.___getTypeName=asm.___getTypeName,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_free=Module._free=asm._free;Module.___errno_location=asm.___errno_location;var _bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl;Module.dynCall_iiii=asm.dynCall_iiii,Module.dynCall_viiiii=asm.dynCall_viiiii,Module.dynCall_dii=asm.dynCall_dii,Module.dynCall_vid=asm.dynCall_vid,Module.dynCall_di=asm.dynCall_di,Module.dynCall_i=asm.dynCall_i,Module.dynCall_vi=asm.dynCall_vi,Module.dynCall_vii=asm.dynCall_vii,Module.dynCall_ii=asm.dynCall_ii,Module.dynCall_viii=asm.dynCall_viii,Module.dynCall_v=asm.dynCall_v,Module.dynCall_viid=asm.dynCall_viid,Module.dynCall_iiiii=asm.dynCall_iiiii,Module.dynCall_viiiiii=asm.dynCall_viiiiii,Module.dynCall_iii=asm.dynCall_iii,Module.dynCall_viiii=asm.dynCall_viiii,Runtime.stackAlloc=asm.stackAlloc,Runtime.stackSave=asm.stackSave,Runtime.stackRestore=asm.stackRestore,Runtime.establishStackSpace=asm.establishStackSpace,Runtime.setTempRet0=asm.setTempRet0,Runtime.getTempRet0=asm.getTempRet0;function ExitStatus($){this.name="ExitStatus",this.message="Program terminated with exit("+$+")",this.status=$}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function $(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=$)},Module.callMain=Module.callMain=function $(et){assert(runDependencies==0,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(__ATPRERUN__.length==0,"cannot call main when preRun functions remain to be called"),et=et||[],ensureInitRuntime();var ot=et.length+1;function ct(){for(var St=0;St<3;St++)st.push(0)}var st=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];ct();for(var e=0;e<ot-1;e=e+1)st.push(allocate(intArrayFromString(et[e]),"i8",ALLOC_NORMAL)),ct();st.push(0),st=allocate(st,"i32",ALLOC_NORMAL);try{var It=Module._main(ot,st,0);exit(It,!0)}catch(St){if(St instanceof ExitStatus)return;if(St=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else throw St&&typeof St=="object"&&St.stack&&Module.printErr("exception thrown: "+[St,St.stack]),St}finally{}};function run($){if($=$||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function et(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain($),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),et()},1)):et()}Module.run=Module.run=run;function exit($,et){if(!(et&&Module.noExitRuntime))throw Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit($)),ENVIRONMENT_IS_NODE?(process.stdout.once("drain",function(){process.exit($)}),console.log(" "),setTimeout(function(){process.exit($)},500)):ENVIRONMENT_IS_SHELL&&typeof quit=="function"&&quit($),new ExitStatus($)}Module.exit=Module.exit=exit;var abortDecorators=[];function abort($){$!==void 0?(Module.print($),Module.printErr($),$=JSON.stringify($)):$="",ABORT=!0;var et=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,ot="abort("+$+") at "+stackTrace()+et;throw abortDecorators&&abortDecorators.forEach(function(ct){ot=ct(ot,$)}),ot}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run(),function(){var $=function(pt,mt,gt){var Ct=pt,xt=mt;if(this.orientation="landscape",this.listeners={},typeof pt!="number"){var Dt=pt;gt=mt,Ct=Dt.videoWidth||Dt.width,xt=Dt.videoHeight||Dt.height,this.image=Dt}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=Ct,this.canvas.height=xt,this.ctx=this.canvas.getContext("2d"),this.videoWidth=Ct,this.videoHeight=xt,typeof gt=="string"){var Ht=this;this.cameraParam=new et(gt,function(){Ht._initialize()},function(Ut){console.error("ARController: Failed to load ARCameraParam",Ut)})}else this.cameraParam=gt,this._initialize()};$.prototype.dispose=function(){ot.teardown(this.id);for(var pt in this)this[pt]=null},$.prototype.process=function(pt){this.detectMarker(pt);var mt=this.getMarkerNum(),gt,Ct;for(gt in this.patternMarkers)Ct=this.patternMarkers[gt],Ct.inPrevious=Ct.inCurrent,Ct.inCurrent=!1;for(gt in this.barcodeMarkers)Ct=this.barcodeMarkers[gt],Ct.inPrevious=Ct.inCurrent,Ct.inCurrent=!1;for(var xt=0;xt<mt;xt++){var Dt=this.getMarker(xt),Ht=ot.UNKNOWN_MARKER,Ut=this.trackPatternMarkerId(-1);Dt.idPatt>-1&&(Dt.id===Dt.idPatt||Dt.idMatrix===-1)?(Ut=this.trackPatternMarkerId(Dt.idPatt),Ht=ot.PATTERN_MARKER,Dt.dir!==Dt.dirPatt&&this.setMarkerInfoDir(xt,Dt.dirPatt)):Dt.idMatrix>-1&&(Ut=this.trackBarcodeMarkerId(Dt.idMatrix),Ht=ot.BARCODE_MARKER,Dt.dir!==Dt.dirMatrix&&this.setMarkerInfoDir(xt,Dt.dirMatrix)),Ht!==ot.UNKNOWN_MARKER&&Ut.inPrevious?this.getTransMatSquareCont(xt,Ut.markerWidth,Ut.matrix,Ut.matrix):this.getTransMatSquare(xt,Ut.markerWidth,Ut.matrix),Ut.inCurrent=!0,this.transMatToGLMat(Ut.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:xt,type:Ht,marker:Dt,matrix:this.transform_mat}})}for(var Xt=this.getMultiMarkerCount(),xt=0;xt<Xt;xt++){var Qt=this.getMultiMarkerPatternCount(xt),Ut=!1;ot.getTransMatMultiSquareRobust(this.id,xt),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var tn=0;tn<Qt;tn++){var on=this.getMultiEachMarker(xt,tn);if(on.visible>=0){Ut=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:xt,matrix:this.transform_mat}});break}}if(Ut)for(var tn=0;tn<Qt;tn++){var on=this.getMultiEachMarker(xt,tn);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:xt,markerIndex:tn,marker:on,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},$.prototype.trackPatternMarkerId=function(pt,mt){var gt=this.patternMarkers[pt];return gt||(this.patternMarkers[pt]=gt={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:mt||this.defaultMarkerWidth}),mt&&(gt.markerWidth=mt),gt},$.prototype.trackBarcodeMarkerId=function(pt,mt){var gt=this.barcodeMarkers[pt];return gt||(this.barcodeMarkers[pt]=gt={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:mt||this.defaultMarkerWidth}),mt&&(gt.markerWidth=mt),gt},$.prototype.getMultiMarkerCount=function(){return ot.getMultiMarkerCount(this.id)},$.prototype.getMultiMarkerPatternCount=function(pt){return ot.getMultiMarkerNum(this.id,pt)},$.prototype.addEventListener=function(pt,mt){this.listeners[pt]||(this.listeners[pt]=[]),this.listeners[pt].push(mt)},$.prototype.removeEventListener=function(pt,mt){if(this.listeners[pt]){var gt=this.listeners[pt].indexOf(mt);gt>-1&&this.listeners[pt].splice(gt,1)}},$.prototype.dispatchEvent=function(pt){var mt=this.listeners[pt.name];if(mt)for(var gt=0;gt<mt.length;gt++)mt[gt].call(this,pt)},$.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},$.prototype.loadMarker=function(pt,mt,gt){return ot.addMarker(this.id,pt,mt,gt)},$.prototype.loadMultiMarker=function(pt,mt,gt){return ot.addMultiMarker(this.id,pt,mt,gt)},$.prototype.getTransMatSquare=function(pt,mt,gt){return ot.getTransMatSquare(this.id,pt,mt),gt.set(this.marker_transform_mat),gt},$.prototype.getTransMatSquareCont=function(pt,mt,gt,Ct){return this.marker_transform_mat.set(gt),ot.getTransMatSquareCont(this.id,pt,mt),Ct.set(this.marker_transform_mat),Ct},$.prototype.getTransMatMultiSquare=function(pt,mt){return ot.getTransMatMultiSquare(this.id,pt),mt.set(this.marker_transform_mat),mt},$.prototype.getTransMatMultiSquareRobust=function(pt,mt){return ot.getTransMatMultiSquare(this.id,pt),mt.set(this.marker_transform_mat),mt},$.prototype.transMatToGLMat=function(pt,mt,gt){return mt[0+0*4]=pt[0],mt[0+1*4]=pt[1],mt[0+2*4]=pt[2],mt[0+3*4]=pt[3],mt[1+0*4]=pt[4],mt[1+1*4]=pt[5],mt[1+2*4]=pt[6],mt[1+3*4]=pt[7],mt[2+0*4]=pt[8],mt[2+1*4]=pt[9],mt[2+2*4]=pt[10],mt[2+3*4]=pt[11],mt[3+0*4]=0,mt[3+1*4]=0,mt[3+2*4]=0,mt[3+3*4]=1,gt!=null&&gt!==0&&(mt[12]*=gt,mt[13]*=gt,mt[14]*=gt),mt},$.prototype.detectMarker=function(pt){return this._copyImageToHeap(pt)?ot.detectMarker(this.id):-99},$.prototype.getMarkerNum=function(){return ot.getMarkerNum(this.id)},$.prototype.getMarker=function(pt){if(ot.getMarker(this.id,pt)===0)return ot.markerInfo},$.prototype.setMarkerInfoVertex=function(pt,mt){for(var gt=0;gt<mt.length;gt++)this.marker_transform_mat[gt*2+0]=mt[gt][0],this.marker_transform_mat[gt*2+1]=mt[gt][1];return ot.setMarkerInfoVertex(this.id,pt)},$.prototype.cloneMarkerInfo=function(pt){return JSON.parse(JSON.stringify(pt))},$.prototype.getMultiEachMarker=function(pt,mt){if(ot.getMultiEachMarker(this.id,pt,mt)===0)return ot.multiEachMarkerInfo},$.prototype.getTransformationMatrix=function(){return this.transform_mat},$.prototype.getCameraMatrix=function(){return this.camera_mat},$.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},$.prototype.setDebugMode=function(pt){return ot.setDebugMode(this.id,pt)},$.prototype.getDebugMode=function(){return ot.getDebugMode(this.id)},$.prototype.getProcessingImage=function(){return ot.getProcessingImage(this.id)},$.prototype.setLogLevel=function(pt){return ot.setLogLevel(pt)},$.prototype.getLogLevel=function(){return ot.getLogLevel()},$.prototype.setMarkerInfoDir=function(pt,mt){return ot.setMarkerInfoDir(this.id,pt,mt)},$.prototype.setProjectionNearPlane=function(pt){return ot.setProjectionNearPlane(this.id,pt)},$.prototype.getProjectionNearPlane=function(){return ot.getProjectionNearPlane(this.id)},$.prototype.setProjectionFarPlane=function(pt){return ot.setProjectionFarPlane(this.id,pt)},$.prototype.getProjectionFarPlane=function(){return ot.getProjectionFarPlane(this.id)},$.prototype.setThresholdMode=function(pt){return ot.setThresholdMode(this.id,pt)},$.prototype.getThresholdMode=function(){return ot.getThresholdMode(this.id)},$.prototype.setThreshold=function(pt){return ot.setThreshold(this.id,pt)},$.prototype.getThreshold=function(){return ot.getThreshold(this.id)},$.prototype.setPatternDetectionMode=function(pt){return ot.setPatternDetectionMode(this.id,pt)},$.prototype.getPatternDetectionMode=function(){return ot.getPatternDetectionMode(this.id)},$.prototype.setMatrixCodeType=function(pt){return ot.setMatrixCodeType(this.id,pt)},$.prototype.getMatrixCodeType=function(){return ot.getMatrixCodeType(this.id)},$.prototype.setLabelingMode=function(pt){return ot.setLabelingMode(this.id,pt)},$.prototype.getLabelingMode=function(){return ot.getLabelingMode(this.id)},$.prototype.setPattRatio=function(pt){return ot.setPattRatio(this.id,pt)},$.prototype.getPattRatio=function(){return ot.getPattRatio(this.id)},$.prototype.setImageProcMode=function(pt){return ot.setImageProcMode(this.id,pt)},$.prototype.getImageProcMode=function(){return ot.getImageProcMode(this.id)},$.prototype.debugDraw=function(){var pt=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),mt=new ImageData(pt,this.canvas.width,this.canvas.height);this.ctx.putImageData(mt,0,0);for(var gt=this.getMarkerNum(),Ct=0;Ct<gt;Ct++)this._debugMarker(this.getMarker(Ct))},$.prototype._initialize=function(){this.id=ot.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var pt=ot.frameMalloc;this.framepointer=pt.framepointer,this.framesize=pt.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,pt.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,pt.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var mt=this;setTimeout(function(){mt.onload&&mt.onload(),mt.dispatchEvent({name:"load",target:mt})},1)},$.prototype._copyImageToHeap=function(pt){if(pt||(pt=this.image),pt.nodeName==="IMG"&&pt.width>pt.height||pt.nodeName==="VIDEO"&&pt.videoWidth>pt.videoHeight)this.ctx.drawImage(pt,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var mt=this.canvas.height/this.canvas.width,gt=this.canvas.width*mt,Ct=this.canvas.height*mt,xt=(this.canvas.width-Ct)/2;this.ctx.drawImage(pt,xt,0,Ct,gt)}var Dt=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),Ht=Dt.data;return this.dataHeap?(this.dataHeap.set(Ht),!0):!1},$.prototype._debugMarker=function(pt){var mt,gt;mt=pt.vertex;var Ct=this.ctx;Ct.strokeStyle="red",Ct.beginPath(),Ct.moveTo(mt[0][0],mt[0][1]),Ct.lineTo(mt[1][0],mt[1][1]),Ct.stroke(),Ct.beginPath(),Ct.moveTo(mt[2][0],mt[2][1]),Ct.lineTo(mt[3][0],mt[3][1]),Ct.stroke(),Ct.strokeStyle="green",Ct.beginPath(),Ct.lineTo(mt[1][0],mt[1][1]),Ct.lineTo(mt[2][0],mt[2][1]),Ct.stroke(),Ct.beginPath(),Ct.moveTo(mt[3][0],mt[3][1]),Ct.lineTo(mt[0][0],mt[0][1]),Ct.stroke(),gt=pt.pos,Ct.beginPath(),Ct.arc(gt[0],gt[1],8,0,Math.PI*2),Ct.fillStyle="red",Ct.fill()},$.getUserMedia=function(pt){pt.facingMode;var mt=pt.onSuccess,gt=pt.onError||function(on){console.error("ARController.getUserMedia",on)},Ct=document.createElement("video"),xt=function(){this.videoWidth!==0&&mt(Ct)},Dt=!1,Ht=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],Ut=function(on){Dt&&(Ct.play(),Ct.paused||Ht.forEach(function(vn){window.removeEventListener(vn,Ut,!0)}))};Ht.forEach(function(on){window.addEventListener(on,Ut,!0)});var Xt=function(on){Ct.addEventListener("loadedmetadata",xt,!1),Ct.src=window.URL.createObjectURL(on),Dt=!0,Ut()},Qt={};pt.width&&(pt.width,typeof pt.width=="object"?(pt.width.max&&(Qt.maxWidth=pt.width.max),pt.width.min&&(Qt.minWidth=pt.width.max)):Qt.maxWidth=pt.width),pt.height&&(pt.height,typeof pt.height=="object"?(pt.height.max&&(Qt.maxHeight=pt.height.max),pt.height.min&&(Qt.minHeight=pt.height.max)):Qt.maxHeight=pt.height),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var tn={audio:!1,video:{mandatory:Qt}};return navigator.getUserMedia?navigator.getUserMedia(tn,Xt,gt):gt("navigator.getUserMedia is not supported on your browser"),Ct},$.getUserMediaARController=function(pt){var mt={};for(var gt in pt)mt[gt]=pt[gt];var Ct=pt.onSuccess,xt=pt.cameraParam;mt.onSuccess=function(){new et(xt,function(){var Ht=this,Ut=pt.maxARVideoSize||Math.max(Dt.videoWidth,Dt.videoHeight),Xt=Ut/Math.max(Dt.videoWidth,Dt.videoHeight),Qt=Xt*Dt.videoWidth,tn=Xt*Dt.videoHeight;if(Dt.videoWidth<Dt.videoHeight){var on=Qt;Qt=tn,tn=on}var vn=new $(Qt,tn,Ht);vn.image=Dt,Dt.videoWidth<Dt.videoHeight?(vn.orientation="portrait",vn.videoWidth=Dt.videoHeight,vn.videoHeight=Dt.videoWidth):(vn.orientation="landscape",vn.videoWidth=Dt.videoWidth,vn.videoHeight=Dt.videoHeight),Ct(vn,Ht)},function(Ht){console.error("ARController: Failed to load ARCameraParam",Ht)})};var Dt=this.getUserMedia(mt);return Dt};var et=function(pt,mt,gt){this.id=-1,this._src="",this.complete=!1,this.onload=mt,this.onerror=gt,pt&&this.load(pt)};et.prototype.load=function(pt){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=pt,pt){var mt=this;ot.loadCamera(pt,function(gt){mt.id=gt,mt.complete=!0,mt.onload()},function(gt){mt.onerror(gt)})}},Object.defineProperty(et.prototype,"src",{set:function(pt){this.load(pt)},get:function(){return this._src}}),et.prototype.dispose=function(){this.id!==-1&&ot.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var ot={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:bt,addMarker:It,addMultiMarker:it},ct=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function st(){ct.forEach(function(mt){ot[mt]=Module[mt]});for(var pt in Module)pt.match(/^AR/)&&(ot[pt]=Module[pt])}var e=0;function It(pt,mt,gt){var Ct="/marker_"+e++;Mt(mt,Ct,function(){var xt=Module._addMarker(pt,Ct);gt&&gt(xt)})}function St(pt){return String.fromCharCode.apply(String,pt)}function Gt(pt){var mt=St(pt),gt=mt.split(`
`),Ct=[],xt=0;return gt.forEach(function(Dt){if(Dt=Dt.trim(),!(!Dt||Dt.startsWith("#")))switch(xt){case 0:xt=1;return;case 1:Dt.match(/^\d+$/)||Ct.push(Dt);case 2:case 3:case 4:xt++;return;case 5:xt=1;return}}),Ct}var vt=0;function it(pt,mt,gt){var Ct="/multi_marker_"+vt++;Mt(mt,Ct,function(xt){var Dt=Gt(xt);function Ht(){var Xt=Module._addMultiMarker(pt,Ct),Qt=Module.getMultiMarkerNum(pt,Xt);gt&&gt(Xt,Qt)}if(!Dt.length)return Ht();var Ut=mt.split("/").slice(0,-1).join("/");Dt=Dt.map(function(Xt){return Xt==="patt.hiro"||Xt==="patt.kanji"||Xt==="patt2.hiro"||Xt==="patt2.kanji"?["http://127.0.0.1:8080/data/data/"+Xt,Xt]:[Ut+"/"+Xt,Xt]}),Rt(Dt,Ht)})}var dt=0;function bt(pt,mt){var gt="/camera_param_"+dt++,Ct=function(){var xt=Module._loadCamera(gt);mt&&mt(xt)};typeof pt=="object"?Et(gt,pt,Ct):pt.indexOf(`
`)>-1?Tt(gt,pt,Ct):Mt(pt,gt,Ct)}function Tt(pt,mt,gt){for(var Ct=new Uint8Array(mt.length),xt=0;xt<Ct.length;xt++)Ct[xt]=mt.charCodeAt(xt)&255;Et(pt,Ct,gt)}function Et(pt,mt,gt){FS.writeFile(pt,mt,{encoding:"binary"}),gt(mt)}function Mt(pt,mt,gt){var Ct=new XMLHttpRequest;Ct.open("GET",pt,!0),Ct.responseType="arraybuffer",Ct.onload=function(xt){var Dt=Ct.response,Ht=new Uint8Array(Dt);Et(mt,Ht,gt)},Ct.send()}function Rt(pt,mt){var gt=pt.pop();gt?Mt(gt[0],gt[1],function(){Rt(pt,mt)}):mt()}window.artoolkit=ot,window.ARController=$,window.ARCameraParam=et,window.Module?st():window.Module={onRuntimeInitialized:function(){st()}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function($){this.id=THREEx.ArBaseControls.id++,this.object3d=$,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function($){this._sourceElement=$;var et=parseInt($.style.width),ot=parseInt($.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,et/ot,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var $=this._sourceElement,et=this._cameraPicking,ot=parseInt($.style.width),ct=parseInt($.style.height);et.aspect=ot/ct,et.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function($,et){var ot=this._sourceElement,ct=this._cameraPicking,st=new THREE.Vector3;st.x=$.layerX/parseInt(ot.style.width)*2-1,st.y=-($.layerY/parseInt(ot.style.height))*2+1;var e=new THREE.Raycaster;e.setFromCamera(st,ct);var It=e.intersectObjects(et);return It},THREEx.ARClickability.prototype.update=function(){};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function($){var dt=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),it=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:$},opacity:{value:.5}},defines:{updateInShaderEnabled:1}}),et=new THREE.Mesh(dt,it);et.rotation.x=-Math.PI/2,this.object3d=et;for(var ot=-.65,ct=.65,st=.65+.1,e=.95+.1,It=[[]],St=0;St<et.geometry.faces.length;St++)It[0][St]=[],It[0][St][0]=new THREE.Vector2,It[0][St][1]=new THREE.Vector2,It[0][St][2]=new THREE.Vector2;for(var Gt=0;Gt<et.geometry.parameters.heightSegments/2;Gt++)It[0][Gt*4+0][0].set(ot/2+.5,e/2+.5),It[0][Gt*4+0][1].set(ot/2+.5,st/2+.5),It[0][Gt*4+0][2].set(ct/2+.5,e/2+.5),It[0][Gt*4+1][0].set(ot/2+.5,st/2+.5),It[0][Gt*4+1][1].set(ct/2+.5,st/2+.5),It[0][Gt*4+1][2].set(ct/2+.5,e/2+.5),It[0][Gt*4+2][0].set(ot/2+.5,st/2+.5),It[0][Gt*4+2][1].set(ot/2+.5,e/2+.5),It[0][Gt*4+2][2].set(ct/2+.5,st/2+.5),It[0][Gt*4+3][0].set(ot/2+.5,e/2+.5),It[0][Gt*4+3][1].set(ct/2+.5,e/2+.5),It[0][Gt*4+3][2].set(ct/2+.5,st/2+.5);et.geometry.faceVertexUvs=It,et.geometry.uvsNeedUpdate=!0;var vt=[];vt.push(new THREE.Vector3(ot,e,0)),vt.push(new THREE.Vector3(ct,e,0)),vt.push(new THREE.Vector3(ot,st,0)),vt.push(new THREE.Vector3(ct,st,0));var it=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),dt=new THREE.PlaneGeometry(1,1),bt=new THREE.Mesh(dt,it);this.orthoMesh=bt,this.update=function(Et,Mt){Tt(Et,Mt)};return;function Tt(Et,Mt){var Rt=[];vt.forEach(function(mt,gt){var Ct=mt.clone();Ct.applyMatrix4(Et),Ct.applyMatrix4(Mt),Ct.x/=Ct.z,Ct.y/=Ct.z,Rt.push(Ct)});for(var pt=0;pt<Rt.length;pt++)bt.geometry.vertices[pt].copy(Rt[pt]);bt.geometry.computeBoundingSphere(),bt.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction=`
        vec2 transformUvToMarkerSpace(vec2 originalUv){
                vec3 transformedUv;
                // set transformedUv - from UV coord to clip coord
                transformedUv.x = originalUv.x * 2.0 - 1.0;
                transformedUv.y = originalUv.y * 2.0 - 1.0;
                transformedUv.z = 0.0;

		// apply modelViewMatrix and projectionMatrix
                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;

		// apply perspective
		transformedUv.x /= transformedUv.z;
		transformedUv.y /= transformedUv.z;

                // set back from clip coord to Uv coord
                transformedUv.x = transformedUv.x / 2.0 + 0.5;
                transformedUv.y = transformedUv.y / 2.0 + 0.5;

                // return the result
                return transformedUv.xy;
        }`,THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+`	varying vec2 vUv;

	void main(){
                // pass the UV to the fragment
                #if (updateInShaderEnabled == 1)
		        vUv = transformUvToMarkerSpace(uv);
                #else
		        vUv = uv;
                #endif

                // compute gl_Position
		vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}`,THREEx.ArMarkerCloak.fragmentShader=`
	varying vec2 vUv;
	uniform sampler2D texture;
	uniform float opacity;

	void main(void){
		vec3 color = texture2D( texture, vUv ).rgb;

		gl_FragColor = vec4( color, opacity);
	}`;var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function($,et,ot){var ct=this;THREEx.ArBaseControls.call(this,et),this.context=$,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6,smooth:!1,smoothCount:5,smoothTolerance:.01,smoothThreshold:2};var st=["pattern","barcode","unknown"];console.assert(st.indexOf(this.parameters.type)!==-1,"illegal value",this.parameters.type);var st=["modelViewMatrix","cameraTransformMatrix"];console.assert(st.indexOf(this.parameters.changeMatrixMode)!==-1,"illegal value",this.parameters.changeMatrixMode),this.object3d=et,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,e(ot);function e(It){if(It!==void 0)for(var St in It){var Gt=It[St];if(Gt===void 0){console.warn("THREEx.ArMarkerControls: '"+St+"' parameter is undefined.");continue}var vt=ct.parameters[St];if(vt===void 0){console.warn("THREEx.ArMarkerControls: '"+St+"' is not a property of this material.");continue}ct.parameters[St]=Gt}}this.parameters.smooth&&(this.smoothMatrices=[]),$.addMarker(this),ct.context.parameters.trackingBackend==="artoolkit"?this._initArtoolkit():ct.context.parameters.trackingBackend==="aruco"?this._arucoPosit=new POS.Posit(this.parameters.size,ct.context.arucoContext.canvas.width):ct.context.parameters.trackingBackend==="tango"?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function($){var et=this.object3d;if(et.visible=!0,this.context.parameters.trackingBackend==="artoolkit"){var ot=new THREE.Matrix4().copy(this.context._artoolkitProjectionAxisTransformMatrix);ot.multiply($),$.copy(ot)}else this.context.parameters.trackingBackend==="aruco"||this.context.parameters.trackingBackend==="tango"||console.assert(!1);if(this.context.parameters.trackingBackend!=="tango"){var ct=new THREE.Matrix4().makeRotationX(Math.PI/2);$.multiply(ct)}var st=!1;if(this.parameters.changeMatrixMode==="modelViewMatrix")if(this.parameters.smooth){var e,It,St,Gt,vt=0;if(this.smoothMatrices.push($.elements.slice()),this.smoothMatrices.length<this.parameters.smoothCount+1)et.matrix.copy($);else{this.smoothMatrices.shift(),Gt=[];for(It in $.elements){e=0;for(St in this.smoothMatrices)e+=this.smoothMatrices[St][It];Gt[It]=e/this.parameters.smoothCount,Math.abs(Gt[It]-$.elements[It])>=this.parameters.smoothTolerance&&vt++}if(vt>=this.parameters.smoothThreshold){for(It in $.elements)$.elements[It]=Gt[It];et.matrix.copy($),st=!0}}}else et.matrix.copy($);else this.parameters.changeMatrixMode==="cameraTransformMatrix"?et.matrix.getInverse($):console.assert(!1);return et.matrix.decompose(et.position,et.quaternion,et.scale),this.dispatchEvent({type:"markerFound"}),st},ARjs.MarkerControls.prototype.name=function(){var $="";if($+=this.parameters.type,this.parameters.type==="pattern"){var et=this.parameters.patternUrl,ot=et.replace(/^.*\//g,"");$+=" - "+ot}else this.parameters.type==="barcode"?$+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return $},ARjs.MarkerControls.prototype._initArtoolkit=function(){var $=this,et=null,ot=setInterval(function(){var e=$.context.arController;e!==null&&(clearInterval(ot),ot=null,ct())},1e3/50);return;function ct(){var e=$.context.arController;console.assert(e!==null),$.parameters.type==="pattern"?e.loadMarker($.parameters.patternUrl,function(It){et=It,e.trackPatternMarkerId(et,$.parameters.size)}):$.parameters.type==="barcode"?(et=$.parameters.barcodeValue,e.trackBarcodeMarkerId(et,$.parameters.size)):$.parameters.type==="unknown"?et=null:console.log(!1,"invalid marker type",$.parameters.type),e.addEventListener("getMarker",function(It){if(It.data.type===artoolkit.PATTERN_MARKER&&$.parameters.type==="pattern"){if(et===null)return;It.data.marker.idPatt===et&&st(It)}else if(It.data.type===artoolkit.BARCODE_MARKER&&$.parameters.type==="barcode"){if(et===null)return;It.data.marker.idMatrix===et&&st(It)}else It.data.type===artoolkit.UNKNOWN_MARKER&&$.parameters.type==="unknown"&&st(It)})}function st(e){if(!(e.data.type===artoolkit.PATTERN_MARKER&&e.data.marker.cfPatt<$.parameters.minConfidence)&&!(e.data.type===artoolkit.BARCODE_MARKER&&e.data.marker.cfMatt<$.parameters.minConfidence)){var It=new THREE.Matrix4().fromArray(e.data.matrix);$.updateWithModelViewMatrix(It)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function($){this.object3d=new THREE.Group;var St=new THREE.AxesHelper;this.object3d.add(St);var et=$.id,ot=document.createElement("canvas");ot.width=64,ot.height=64;var ct=ot.getContext("2d"),st=new THREE.CanvasTexture(ot);ct.font="48px monospace",ct.fillStyle="rgba(192,192,255, 0.5)",ct.fillRect(0,0,ot.width,ot.height),ct.fillStyle="darkblue",ct.fillText(et,ot.width/4,3*ot.height/4),st.needsUpdate=!0;var e=new THREE.PlaneGeometry(1,1),It=new THREE.MeshBasicMaterial({map:st,transparent:!0}),St=new THREE.Mesh(e,It);St.rotation.x=-Math.PI/2,this.object3d.add(St)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function($,et){var ot=this;THREEx.ArBaseControls.call(this,$),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,et=et||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},ct(et);function ct(st){if(st!==void 0)for(var e in st){var It=st[e];if(It===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' parameter is undefined.");continue}var St=ot.parameters[e];if(St===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' is not a property of this material.");continue}ot.parameters[e]=It}}},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function($){var et=this.object3d,ot=this.parameters,ct=et.visible,st=performance.now()/1e3;if($.visible===!1&&(this._visibleStartedAt=null),$.visible===!0&&(this._unvisibleStartedAt=null),$.visible===!0&&this._visibleStartedAt===null&&(this._visibleStartedAt=st),$.visible===!1&&this._unvisibleStartedAt===null&&(this._unvisibleStartedAt=st),ct===!1&&$.visible===!0){var e=st-this._visibleStartedAt;e>=this.parameters.minVisibleDelay&&(et.visible=!0,vt())}if(ct===!0&&$.visible===!1){var It=st-this._unvisibleStartedAt;It>=this.parameters.minUnvisibleDelay&&(et.visible=!1)}if(this._lastLerpStepAt===null)it(),this._lastLerpStepAt=st;else for(var St=Math.floor((st-this._lastLerpStepAt)/this.parameters.lerpStepDelay),Gt=0;Gt<St;Gt++)it(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;this.object3d.updateMatrix(),ct===!1&&et.visible===!0&&this.dispatchEvent({type:"becameVisible"}),ct===!0&&et.visible===!1&&this.dispatchEvent({type:"becameUnVisible"});return;function vt(){et.position.copy($.position),et.quaternion.copy($.quaternion),et.scale.copy($.scale)}function it(){et.position.lerp($.position,ot.lerpPosition),et.quaternion.slerp($.quaternion,ot.lerpQuaternion),et.scale.lerp($.scale,ot.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function($){var et=this;et._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,labelingMode:"black_region",imageSmoothingEnabled:!1},console.assert(["artoolkit","aruco"].indexOf(this.parameters.trackingBackend)!==-1,"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode)!==-1,"invalid parameter detectionMode",this.parameters.detectionMode),console.assert(["black_region","white_region"].indexOf(this.parameters.labelingMode)!==-1,"invalid parameter labelingMode",this.parameters.labelingMode),this.arController=null,this.arucoContext=null,et.initialized=!1,this._arMarkersControls=[],ot($);function ot(ct){if(ct!==void 0)for(var st in ct){var e=ct[st];if(e===void 0){console.warn("THREEx.ArToolkitContext: '"+st+"' parameter is undefined.");continue}var It=et.parameters[st];if(It===void 0){console.warn("THREEx.ArToolkitContext: '"+st+"' is not a property of this material.");continue}et.parameters[st]=e}}},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="2.2.2",ARjs.Context.createDefaultCamera=function($){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),$==="artoolkit")var et=new THREE.Camera;else if($==="aruco")var et=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return et},ARjs.Context.prototype.init=function($){var et=this;this.parameters.trackingBackend==="artoolkit"?this._initArtoolkit(ot):this.parameters.trackingBackend==="aruco"?this._initAruco(ot):console.assert(!1);return;function ot(){et.dispatchEvent({type:"initialized"}),et.initialized=!0,$&&$()}},ARjs.Context.prototype.update=function($){if(this.parameters.trackingBackend==="artoolkit"&&this.arController===null)return!1;var et=performance.now();return this._updatedAt!==null&&et-this._updatedAt<1e3/this.parameters.maxDetectionRate?!1:(this._updatedAt=et,this._arMarkersControls.forEach(function(ot){ot.object3d.visible=!1}),this.parameters.trackingBackend==="artoolkit"?this._updateArtoolkit($):this.parameters.trackingBackend==="aruco"?this._updateAruco($):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function($){console.assert($ instanceof THREEx.ArMarkerControls),this._arMarkersControls.push($)},ARjs.Context.prototype.removeMarker=function($){console.assert($ instanceof THREEx.ArMarkerControls);var et=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(et!==et),this._arMarkersControls.splice(et,1)},ARjs.Context.prototype._initArtoolkit=function($){var et=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationZ(Math.PI));var ot=new ARCameraParam(et.parameters.cameraParametersUrl,function(){var ct=new ARController(et.parameters.canvasWidth,et.parameters.canvasHeight,ot);et.arController=ct,ct.ctx.mozImageSmoothingEnabled=et.parameters.imageSmoothingEnabled,ct.ctx.webkitImageSmoothingEnabled=et.parameters.imageSmoothingEnabled,ct.ctx.msImageSmoothingEnabled=et.parameters.imageSmoothingEnabled,ct.ctx.imageSmoothingEnabled=et.parameters.imageSmoothingEnabled,et.parameters.debug===!0&&(ct.debugSetup(),ct.canvas.style.position="absolute",ct.canvas.style.top="0px",ct.canvas.style.opacity="0.6",ct.canvas.style.pointerEvents="none",ct.canvas.style.zIndex="-1");var st={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},e=st[et.parameters.detectionMode];console.assert(e!==void 0),ct.setPatternDetectionMode(e);var It={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},St=It[et.parameters.matrixCodeType];console.assert(St!==void 0),ct.setMatrixCodeType(St),ct.setPattRatio(et.parameters.patternRatio);var Gt={black_region:artoolkit.AR_LABELING_BLACK_REGION,white_region:artoolkit.AR_LABELING_WHITE_REGION},vt=Gt[et.parameters.labelingMode];console.assert(vt!==void 0),ct.setLabelingMode(vt),$()});return this},ARjs.Context.prototype.getProjectionMatrix=function($){console.assert(this.parameters.trackingBackend==="artoolkit"),console.assert(this.arController,"arController MUST be initialized to call this function");var et=this.arController.getCameraMatrix(),ot=new THREE.Matrix4().fromArray(et);return ot.multiply(this._artoolkitProjectionAxisTransformMatrix),ot},ARjs.Context.prototype._updateArtoolkit=function($){this.arController.process($)},ARjs.Context.prototype._initAruco=function($){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var et=this.arucoContext.canvas.getContext("2d");et.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,et.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,et.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout(function(){$()},0)},ARjs.Context.prototype._updateAruco=function($){var et=this,ot=this._arMarkersControls,ct=this.arucoContext.detect($);ct.forEach(function(st){for(var e=null,It=0;It<ot.length;It++)if(console.assert(ot[It].parameters.type==="barcode"),ot[It].parameters.barcodeValue===st.id){e=ot[It];break}if(e!==null){var St=new THREE.Object3D;et.arucoContext.updateObject3D(St,e._arucoPosit,e.parameters.size,st),St.updateMatrix(),e.updateWithModelViewMatrix(St.matrix)}})};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var $=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return $===!0?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono",labelingMode:"black_region"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function($){return $==="default"&&($=this._guessPerformanceLabel()),$==="desktop-fast"?(this.contextParameters.canvasWidth=640*3,this.contextParameters.canvasHeight=480*3,this.contextParameters.maxDetectionRate=30):$==="desktop-normal"?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):$==="phone-normal"?(this.contextParameters.canvasWidth=80*4,this.contextParameters.canvasHeight=60*4,this.contextParameters.maxDetectionRate=30):$==="phone-slow"?(this.contextParameters.canvasWidth=80*3,this.contextParameters.canvasHeight=60*3,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+$),this},ARjs.Profile.prototype.defaultMarker=function($){return $=$||this.contextParameters.trackingBackend,$==="artoolkit"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",this.contextParameters.labelingMode="black_region"):$==="aruco"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001,this.contextParameters.labelingMode="black_region"):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function($){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=$,this},ARjs.Profile.prototype.sourceImage=function($){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=$,this},ARjs.Profile.prototype.trackingBackend=function($){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=$,this},ARjs.Profile.prototype.changeMatrixMode=function($){return this.defaultMarkerParameters.changeMatrixMode=$,this},ARjs.Profile.prototype.trackingMethod=function($){var et=ARjs.Utils.parseTrackingMethod($);return this.defaultMarkerParameters.markersAreaEnabled=et.markersAreaEnabled,this.contextParameters.trackingBackend=et.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function($){var et=this;this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},ot($);function ot(ct){if(ct!==void 0)for(var st in ct){var e=ct[st];if(e===void 0){console.warn("THREEx.ArToolkitSource: '"+st+"' parameter is undefined.");continue}var It=et.parameters[st];if(It===void 0){console.warn("THREEx.ArToolkitSource: '"+st+"' is not a property of this material.");continue}et.parameters[st]=e}}},ARjs.Source.prototype.init=function($,et){var ot=this;if(this.parameters.sourceType==="image")var ct=this._initSourceImage(st,et);else if(this.parameters.sourceType==="video")var ct=this._initSourceVideo(st,et);else if(this.parameters.sourceType==="webcam")var ct=this._initSourceWebcam(st,et);else console.assert(!1);return this.domElement=ct,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this.domElement.setAttribute("id","arjs-video"),this;function st(){document.body.appendChild(ot.domElement),window.dispatchEvent(new CustomEvent("arjs-video-loaded",{detail:{component:document.querySelector("#arjs-video")}})),ot.ready=!0,$&&$()}},ARjs.Source.prototype._initSourceImage=function($){var et=document.createElement("img");return et.src=this.parameters.sourceUrl,et.width=this.parameters.sourceWidth,et.height=this.parameters.sourceHeight,et.style.width=this.parameters.displayWidth+"px",et.style.height=this.parameters.displayHeight+"px",et.onload=$,et},ARjs.Source.prototype._initSourceVideo=function($){var et=document.createElement("video");return et.src=this.parameters.sourceUrl,et.style.objectFit="initial",et.autoplay=!0,et.webkitPlaysinline=!0,et.controls=!1,et.loop=!0,et.muted=!0,document.body.addEventListener("click",function ot(){document.body.removeEventListener("click",ot),et.play()}),et.width=this.parameters.sourceWidth,et.height=this.parameters.sourceHeight,et.style.width=this.parameters.displayWidth+"px",et.style.height=this.parameters.displayHeight+"px",et.onloadeddata=$,et},ARjs.Source.prototype._initSourceWebcam=function($,et){var ot=this;et=et||function(e){alert(`Webcam Error
Name: `+e.name+`
Message: `+e.message);var It=new CustomEvent("camera-error",{error:e});window.dispatchEvent(It)};var ct=document.createElement("video");if(ct.setAttribute("autoplay",""),ct.setAttribute("muted",""),ct.setAttribute("playsinline",""),ct.style.width=this.parameters.displayWidth+"px",ct.style.height=this.parameters.displayHeight+"px",navigator.mediaDevices===void 0||navigator.mediaDevices.enumerateDevices===void 0||navigator.mediaDevices.getUserMedia===void 0){if(navigator.mediaDevices===void 0)var st="navigator.mediaDevices";else if(navigator.mediaDevices.enumerateDevices===void 0)var st="navigator.mediaDevices.enumerateDevices";else if(navigator.mediaDevices.getUserMedia===void 0)var st="navigator.mediaDevices.getUserMedia";else console.assert(!1);return et({name:"",message:"WebRTC issue-! "+st+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then(function(e){var It={audio:!1,video:{facingMode:"environment",width:{ideal:ot.parameters.sourceWidth},height:{ideal:ot.parameters.sourceHeight}}};ot.parameters.deviceId!==null&&(It.video.deviceId={exact:ot.parameters.deviceId}),navigator.mediaDevices.getUserMedia(It).then(function(Gt){ct.srcObject=Gt;var vt=new CustomEvent("camera-init",{stream:Gt});window.dispatchEvent(vt),document.body.addEventListener("click",function(){ct.play()}),$()}).catch(function(St){et({name:St.name,message:St.message})})}).catch(function(e){et({message:e.message})}),ct},ARjs.Source.prototype.hasMobileTorch=function(){var $=arToolkitSource.domElement.srcObject;if(!($ instanceof MediaStream))return!1;this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var et=$.getVideoTracks()[0];if(et.getCapabilities===void 0)return!1;var ot=et.getCapabilities();return!!ot.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(this.hasMobileTorch()===!0);var $=arToolkitSource.domElement.srcObject;if(!($ instanceof MediaStream)){alert("enabling mobile torch is available only on webcam");return}this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var et=$.getVideoTracks()[0],ot=et.getCapabilities();if(!ot.torch){alert("no mobile torch is available on your camera");return}this._currentTorchStatus=this._currentTorchStatus===!1,et.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch(function(ct){console.log(ct)})},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var $=window.innerWidth,et=window.innerHeight;if(console.assert(arguments.length===0),this.domElement.nodeName==="IMG")var ot=this.domElement.naturalWidth,ct=this.domElement.naturalHeight;else if(this.domElement.nodeName==="VIDEO")var ot=this.domElement.videoWidth,ct=this.domElement.videoHeight;else console.assert(!1);var st=ot/ct,e=$/et;if(e<st){var It=st*et;this.domElement.style.width=It+"px",this.domElement.style.marginLeft=-(It-$)/2+"px",this.domElement.style.height=et+"px",this.domElement.style.marginTop="0px"}else{var St=1/(st/$);this.domElement.style.height=St+"px",this.domElement.style.marginTop=-(St-et)/2+"px",this.domElement.style.width=$+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function($){window.innerWidth>window.innerHeight?($.style.width=this.domElement.style.width,$.style.height=this.domElement.style.height,$.style.marginLeft=this.domElement.style.marginLeft,$.style.marginTop=this.domElement.style.marginTop):($.style.height=this.domElement.style.height,$.style.width=parseInt($.style.height)*4/3+"px",$.style.marginLeft=(window.innerWidth-parseInt($.style.width))/2+"px",$.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function($,et,ot){if(arguments.length!==3)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var ct=$.parameters.trackingBackend;if(ct==="artoolkit"){this.onResizeElement();var st=!!et.domElement.dataset.aframeCanvas;st===!1&&this.copyElementSizeTo(et.domElement),$.arController!==null&&this.copyElementSizeTo($.arController.canvas)}else ct==="aruco"?(this.onResizeElement(),this.copyElementSizeTo(et.domElement),this.copyElementSizeTo($.arucoContext.canvas)):console.assert(!1,"unhandled trackingBackend "+ct);ct==="artoolkit"?$.arController!==null&&ot.projectionMatrix.copy($.getProjectionMatrix()):ct==="aruco"?(ot.aspect=et.domElement.width/et.domElement.height,ot.updateProjectionMatrix()):console.assert(!1,"unhandled trackingBackend "+ct)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function($){var et=new THREE.PlaneGeometry(2,2),ot=new THREE.MeshBasicMaterial({map:$}),ct=new THREE.Mesh(et,ot);this.object3d=ct,this.update=function(st){st.updateMatrixWorld(!0);var e=new THREE.Vector3(-0,0,-20),e=new THREE.Vector3(-0,0,-20);ct.position.copy(e),st.localToWorld(ct.position),st.matrixWorld.decompose(st.position,st.quaternion,st.scale),ct.quaternion.copy(st.quaternion);var It=THREE.Math.radToDeg(Math.atan(1/st.projectionMatrix.elements[5]))*2,St=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),Gt=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),vt=St/Gt;ct.scale.y=Math.tan(THREE.Math.DEG2RAD*It/2)*e.length(),ct.scale.x=ct.scale.y*vt}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function($){this._sourceElement=$,this._pickingScene=new THREE.Scene;var et=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),ot=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(et,ot),this._pickingScene.add(this._pickingPlane);var ct=parseInt($.style.width),st=parseInt($.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,ct/st,.1,30)},THREEx.HitTestingPlane.prototype.update=function($,et,ot){if(this.onResize(),ot==="modelViewMatrix"){var ct=this._pickingPlane;et.parent.updateMatrixWorld(),ct.matrix.copy(et.parent.matrixWorld),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale)}else if(ot==="cameraTransformMatrix"){var st=this._pickingCamera;$.updateMatrixWorld(),st.matrix.copy($.matrixWorld),st.matrix.decompose(st.position,st.quaternion,st.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var $=this._sourceElement,et=this._pickingCamera,ot=parseInt($.style.width),ct=parseInt($.style.height);et.aspect=ot/ct,et.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function($,et){$=($-.5)*2,et=-(et-.5)*2,this._pickingScene.updateMatrixWorld(!0);var ot=new THREE.Raycaster,ct=new THREE.Vector3($,et,1);ot.setFromCamera(ct,this._pickingCamera);var st=ot.intersectObjects([this._pickingPlane]);if(st.length===0)return null;var e=this._pickingPlane.worldToLocal(st[0].point.clone()),It=new THREE.Quaternion,St=new THREE.Vector3(1,1,1);return{position:e,quaternion:It,scale:St}},THREEx.HitTestingPlane.prototype.renderDebug=function($){$.render(this._pickingScene,this._pickingCamera)};var ARjs=ARjs||{};ARjs.Anchor=function($,et){var ot=this,ct=$.arContext,st=$.parameters.scene,e=$.parameters.camera;this.arSession=$,this.parameters=et,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",et.markersAreaEnabled);var It=new THREE.Group;if(st.add(It),et.changeMatrixMode==="modelViewMatrix")var St=It;else if(et.changeMatrixMode==="cameraTransformMatrix")var St=e;else console.assert(!1);if(et.markersAreaEnabled===!1){var Gt=new THREEx.ArMarkerControls(ct,St,et);this.controls=Gt}else{if(console.assert(ct.parameters.trackingBackend==="artoolkit"||ct.parameters.trackingBackend==="aruco"),location.hash.substring(1).startsWith("markers-page-resolution=")===!0){var vt=location.hash.substring(1),it=vt.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(it.length===3);var dt=parseInt(it[1]),bt=parseInt(it[2]),ct=$.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(ct.parameters.trackingBackend,dt,bt)}localStorage.getItem("ARjsMultiMarkerFile")===null&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(ct.parameters.trackingBackend),console.assert(localStorage.getItem("ARjsMultiMarkerFile")!==null);var Tt=localStorage.getItem("ARjsMultiMarkerFile");if(et.changeMatrixMode==="modelViewMatrix")var Et=st;else if(et.changeMatrixMode==="cameraTransformMatrix")var Et=e;else console.assert(!1);var Mt=ARjs.MarkersAreaControls.fromJSON(ct,Et,St,Tt);this.controls=Mt,Mt.parameters.changeMatrixMode=et.changeMatrixMode;var Rt=[];Mt.subMarkersControls.forEach(function(gt){var Ct=new THREEx.ArMarkerHelper(gt);Ct.object3d.visible=!1,gt.object3d.add(Ct.object3d),Rt.push(Ct)}),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(gt){Rt.forEach(function(Ct){Ct.object3d.visible=gt})}}this.object3d=new THREE.Group;{var pt=new THREE.Group;st.add(pt);var mt=new THREEx.ArSmoothedControls(pt);pt.add(this.object3d)}this.update=function(){ot.object3d.visible=ot.object3d.parent.visible,mt!==void 0&&(Mt!==void 0&&Mt.updateSmoothedControls(mt),mt.update(It))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function($){var et=$.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.left="5px",this.domElement.style.bottom="10px",this.domElement.style.textAlign="right";var ot=document.createElement("span");ot.style.display="block",ot.innerHTML="<b>trackingBackend</b> : "+et,this.domElement.appendChild(ot)},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function($){var et=$.arSession,ot=et.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var ct=document.createElement("span");if(ct.style.display="block",ct.style.padding="0.5em",ct.style.color="rgba(0,0,0,0.9)",ct.style.backgroundColor="rgba(127,127,127,0.5)",ct.style.position="fixed",ct.style.left="5px",ct.style.bottom="40px",this.domElement.appendChild(ct),ct.innerHTML="<b>markersAreaEnabled</b> :"+$.parameters.markersAreaEnabled,$.parameters.markersAreaEnabled){var ct=document.createElement("button");ct.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.textAlign="left",this.domElement.appendChild(ct),ct.id="buttonToggleMarkerHelpers",ct.innerHTML="toggle-marker-helper",ct.href="javascript:void(0)";var st=!1;ct.addEventListener("click",function(){st=!st,$.markersArea.setSubMarkersVisibility(st)})}if($.parameters.markersAreaEnabled){var ct=document.createElement("button");ct.style.display="block",this.domElement.appendChild(ct),ct.id="buttonMarkersAreaLearner",ct.innerHTML="Learn-new-marker-area",ct.href="javascript:void(0)",ct.addEventListener("click",function(){if(ARjs.AnchorDebugUI.MarkersAreaLearnerURL!==null)var It=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else var It=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(It,ot)})}if($.parameters.markersAreaEnabled){var ct=document.createElement("button");ct.style.display="block",this.domElement.appendChild(ct),ct.id="buttonMarkersAreaReset",ct.innerHTML="Reset-marker-area",ct.href="javascript:void(0)",ct.addEventListener("click",function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(ot),location.reload()})}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function($){var et=this,ot=$.arContext;ot.parameters.trackingBackend,this.enabled=!0,this._arSession=$,this._hitTestingPlane=null,et._hitTestingPlane=new THREEx.HitTestingPlane($.arSource.domElement)},ARjs.HitTesting.prototype.update=function($,et,ot){this.enabled!==!1&&(this._hitTestingPlane!==null?this._hitTestingPlane.update($,et,ot):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function($){this._arSession.arContext.parameters.trackingBackend;var et=this._arSession.arSource;if(this.enabled===!1)return[];var ot=$.clientX/et.domElementWidth(),ct=$.clientY/et.domElementHeight();return this.test(ot,ct)},ARjs.HitTesting.prototype.test=function($,et){var ot=this._arSession.arContext;ot.parameters.trackingBackend;var ct=[];if(this.enabled===!1)return[];var st=this._hitTestingPlane.test($,et);if(st===null)return ct;var e=new ARjs.HitTesting.Result(st.position,st.quaternion,st.scale);return ct.push(e),ct},ARjs.HitTesting.Result=function($,et,ot){this.position=$,this.quaternion=et,this.scale=ot},ARjs.HitTesting.Result.prototype.apply=function($){$.position.copy(this.position),$.quaternion.copy(this.quaternion),$.scale.copy(this.scale),$.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function($){return $.position.copy(this.position),$.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function($){return $.quaternion.copy(this.quaternion),$.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function($){var et=this;this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},ot($);function ot(e){if(e!==void 0)for(var It in e){var St=e[It];if(St===void 0){console.warn("THREEx.Session: '"+It+"' parameter is undefined.");continue}var Gt=et.parameters[It];if(Gt===void 0){console.warn("THREEx.Session: '"+It+"' is not a property of this material.");continue}et.parameters[It]=St}}console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",$.contextParameters.trackingBackend);var ct=et.arSource=new ARjs.Source($.sourceParameters);ct.init(function(){ct.onResize(st,et.parameters.renderer,et.parameters.camera)}),window.addEventListener("resize",function(){ct.onResize(st,et.parameters.renderer,et.parameters.camera)});var st=et.arContext=new ARjs.Context($.contextParameters);et.arContext.init(),st.addEventListener("initialized",function(e){ct.onResize(st,et.parameters.renderer,et.parameters.camera)}),this.update=function(){ct.ready!==!1&&st.update(ct.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function($){var et=this.parseTrackingMethod($).trackingBackend;if(et==="artoolkit")var ot=new THREE.Camera;else if(et==="aruco")var ot=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+et);return ot},ARjs.Utils.parseTrackingMethod=function($){return $==="best"&&($="area-artoolkit"),$.startsWith("area-")?{trackingBackend:$.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:$,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function($,et,ot){var ct=this;THREEx.ArBaseControls.call(this,et),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:ot.subMarkersControls,subMarkerPoses:ot.subMarkerPoses,changeMatrixMode:ot.changeMatrixMode!==void 0?ot.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,$.addEventListener("sourceProcessed",function(){ct._onSourceProcessed()})},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var $=this,et={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},ot=$.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach(function(st,e){var It=st.object3d;if(It.visible!==!1){var St=It.matrix.clone(),Gt=$.parameters.subMarkerPoses[e];St.multiply(new THREE.Matrix4().getInverse(Gt));var vt=new THREE.Vector3,it=new THREE.Quaternion,dt=new THREE.Vector3;St.decompose(vt,it,dt),et.count++,ARjs.MarkersAreaControls.averageVector3(et.position.sum,vt,et.count,et.position.average),ARjs.MarkersAreaControls.averageQuaternion(et.quaternion.sum,it,ot,et.count,et.quaternion.average),ARjs.MarkersAreaControls.averageVector3(et.scale.sum,dt,et.count,et.scale.average)}}),et.count>0?$.object3d.visible=!0:$.object3d.visible=!1,et.count>0){var ct=new THREE.Matrix4;ct.compose(et.position.average,et.quaternion.average,et.scale.average),this.parameters.changeMatrixMode==="modelViewMatrix"?$.object3d.matrix.copy(ct):this.parameters.changeMatrixMode==="cameraTransformMatrix"?$.object3d.matrix.getInverse(ct):console.assert(!1),$.object3d.matrix.decompose($.object3d.position,$.object3d.quaternion,$.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function($,et,ot,ct,st){return st=st||new THREE.Quaternion,console.assert(ot instanceof THREE.Quaternion),et.dot(ot)>0&&(et=new THREE.Quaternion(-et.x,-et.y,-et.z,-et.w)),$.x+=et.x,$.y+=et.y,$.z+=et.z,$.w+=et.w,st.x=$.x/ct,st.y=$.y/ct,st.z=$.z/ct,st.w=$.w/ct,st.normalize(),st},ARjs.MarkersAreaControls.averageVector3=function($,et,ot,ct){return ct=ct||new THREE.Vector3,$.x+=et.x,$.y+=et.y,$.z+=et.z,ct.x=$.x/ot,ct.y=$.y/ot,ct.z=$.z/ot,ct},ARjs.MarkersAreaControls.computeCenter=function($){var et=JSON.parse($),ot={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},ct=new THREE.Quaternion;et.subMarkersControls.forEach(function(e){var It=new THREE.Matrix4().fromArray(e.poseMatrix),St=new THREE.Vector3,Gt=new THREE.Quaternion,vt=new THREE.Vector3;It.decompose(St,Gt,vt),ot.count++,ARjs.MarkersAreaControls.averageVector3(ot.position.sum,St,ot.count,ot.position.average),ARjs.MarkersAreaControls.averageQuaternion(ot.quaternion.sum,Gt,ct,ot.count,ot.quaternion.average),ARjs.MarkersAreaControls.averageVector3(ot.scale.sum,vt,ot.count,ot.scale.average)});var st=new THREE.Matrix4;return st.compose(ot.position.average,ot.quaternion.average,ot.scale.average),st},ARjs.MarkersAreaControls.computeBoundingBox=function($){var et=JSON.parse($),ot=new THREE.Box3;return et.subMarkersControls.forEach(function(ct){var st=new THREE.Matrix4().fromArray(ct.poseMatrix),e=new THREE.Vector3,It=new THREE.Quaternion,St=new THREE.Vector3;st.decompose(e,It,St),ot.expandByPoint(e)}),ot},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function($,et){et===void 0&&(et=[[.3+.1,.1,.3],[.4+.1,.1,.4],[.4+.1,.2,.5],[.5+.1,.2,.7],[.5+.1,.2,.7]]);var ot=0;if(this.parameters.subMarkersControls.forEach(function(st,e){var It=st.object3d;It.visible===!0&&ot++}),et[ot-1]!==void 0)var ct=et[ot-1];else var ct=et[et.length-1];$.parameters.lerpPosition=ct[0],$.parameters.lerpQuaternion=ct[1],$.parameters.lerpScale=ct[2]},ARjs.MarkersAreaControls.fromJSON=function($,et,ot,ct,st){var e=JSON.parse(ct),It=[],St=[];st=st||{},e.subMarkersControls.forEach(function(vt){var it=new THREE.Object3D;et.add(it);var dt=new THREEx.ArMarkerControls($,it,vt.parameters);It.push(dt),St.push(new THREE.Matrix4().fromArray(vt.poseMatrix))}),st.subMarkersControls=It,st.subMarkerPoses=St;var Gt=new THREEx.ArMultiMarkerControls($,ot,st);return Gt};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function($,et){var ot=this;this._arToolkitContext=$,this.subMarkersControls=et,this.enabled=!0,$.addEventListener("sourceProcessed",function(){ot._onSourceProcessed()})},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var $=this.subMarkersControls[0].object3d.quaternion;if(this.enabled!==!1)for(var et=this.subMarkersControls.filter(function(Tt){return Tt.object3d.visible===!0}),ot=Object.keys(et).length,ct=new THREE.Vector3,st=new THREE.Quaternion,e=new THREE.Vector3,It=new THREE.Matrix4,St=0;St<ot;St++)for(var Gt=et[St],vt=0;vt<ot;vt++){var it=et[vt];if(St!==vt){Gt.object3d.userData.seenCouples===void 0&&(Gt.object3d.userData.seenCouples={});var dt=Gt.object3d.userData.seenCouples;dt[it.id]===void 0&&(dt[it.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),It.getInverse(Gt.object3d.matrix),It.multiply(it.object3d.matrix),It.decompose(ct,st,e);var bt=dt[it.id];bt.count++,THREEx.ArMultiMarkerControls.averageVector3(bt.position.sum,ct,bt.count,bt.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(bt.quaternion.sum,st,$,bt.count,bt.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(bt.scale.sum,e,bt.count,bt.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var $=this,et=this.subMarkersControls[0];this.deleteResult(),et.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var ot=!1;this.subMarkersControls.forEach(function(ct){var st=ct.object3d.userData.result,e=st!==void 0&&st.confidenceFactor>=1;if(e!==!0){var It=$._getLearnedCoupleStats(ct);if(It!==null){var St=$._getSubMarkerControlsByID(It),Gt=ct.object3d.userData.seenCouples[It],vt=new THREE.Matrix4;vt.compose(Gt.position.average,Gt.quaternion.average,Gt.scale.average);var it=St.object3d.userData.result.averageMatrix,dt=new THREE.Matrix4().getInverse(it).multiply(vt);dt=new THREE.Matrix4().getInverse(dt),console.assert(ct.object3d.userData.result===void 0),ct.object3d.userData.result={averageMatrix:dt,confidenceFactor:1},ot=!0}}})}while(ot===!0)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function($){if($.object3d.userData.seenCouples===void 0)return null;for(var et=$.object3d.userData.seenCouples,ot=Object.keys(et).map(Number),ct=0;ct<ot.length;ct++){var st=ot[ct],e=this._getSubMarkerControlsByID(st),It=e.object3d.userData.result,St=It!==void 0&&It.confidenceFactor>=1;if(St!==!1)return st}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function($){for(var et=0;et<this.subMarkersControls.length;et++){var ot=this.subMarkersControls[et];if(ot.id===$)return ot}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var $={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:new Date().toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},et=this.subMarkersControls[0];new THREE.Matrix4().getInverse(et.object3d.matrix),this.subMarkersControls.forEach(function(ct,st){if(ct.object3d.userData.result!==void 0){var e=ct.object3d.userData.result.averageMatrix;console.assert(e instanceof THREE.Matrix4);var It={parameters:{},poseMatrix:e.toArray()};ct.parameters.type==="pattern"?(It.parameters.type=ct.parameters.type,It.parameters.patternUrl=ct.parameters.patternUrl):ct.parameters.type==="barcode"?(It.parameters.type=ct.parameters.type,It.parameters.barcodeValue=ct.parameters.barcodeValue):console.assert(!1),$.subMarkersControls.push(It)}});var ot=JSON.stringify($,null,"	");return ot},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach(function($){delete $.object3d.userData.seenCouples})},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach(function($){delete $.object3d.userData.result})};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function($,et){var ot={backURL:location.href,trackingBackend:et,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(et)};location.href=$+"?"+encodeURIComponent(JSON.stringify(ot))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function($){var et=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile($);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(et))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function($){if(console.assert($),$===void 0)debugger;var et=document.createElement("a");et.href=ARjs.Context.baseURL;var ot=et.href,ct={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:new Date().toJSON()},trackingBackend:$,subMarkersControls:[]};return ct.subMarkersControls[0]={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(0,0,0).toArray()},$==="artoolkit"?(ct.subMarkersControls[0].parameters.type="pattern",ct.subMarkersControls[0].parameters.patternUrl=ot+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):$==="aruco"?(ct.subMarkersControls[0].parameters.type="barcode",ct.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),ct},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function($){var et=document.createElement("a");et.href=ARjs.Context.baseURL;var ot=et.href;if($==="artoolkit")var ct=[{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:ot+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if($==="aruco")var ct=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return ct},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function($,et,ot){var ct=this.buildMarkersAreaFileFromResolution($,et,ot);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(ct))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function($,et,ot){var ct={meta:{createdBy:"AR.js - Augmented Website",createdAt:new Date().toJSON()},trackingBackend:$,subMarkersControls:[]},st=.1;if(et>ot)var e=.4*ot;else if(et<ot)var e=.4*et;else if(et===ot)var e=.33*et;else console.assert(!1);var It=e*(1-2*st),St=(et-e)/2/It,Gt=(ot-e)/2/It,vt=it("center",0,0);ct.subMarkersControls.push(vt);var vt=it("topleft",-St,-Gt);ct.subMarkersControls.push(vt);var vt=it("topright",+St,-Gt);ct.subMarkersControls.push(vt);var vt=it("bottomleft",-St,+Gt);ct.subMarkersControls.push(vt);var vt=it("bottomright",+St,+Gt);return ct.subMarkersControls.push(vt),ct;function it(Tt,Et,Mt){console.log("buildSubMarkerControls",Tt,Et,Mt);var Rt={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(Et,0,Mt).toArray()};return $==="artoolkit"?dt(Rt.parameters,Tt):$==="aruco"?bt(Rt.parameters,Tt):console.assert(!1),Rt}function dt(Tt,Et){var Mt=document.createElement("a");Mt.href=ARjs.Context.baseURL;var Rt=Mt.href,pt={center:mt(Rt+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:mt(Rt+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:mt(Rt+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:mt(Rt+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:mt(Rt+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};console.assert(pt[Et]!==void 0),Tt.type="pattern",Tt.patternUrl=pt[Et];return;function mt(gt){var Ct=document.createElement("a");return Ct.href=gt,Ct.href}}function bt(Tt,Et){var Mt={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(Mt[Et]),Tt.type="barcode",Tt.barcodeValue=Mt[Et]}},AFRAME.registerComponent("arjs-anchor",{dependencies:["arjs","artoolkit"],schema:{preset:{type:"string"},markerhelpers:{type:"boolean",default:!1},size:{type:"number",default:1},type:{type:"string"},patternUrl:{type:"string"},barcodeValue:{type:"number"},changeMatrixMode:{type:"string",default:"modelViewMatrix"},minConfidence:{type:"number",default:.6},smooth:{type:"boolean",default:!1},smoothCount:{type:"number",default:5},smoothTolerance:{type:"number",default:.01},smoothThreshold:{type:"number",default:2}},init:function(){var $=this,et=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;$.isReady=!1,$._arAnchor=null,$.data.changeMatrixMode==="modelViewMatrix"?$.el.object3D.visible=!1:$.data.changeMatrixMode==="cameraTransformMatrix"?$.el.sceneEl.object3D.visible=!1:console.assert(!1);var ot=setInterval(function(){if(et.isReady!==!1){clearInterval(ot);var ct=et._arProfile;ct.changeMatrixMode($.data.changeMatrixMode);var st=Object.assign({},ct.defaultMarkerParameters);$.data.preset==="hiro"?(st.type="pattern",st.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-hiro.patt",st.markersAreaEnabled=!1):$.data.preset==="kanji"?(st.type="pattern",st.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-kanji.patt",st.markersAreaEnabled=!1):$.data.preset==="area"?(st.type="barcode",st.barcodeValue=1001,st.markersAreaEnabled=!0):$.data.type==="barcode"?st={type:$.data.type,changeMatrixMode:"modelViewMatrix",barcodeValue:$.data.barcodeValue,markersAreaEnabled:!1}:$.data.type==="pattern"&&(st.type=$.data.type,st.patternUrl=$.data.patternUrl,st.markersAreaEnabled=!1),st.smooth=$.data.smooth,st.smoothCount=$.data.smoothCount,st.smoothTolerance=$.data.smoothTolerance,st.smoothThreshold=$.data.smoothThreshold;var e=et._arSession,It=$._arAnchor=new ARjs.Anchor(e,st);if($.isReady=!0,et.data.debugUIEnabled){var St=document.querySelector("#arjsDebugUIContainer");St===null&&(St=document.createElement("div"),St.id="arjsDebugUIContainer",St.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1; color: grey;"),document.body.appendChild(St));var Gt=new ARjs.AnchorDebugUI(It);St.appendChild(Gt.domElement)}}},1e3/60)},remove:function(){},update:function(){},tick:function(){var $=this;if(this.isReady!==!1){this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit,this._arAnchor.update();var et=this._arAnchor.object3d;if(et.updateMatrixWorld(!0),et.matrixWorld.decompose(this.el.object3D.position,this.el.object3D.quaternion,this.el.object3D.scale),$._arAnchor.parameters.changeMatrixMode==="modelViewMatrix"){var ot=$.el.object3D.visible;$.el.object3D.visible=this._arAnchor.object3d.visible}else if($._arAnchor.parameters.changeMatrixMode==="cameraTransformMatrix"){var ot=$.el.sceneEl.object3D.visible;$.el.sceneEl.object3D.visible=this._arAnchor.object3d.visible}else console.assert(!1);$._arAnchor.object3d.visible===!0&&ot===!1?$.el.emit("markerFound"):$._arAnchor.object3d.visible===!1&&ot===!0&&$.el.emit("markerLost")}}}),AFRAME.registerPrimitive("a-anchor",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-camera-static",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{camera:{}},mappings:{}})),AFRAME.registerPrimitive("a-marker",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-marker-camera",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{changeMatrixMode:"cameraTransformMatrix"},camera:{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers"}})),AFRAME.registerComponent("arjs-hit-testing",{dependencies:["arjs","artoolkit"],schema:{enabled:{type:"boolean",default:!1},renderDebug:{type:"boolean",default:!1}},init:function(){var $=this,et=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;$.isReady=!1,$._arAnchor=null,$._arHitTesting=null;var ot=setInterval(function(){var ct=$.el,st=ct.components["arjs-anchor"];if(!(st===void 0||st.isReady===!1)){clearInterval(ot),st._arAnchor;var e=et._arSession;e.parameters.renderer;var It=$._arHitTesting=new ARjs.HitTesting(e);It.enabled=$.data.enabled,$.isReady=!0}},1e3/60)},remove:function(){},update:function(){},tick:function(){var $=this;if(this.isReady!==!1){var et=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit,ot=et._arSession,ct=$.el,st=ct.components["arjs-anchor"],e=st._arAnchor,It=this._arHitTesting,St=ot.parameters.camera;It.update(St,e.object3d,e.parameters.changeMatrixMode)}}}),AFRAME.registerComponent("gps-camera-debug",{init:function(){this.current_coords_latitude,this.current_coords_longitude,this.origin_coords_latitude,this.origin_coords_longitude,this.camera_p_x,this.camera_p_z,this.entities=0,this._buildCameraDebugUI(document.body),this.current_coords_latitude=document.querySelector("#current_coords_latitude"),this.current_coords_longitude=document.querySelector("#current_coords_longitude"),this.origin_coords_latitude=document.querySelector("#origin_coords_latitude"),this.origin_coords_longitude=document.querySelector("#origin_coords_longitude"),this.camera_p_x=document.querySelector("#camera_p_x"),this.camera_p_z=document.querySelector("#camera_p_z"),this.placesLoadedEventHandler=function(){this.entities++;var $=document.querySelectorAll("[gps-entity-place]")&&document.querySelectorAll("[gps-entity-place]").length||0;$===this.entities&&(this._buildDistancesDebugUI(),window.removeEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this)),window.dispatchEvent(new CustomEvent("debug-ui-added")))},window.addEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this))},tick:function(){var $=document.querySelector("[gps-camera]"),et=$.getAttribute("position");this.camera_p_x.innerText=et.x.toFixed(6),this.camera_p_z.innerText=et.z.toFixed(6);var ot=$.components["gps-camera"];ot&&(ot.currentCoords&&(this.current_coords_longitude.innerText=ot.currentCoords.longitude.toFixed(6),this.current_coords_latitude.innerText=ot.currentCoords.latitude.toFixed(6)),ot.originCoords&&(this.origin_coords_longitude.innerText=ot.originCoords.longitude.toFixed(6),this.origin_coords_latitude.innerText=ot.originCoords.latitude.toFixed(6)))},_buildCameraDebugUI:function($){var et=document.createElement("div");et.classList.add("debug");var ot=document.createElement("div");ot.innerText="current lng/lat coords: ";var ct=document.createElement("span");ct.id="current_coords_longitude";var st=document.createElement("span");st.id="current_coords_latitude",ot.appendChild(ct),ot.appendChild(st),et.appendChild(ot);var e=document.createElement("div");e.innerText="origin lng/lat coords: ";var It=document.createElement("span");It.id="origin_coords_longitude";var St=document.createElement("span");St.id="origin_coords_latitude",e.appendChild(It),e.appendChild(St),et.appendChild(e);var Gt=document.createElement("div");Gt.innerText="camera 3d position: ";var vt=document.createElement("span");vt.id="camera_p_x";var it=document.createElement("span");it.id="camera_p_z",Gt.appendChild(vt),Gt.appendChild(it),et.appendChild(Gt),$.appendChild(et)},_buildDistancesDebugUI:function(){var $=document.querySelector(".debug");document.querySelectorAll("[gps-entity-place]").forEach(function(et){var ot=document.createElement("div");ot.classList.add("debug-distance"),ot.innerHTML=et.getAttribute("value"),console.log(et.getAttribute("value")),ot.setAttribute("value",et.getAttribute("value")),$.appendChild(ot)})}}),AFRAME.registerComponent("gps-camera",{_watchPositionId:null,originCoords:null,currentCoords:null,lookControls:null,heading:null,schema:{simulateLatitude:{type:"number",default:0},simulateLongitude:{type:"number",default:0},simulateAltitude:{type:"number",default:0},positionMinAccuracy:{type:"int",default:100},alert:{type:"boolean",default:!1},minDistance:{type:"int",default:0}},init:function(){if(this.el.components["look-controls"]){this.loader=document.createElement("DIV"),this.loader.classList.add("arjs-loader"),document.body.appendChild(this.loader),window.addEventListener("gps-entity-place-added",(function(){this.originCoords&&(window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")),this.loader&&this.loader.parentElement&&document.body.removeChild(this.loader)}).bind(this)),this.lookControls=this.el.components["look-controls"];var $=this._getDeviceOrientationEventName();if(this._onDeviceOrientation=this._onDeviceOrientation.bind(this),navigator.userAgent.match(/Version\/[\d.]+.*Safari/))if(typeof DeviceOrientationEvent.requestPermission=="function"){var et=function(){console.log("Requesting device orientation permissions..."),DeviceOrientationEvent.requestPermission(),document.removeEventListener("touchend",et)};document.addEventListener("touchend",function(){et()},!1),alert("After camera permission prompt, please tap the screen to activate geolocation.")}else{var ot=setTimeout(function(){alert("Please enable device orientation in Settings > Safari > Motion & Orientation Access.")},750);window.addEventListener($,function(){clearTimeout(ot)})}window.addEventListener($,this._onDeviceOrientation,!1),this._watchPositionId=this._initWatchGPS((function(ct){this.data.simulateLatitude!==0&&this.data.simulateLongitude!==0?(localPosition=Object.assign({},ct.coords),localPosition.longitude=this.data.simulateLongitude,localPosition.latitude=this.data.simulateLatitude,localPosition.altitude=this.data.simulateAltitude,this.currentCoords=localPosition):this.currentCoords=ct.coords,this._updatePosition()}).bind(this))}},tick:function(){this.heading!==null&&this._updateRotation()},remove:function(){this._watchPositionId&&navigator.geolocation.clearWatch(this._watchPositionId),this._watchPositionId=null;var $=this._getDeviceOrientationEventName();window.removeEventListener($,this._onDeviceOrientation,!1)},_getDeviceOrientationEventName:function(){if("ondeviceorientationabsolute"in window)var $="deviceorientationabsolute";else if("ondeviceorientation"in window)var $="deviceorientation";else{var $="";console.error("Compass not supported")}return $},_initWatchGPS:function($,et){return et||(et=function(ot){if(console.warn("ERROR("+ot.code+"): "+ot.message),ot.code===1){alert("Please activate Geolocation and refresh the page. If it is already active, please check permissions for this website.");return}if(ot.code===3){alert("Cannot retrieve GPS position. Signal is absent.");return}}),"geolocation"in navigator?navigator.geolocation.watchPosition($,et,{enableHighAccuracy:!0,maximumAge:0,timeout:27e3}):(et({code:0,message:"Geolocation is not supported by your browser"}),Promise.resolve())},_updatePosition:function(){if(this.currentCoords.accuracy>this.data.positionMinAccuracy){if(this.data.alert&&!document.getElementById("alert-popup")){var $=document.createElement("div");$.innerHTML="GPS signal is very poor. Try move outdoor or to an area with a better signal.",$.setAttribute("id","alert-popup"),document.body.appendChild($)}return}var et=document.getElementById("alert-popup");if(this.currentCoords.accuracy<=this.data.positionMinAccuracy&&et&&document.body.removeChild(et),this.originCoords)this._setPosition();else{this.originCoords=this.currentCoords,this._setPosition();var ot=document.querySelector(".arjs-loader");ot&&document.body.removeChild(ot),window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")}},_setPosition:function(){var $=this.el.getAttribute("position"),et={longitude:this.currentCoords.longitude,latitude:this.originCoords.latitude};$.x=this.computeDistanceMeters(this.originCoords,et),$.x*=this.currentCoords.longitude>this.originCoords.longitude?1:-1;var et={longitude:this.originCoords.longitude,latitude:this.currentCoords.latitude};$.z=this.computeDistanceMeters(this.originCoords,et),$.z*=this.currentCoords.latitude>this.originCoords.latitude?-1:1,this.el.setAttribute("position",$),window.dispatchEvent(new CustomEvent("gps-camera-update-position",{detail:{position:this.currentCoords,origin:this.originCoords}}))},computeDistanceMeters:function($,et,ot){var ct=THREE.Math.degToRad(et.longitude-$.longitude),st=THREE.Math.degToRad(et.latitude-$.latitude),e=Math.sin(st/2)*Math.sin(st/2)+Math.cos(THREE.Math.degToRad($.latitude))*Math.cos(THREE.Math.degToRad(et.latitude))*(Math.sin(ct/2)*Math.sin(ct/2)),It=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)),St=It*6378160;return ot&&this.data.minDistance&&this.data.minDistance>0&&St<this.data.minDistance?Number.MAX_SAFE_INTEGER:St},_computeCompassHeading:function($,et,ot){var ct=$*(Math.PI/180),st=et*(Math.PI/180),e=ot*(Math.PI/180),It=Math.cos(ct),St=Math.sin(ct),Gt=Math.sin(st),vt=Math.cos(e),it=Math.sin(e),dt=-It*it-St*Gt*vt,bt=-St*it+It*Gt*vt,Tt=Math.atan(dt/bt);return bt<0?Tt+=Math.PI:dt<0&&(Tt+=2*Math.PI),Tt*=180/Math.PI,Tt},_onDeviceOrientation:function($){$.webkitCompassHeading!==void 0?$.webkitCompassAccuracy<50?this.heading=$.webkitCompassHeading:console.warn("webkitCompassAccuracy is event.webkitCompassAccuracy"):$.alpha!==null?$.absolute===!0||$.absolute===void 0?this.heading=this._computeCompassHeading($.alpha,$.beta,$.gamma):console.warn("event.absolute === false"):console.warn("event.alpha === null")},_updateRotation:function(){var $=360-this.heading,et=this.el.getAttribute("rotation").y,ot=THREE.Math.radToDeg(this.lookControls.yawObject.rotation.y),ct=($-(et-ot))%360;this.lookControls.yawObject.rotation.y=THREE.Math.degToRad(ct)}}),AFRAME.registerComponent("gps-entity-place",{_cameraGps:null,schema:{longitude:{type:"number",default:0},latitude:{type:"number",default:0}},init:function(){window.addEventListener("gps-camera-origin-coord-set",(function(){if(!this._cameraGps){var $=document.querySelector("[gps-camera]");if(!$.components["gps-camera"]){console.error("gps-camera not initialized");return}this._cameraGps=$.components["gps-camera"]}this._updatePosition()}).bind(this)),window.addEventListener("gps-camera-update-position",(function($){if(!(!this.data||!this._cameraGps)){var et={longitude:this.data.longitude,latitude:this.data.latitude},ot=this._cameraGps.computeDistanceMeters($.detail.position,et);this.el.setAttribute("distance",ot),this.el.setAttribute("distanceMsg",formatDistance(ot)),this.el.dispatchEvent(new CustomEvent("gps-entity-place-update-positon",{detail:{distance:ot}}))}}).bind(this)),this._positionXDebug=0,window.dispatchEvent(new CustomEvent("gps-entity-place-added")),console.debug("gps-entity-place-added"),this.debugUIAddedHandler=function(){this.setDebugData(this.el),window.removeEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},window.addEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},_updatePosition:function(){var $={x:0,y:this.el.getAttribute("position").y||0,z:0},et=!1,ot={longitude:this.data.longitude,latitude:this._cameraGps.originCoords.latitude};$.x=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,ot,!0),$.x===Number.MAX_SAFE_INTEGER&&(et=!0),this._positionXDebug=$.x,$.x*=this.data.longitude>this._cameraGps.originCoords.longitude?1:-1;var ot={longitude:this._cameraGps.originCoords.longitude,latitude:this.data.latitude};$.z=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,ot,!0),$.z===Number.MAX_SAFE_INTEGER&&(et=!0),$.z*=this.data.latitude>this._cameraGps.originCoords.latitude?-1:1,$.y!==0&&($.y=$.y-this._cameraGps.originCoords.altitude),et?this.el.setAttribute("visible",!1):this.el.setAttribute("visible",!0),this.el.setAttribute("position",$)},setDebugData:function($){var et=document.querySelectorAll(".debug-distance");et.forEach(function(ot){var ct=formatDistance(this._positionXDebug);$.getAttribute("value")==ot.getAttribute("value")&&(ot.innerHTML=ot.getAttribute("value")+": "+ct+"far")})}});function formatDistance($){return $=$.toFixed(0),$>=1e3?$/1e3+" kilometers":$+" meters"}AFRAME.registerSystem("arjs",{schema:{trackingMethod:{type:"string",default:"best"},debugUIEnabled:{type:"boolean",default:!0},areaLearningButton:{type:"boolean",default:!0},performanceProfile:{type:"string",default:"default"},debug:{type:"boolean",default:!1},detectionMode:{type:"string",default:""},matrixCodeType:{type:"string",default:""},patternRatio:{type:"number",default:-1},labelingMode:{type:"string",default:""},cameraParametersUrl:{type:"string",default:""},maxDetectionRate:{type:"number",default:-1},sourceType:{type:"string",default:""},sourceUrl:{type:"string",default:""},sourceWidth:{type:"number",default:-1},sourceHeight:{type:"number",default:-1},deviceId:{type:"string",default:""},displayWidth:{type:"number",default:-1},displayHeight:{type:"number",default:-1},canvasWidth:{type:"number",default:-1},canvasHeight:{type:"number",default:-1}},init:function(){var $=this,et=this._arProfile=new ARjs.Profile().trackingMethod(this.data.trackingMethod).performance(this.data.performanceProfile).defaultMarker();this.data.debug!==!1&&(et.contextParameters.debug=this.data.debug),this.data.detectionMode!==""&&(et.contextParameters.detectionMode=this.data.detectionMode),this.data.matrixCodeType!==""&&(et.contextParameters.matrixCodeType=this.data.matrixCodeType),this.data.patternRatio!==-1&&(et.contextParameters.patternRatio=this.data.patternRatio),this.data.labelingMode!==""&&(et.contextParameters.labelingMode=this.data.labelingMode),this.data.cameraParametersUrl!==""&&(et.contextParameters.cameraParametersUrl=this.data.cameraParametersUrl),this.data.maxDetectionRate!==-1&&(et.contextParameters.maxDetectionRate=this.data.maxDetectionRate),this.data.canvasWidth!==-1&&(et.contextParameters.canvasWidth=this.data.canvasWidth),this.data.canvasHeight!==-1&&(et.contextParameters.canvasHeight=this.data.canvasHeight),this.data.sourceType!==""&&(et.sourceParameters.sourceType=this.data.sourceType),this.data.sourceUrl!==""&&(et.sourceParameters.sourceUrl=this.data.sourceUrl),this.data.sourceWidth!==-1&&(et.sourceParameters.sourceWidth=this.data.sourceWidth),this.data.sourceHeight!==-1&&(et.sourceParameters.sourceHeight=this.data.sourceHeight),this.data.deviceId!==""&&(et.sourceParameters.deviceId=this.data.deviceId),this.data.displayWidth!==-1&&(et.sourceParameters.displayWidth=this.data.displayWidth),this.data.displayHeight!==-1&&(et.sourceParameters.displayHeight=this.data.displayHeight),et.checkIfValid(),this._arSession=null,$.isReady=!1,$.needsOverride=!0,this.el.sceneEl.addEventListener("renderstart",function(){var st=$.el.sceneEl.object3D,e=$.el.sceneEl.camera,It=$.el.sceneEl.renderer,St=$._arSession=new ARjs.Session({scene:st,renderer:It,camera:e,sourceParameters:et.sourceParameters,contextParameters:et.contextParameters});$.isReady=!0,window.addEventListener("resize",Gt);function Gt(){var it=$._arSession.arSource;et.contextParameters.trackingBackend!=="tango"&&it.copyElementSizeTo(document.body);var dt=document.querySelector(".a-enter-vr");dt&&(dt.style.position="fixed")}$.data.debugUIEnabled&&vt();function vt(){var it=document.querySelector("#arjsDebugUIContainer");it===null&&(it=document.createElement("div"),it.id="arjsDebugUIContainer",it.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1;color: grey;"),document.body.appendChild(it));var dt=new ARjs.SessionDebugUI(St);it.appendChild(dt.domElement)}});var ot=Date.now(),ct=setInterval(function(){if(Date.now()-ot>1e4*1e3){clearInterval(ct);return}window.dispatchEvent(new Event("resize"))},1e3/30)},tick:function($,et){this.isReady!==!1&&(this._arSession,this._arSession.update(),this._arSession.onResize())}})})(aframeAr_min);aframeAr_min.exports;const ARScene=()=>jsxRuntimeExports.jsx("a-scene",{embedded:!0,"vr-mode-ui":"enabled: false",arjs:"sourceType: webcam; debugUIEnabled: false;",children:jsxRuntimeExports.jsx("a-marker",{preset:"hiro",children:jsxRuntimeExports.jsx("a-camera-static",{children:jsxRuntimeExports.jsx("a-cursor",{"gltf-model":"https://grafsoul.github.io/a-frame-react-starter/photo-camera.glb",position:"0 0 -1",scale:"2 2 2",animation:"property: rotation; to: 0 360 0; loop: true; dur: 5000"})})})});function App(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ARScene,{})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
